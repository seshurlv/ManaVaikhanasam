function validElementString(n){try{return angular.element(n).length!==0}catch(t){return!1}}function registerTextAngularTool(n,t){if(!n||n===""||taTools.hasOwnProperty(n))throw"textAngular Error: A unique name is required for a Tool Definition";if(t.display&&(t.display===""||!validElementString(t.display))||!t.display&&!t.buttontext&&!t.iconclass)throw'textAngular Error: Tool Definition for "'+n+'" does not have a valid display/iconclass/buttontext value';taTools[n]=t}function RGBColor(n){var r,u,t,i;this.ok=!1;n.charAt(0)=="#"&&(n=n.substr(1,6));n=n.replace(/ /g,"");n=n.toLowerCase();r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(u in r)n==u&&(n=r[u]);for(t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}],i=0;i<t.length;i++){var e=t[i].re,o=t[i].process,f=e.exec(n);f&&(channels=o(f),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r;this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g;this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var n=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return n.length==1&&(n="0"+n),t.length==1&&(t="0"+t),i.length==1&&(i="0"+i),"#"+n+t+i};this.getHelpXML=function(){for(var o,u,c,f,l,i=[],n=0;n<t.length;n++)for(o=t[n].example,u=0;u<o.length;u++)i[i.length]=o[u];for(c in r)i[i.length]=c;for(f=document.createElement("ul"),f.setAttribute("id","rgbcolor-examples"),n=0;n<i.length;n++)try{var s=document.createElement("li"),e=new RGBColor(i[n]),h=document.createElement("div");h.style.cssText="margin: 3px; border: 1px solid black; background:"+e.toHex()+"; color:"+e.toHex();h.appendChild(document.createTextNode("test"));l=document.createTextNode(" "+i[n]+" -> "+e.toRGB()+" -> "+e.toHex());s.appendChild(h);s.appendChild(l);f.appendChild(s)}catch(a){}return f}}var ngFileUpload,taTools,AmCharts,saveAs,jsPDF;(function(n,t,i){"use strict";function v(n){return function(){for(var i=arguments[0],u,t,r="["+(n?n+":":"")+i+"] http://errors.angularjs.org/1.4.7/"+(n?n+"/":"")+i,i=1;i<arguments.length;i++)r=r+(1==i?"?":"&")+"p"+(i-1)+"=",u=encodeURIComponent,t=arguments[i],t="function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof t?"undefined":"string"!=typeof t?JSON.stringify(t):t,r+=u(t);return Error(r)}}function fi(n){if(null==n||er(n))return!1;var t="length"in Object(n)&&n.length;return n.nodeType===wt&&t?!0:l(n)||a(n)||0===t||"number"==typeof t&&0<t&&t-1 in n}function r(n,t,i){var u,f,e;if(n)if(h(n))for(u in n)"prototype"==u||"length"==u||"name"==u||n.hasOwnProperty&&!n.hasOwnProperty(u)||t.call(i,n[u],u,n);else if(a(n)||fi(n))for(e="object"!=typeof n,u=0,f=n.length;u<f;u++)(e||u in n)&&t.call(i,n[u],u,n);else if(n.forEach&&n.forEach!==r)n.forEach(t,i,n);else if(ye(n))for(u in n)t.call(i,n[u],u,n);else if("function"==typeof n.hasOwnProperty)for(u in n)n.hasOwnProperty(u)&&t.call(i,n[u],u,n);else for(u in n)gt.call(n,u)&&t.call(i,n[u],u,n);return n}function ce(n,t,i){for(var r=Object.keys(n).sort(),u=0;u<r.length;u++)t.call(i,n[r[u]],r[u]);return r}function le(n){return function(t,i){n(i,t)}}function wc(){return++ku}function ae(n,t){t?n.$$hashKey=t:delete n.$$hashKey}function ff(n,t,i){for(var f,u,r,l=n.$$hashKey,e=0,v=t.length;e<v;++e)if(f=t[e],c(f)||h(f))for(var s=Object.keys(f),o=0,y=s.length;o<y;o++)u=s[o],r=f[u],i&&c(r)?et(r)?n[u]=new Date(r.valueOf()):wi(r)?n[u]=new RegExp(r):(c(n[u])||(n[u]=a(r)?[]:{}),ff(n[u],[r],!0)):n[u]=r;return ae(n,l),n}function p(n){return ff(n,ni.call(arguments,1),!1)}function bc(n){return ff(n,ni.call(arguments,1),!0)}function tt(n){return parseInt(n,10)}function ef(n,t){return p(Object.create(n),t)}function o(){}function fr(n){return n}function vt(n){return function(){return n}}function ve(n){return h(n.toString)&&n.toString!==Object.prototype.toString}function f(n){return"undefined"==typeof n}function e(n){return"undefined"!=typeof n}function c(n){return null!==n&&"object"==typeof n}function ye(n){return null!==n&&"object"==typeof n&&!eh(n)}function l(n){return"string"==typeof n}function k(n){return"number"==typeof n}function et(n){return"[object Date]"===ti.call(n)}function h(n){return"function"==typeof n}function wi(n){return"[object RegExp]"===ti.call(n)}function er(n){return n&&n.window===n}function or(n){return n&&n.$evalAsync&&n.$watch}function sr(n){return"boolean"==typeof n}function pe(n){return!(!n||!(n.nodeName||n.prop&&n.attr&&n.find))}function kc(n){var i={},t;for(n=n.split(","),t=0;t<n.length;t++)i[n[t]]=!0;return i}function bt(n){return y(n.nodeName||n[0]&&n[0].nodeName)}function hr(n,t){var i=n.indexOf(t);return 0<=i&&n.splice(i,1),i}function st(n,t,i,u){var f,e;if(er(n)||or(n))throw li("cpws");if(oh.test(ti.call(t)))throw li("cpta");if(t){if(n===t)throw li("cpi");if(i=i||[],u=u||[],c(n)&&(i.push(n),u.push(t)),a(n))for(f=t.length=0;f<n.length;f++)t.push(st(n[f],null,i,u));else{if(e=t.$$hashKey,a(t)?t.length=0:r(t,function(n,i){delete t[i]}),ye(n))for(f in n)t[f]=st(n[f],null,i,u);else if(n&&"function"==typeof n.hasOwnProperty)for(f in n)n.hasOwnProperty(f)&&(t[f]=st(n[f],null,i,u));else for(f in n)gt.call(n,f)&&(t[f]=st(n[f],null,i,u));ae(t,e)}}else if(t=n,c(n)){if(i&&-1!==(e=i.indexOf(n)))return u[e];if(a(n))return st(n,[],i,u);if(oh.test(ti.call(n)))t=new n.constructor(n);else if(et(n))t=new Date(n.getTime());else if(wi(n))t=new RegExp(n.source,n.toString().match(/[^\/]*$/)[0]),t.lastIndex=n.lastIndex;else if(h(n.cloneNode))t=n.cloneNode(!0);else return f=Object.create(eh(n)),st(n,f,i,u);u&&(i.push(n),u.push(t))}return t}function ht(n,t){if(a(n)){t=t||[];for(var i=0,r=n.length;i<r;i++)t[i]=n[i]}else if(c(n))for(i in t=t||{},n)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(t[i]=n[i]);return t||n}function ot(n,t){if(n===t)return!0;if(null===n||null===t)return!1;if(n!==n&&t!==t)return!0;var r=typeof n,i;if(r==typeof t&&"object"==r)if(a(n)){if(!a(t))return!1;if((r=n.length)==t.length){for(i=0;i<r;i++)if(!ot(n[i],t[i]))return!1;return!0}}else{if(et(n))return et(t)?ot(n.getTime(),t.getTime()):!1;if(wi(n))return wi(t)?n.toString()==t.toString():!1;if(or(n)||or(t)||er(n)||er(t)||a(t)||et(t)||wi(t))return!1;r=it();for(i in n)if("$"!==i.charAt(0)&&!h(n[i])){if(!ot(n[i],t[i]))return!1;r[i]=!0}for(i in t)if(!(i in r)&&"$"!==i.charAt(0)&&e(t[i])&&!h(t[i]))return!1;return!0}return!1}function cr(n,t,i){return n.concat(ni.call(t,i))}function we(n,t){var i=2<arguments.length?ni.call(arguments,2):[];return!h(t)||t instanceof RegExp?t:i.length?function(){return arguments.length?t.apply(n,cr(i,arguments,0)):t.apply(n,i)}:function(){return arguments.length?t.apply(n,arguments):t.call(n)}}function dc(n,r){var u=r;return"string"==typeof n&&"$"===n.charAt(0)&&"$"===n.charAt(1)?u=i:er(r)?u="$WINDOW":r&&t===r?u="$DOCUMENT":or(r)&&(u="$SCOPE"),u}function lr(n,t){return"undefined"==typeof n?i:(k(t)||(t=t?2:null),JSON.stringify(n,dc,t))}function be(n){return l(n)?JSON.parse(n):n}function ke(n,t){var i=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(i)?t:i}function of(n,t,i){i=i?-1:1;var r=ke(t,n.getTimezoneOffset());return t=n,n=i*(r-n.getTimezoneOffset()),t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+n),t}function kt(n){n=s(n).clone();try{n.empty()}catch(i){}var t=s("<div>").append(n).html();try{return n[0].nodeType===ir?y(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(n,t){return"<"+y(t)})}catch(r){return y(t)}}function de(n){try{return decodeURIComponent(n)}catch(t){}}function ge(n){var t={};return r((n||"").split("&"),function(n){var u,i,r;n&&(i=n=n.replace(/\+/g,"%20"),u=n.indexOf("="),-1!==u&&(i=n.substring(0,u),r=n.substring(u+1)),i=de(i),e(i)&&(r=e(r)?de(r):!0,gt.call(t,i)?a(t[i])?t[i].push(r):t[i]=[t[i],r]:t[i]=r))}),t}function sf(n){var t=[];return r(n,function(n,i){a(n)?r(n,function(n){t.push(ct(i,!0)+(!0===n?"":"="+ct(n,!0)))}):t.push(ct(i,!0)+(!0===n?"":"="+ct(n,!0)))}),t.length?t.join("&"):""}function tu(n){return ct(n,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ct(n,t){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function gc(n,t){for(var i,u=tr.length,r=0;r<u;++r)if(i=tr[r]+t,l(i=n.getAttribute(i)))return i;return null}function nl(n,t){var i,u,f={};r(tr,function(t){t+="app";!i&&n.hasAttribute&&n.hasAttribute(t)&&(i=n,u=n.getAttribute(t))});r(tr,function(t){t+="app";var r;!i&&(r=n.querySelector("["+t.replace(":","\\:")+"]"))&&(i=r,u=r.getAttribute(t))});i&&(f.strictDi=null!==gc(i,"strict-di"),t(i,u?[u]:[],f))}function no(i,u,f){c(f)||(f={});f=p({strictDi:!1},f);var e=function(){if(i=s(i),i.injector()){var n=i[0]===t?"document":kt(i);throw li("btstrpd",n.replace(/</,"&lt;").replace(/>/,"&gt;"));}return u=u||[],u.unshift(["$provide",function(n){n.value("$rootElement",i)}]),f.debugInfoEnabled&&u.push(["$compileProvider",function(n){n.debugInfoEnabled(!0)}]),u.unshift("ng"),n=vr(u,f.strictDi),n.invoke(["$rootScope","$rootElement","$compile","$injector",function(n,t,i,r){n.$apply(function(){t.data("$injector",r);i(t)(n)})}]),n},o=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;if(n&&o.test(n.name)&&(f.debugInfoEnabled=!0,n.name=n.name.replace(o,"")),n&&!l.test(n.name))return e();n.name=n.name.replace(l,"");ut.resumeBootstrap=function(n){return r(n,function(n){u.push(n)}),e()};h(ut.resumeDeferredBootstrap)&&ut.resumeDeferredBootstrap()}function tl(){n.name="NG_ENABLE_DEBUG_INFO!"+n.name;n.location.reload()}function il(n){if(n=ut.element(n).injector(),!n)throw li("test");return n.get("$$testability")}function to(n,t){return t=t||"_",n.replace(cv,function(n,i){return(i?t:"")+n.toLowerCase()})}function rl(){var r,t;hh||(t=du(),(pt=f(t)?n.jQuery:t?n[t]:i)&&pt.fn.on?(s=pt,p(pt.fn,{scope:vi.scope,isolateScope:vi.isolateScope,controller:vi.controller,injector:vi.injector,inheritedData:vi.inheritedData}),r=pt.cleanData,pt.cleanData=function(n){var u,t,i;if(ie)ie=!1;else for(t=0;null!=(i=n[t]);t++)(u=pt._data(i,"events"))&&u.$destroy&&pt(i).triggerHandler("$destroy");r(n)}):s=b,ut.element=s,hh=!0)}function iu(n,t,i){if(!n)throw li("areq",t||"?",i||"required");return n}function bi(n,t,i){return i&&a(n)&&(n=n[n.length-1]),iu(h(n),t,"not a function, got "+(n&&"object"==typeof n?n.constructor.name||"Object":typeof n)),n}function ki(n,t){if("hasOwnProperty"===n)throw li("badname",t);}function io(n,t,i){if(!t)return n;t=t.split(".");for(var u,f=n,e=t.length,r=0;r<e;r++)u=t[r],n&&(n=(f=n)[u]);return!i&&h(n)?we(f,n):n}function ru(n){for(var t=n[0],u=n[n.length-1],i,r=1;t!==u&&(t=t.nextSibling);r++)(i||n[r]!==t)&&(i||(i=s(ni.call(n,0,r))),i.push(t));return i||n}function it(){return Object.create(null)}function ul(n){function t(n,t,i){return n[t]||(n[t]=i())}var i=v("$injector"),r=v("ng");return n=t(n,"angular",Object),n.$$minErr=n.$$minErr||v,t(n,"module",function(){var n={};return function(u,f,e){if("hasOwnProperty"===u)throw r("badname","module");return f&&n.hasOwnProperty(u)&&(n[u]=null),t(n,u,function(){function t(n,t,i,u){return u||(u=r),function(){return u[i||"push"]([n,t,arguments]),o}}function n(n,t){return function(i,f){return f&&h(f)&&(f.$$moduleName=u),r.push([n,t,arguments]),o}}if(!f)throw i("nomod",u);var r=[],s=[],c=[],l=t("$injector","invoke","push",s),o={_invokeQueue:r,_configBlocks:s,_runBlocks:c,requires:f,name:u,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:n("$provide","decorator"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),config:l,run:function(n){return c.push(n),this}};return e&&l(e),o})}})}function fl(t){p(t,{bootstrap:no,copy:st,extend:p,merge:bc,equals:ot,element:s,forEach:r,injector:vr,noop:o,bind:we,toJson:lr,fromJson:be,identity:fr,isUndefined:f,isDefined:e,isString:l,isFunction:h,isObject:c,isNumber:k,isElement:pe,isArray:a,version:lv,isDate:et,lowercase:y,uppercase:bu,callbacks:{counter:0},getTestability:il,$$minErr:v,$$csp:ai,reloadWithDebugInfo:tl});te=ul(n);te("ng",["ngLocale"],["$provide",function(n){n.provider({$$sanitizeUri:ya});n.provider("$compile",co).directive({a:tc,input:sc,textarea:sc,form:np,script:dw,select:tb,style:rb,option:ib,ngBind:sp,ngBindHtml:cp,ngBindTemplate:hp,ngClass:ap,ngClassEven:yp,ngClassOdd:vp,ngCloak:pp,ngController:wp,ngForm:tp,ngHide:vw,ngIf:kp,ngInclude:dp,ngInit:nw,ngNonBindable:ew,ngPluralize:cw,ngRepeat:lw,ngShow:aw,ngStyle:yw,ngSwitch:pw,ngSwitchWhen:ww,ngSwitchDefault:bw,ngOptions:hw,ngTransclude:kw,ngModel:rw,ngList:tw,ngChange:lp,pattern:vc,ngPattern:vc,required:ac,ngRequired:ac,minlength:pc,ngMinlength:pc,maxlength:yc,ngMaxlength:yc,ngValue:op,ngModelOptions:fw}).directive({ngInclude:gp}).directive(kr).directive(hc);n.provider({$anchorScroll:cl,$animate:ry,$animateCss:uy,$$animateQueue:iy,$$AnimateRunner:ty,$browser:vl,$cacheFactory:yl,$controller:wl,$document:bl,$exceptionHandler:kl,$filter:ys,$$forceReflow:ey,$interpolate:ua,$interval:fa,$http:na,$httpParamSerializer:dl,$httpParamSerializerJQLike:gl,$httpBackend:ia,$xhrFactory:ta,$location:ea,$log:oa,$parse:ha,$rootScope:va,$q:ca,$$q:la,$sce:ba,$sceDelegate:wa,$sniffer:ka,$templateCache:pl,$templateRequest:da,$$testability:ga,$timeout:nv,$window:tv,$$rAF:aa,$$jqLite:sl,$$HashMap:dv,$$cookieReader:iv})}])}function ar(n){return n.replace(av,function(n,t,i,r){return r?i.toUpperCase():i}).replace(vv,"Moz$1")}function ro(n){return n=n.nodeType,n===wt||!n||9===n}function uo(n,t){var i,u,f=t.createDocumentFragment(),e=[];if(ue.test(n)){for(i=i||f.appendChild(t.createElement("div")),u=(wv.exec(n)||["",""])[1].toLowerCase(),u=lt[u]||lt._default,i.innerHTML=u[1]+n.replace(bv,"<$1><\/$2>")+u[2],u=u[0];u--;)i=i.lastChild;e=cr(e,i.childNodes);i=f.firstChild;i.textContent=""}else e.push(t.createTextNode(n));return f.textContent="",f.innerHTML="",r(e,function(n){f.appendChild(n)}),f}function b(n){var i,r;if(n instanceof b)return n;if(l(n)&&(n=w(n),i=!0),!(this instanceof b)){if(i&&"<"!=n.charAt(0))throw re("nosel");return new b(n)}i&&(i=t,n=(r=pv.exec(n))?[i.createElement(r[1])]:(r=uo(n,i))?r.childNodes:[]);eo(this,n)}function hf(n){return n.cloneNode(!0)}function uu(n,t){if(t||fu(n),n.querySelectorAll)for(var r=n.querySelectorAll("*"),i=0,u=r.length;i<u;i++)fu(r[i])}function fo(n,t,i,u){if(e(u))throw re("offargs");var f=(u=eu(n))&&u.events,o=u&&u.handle;if(o)if(t)r(t.split(" "),function(t){if(e(i)){var r=f[t];if(hr(r||[],i),r&&0<r.length)return}n.removeEventListener(t,o,!1);delete f[t]});else for(t in f)"$destroy"!==t&&n.removeEventListener(t,o,!1),delete f[t]}function fu(n,t){var u=n.ng339,r=u&&rr[u];r&&(t?delete r.data[t]:(r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),fo(n)),delete rr[u],n.ng339=i))}function eu(n,t){var r=n.ng339,r=r&&rr[r];return t&&!r&&(n.ng339=r=++ch,r=rr[r]={events:{},data:{},handle:i}),r}function cf(n,t,i){if(ro(n)){var r=e(i),u=!r&&t&&!c(t),f=!t;if(n=(n=eu(n,!u))&&n.data,r)n[t]=i;else{if(f)return n;if(u)return n&&n[t];p(n,t)}}}function ou(n,t){return n.getAttribute?-1<(" "+(n.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" "):!1}function su(n,t){t&&n.setAttribute&&r(t.split(" "),function(t){n.setAttribute("class",w((" "+(n.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+w(t)+" "," ")))})}function hu(n,t){if(t&&n.setAttribute){var i=(" "+(n.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(t.split(" "),function(n){n=w(n);-1===i.indexOf(" "+n+" ")&&(i+=n+" ")});n.setAttribute("class",w(i))}}function eo(n,t){var i,r;if(t)if(t.nodeType)n[n.length++]=t;else if(i=t.length,"number"==typeof i&&t.window!==t){if(i)for(r=0;r<i;r++)n[n.length++]=t[r]}else n[n.length++]=t}function oo(n,t){return cu(n,"$"+(t||"ngController")+"Controller")}function cu(n,t,i){for(9==n.nodeType&&(n=n.documentElement),t=a(t)?t:[t];n;){for(var r=0,u=t.length;r<u;r++)if(e(i=s.data(n,t[r])))return i;n=n.parentNode||11===n.nodeType&&n.host}}function so(n){for(uu(n,!0);n.firstChild;)n.removeChild(n.firstChild)}function lf(n,t){t||uu(n);var i=n.parentNode;i&&i.removeChild(n)}function el(t,i){if(i=i||n,"complete"===i.document.readyState)i.setTimeout(t);else s(i).on("load",t)}function ho(n,t){var i=br[t.toLowerCase()];return i&&fe[bt(n)]&&i}function ol(n,t){var i=function(i,r){var u,e,s,o;if(i.isDefaultPrevented=function(){return i.defaultPrevented},u=t[r||i.type],e=u?u.length:0,e)for(f(i.immediatePropagationStopped)&&(s=i.stopImmediatePropagation,i.stopImmediatePropagation=function(){i.immediatePropagationStopped=!0;i.stopPropagation&&i.stopPropagation();s&&s.call(i)}),i.isImmediatePropagationStopped=function(){return!0===i.immediatePropagationStopped},1<e&&(u=ht(u)),o=0;o<e;o++)i.isImmediatePropagationStopped()||u[o].call(n,i)};return i.elem=n,i}function sl(){this.$get=function(){return p(b,{hasClass:function(n,t){return n.attr&&(n=n[0]),ou(n,t)},addClass:function(n,t){return n.attr&&(n=n[0]),hu(n,t)},removeClass:function(n,t){return n.attr&&(n=n[0]),su(n,t)}})}}function ei(n,t){var i=n&&n.$$hashKey;return i?("function"==typeof i&&(i=n.$$hashKey()),i):(i=typeof n,"function"==i||"object"==i&&null!==n?n.$$hashKey=i+":"+(t||wc)():i+":"+n)}function di(n,t){if(t){var i=0;this.nextUid=function(){return++i}}r(n,this.put,this)}function hl(n){return(n=n.toString().replace(ah,"").match(lh))?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function vr(n,t){function o(n){return function(t,i){if(c(t))r(t,le(n));else return n(t,i)}}function b(n,t){if(ki(n,"service"),(h(t)||a(t))&&(t=u.instantiate(t)),!t.$get)throw yi("pget",n);return v[n+"Provider"]=t}function nt(n,t){return function(){var i=e.invoke(t,this);if(f(i))throw yi("undef",n);return i}}function y(n,t,i){return b(n,{$get:!1!==i?nt(n,t):t})}function k(n){iu(f(n)||a(n),"modulesToLoad","not an array");var t=[],i;return r(n,function(n){function f(n){for(var i,r,t=0,f=n.length;t<f;t++)i=n[t],r=u.get(i[0]),r[i[1]].apply(r,i[2])}if(!g.get(n)){g.put(n,!0);try{l(n)?(i=te(n),t=t.concat(k(i.requires)).concat(i._runBlocks),f(i._invokeQueue),f(i._configBlocks)):h(n)?t.push(u.invoke(n)):a(n)?t.push(u.invoke(n)):bi(n,"module")}catch(r){throw a(n)&&(n=n[n.length-1]),r.message&&r.stack&&-1==r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),yi("modulerr",n,r.stack||r.message||r);}}}),t}function d(n,i){function r(t,r){if(n.hasOwnProperty(t)){if(n[t]===p)throw yi("cdep",t+" <- "+s.join(" <- "));return n[t]}try{return s.unshift(t),n[t]=p,n[t]=i(t,r)}catch(u){throw n[t]===p&&delete n[t],u;}finally{s.shift()}}function u(n,i,u,f){"string"==typeof u&&(f=u,u=null);for(var h=[],c=vr.$$annotate(n,t,f),e,o=0,s=c.length;o<s;o++){if(e=c[o],"string"!=typeof e)throw yi("itkn",e);h.push(u&&u.hasOwnProperty(e)?u[e]:r(e,f))}return a(n)&&(n=n[s]),n.apply(i,h)}return{invoke:u,instantiate:function(n,t,i){var r=Object.create((a(n)?n[n.length-1]:n).prototype||null);return n=u(n,r,t,i),c(n)||h(n)?n:r},get:r,annotate:vr.$$annotate,has:function(t){return v.hasOwnProperty(t+"Provider")||n.hasOwnProperty(t)}}}t=!0===t;var p={},s=[],g=new di([],!0),v={$provide:{provider:o(b),factory:o(y),service:o(function(n,t){return y(n,["$injector",function(n){return n.instantiate(t)}])}),value:o(function(n,t){return y(n,vt(t),!1)}),constant:o(function(n,t){ki(n,"constant");v[n]=t;w[n]=t}),decorator:function(n,t){var i=u.get(n+"Provider"),r=i.$get;i.$get=function(){var n=e.invoke(r,i);return e.invoke(t,null,{$delegate:n})}}}},u=v.$injector=d(v,function(n,t){ut.isString(t)&&s.push(t);throw yi("unpr",s.join(" <- "));}),w={},e=w.$injector=d(w,function(n,t){var r=u.get(n+"Provider",t);return e.invoke(r.$get,r,i,n)});return r(k(n),function(n){n&&e.invoke(n)}),e}function cl(){var n=!0;this.disableAutoScrolling=function(){n=!1};this.$get=["$window","$location","$rootScope",function(t,i,r){function o(n){var t=null;return Array.prototype.some.call(n,function(n){if("a"===bt(n))return t=n,!0}),t}function u(n){if(n){n.scrollIntoView();var i;i=f.yOffset;h(i)?i=i():pe(i)?(i=i[0],i="fixed"!==t.getComputedStyle(i).position?0:i.getBoundingClientRect().bottom):k(i)||(i=0);i&&(n=n.getBoundingClientRect().top,t.scrollBy(0,n-i))}else t.scrollTo(0,0)}function f(n){n=l(n)?n:i.hash();var t;n?(t=e.getElementById(n))?u(t):(t=o(e.getElementsByName(n)))?u(t):"top"===n&&u(null):u(null)}var e=t.document;return n&&r.$watch(function(){return i.hash()},function(n,t){n===t&&""===n||el(function(){r.$evalAsync(f)})}),f}]}function yr(n,t){return!n&&!t?"":n?t?(a(n)&&(n=n.join(" ")),a(t)&&(t=t.join(" ")),n+" "+t):n:t}function ll(n){l(n)&&(n=n.split(" "));var t=it();return r(n,function(n){n.length&&(t[n]=!0)}),t}function oi(n){return c(n)?n:{}}function al(n,t,i,u){function k(n){try{n.apply(null,ni.call(arguments,1))}finally{if(l--,0===l)for(;b.length;)try{b.pop()()}catch(t){i.error(t)}}}function d(){y=null;g();tt()}function g(){n:{try{h=p.state;break n}catch(n){}h=void 0}h=f(h)?null:h;ot(h,nt)&&(h=nt);nt=h}function tt(){(v!==e.url()||a!==h)&&(v=e.url(),a=h,r(it,function(n){n(e.url(),h)}))}var e=this,c=n.location,p=n.history,ut=n.setTimeout,ft=n.clearTimeout,w={},l,b;e.isMock=!1;l=0;b=[];e.$$completeOutstandingRequest=k;e.$$incOutstandingRequestCount=function(){l++};e.notifyWhenNoOutstandingRequests=function(n){0===l?n():b.push(n)};var h,a,v=c.href,et=t.find("base"),y=null;g();a=h;e.url=function(t,i,r){var s,o;return(f(r)&&(r=null),c!==n.location&&(c=n.location),p!==n.history&&(p=n.history),t)?(s=a===r,v===t&&(!u.history||s))?e:(o=v&&si(v)===si(t),v=t,a=r,!u.history||o&&s?((!o||y)&&(y=t),i?c.replace(t):o?(i=c,r=t.indexOf("#"),r=-1===r?"":t.substr(r),i.hash=r):c.href=t,c.href!==t&&(y=t)):(p[i?"replaceState":"pushState"](r,"",t),g(),a=h),e):y||c.href.replace(/%27/g,"'")};e.state=function(){return h};var it=[],rt=!1,nt=null;e.onUrlChange=function(t){if(!rt){if(u.history)s(n).on("popstate",d);s(n).on("hashchange",d);rt=!0}return it.push(t),t};e.$$applicationDestroyed=function(){s(n).off("hashchange popstate",d)};e.$$checkUrlChange=tt;e.baseHref=function(){var n=et.attr("href");return n?n.replace(/^(https?\:)?\/\/[^\/]*/,""):""};e.defer=function(n,t){var i;return l++,i=ut(function(){delete w[i];k(n)},t||0),w[i]=!0,i};e.defer.cancel=function(n){return w[n]?(delete w[n],ft(n),k(o),!0):!1}}function vl(){this.$get=["$window","$log","$sniffer","$document",function(n,t,i,r){return new al(n,r,t,i)}]}function yl(){this.$get=function(){function t(t,i){function l(n){n!=e&&(r?r==n&&(r=n.n):r=n,c(n.n,n.p),c(n,e),e=n,e.n=null)}function c(n,t){n!=t&&(n&&(n.p=t),t&&(t.n=n))}if(t in n)throw v("$cacheFactory")("iid",t);var s=0,a=p({},i,{id:t}),o={},h=i&&i.capacity||Number.MAX_VALUE,u={},e=null,r=null;return n[t]={put:function(n,t){if(!f(t)){if(h<Number.MAX_VALUE){var i=u[n]||(u[n]={key:n});l(i)}return n in o||s++,o[n]=t,s>h&&this.remove(r.key),t}},get:function(n){if(h<Number.MAX_VALUE){var t=u[n];if(!t)return;l(t)}return o[n]},remove:function(n){if(h<Number.MAX_VALUE){var t=u[n];if(!t)return;t==e&&(e=t.p);t==r&&(r=t.n);c(t.n,t.p);delete u[n]}delete o[n];s--},removeAll:function(){o={};s=0;u={};e=r=null},destroy:function(){u=a=o=null;delete n[t]},info:function(){return p({},a,{size:s})}}}var n={};return t.info=function(){var t={};return r(n,function(n,i){t[i]=n.info()}),t},t.get=function(t){return n[t]},t}}function pl(){this.$get=["$cacheFactory",function(n){return n("templates")}]}function co(n,u){function k(n,t,i){var f=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,u={};return r(n,function(n,r){var e=n.match(f);if(!e)throw ft("iscp",t,r,n,i?"controller bindings definition":"isolate scope definition");u[r]={mode:e[1][0],collection:"*"===e[2],optional:"?"===e[3],attrName:e[4]||r}}),u}function d(n){var t=n.charAt(0);if(!t||t!==y(t))throw ft("baddir",n);if(n!==n.trim())throw ft("baddir",n);}var b={},g=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,nt=/(([\w\-]+)(?:\:([^;]+))?;?)/,tt=kc("ngSrc,ngSrcset,src,srcset"),rt=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,ut=/^(on[a-z]+|formaction)$/,v;this.directive=function et(t,i){return ki(t,"directive"),l(t)?(d(t),iu(i,"directiveFactory"),b.hasOwnProperty(t)||(b[t]=[],n.factory(t+"Directive",["$injector","$exceptionHandler",function(n,i){var u=[];return r(b[t],function(r,f){var e,v,y,p,w,b;try{e=n.invoke(r);h(e)?e={compile:vt(e)}:!e.compile&&e.link&&(e.compile=vt(e.link));e.priority=e.priority||0;e.index=f;e.name=e.name||t;e.require=e.require||e.controller&&e.name;e.restrict=e.restrict||"EA";var d=e,o=e,a=e.name,s={isolateScope:null,bindToController:null};if(c(o.scope)&&(!0===o.bindToController?(s.bindToController=k(o.scope,a,!0),s.isolateScope={}):s.isolateScope=k(o.scope,a,!1)),c(o.bindToController)&&(s.bindToController=k(o.bindToController,a,!0)),c(s.bindToController)){if(v=o.controller,y=o.controllerAs,!v)throw ft("noctrl",a);n:if(y&&l(y))p=y;else{if(l(v)&&(w=ph.exec(v),w)){p=w[3];break n}p=void 0}if(!p)throw ft("noident",a);}b=d.$$bindings=s;c(b.isolateScope)&&(e.$$isolateBindings=b.isolateScope);e.$$moduleName=r.$$moduleName;u.push(e)}catch(g){i(g)}}),u}])),b[t].push(i)):r(t,le(et)),this};this.aHrefSanitizationWhitelist=function(n){return e(n)?(u.aHrefSanitizationWhitelist(n),this):u.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(n){return e(n)?(u.imgSrcSanitizationWhitelist(n),this):u.imgSrcSanitizationWhitelist()};v=!0;this.debugInfoEnabled=function(n){return e(n)?(v=n,this):v};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(n,u,e,k,d,et,st,ht,ct,lt,at){function ti(n,t){try{n.addClass(t)}catch(i){}}function vt(n,t,i,u,f){var o,e;return n instanceof s||(n=s(n)),r(n,function(t,i){t.nodeType==ir&&t.nodeValue.match(/\S+/)&&(n[i]=s(t).wrap("<span><\/span>").parent()[0])}),o=fi(n,t,n,i,u,f),vt.$$addScopeClass(n),e=null,function(t,i,r){var u,f,h;if(iu(t,"scope"),r=r||{},u=r.parentBoundTranscludeFn,f=r.transcludeControllers,r=r.futureParentElement,u&&u.$$boundTransclude&&(u=u.$$boundTransclude),e||(e=(r=r&&r[0])?"foreignobject"!==bt(r)&&r.toString().match(/SVG/)?"svg":"html":"html"),r="html"!==e?s(oi(e,s("<div>").append(n).html())):i?vi.clone.call(n):n,f)for(h in f)r.data("$"+h+"Controller",f[h].instance);return vt.$$addScopeInfo(r,t),i&&i(r,t),o&&o(t,r,r,u),r}}function fi(n,t,r,u,f,e){function p(n,r,u,f){var h,l,c,e,p,a,y;if(v)for(y=Array(r.length),e=0;e<o.length;e+=3)h=o[e],y[h]=r[h];else y=r;for(e=0,p=o.length;e<p;)(l=y[o[e++]],r=o[e++],h=o[e++],r)?(r.scope?(c=n.$new(),vt.$$addScopeInfo(s(l),c),a=r.$$destroyBindings)&&(r.$$destroyBindings=null,c.$on("$destroyed",a)):c=n,a=r.transcludeOnThisElement?ii(n,r.transclude,f):!r.templateOnThisElement&&f?f:!f&&t?ii(n,t):null,r(h,c,l,u,a,r)):h&&h(n,l.childNodes,i,f)}for(var o=[],h,l,a,y,v,c=0;c<n.length;c++)h=new hi,l=ei(n[c],[],h,0===c?u:i,f),(e=l.length?ai(l,n[c],h,t,r,null,[],[],e):null)&&e.scope&&vt.$$addScopeClass(h.$$element),h=e&&e.terminal||!(a=n[c].childNodes)||!a.length?null:fi(a,e?(e.transcludeOnThisElement||!e.templateOnThisElement)&&e.transclude:t),(e||h)&&(o.push(c,e,h),y=!0,v=v||e),e=null;return y?p:null}function ii(n,t,i){return function(r,u,f,e,o){return r||(r=n.$new(!1,o),r.$$transcluded=!0),t(r,u,{parentBoundTranscludeFn:i,transcludeControllers:f,futureParentElement:e})}}function ei(n,t,i,r,u){var b=i.$attr,e,v,y,p;switch(n.nodeType){case wt:ri(t,dt(bt(n)),"E",r,u);for(var f,o,s,h=n.attributes,a=0,k=h&&h.length;a<k;a++)v=!1,y=!1,f=h[a],e=f.name,o=w(f.value),f=dt(e),(s=lr.test(f))&&(e=e.replace(yh,"").substr(8).replace(/_(.)/g,function(n,t){return t.toUpperCase()})),p=f.replace(/(Start|End)$/,""),tr(p)&&f===p+"Start"&&(v=e,y=e.substr(0,e.length-5)+"end",e=e.substr(0,e.length-6)),f=dt(e.toLowerCase()),b[f]=e,(s||!i.hasOwnProperty(f))&&(i[f]=o,ho(n,f)&&(i[f]=!0)),cr(n,t,o,f,s),ri(t,f,"A",r,u,v,y);if(n=n.className,c(n)&&(n=n.animVal),l(n)&&""!==n)for(;e=nt.exec(n);)f=dt(e[2]),ri(t,f,"C",r,u)&&(i[f]=w(e[3])),n=n.substr(e.index+e[0].length);break;case ir:if(11===nr)for(;n.parentNode&&n.nextSibling&&n.nextSibling.nodeType===ir;)n.nodeValue+=n.nextSibling.nodeValue,n.parentNode.removeChild(n.nextSibling);er(t,n.nodeValue);break;case 8:try{(e=g.exec(n.nodeValue))&&(f=dt(e[1]),ri(t,f,"M",r,u)&&(i[f]=w(e[2])))}catch(d){}}return t.sort(ur),t}function ci(n,t,i){var r=[],u=0;if(t&&n.hasAttribute&&n.hasAttribute(t)){do{if(!n)throw ft("uterdir",t,i);n.nodeType==wt&&(n.hasAttribute(t)&&u++,n.hasAttribute(i)&&u--);r.push(n);n=n.nextSibling}while(0<u)}else r.push(n);return s(r)}function li(n,t,i){return function(r,u,f,e,o){return u=ci(u[0],t,i),n(r,u,f,e,o)}}function ai(n,r,u,f,o,v,y,p,b){function vi(n,t,i,r){n&&(i&&(n=li(n,i,r)),n.require=k.require,n.directiveName=tt,(g===k||k.$$isolateScope)&&(n=wi(n,{isolateScope:!0})),y.push(n));t&&(i&&(t=li(t,i,r)),t.require=k.require,t.directiveName=tt,(g===k||k.$$isolateScope)&&(t=wi(t,{isolateScope:!0})),p.push(t))}function ri(n,t,i,r){var u,e,f;if(l(t)){if(f=t.match(rt),t=t.substring(f[0].length),e=f[1]||f[3],f="?"===f[2],"^^"===e?i=i.parent():u=(u=r&&r[t])&&u.instance,u||(r="$"+t+"Controller",u=e?i.inheritedData(r):i.data(r)),!u&&!f)throw ft("ctreq",t,n);}else if(a(t))for(u=[],e=0,f=t.length;e<f;e++)u[e]=ri(n,t[e],i,r);return u||null}function di(n,t,i,r,u,f){var h=it();for(var c in r){var e=r[c],o={$scope:e===g||e.$$isolateScope?u:f,$element:n,$attrs:t,$transclude:i},s=e.controller;"@"==s&&(s=t[e.name]);o=et(s,o,!0,e.controllerAs);h[e.name]=o;bt||n.data("$"+e.name+"Controller",o.instance)}return h}function st(n,t,f,e,o,h){function rt(n,t,r){var u;return or(n)||(r=t,t=n,n=i),bt&&(u=b),r||(r=bt?l.parent():l),o(n,t,u,r,tt)}var a,c,w,v,b,d,l,k,it,nt,tt;if(r===f?(e=u,l=u.$$element):(l=s(f),e=new hi(l,u)),g&&(v=t.$new(!0)),o&&(d=rt,d.$$boundTransclude=o),ht&&(b=di(l,e,d,ht,v,t)),g&&(vt.$$addScopeInfo(l,v,!0,!(ot&&(ot===g||ot===g.$$originalDirective))),vt.$$addScopeClass(l,!0),v.$$isolateBindings=g.$$isolateBindings,si(t,e,v,v.$$isolateBindings,g,v)),b){k=g||ut;k&&b[k.name]&&(c=k.$$bindings.bindToController,(w=b[k.name])&&w.identifier&&c&&(it=w,h.$$destroyBindings=si(t,e,w.instance,c,k)));for(a in b)w=b[a],nt=w(),nt!==w.instance&&(w.instance=nt,l.data("$"+a+"Controller",nt),w===it&&(h.$$destroyBindings(),h.$$destroyBindings=si(t,e,nt,c,k)))}for(a=0,h=y.length;a<h;a++)c=y[a],bi(c,c.isolateScope?v:t,l,e,c.require&&ri(c.directiveName,c.require,l,b),d);for(tt=t,g&&(g.template||null===g.templateUrl)&&(tt=v),n&&n(tt,f.childNodes,i,o),a=p.length-1;0<=a;a--)c=p[a],bi(c,c.isolateScope?v:t,l,e,c.require&&ri(c.directiveName,c.require,l,b),d)}var gt,ii,ki;b=b||{};for(var pt=-Number.MAX_VALUE,ut=b.newScopeDirective,ht=b.controllerDirectives,g=b.newIsolateScopeDirective,ot=b.templateDirective,ti=b.nonTlbTranscludeDirective,fi=!1,ai=!1,bt=b.hasElementTranscludeDirective,nt=u.$$element=s(r),k,tt,d,dt=f,lt,ct=0,at=n.length;ct<at;ct++){if(k=n[ct],gt=k.$$start,ii=k.$$end,gt&&(nt=ci(r,gt,ii)),d=i,pt>k.priority)break;if((d=k.scope)&&(k.templateUrl||(c(d)?(yt("new/isolated scope",g||ut,k,nt),g=k):yt("new/isolated scope",g,k,nt)),ut=ut||k),tt=k.name,!k.templateUrl&&k.controller&&(d=k.controller,ht=ht||it(),yt("'"+tt+"' controller",ht[tt],k,nt),ht[tt]=k),(d=k.transclude)&&(fi=!0,k.$$tlb||(yt("transclusion",ti,k,nt),ti=k),"element"==d?(bt=!0,pt=k.priority,d=nt,nt=u.$$element=s(t.createComment(" "+tt+": "+u[tt]+" ")),r=nt[0],ui(o,ni.call(d,0),r),dt=vt(d,f,pt,v&&v.name,{nonTlbTranscludeDirective:ti})):(d=s(hf(r)).contents(),nt.empty(),dt=vt(d,f))),k.template)if(ai=!0,yt("template",ot,k,nt),ot=k,d=h(k.template)?k.template(nt,u):k.template,d=gi(d),k.replace){if(v=k,d=ue.test(d)?ao(oi(k.templateNamespace,w(d))):[],r=d[0],1!=d.length||r.nodeType!==wt)throw ft("tplrt",tt,"");ui(o,nt,r);at={$attr:{}};d=ei(r,[],at);ki=n.splice(ct+1,n.length-(ct+1));g&&yi(d);n=n.concat(d).concat(ki);pi(u,at);at=n.length}else nt.html(d);if(k.templateUrl)ai=!0,yt("template",ot,k,nt),ot=k,k.replace&&(v=k),st=rr(n.splice(ct,n.length-ct),nt,u,o,fi&&dt,y,p,{controllerDirectives:ht,newScopeDirective:ut!==k&&ut,newIsolateScopeDirective:g,templateDirective:ot,nonTlbTranscludeDirective:ti}),at=n.length;else if(k.compile)try{lt=k.compile(nt,u,dt);h(lt)?vi(null,lt,gt,ii):lt&&vi(lt.pre,lt.post,gt,ii)}catch(nr){e(nr,kt(nt))}k.terminal&&(st.terminal=!0,pt=Math.max(pt,k.priority))}return st.scope=ut&&!0===ut.scope,st.transcludeOnThisElement=fi,st.templateOnThisElement=ai,st.transclude=dt,b.hasElementTranscludeDirective=bt,st}function yi(n){for(var t=0,i=n.length;t<i;t++)n[t]=ef(n[t],{$$isolateScope:!0})}function ri(t,i,r,u,o,s,h){var c,l,a;if(i===o)return null;if(o=null,b.hasOwnProperty(i))for(i=n.get(i+"Directive"),l=0,a=i.length;l<a;l++)try{c=i[l];(f(u)||u>c.priority)&&-1!=c.restrict.indexOf(r)&&(s&&(c=ef(c,{$$start:s,$$end:h})),t.push(c),o=c)}catch(v){e(v)}return o}function tr(t){if(b.hasOwnProperty(t))for(var r=n.get(t+"Directive"),i=0,u=r.length;i<u;i++)if(t=r[i],t.multiElement)return!0;return!1}function pi(n,t){var u=t.$attr,f=n.$attr,i=n.$$element;r(n,function(i,r){"$"!=r.charAt(0)&&(t[r]&&t[r]!==i&&(i+=("style"===r?";":" ")+t[r]),n.$set(r,i,!0,u[r]))});r(t,function(t,r){"class"==r?(ti(i,t),n["class"]=(n["class"]?n["class"]+" ":"")+t):"style"==r?(i.attr("style",i.attr("style")+";"+t),n.style=(n.style?n.style+";":"")+t):"$"==r.charAt(0)||n.hasOwnProperty(r)||(n[r]=t,f[r]=u[r])})}function rr(n,t,i,u,f,e,o,l){var y=[],v,p,b=t[0],a=n.shift(),g=ef(a,{templateUrl:null,transclude:null,replace:null,$$originalDirective:a}),d=h(a.templateUrl)?a.templateUrl(t,i):a.templateUrl,nt=a.templateNamespace;return t.empty(),k(d).then(function(h){var k,it,tt,ut;if(h=gi(h),a.replace){if(h=ue.test(h)?ao(oi(nt,w(h))):[],k=h[0],1!=h.length||k.nodeType!==wt)throw ft("tplrt",a.name,d);h={$attr:{}};ui(u,t,k);tt=ei(k,[],h);c(a.scope)&&yi(tt);n=tt.concat(n);pi(i,h)}else k=b,t.html(h);for(n.unshift(g),v=ai(n,k,i,f,t,a,e,o,l),r(u,function(n,i){n==k&&(u[i]=t[0])}),p=fi(t[0].childNodes,f);y.length;){h=y.shift();it=y.shift();var et=y.shift(),rt=y.shift(),tt=t[0];h.$$destroyed||(it!==b&&(ut=it.className,l.hasElementTranscludeDirective&&a.replace||(tt=hf(k)),ui(et,s(it),tt),ti(s(tt),ut)),it=v.transcludeOnThisElement?ii(h,v.transclude,rt):rt,v(p,h,tt,u,it,v))}y=null}),function(n,t,i,r,u){n=u;t.$$destroyed||(y?y.push(t,i,r,n):(v.transcludeOnThisElement&&(n=ii(t,v.transclude,u)),v(p,t,i,r,n,v)))}}function ur(n,t){var i=t.priority-n.priority;return 0!==i?i:n.name!==t.name?n.name<t.name?-1:1:n.index-t.index}function yt(n,t,i,r){function u(n){return n?" (module: "+n+")":""}if(t)throw ft("multidir",t.name,u(t.$$moduleName),i.name,u(i.$$moduleName),n,kt(r));}function er(n,t){var i=u(t,!0);i&&n.push({priority:0,compile:function(n){n=n.parent();var t=!!n.length;return t&&vt.$$addBindingClass(n),function(n,r){var u=r.parent();t||vt.$$addBindingClass(u);vt.$$addBindingInfo(u,i.expressions);n.$watch(i,function(n){r[0].nodeValue=n})}}})}function oi(n,i){n=y(n||"html");switch(n){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+n+">"+i+"<\/"+n+">",r.childNodes[0].childNodes;default:return i}}function sr(n,t){if("srcdoc"==t)return ct.HTML;var i=bt(n);if("xlinkHref"==t||"form"==i&&"action"==t||"img"!=i&&("src"==t||"ngSrc"==t))return ct.RESOURCE_URL}function cr(n,t,i,r,f){var o=sr(n,r),e;if(f=tt[r]||f,e=u(i,!0,o,f),e){if("multiple"===r&&"select"===bt(n))throw ft("selmulti",kt(n));t.push({priority:100,compile:function(){return{pre:function(n,t,s){if(t=s.$$observers||(s.$$observers=it()),ut.test(r))throw ft("nodomevents");var h=s[r];h!==i&&(e=h&&u(h,!0,o,f),i=h);e&&(s[r]=e(n),(t[r]||(t[r]=[])).$$inter=!0,(s.$$observers&&s.$$observers[r].$$scope||n).$watch(e,function(n,t){"class"===r&&n!=t?s.$updateClass(n,t):s.$set(r,n)}))}}}})}}function ui(n,i,r){var u=i[0],h=i.length,o=u.parentNode,f,e,c;if(n)for(f=0,e=n.length;f<e;f++)if(n[f]==u){for(n[f++]=r,e=f+h-1,c=n.length;f<c;f++,e++)e<c?n[f]=n[e]:delete n[f];n.length-=h-1;n.context===u&&(n.context=r);break}for(o&&o.replaceChild(r,u),n=t.createDocumentFragment(),n.appendChild(u),s.hasData(u)&&(s(r).data(s(u).data()),pt?(ie=!0,pt.cleanData([u])):delete s.cache[u[s.expando]]),u=1,h=i.length;u<h;u++)o=i[u],s(o).remove(),n.appendChild(o),delete i[u];i[0]=r;i.length=1}function wi(n,t){return p(function(){return n.apply(null,arguments)},n,t)}function bi(n,t,i,r,u,f){try{n(t,i,r,u,f)}catch(o){e(o,kt(i))}}function si(n,t,i,f,e,s){var h;return r(f,function(r,f){var s=r.attrName,c=r.optional,v,a,p,y;switch(r.mode){case"@":c||gt.call(t,s)||(i[f]=t[s]=void 0);t.$observe(s,function(n){l(n)&&(i[f]=n)});t.$$observers[s].$$scope=n;l(t[s])&&(i[f]=u(t[s])(n));break;case"=":if(!gt.call(t,s)){if(c)break;t[s]=void 0}if(c&&!t[s])break;a=d(t[s]);y=a.literal?ot:function(n,t){return n===t||n!==n&&t!==t};p=a.assign||function(){v=i[f]=a(n);throw ft("nonassign",t[s],e.name);};v=i[f]=a(n);c=function(t){return y(t,i[f])||(y(t,v)?p(n,t=i[f]):i[f]=t),v=t};c.$stateful=!0;c=r.collection?n.$watchCollection(t[s],c):n.$watch(d(t[s],c),null,a.literal);h=h||[];h.push(c);break;case"&":if(a=t.hasOwnProperty(s)?d(t[s]):o,a===o&&c)break;i[f]=function(t){return a(n,t)}}}),f=h?function(){for(var n=0,t=h.length;n<t;++n)h[n]()}:o,s&&f!==o?(s.$on("$destroy",f),o):f}var hi=function(n,t){if(t)for(var u=Object.keys(t),r,i=0,f=u.length;i<f;i++)r=u[i],this[r]=t[r];else this.$attr={};this.$$element=n};hi.prototype={$normalize:dt,$addClass:function(n){n&&0<n.length&&lt.addClass(this.$$element,n)},$removeClass:function(n){n&&0<n.length&&lt.removeClass(this.$$element,n)},$updateClass:function(n,t){var i=lo(n,t);i&&i.length&&lt.addClass(this.$$element,i);(i=lo(t,n))&&i.length&&lt.removeClass(this.$$element,i)},$set:function(n,t,i,u){var s=ho(this.$$element[0],n),o=ee[n],l=n;if(s?(this.$$element.prop(n,t),u=s):o&&(this[o]=t,l=o),this[n]=t,u?this.$attr[n]=u:(u=this.$attr[n])||(this.$attr[n]=u=to(n,"-")),s=bt(this.$$element),"a"===s&&"href"===n||"img"===s&&"src"===n)this[n]=t=at(t,"src"===n);else if("img"===s&&"srcset"===n){for(var s="",o=w(t),c=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,c=/\s/.test(o)?c:/(,)/,o=o.split(c),c=Math.floor(o.length/2),h=0;h<c;h++)var a=2*h,s=s+at(w(o[a]),!0),s=s+(" "+w(o[a+1]));o=w(o[2*h]).split(/\s/);s+=at(w(o[0]),!0);2===o.length&&(s+=" "+w(o[1]));this[n]=t=s}!1!==i&&(null===t||f(t)?this.$$element.removeAttr(u):this.$$element.attr(u,t));(n=this.$$observers)&&r(n[l],function(n){try{n(t)}catch(i){e(i)}})},$observe:function(n,t){var i=this,u=i.$$observers||(i.$$observers=it()),r=u[n]||(u[n]=[]);return r.push(t),st.$evalAsync(function(){r.$$inter||!i.hasOwnProperty(n)||f(i[n])||t(i[n])}),function(){hr(r,t)}}};var ki=u.startSymbol(),di=u.endSymbol(),gi="{{"==ki||"}}"==di?fr:function(n){return n.replace(/\{\{/g,ki).replace(/}}/g,di)},lr=/^ngAttr[A-Z]/;return vt.$$addBindingInfo=v?function(n,t){var i=n.data("$binding")||[];a(t)?i=i.concat(t):i.push(t);n.data("$binding",i)}:o,vt.$$addBindingClass=v?function(n){ti(n,"ng-binding")}:o,vt.$$addScopeInfo=v?function(n,t,i,r){n.data(i?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope",t)}:o,vt.$$addScopeClass=v?function(n,t){ti(n,t?"ng-isolate-scope":"ng-scope")}:o,vt}]}function dt(n){return ar(n.replace(yh,""))}function lo(n,t){var r="",e=n.split(/\s+/),o=t.split(/\s+/),u=0,f,i;n:for(;u<e.length;u++){for(f=e[u],i=0;i<o.length;i++)if(f==o[i])continue n;r+=(0<r.length?" ":"")+f}return r}function ao(n){n=s(n);var t=n.length;if(1>=t)return n;for(;t--;)8===n[t].nodeType&&sv.call(n,t,1);return n}function wl(){var n={},t=!1;this.register=function(t,i){ki(t,"controller");c(t)?p(n,t):n[t]=i};this.allowGlobals=function(){t=!0};this.$get=["$injector","$window",function(r,u){function f(n,t,i,r){if(!n||!c(n.$scope))throw v("$controller")("noscp",r,t);n.$scope[t]=i}return function(e,o,s,v){var y,w,b;if(s=!0===s,v&&l(v)&&(b=v),l(e)){if(v=e.match(ph),!v)throw fy("ctrlfmt",e);w=v[1];b=b||v[3];e=n.hasOwnProperty(w)?n[w]:io(o.$scope,w,!0)||(t?io(u,w,!0):i);bi(e,w,!0)}return s?(s=(a(e)?e[e.length-1]:e).prototype,y=Object.create(s||null),b&&f(o,b,y,w||e.name),p(function(){var n=r.invoke(e,y,o,w);return n!==y&&(c(n)||h(n))&&(y=n,b&&f(o,b,y,w||e.name)),y},{instance:y,identifier:b})):(y=r.instantiate(e,o,w),b&&f(o,b,y,w||e.name),y)}}]}function bl(){this.$get=["$window",function(n){return s(n.document)}]}function kl(){this.$get=["$log",function(n){return function(){n.error.apply(n,arguments)}}]}function af(n){return c(n)?et(n)?n.toISOString():lr(n):n}function dl(){this.$get=function(){return function(n){if(!n)return"";var t=[];return ce(n,function(n,i){null===n||f(n)||(a(n)?r(n,function(n){t.push(ct(i)+"="+ct(af(n)))}):t.push(ct(i)+"="+ct(af(n))))}),t.join("&")}}}function gl(){this.$get=function(){return function(n){function t(n,u,e){null===n||f(n)||(a(n)?r(n,function(n,i){t(n,u+"["+(c(n)?i:"")+"]")}):c(n)&&!et(n)?ce(n,function(n,i){t(n,u+(e?"":"[")+i+(e?"":"]"))}):i.push(ct(u)+"="+ct(af(n))))}if(!n)return"";var i=[];return t(n,"",!0),i.join("&")}}}function vf(n,t){var r,i;return l(n)&&(r=n.replace(hy,"").trim(),r&&(i=t("Content-Type"),(i=i&&0===i.indexOf(wh))||(i=(i=r.match(oy))&&sy[i[0]].test(r)),i&&(n=be(r)))),n}function vo(n){var t=it(),i;return l(n)?r(n.split("\n"),function(n){i=n.indexOf(":");var r=y(w(n.substr(0,i)));n=w(n.substr(i+1));r&&(t[r]=t[r]?t[r]+", "+n:n)}):c(n)&&r(n,function(n,i){var r=y(i),u=w(n);r&&(t[r]=t[r]?t[r]+", "+u:u)}),t}function yo(n){var t;return function(i){return t||(t=vo(n)),i?(i=t[y(i)],void 0===i&&(i=null),i):t}}function po(n,t,i,u){return h(u)?u(n,t,i):(r(u,function(r){n=r(n,t,i)}),n)}function na(){var n=this.defaults={transformResponse:[vf],transformRequest:[function(n){return c(n)&&"[object File]"!==ti.call(n)&&"[object Blob]"!==ti.call(n)&&"[object FormData]"!==ti.call(n)?lr(n):n}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ht(oe),put:ht(oe),patch:ht(oe)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},u=!1,t,o;this.useApplyAsync=function(n){return e(n)?(u=!!n,this):u};t=!0;this.useLegacyPromiseExtensions=function(n){return e(n)?(t=!!n,this):t};o=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(s,w,b,k,d,g){function nt(u){function c(n){var t=p({},n);return t.data=n.data?po(n.data,n.headers,n.status,e.transformResponse):n.data,n=n.status,200<=n&&300>n?t:d.reject(t)}function w(n,t){var i,u={};return r(n,function(n,r){h(n)?(i=n(t),null!=i&&(u[r]=i)):u[r]=n}),u}var e,s,a,o;if(!ut.isObject(u))throw v("$http")("badreq",u);for(e=p({method:"get",transformRequest:n.transformRequest,transformResponse:n.transformResponse,paramSerializer:n.paramSerializer},u),e.headers=function(t){var i=n.headers,u=p({},t.headers),r,f,e,i=p({},i.common,i[y(t.method)]);n:for(r in i){f=y(r);for(e in u)if(y(e)===f)continue n;u[r]=i[r]}return w(u,ht(t))}(u),e.method=bu(e.method),e.paramSerializer=l(e.paramSerializer)?g.get(e.paramSerializer):e.paramSerializer,s=[function(t){var u=t.headers,e=po(t.data,yo(u),i,t.transformRequest);return f(e)&&r(u,function(n,t){"content-type"===y(t)&&delete u[t]}),f(t.withCredentials)&&!f(n.withCredentials)&&(t.withCredentials=n.withCredentials),it(t,e).then(c,c)},i],o=d.when(e),r(tt,function(n){(n.request||n.requestError)&&s.unshift(n.request,n.requestError);(n.response||n.responseError)&&s.push(n.response,n.responseError)});s.length;)u=s.shift(),a=s.shift(),o=o.then(u,a);return t?(o.success=function(n){return bi(n,"fn"),o.then(function(t){n(t.data,t.status,t.headers,e)}),o},o.error=function(n){return bi(n,"fn"),o.then(null,function(t){n(t.data,t.status,t.headers,e)}),o}):(o.success=bh("success"),o.error=bh("error")),o}function it(t,r){function ut(n,t,i,r){function f(){y(t,n,i,r)}l&&(200<=n&&300>n?l.put(v,[n,t,vo(i),r]):l.remove(v));u?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function y(n,i,r,u){i=-1<=i?i:0;(200<=i&&300>i?p.resolve:p.reject)({data:n,status:i,headers:yo(r),config:t,statusText:u})}function g(n){y(n.data,n.status,ht(n.headers()),n.statusText)}function tt(){var n=nt.pendingRequests.indexOf(t);-1!==n&&nt.pendingRequests.splice(n,1)}var p=d.defer(),b=p.promise,l,o,it=t.headers,v=rt(t.url,t.paramSerializer(t.params));return nt.pendingRequests.push(t),b.then(tt,tt),(t.cache||n.cache)&&!1!==t.cache&&("GET"===t.method||"JSONP"===t.method)&&(l=c(t.cache)?t.cache:c(n.cache)?n.cache:ft),l&&(o=l.get(v),e(o)?o&&h(o.then)?o.then(g,g):a(o)?y(o[1],o[0],ht(o[2]),o[3]):y(o,200,{},"OK"):l.put(v,b)),f(o)&&((o=as(t.url)?w()[t.xsrfCookieName||n.xsrfCookieName]:i)&&(it[t.xsrfHeaderName||n.xsrfHeaderName]=o),s(t.method,v,r,ut,it,t.timeout,t.withCredentials,t.responseType)),b}function rt(n,t){return 0<t.length&&(n+=(-1==n.indexOf("?")?"?":"&")+t),n}var ft=b("$http"),tt;return n.paramSerializer=l(n.paramSerializer)?g.get(n.paramSerializer):n.paramSerializer,tt=[],r(o,function(n){tt.unshift(l(n)?g.get(n):g.invoke(n))}),nt.pendingRequests=[],function(){r(arguments,function(n){nt[n]=function(t,i){return nt(p({},i||{},{method:n,url:t}))}})}("get","delete","head","jsonp"),function(){r(arguments,function(n){nt[n]=function(t,i,r){return nt(p({},r||{},{method:n,url:t,data:i}))}})}("post","put","patch"),nt.defaults=n,nt}]}function ta(){this.$get=function(){return function(){return new n.XMLHttpRequest}}}function ia(){this.$get=["$browser","$window","$document","$xhrFactory",function(n,t,i,r){return ra(n,r,n.defer,t.angular.callbacks,i[0])}]}function ra(n,t,i,u,s){function c(n,t,i){var r=s.createElement("script"),f=null;return r.type="text/javascript",r.src=n,r.async=!0,f=function(n){r.removeEventListener("load",f,!1);r.removeEventListener("error",f,!1);s.body.removeChild(r);r=null;var e=-1,o="unknown";n&&("load"!==n.type||u[t].called||(n={type:"error"}),o=n.type,e="error"===n.type?404:200);i&&i(e,o)},r.addEventListener("load",f,!1),r.addEventListener("error",f,!1),s.body.appendChild(r),f}return function(s,l,a,v,p,w,b,k){function rt(){nt&&nt();d&&d.abort()}function tt(t,r,u,f,s){e(it)&&i.cancel(it);nt=d=null;t(r,u,f,s);n.$$completeOutstandingRequest(o)}var g,nt,d,it;if(n.$$incOutstandingRequestCount(),l=l||n.url(),"jsonp"==y(s))g="_"+(u.counter++).toString(36),u[g]=function(n){u[g].data=n;u[g].called=!0},nt=c(l.replace("JSON_CALLBACK","angular.callbacks."+g),g,function(n,t){tt(v,n,u[g].data,"",t);u[g]=o});else{if(d=t(s,l),d.open(s,l,!0),r(p,function(n,t){e(n)&&d.setRequestHeader(t,n)}),d.onload=function(){var i=d.statusText||"",t="response"in d?d.response:d.responseText,n=1223===d.status?204:d.status;0===n&&(n=t?200:"file"==ri(l).protocol?404:0);tt(v,n,t,d.getAllResponseHeaders(),i)},s=function(){tt(v,-1,null,null,"")},d.onerror=s,d.onabort=s,b&&(d.withCredentials=!0),k)try{d.responseType=k}catch(ut){if("json"!==k)throw ut;}d.send(f(a)?null:a)}0<w?it=i(rt,w):w&&h(w.then)&&w.then(rt)}}function ua(){var n="{{",t="}}";this.startSymbol=function(t){return t?(n=t,this):n};this.endSymbol=function(n){return n?(t=n,this):t};this.$get=["$parse","$exceptionHandler","$sce",function(i,r,u){function s(n){return"\\\\\\"+n}function c(i){return i.replace(v,n).replace(y,t)}function o(o,s,v,y){function ut(n){var i,t;try{if(i=n,n=v?u.getTrusted(v,i):u.valueOf(i),y&&!e(n))t=n;else if(null==n)t="";else{switch(typeof n){case"string":break;case"number":n=""+n;break;default:n=lr(n)}t=n}return t}catch(f){r(pi.interr(o,f))}}var tt;y=!!y;for(var k,g,w=0,d=[],nt=[],it=o.length,b=[],rt=[];w<it;)if(-1!=(k=o.indexOf(n,w))&&-1!=(g=o.indexOf(t,k+l)))w!==k&&b.push(c(o.substring(w,k))),w=o.substring(k+l,g),d.push(w),nt.push(i(w,ut)),w=g+a,rt.push(b.length),b.push("");else{w!==it&&b.push(c(o.substring(w)));break}return v&&1<b.length&&pi.throwNoconcat(o),!s||d.length?(tt=function(n){for(var t=0,i=d.length;t<i;t++){if(y&&f(n[t]))return;b[rt[t]]=n[t]}return b.join("")},p(function(n){var t=0,i=d.length,u=Array(i);try{for(;t<i;t++)u[t]=nt[t](n);return tt(u)}catch(f){r(pi.interr(o,f))}},{exp:o,expressions:d,$$watchDelegate:function(n,t){var i;return n.$watchGroup(nt,function(r,u){var f=tt(r);h(t)&&t.call(this,f,r!==u?i:f,n);i=f})}})):void 0}var l=n.length,a=t.length,v=new RegExp(n.replace(/./g,s),"g"),y=new RegExp(t.replace(/./g,s),"g");return o.startSymbol=function(){return n},o.endSymbol=function(){return t},o}]}function fa(){this.$get=["$rootScope","$window","$q","$$q",function(n,t,i,r){function f(f,o,s,h){var v=4<arguments.length,p=v?ni.call(arguments,4):[],w=t.setInterval,b=t.clearInterval,a=0,y=e(h)&&!h,l=(y?r:i).defer(),c=l.promise;return s=e(s)?s:0,c.then(null,null,v?function(){f.apply(null,p)}:f),c.$$intervalId=w(function(){l.notify(a++);0<s&&a>=s&&(l.resolve(a),b(c.$$intervalId),delete u[c.$$intervalId]);y||n.$apply()},o),u[c.$$intervalId]=l,c}var u={};return f.cancel=function(n){return n&&n.$$intervalId in u?(u[n.$$intervalId].reject("canceled"),t.clearInterval(n.$$intervalId),delete u[n.$$intervalId],!0):!1},f}]}function yf(n){n=n.split("/");for(var t=n.length;t--;)n[t]=tu(n[t]);return n.join("/")}function wo(n,t){var i=ri(n);t.$$protocol=i.protocol;t.$$host=i.hostname;t.$$port=tt(i.port)||ay[i.protocol]||null}function bo(n,t){var r="/"!==n.charAt(0),i;r&&(n="/"+n);i=ri(n);t.$$path=decodeURIComponent(r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname);t.$$search=ge(i.search);t.$$hash=decodeURIComponent(i.hash);t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function yt(n,t){if(0===t.indexOf(n))return t.substr(n.length)}function si(n){var t=n.indexOf("#");return-1==t?n:n.substr(0,t)}function lu(n){return n.replace(/(#.+)|#$/,"$1")}function pf(n,t,i){this.$$html5=!0;i=i||"";wo(n,this);this.$$parse=function(n){var i=yt(t,n);if(!l(i))throw gu("ipthprfx",n,t);bo(i,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var n=sf(this.$$search),i=this.$$hash?"#"+tu(this.$$hash):"";this.$$url=yf(this.$$path)+(n?"?"+n:"")+i;this.$$absUrl=t+this.$$url.substr(1)};this.$$parseLinkUrl=function(r,u){if(u&&"#"===u[0])return this.hash(u.slice(1)),!0;var f,o;return e(f=yt(n,r))?(o=f,o=e(f=yt(i,f))?t+(yt("/",f)||f):n+o):e(f=yt(t,r))?o=t+f:t==r+"/"&&(o=t),o&&this.$$parse(o),!!o}}function wf(n,t,i){wo(n,this);this.$$parse=function(r){var e=yt(n,r)||yt(t,r),u,o;f(e)||"#"!==e.charAt(0)?this.$$html5?u=e:(u="",f(e)&&(n=r,this.replace())):(u=yt(i,e),f(u)&&(u=e));bo(u,this);r=this.$$path;e=n;o=/^\/[A-Z]:(\/.*)/;0===u.indexOf(e)&&(u=u.replace(e,""));o.exec(u)||(r=(u=o.exec(r))?u[1]:r);this.$$path=r;this.$$compose()};this.$$compose=function(){var t=sf(this.$$search),r=this.$$hash?"#"+tu(this.$$hash):"";this.$$url=yf(this.$$path)+(t?"?"+t:"")+r;this.$$absUrl=n+(this.$$url?i+this.$$url:"")};this.$$parseLinkUrl=function(t){return si(n)==si(t)?(this.$$parse(t),!0):!1}}function ko(n,t,i){this.$$html5=!0;wf.apply(this,arguments);this.$$parseLinkUrl=function(r,u){if(u&&"#"===u[0])return this.hash(u.slice(1)),!0;var f,e;return n==si(r)?f=r:(e=yt(t,r))?f=n+i+e:t===r+"/"&&(f=t),f&&this.$$parse(f),!!f};this.$$compose=function(){var t=sf(this.$$search),r=this.$$hash?"#"+tu(this.$$hash):"";this.$$url=yf(this.$$path)+(t?"?"+t:"")+r;this.$$absUrl=n+i+this.$$url}}function au(n){return function(){return this[n]}}function go(n,t){return function(i){return f(i)?this[n]:(this[n]=t(i),this.$$compose(),this)}}function ea(){var t="",n={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(n){return e(n)?(t=n,this):t};this.html5Mode=function(t){return sr(t)?(n.enabled=t,this):c(t)?(sr(t.enabled)&&(n.enabled=t.enabled),sr(t.requireBase)&&(n.requireBase=t.requireBase),sr(t.rewriteLinks)&&(n.rewriteLinks=t.rewriteLinks),this):n};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(i,r,u,e,o){function w(n,t,i){var u=h.url(),f=h.$$state;try{r.url(n,t,i);h.$$state=r.state()}catch(e){throw h.url(u),h.$$state=f,e;}}function b(n,t){i.$broadcast("$locationChangeSuccess",h.absUrl(),n,h.$$state,t)}var h,a,l,v,p,k,y;if(a=r.baseHref(),l=r.url(),n.enabled){if(!a&&n.requireBase)throw gu("nobase");v=l.substring(0,l.indexOf("/",l.indexOf("//")+2))+(a||"/");a=u.history?pf:ko}else v=si(l),a=wf;p=v.substr(0,si(v).lastIndexOf("/")+1);h=new a(v,p,"#"+t);h.$$parseLinkUrl(l,l);h.$$state=r.state();k=/^\s*(javascript|mailto):/i;e.on("click",function(t){var u,f,l;if(n.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(u=s(t.target);"a"!==bt(u[0]);)if(u[0]===e[0]||!(u=u.parent())[0])return;f=u.prop("href");l=u.attr("href")||u.attr("xlink:href");c(f)&&"[object SVGAnimatedString]"===f.toString()&&(f=ri(f.animVal).href);k.test(f)||!f||u.attr("target")||t.isDefaultPrevented()||!h.$$parseLinkUrl(f,l)||(t.preventDefault(),h.absUrl()!=r.url()&&(i.$apply(),o.angular["ff-684208-preventDefault"]=!0))}});lu(h.absUrl())!=lu(l)&&r.url(h.absUrl(),!0);y=!0;r.onUrlChange(function(n,t){f(yt(p,n))?o.location.href=n:(i.$evalAsync(function(){var r=h.absUrl(),u=h.$$state,f;h.$$parse(n);h.$$state=t;f=i.$broadcast("$locationChangeStart",n,r,t,u).defaultPrevented;h.absUrl()===n&&(f?(h.$$parse(r),h.$$state=u,w(r,!1,u)):(y=!1,b(r,u)))}),i.$$phase||i.$digest())});return i.$watch(function(){var t=lu(r.url()),e=lu(h.absUrl()),n=r.state(),o=h.$$replace,f=t!==e||h.$$html5&&u.history&&n!==h.$$state;(y||f)&&(y=!1,i.$evalAsync(function(){var r=h.absUrl(),u=i.$broadcast("$locationChangeStart",r,t,h.$$state,n).defaultPrevented;h.absUrl()===r&&(u?(h.$$parse(t),h.$$state=n):(f&&w(r,o,n===h.$$state?null:h.$$state),b(t,n)))}));h.$$replace=!1}),h}]}function oa(){var n=!0,t=this;this.debugEnabled=function(t){return e(t)?(n=t,this):n};this.$get=["$window",function(i){function f(n){return n instanceof Error&&(n.stack?n=n.message&&-1===n.stack.indexOf(n.message)?"Error: "+n.message+"\n"+n.stack:n.stack:n.sourceURL&&(n=n.message+"\n"+n.sourceURL+":"+n.line)),n}function u(n){var t=i.console||{},u=t[n]||t.log||o;n=!1;try{n=!!u.apply}catch(e){}return n?function(){var n=[];return r(arguments,function(t){n.push(f(t))}),u.apply(t,n)}:function(n,t){u(n,null==t?"":t)}}return{log:u("log"),info:u("info"),warn:u("warn"),error:u("error"),debug:function(){var i=u("debug");return function(){n&&i.apply(t,arguments)}}()}}]}function gi(n,t){if("__defineGetter__"===n||"__defineSetter__"===n||"__lookupGetter__"===n||"__lookupSetter__"===n||"__proto__"===n)throw rt("isecfld",t);return n}function ns(n,t){if(n+="",!l(n))throw rt("iseccst",t);return n}function ii(n,t){if(n){if(n.constructor===n)throw rt("isecfn",t);if(n.window===n)throw rt("isecwindow",t);if(n.children&&(n.nodeName||n.prop&&n.attr&&n.find))throw rt("isecdom",t);if(n===Object)throw rt("isecobj",t);}return n}function ts(n,t){if(n){if(n.constructor===n)throw rt("isecfn",t);if(n===yy||n===py||n===wy)throw rt("isecff",t);}}function is(n,t){if(n&&(n===0..constructor||n===(!1).constructor||n==="".constructor||n==={}.constructor||n===[].constructor||n===Function.constructor))throw rt("isecaf",t);}function sa(n,t){return"undefined"!=typeof n?n:t}function rs(n,t){return"undefined"==typeof n?t:"undefined"==typeof t?n:n+t}function d(n,t){var i,f;switch(n.type){case u.Program:i=!0;r(n.body,function(n){d(n.expression,t);i=i&&n.expression.constant});n.constant=i;break;case u.Literal:n.constant=!0;n.toWatch=[];break;case u.UnaryExpression:d(n.argument,t);n.constant=n.argument.constant;n.toWatch=n.argument.toWatch;break;case u.BinaryExpression:d(n.left,t);d(n.right,t);n.constant=n.left.constant&&n.right.constant;n.toWatch=n.left.toWatch.concat(n.right.toWatch);break;case u.LogicalExpression:d(n.left,t);d(n.right,t);n.constant=n.left.constant&&n.right.constant;n.toWatch=n.constant?[]:[n];break;case u.ConditionalExpression:d(n.test,t);d(n.alternate,t);d(n.consequent,t);n.constant=n.test.constant&&n.alternate.constant&&n.consequent.constant;n.toWatch=n.constant?[]:[n];break;case u.Identifier:n.constant=!1;n.toWatch=[n];break;case u.MemberExpression:d(n.object,t);n.computed&&d(n.property,t);n.constant=n.object.constant&&(!n.computed||n.property.constant);n.toWatch=[n];break;case u.CallExpression:i=n.filter?!t(n.callee.name).$stateful:!1;f=[];r(n.arguments,function(n){d(n,t);i=i&&n.constant;n.constant||f.push.apply(f,n.toWatch)});n.constant=i;n.toWatch=n.filter&&!t(n.callee.name).$stateful?f:[n];break;case u.AssignmentExpression:d(n.left,t);d(n.right,t);n.constant=n.left.constant&&n.right.constant;n.toWatch=[n];break;case u.ArrayExpression:i=!0;f=[];r(n.elements,function(n){d(n,t);i=i&&n.constant;n.constant||f.push.apply(f,n.toWatch)});n.constant=i;n.toWatch=f;break;case u.ObjectExpression:i=!0;f=[];r(n.properties,function(n){d(n.value,t);i=i&&n.value.constant;n.value.constant||f.push.apply(f,n.value.toWatch)});n.constant=i;n.toWatch=f;break;case u.ThisExpression:n.constant=!1;n.toWatch=[]}}function us(n){if(1==n.length){n=n[0].expression;var t=n.toWatch;return 1!==t.length?t:t[0]!==n?t:i}}function fs(n){return n.type===u.Identifier||n.type===u.MemberExpression}function es(n){if(1===n.body.length&&fs(n.body[0].expression))return{type:u.AssignmentExpression,left:n.body[0].expression,right:{type:u.NGValueParameter},operator:"="}}function os(n){return 0===n.body.length||1===n.body.length&&(n.body[0].expression.type===u.Literal||n.body[0].expression.type===u.ArrayExpression||n.body[0].expression.type===u.ObjectExpression)}function ss(n,t){this.astBuilder=n;this.$filter=t}function hs(n,t){this.astBuilder=n;this.$filter=t}function vu(n){return"constructor"==n}function bf(n){return h(n.valueOf)?n.valueOf():by.call(n)}function ha(){var n=it(),t=it();this.$get=["$filter",function(u){function f(n,t){return null==n||null==t?n===t:"object"==typeof n&&(n=bf(n),"object"==typeof n)?!1:n===t||n!==n&&t!==t}function s(n,t,r,u,e){var o=u.inputs,s,c;if(1===o.length)return c=f,o=o[0],n.$watch(function(n){var t=o(n);return f(t,c)||(s=u(n,i,i,[t]),c=t&&bf(t)),s},t,r,e);for(var l=[],a=[],h=0,v=o.length;h<v;h++)l[h]=f,a[h]=null;return n.$watch(function(n){for(var r,e=!1,t=0,h=o.length;t<h;t++)r=o[t](n),(e||(e=!f(r,l[t])))&&(a[t]=r,l[t]=r&&bf(r));return e&&(s=u(n,i,i,a)),s},t,r,e)}function c(n,t,i,r){var u,f;return u=n.$watch(function(n){return r(n)},function(n,i,r){f=n;h(t)&&t.apply(this,arguments);e(n)&&r.$$postDigest(function(){e(f)&&u()})},i)}function l(n,t,i,u){function f(n){var t=!0;return r(n,function(n){e(n)||(t=!1)}),t}var o,s;return o=n.$watch(function(n){return u(n)},function(n,i,r){s=n;h(t)&&t.call(this,n,i,r);f(n)&&r.$$postDigest(function(){f(s)&&o()})},i)}function y(n,t,i,r){var u;return u=n.$watch(function(n){return r(n)},function(){h(t)&&t.apply(this,arguments);u()},i)}function a(n,t){if(!t)return n;var i=n.$$watchDelegate,i=i!==l&&i!==c?function(i,r,u,f){return u=n(i,r,u,f),t(u,i,r)}:function(i,r,u,f){return u=n(i,r,u,f),i=t(u,i,r),e(u)?i:u};return n.$$watchDelegate&&n.$$watchDelegate!==s?i.$$watchDelegate=n.$$watchDelegate:t.$stateful||(i.$$watchDelegate=s,i.inputs=n.inputs?n.inputs:[n]),i}var v=ai().noUnsafeEval,p={csp:v,expensiveChecks:!1},w={csp:v,expensiveChecks:!0};return function(i,r,f){var e,b,h,v;switch(typeof i){case"string":return h=i=i.trim(),v=f?t:n,e=v[h],e||(":"===i.charAt(0)&&":"===i.charAt(1)&&(b=!0,i=i.substring(2)),f=f?w:p,e=new tf(f),e=new rf(e,u,f).parse(i),e.constant?e.$$watchDelegate=y:b?e.$$watchDelegate=e.literal?l:c:e.inputs&&(e.$$watchDelegate=s),v[h]=e),a(e,r);case"function":return a(i,r);default:return o}}}]}function ca(){this.$get=["$rootScope","$exceptionHandler",function(n,t){return cs(function(t){n.$evalAsync(t)},t)}]}function la(){this.$get=["$browser","$exceptionHandler",function(n,t){return cs(function(t){n.defer(t)},t)}]}function cs(n,t){function g(n,t,i){function r(t){return function(i){u||(u=!0,t.call(n,i))}}var u=!1;return[r(t),r(i)]}function w(){this.$$state={status:0}}function s(n,t){return function(i){t.call(n,i)}}function l(r){!r.processScheduled&&r.pending&&(r.processScheduled=!0,n(function(){var e,n,f,u,o;for(f=r.pending,r.processScheduled=!1,r.pending=i,u=0,o=f.length;u<o;++u){n=f[u][0];e=f[u][r.status];try{h(e)?n.resolve(e(r.value)):1===r.status?n.resolve(r.value):n.reject(r.value)}catch(s){n.reject(s);t(s)}}}))}function u(){this.promise=new w;this.resolve=s(this,this.resolve);this.reject=s(this,this.reject);this.notify=s(this,this.notify)}var b=v("$q",TypeError);p(w.prototype,{then:function(n,t,i){if(f(n)&&f(t)&&f(i))return this;var r=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,n,t,i]),0<this.$$state.status&&l(this.$$state),r.promise},"catch":function(n){return this.then(null,n)},"finally":function(n,t){return this.then(function(t){return k(t,!0,n)},function(t){return k(t,!1,n)},t)}});p(u.prototype,{resolve:function(n){this.promise.$$state.status||(n===this.promise?this.$$reject(b("qcycle",n)):this.$$resolve(n))},$$resolve:function(n){var i,r=g(this,this.$$resolve,this.$$reject);try{(c(n)||h(n))&&(i=n&&n.then);h(i)?(this.promise.$$state.status=-1,i.call(n,r[0],r[1],this.notify)):(this.promise.$$state.value=n,this.promise.$$state.status=1,l(this.promise.$$state))}catch(u){r[1](u);t(u)}},reject:function(n){this.promise.$$state.status||this.$$reject(n)},$$reject:function(n){this.promise.$$state.value=n;this.promise.$$state.status=2;l(this.promise.$$state)},notify:function(i){var r=this.promise.$$state.pending;0>=this.promise.$$state.status&&r&&r.length&&n(function(){for(var u,f,n=0,e=r.length;n<e;n++){f=r[n][0];u=r[n][3];try{f.notify(h(u)?u(i):i)}catch(o){t(o)}}})}});var o=function(n,t){var i=new u;return t?i.resolve(n):i.reject(n),i.promise},k=function(n,t,i){var r=null;try{h(i)&&(r=i())}catch(u){return o(u,!1)}return r&&h(r.then)?r.then(function(){return o(n,t)},function(n){return o(n,!1)}):o(n,t)},y=function(n,t,i,r){var f=new u;return f.resolve(n),f.promise.then(t,i,r)},e=function d(n){if(!h(n))throw b("norslvr",n);if(!(this instanceof d))return new d(n);var t=new u;return n(function(n){t.resolve(n)},function(n){t.reject(n)}),t.promise};return e.defer=function(){return new u},e.reject=function(n){var t=new u;return t.reject(n),t.promise},e.when=y,e.resolve=y,e.all=function(n){var i=new u,f=0,t=a(n)?[]:{};return r(n,function(n,r){f++;y(n).then(function(n){t.hasOwnProperty(r)||(t[r]=n,--f||i.resolve(t))},function(n){t.hasOwnProperty(r)||i.reject(n)})}),0===f&&i.resolve(t),i.promise},e}function aa(){this.$get=["$window","$timeout",function(n,t){var i=n.requestAnimationFrame||n.webkitRequestAnimationFrame,f=n.cancelAnimationFrame||n.webkitCancelAnimationFrame||n.webkitCancelRequestAnimationFrame,r=!!i,u=r?function(n){var t=i(n);return function(){f(t)}}:function(n){var i=t(n,16.66,!1);return function(){t.cancel(i)}};return u.supported=r,u}]}function va(){function e(n){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++ku;this.$$ChildScope=null}return t.prototype=n,t}var i=10,u=v("$rootScope"),n=null,t=null;this.digestTtl=function(n){return arguments.length&&(i=n),i};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(s,l,a,v){function rt(n){n.currentScope.$$destroyed=!0}function w(){this.$id=++ku;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function g(n){if(y.$$phase)throw u("inprog",y.$$phase);y.$$phase=n}function b(n,t){do n.$$watchersCount+=t;while(n=n.$parent)}function nt(n,t,i){do n.$$listenerCount[i]-=t,0===n.$$listenerCount[i]&&delete n.$$listenerCount[i];while(n=n.$parent)}function tt(){}function it(){for(;d.length;)try{d.shift()()}catch(n){l(n)}t=null}function ut(){null===t&&(t=v.defer(function(){y.$apply(it)}))}w.prototype={constructor:w,$new:function(n,t){var i;return t=t||this,n?(i=new w,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),i=new this.$$ChildScope),i.$parent=t,i.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=i,t.$$childTail=i):t.$$childHead=t.$$childTail=i,(n||t!=this)&&i.$on("$destroy",rt),i},$watch:function(t,i,r,u){var f=a(t);if(f.$$watchDelegate)return f.$$watchDelegate(this,i,r,f,t);var s=this,e=s.$$watchers,c={fn:i,last:tt,get:f,exp:u||t,eq:!!r};return n=null,h(i)||(c.fn=o),e||(e=s.$$watchers=[]),e.unshift(c),b(this,1),function(){0<=hr(e,c)&&b(s,-1);n=null}},$watchGroup:function(n,t){function c(){o=!1;h?(h=!1,t(i,i,u)):t(i,f,u)}var f=Array(n.length),i=Array(n.length),e=[],u=this,o=!1,h=!0,s;return n.length?1===n.length?this.$watch(n[0],function(n,r,u){i[0]=n;f[0]=r;t(i,n===r?i:f,u)}):(r(n,function(n,t){var r=u.$watch(n,function(n,r){i[t]=n;f[t]=r;o||(o=!0,u.$evalAsync(c))});e.push(r)}),function(){for(;e.length;)e.shift()()}):(s=!0,u.$evalAsync(function(){s&&t(i,i,u)}),function(){s=!1})},$watchCollection:function(n,t){function s(n){i=n;var t,h,o,s;if(!f(i)){if(c(i))if(fi(i))for(r!==l&&(r=l,e=r.length=0,u++),n=i.length,e!==n&&(u++,r.length=e=n),t=0;t<n;t++)s=r[t],o=i[t],h=s!==s&&o!==o,h||s===o||(u++,r[t]=o);else{r!==v&&(r=v={},e=0,u++);n=0;for(t in i)gt.call(i,t)&&(n++,o=i[t],s=r[t],t in r?(h=s!==s&&o!==o,h||s===o||(u++,r[t]=o)):(e++,r[t]=o,u++));if(e>n)for(t in u++,r)gt.call(i,t)||(e--,delete r[t])}else r!==i&&(r=i,u++);return u}}s.$stateful=!0;var h=this,i,r,o,p=1<t.length,u=0,w=a(n,s),l=[],v={},y=!0,e=0;return this.$watch(w,function(){if(y?(y=!1,t(i,i,h)):t(i,o,h),p)if(c(i))if(fi(i)){o=Array(i.length);for(var n=0;n<i.length;n++)o[n]=i[n]}else for(n in o={},i)gt.call(i,n)&&(o[n]=i[n]);else o=i})},$digest:function(){var r,e,o,s,d,c,nt=i,f,a=[],w,b;g("$digest");v.$$checkUrlChange();this===y&&null!==t&&(v.defer.cancel(t),it());n=null;do{for(c=!1,f=this;p.length;){try{b=p.shift();b.scope.$eval(b.expression,b.locals)}catch(rt){l(rt)}n=null}n:do{if(s=f.$$watchers)for(d=s.length;d--;)try{if(r=s[d])if((e=r.get(f))===(o=r.last)||(r.eq?ot(e,o):"number"==typeof e&&"number"==typeof o&&isNaN(e)&&isNaN(o))){if(r===n){c=!1;break n}}else c=!0,n=r,r.last=r.eq?st(e,null):e,r.fn(e,o===tt?e:o,f),5>nt&&(w=4-nt,a[w]||(a[w]=[]),a[w].push({msg:h(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:e,oldVal:o}))}catch(ut){l(ut)}if(!(s=f.$$watchersCount&&f.$$childHead||f!==this&&f.$$nextSibling))for(;f!==this&&!(s=f.$$nextSibling);)f=f.$parent}while(f=s);if((c||p.length)&&!nt--)throw y.$$phase=null,u("infdig",i,a);}while(c||p.length);for(y.$$phase=null;k.length;)try{k.shift()()}catch(ft){l(ft)}},$destroy:function(){var n,t;if(!this.$$destroyed){n=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===y&&v.$$applicationDestroyed();b(this,-this.$$watchersCount);for(t in this.$$listenerCount)nt(this,this.$$listenerCount[t],t);n&&n.$$childHead==this&&(n.$$childHead=this.$$nextSibling);n&&n.$$childTail==this&&(n.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=o;this.$on=this.$watch=this.$watchGroup=function(){return o};this.$$listeners={};this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(n,t){return a(n)(this,t)},$evalAsync:function(n,t){y.$$phase||p.length||v.defer(function(){p.length&&y.$digest()});p.push({scope:this,expression:n,locals:t})},$$postDigest:function(n){k.push(n)},$apply:function(n){try{g("$apply");try{return this.$eval(n)}finally{y.$$phase=null}}catch(i){l(i)}finally{try{y.$digest()}catch(t){throw l(t),t;}}},$applyAsync:function(n){function t(){i.$eval(n)}var i=this;n&&d.push(t);ut()},$on:function(n,t){var r=this.$$listeners[n],i,u;r||(this.$$listeners[n]=r=[]);r.push(t);i=this;do i.$$listenerCount[n]||(i.$$listenerCount[n]=0),i.$$listenerCount[n]++;while(i=i.$parent);return u=this,function(){var i=r.indexOf(t);-1!==i&&(r[i]=null,nt(u,1,n))}},$emit:function(n){var o=[],u,r=this,e=!1,t={name:n,targetScope:r,stopPropagation:function(){e=!0},preventDefault:function(){t.defaultPrevented=!0},defaultPrevented:!1},s=cr([t],arguments,1),i,f;do{for(u=r.$$listeners[n]||o,t.currentScope=r,i=0,f=u.length;i<f;i++)if(u[i])try{u[i].apply(null,s)}catch(h){l(h)}else u.splice(i,1),i--,f--;if(e)return t.currentScope=null,t;r=r.$parent}while(r);return t.currentScope=null,t},$broadcast:function(n){var t=this,i=this,u={name:n,targetScope:this,preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},e,r,f;if(!this.$$listenerCount[n])return u;for(e=cr([u],arguments,1);t=i;){for(u.currentScope=t,i=t.$$listeners[n]||[],r=0,f=i.length;r<f;r++)if(i[r])try{i[r].apply(null,e)}catch(o){l(o)}else i.splice(r,1),r--,f--;if(!(i=t.$$listenerCount[n]&&t.$$childHead||t!==this&&t.$$nextSibling))for(;t!==this&&!(i=t.$$nextSibling);)t=t.$parent}return u.currentScope=null,u}};var y=new w,p=y.$$asyncQueue=[],k=y.$$postDigestQueue=[],d=y.$$applyAsyncQueue=[];return y}]}function ya(){var n=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return e(t)?(n=t,this):n};this.imgSrcSanitizationWhitelist=function(n){return e(n)?(t=n,this):t};this.$get=function(){return function(i,r){var f=r?t:n,u;return u=ri(i).href,""===u||u.match(f)?i:"unsafe:"+u}}}function pa(n){if("self"===n)return n;if(l(n)){if(-1<n.indexOf("***"))throw ui("iwcard",n);return n=sh(n).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+n+"$")}if(wi(n))return new RegExp("^"+n.source+"$");throw ui("imatcher");}function ls(n){var t=[];return e(n)&&r(n,function(n){t.push(pa(n))}),t}function wa(){this.SCE_CONTEXTS=at;var n=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(n=ls(t)),n};this.resourceUrlBlacklist=function(n){return arguments.length&&(t=ls(n)),t};this.$get=["$injector",function(i){function o(n,t){return"self"===n?as(t):!!n.exec(t.href)}function u(n){var t=function(n){this.$$unwrapTrustedValue=function(){return n}};return n&&(t.prototype=new n),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}var s=function(){throw ui("unsafe");},e,r;return i.has("$sanitize")&&(s=i.get("$sanitize")),e=u(),r={},r[at.HTML]=u(e),r[at.CSS]=u(e),r[at.URL]=u(e),r[at.JS]=u(e),r[at.RESOURCE_URL]=u(r[at.URL]),{trustAs:function(n,t){var i=r.hasOwnProperty(n)?r[n]:null;if(!i)throw ui("icontext",n,t);if(null===t||f(t)||""===t)return t;if("string"!=typeof t)throw ui("itype",n);return new i(t)},getTrusted:function(i,u){var h,e,l,c;if(null===u||f(u)||""===u)return u;if(h=r.hasOwnProperty(i)?r[i]:null,h&&u instanceof h)return u.$$unwrapTrustedValue();if(i===at.RESOURCE_URL){for(h=ri(u.toString()),c=!1,e=0,l=n.length;e<l;e++)if(o(n[e],h)){c=!0;break}if(c)for(e=0,l=t.length;e<l;e++)if(o(t[e],h)){c=!1;break}if(c)return u;throw ui("insecurl",u.toString());}if(i===at.HTML)return s(u);throw ui("unsafe");},valueOf:function(n){return n instanceof e?n.$$unwrapTrustedValue():n}}}]}function ba(){var n=!0;this.enabled=function(t){return arguments.length&&(n=!!t),n};this.$get=["$parse","$sceDelegate",function(t,i){var u;if(n&&8>nr)throw ui("iequirks");u=ht(at);u.isEnabled=function(){return n};u.trustAs=i.trustAs;u.getTrusted=i.getTrusted;u.valueOf=i.valueOf;n||(u.trustAs=u.getTrusted=function(n,t){return t},u.valueOf=fr);u.parseAs=function(n,i){var r=t(i);return r.literal&&r.constant?r:t(i,function(t){return u.getTrusted(n,t)})};var f=u.parseAs,e=u.getTrusted,o=u.trustAs;return r(at,function(n,t){var i=y(t);u[ar("parse_as_"+i)]=function(t){return f(n,t)};u[ar("get_trusted_"+i)]=function(t){return e(n,t)};u[ar("trust_as_"+i)]=function(t){return o(n,t)}}),u}]}function ka(){this.$get=["$window","$document",function(n,t){var o={},s=tt((/android (\d+)/.exec(y((n.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((n.navigator||{}).userAgent),h=t[0]||{},i,r=h.body&&h.body.style,u=!1,e=!1,c;if(r){for(c in r)if(u=/^(Moz|webkit|ms)(?=[A-Z])/.exec(c)){i=u[0];i=i.substr(0,1).toUpperCase()+i.substr(1);break}i||(i="WebkitOpacity"in r&&"webkit");u=!!("transition"in r||i+"Transition"in r);e=!!("animation"in r||i+"Animation"in r);!s||u&&e||(u=l(r.webkitTransition),e=l(r.webkitAnimation))}return{history:!(!n.history||!n.history.pushState||4>s||a),hasEvent:function(n){if("input"===n&&11>=nr)return!1;if(f(o[n])){var t=h.createElement("div");o[n]="on"+n in t}return o[n]},csp:ai(),vendorPrefix:i,transitions:u,animations:e,android:s}}]}function da(){this.$get=["$templateCache","$http","$q","$sce",function(n,t,i,r){function u(f,e){u.totalPendingRequests++;l(f)&&n.get(f)||(f=r.getTrustedResourceUrl(f));var o=t.defaults&&t.defaults.transformResponse;return a(o)?o=o.filter(function(n){return n!==vf}):o===vf&&(o=null),t.get(f,{cache:n,transformResponse:o})["finally"](function(){u.totalPendingRequests--}).then(function(t){return n.put(f,t.data),t.data},function(n){if(!e)throw ft("tpload",f,n.status,n.statusText);return i.reject(n)})}return u.totalPendingRequests=0,u}]}function ga(){this.$get=["$rootScope","$browser","$location",function(n,t,i){return{findBindings:function(n,t,i){n=n.getElementsByClassName("ng-binding");var u=[];return r(n,function(n){var f=ut.element(n).data("$binding");f&&r(f,function(r){i?new RegExp("(^|\\s)"+sh(t)+"(\\s|\\||$)").test(r)&&u.push(n):-1!=r.indexOf(t)&&u.push(n)})}),u},findModels:function(n,t,i){for(var f,u=["ng-","data-ng-","ng\\:"],r=0;r<u.length;++r)if(f=n.querySelectorAll("["+u[r]+"model"+(i?"=":"*=")+'"'+t+'"]'),f.length)return f},getLocation:function(){return i.url()},setLocation:function(t){t!==i.url()&&(i.url(t),n.$digest())},whenStable:function(n){t.notifyWhenNoOutstandingRequests(n)}}}]}function nv(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(n,t,i,r,u){function s(s,c,l){h(s)||(l=c,c=s,s=o);var w=ni.call(arguments,3),p=e(l)&&!l,a=(p?r:i).defer(),v=a.promise,y;return y=t.defer(function(){try{a.resolve(s.apply(null,w))}catch(t){a.reject(t);u(t)}finally{delete f[v.$$timeoutId]}p||n.$apply()},c),v.$$timeoutId=y,f[y]=a,v}var f={};return s.cancel=function(n){return n&&n.$$timeoutId in f?(f[n.$$timeoutId].reject("canceled"),delete f[n.$$timeoutId],t.defer.cancel(n.$$timeoutId)):!1},s}]}function ri(n){return nr&&(nt.setAttribute("href",n),n=nt.href),nt.setAttribute("href",n),{href:nt.href,protocol:nt.protocol?nt.protocol.replace(/:$/,""):"",host:nt.host,search:nt.search?nt.search.replace(/^\?/,""):"",hash:nt.hash?nt.hash.replace(/^#/,""):"",hostname:nt.hostname,port:nt.port,pathname:"/"===nt.pathname.charAt(0)?nt.pathname:"/"+nt.pathname}}function as(n){return n=l(n)?ri(n):n,n.protocol===dh.protocol&&n.host===dh.host}function tv(){this.$get=vt(n)}function vs(n){function r(n){try{return decodeURIComponent(n)}catch(t){return n}}var u=n[0]||{},t={},i="";return function(){var n,e,o,s,h;if(n=u.cookie||"",n!==i)for(i=n,n=i.split("; "),t={},o=0;o<n.length;o++)e=n[o],s=e.indexOf("="),0<s&&(h=r(e.substring(0,s)),f(t[h])&&(t[h]=r(e.substring(s+1))));return t}}function iv(){this.$get=vs}function ys(n){function t(i,u){if(c(i)){var f={};return r(i,function(n,i){f[i]=t(i,n)}),f}return n.factory(i+"Filter",u)}this.register=t;this.$get=["$injector",function(n){return function(t){return n.get(t+"Filter")}}];t("currency",ps);t("date",gs);t("filter",rv);t("json",fv);t("limitTo",ev);t("lowercase",gh);t("number",ws);t("orderBy",nh);t("uppercase",nc)}function rv(){return function(n,t,i){if(!fi(n)){if(null==n)return n;throw v("filter")("notarray",n);}var r;switch(kf(t)){case"function":break;case"boolean":case"null":case"number":case"string":r=!0;case"object":t=uv(t,i,r);break;default:return n}return Array.prototype.filter.call(n,t)}}function uv(n,t,i){var r=c(n)&&"$"in n;return!0===t?t=ot:h(t)||(t=function(n,t){return f(n)?!1:null===n||null===t?n===t:c(t)||c(n)&&!ve(n)?!1:(n=y(""+n),t=y(""+t),-1!==n.indexOf(t))}),function(u){return r&&!c(u)?hi(u,n.$,t,!1):hi(u,n,t,i)}}function hi(n,t,i,r,u){var o=kf(n),s=kf(t),e;if("string"===s&&"!"===t.charAt(0))return!hi(n,t.substring(1),i,r);if(a(n))return n.some(function(n){return hi(n,t,i,r)});switch(o){case"object":if(r){for(e in n)if("$"!==e.charAt(0)&&hi(n[e],t,i,!0))return!0;return u?!1:hi(n,t,i,!1)}if("object"===s){for(e in t)if(u=t[e],!h(u)&&!f(u)&&(o="$"===e,!hi(o?n:n[e],u,i,o,o)))return!1;return!0}return i(n,t);case"function":return!1;default:return i(n,t)}}function kf(n){return null===n?"null":typeof n}function ps(n){var t=n.NUMBER_FORMATS;return function(n,i,r){return f(i)&&(i=t.CURRENCY_SYM),f(r)&&(r=t.PATTERNS[1].maxFrac),null==n?n:bs(n,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,i)}}function ws(n){var t=n.NUMBER_FORMATS;return function(n,i){return null==n?n:bs(n,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,i)}}function bs(n,t,i,r,u){var a,o,l;if(c(n)||(a=0>n,n=Math.abs(n),o=Infinity===n,!o&&!isFinite(n)))return"";var h=n+"",s="",e=!1,y=[];if(o&&(s="∞"),o||-1===h.indexOf("e")||(l=h.match(/([\d\.]+)e(-?)(\d+)/),l&&"-"==l[2]&&l[3]>u+1?n=0:(s=h,e=!0)),o||e)0<u&&1>n&&(s=n.toFixed(u),n=parseFloat(s),s=s.replace(se,r));else{o=(h.split(se)[1]||"").length;f(u)&&(u=Math.min(Math.max(t.minFrac,o),t.maxFrac));n=+(Math.round(+(n.toString()+"e"+u)).toString()+"e"+-u);var o=(""+n).split(se),h=o[0],o=o[1]||"",l=0,v=t.lgSize,p=t.gSize;if(h.length>=v+p)for(l=h.length-v,e=0;e<l;e++)0==(l-e)%p&&0!==e&&(s+=i),s+=h.charAt(e);for(e=l;e<h.length;e++)0==(h.length-e)%v&&0!==e&&(s+=i),s+=h.charAt(e);for(;o.length<u;)o+="0";u&&"0"!==u&&(s+=r+o.substr(0,u))}return 0===n&&(a=!1),y.push(a?t.negPre:t.posPre,s,a?t.negSuf:t.posSuf),y.join("")}function yu(n,t,i){var r="";for(0>n&&(r="-",n=-n),n=""+n;n.length<t;)n="0"+n;return i&&(n=n.substr(n.length-t)),r+n}function g(n,t,i,r){return i=i||0,function(u){return u=u["get"+n](),(0<i||u>-i)&&(u+=i),0===u&&-12==i&&(u=12),yu(u,t,r)}}function pu(n,t){return function(i,r){var u=i["get"+n](),f=bu(t?"SHORT"+n:n);return r[f][u]}}function ks(n){var t=new Date(n,0,1).getDay();return new Date(n,0,(4>=t?5:12)-t)}function ds(n){return function(t){var i=ks(t.getFullYear());return t=+new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))-+i,t=1+Math.round(t/6048e5),yu(t,n)}}function df(n,t){return 0>=n.getFullYear()?t.ERAS[0]:t.ERAS[1]}function gs(n){function t(n){var t;if(t=n.match(i)){n=new Date(0);var r=0,u=0,f=t[8]?n.setUTCFullYear:n.setFullYear,e=t[8]?n.setUTCHours:n.setHours;t[9]&&(r=tt(t[9]+t[10]),u=tt(t[9]+t[11]));f.call(n,tt(t[1]),tt(t[2])-1,tt(t[3]));r=tt(t[4]||0)-r;u=tt(t[5]||0)-u;f=tt(t[6]||0);t=Math.round(1e3*parseFloat("0."+(t[7]||0)));e.call(n,r,u,f,t)}return n}var i=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(i,u,f){var h="",e=[],o,c,s;if(u=u||"mediumDate",u=n.DATETIME_FORMATS[u]||u,l(i)&&(i=gy.test(i)?tt(i):t(i)),k(i)&&(i=new Date(i)),!et(i)||!isFinite(i.getTime()))return i;for(;u;)(c=dy.exec(u))?(e=cr(e,c,1),u=e.pop()):(e.push(u),u=null);return s=i.getTimezoneOffset(),f&&(s=ke(f,i.getTimezoneOffset()),i=of(i,f,!0)),r(e,function(t){o=ky[t];h+=o?o(i,n.DATETIME_FORMATS,s):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}}function fv(){return function(n,t){return f(t)&&(t=2),lr(n,t)}}function ev(){return function(n,t,i){return(t=Infinity===Math.abs(Number(t))?Number(t):tt(t),isNaN(t))?n:(k(n)&&(n=n.toString()),!a(n)&&!l(n))?n:(i=!i||isNaN(i)?0:tt(i),i=0>i&&i>=-n.length?n.length+i:i,0<=t?n.slice(i,i+t):0===i?n.slice(t,n.length):n.slice(Math.max(0,i+t),i))}}function nh(n){function i(t,i){return i=i?-1:1,t.map(function(t){var u=1,r=fr,f;return h(t)?r=t:l(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(u="-"==t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=n(t),r.constant)&&(f=r(),r=function(n){return n[f]})),{get:r,descending:u*i}})}function t(n){switch(typeof n){case"number":case"boolean":case"string":return!0;default:return!1}}return function(n,r,u){if(!fi(n))return n;a(r)||(r=[r]);0===r.length&&(r=["+"]);var f=i(r,u);return f.push({get:function(){return{}},descending:u?-1:1}),n=Array.prototype.map.call(n,function(n,i){return{value:n,predicateValues:f.map(function(r){var u=r.get(n);if(r=typeof u,null===u)r="string",u="null";else if("string"===r)u=u.toLowerCase();else if("object"===r)n:{if("function"==typeof u.valueOf&&(u=u.valueOf(),t(u)))break n;if(ve(u)&&(u=u.toString(),t(u)))break n;u=i}return{value:u,type:r}})}}),n.sort(function(n,t){for(var i=0,r=0,o=f.length;r<o;++r){var i=n.predicateValues[r],u=t.predicateValues[r],e=0;if(i.type===u.type?i.value!==u.value&&(e=i.value<u.value?-1:1):e=i.type<u.type?-1:1,i=e*f[r].descending)break}return i}),n.map(function(n){return n.value})}}function ci(n){return h(n)&&(n={link:n}),n.restrict=n.restrict||"AC",vt(n)}function th(n,t,u,f,e){var o=this,s=[];o.$error={};o.$$success={};o.$pending=i;o.$name=e(t.name||t.ngForm||"")(u);o.$dirty=!1;o.$pristine=!0;o.$valid=!0;o.$invalid=!1;o.$submitted=!1;o.$$parentForm=dr;o.$rollbackViewValue=function(){r(s,function(n){n.$rollbackViewValue()})};o.$commitViewValue=function(){r(s,function(n){n.$commitViewValue()})};o.$addControl=function(n){ki(n.$name,"input");s.push(n);n.$name&&(o[n.$name]=n);n.$$parentForm=o};o.$$renameControl=function(n,t){var i=n.$name;o[i]===n&&delete o[i];o[t]=n;n.$name=t};o.$removeControl=function(n){n.$name&&o[n.$name]===n&&delete o[n.$name];r(o.$pending,function(t,i){o.$setValidity(i,null,n)});r(o.$error,function(t,i){o.$setValidity(i,null,n)});r(o.$$success,function(t,i){o.$setValidity(i,null,n)});hr(s,n);n.$$parentForm=dr};uh({ctrl:this,$element:n,set:function(n,t,i){var r=n[t];r?-1===r.indexOf(i)&&r.push(i):n[t]=[i]},unset:function(n,t,i){var r=n[t];r&&(hr(r,i),0===r.length&&delete n[t])},$animate:f});o.$setDirty=function(){f.removeClass(n,ur);f.addClass(n,uf);o.$dirty=!0;o.$pristine=!1;o.$$parentForm.$setDirty()};o.$setPristine=function(){f.setClass(n,ur,uf+" ng-submitted");o.$dirty=!1;o.$pristine=!0;o.$submitted=!1;r(s,function(n){n.$setPristine()})};o.$setUntouched=function(){r(s,function(n){n.$setUntouched()})};o.$setSubmitted=function(){f.addClass(n,"ng-submitted");o.$submitted=!0;o.$$parentForm.$setSubmitted()}}function gf(n){n.$formatters.push(function(t){return n.$isEmpty(t)?t:t.toString()})}function pr(n,t,i,r,u,f){var c=y(t[0].type),s,o,e,h;if(!u.android){s=!1;t.on("compositionstart",function(){s=!0});t.on("compositionend",function(){s=!1;o()})}if(o=function(n){if(e&&(f.defer.cancel(e),e=null),!s){var u=t.val();n=n&&n.type;"password"===c||i.ngTrim&&"false"===i.ngTrim||(u=w(u));(r.$viewValue!==u||""===u&&r.$$hasNativeValidators)&&r.$setViewValue(u,n)}},u.hasEvent("input"))t.on("input",o);else{h=function(n,t,i){e||(e=f.defer(function(){e=null;t&&t.value===i||o(n)}))};t.on("keydown",function(n){var t=n.keyCode;91===t||15<t&&19>t||37<=t&&40>=t||h(n,this,this.value)});if(u.hasEvent("paste"))t.on("paste cut",h)}t.on("change",o);r.$render=function(){var n=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==n&&t.val(n)}}function wu(n,t){return function(i,u){var e,f;if(et(i))return i;if(l(i)){if('"'==i.charAt(0)&&'"'==i.charAt(i.length-1)&&(i=i.substring(1,i.length-1)),ip.test(i))return new Date(i);if(n.lastIndex=0,e=n.exec(i))return e.shift(),f=u?{yyyy:u.getFullYear(),MM:u.getMonth()+1,dd:u.getDate(),HH:u.getHours(),mm:u.getMinutes(),ss:u.getSeconds(),sss:u.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(e,function(n,i){i<t.length&&(f[t[i]]=+n)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1e3*f.sss||0)}return NaN}}function wr(n,t,r,u){return function(o,s,h,c,l,a,v){function w(n){return n&&!(n.getTime&&n.getTime()!==n.getTime())}function d(n){return e(n)&&!et(n)?r(n)||i:n}var y,p,b,k;ih(o,s,h,c);pr(o,s,h,c,l,a);y=c&&c.$options&&c.$options.timezone;c.$$parserName=n;c.$parsers.push(function(n){return c.$isEmpty(n)?null:t.test(n)?(n=r(n,p),y&&(n=of(n,y)),n):i});c.$formatters.push(function(n){if(n&&!et(n))throw nu("datefmt",n);return w(n)?((p=n)&&y&&(p=of(p,y,!0)),v("date")(n,u,y)):(p=null,"")});(e(h.min)||h.ngMin)&&(c.$validators.min=function(n){return!w(n)||f(b)||r(n)>=b},h.$observe("min",function(n){b=d(n);c.$validate()}));(e(h.max)||h.ngMax)&&(c.$validators.max=function(n){return!w(n)||f(k)||r(n)<=k},h.$observe("max",function(n){k=d(n);c.$validate()}))}}function ih(n,t,r,u){(u.$$hasNativeValidators=c(t[0].validity))&&u.$parsers.push(function(n){var r=t.prop("validity")||{};return r.badInput&&!r.typeMismatch?i:n})}function rh(n,t,i,r,u){if(e(r)){if(n=n(r),!n.constant)throw nu("constexpr",i,r);return n(t)}return u}function ne(n,t){return n="ngClass"+n,["$animate",function(i){function f(n,t){var f=[],r=0,u,i;n:for(;r<n.length;r++){for(u=n[r],i=0;i<t.length;i++)if(u==t[i])continue n;f.push(u)}return f}function u(n){var t=[];return a(n)?(r(n,function(n){t=t.concat(u(n))}),t):l(n)?n.split(" "):c(n)?(r(n,function(n,i){n&&(t=t.concat(i.split(" ")))}),t):n}return{restrict:"AC",link:function(e,o,s){function h(n,t){var i=o.data("$classCounts")||it(),u=[];return r(n,function(n){(0<t||i[n])&&(i[n]=(i[n]||0)+t,i[n]===+(0<t)&&u.push(n))}),o.data("$classCounts",i),u.join(" ")}function l(n){var r,l;if(!0===t||e.$index%2===t)if(r=u(n||[]),c){if(!ot(n,c)){var a=u(c),l=f(r,a),r=f(a,r),l=h(l,1),r=h(r,-1);l&&l.length&&i.addClass(o,l);r&&r.length&&i.removeClass(o,r)}}else l=h(r,1),s.$addClass(l);c=ht(n)}var c;e.$watch(s[n],l,!0);s.$observe("class",function(){l(e.$eval(s[n]))});"ngClass"!==n&&e.$watch("$index",function(i,r){var f=i&1,o;f!==(r&1)&&(o=u(e.$eval(s[n])),f===t?(f=h(o,1),s.$addClass(f)):(f=h(o,-1),s.$removeClass(f)))})}}}]}function uh(n){function e(n,t){t&&!r[n]?(c.addClass(s,n),r[n]=!0):!t&&r[n]&&(c.removeClass(s,n),r[n]=!1)}function o(n,t){n=n?"-"+to(n,"-"):"";e(gr+n,!0===t);e(cc+n,!1===t)}var t=n.ctrl,s=n.$element,r={},h=n.set,u=n.unset,c=n.$animate;r[cc]=!(r[gr]=s.hasClass(gr));t.$setValidity=function(n,r,s){f(r)?(t.$pending||(t.$pending={}),h(t.$pending,n,s)):(t.$pending&&u(t.$pending,n,s),fh(t.$pending)&&(t.$pending=i));sr(r)?r?(u(t.$error,n,s),h(t.$$success,n,s)):(h(t.$error,n,s),u(t.$$success,n,s)):(u(t.$error,n,s),u(t.$$success,n,s));t.$pending?(e(lc,!0),t.$valid=t.$invalid=i,o("",null)):(e(lc,!1),t.$valid=fh(t.$error),t.$invalid=!t.$valid,o("",t.$valid));r=t.$pending&&t.$pending[n]?i:t.$error[n]?!1:t.$$success[n]?!0:null;o(n,r);t.$$parentForm.$setValidity(n,r,t)}}function fh(n){if(n)for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var ov=/^\/(.+)\/([a-z]*)$/,y=function(n){return l(n)?n.toLowerCase():n},gt=Object.prototype.hasOwnProperty,bu=function(n){return l(n)?n.toUpperCase():n},nr,s,pt,ni=[].slice,sv=[].splice,hv=[].push,ti=Object.prototype.toString,eh=Object.getPrototypeOf,li=v("ng"),ut=n.angular||(n.angular={}),te,ku=0,rr,ch,vi,br,fe,ee,kh,tf,u,rf,gh,nc,tc,kr,dr;nr=t.documentMode;o.$inject=[];fr.$inject=[];var a=Array.isArray,oh=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,w=function(n){return l(n)?n.trim():n},sh=function(n){return n.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},ai=function(){var i,n;if(!e(ai.rules))if(i=t.querySelector("[ng-csp]")||t.querySelector("[data-ng-csp]"),i)n=i.getAttribute("ng-csp")||i.getAttribute("data-ng-csp"),ai.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")};else{i=ai;try{new Function("");n=!1}catch(r){n=!0}i.rules={noUnsafeEval:n,noInlineStyle:!1}}return ai.rules},du=function(){if(e(du.name_))return du.name_;for(var r,f=tr.length,i,u,n=0;n<f;++n)if(i=tr[n],r=t.querySelector("["+i.replace(":","\\:")+"jq]")){u=r.getAttribute(i+"jq");break}return du.name_=u},tr=["ng-","data-ng-","ng:","x-ng-"],cv=/[A-Z]/g,hh=!1,ie,wt=1,ir=3,lv={full:"1.4.7",major:1,minor:4,dot:7,codeName:"dark-luminescence"};b.expando="ng339";rr=b.cache={};ch=1;b._data=function(n){return this.cache[n[this.expando]]||{}};var av=/([\:\-\_]+(.))/g,vv=/^moz([A-Z])/,yv={mouseleave:"mouseout",mouseenter:"mouseover"},re=v("jqLite"),pv=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ue=/<|&#?\w+;/,wv=/<([\w:-]+)/,bv=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,lt={option:[1,'<select multiple="multiple">',"<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};lt.optgroup=lt.option;lt.tbody=lt.tfoot=lt.colgroup=lt.caption=lt.thead;lt.th=lt.td;vi=b.prototype={ready:function(i){function r(){u||(u=!0,i())}var u=!1;"complete"===t.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),b(n).on("load",r))},toString:function(){var n=[];return r(this,function(t){n.push(""+t)}),"["+n.join(", ")+"]"},eq:function(n){return 0<=n?s(this[n]):s(this[this.length+n])},length:0,push:hv,sort:[].sort,splice:[].splice};br={};r("multiple selected checked disabled readOnly required open".split(" "),function(n){br[y(n)]=n});fe={};r("input select option textarea button form details".split(" "),function(n){fe[n]=!0});ee={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};r({data:cf,removeData:fu,hasData:function(n){for(var t in rr[n.ng339])return!0;return!1}},function(n,t){b[t]=n});r({data:cf,inheritedData:cu,scope:function(n){return s.data(n,"$scope")||cu(n.parentNode||n,["$isolateScope","$scope"])},isolateScope:function(n){return s.data(n,"$isolateScope")||s.data(n,"$isolateScopeNoTemplate")},controller:oo,injector:function(n){return cu(n,"$injector")},removeAttr:function(n,t){n.removeAttribute(t)},hasClass:ou,css:function(n,t,i){if(t=ar(t),e(i))n.style[t]=i;else return n.style[t]},attr:function(n,t,r){var u=n.nodeType;if(u!==ir&&2!==u&&8!==u)if(u=y(t),br[u])if(e(r))r?(n[t]=!0,n.setAttribute(t,u)):(n[t]=!1,n.removeAttribute(u));else return n[t]||(n.attributes.getNamedItem(t)||o).specified?u:i;else if(e(r))n.setAttribute(t,r);else if(n.getAttribute)return n=n.getAttribute(t,2),null===n?i:n},prop:function(n,t,i){if(e(i))n[t]=i;else return n[t]},text:function(){function n(n,t){if(f(t)){var i=n.nodeType;return i===wt||i===ir?n.textContent:""}n.textContent=t}return n.$dv="",n}(),val:function(n,t){if(f(t)){if(n.multiple&&"select"===bt(n)){var i=[];return r(n.options,function(n){n.selected&&i.push(n.value||n.text)}),0===i.length?null:i}return n.value}n.value=t},html:function(n,t){if(f(t))return n.innerHTML;uu(n,!0);n.innerHTML=t},empty:so},function(n,t){b.prototype[t]=function(t,i){var r,u,e=this.length,o;if(n!==so&&f(2==n.length&&n!==ou&&n!==oo?t:i)){if(c(t)){for(r=0;r<e;r++)if(n===cf)n(this[r],t);else for(u in t)n(this[r],u,t[u]);return this}for(r=n.$dv,e=f(r)?Math.min(e,1):e,u=0;u<e;u++)o=n(this[u],t,i),r=r?r+o:o;return r}for(r=0;r<e;r++)n(this[r],t,i);return this}});r({removeData:fu,on:function kv(n,t,i,r){var f,u,s,o;if(e(r))throw re("onargs");if(ro(n))for(u=eu(n,!0),r=u.events,f=u.handle,f||(f=u.handle=ol(n,r)),u=0<=t.indexOf(" ")?t.split(" "):[t],s=u.length;s--;)t=u[s],o=r[t],o||(r[t]=[],"mouseenter"===t||"mouseleave"===t?kv(n,yv[t],function(n){var i=n.relatedTarget;i&&(i===this||this.contains(i))||f(n,t)}):"$destroy"!==t&&n.addEventListener(t,f,!1),o=r[t]),o.push(i)},off:fo,one:function(n,t,i){n=s(n);n.on(t,function r(){n.off(t,i);n.off(t,r)});n.on(t,i)},replaceWith:function(n,t){var i,u=n.parentNode;uu(n);r(new b(t),function(t){i?u.insertBefore(t,i.nextSibling):u.replaceChild(t,n);i=t})},children:function(n){var t=[];return r(n.childNodes,function(n){n.nodeType===wt&&t.push(n)}),t},contents:function(n){return n.contentDocument||n.childNodes||[]},append:function(n,t){var i=n.nodeType,r;if(i===wt||11===i)for(t=new b(t),i=0,r=t.length;i<r;i++)n.appendChild(t[i])},prepend:function(n,t){if(n.nodeType===wt){var i=n.firstChild;r(new b(t),function(t){n.insertBefore(t,i)})}},wrap:function(n,t){t=s(t).eq(0).clone()[0];var i=n.parentNode;i&&i.replaceChild(t,n);t.appendChild(n)},remove:lf,detach:function(n){lf(n,!0)},after:function(n,t){var u=n,e=n.parentNode,i,f,r;for(t=new b(t),i=0,f=t.length;i<f;i++)r=t[i],e.insertBefore(r,u.nextSibling),u=r},addClass:hu,removeClass:su,toggleClass:function(n,t,i){t&&r(t.split(" "),function(t){var r=i;f(r)&&(r=!ou(n,t));(r?hu:su)(n,t)})},parent:function(n){return(n=n.parentNode)&&11!==n.nodeType?n:null},next:function(n){return n.nextElementSibling},find:function(n,t){return n.getElementsByTagName?n.getElementsByTagName(t):[]},clone:hf,triggerHandler:function(n,t,i){var u,e,s=t.type||t,f=eu(n);(f=(f=f&&f.events)&&f[s])&&(u={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:o,type:s,target:n},t.type&&(u=p(u,t)),t=ht(f),e=i?[u].concat(i):[u],r(t,function(t){u.isImmediatePropagationStopped()||t.apply(n,e)}))}},function(n,t){b.prototype[t]=function(t,i,r){for(var u,o=0,h=this.length;o<h;o++)f(u)?(u=n(this[o],t,i,r),e(u)&&(u=s(u))):eo(u,n(this[o],t,i,r));return e(u)?u:this};b.prototype.bind=b.prototype.on;b.prototype.unbind=b.prototype.off});di.prototype={put:function(n,t){this[ei(n,this.nextUid)]=t},get:function(n){return this[ei(n,this.nextUid)]},remove:function(n){var t=this[n=ei(n,this.nextUid)];return delete this[n],t}};var dv=[function(){this.$get=[function(){return di}]}],lh=/^[^\(]*\(\s*([^\)]*)\)/m,gv=/,/,ny=/^\s*(_?)(\S+?)\1\s*$/,ah=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,yi=v("$injector");vr.$$annotate=function(n,t,i){var u;if("function"==typeof n){if(!(u=n.$inject)){if(u=[],n.length){if(t)throw l(i)&&i||(i=n.name||hl(n)),yi("strictdi",i);t=n.toString().replace(ah,"");t=t.match(lh);r(t[1].split(gv),function(n){n.replace(ny,function(n,t,i){u.push(i)})})}n.$inject=u}}else a(n)?(t=n.length-1,bi(n[t],"fn"),u=n.slice(0,t)):bi(n,"fn",!0);return u};var vh=v("$animate"),ty=function(){this.$get=["$q","$$rAF",function(n,t){function i(){}return i.all=o,i.chain=o,i.prototype={end:o,cancel:o,resume:o,pause:o,complete:o,then:function(i,r){return n(function(n){t(function(){n()})}).then(i,r)}},i}]},iy=function(){var n=new di,t=[];this.$get=["$$AnimateRunner","$rootScope",function(i,u){function f(n,t,i){var u=!1;return t&&(t=l(t)?t.split(" "):a(t)?t:[],r(t,function(t){t&&(u=!0,n[t]=i)})),u}function e(){r(t,function(t){var f=n.get(t);if(f){var e=ll(t.attr("class")),i="",u="";r(f,function(n,t){n!==!!e[t]&&(n?i+=(i.length?" ":"")+t:u+=(u.length?" ":"")+t)});r(t,function(n){i&&hu(n,i);u&&su(n,u)});n.remove(t)}});t.length=0}return{enabled:o,on:o,off:o,pin:o,push:function(r,o,s,h){return h&&h(),s=s||{},s.from&&r.css(s.from),s.to&&r.css(s.to),(s.addClass||s.removeClass)&&(o=s.addClass,h=s.removeClass,s=n.get(r)||{},o=f(s,o,!0),h=f(s,h,!1),o||h)&&(n.put(r,s),t.push(r),1===t.length&&u.$$postDigest(e)),new i}}}]},ry=["$provide",function(n){var t=this;this.$$registeredAnimations=Object.create(null);this.register=function(i,r){if(i&&"."!==i.charAt(0))throw vh("notcsel",i);var u=i+"-animation";t.$$registeredAnimations[i.substr(1)]=u;n.factory(u,r)};this.classNameFilter=function(n){if(1===arguments.length&&(this.$$classNameFilter=n instanceof RegExp?n:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw vh("nongcls","ng-animate");return this.$$classNameFilter};this.$get=["$$animateQueue",function(n){function t(n,t,i){var r,u;if(i){n:{for(r=0;r<i.length;r++)if(u=i[r],1===u.nodeType){r=u;break n}r=void 0}!r||r.parentNode||r.previousElementSibling||(i=null)}i?i.after(n):t.prepend(n)}return{on:n.on,off:n.off,pin:n.pin,enabled:n.enabled,cancel:function(n){n.end&&n.end()},enter:function(i,r,u,f){return r=r&&s(r),u=u&&s(u),r=r||u.parent(),t(i,r,u),n.push(i,"enter",oi(f))},move:function(i,r,u,f){return r=r&&s(r),u=u&&s(u),r=r||u.parent(),t(i,r,u),n.push(i,"move",oi(f))},leave:function(t,i){return n.push(t,"leave",oi(i),function(){t.remove()})},addClass:function(t,i,r){return r=oi(r),r.addClass=yr(r.addclass,i),n.push(t,"addClass",r)},removeClass:function(t,i,r){return r=oi(r),r.removeClass=yr(r.removeClass,i),n.push(t,"removeClass",r)},setClass:function(t,i,r,u){return u=oi(u),u.addClass=yr(u.addClass,i),u.removeClass=yr(u.removeClass,r),n.push(t,"setClass",u)},animate:function(t,i,r,u,f){return f=oi(f),f.from=f.from?p(f.from,i):i,f.to=f.to?p(f.to,r):r,f.tempClasses=yr(f.tempClasses,u||"ng-inline-animate"),n.push(t,"animate",f)}}}]}],uy=function(){this.$get=["$$rAF","$q",function(n,t){var i=function(){};return i.prototype={done:function(n){this.defer&&this.defer[!0===n?"reject":"resolve"]()},end:function(){this.done()},cancel:function(){this.done(!0)},getPromise:function(){return this.defer||(this.defer=t.defer()),this.defer.promise},then:function(n,t){return this.getPromise().then(n,t)},"catch":function(n){return this.getPromise()["catch"](n)},"finally":function(n){return this.getPromise()["finally"](n)}},function(t,r){function u(){return n(function(){r.addClass&&(t.addClass(r.addClass),r.addClass=null);r.removeClass&&(t.removeClass(r.removeClass),r.removeClass=null);r.to&&(t.css(r.to),r.to=null);f||e.done();f=!0}),e}r.cleanupStyles&&(r.from=r.to=null);r.from&&(t.css(r.from),r.from=null);var f,e=new i;return{start:u,end:u}}}]},ft=v("$compile");co.$inject=["$provide","$$sanitizeUriProvider"];var yh=/^((?:x|data)[\:\-_])/i,fy=v("$controller"),ph=/^(\S+)(\s+as\s+(\w+))?$/,ey=function(){this.$get=["$document",function(n){return function(t){return t?!t.nodeType&&t instanceof s&&(t=t[0]):t=n[0].body,t.offsetWidth+1}}]},wh="application/json",oe={"Content-Type":wh+";charset=utf-8"},oy=/^\[|^\{(?!\{)/,sy={"[":/]$/,"{":/}$/},hy=/^\)\]\}',?\n/,cy=v("$http"),bh=function(n){return function(){throw cy("legacy",n);}},pi=ut.$interpolateMinErr=v("$interpolate");pi.throwNoconcat=function(n){throw pi("noconcat",n);};pi.interr=function(n,t){return pi("interr",n,t.toString())};var ly=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ay={http:80,https:443,ftp:21},gu=v("$location"),vy={$$html5:!1,$$replace:!1,absUrl:au("$$absUrl"),url:function(n){if(f(n))return this.$$url;var t=ly.exec(n);return(t[1]||""===n)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===n)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:au("$$protocol"),host:au("$$host"),port:au("$$port"),path:go("$$path",function(n){return n=null!==n?n.toString():"","/"==n.charAt(0)?n:"/"+n}),search:function(n,t){switch(arguments.length){case 0:return this.$$search;case 1:if(l(n)||k(n))n=n.toString(),this.$$search=ge(n);else if(c(n))n=st(n,{}),r(n,function(t,i){null==t&&delete n[i]}),this.$$search=n;else throw gu("isrcharg");break;default:f(t)||null===t?delete this.$$search[n]:this.$$search[n]=t}return this.$$compose(),this},hash:go("$$hash",function(n){return null!==n?n.toString():""}),replace:function(){return this.$$replace=!0,this}};r([ko,wf,pf],function(n){n.prototype=Object.create(vy);n.prototype.state=function(t){if(!arguments.length)return this.$$state;if(n!==pf||!this.$$html5)throw gu("nostate");return this.$$state=f(t)?null:t,this}});var rt=v("$parse"),yy=Function.prototype.call,py=Function.prototype.apply,wy=Function.prototype.bind,nf=it();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(n){nf[n]=!0});kh={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};tf=function(n){this.options=n};tf.prototype={constructor:tf,lex:function(n){for(this.text=n,this.index=0,this.tokens=[];this.index<this.text.length;)if(n=this.text.charAt(this.index),'"'===n||"'"===n)this.readString(n);else if(this.isNumber(n)||"."===n&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(n))this.readIdent();else if(this.is(n,"(){}[].,;:?"))this.tokens.push({index:this.index,text:n}),this.index++;else if(this.isWhitespace(n))this.index++;else{var t=n+this.peek(),i=t+this.peek(2),r=nf[t],u=nf[i];nf[n]||r||u?(n=u?i:r?t:n,this.tokens.push({index:this.index,text:n,operator:!0}),this.index+=n.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(n,t){return-1!==t.indexOf(n)},peek:function(n){return n=n||1,this.index+n<this.text.length?this.text.charAt(this.index+n):!1},isNumber:function(n){return"0"<=n&&"9">=n&&"string"==typeof n},isWhitespace:function(n){return" "===n||"\r"===n||"\t"===n||"\n"===n||"\v"===n||" "===n},isIdent:function(n){return"a"<=n&&"z">=n||"A"<=n&&"Z">=n||"_"===n||"$"===n},isExpOperator:function(n){return"-"===n||"+"===n||this.isNumber(n)},throwError:function(n,t,i){i=i||this.index;t=e(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,i)+"]":" "+i;throw rt("lexerr",n,t,this.text);},readNumber:function(){for(var t,i,n="",r=this.index;this.index<this.text.length;){if(t=y(this.text.charAt(this.index)),"."==t||this.isNumber(t))n+=t;else if(i=this.peek(),"e"==t&&this.isExpOperator(i))n+=t;else if(this.isExpOperator(t)&&i&&this.isNumber(i)&&"e"==n.charAt(n.length-1))n+=t;else if(!this.isExpOperator(t)||i&&this.isNumber(i)||"e"!=n.charAt(n.length-1))break;else this.throwError("Invalid exponent");this.index++}this.tokens.push({index:r,text:n,constant:!0,value:Number(n)})},readIdent:function(){for(var t,n=this.index;this.index<this.text.length;){if(t=this.text.charAt(this.index),!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:n,text:this.text.slice(n,this.index),identifier:!0})},readString:function(n){var f=this.index,t,u;this.index++;for(var r="",u=n,i=!1;this.index<this.text.length;){if(t=this.text.charAt(this.index),u=u+t,i)"u"===t?(i=this.text.substring(this.index+1,this.index+5),i.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+i+"]"),this.index+=4,r+=String.fromCharCode(parseInt(i,16))):r+=kh[t]||t,i=!1;else if("\\"===t)i=!0;else{if(t===n){this.index++;this.tokens.push({index:f,text:u,constant:!0,value:r});return}r+=t}this.index++}this.throwError("Unterminated quote",f)}};u=function(n,t){this.lexer=n;this.options=t};u.Program="Program";u.ExpressionStatement="ExpressionStatement";u.AssignmentExpression="AssignmentExpression";u.ConditionalExpression="ConditionalExpression";u.LogicalExpression="LogicalExpression";u.BinaryExpression="BinaryExpression";u.UnaryExpression="UnaryExpression";u.CallExpression="CallExpression";u.MemberExpression="MemberExpression";u.Identifier="Identifier";u.Literal="Literal";u.ArrayExpression="ArrayExpression";u.Property="Property";u.ObjectExpression="ObjectExpression";u.ThisExpression="ThisExpression";u.NGValueParameter="NGValueParameter";u.prototype={ast:function(n){return this.text=n,this.tokens=this.lexer.lex(n),n=this.program(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),n},program:function(){for(var n=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&n.push(this.expressionStatement()),!this.expect(";"))return{type:u.Program,body:n}},expressionStatement:function(){return{type:u.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var n=this.expression();this.expect("|");)n=this.filter(n);return n},expression:function(){return this.assignment()},assignment:function(){var n=this.ternary();return this.expect("=")&&(n={type:u.AssignmentExpression,left:n,right:this.assignment(),operator:"="}),n},ternary:function(){var n=this.logicalOR(),t,i;return this.expect("?")&&(t=this.expression(),this.consume(":"))?(i=this.expression(),{type:u.ConditionalExpression,test:n,alternate:t,consequent:i}):n},logicalOR:function(){for(var n=this.logicalAND();this.expect("||");)n={type:u.LogicalExpression,operator:"||",left:n,right:this.logicalAND()};return n},logicalAND:function(){for(var n=this.equality();this.expect("&&");)n={type:u.LogicalExpression,operator:"&&",left:n,right:this.equality()};return n},equality:function(){for(var n=this.relational(),t;t=this.expect("==","!=","===","!==");)n={type:u.BinaryExpression,operator:t.text,left:n,right:this.relational()};return n},relational:function(){for(var n=this.additive(),t;t=this.expect("<",">","<=",">=");)n={type:u.BinaryExpression,operator:t.text,left:n,right:this.additive()};return n},additive:function(){for(var n=this.multiplicative(),t;t=this.expect("+","-");)n={type:u.BinaryExpression,operator:t.text,left:n,right:this.multiplicative()};return n},multiplicative:function(){for(var n=this.unary(),t;t=this.expect("*","/","%");)n={type:u.BinaryExpression,operator:t.text,left:n,right:this.unary()};return n},unary:function(){var n;return(n=this.expect("+","-","!"))?{type:u.UnaryExpression,operator:n.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var n,t;for(this.expect("(")?(n=this.filterChain(),this.consume(")")):this.expect("[")?n=this.arrayDeclaration():this.expect("{")?n=this.object():this.constants.hasOwnProperty(this.peek().text)?n=st(this.constants[this.consume().text]):this.peek().identifier?n=this.identifier():this.peek().constant?n=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(n={type:u.CallExpression,callee:n,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(n={type:u.MemberExpression,object:n,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?n={type:u.MemberExpression,object:n,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return n},filter:function(n){n=[n];for(var t={type:u.CallExpression,callee:this.identifier(),arguments:n,filter:!0};this.expect(":");)n.push(this.expression());return t},parseArguments:function(){var n=[];if(")"!==this.peekToken().text)do n.push(this.expression());while(this.expect(","));return n},identifier:function(){var n=this.consume();return n.identifier||this.throwError("is not a valid identifier",n),{type:u.Identifier,name:n.text}},constant:function(){return{type:u.Literal,value:this.consume().value}},arrayDeclaration:function(){var n=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;n.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:u.ArrayExpression,elements:n}},object:function(){var t=[],n;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;n={type:u.Property,kind:"init"};this.peek().constant?n.key=this.constant():this.peek().identifier?n.key=this.identifier():this.throwError("invalid key",this.peek());this.consume(":");n.value=this.expression();t.push(n)}while(this.expect(","));return this.consume("}"),{type:u.ObjectExpression,properties:t}},throwError:function(n,t){throw rt("syntax",t.text,n,t.index+1,this.text,this.text.substring(t.index));},consume:function(n){if(0===this.tokens.length)throw rt("ueoe",this.text);var t=this.expect(n);return t||this.throwError("is unexpected, expecting ["+n+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw rt("ueoe",this.text);return this.tokens[0]},peek:function(n,t,i,r){return this.peekAhead(0,n,t,i,r)},peekAhead:function(n,t,i,r,u){if(this.tokens.length>n){n=this.tokens[n];var f=n.text;if(f===t||f===i||f===r||f===u||!(t||i||r||u))return n}return!1},expect:function(n,t,i,r){return(n=this.peek(n,t,i,r))?(this.tokens.shift(),n):!1},constants:{"true":{type:u.Literal,value:!0},"false":{type:u.Literal,value:!1},"null":{type:u.Literal,value:null},undefined:{type:u.Literal,value:i},"this":{type:u.ThisExpression}}};ss.prototype={compile:function(n,t){var f=this,e=this.astBuilder.ast(n),u,o;return this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},d(e,f.$filter),u="",this.stage="assign",(o=es(e))&&(this.state.computing="assign",u=this.nextId(),this.recurse(o,u),this.return_(u),u="fn.assign="+this.generateFunction("assign","s,v,l")),o=us(e.body),f.stage="inputs",r(o,function(n,t){var i="fn"+t,r;f.state[i]={vars:[],body:[],own:{}};f.state.computing=i;r=f.nextId();f.recurse(n,r);f.return_(r);f.state.inputs.push(i);n.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(e),u='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+u+this.watchFns()+"return fn;",u=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",u)(this.$filter,gi,ii,ts,ns,is,sa,rs,n),this.state=this.stage=i,u.literal=os(e),u.constant=e.constant,u},USE:"use",STRICT:"strict",watchFns:function(){var n=[],t=this.state.inputs,i=this;return r(t,function(t){n.push("var "+t+"="+i.generateFunction(t,"s"))}),t.length&&n.push("fn.inputs=["+t.join(",")+"];"),n.join("")},generateFunction:function(n,t){return"function("+t+"){"+this.varsPrefix(n)+this.body(n)+"};"},filterPrefix:function(){var n=[],t=this;return r(this.state.filters,function(i,r){n.push(i+"=$filter("+t.escape(r)+")")}),n.length?"var "+n.join(",")+";":""},varsPrefix:function(n){return this.state[n].vars.length?"var "+this.state[n].vars.join(",")+";":""},body:function(n){return this.state[n].body.join("")},recurse:function(n,t,f,s,h,c){var v,y,l=this,p,a;if(s=s||o,!c&&e(n.watchId))t=t||this.nextId(),this.if_("i",this.lazyAssign(t,this.computedMember("i",n.watchId)),this.lazyRecurse(n,t,f,s,h,!0));else switch(n.type){case u.Program:r(n.body,function(t,r){l.recurse(t.expression,i,i,function(n){y=n});r!==n.body.length-1?l.current().body.push(y,";"):l.return_(y)});break;case u.Literal:a=this.escape(n.value);this.assign(t,a);s(a);break;case u.UnaryExpression:this.recurse(n.argument,i,i,function(n){y=n});a=n.operator+"("+this.ifDefined(y,0)+")";this.assign(t,a);s(a);break;case u.BinaryExpression:this.recurse(n.left,i,i,function(n){v=n});this.recurse(n.right,i,i,function(n){y=n});a="+"===n.operator?this.plus(v,y):"-"===n.operator?this.ifDefined(v,0)+n.operator+this.ifDefined(y,0):"("+v+")"+n.operator+"("+y+")";this.assign(t,a);s(a);break;case u.LogicalExpression:t=t||this.nextId();l.recurse(n.left,t);l.if_("&&"===n.operator?t:l.not(t),l.lazyRecurse(n.right,t));s(t);break;case u.ConditionalExpression:t=t||this.nextId();l.recurse(n.test,t);l.if_(t,l.lazyRecurse(n.alternate,t),l.lazyRecurse(n.consequent,t));s(t);break;case u.Identifier:t=t||this.nextId();f&&(f.context="inputs"===l.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",n.name)+"?l:s"),f.computed=!1,f.name=n.name);gi(n.name);l.if_("inputs"===l.stage||l.not(l.getHasOwnProperty("l",n.name)),function(){l.if_("inputs"===l.stage||"s",function(){h&&1!==h&&l.if_(l.not(l.nonComputedMember("s",n.name)),l.lazyAssign(l.nonComputedMember("s",n.name),"{}"));l.assign(t,l.nonComputedMember("s",n.name))})},t&&l.lazyAssign(t,l.nonComputedMember("l",n.name)));(l.state.expensiveChecks||vu(n.name))&&l.addEnsureSafeObject(t);s(t);break;case u.MemberExpression:v=f&&(f.context=this.nextId())||this.nextId();t=t||this.nextId();l.recurse(n.object,v,i,function(){l.if_(l.notNull(v),function(){n.computed?(y=l.nextId(),l.recurse(n.property,y),l.getStringValue(y),l.addEnsureSafeMemberName(y),h&&1!==h&&l.if_(l.not(l.computedMember(v,y)),l.lazyAssign(l.computedMember(v,y),"{}")),a=l.ensureSafeObject(l.computedMember(v,y)),l.assign(t,a),f&&(f.computed=!0,f.name=y)):(gi(n.property.name),h&&1!==h&&l.if_(l.not(l.nonComputedMember(v,n.property.name)),l.lazyAssign(l.nonComputedMember(v,n.property.name),"{}")),a=l.nonComputedMember(v,n.property.name),(l.state.expensiveChecks||vu(n.property.name))&&(a=l.ensureSafeObject(a)),l.assign(t,a),f&&(f.computed=!1,f.name=n.property.name))},function(){l.assign(t,"undefined")});s(t)},!!h);break;case u.CallExpression:t=t||this.nextId();n.filter?(y=l.filter(n.callee.name),p=[],r(n.arguments,function(n){var t=l.nextId();l.recurse(n,t);p.push(t)}),a=y+"("+p.join(",")+")",l.assign(t,a),s(t)):(y=l.nextId(),v={},p=[],l.recurse(n.callee,y,v,function(){l.if_(l.notNull(y),function(){l.addEnsureSafeFunction(y);r(n.arguments,function(n){l.recurse(n,l.nextId(),i,function(n){p.push(l.ensureSafeObject(n))})});v.name?(l.state.expensiveChecks||l.addEnsureSafeObject(v.context),a=l.member(v.context,v.name,v.computed)+"("+p.join(",")+")"):a=y+"("+p.join(",")+")";a=l.ensureSafeObject(a);l.assign(t,a)},function(){l.assign(t,"undefined")});s(t)}));break;case u.AssignmentExpression:if(y=this.nextId(),v={},!fs(n.left))throw rt("lval");this.recurse(n.left,i,v,function(){l.if_(l.notNull(v.context),function(){l.recurse(n.right,y);l.addEnsureSafeObject(l.member(v.context,v.name,v.computed));l.addEnsureSafeAssignContext(v.context);a=l.member(v.context,v.name,v.computed)+n.operator+y;l.assign(t,a);s(t||a)})},1);break;case u.ArrayExpression:p=[];r(n.elements,function(n){l.recurse(n,l.nextId(),i,function(n){p.push(n)})});a="["+p.join(",")+"]";this.assign(t,a);s(a);break;case u.ObjectExpression:p=[];r(n.properties,function(n){l.recurse(n.value,l.nextId(),i,function(t){p.push(l.escape(n.key.type===u.Identifier?n.key.name:""+n.key.value)+":"+t)})});a="{"+p.join(",")+"}";this.assign(t,a);s(a);break;case u.ThisExpression:this.assign(t,"s");s("s");break;case u.NGValueParameter:this.assign(t,"v");s("v")}},getHasOwnProperty:function(n,t){var i=n+"."+t,r=this.current().own;return r.hasOwnProperty(i)||(r[i]=this.nextId(!1,n+"&&("+this.escape(t)+" in "+n+")")),r[i]},assign:function(n,t){if(n)return this.current().body.push(n,"=",t,";"),n},filter:function(n){return this.state.filters.hasOwnProperty(n)||(this.state.filters[n]=this.nextId(!0)),this.state.filters[n]},ifDefined:function(n,t){return"ifDefined("+n+","+this.escape(t)+")"},plus:function(n,t){return"plus("+n+","+t+")"},return_:function(n){this.current().body.push("return ",n,";")},if_:function(n,t,i){if(!0===n)t();else{var r=this.current().body;r.push("if(",n,"){");t();r.push("}");i&&(r.push("else{"),i(),r.push("}"))}},not:function(n){return"!("+n+")"},notNull:function(n){return n+"!=null"},nonComputedMember:function(n,t){return n+"."+t},computedMember:function(n,t){return n+"["+t+"]"},member:function(n,t,i){return i?this.computedMember(n,t):this.nonComputedMember(n,t)},addEnsureSafeObject:function(n){this.current().body.push(this.ensureSafeObject(n),";")},addEnsureSafeMemberName:function(n){this.current().body.push(this.ensureSafeMemberName(n),";")},addEnsureSafeFunction:function(n){this.current().body.push(this.ensureSafeFunction(n),";")},addEnsureSafeAssignContext:function(n){this.current().body.push(this.ensureSafeAssignContext(n),";")},ensureSafeObject:function(n){return"ensureSafeObject("+n+",text)"},ensureSafeMemberName:function(n){return"ensureSafeMemberName("+n+",text)"},ensureSafeFunction:function(n){return"ensureSafeFunction("+n+",text)"},getStringValue:function(n){this.assign(n,"getStringValue("+n+",text)")},ensureSafeAssignContext:function(n){return"ensureSafeAssignContext("+n+",text)"},lazyRecurse:function(n,t,i,r,u,f){var e=this;return function(){e.recurse(n,t,i,r,u,f)}},lazyAssign:function(n,t){var i=this;return function(){i.assign(n,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)},escape:function(n){if(l(n))return"'"+n.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(k(n))return n.toString();if(!0===n)return"true";if(!1===n)return"false";if(null===n)return"null";if("undefined"==typeof n)return"undefined";throw rt("esc");},nextId:function(n,t){var i="v"+this.state.nextId++;return n||this.current().vars.push(i+(t?"="+t:"")),i},current:function(){return this.state[this.state.computing]}};hs.prototype={compile:function(n,t){var o=this,u=this.astBuilder.ast(n),i,s,f,e;return this.expression=n,this.expensiveChecks=t,d(u,o.$filter),(i=es(u))&&(s=this.recurse(i)),i=us(u.body),i&&(f=[],r(i,function(n,t){var i=o.recurse(n);n.input=i;f.push(i);n.watchId=t})),e=[],r(u.body,function(n){e.push(o.recurse(n.expression))}),i=0===u.body.length?function(){}:1===u.body.length?e[0]:function(n,t){var i;return r(e,function(r){i=r(n,t)}),i},s&&(i.assign=function(n,t,i){return s(n,i,t)}),f&&(i.inputs=f),i.literal=os(u),i.constant=u.constant,i},recurse:function(n,t,f){var h,e,o=this,s;if(n.input)return this.inputs(n.input,n.watchId);switch(n.type){case u.Literal:return this.value(n.value,t);case u.UnaryExpression:return e=this.recurse(n.argument),this["unary"+n.operator](e,t);case u.BinaryExpression:return h=this.recurse(n.left),e=this.recurse(n.right),this["binary"+n.operator](h,e,t);case u.LogicalExpression:return h=this.recurse(n.left),e=this.recurse(n.right),this["binary"+n.operator](h,e,t);case u.ConditionalExpression:return this["ternary?:"](this.recurse(n.test),this.recurse(n.alternate),this.recurse(n.consequent),t);case u.Identifier:return gi(n.name,o.expression),o.identifier(n.name,o.expensiveChecks||vu(n.name),t,f,o.expression);case u.MemberExpression:return h=this.recurse(n.object,!1,!!f),n.computed||(gi(n.property.name,o.expression),e=n.property.name),n.computed&&(e=this.recurse(n.property)),n.computed?this.computedMember(h,e,t,f,o.expression):this.nonComputedMember(h,e,o.expensiveChecks,t,f,o.expression);case u.CallExpression:return s=[],r(n.arguments,function(n){s.push(o.recurse(n))}),n.filter&&(e=this.$filter(n.callee.name)),n.filter||(e=this.recurse(n.callee,!0)),n.filter?function(n,r,u,f){for(var h=[],o=0;o<s.length;++o)h.push(s[o](n,r,u,f));return n=e.apply(i,h,f),t?{context:i,name:i,value:n}:n}:function(n,i,r,u){var h=e(n,i,r,u),f,c;if(null!=h.value){for(ii(h.context,o.expression),ts(h.value,o.expression),f=[],c=0;c<s.length;++c)f.push(ii(s[c](n,i,r,u),o.expression));f=ii(h.value.apply(h.context,f),o.expression)}return t?{value:f}:f};case u.AssignmentExpression:return h=this.recurse(n.left,!0,1),e=this.recurse(n.right),function(n,i,r,u){var f=h(n,i,r,u);return n=e(n,i,r,u),ii(f.value,o.expression),is(f.context),f.context[f.name]=n,t?{value:n}:n};case u.ArrayExpression:return s=[],r(n.elements,function(n){s.push(o.recurse(n))}),function(n,i,r,u){for(var f=[],e=0;e<s.length;++e)f.push(s[e](n,i,r,u));return t?{value:f}:f};case u.ObjectExpression:return s=[],r(n.properties,function(n){s.push({key:n.key.type===u.Identifier?n.key.name:""+n.key.value,value:o.recurse(n.value)})}),function(n,i,r,u){for(var e={},f=0;f<s.length;++f)e[s[f].key]=s[f].value(n,i,r,u);return t?{value:e}:e};case u.ThisExpression:return function(n){return t?{value:n}:n};case u.NGValueParameter:return function(n,i,r){return t?{value:r}:r}}},"unary+":function(n,t){return function(i,r,u,f){return i=n(i,r,u,f),i=e(i)?+i:0,t?{value:i}:i}},"unary-":function(n,t){return function(i,r,u,f){return i=n(i,r,u,f),i=e(i)?-i:0,t?{value:i}:i}},"unary!":function(n,t){return function(i,r,u,f){return i=!n(i,r,u,f),t?{value:i}:i}},"binary+":function(n,t,i){return function(r,u,f,e){var o=n(r,u,f,e);return r=t(r,u,f,e),o=rs(o,r),i?{value:o}:o}},"binary-":function(n,t,i){return function(r,u,f,o){var s=n(r,u,f,o);return r=t(r,u,f,o),s=(e(s)?s:0)-(e(r)?r:0),i?{value:s}:s}},"binary*":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)*t(r,u,f,e),i?{value:r}:r}},"binary/":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)/t(r,u,f,e),i?{value:r}:r}},"binary%":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)%t(r,u,f,e),i?{value:r}:r}},"binary===":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)===t(r,u,f,e),i?{value:r}:r}},"binary!==":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)!==t(r,u,f,e),i?{value:r}:r}},"binary==":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)==t(r,u,f,e),i?{value:r}:r}},"binary!=":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)!=t(r,u,f,e),i?{value:r}:r}},"binary<":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)<t(r,u,f,e),i?{value:r}:r}},"binary>":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)>t(r,u,f,e),i?{value:r}:r}},"binary<=":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)<=t(r,u,f,e),i?{value:r}:r}},"binary>=":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)>=t(r,u,f,e),i?{value:r}:r}},"binary&&":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)&&t(r,u,f,e),i?{value:r}:r}},"binary||":function(n,t,i){return function(r,u,f,e){return r=n(r,u,f,e)||t(r,u,f,e),i?{value:r}:r}},"ternary?:":function(n,t,i,r){return function(u,f,e,o){return u=n(u,f,e,o)?t(u,f,e,o):i(u,f,e,o),r?{value:u}:u}},value:function(n,t){return function(){return t?{context:i,name:i,value:n}:n}},identifier:function(n,t,r,u,f){return function(e,o){return e=o&&n in o?o:e,u&&1!==u&&e&&!e[n]&&(e[n]={}),o=e?e[n]:i,t&&ii(o,f),r?{context:e,name:n,value:o}:o}},computedMember:function(n,t,i,r,u){return function(f,e,o,s){var c=n(f,e,o,s),h,l;return null!=c&&(h=t(f,e,o,s),h=ns(h),gi(h,u),r&&1!==r&&c&&!c[h]&&(c[h]={}),l=c[h],ii(l,u)),i?{context:c,name:h,value:l}:l}},nonComputedMember:function(n,t,r,u,f,e){return function(o,s,h,c){return o=n(o,s,h,c),f&&1!==f&&o&&!o[t]&&(o[t]={}),s=null!=o?o[t]:i,(r||vu(t))&&ii(s,e),u?{context:o,name:t,value:s}:s}},inputs:function(n,t){return function(i,r,u,f){return f?f[t]:n(i,r,u)}}};rf=function(n,t,i){this.lexer=n;this.$filter=t;this.options=i;this.ast=new u(this.lexer);this.astCompiler=i.csp?new hs(this.ast,t):new ss(this.ast,t)};rf.prototype={constructor:rf,parse:function(n){return this.astCompiler.compile(n,this.options.expensiveChecks)}};it();it();var by=Object.prototype.valueOf,ui=v("$sce"),at={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ft=v("$compile"),nt=t.createElement("a"),dh=ri(n.location.href);vs.$inject=["$document"];ys.$inject=["$provide"];ps.$inject=["$locale"];ws.$inject=["$locale"];var se=".",ky={yyyy:g("FullYear",4),yy:g("FullYear",2,0,!0),y:g("FullYear",1),MMMM:pu("Month"),MMM:pu("Month",!0),MM:g("Month",2,1),M:g("Month",1,1),dd:g("Date",2),d:g("Date",1),HH:g("Hours",2),H:g("Hours",1),hh:g("Hours",2,-12),h:g("Hours",1,-12),mm:g("Minutes",2),m:g("Minutes",1),ss:g("Seconds",2),s:g("Seconds",1),sss:g("Milliseconds",3),EEEE:pu("Day"),EEE:pu("Day",!0),a:function(n,t){return 12>n.getHours()?t.AMPMS[0]:t.AMPMS[1]},Z:function(n,t,i){return n=-1*i,(0<=n?"+":"")+(yu(Math[0<n?"floor":"ceil"](n/60),2)+yu(Math.abs(n%60),2))},ww:ds(2),w:ds(1),G:df,GG:df,GGG:df,GGGG:function(n,t){return 0>=n.getFullYear()?t.ERANAMES[0]:t.ERANAMES[1]}},dy=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,gy=/^\-?\d+$/;gs.$inject=["$locale"];gh=vt(y);nc=vt(bu);nh.$inject=["$parse"];tc=vt({restrict:"E",compile:function(n,t){if(!t.href&&!t.xlinkHref)return function(n,t){if("a"===t[0].nodeName.toLowerCase()){var i="[object SVGAnimatedString]"===ti.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(n){t.attr(i)||n.preventDefault()})}}}});kr={};r(br,function(n,t){function r(n,r,u){n.$watch(u[i],function(n){u.$set(t,!!n)})}if("multiple"!=n){var i=dt("ng-"+t),u=r;"checked"===n&&(u=function(n,t,u){u.ngModel!==u[i]&&r(n,t,u)});kr[i]=function(){return{restrict:"A",priority:100,link:u}}}});r(ee,function(n,t){kr[t]=function(){return{priority:100,link:function(n,i,r){if("ngPattern"===t&&"/"==r.ngPattern.charAt(0)&&(i=r.ngPattern.match(ov))){r.$set("ngPattern",new RegExp(i[1],i[2]));return}n.$watch(r[t],function(n){r.$set(t,n)})}}}});r(["src","srcset","href"],function(n){var t=dt("ng-"+n);kr[t]=function(){return{priority:99,link:function(i,r,u){var e=n,f=n;"href"===n&&"[object SVGAnimatedString]"===ti.call(r.prop("href"))&&(f="xlinkHref",u.$attr[f]="xlink:href",e=null);u.$observe(t,function(t){t?(u.$set(f,t),nr&&e&&r.prop(e,u[f])):"href"===n&&u.$set(f,null)})}}}});dr={$addControl:o,$$renameControl:function(n,t){n.$name=t},$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o,$setSubmitted:o};th.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var ic=function(n){return["$timeout","$parse",function(t,r){function u(n){return""===n?r('this[""]').assign:r(n).assign||o}return{name:"form",restrict:n?"EAC":"E",require:["form","^^?form"],controller:th,compile:function(r,f){r.addClass(ur).addClass(gr);var e=f.name?"name":n&&f.ngForm?"ngForm":!1;return{pre:function(n,r,f,s){var h=s[0],l,c;if(!("action"in f)){l=function(t){n.$apply(function(){h.$commitViewValue();h.$setSubmitted()});t.preventDefault()};r[0].addEventListener("submit",l,!1);r.on("$destroy",function(){t(function(){r[0].removeEventListener("submit",l,!1)},0,!1)})}(s[1]||h.$$parentForm).$addControl(h);c=e?u(h.$name):o;e&&(c(n,h),f.$observe(e,function(t){h.$name!==t&&(c(n,i),h.$$parentForm.$$renameControl(h,t),c=u(h.$name),c(n,h))}));r.on("$destroy",function(){h.$$parentForm.$removeControl(h);c(n,i);p(h,dr)})}}}}}]},np=ic(),tp=ic(!0),ip=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,rp=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,up=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,fp=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,rc=/^(\d{4})-(\d{2})-(\d{2})$/,uc=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,he=/^(\d{4})-W(\d\d)$/,fc=/^(\d{4})-(\d\d)$/,ec=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,oc={text:function(n,t,i,r,u,f){pr(n,t,i,r,u,f);gf(r)},date:wr("date",rc,wu(rc,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":wr("datetimelocal",uc,wu(uc,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:wr("time",ec,wu(ec,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:wr("week",he,function(n,t){var i;if(et(n))return n;if(l(n)&&(he.lastIndex=0,i=he.exec(n),i)){var r=+i[1],u=+i[2],f=i=0,e=0,o=0,s=ks(r),u=7*(u-1);return t&&(i=t.getHours(),f=t.getMinutes(),e=t.getSeconds(),o=t.getMilliseconds()),new Date(r,0,s.getDate()+u,i,f,e,o)}return NaN},"yyyy-Www"),month:wr("month",fc,wu(fc,["yyyy","MM"]),"yyyy-MM"),number:function(n,t,r,u,o,s){var h,c;ih(n,t,r,u);pr(n,t,r,u,o,s);u.$$parserName="number";u.$parsers.push(function(n){return u.$isEmpty(n)?null:fp.test(n)?parseFloat(n):i});u.$formatters.push(function(n){if(!u.$isEmpty(n)){if(!k(n))throw nu("numfmt",n);n=n.toString()}return n});(e(r.min)||r.ngMin)&&(u.$validators.min=function(n){return u.$isEmpty(n)||f(h)||n>=h},r.$observe("min",function(n){e(n)&&!k(n)&&(n=parseFloat(n,10));h=k(n)&&!isNaN(n)?n:i;u.$validate()}));(e(r.max)||r.ngMax)&&(u.$validators.max=function(n){return u.$isEmpty(n)||f(c)||n<=c},r.$observe("max",function(n){e(n)&&!k(n)&&(n=parseFloat(n,10));c=k(n)&&!isNaN(n)?n:i;u.$validate()}))},url:function(n,t,i,r,u,f){pr(n,t,i,r,u,f);gf(r);r.$$parserName="url";r.$validators.url=function(n,t){var i=n||t;return r.$isEmpty(i)||rp.test(i)}},email:function(n,t,i,r,u,f){pr(n,t,i,r,u,f);gf(r);r.$$parserName="email";r.$validators.email=function(n,t){var i=n||t;return r.$isEmpty(i)||up.test(i)}},radio:function(n,t,i,r){f(i.name)&&t.attr("name",++ku);t.on("click",function(n){t[0].checked&&r.$setViewValue(i.value,n&&n.type)});r.$render=function(){t[0].checked=i.value==r.$viewValue};i.$observe("value",r.$render)},checkbox:function(n,t,i,r,u,f,e,o){var s=rh(o,n,"ngTrueValue",i.ngTrueValue,!0),h=rh(o,n,"ngFalseValue",i.ngFalseValue,!1);t.on("click",function(n){r.$setViewValue(t[0].checked,n&&n.type)});r.$render=function(){t[0].checked=r.$viewValue};r.$isEmpty=function(n){return!1===n};r.$formatters.push(function(n){return ot(n,s)});r.$parsers.push(function(n){return n?s:h})},hidden:o,button:o,submit:o,reset:o,file:o},sc=["$browser","$sniffer","$filter","$parse",function(n,t,i,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(u,f,e,o){o[0]&&(oc[y(e.type)]||oc.text)(u,f,e,o[0],t,n,i,r)}}}}],ep=/^(true|false|\d+)$/,op=function(){return{restrict:"A",priority:100,compile:function(n,t){return ep.test(t.ngValue)?function(n,t,i){i.$set("value",n.$eval(i.ngValue))}:function(n,t,i){n.$watch(i.ngValue,function(n){i.$set("value",n)})}}}},sp=["$compile",function(n){return{restrict:"AC",compile:function(t){return n.$$addBindingClass(t),function(t,i,r){n.$$addBindingInfo(i,r.ngBind);i=i[0];t.$watch(r.ngBind,function(n){i.textContent=f(n)?"":n})}}}}],hp=["$interpolate","$compile",function(n,t){return{compile:function(i){return t.$$addBindingClass(i),function(i,r,u){i=n(r.attr(u.$attr.ngBindTemplate));t.$$addBindingInfo(r,i.expressions);r=r[0];u.$observe("ngBindTemplate",function(n){r.textContent=f(n)?"":n})}}}}],cp=["$sce","$parse","$compile",function(n,t,i){return{restrict:"A",compile:function(r,u){var f=t(u.ngBindHtml),e=t(u.ngBindHtml,function(n){return(n||"").toString()});return i.$$addBindingClass(r),function(t,r,u){i.$$addBindingInfo(r,u.ngBindHtml);t.$watch(e,function(){r.html(n.getTrustedHtml(f(t))||"")})}}}}],lp=vt({restrict:"A",require:"ngModel",link:function(n,t,i,r){r.$viewChangeListeners.push(function(){n.$eval(i.ngChange)})}}),ap=ne("",!0),vp=ne("Odd",0),yp=ne("Even",1),pp=ci({compile:function(n,t){t.$set("ngCloak",i);n.removeClass("ng-cloak")}}),wp=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],hc={},bp={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(n){var t=dt("ng-"+n);hc[t]=["$parse","$rootScope",function(i,r){return{restrict:"A",compile:function(u,f){var e=i(f[t],null,!0);return function(t,i){i.on(n,function(i){var u=function(){e(t,{$event:i})};bp[n]&&r.$$phase?t.$evalAsync(u):t.$apply(u)})}}}}]});var kp=["$animate",function(n){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(i,r,u,f,e){var h,s,o;i.$watch(u.ngIf,function(i){i?s||e(function(i,f){s=f;i[i.length++]=t.createComment(" end ngIf: "+u.ngIf+" ");h={clone:i};n.enter(i,r.parent(),r)}):(o&&(o.remove(),o=null),s&&(s.$destroy(),s=null),h&&(o=ru(h.clone),n.leave(o).then(function(){o=null}),h=null))})}}}],dp=["$templateRequest","$anchorScroll","$animate",function(n,t,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ut.noop,compile:function(r,u){var o=u.ngInclude||u.src,s=u.onload||"",f=u.autoscroll;return function(r,u,h,c,l){var p=0,a,v,y,w=function(){v&&(v.remove(),v=null);a&&(a.$destroy(),a=null);y&&(i.leave(y).then(function(){v=null}),v=y,y=null)};r.$watch(o,function(o){var v=function(){e(f)&&(!f||r.$eval(f))&&t()},h=++p;o?(n(o,!0).then(function(n){if(h===p){var t=r.$new();c.template=n;n=l(t,function(n){w();i.enter(n,null,u).then(v)});a=t;y=n;a.$emit("$includeContentLoaded",o);r.$eval(s)}},function(){h===p&&(w(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(w(),c.template=null)})}}}}],gp=["$compile",function(n){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(i,r,u,f){/SVG/.test(r[0].toString())?(r.empty(),n(uo(f.template,t).childNodes)(i,function(n){r.append(n)},{futureParentElement:r})):(r.html(f.template),n(r.contents())(i))}}}],nw=ci({priority:450,compile:function(){return{pre:function(n,t,i){n.$eval(i.ngInit)}}}}),tw=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(n,t,u,e){var o=t.attr(u.$attr.ngList)||", ",s="false"!==u.ngTrim,h=s?w(o):o;e.$parsers.push(function(n){if(!f(n)){var t=[];return n&&r(n.split(h),function(n){n&&t.push(s?w(n):n)}),t}});e.$formatters.push(function(n){return a(n)?n.join(o):i});e.$isEmpty=function(n){return!n||!n.length}}}},gr="ng-valid",cc="ng-invalid",ur="ng-pristine",uf="ng-dirty",lc="ng-pending",nu=v("ngModel"),iw=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(n,t,u,s,c,l,a,v,y,p){var g;this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=i;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=i;this.$name=p(u.name||"",!1)(n);this.$$parentForm=dr;var d=c(u.ngModel),it=d.assign,tt=d,rt=it,nt=null,b,w=this;this.$$setOptions=function(n){if((w.$options=n)&&n.getterSetter){var t=c(u.ngModel+"()"),i=c(u.ngModel+"($$$p)");tt=function(n){var i=d(n);return h(i)&&(i=t(n)),i};rt=function(n){h(d(n))?i(n,{$$$p:w.$modelValue}):it(n,w.$modelValue)}}else if(!d.assign)throw nu("nonassign",u.ngModel,kt(s));};this.$render=o;this.$isEmpty=function(n){return f(n)||""===n||null===n||n!==n};g=0;uh({ctrl:this,$element:s,set:function(n,t){n[t]=!0},unset:function(n,t){delete n[t]},$animate:l});this.$setPristine=function(){w.$dirty=!1;w.$pristine=!0;l.removeClass(s,uf);l.addClass(s,ur)};this.$setDirty=function(){w.$dirty=!0;w.$pristine=!1;l.removeClass(s,ur);l.addClass(s,uf);w.$$parentForm.$setDirty()};this.$setUntouched=function(){w.$touched=!1;w.$untouched=!0;l.setClass(s,"ng-untouched","ng-touched")};this.$setTouched=function(){w.$touched=!0;w.$untouched=!1;l.setClass(s,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){a.cancel(nt);w.$viewValue=w.$$lastCommittedViewValue;w.$render()};this.$validate=function(){if(!k(w.$modelValue)||!isNaN(w.$modelValue)){var n=w.$$rawModelValue,t=w.$valid,r=w.$modelValue,u=w.$options&&w.$options.allowInvalid;w.$$runValidators(n,w.$$lastCommittedViewValue,function(f){u||t===f||(w.$modelValue=f?n:i,w.$modelValue!==r&&w.$$writeModelToScope())})}};this.$$runValidators=function(n,t,u){function l(){var i=!0;return r(w.$validators,function(r,u){var f=r(n,t);i=i&&f;e(u,f)}),i?!0:(r(w.$asyncValidators,function(n,t){e(t,null)}),!1)}function a(){var u=[],f=!0;r(w.$asyncValidators,function(r,o){var s=r(n,t);if(!s||!h(s.then))throw nu("$asyncValidators",s);e(o,i);u.push(s.then(function(){e(o,!0)},function(){f=!1;e(o,!1)}))});u.length?y.all(u).then(function(){s(f)},o):s(!0)}function e(n,t){c===g&&w.$setValidity(n,t)}function s(n){c===g&&u(n)}g++;var c=g;(function(){var n=w.$$parserName||"parse";if(f(b))e(n,null);else return b||(r(w.$validators,function(n,t){e(t,null)}),r(w.$asyncValidators,function(n,t){e(t,null)})),e(n,b),b;return!0})()?l()?a():s(!1):s(!1)};this.$commitViewValue=function(){var n=w.$viewValue;a.cancel(nt);(w.$$lastCommittedViewValue!==n||""===n&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=n,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())};this.$$parseAndValidate=function(){var t=w.$$lastCommittedViewValue,r,u,e;if(b=f(t)?i:!0)for(r=0;r<w.$parsers.length;r++)if(t=w.$parsers[r](t),f(t)){b=!1;break}k(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=tt(n));u=w.$modelValue;e=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=t;e&&(w.$modelValue=t,w.$modelValue!==u&&w.$$writeModelToScope());w.$$runValidators(t,w.$$lastCommittedViewValue,function(n){e||(w.$modelValue=n?t:i,w.$modelValue!==u&&w.$$writeModelToScope())})};this.$$writeModelToScope=function(){rt(n,w.$modelValue);r(w.$viewChangeListeners,function(n){try{n()}catch(i){t(i)}})};this.$setViewValue=function(n,t){w.$viewValue=n;w.$options&&!w.$options.updateOnDefault||w.$$debounceViewValueCommit(t)};this.$$debounceViewValueCommit=function(t){var r=0,i=w.$options;i&&e(i.debounce)&&(i=i.debounce,k(i)?r=i:k(i[t])?r=i[t]:k(i["default"])&&(r=i["default"]));a.cancel(nt);r?nt=a(function(){w.$commitViewValue()},r):v.$$phase?w.$commitViewValue():n.$apply(function(){w.$commitViewValue()})};n.$watch(function(){var t=tt(n);if(t!==w.$modelValue&&(w.$modelValue===w.$modelValue||t===t)){w.$modelValue=w.$$rawModelValue=t;b=i;for(var u=w.$formatters,f=u.length,r=t;f--;)r=u[f](r);w.$viewValue!==r&&(w.$viewValue=w.$$lastCommittedViewValue=r,w.$render(),w.$$runValidators(t,r,o))}return t})}],rw=["$rootScope",function(n){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:iw,priority:1,compile:function(t){return t.addClass(ur).addClass("ng-untouched").addClass(gr),{pre:function(n,t,i,r){var u=r[0];t=r[1]||u.$$parentForm;u.$$setOptions(r[2]&&r[2].$options);t.$addControl(u);i.$observe("name",function(n){u.$name!==n&&u.$$parentForm.$$renameControl(u,n)});n.$on("$destroy",function(){u.$$parentForm.$removeControl(u)})},post:function(t,i,r,u){var f=u[0];if(f.$options&&f.$options.updateOn)i.on(f.$options.updateOn,function(n){f.$$debounceViewValueCommit(n&&n.type)});i.on("blur",function(){f.$touched||(n.$$phase?t.$evalAsync(f.$setTouched):t.$apply(f.$setTouched))})}}}}}],uw=/(\s+|^)default(\s+|$)/,fw=function(){return{restrict:"A",controller:["$scope","$attrs",function(n,t){var i=this;this.$options=st(n.$eval(t.ngModelOptions));e(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=w(this.$options.updateOn.replace(uw,function(){return i.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ew=ci({terminal:!0,priority:1e3}),ow=v("ngOptions"),sw=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,hw=["$compile","$parse",function(n,i){function f(n,t,r){function w(n,t,i,r,u){this.selectValue=n;this.viewValue=t;this.label=i;this.group=r;this.disabled=u}function l(n){var t,i;if(!s&&fi(n))t=n;else{t=[];for(i in n)n.hasOwnProperty(i)&&"$"!==i.charAt(0)&&t.push(i)}return t}var u=n.match(sw),o,s,f;if(!u)throw ow("iexp",n,kt(t));o=u[5]||u[7];s=u[6];n=/ as /.test(u[0])&&u[1];f=u[9];t=i(u[2]?u[1]:o);var b=n&&i(n)||t,k=f&&i(f),h=f?function(n,t){return k(r,t)}:function(n){return ei(n)},a=function(n,t){return h(n,c(n,t))},v=i(u[2]||u[1]),d=i(u[3]||""),y=i(u[4]||""),p=i(u[8]),e={},c=s?function(n,t){return e[s]=t,e[o]=n,e}:function(n){return e[o]=n,e};return{trackBy:f,getTrackByValue:a,getWatchables:i(p,function(n){var f=[];n=n||[];for(var o=l(n),s=o.length,e=0;e<s;e++){var t=n===o?e:o[e],i=c(n[t],t),t=h(n[t],i);f.push(t);(u[2]||u[1])&&(t=v(r,i),f.push(t));u[4]&&(i=y(r,i),f.push(i))}return f}),getOptions:function(){for(var k=[],e={},o=p(r)||[],s=l(o),g=s.length,t=0;t<g;t++){var i=o===s?t:s[t],n=c(o[i],i),u=b(r,n),i=h(u,n),nt=v(r,n),tt=d(r,n),n=y(r,n),u=new w(i,u,nt,tt,n);k.push(u);e[i]=u}return{items:k,selectValueMap:e,getOptionFromViewValue:function(n){return e[a(n)]},getViewValueFromOption:function(n){return f?ut.copy(n.viewValue):n.viewValue}}}}}var u=t.createElement("option"),e=t.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(t,i,o,h){function tt(n,t){n.element=t;t.disabled=n.disabled;n.label!==t.label&&(t.label=n.label,t.textContent=n.label);n.value!==t.value&&(t.value=n.selectValue)}function g(n,t,i,r){return t&&y(t.nodeName)===i?i=t:(i=r.cloneNode(!1),t?n.insertBefore(i,t):n.appendChild(i)),i}function it(n){for(var t;n;)t=n.nextSibling,lf(n),n=t}function ut(n){var t=c&&c[0],i=v&&v[0];if(t||i)for(;n&&(n===t||n===i||t&&8===t.nodeType);)n=n.nextSibling;return n}function rt(){var f=p&&k.readValue(),t,n,r;p=b.getOptions();t={};n=i[0].firstChild;w&&i.prepend(c);n=ut(n);p.items.forEach(function(r){var f,o;r.group?(f=t[r.group],f||(f=g(i[0],n,"optgroup",e),n=f.nextSibling,f.label=r.group,f=t[r.group]={groupElement:f,currentOptionElement:f.firstChild}),o=g(f.groupElement,f.currentOptionElement,"option",u),tt(r,o),f.currentOptionElement=o.nextSibling):(o=g(i[0],n,"option",u),tt(r,o),n=o.nextSibling)});Object.keys(t).forEach(function(n){it(t[n].currentOptionElement)});it(n);l.$render();l.$isEmpty(f)||(r=k.readValue(),(b.trackBy?ot(f,r):f===r)||(l.$setViewValue(r),l.$render()))}var l=h[1],k,w,v,p,b;if(l){k=h[0];h=o.multiple;for(var c,d=0,nt=i.children(),ft=nt.length;d<ft;d++)if(""===nt[d].value){c=nt.eq(d);break}w=!!c;v=s(u.cloneNode(!1));v.val("?");b=f(o.ngOptions,i,t);h?(l.$isEmpty=function(n){return!n||0===n.length},k.writeValue=function(n){p.items.forEach(function(n){n.element.selected=!1});n&&n.forEach(function(n){(n=p.getOptionFromViewValue(n))&&!n.disabled&&(n.element.selected=!0)})},k.readValue=function(){var t=i.val()||[],n=[];return r(t,function(t){(t=p.selectValueMap[t])&&!t.disabled&&n.push(p.getViewValueFromOption(t))}),n},b.trackBy&&t.$watchCollection(function(){if(a(l.$viewValue))return l.$viewValue.map(function(n){return b.getTrackByValue(n)})},function(){l.$render()})):(k.writeValue=function(n){var t=p.getOptionFromViewValue(n);t&&!t.disabled?i[0].value!==t.selectValue&&(v.remove(),w||c.remove(),i[0].value=t.selectValue,t.element.selected=!0,t.element.setAttribute("selected","selected")):null===n||w?(v.remove(),w||i.prepend(c),i.val(""),c.prop("selected",!0),c.attr("selected",!0)):(w||c.remove(),i.prepend(v),i.val("?"),v.prop("selected",!0),v.attr("selected",!0))},k.readValue=function(){var n=p.selectValueMap[i.val()];return n&&!n.disabled?(w||c.remove(),v.remove(),p.getViewValueFromOption(n)):null},b.trackBy&&t.$watch(function(){return b.getTrackByValue(l.$viewValue)},function(){l.$render()}));w?(c.remove(),n(c)(t),c.removeClass("ng-scope")):c=s(u.cloneNode(!1));rt();t.$watchCollection(b.getWatchables,rt)}}}}],cw=["$locale","$interpolate","$log",function(n,t,i){var u=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(s,h,c){function p(n){h.text(n||"")}var w=c.count,b=c.$attr.when&&h.attr(c.$attr.when),d=c.offset||0,a=s.$eval(b)||{},g={},nt=t.startSymbol(),tt=t.endSymbol(),it=nt+w+"-"+d+tt,v=ut.noop,l;r(c,function(n,t){var i=e.exec(t);i&&(i=(i[1]?"-":"")+y(i[2]),a[i]=h.attr(c.$attr[t]))});r(a,function(n,i){g[i]=t(n.replace(u,it))});s.$watch(w,function(t){var r=parseFloat(t),u=isNaN(r);u||r in a||(r=n.pluralCat(r-d));r===l||u&&k(l)&&isNaN(l)||(v(),u=g[r],f(u)?(null!=t&&i.debug("ngPluralize: no rule defined for '"+r+"' in "+b),v=o,p()):v=s.$watch(u,p),l=r)})}}}],lw=["$parse","$animate",function(n,u){var f=v("ngRepeat"),e=function(n,t,i,r,u,f,e){n[i]=r;u&&(n[u]=f);n.$index=t;n.$first=0===t;n.$last=t===e-1;n.$middle=!(n.$first||n.$last);n.$odd=!(n.$even=0==(t&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(o,h){var y=h.ngRepeat,tt=t.createComment(" end ngRepeat: "+y+" "),c=y.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),p,a,w,b,g,nt,v;if(!c)throw f("iexp",y);var k=c[1],rt=c[2],l=c[3],d=c[4],c=k.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!c)throw f("iidexp",k);if(p=c[3]||c[1],a=c[2],l&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(l)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(l)))throw f("badident",l);return v={$id:ei},d?w=n(d):(g=function(n,t){return ei(t)},nt=function(n){return n}),function(n,t,o,h,c){w&&(b=function(t,i,r){return a&&(v[a]=t),v[p]=i,v.$index=r,w(n,v)});var k=it();n.$watchCollection(rt,function(o){var h,st,ht=t[0],rt,ct=it(),et,ft,ot,w,ut,v,d;if(l&&(n[l]=o),fi(o))ut=o,st=b||g;else for(d in st=b||nt,ut=[],o)gt.call(o,d)&&"$"!==d.charAt(0)&&ut.push(d);for(et=ut.length,d=Array(et),h=0;h<et;h++)if(ft=o===ut?h:ut[h],ot=o[ft],w=st(ft,ot,h),k[w])v=k[w],delete k[w],ct[w]=v,d[h]=v;else{if(ct[w])throw r(d,function(n){n&&n.scope&&(k[n.id]=n)}),f("dupes",y,w,ot);d[h]={id:w,scope:i,clone:i};ct[w]=!0}for(rt in k){if(v=k[rt],w=ru(v.clone),u.leave(w),w[0].parentNode)for(h=0,st=w.length;h<st;h++)w[h].$$NG_REMOVED=!0;v.scope.$destroy()}for(h=0;h<et;h++)if(ft=o===ut?h:ut[h],ot=o[ft],v=d[h],v.scope){rt=ht;do rt=rt.nextSibling;while(rt&&rt.$$NG_REMOVED);v.clone[0]!=rt&&u.move(ru(v.clone),null,s(ht));ht=v.clone[v.clone.length-1];e(v.scope,h,p,ot,a,ft,et)}else c(function(n,t){v.scope=t;var i=tt.cloneNode(!1);n[n.length++]=i;u.enter(n,null,s(ht));ht=i;v.clone=n;ct[v.id]=v;e(v.scope,h,p,ot,a,ft,et)});k=ct})}}}}],aw=["$animate",function(n){return{restrict:"A",multiElement:!0,link:function(t,i,r){t.$watch(r.ngShow,function(t){n[t?"removeClass":"addClass"](i,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],vw=["$animate",function(n){return{restrict:"A",multiElement:!0,link:function(t,i,r){t.$watch(r.ngHide,function(t){n[t?"addClass":"removeClass"](i,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],yw=ci(function(n,t,i){n.$watch(i.ngStyle,function(n,i){i&&n!==i&&r(i,function(n,i){t.css(i,"")});n&&t.css(n)},!0)}),pw=["$animate",function(n){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(i,u,f,e){var c=[],h=[],o=[],s=[],l=function(n,t){return function(){n.splice(t,1)}};i.$watch(f.ngSwitch||f.on,function(i){for(var a,u=0,f=o.length;u<f;++u)n.cancel(o[u]);for(u=o.length=0,f=s.length;u<f;++u)a=ru(h[u].clone),s[u].$destroy(),(o[u]=n.leave(a)).then(l(o,u));h.length=0;s.length=0;(c=e.cases["!"+i]||e.cases["?"])&&r(c,function(i){i.transclude(function(r,u){s.push(u);var f=i.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");h.push({clone:r});n.enter(r,f.parent(),f)})})})}}}],ww=ci({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(n,t,i,r,u){r.cases["!"+i.ngSwitchWhen]=r.cases["!"+i.ngSwitchWhen]||[];r.cases["!"+i.ngSwitchWhen].push({transclude:u,element:t})}}),bw=ci({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(n,t,i,r,u){r.cases["?"]=r.cases["?"]||[];r.cases["?"].push({transclude:u,element:t})}}),kw=ci({restrict:"EAC",link:function(n,t,i,r,u){if(!u)throw v("ngTransclude")("orphan",kt(t));u(function(n){t.empty();t.append(n)})}}),dw=["$templateCache",function(n){return{restrict:"E",terminal:!0,compile:function(t,i){"text/ng-template"==i.type&&n.put(i.id,t[0].text)}}}],gw={$setViewValue:o,$render:o},nb=["$element","$scope","$attrs",function(n,r){var u=this,f=new di;u.ngModelCtrl=gw;u.unknownOption=s(t.createElement("option"));u.renderUnknownOption=function(t){t="? "+ei(t)+" ?";u.unknownOption.val(t);n.prepend(u.unknownOption);n.val(t)};r.$on("$destroy",function(){u.renderUnknownOption=o});u.removeUnknownOption=function(){u.unknownOption.parent()&&u.unknownOption.remove()};u.readValue=function(){return u.removeUnknownOption(),n.val()};u.writeValue=function(t){u.hasOption(t)?(u.removeUnknownOption(),n.val(t),""===t&&u.emptyOption.prop("selected",!0)):null==t&&u.emptyOption?(u.removeUnknownOption(),n.val("")):u.renderUnknownOption(t)};u.addOption=function(n,t){ki(n,'"option value"');""===n&&(u.emptyOption=t);var i=f.get(n)||0;f.put(n,i+1)};u.removeOption=function(n){var t=f.get(n);t&&(1===t?(f.remove(n),""===n&&(u.emptyOption=i)):f.put(n,t-1))};u.hasOption=function(n){return!!f.get(n)}}],tb=function(){return{restrict:"E",require:["select","?ngModel"],controller:nb,link:function(n,t,i,u){var f=u[1],o,h,s;if(f){o=u[0];o.ngModelCtrl=f;f.$render=function(){o.writeValue(f.$viewValue)};t.on("change",function(){n.$apply(function(){f.$setViewValue(o.readValue())})});i.multiple&&(o.readValue=function(){var n=[];return r(t.find("option"),function(t){t.selected&&n.push(t.value)}),n},o.writeValue=function(n){var i=new di(n);r(t.find("option"),function(n){n.selected=e(i.get(n.value))})},s=NaN,n.$watch(function(){s!==f.$viewValue||ot(h,f.$viewValue)||(h=ht(f.$viewValue),f.$render());s=f.$viewValue}),f.$isEmpty=function(n){return!n||0===n.length})}}}},ib=["$interpolate",function(n){return{restrict:"E",priority:100,compile:function(t,i){var u,r;return e(i.value)?u=n(i.value,!0):(r=n(t.text(),!0),r||i.$set("value",t.text())),function(n,t,i){function o(n){f.addOption(n,t);f.ngModelCtrl.$render();t[0].hasAttribute("selected")&&(t[0].selected=!0)}var h=t.parent(),f=h.data("$selectController")||h.parent().data("$selectController"),s;if(f&&f.ngModelCtrl){u?i.$observe("value",function(n){e(s)&&f.removeOption(s);s=n;o(n)}):r?n.$watch(r,function(n,t){i.$set("value",n);t!==n&&f.removeOption(t);o(n)}):o(i.value);t.on("$destroy",function(){f.removeOption(i.value);f.ngModelCtrl.$render()})}}}}}],rb=vt({restrict:"E",terminal:!1}),ac=function(){return{restrict:"A",require:"?ngModel",link:function(n,t,i,r){r&&(i.required=!0,r.$validators.required=function(n,t){return!i.required||!r.$isEmpty(t)},i.$observe("required",function(){r.$validate()}))}}},vc=function(){return{restrict:"A",require:"?ngModel",link:function(n,t,r,u){if(u){var e,o=r.ngPattern||r.pattern;r.$observe("pattern",function(n){if(l(n)&&0<n.length&&(n=new RegExp("^"+n+"$")),n&&!n.test)throw v("ngPattern")("noregexp",o,n,kt(t));e=n||i;u.$validate()});u.$validators.pattern=function(n,t){return u.$isEmpty(t)||f(e)||e.test(t)}}}}},yc=function(){return{restrict:"A",require:"?ngModel",link:function(n,t,i,r){if(r){var u=-1;i.$observe("maxlength",function(n){n=tt(n);u=isNaN(n)?-1:n;r.$validate()});r.$validators.maxlength=function(n,t){return 0>u||r.$isEmpty(t)||t.length<=u}}}}},pc=function(){return{restrict:"A",require:"?ngModel",link:function(n,t,i,r){if(r){var u=0;i.$observe("minlength",function(n){u=tt(n)||0;r.$validate()});r.$validators.minlength=function(n,t){return r.$isEmpty(t)||t.length>=u}}}}};n.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(rl(),fl(ut),ut.module("ngLocale",[],["$provide",function(n){function t(n){n+="";var t=n.indexOf(".");return-1==t?0:n.length-t-1}n.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",pluralCat:function(n,r){var f=n|0,u=r;return i===u&&(u=Math.min(t(n),3)),Math.pow(10,u),1==f&&0==u?"one":"other"}})}]),s(t).ready(function(){nl(t,no)}))})(window,document);window.angular.$$csp().noInlineStyle||window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}<\/style>');
(function(n,t,i){"use strict";function r(n,i,r,u,f,e){function h(n,i){return angular.element((i||t).querySelectorAll(n))}function s(n){return o[n]?o[n]:o[n]=i.get(n,{cache:e}).then(function(n){return n.data})}this.compile=function(t){t.template&&/\.html$/.test(t.template)&&(console.warn("Deprecated use of `template` option to pass a file. Please use the `templateUrl` option instead."),t.templateUrl=t.template,t.template="");var e=t.templateUrl,o=t.template||"",c=t.controller,l=t.controllerAs,i=angular.copy(t.resolve||{}),a=angular.copy(t.locals||{}),v=t.transformTemplate||angular.identity,y=t.bindToController;if(angular.forEach(i,function(n,t){i[t]=angular.isString(n)?r.get(n):r.invoke(n)}),angular.extend(i,a),o)i.$template=n.when(o);else if(e)i.$template=s(e);else throw new Error("Missing `template` / `templateUrl` option.");return t.contentTemplate&&(i.$template=n.all([i.$template,s(t.contentTemplate)]).then(function(n){var i=angular.element(n[0]),r=h('[ng-bind="content"]',i[0]).removeAttr("ng-bind").html(n[1]);return t.templateUrl||r.next().remove(),i[0].outerHTML})),n.all(i).then(function(n){var r=v(n.$template),i,e;return t.html&&(r=r.replace(/ng-bind="/gi,'ng-bind-html="')),i=angular.element("<div>").html(r.trim()).contents(),e=u(i),{locals:n,element:i,link:function(t){var r,u;return n.$scope=t,c&&(r=f(c,n,!0),y&&angular.extend(r.instance,n),u=angular.isObject(r)?r:r(),i.data("$ngControllerController",u),i.children().data("$ngControllerController",u),l&&(t[l]=u)),e.apply(null,arguments)}}})};var o={}}angular.module("mgcrea.ngStrap.typeahead",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$typeahead",function(){var n=this.defaults={animation:"am-fade",prefixClass:"typeahead",prefixEvent:"$typeahead",placement:"bottom-left",templateUrl:"typeahead/typeahead.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,minLength:1,filter:"bsAsyncFilter",limit:6,autoSelect:!1,comparator:"",trimValue:!0};this.$get=["$window","$rootScope","$tooltip","$$rAF","$timeout",function(t,i,r,u,f){function e(t,i,e){var h={},c=angular.extend({},n,e),l,s,a,v;return h=r(t,c),l=e.scope,s=h.$scope,s.$resetMatches=function(){s.$matches=[];s.$activeIndex=c.autoSelect?0:-1},s.$resetMatches(),s.$activate=function(n){s.$$postDigest(function(){h.activate(n)})},s.$select=function(n){s.$$postDigest(function(){h.select(n)})},s.$isVisible=function(){return h.$isVisible()},h.update=function(n){s.$matches=n;s.$activeIndex>=n.length&&(s.$activeIndex=c.autoSelect?0:-1);o(s);u(h.$applyPlacement)},h.activate=function(n){s.$activeIndex=n},h.select=function(n){if(n!==-1){var t=s.$matches[n].value;i.$setViewValue(t);i.$render();s.$resetMatches();l&&l.$digest();s.$emit(c.prefixEvent+".select",t,n,h)}},h.$isVisible=function(){return!c.minLength||!i?!!s.$matches.length:s.$matches.length&&angular.isString(i.$viewValue)&&i.$viewValue.length>=c.minLength},h.$getIndex=function(n){var i=s.$matches.length,t=i;if(i){for(t=i;t--;)if(s.$matches[t].value===n)break;if(!(t<0))return t}},h.$onMouseDown=function(n){n.preventDefault();n.stopPropagation()},h.$onKeyDown=function(n){/(38|40|13)/.test(n.keyCode)&&(!h.$isVisible()||n.keyCode===13&&s.$activeIndex===-1||(n.preventDefault(),n.stopPropagation()),n.keyCode===13&&s.$matches.length?h.select(s.$activeIndex):n.keyCode===38&&s.$activeIndex>0?s.$activeIndex--:n.keyCode===40&&s.$activeIndex<s.$matches.length-1?s.$activeIndex++:angular.isUndefined(s.$activeIndex)&&(s.$activeIndex=0),s.$digest())},a=h.show,h.show=function(){a();f(function(){h.$element&&h.$element.on("mousedown",h.$onMouseDown);c.keyboard&&t&&t.on("keydown",h.$onKeyDown)},0,!1)},v=h.hide,h.hide=function(){h.$element&&h.$element.off("mousedown",h.$onMouseDown);c.keyboard&&t&&t.off("keydown",h.$onKeyDown);c.autoSelect||h.activate(-1);v()},h}function o(n){n.$$phase||n.$root&&n.$root.$$phase||n.$digest()}var s=angular.element(t.document.body);return e.defaults=n,e}]}).filter("bsAsyncFilter",["$filter",function(n){return function(t,i,r){return t&&angular.isFunction(t.then)?t.then(function(t){return n("filter")(t,i,r)}):n("filter")(t,i,r)}}]).directive("bsTypeahead",["$window","$parse","$q","$typeahead","$parseOptions",function(n,t,i,r,u){var f=r.defaults;return{restrict:"EAC",require:"ngModel",link:function(n,t,i,e){var o={scope:n},a,h,s,p;angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","filter","limit","minLength","watchOptions","selectMode","autoSelect","comparator","id","prefixEvent","prefixClass"],function(n){angular.isDefined(i[n])&&(o[n]=i[n])});a=/^(false|0|)$/i;angular.forEach(["html","container","trimValue"],function(n){angular.isDefined(i[n])&&a.test(i[n])&&(o[n]=!1)});t.attr("autocomplete")||t.attr("autocomplete","off");var v=o.filter||f.filter,c=o.limit||f.limit,y=o.comparator||f.comparator,l=i.bsOptions;v&&(l+=" | "+v+":$viewValue");y&&(l+=":"+y);c&&(l+=" | limitTo:"+c);h=u(l);s=r(t,e,o);o.watchOptions&&(p=h.$match[7].replace(/\|.+/,"").replace(/\(.*\)/g,"").trim(),n.$watchCollection(p,function(){h.valuesFn(n,e).then(function(n){s.update(n);e.$render()})}));n.$watch(i.ngModel,function(t){n.$modelValue=t;h.valuesFn(n,e).then(function(n){if(o.selectMode&&!n.length&&t.length>0){e.$setViewValue(e.$viewValue.substring(0,e.$viewValue.length-1));return}n.length>c&&(n=n.slice(0,c));s.update(n);e.$render()})});e.$formatters.push(function(n){var t=h.displayValue(n);return t?t:n&&typeof n!="object"?n:""});e.$render=function(){var i,n,r;if(e.$isEmpty(e.$viewValue))return t.val("");i=s.$getIndex(e.$modelValue);n=angular.isDefined(i)?s.$scope.$matches[i].label:e.$viewValue;n=angular.isObject(n)?h.displayValue(n):n;r=n?n.toString().replace(/<(?:.|\n)*?>/gm,""):"";t.val(o.trimValue===!1?r:r.trim())};n.$on("$destroy",function(){s&&s.destroy();o=null;s=null})}}}]);angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.core","mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var n=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",templateUrl:"tooltip/tooltip.tpl.html",template:"",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0,viewport:{selector:"body",padding:0}};this.$get=["$window","$rootScope","$bsCompiler","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function(i,r,u,f,e,o,s,h,c,l,a){function k(f,e){function ht(){d.$emit(p.prefixEvent+".show",o)}function at(){if(d.$emit(p.prefixEvent+".hide",o),k===lt){if(ct&&p.trigger==="focus")return f[0].blur();et()}}function bt(){var n=p.trigger.split(" ");angular.forEach(n,function(n){if(n==="click")f.on("click",o.toggle);else if(n!=="manual"){f.on(n==="hover"?"mouseenter":"focus",o.enter);f.on(n==="hover"?"mouseleave":"blur",o.leave);ot==="button"&&n!=="hover"&&f.on(w?"touchstart":"mousedown",o.$onFocusElementMouseDown)}})}function kt(){for(var n,t=p.trigger.split(" "),i=t.length;i--;)n=t[i],n==="click"?f.off("click",o.toggle):n!=="manual"&&(f.off(n==="hover"?"mouseenter":"focus",o.enter),f.off(n==="hover"?"mouseleave":"blur",o.leave),ot==="button"&&n!=="hover"&&f.off(w?"touchstart":"mousedown",o.$onFocusElementMouseDown))}function dt(){if(p.trigger!=="focus")k.on("keyup",o.$onKeyUp);else f.on("keyup",o.$onFocusKeyUp)}function vt(){p.trigger!=="focus"?k.off("keyup",o.$onKeyUp):f.off("keyup",o.$onFocusKeyUp)}function gt(){a(function(){k.on("click",pt);b.on("click",o.hide);ut=!0},0,!1)}function yt(){ut&&(k.off("click",pt),b.off("click",o.hide),ut=!1)}function pt(n){n.stopPropagation()}function ft(n){var s;n=n||p.target||f;var e=n[0],o=e.tagName==="BODY",r=e.getBoundingClientRect(),u={};for(s in r)u[s]=r[s];u.width===null&&(u=angular.extend({},u,{width:r.right-r.left,height:r.bottom-r.top}));var h=o?{top:0,left:0}:c.offset(e),l={scroll:o?t.documentElement.scrollTop||t.body.scrollTop:n.prop("scrollTop")||0},a=o?{width:t.documentElement.clientWidth,height:i.innerHeight}:null;return angular.extend({},u,l,a,h)}function ni(n,t,i,r){var u,f=n.split("-");switch(f[0]){case"right":u={top:t.top+t.height/2-r/2,left:t.left+t.width};break;case"bottom":u={top:t.top+t.height,left:t.left+t.width/2-i/2};break;case"left":u={top:t.top+t.height/2-r/2,left:t.left-i};break;default:u={top:t.top-r,left:t.left+t.width/2-i/2}}if(!f[1])return u;if(f[0]==="top"||f[0]==="bottom")switch(f[1]){case"left":u.left=t.left;break;case"right":u.left=t.left+t.width-i}else if(f[0]==="left"||f[0]==="right")switch(f[1]){case"top":u.top=t.top-r;break;case"bottom":u.top=t.top+t.height}return u}function ti(n,t){var i=k[0],l=i.offsetWidth,f=i.offsetHeight,e=parseInt(c.css(i,"margin-top"),10),o=parseInt(c.css(i,"margin-left"),10),s,u,r;if((isNaN(e)&&(e=0),isNaN(o)&&(o=0),n.top=n.top+e,n.left=n.left+o,c.setOffset(i,angular.extend({using:function(n){k.css({top:Math.round(n.top)+"px",left:Math.round(n.left)+"px",right:""})}},n),0),s=i.offsetWidth,u=i.offsetHeight,t==="top"&&u!==f&&(n.top=n.top+f-u),!/top-left|top-right|bottom-left|bottom-right/.test(t))&&(r=ii(t,n,s,u),r.left?n.left+=r.left:n.top+=r.top,c.setOffset(i,n),/top|right|bottom|left/.test(t))){var h=/top|bottom/.test(t),a=h?r.left*2-l+s:r.top*2-f+u,v=h?"offsetWidth":"offsetHeight";ri(a,i[v],h)}}function ii(n,t,i,r){var f={top:0,left:0},e,u,s,h,c,l;return o.$viewport?(e=p.viewport&&p.viewport.padding||0,u=ft(o.$viewport),/right|left/.test(n)?(s=t.top-e-u.scroll,h=t.top+e-u.scroll+r,s<u.top?f.top=u.top-s:h>u.top+u.height&&(f.top=u.top+u.height-h)):(c=t.left-e,l=t.left+e+i,c<u.left?f.left=u.left-c:l>u.right&&(f.left=u.left+u.width-l)),f):f}function ri(n,t,i){var r=v(".tooltip-arrow, .arrow",k[0]);r.css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")}function et(){clearTimeout(tt);o.$isShown&&k!==null&&(p.autoClose&&yt(),p.keyboard&&vt());it&&(it.$destroy(),it=null);k&&(k.remove(),k=o.$element=null)}var o={},p=o.$options=angular.extend({},n,e),wt=o.$promise=u.compile(p),d=o.$scope=p.scope&&p.scope.$new()||r.$new(),ot=f[0].nodeName.toLowerCase(),nt,tt,rt,st,k,g,it,ct,lt,ut;return p.delay&&angular.isString(p.delay)&&(nt=p.delay.split(",").map(parseFloat),p.delay=nt.length>1?{show:nt[0],hide:nt[1]}:nt[0]),o.$id=p.id||f.attr("id")||"",p.title&&(d.title=h.trustAsHtml(p.title)),d.$setEnabled=function(n){d.$$postDigest(function(){o.setEnabled(n)})},d.$hide=function(){d.$$postDigest(function(){o.hide()})},d.$show=function(){d.$$postDigest(function(){o.show()})},d.$toggle=function(){d.$$postDigest(function(){o.toggle()})},o.$isShown=d.$isShown=!1,wt.then(function(n){st=n;o.init()}),o.init=function(){p.delay&&angular.isNumber(p.delay)&&(p.delay={show:p.delay,hide:p.delay});p.container==="self"?g=f:angular.isElement(p.container)?g=p.container:p.container&&(g=v(p.container));bt();p.target&&(p.target=angular.isElement(p.target)?p.target:v(p.target));p.show&&d.$$postDigest(function(){p.trigger==="focus"?f[0].focus():o.show()})},o.destroy=function(){kt();et();d.$destroy()},o.enter=function(){if(clearTimeout(tt),rt="in",!p.delay||!p.delay.show)return o.show();tt=setTimeout(function(){rt==="in"&&o.show()},p.delay.show)},o.show=function(){if(p.bsEnabled&&!o.$isShown){d.$emit(p.prefixEvent+".show.before",o);var t,n;p.container?(t=g,n=g[0].lastChild?angular.element(g[0].lastChild):null):(t=null,n=f);k&&et();it=o.$scope.$new();k=o.$element=st.link(it,function(){});k.css({top:"-9999px",left:"-9999px",right:"auto",display:"block",visibility:"hidden"});p.animation&&k.addClass(p.animation);p.type&&k.addClass(p.prefixClass+"-"+p.type);p.customClass&&k.addClass(p.customClass);n?n.after(k):t.prepend(k);o.$isShown=d.$isShown=!0;y(d);o.$applyPlacement();angular.version.minor<=2?s.enter(k,t,n,ht):s.enter(k,t,n).then(ht);y(d);l(function(){k&&k.css({visibility:"visible"});p.keyboard&&(p.trigger!=="focus"&&o.focus(),dt())});p.autoClose&&gt()}},o.leave=function(){if(clearTimeout(tt),rt="out",!p.delay||!p.delay.hide)return o.hide();tt=setTimeout(function(){rt==="out"&&o.hide()},p.delay.hide)},o.hide=function(n){o.$isShown&&(d.$emit(p.prefixEvent+".hide.before",o),ct=n,lt=k,angular.version.minor<=2?s.leave(k,at):s.leave(k).then(at),o.$isShown=d.$isShown=!1,y(d),p.keyboard&&k!==null&&vt(),p.autoClose&&k!==null&&yt())},o.toggle=function(){o.$isShown?o.leave():o.enter()},o.focus=function(){k[0].focus()},o.setEnabled=function(n){p.bsEnabled=n},o.setViewport=function(n){p.viewport=n},o.$applyPlacement=function(){var t,u,c;if(k){var i=p.placement,s=/\s?auto?\s?/i,h=s.test(i);h&&(i=i.replace(s,"")||n.placement);k.addClass(p.placement);var r=ft(),f=k.prop("offsetWidth"),e=k.prop("offsetHeight");o.$viewport=p.viewport&&v(p.viewport.selector||p.viewport);h&&(t=i,u=ft(o.$viewport),t.indexOf("bottom")>=0&&r.bottom+e>u.bottom?i=t.replace("bottom","top"):t.indexOf("top")>=0&&r.top-e<u.top&&(i=t.replace("top","bottom")),(t==="right"||t==="bottom-left"||t==="top-left")&&r.right+f>u.width?i=t==="right"?"left":i.replace("left","right"):(t==="left"||t==="bottom-right"||t==="top-right")&&r.left-f<u.left&&(i=t==="left"?"right":i.replace("right","left")),k.removeClass(t).addClass(i));c=ni(i,r,f,e);ti(c,i)}},o.$onKeyUp=function(n){n.which===27&&o.$isShown&&(o.hide(),n.stopPropagation())},o.$onFocusKeyUp=function(n){n.which===27&&(f[0].blur(),n.stopPropagation())},o.$onFocusElementMouseDown=function(n){n.preventDefault();n.stopPropagation();o.$isShown?f[0].blur():f[0].focus()},ut=!1,o}function y(n){n.$$phase||n.$root&&n.$root.$$phase||n.$digest()}function v(n,i){return angular.element((i||t).querySelectorAll(n))}var d=String.prototype.trim,w="createTouch"in i.document,b=angular.element(i.document),p={};return k}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(n,t,i,r,u){return{restrict:"EAC",scope:!0,link:function(n,t,f){var o={scope:n},h,s,e;angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","container","delay","trigger","html","animation","backdropAnimation","type","customClass","id"],function(n){angular.isDefined(f[n])&&(o[n]=f[n])});h=/^(false|0|)$/i;angular.forEach(["html","container"],function(n){angular.isDefined(f[n])&&h.test(f[n])&&(o[n]=!1)});s=t.attr("data-target");angular.isDefined(s)&&(o.target=h.test(s)?!1:s);n.hasOwnProperty("title")||(n.title="");f.$observe("title",function(t){if(angular.isDefined(t)||!n.hasOwnProperty("title")){var r=n.title;n.title=i.trustAsHtml(t);angular.isDefined(r)&&u(function(){e&&e.$applyPlacement()})}});f.bsTooltip&&n.$watch(f.bsTooltip,function(t,i){angular.isObject(t)?angular.extend(n,t):n.title=t;angular.isDefined(i)&&u(function(){e&&e.$applyPlacement()})},!0);f.bsShow&&n.$watch(f.bsShow,function(n){e&&angular.isDefined(n)&&(angular.isString(n)&&(n=!!n.match(/true|,?(tooltip),?/i)),n===!0?e.show():e.hide())});f.bsEnabled&&n.$watch(f.bsEnabled,function(n){e&&angular.isDefined(n)&&(angular.isString(n)&&(n=!!n.match(/true|1|,?(tooltip),?/i)),n===!1?e.setEnabled(!1):e.setEnabled(!0))});f.viewport&&n.$watch(f.viewport,function(n){e&&angular.isDefined(n)&&e.setViewport(n)});e=r(t,o);n.$on("$destroy",function(){e&&e.destroy();o=null;e=null})}}}]);angular.module("mgcrea.ngStrap.timepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$timepicker",function(){var n=this.defaults={animation:"am-fade",prefixClass:"timepicker",placement:"bottom-left",templateUrl:"timepicker/timepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:"date",timeFormat:"shortTime",timezone:null,modelTimeFormat:null,autoclose:!1,minTime:-Infinity,maxTime:+Infinity,length:5,hourStep:1,minuteStep:5,secondStep:5,roundDisplay:!1,iconUp:"glyphicon glyphicon-chevron-up",iconDown:"glyphicon glyphicon-chevron-down",arrowBehavior:"pager"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","$tooltip","$timeout",function(t,i,r,u,f,e,o){function c(t,i,r){function st(n){var t=6e4*c.minuteStep;return new Date(Math.floor(n.getTime()/t)*t)}function lt(n,i){var u=n+i,r;t[0].createTextRange?(r=t[0].createTextRange(),r.collapse(!0),r.moveStart("character",n),r.moveEnd("character",u),r.select()):t[0].setSelectionRange?t[0].setSelectionRange(n,u):angular.isUndefined(t[0].selectionStart)&&(t[0].selectionStart=n,t[0].selectionEnd=u)}function it(){t[0].focus()}var u=e(t,angular.extend({},n,r)),ot=r.scope,c=u.$options,a=u.$scope,nt=c.lang,y=function(n,t,i){return f.formatDate(n,t,nt,i)},v=0,ht=c.roundDisplay?st(new Date):new Date,w=i.$dateValue||ht,l={hour:w.getHours(),meridian:w.getHours()<12,minute:w.getMinutes(),second:w.getSeconds(),millisecond:w.getMilliseconds()},b=f.getDatetimeFormat(c.timeFormat,nt),k=f.hoursFormat(b),ct=f.timeSeparator(b),d=f.minutesFormat(b),g=f.secondsFormat(b),p=f.showSeconds(b),tt=f.showAM(b),rt,ut,ft,et;return a.$iconUp=c.iconUp,a.$iconDown=c.iconDown,a.$select=function(n,t){u.select(n,t)},a.$moveIndex=function(n,t){u.$moveIndex(n,t)},a.$switchMeridian=function(n){u.switchMeridian(n)},u.update=function(n){angular.isDate(n)&&!isNaN(n.getTime())?(u.$date=n,angular.extend(l,{hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds(),millisecond:n.getMilliseconds()}),u.$build()):u.$isBuilt||u.$build()},u.select=function(n,t,r){(!i.$dateValue||isNaN(i.$dateValue.getTime()))&&(i.$dateValue=new Date(1970,0,1));angular.isDate(n)||(n=new Date(n));t===0?i.$dateValue.setHours(n.getHours()):t===1?i.$dateValue.setMinutes(n.getMinutes()):t===2&&i.$dateValue.setSeconds(n.getSeconds());i.$setViewValue(angular.copy(i.$dateValue));i.$render();c.autoclose&&!r&&o(function(){u.hide(!0)})},u.switchMeridian=function(n){if(i.$dateValue&&!isNaN(i.$dateValue.getTime())){var t=(n||i.$dateValue).getHours();i.$dateValue.setHours(t<12?t+12:t-12);i.$setViewValue(angular.copy(i.$dateValue));i.$render()}},u.$build=function(){for(var f=a.midIndex=parseInt(c.length/2,10),e=[],t,o,i,h,r,s,n=0;n<c.length;n++)t=new Date(1970,0,1,l.hour-(f-n)*c.hourStep),e.push({date:t,label:y(t,k),selected:u.$date&&u.$isSelected(t,0),disabled:u.$isDisabled(t,0)});for(o=[],n=0;n<c.length;n++)i=new Date(1970,0,1,0,l.minute-(f-n)*c.minuteStep),o.push({date:i,label:y(i,d),selected:u.$date&&u.$isSelected(i,1),disabled:u.$isDisabled(i,1)});for(h=[],n=0;n<c.length;n++)r=new Date(1970,0,1,0,0,l.second-(f-n)*c.secondStep),h.push({date:r,label:y(r,g),selected:u.$date&&u.$isSelected(r,2),disabled:u.$isDisabled(r,2)});for(s=[],n=0;n<c.length;n++)p?s.push([e[n],o[n],h[n]]):s.push([e[n],o[n]]);a.rows=s;a.showSeconds=p;a.showAM=tt;a.isAM=(u.$date||e[f].date).getHours()<12;a.timeSeparator=ct;u.$isBuilt=!0},u.$isSelected=function(n,t){if(u.$date){if(t===0)return n.getHours()===u.$date.getHours();if(t===1)return n.getMinutes()===u.$date.getMinutes();if(t===2)return n.getSeconds()===u.$date.getSeconds()}else return!1},u.$isDisabled=function(n,t){var i;return t===0?i=n.getTime()+l.minute*6e4+l.second*1e3:t===1?i=n.getTime()+l.hour*36e5+l.second*1e3:t===2&&(i=n.getTime()+l.hour*36e5+l.minute*6e4),i<c.minTime*1||i>c.maxTime*1},a.$arrowAction=function(n,t){c.arrowBehavior==="picker"?u.$setTimeByStep(n,t):u.$moveIndex(n,t)},u.$setTimeByStep=function(n,t){var i=new Date(u.$date||w),r=i.getHours(),f=i.getMinutes(),e=i.getSeconds();t===0?i.setHours(r-parseInt(c.hourStep,10)*n):t===1?i.setMinutes(f-parseInt(c.minuteStep,10)*n):t===2&&i.setSeconds(e-parseInt(c.secondStep,10)*n);u.select(i,t,!0)},u.$moveIndex=function(n,t){var i;t===0?(i=new Date(1970,0,1,l.hour+n*c.length,l.minute,l.second),angular.extend(l,{hour:i.getHours()})):t===1?(i=new Date(1970,0,1,l.hour,l.minute+n*c.length*c.minuteStep,l.second),angular.extend(l,{minute:i.getMinutes()})):t===2&&(i=new Date(1970,0,1,l.hour,l.minute,l.second+n*c.length*c.secondStep),angular.extend(l,{second:i.getSeconds()}));u.$build()},u.$onMouseDown=function(n){if(n.target.nodeName.toLowerCase()!=="input"&&n.preventDefault(),n.stopPropagation(),s){var t=angular.element(n.target);t[0].nodeName.toLowerCase()!=="button"&&(t=t.parent());t.triggerHandler("click")}},u.$onKeyDown=function(n){var i,e,a,w;if(/(38|37|39|40|13)/.test(n.keyCode)&&!n.shiftKey&&!n.altKey){if(n.preventDefault(),n.stopPropagation(),n.keyCode===13){u.hide(!0);return}var t=new Date(u.$date),b=t.getHours(),r=y(t,k).length,nt=t.getMinutes(),o=y(t,d).length,it=t.getSeconds(),s=y(t,g).length,f=1,h=/(37|39)/.test(n.keyCode),l=2+p*1+tt*1;h&&(n.keyCode===37?v=v<1?l-1:v-1:n.keyCode===39&&(v=v<l-1?v+1:0));i=[0,r];e=0;n.keyCode===38&&(e=-1);n.keyCode===40&&(e=1);a=v===2&&p;w=v===2&&!p||v===3&&p;v===0?(t.setHours(b+e*parseInt(c.hourStep,10)),r=y(t,k).length,i=[0,r]):v===1?(t.setMinutes(nt+e*parseInt(c.minuteStep,10)),o=y(t,d).length,i=[r+f,o]):a?(t.setSeconds(it+e*parseInt(c.secondStep,10)),s=y(t,g).length,i=[r+f+o+f,s]):w&&(h||u.switchMeridian(),i=[r+f+o+f+(s+f)*p,2]);u.select(t,v,!0);lt(i[0],i[1]);ot.$digest()}},rt=u.init,u.init=function(){if(h&&c.useNative){t.prop("type","time");t.css("-webkit-appearance","textfield");return}if(s){t.prop("type","text");t.attr("readonly","true");t.on("click",it)}rt()},ut=u.destroy,u.destroy=function(){h&&c.useNative&&t.off("click",it);ut()},ft=u.show,u.show=function(){!s&&t.attr("readonly")||t.attr("disabled")||(ft(),o(function(){u.$element&&u.$element.on(s?"touchstart":"mousedown",u.$onMouseDown);c.keyboard&&t&&t.on("keydown",u.$onKeyDown)},0,!1))},et=u.hide,u.hide=function(n){u.$isShown&&(u.$element&&u.$element.off(s?"touchstart":"mousedown",u.$onMouseDown),c.keyboard&&t&&t.off("keydown",u.$onKeyDown),et(n))},u}var h=/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent),s="createTouch"in t.document&&h;return n.lang||(n.lang=f.getDefaultLocale()),c.defaults=n,c}]}).directive("bsTimepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$timepicker",function(n,t,r,u,f,e){var o=e.defaults,s=/(ip(a|o)d|iphone|android)/gi.test(n.navigator.userAgent);return{restrict:"EAC",require:"ngModel",link:function(n,t,r,h){function w(n){if(angular.isDate(n)){var t=isNaN(c.minTime)||new Date(n.getTime()).setFullYear(1970,0,1)>=c.minTime,i=isNaN(c.maxTime)||new Date(n.getTime()).setFullYear(1970,0,1)<=c.maxTime,r=t&&i;(h.$setValidity("date",r),h.$setValidity("min",t),h.$setValidity("max",i),r)&&(h.$dateValue=n)}}function b(){return!h.$dateValue||isNaN(h.$dateValue.getTime())?"":p(h.$dateValue,c.timeFormat)}var c={scope:n},v,l;angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","autoclose","timeType","timeFormat","timezone","modelTimeFormat","useNative","hourStep","minuteStep","secondStep","length","arrowBehavior","iconUp","iconDown","roundDisplay","id","prefixClass","prefixEvent"],function(n){angular.isDefined(r[n])&&(c[n]=r[n])});v=/^(false|0|)$/i;angular.forEach(["html","container","autoclose","useNative","roundDisplay"],function(n){angular.isDefined(r[n])&&v.test(r[n])&&(c[n]=!1)});r.bsShow&&n.$watch(r.bsShow,function(n){l&&angular.isDefined(n)&&(angular.isString(n)&&(n=!!n.match(/true|,?(timepicker),?/i)),n===!0?l.show():l.hide())});s&&(c.useNative||o.useNative)&&(c.timeFormat="HH:mm");l=e(t,h,c);c=l.$options;var y=c.lang,p=function(n,t,i){return u.formatDate(n,t,y,i)},a=f({format:c.timeFormat,lang:y});angular.forEach(["minTime","maxTime"],function(n){angular.isDefined(r[n])&&r.$observe(n,function(t){l.$options[n]=a.getTimeForAttribute(n,t);isNaN(l.$options[n])||l.$build();w(h.$dateValue)})});n.$watch(r.ngModel,function(){l.update(h.$dateValue)},!0);h.$parsers.unshift(function(n){var t,r;return n?(r=angular.isDate(n)?n:a.parse(n,h.$dateValue),!r||isNaN(r.getTime()))?(h.$setValidity("date",!1),i):(w(r),c.timeType==="string")?(t=a.timezoneOffsetAdjust(r,c.timezone,!0),p(t,c.modelTimeFormat||c.timeFormat)):(t=a.timezoneOffsetAdjust(h.$dateValue,c.timezone,!0),c.timeType==="number"?t.getTime():c.timeType==="unix"?t.getTime()/1e3:c.timeType==="iso"?t.toISOString():new Date(t)):(h.$setValidity("date",!0),null)});h.$formatters.push(function(n){var t;return t=angular.isUndefined(n)||n===null?NaN:angular.isDate(n)?n:c.timeType==="string"?a.parse(n,null,c.modelTimeFormat):c.timeType==="unix"?new Date(n*1e3):new Date(n),h.$dateValue=a.timezoneOffsetAdjust(t,c.timezone),b()});h.$render=function(){t.val(b())};n.$on("$destroy",function(){l&&l.destroy();c=null;l=null})}}}]);angular.module("mgcrea.ngStrap.tab",[]).provider("$tab",function(){var n=this.defaults={animation:"am-fade",template:"tab/tab.tpl.html",navClass:"nav-tabs",activeClass:"active"},t=this.controller=function(t,i,r){var u=this;u.$options=angular.copy(n);angular.forEach(["animation","navClass","activeClass"],function(n){angular.isDefined(r[n])&&(u.$options[n]=r[n])});t.$navClass=u.$options.navClass;t.$activeClass=u.$options.activeClass;u.$panes=t.$panes=[];u.$activePaneChangeListeners=u.$viewChangeListeners=[];u.$push=function(n){angular.isUndefined(u.$panes.$active)&&t.$setActive(n.name||0);u.$panes.push(n)};u.$remove=function(n){var i=u.$panes.indexOf(n),r=u.$panes.$active,t;t=angular.isString(r)?u.$panes.map(function(n){return n.name}).indexOf(r):u.$panes.$active;u.$panes.splice(i,1);i<t?t--:i===t&&t===u.$panes.length&&t--;t>=0&&t<u.$panes.length?u.$setActive(u.$panes[t].name||t):u.$setActive()};u.$setActive=t.$setActive=function(n){u.$panes.$active=n;u.$activePaneChangeListeners.forEach(function(n){n()})};u.$isActive=t.$isActive=function(n,t){return u.$panes.$active===n.name||u.$panes.$active===t}};this.$get=function(){var i={};return i.defaults=n,i.controller=t,i}}).directive("bsTabs",["$window","$animate","$tab","$parse",function(n,t,i,r){var u=i.defaults;return{require:["?ngModel","bsTabs"],transclude:!0,scope:!0,controller:["$scope","$element","$attrs",i.controller],templateUrl:function(n,t){return t.template||u.template},link:function(n,t,i,u){var e=u[0],f=u[1],o;e&&(f.$activePaneChangeListeners.push(function(){e.$setViewValue(f.$panes.$active)}),e.$formatters.push(function(n){return f.$setActive(n),n}));i.bsActivePane&&(o=r(i.bsActivePane),f.$activePaneChangeListeners.push(function(){o.assign(n,f.$panes.$active)}),n.$watch(i.bsActivePane,function(n){f.$setActive(n)},!0))}}}]).directive("bsPane",["$window","$animate","$sce",function(n,t,i){return{require:["^?ngModel","^bsTabs"],scope:!0,link:function(n,r,u,f){function o(){var i=e.$panes.indexOf(n);t[e.$isActive(n,i)?"addClass":"removeClass"](r,e.$options.activeClass)}var s=f[0],e=f[1];r.addClass("tab-pane");u.$observe("title",function(t){n.title=i.trustAsHtml(t)});n.name=u.name;e.$options.animation&&r.addClass(e.$options.animation);u.$observe("disabled",function(t){n.disabled=n.$eval(t)});e.$push(n);n.$on("$destroy",function(){e.$remove(n)});e.$activePaneChangeListeners.push(function(){o()});o()}}}]);angular.module("mgcrea.ngStrap.select",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$select",function(){var n=this.defaults={animation:"am-fade",prefixClass:"select",prefixEvent:"$select",placement:"bottom-left",templateUrl:"select/select.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,sort:!0,caretHtml:'&nbsp;<span class="caret"><\/span>',placeholder:"Choose among the following...",allText:"All",noneText:"None",maxLength:3,maxLengthHtml:"selected",iconCheckmark:"glyphicon glyphicon-ok"};this.$get=["$window","$document","$rootScope","$tooltip","$timeout",function(t,i,r,u,f){function o(r,o,s){var c={},l=angular.extend({},n,s),h,a,v;return c=u(r,l),h=c.$scope,h.$matches=[],h.$activeIndex=l.multiple?[]:-1,h.$isMultiple=l.multiple,h.$showAllNoneButtons=l.allNoneButtons&&l.multiple,h.$iconCheckmark=l.iconCheckmark,h.$allText=l.allText,h.$noneText=l.noneText,h.$activate=function(n){h.$$postDigest(function(){c.activate(n)})},h.$select=function(n){h.$$postDigest(function(){c.select(n)})},h.$isVisible=function(){return c.$isVisible()},h.$isActive=function(n){return c.$isActive(n)},h.$selectAll=function(){for(var n=0;n<h.$matches.length;n++)h.$isActive(n)||h.$select(n)},h.$selectNone=function(){for(var n=0;n<h.$matches.length;n++)h.$isActive(n)&&h.$select(n)},c.update=function(n){h.$matches=n;c.$updateActiveIndex()},c.activate=function(n){return l.multiple?(c.$isActive(n)?h.$activeIndex.splice(h.$activeIndex.indexOf(n),1):h.$activeIndex.push(n),l.sort&&h.$activeIndex.sort(function(n,t){return n-t})):h.$activeIndex=n,h.$activeIndex},c.select=function(n){var t=h.$matches[n].value;h.$apply(function(){c.activate(n);l.multiple?o.$setViewValue(h.$activeIndex.map(function(n){return angular.isUndefined(h.$matches[n])?null:h.$matches[n].value})):(o.$setViewValue(t),c.hide())});h.$emit(l.prefixEvent+".select",t,n,c)},c.$updateActiveIndex=function(){h.$activeIndex=l.multiple?angular.isArray(o.$modelValue)?o.$modelValue.map(function(n){return c.$getIndex(n)}):[]:angular.isDefined(o.$modelValue)&&h.$matches.length?c.$getIndex(o.$modelValue):-1},c.$isVisible=function(){return!l.minLength||!o?h.$matches.length:h.$matches.length&&o.$viewValue.length>=l.minLength},c.$isActive=function(n){return l.multiple?h.$activeIndex.indexOf(n)!==-1:h.$activeIndex===n},c.$getIndex=function(n){var i=h.$matches.length,t=i;if(i){for(t=i;t--;)if(h.$matches[t].value===n)break;if(!(t<0))return t}},c.$onMouseDown=function(n){if(n.preventDefault(),n.stopPropagation(),e){var t=angular.element(n.target);t.triggerHandler("click")}},c.$onKeyDown=function(n){if(/(9|13|38|40)/.test(n.keyCode)){if(n.keyCode!==9&&(n.preventDefault(),n.stopPropagation()),l.multiple&&n.keyCode===9)return c.hide();if(!l.multiple&&(n.keyCode===13||n.keyCode===9))return c.select(h.$activeIndex);l.multiple||(n.keyCode===38&&h.$activeIndex>0?h.$activeIndex--:n.keyCode===38&&h.$activeIndex<0?h.$activeIndex=h.$matches.length-1:n.keyCode===40&&h.$activeIndex<h.$matches.length-1?h.$activeIndex++:angular.isUndefined(h.$activeIndex)&&(h.$activeIndex=0),h.$digest())}},c.$isIE=function(){var n=t.navigator.userAgent;return n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0},c.$selectScrollFix=function(n){i[0].activeElement.tagName==="UL"&&(n.preventDefault(),n.stopImmediatePropagation(),n.target.focus())},a=c.show,c.show=function(){a();l.multiple&&c.$element.addClass("select-multiple");f(function(){c.$element.on(e?"touchstart":"mousedown",c.$onMouseDown);if(l.keyboard)r.on("keydown",c.$onKeyDown)},0,!1)},v=c.hide,c.hide=function(){!l.multiple&&angular.isUndefined(o.$modelValue)&&(h.$activeIndex=-1);c.$element.off(e?"touchstart":"mousedown",c.$onMouseDown);l.keyboard&&r.off("keydown",c.$onKeyDown);v(!0)},c}var h=angular.element(t.document.body),s=/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent),e="createTouch"in t.document&&s;return o.defaults=n,o}]}).directive("bsSelect",["$window","$parse","$q","$select","$parseOptions",function(n,t,i,r,u){var f=r.defaults;return{restrict:"EAC",require:"ngModel",link:function(n,t,i,e){var o={scope:n,placeholder:f.placeholder},c,h,l,a,s,v;angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","placeholder","allNoneButtons","maxLength","maxLengthHtml","allText","noneText","iconCheckmark","autoClose","id","sort","caretHtml","prefixClass","prefixEvent"],function(n){angular.isDefined(i[n])&&(o[n]=i[n])});c=/^(false|0|)$/i;angular.forEach(["html","container","allNoneButtons","sort"],function(n){angular.isDefined(i[n])&&c.test(i[n])&&(o[n]=!1)});h=t.attr("data-multiple");angular.isDefined(h)&&(o.multiple=c.test(h)?!1:h);t[0].nodeName.toLowerCase()==="select"&&(l=t,l.css("display","none"),t=angular.element('<button type="button" class="btn btn-default"><\/button>'),l.after(t));a=u(i.bsOptions);s=r(t,e,o);s.$isIE()&&t[0].addEventListener("blur",s.$selectScrollFix);v=a.$match[7].replace(/\|.+/,"").trim();n.$watchCollection(v,function(){a.valuesFn(n,e).then(function(n){s.update(n);e.$render()})});n.$watch(i.ngModel,function(){s.$updateActiveIndex();e.$render()},!0);e.$render=function(){var n,i;o.multiple&&angular.isArray(e.$modelValue)?(n=e.$modelValue.map(function(n){return i=s.$getIndex(n),angular.isDefined(i)?s.$scope.$matches[i].label:!1}).filter(angular.isDefined),n=n.length>(o.maxLength||f.maxLength)?n.length+" "+(o.maxLengthHtml||f.maxLengthHtml):n.join(", ")):(i=s.$getIndex(e.$modelValue),n=angular.isDefined(i)?s.$scope.$matches[i].label:!1);t.html((n?n:o.placeholder)+(o.caretHtml?o.caretHtml:f.caretHtml))};o.multiple&&(e.$isEmpty=function(n){return!n||n.length===0});n.$on("$destroy",function(){s&&s.destroy();o=null;s=null})}}}]);angular.module("mgcrea.ngStrap.scrollspy",["mgcrea.ngStrap.helpers.debounce","mgcrea.ngStrap.helpers.dimensions"]).provider("$scrollspy",function(){var n=this.$$spies={},i=this.defaults={debounce:150,throttle:100,offset:100};this.$get=["$window","$document","$rootScope","dimensions","debounce","throttle",function(r,u,f,e,o,s){function h(n,t){return n[0].nodeName&&n[0].nodeName.toLowerCase()===t.toLowerCase()}function v(u){var p=angular.extend({},i,u);p.element||(p.element=a);var it=h(p.element,"body"),k=it?c:p.element,b=it?"window":p.id;if(n[b])return n[b].$$count++,n[b];var v={},ut,ft,w=v.$trackedElements=[],y=[],d,g,rt,nt,et,tt;return v.init=function(){this.$$count=1;g=o(this.checkPosition,p.debounce);rt=s(this.checkPosition,p.throttle);k.on("click",this.checkPositionWithEventLoop);c.on("resize",g);k.on("scroll",rt);nt=o(this.checkOffsets,p.debounce);ut=f.$on("$viewContentLoaded",nt);ft=f.$on("$includeContentLoaded",nt);nt();b&&(n[b]=v)},v.destroy=function(){(this.$$count--,this.$$count>0)||(k.off("click",this.checkPositionWithEventLoop),c.off("resize",g),k.off("scroll",rt),ut(),ft(),b&&delete n[b])},v.checkPosition=function(){if(y.length){if(tt=(it?r.pageYOffset:k.prop("scrollTop"))||0,et=Math.max(r.innerHeight,l.prop("clientHeight")),tt<y[0].offsetTop&&d!==y[0].target)return v.$activateElement(y[0]);for(var n=y.length;n--;)if(!angular.isUndefined(y[n].offsetTop)&&y[n].offsetTop!==null&&d!==y[n].target&&!(tt<y[n].offsetTop)&&(!y[n+1]||!(tt>y[n+1].offsetTop)))return v.$activateElement(y[n])}},v.checkPositionWithEventLoop=function(){setTimeout(v.checkPosition,1)},v.$activateElement=function(n){if(d){var t=v.$getTrackedElement(d);t&&(t.source.removeClass("active"),h(t.source,"li")&&h(t.source.parent().parent(),"li")&&t.source.parent().parent().removeClass("active"))}d=n.target;n.source.addClass("active");h(n.source,"li")&&h(n.source.parent().parent(),"li")&&n.source.parent().parent().addClass("active")},v.$getTrackedElement=function(n){return w.filter(function(t){return t.target===n})[0]},v.checkOffsets=function(){angular.forEach(w,function(n){var i=t.querySelector(n.target);n.offsetTop=i?e.offset(i).top:null;p.offset&&n.offsetTop!==null&&(n.offsetTop-=p.offset*1)});y=w.filter(function(n){return n.offsetTop!==null}).sort(function(n,t){return n.offsetTop-t.offsetTop});g()},v.trackElement=function(n,t){w.push({target:n,source:t})},v.untrackElement=function(n,t){for(var r,i=w.length;i--;)if(w[i].target===n&&w[i].source===t){r=i;break}w=w.splice(r,1)},v.activate=function(n){w[n].addClass("active")},v.init(),v}var c=angular.element(r),l=angular.element(u.prop("documentElement")),a=angular.element(r.document.body);return v}]}).directive("bsScrollspy",["$rootScope","debounce","dimensions","$scrollspy",function(n,t,i,r){return{restrict:"EAC",link:function(n,t,i){var f={scope:n},u;angular.forEach(["offset","target"],function(n){angular.isDefined(i[n])&&(f[n]=i[n])});u=r(f);u.trackElement(f.target,t);n.$on("$destroy",function(){u&&(u.untrackElement(f.target,t),u.destroy());f=null;u=null})}}}]).directive("bsScrollspyList",["$rootScope","debounce","dimensions","$scrollspy",function(){return{restrict:"A",compile:function(n){var t=n[0].querySelectorAll("li > a[href]");angular.forEach(t,function(n){var t=angular.element(n);t.parent().attr("bs-scrollspy","").attr("data-target",t.attr("href"))})}}}]);angular.module("mgcrea.ngStrap.popover",["mgcrea.ngStrap.tooltip"]).provider("$popover",function(){var n=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",templateUrl:"popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!1,title:"",content:"",delay:0,autoClose:!1};this.$get=["$tooltip",function(t){function i(i,r){var u=angular.extend({},n,r),f=t(i,u);return u.content&&(f.$scope.content=u.content),f}return i}]}).directive("bsPopover",["$window","$sce","$popover",function(n,t,i){var r=n.requestAnimationFrame||n.setTimeout;return{restrict:"EAC",scope:!0,link:function(n,u,f){var o={scope:n},h,s,e;angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","container","delay","trigger","html","animation","customClass","autoClose","id","prefixClass","prefixEvent"],function(n){angular.isDefined(f[n])&&(o[n]=f[n])});h=/^(false|0|)$/i;angular.forEach(["html","container","autoClose"],function(n){angular.isDefined(f[n])&&h.test(f[n])&&(o[n]=!1)});s=u.attr("data-target");angular.isDefined(s)&&(o.target=h.test(s)?!1:s);angular.forEach(["title","content"],function(i){f[i]&&f.$observe(i,function(u,f){n[i]=t.trustAsHtml(u);angular.isDefined(f)&&r(function(){e&&e.$applyPlacement()})})});f.bsPopover&&n.$watch(f.bsPopover,function(t,i){angular.isObject(t)?angular.extend(n,t):n.content=t;angular.isDefined(i)&&r(function(){e&&e.$applyPlacement()})},!0);f.bsShow&&n.$watch(f.bsShow,function(n){e&&angular.isDefined(n)&&(angular.isString(n)&&(n=!!n.match(/true|,?(popover),?/i)),n===!0?e.show():e.hide())});f.viewport&&n.$watch(f.viewport,function(n){e&&angular.isDefined(n)&&e.setViewport(n)});e=i(u,o);n.$on("$destroy",function(){e&&e.destroy();o=null;e=null})}}}]);angular.module("mgcrea.ngStrap.navbar",[]).provider("$navbar",function(){var n=this.defaults={activeClass:"active",routeAttr:"data-match-route",strict:!1};this.$get=function(){return{defaults:n}}}).directive("bsNavbar",["$window","$location","$navbar",function(n,t,i){var r=i.defaults;return{restrict:"A",link:function(n,i,u){var f=angular.copy(r);angular.forEach(Object.keys(r),function(n){angular.isDefined(u[n])&&(f[n]=u[n])});n.$watch(function(){return t.path()},function(n){var t=i[0].querySelectorAll("li["+f.routeAttr+"]");angular.forEach(t,function(t){var i=angular.element(t),r=i.attr(f.routeAttr).replace("/","\\/"),u;f.strict&&(r="^"+r+"$");u=new RegExp(r,"i");u.test(n)?i.addClass(f.activeClass):i.removeClass(f.activeClass)})})}}}]);angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.core","mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var n=this.defaults={animation:"am-fade",backdropAnimation:"am-fade",prefixClass:"modal",prefixEvent:"modal",placement:"top",templateUrl:"modal/modal.tpl.html",template:"",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$window","$rootScope","$bsCompiler","$animate","$timeout","$sce","dimensions",function(i,r,u,f,e,o){function a(t){function d(){a.$emit(i.prefixEvent+".show",e)}function g(){a.$emit(i.prefixEvent+".hide",e);s.removeClass(i.prefixClass+"-open");i.animation&&s.removeClass(i.prefixClass+"-with-"+i.animation)}function ft(){if(i.backdrop){y.on("click",b);p.on("click",b);p.on("wheel",it)}}function nt(){i.backdrop&&(y.off("click",b),p.off("click",b),p.off("wheel",it))}function et(){if(i.keyboard)y.on("keyup",e.$onKeyUp)}function tt(){i.keyboard&&y.off("keyup",e.$onKeyUp)}function b(n){n.target===n.currentTarget&&(i.backdrop==="static"?e.focus():e.hide())}function it(n){n.preventDefault()}function rt(){e.$isShown&&y!==null&&(nt(),tt());w&&(w.$destroy(),w=null);y&&(y.remove(),y=e.$element=null)}var e={},i=e.$options=angular.extend({},n,t),ut=e.$promise=u.compile(i),a=e.$scope=i.scope&&i.scope.$new()||r.$new(),k,y,w,p;return i.element||i.container||(i.container="body"),e.$id=i.id||i.element&&i.element.attr("id")||"",c(["title","content"],function(n){i[n]&&(a[n]=o.trustAsHtml(i[n]))}),a.$hide=function(){a.$$postDigest(function(){e.hide()})},a.$show=function(){a.$$postDigest(function(){e.show()})},a.$toggle=function(){a.$$postDigest(function(){e.toggle()})},e.$isShown=a.$isShown=!1,p=angular.element('<div class="'+i.prefixClass+'-backdrop"/>'),p.css({position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px","z-index":1038}),ut.then(function(n){k=n;e.init()}),e.init=function(){i.show&&a.$$postDigest(function(){e.show()})},e.destroy=function(){rt();p&&(p.remove(),p=null);a.$destroy()},e.show=function(){var n,t,r;e.$isShown||(angular.isElement(i.container)?(n=i.container,t=i.container[0].lastChild?angular.element(i.container[0].lastChild):null):i.container?(n=v(i.container),t=n[0]&&n[0].lastChild?angular.element(n[0].lastChild):null):(n=null,t=i.element),y&&rt(),w=e.$scope.$new(),y=e.$element=k.link(w,function(){}),a.$emit(i.prefixEvent+".show.before",e).defaultPrevented)||(y.css({display:"block"}).addClass(i.placement),i.animation&&(i.backdrop&&p.addClass(i.backdropAnimation),y.addClass(i.animation)),i.backdrop&&f.enter(p,s,null),angular.version.minor<=2?f.enter(y,n,t,d):f.enter(y,n,t).then(d),e.$isShown=a.$isShown=!0,h(a),r=y[0],l(function(){r.focus()}),s.addClass(i.prefixClass+"-open"),i.animation&&s.addClass(i.prefixClass+"-with-"+i.animation),ft(),et())},e.hide=function(){e.$isShown&&(a.$emit(i.prefixEvent+".hide.before",e).defaultPrevented||(angular.version.minor<=2?f.leave(y,g):f.leave(y).then(g),i.backdrop&&f.leave(p),e.$isShown=a.$isShown=!1,h(a),nt(),tt()))},e.toggle=function(){e.$isShown?e.hide():e.show()},e.focus=function(){y[0].focus()},e.$onKeyUp=function(n){n.which===27&&e.$isShown&&(e.hide(),n.stopPropagation())},e}function h(n){n.$$phase||n.$root&&n.$root.$$phase||n.$digest()}function v(n,i){return angular.element((i||t).querySelectorAll(n))}var c=angular.forEach,y=String.prototype.trim,l=i.requestAnimationFrame||i.setTimeout,s=angular.element(i.document.body);return a}]}).directive("bsModal",["$window","$sce","$modal",function(n,t,i){return{restrict:"EAC",scope:!0,link:function(n,r,u){var e={scope:n,element:r,show:!1},o,f;angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","backdrop","keyboard","html","container","animation","backdropAnimation","id","prefixEvent","prefixClass"],function(n){angular.isDefined(u[n])&&(e[n]=u[n])});o=/^(false|0|)$/i;angular.forEach(["backdrop","keyboard","html","container"],function(n){angular.isDefined(u[n])&&o.test(u[n])&&(e[n]=!1)});angular.forEach(["title","content"],function(i){u[i]&&u.$observe(i,function(r){n[i]=t.trustAsHtml(r)})});u.bsModal&&n.$watch(u.bsModal,function(t){angular.isObject(t)?angular.extend(n,t):n.content=t},!0);f=i(e);r.on(u.trigger||"click",f.toggle);n.$on("$destroy",function(){f&&f.destroy();e=null;f=null})}}}]);angular.version.minor<3&&angular.version.dot<14&&angular.module("ng").factory("$$rAF",["$window","$timeout",function(n,t){var i=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame,f=n.cancelAnimationFrame||n.webkitCancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelRequestAnimationFrame,r=!!i,u=r?function(n){var t=i(n);return function(){f(t)}}:function(n){var i=t(n,16.66,!1);return function(){t.cancel(i)}};return u.supported=r,u}]);angular.module("mgcrea.ngStrap.helpers.parseOptions",[]).provider("$parseOptions",function(){var n=this.defaults={regexp:/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/};this.$get=["$parse","$q",function(t,i){function r(r,u){function y(n,t){return n.map(function(n,i){var r={},u,f;return r[o]=n,u=s(t,r),f=h(t,r),{label:u,value:f,index:i}})}var e={},l=angular.extend({},n,u),f,s,o,a,v,h,c;return e.$values=[],e.init=function(){e.$match=f=r.match(l.regexp);s=t(f[2]||f[1]);o=f[4]||f[6];a=f[5];v=t(f[3]||"");h=t(f[2]?f[1]:o);c=t(f[7])},e.valuesFn=function(n,t){return i.when(c(n,t)).then(function(t){return angular.isArray(t)||(t=[]),e.$values=t.length?y(t,n):[],e.$values})},e.displayValue=function(n){var t={};return t[o]=n,s(t)},e.init(),e}return r}]});angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(){var u=angular.element,t={},i=t.nodeName=function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},r;return t.css=function(t,i,r){var u;return u=t.currentStyle?t.currentStyle[i]:n.getComputedStyle?n.getComputedStyle(t)[i]:t.style[i],r===!0?parseFloat(u)||0:u},t.offset=function(t){var i=t.getBoundingClientRect(),r=t.ownerDocument;return{width:i.width||t.offsetWidth,height:i.height||t.offsetHeight,top:i.top+(n.pageYOffset||r.documentElement.scrollTop)-(r.documentElement.clientTop||0),left:i.left+(n.pageXOffset||r.documentElement.scrollLeft)-(r.documentElement.clientLeft||0)}},t.setOffset=function(n,i,r){var e,o,s,h,f,c,a,l=t.css(n,"position"),v=angular.element(n),u={};l==="static"&&(n.style.position="relative");f=t.offset(n);s=t.css(n,"top");c=t.css(n,"left");a=(l==="absolute"||l==="fixed")&&(s+c).indexOf("auto")>-1;a?(e=t.position(n),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0);angular.isFunction(i)&&(i=i.call(n,r,f));i.top!==null&&(u.top=i.top-f.top+h);i.left!==null&&(u.left=i.left-f.left+o);"using"in i?i.using.call(v,u):v.css({top:u.top+"px",left:u.left+"px"})},t.position=function(n){var u={top:0,left:0},f,e;return t.css(n,"position")==="fixed"?e=n.getBoundingClientRect():(f=r(n),e=t.offset(n),i(f,"html")||(u=t.offset(f)),u.top+=t.css(f,"borderTopWidth",!0),u.left+=t.css(f,"borderLeftWidth",!0)),{width:n.offsetWidth,height:n.offsetHeight,top:e.top-u.top-t.css(n,"marginTop",!0),left:e.left-u.left-t.css(n,"marginLeft",!0)}},r=function(n){var u=n.ownerDocument,r=n.offsetParent||u;if(i(r,"#document"))return u.documentElement;while(r&&!i(r,"html")&&t.css(r,"position")==="static")r=r.offsetParent;return r||u.documentElement},t.height=function(n,i){var r=n.offsetHeight;return i?r+=t.css(n,"marginTop",!0)+t.css(n,"marginBottom",!0):r-=t.css(n,"paddingTop",!0)+t.css(n,"paddingBottom",!0)+t.css(n,"borderTopWidth",!0)+t.css(n,"borderBottomWidth",!0),r},t.width=function(n,i){var r=n.offsetWidth;return i?r+=t.css(n,"marginLeft",!0)+t.css(n,"marginRight",!0):r-=t.css(n,"paddingLeft",!0)+t.css(n,"paddingRight",!0)+t.css(n,"borderLeftWidth",!0)+t.css(n,"borderRightWidth",!0),r},t}]);angular.module("mgcrea.ngStrap.helpers.debounce",[]).factory("debounce",["$timeout",function(n){return function(t,i,r){var u=null;return function(){var f=this,e=arguments,o=r&&!u;return u&&n.cancel(u),u=n(function(){u=null;r||t.apply(f,e)},i,!1),o&&t.apply(f,e),u}}}]).factory("throttle",["$timeout",function(n){return function(t,i,r){var u=null;return r||(r={}),function(){var f=this,e=arguments;u||(r.leading!==!1&&t.apply(f,e),u=n(function(){u=null;r.trailing!==!1&&t.apply(f,e)},i,!1))}}}]);angular.module("mgcrea.ngStrap.helpers.dateParser",[]).provider("$dateParser",["$localeProvider",function(){function n(){this.year=1970;this.month=0;this.day=1;this.hours=0;this.minutes=0;this.seconds=0;this.milliseconds=0}function i(){}function r(n){return!isNaN(parseFloat(n))&&isFinite(n)}function u(n,t){for(var r=n.length,u=t.toString().toLowerCase(),i=0;i<r;i++)if(n[i].toLowerCase()===u)return i;return-1}var t,f;n.prototype.setMilliseconds=function(n){this.milliseconds=n};n.prototype.setSeconds=function(n){this.seconds=n};n.prototype.setMinutes=function(n){this.minutes=n};n.prototype.setHours=function(n){this.hours=n};n.prototype.getHours=function(){return this.hours};n.prototype.setDate=function(n){this.day=n};n.prototype.setMonth=function(n){this.month=n};n.prototype.setFullYear=function(n){this.year=n};n.prototype.fromDate=function(n){return this.year=n.getFullYear(),this.month=n.getMonth(),this.day=n.getDate(),this.hours=n.getHours(),this.minutes=n.getMinutes(),this.seconds=n.getSeconds(),this.milliseconds=n.getMilliseconds(),this};n.prototype.toDate=function(){return new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds)};t=n.prototype;f=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function(e,o){return function(s){function p(n){for(var i=Object.keys(l),r=[],u=[],e=n,f,t=0;t<i.length;t++)n.split(i[t]).length>1&&(f=e.search(i[t]),n=n.split(i[t]).join(""),l[i[t]]&&(r[f]=l[i[t]]));return angular.forEach(r,function(n){n&&u.push(n)}),u}function b(n){return n.replace(/\//g,"[\\/]").replace("/-/g","[-]").replace(/\./g,"[.]").replace(/\\s/g,"[\\s]")}function w(n){for(var r=Object.keys(v),i=n,t=0;t<r.length;t++)i=i.split(r[t]).join("${"+t+"}");for(t=0;t<r.length;t++)i=i.split("${"+t+"}").join("("+v[r[t]]+")");return n=b(n),new RegExp("^"+i+"$",["i"])}var c=angular.extend({},f,s),h={},v={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:c.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:c.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:c.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:c.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:e.DATETIME_FORMATS.DAY.join("|"),EEE:e.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:c.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:e.DATETIME_FORMATS.MONTH.join("|"),MMM:e.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:c.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:c.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},l={sss:t.setMilliseconds,ss:t.setSeconds,s:t.setSeconds,mm:t.setMinutes,m:t.setMinutes,HH:t.setHours,H:t.setHours,hh:t.setHours,h:t.setHours,EEEE:i,EEE:i,dd:t.setDate,d:t.setDate,a:function(n){var t=this.getHours()%12;return this.setHours(n.match(/pm/i)?t+12:t)},MMMM:function(n){return this.setMonth(u(e.DATETIME_FORMATS.MONTH,n))},MMM:function(n){return this.setMonth(u(e.DATETIME_FORMATS.SHORTMONTH,n))},MM:function(n){return this.setMonth(1*n-1)},M:function(n){return this.setMonth(1*n-1)},yyyy:t.setFullYear,yy:function(n){return this.setFullYear(2e3+1*n)},y:function(n){return 1*n<=50&&n.length===2?this.setFullYear(2e3+1*n):this.setFullYear(1*n)}},a,y;return h.init=function(){h.$format=e.DATETIME_FORMATS[c.format]||c.format;a=w(h.$format);y=p(h.$format)},h.isValid=function(n){return angular.isDate(n)?!isNaN(n.getTime()):a.test(n)},h.parse=function(t,i,r,u){var s,f,l;r&&(r=e.DATETIME_FORMATS[r]||r);angular.isDate(t)&&(t=o(t,r||h.$format,u));var b=r?w(r):a,v=r?p(r):y,c=b.exec(t);if(!c)return!1;for(s=i&&!isNaN(i.getTime())?(new n).fromDate(i):(new n).fromDate(new Date(1970,0,1,0)),f=0;f<c.length-1;f++)v[f]&&v[f].call(s,c[f+1]);return(l=s.toDate(),parseInt(s.day,10)!==l.getDate())?!1:l},h.getDateForAttribute=function(n,t){var u,i;return t==="today"?(i=new Date,u=new Date(i.getFullYear(),i.getMonth(),i.getDate()+(n==="maxDate"?1:0),0,0,0,n==="minDate"?0:-1)):u=angular.isString(t)&&t.match(/^".+"$/)?new Date(t.substr(1,t.length-2)):r(t)?new Date(parseInt(t,10)):angular.isString(t)&&0===t.length?n==="minDate"?-Infinity:+Infinity:new Date(t),u},h.getTimeForAttribute=function(n,t){return t==="now"?(new Date).setFullYear(1970,0,1):angular.isString(t)&&t.match(/^".+"$/)?new Date(t.substr(1,t.length-2)).setFullYear(1970,0,1):r(t)?new Date(parseInt(t,10)).setFullYear(1970,0,1):angular.isString(t)&&0===t.length?n==="minTime"?-Infinity:+Infinity:h.parse(t,new Date(1970,0,1,0))},h.daylightSavingAdjust=function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},h.timezoneOffsetAdjust=function(n,t,i){return n?(t&&t==="UTC"&&(n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+(i?-1:1)*n.getTimezoneOffset())),n):null},h.init(),h}}]}]);angular.module("mgcrea.ngStrap.helpers.dateFormatter",[]).service("$dateFormatter",["$locale","dateFilter",function(n,t){function i(n){return/(h+)([:\.])?(m+)([:\.])?(s*)[ ]?(a?)/i.exec(n).slice(1)}this.getDefaultLocale=function(){return n.id};this.getDatetimeFormat=function(t){return n.DATETIME_FORMATS[t]||t};this.weekdaysShort=function(){return n.DATETIME_FORMATS.SHORTDAY};this.hoursFormat=function(n){return i(n)[0]};this.minutesFormat=function(n){return i(n)[2]};this.secondsFormat=function(n){return i(n)[4]};this.timeSeparator=function(n){return i(n)[1]};this.showSeconds=function(n){return!!i(n)[4]};this.showAM=function(n){return!!i(n)[5]};this.formatDate=function(n,i,r,u){return t(n,i,u)}}]);angular.module("mgcrea.ngStrap.core",[]).service("$bsCompiler",r);r.$inject=["$q","$http","$injector","$compile","$controller","$templateCache"];angular.module("mgcrea.ngStrap.dropdown",["mgcrea.ngStrap.tooltip"]).provider("$dropdown",function(){var n=this.defaults={animation:"am-fade",prefixClass:"dropdown",prefixEvent:"dropdown",placement:"bottom-left",templateUrl:"dropdown/dropdown.tpl.html",trigger:"click",container:!1,keyboard:!0,html:!1,delay:0};this.$get=["$window","$rootScope","$tooltip","$timeout",function(t,i,r,u){function o(t,o){function l(n){if(n.target!==t[0])return n.target!==t[0]&&s.hide()}var s={},h=angular.extend({},n,o),p=s.$scope=h.scope&&h.scope.$new()||i.$new(),c,a,v,y;return s=r(t,h),c=t.parent(),s.$onKeyDown=function(n){var i,t;/(38|40)/.test(n.keyCode)&&(n.preventDefault(),n.stopPropagation(),i=angular.element(s.$element[0].querySelectorAll("li:not(.divider) a")),i.length)&&(angular.forEach(i,function(n,i){e&&e.call(n,":focus")&&(t=i)}),n.keyCode===38&&t>0?t--:n.keyCode===40&&t<i.length-1?t++:angular.isUndefined(t)&&(t=0),i.eq(t)[0].focus())},a=s.show,s.show=function(){a();u(function(){h.keyboard&&s.$element&&s.$element.on("keydown",s.$onKeyDown);f.on("click",l)},0,!1);c.hasClass("dropdown")&&c.addClass("open")},v=s.hide,s.hide=function(){s.$isShown&&(h.keyboard&&s.$element&&s.$element.off("keydown",s.$onKeyDown),f.off("click",l),c.hasClass("dropdown")&&c.removeClass("open"),v())},y=s.destroy,s.destroy=function(){f.off("click",l);y()},s}var f=angular.element(t.document.body),e=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return o}]}).directive("bsDropdown",["$window","$sce","$dropdown",function(n,t,r){return{restrict:"EAC",scope:!0,compile:function(n,t){var f={},u;if(!t.bsDropdown){for(u=n[0].nextSibling;u&&u.nodeType!==1;)u=u.nextSibling;u.classList.contains("dropdown-menu")&&(f.template=u.outerHTML,f.templateUrl=i,u.parentNode.removeChild(u))}return function(n,i,u){var o,e;f.scope=n;angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","id"],function(n){angular.isDefined(t[n])&&(f[n]=t[n])});o=/^(false|0|)$/i;angular.forEach(["html","container"],function(n){angular.isDefined(u[n])&&o.test(u[n])&&(f[n]=!1)});u.bsDropdown&&n.$watch(u.bsDropdown,function(t){n.content=t},!0);u.bsShow&&n.$watch(u.bsShow,function(n){e&&angular.isDefined(n)&&(angular.isString(n)&&(n=!!n.match(/true|,?(dropdown),?/i)),n===!0?e.show():e.hide())});e=r(i,f);n.$on("$destroy",function(){e&&e.destroy();f=null;e=null})}}}}]);angular.module("mgcrea.ngStrap.datepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$datepicker",function(){var n=this.defaults={animation:"am-fade",prefixClass:"datepicker",placement:"bottom-left",templateUrl:"datepicker/datepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"shortDate",timezone:null,modelDateFormat:null,dayFormat:"dd",monthFormat:"MMM",yearFormat:"yyyy",monthTitleFormat:"MMMM yyyy",yearTitleFormat:"yyyy",strictFormat:!1,autoclose:!1,minDate:-Infinity,maxDate:+Infinity,startView:0,minView:0,startWeek:0,daysOfWeekDisabled:"",iconLeft:"glyphicon glyphicon-chevron-left",iconRight:"glyphicon glyphicon-chevron-right"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","datepickerViews","$tooltip","$timeout",function(t,i,r,u,f,e,o,s){function l(t,i,r){function nt(n){n.selected=u.$isSelected(n.date)}function p(){t[0].focus()}var u=o(t,angular.extend({},n,r)),g=r.scope,l=u.$options,f=u.$scope,y,v,a,w,b,k,d;return l.startView&&(l.startView-=l.minView),y=e(u),u.$views=y.views,v=y.viewDate,f.$mode=l.startView,f.$iconLeft=l.iconLeft,f.$iconRight=l.iconRight,a=u.$views[f.$mode],f.$select=function(n){u.select(n)},f.$selectPane=function(n){u.$selectPane(n)},f.$toggleMode=function(){u.setMode((f.$mode+1)%u.$views.length)},u.update=function(n){angular.isDate(n)&&!isNaN(n.getTime())&&(u.$date=n,a.update.call(a,n));u.$build(!0)},u.updateDisabledDates=function(n){l.disabledDateRanges=n;for(var t=0,i=f.rows.length;t<i;t++)angular.forEach(f.rows[t],u.$setDisabledEl)},u.select=function(n,t){angular.isDate(i.$dateValue)||(i.$dateValue=new Date(n));!f.$mode||t?(i.$setViewValue(angular.copy(n)),i.$render(),l.autoclose&&!t&&s(function(){u.hide(!0)})):(angular.extend(v,{year:n.getFullYear(),month:n.getMonth(),date:n.getDate()}),u.setMode(f.$mode-1),u.$build())},u.setMode=function(n){f.$mode=n;a=u.$views[f.$mode];u.$build()},u.$build=function(n){n===!0&&a.built||(n!==!1||a.built)&&a.build.call(a)},u.$updateSelected=function(){for(var n=0,t=f.rows.length;n<t;n++)angular.forEach(f.rows[n],nt)},u.$isSelected=function(n){return a.isSelected(n)},u.$setDisabledEl=function(n){n.disabled=a.isDisabled(n.date)},u.$selectPane=function(n){var i=a.steps,t=new Date(Date.UTC(v.year+(i.year||0)*n,v.month+(i.month||0)*n,1));angular.extend(v,{year:t.getUTCFullYear(),month:t.getUTCMonth(),date:t.getUTCDate()});u.$build()},u.$onMouseDown=function(n){if(n.preventDefault(),n.stopPropagation(),h){var t=angular.element(n.target);t[0].nodeName.toLowerCase()!=="button"&&(t=t.parent());t.triggerHandler("click")}},u.$onKeyDown=function(n){if(/(38|37|39|40|13)/.test(n.keyCode)&&!n.shiftKey&&!n.altKey){if(n.preventDefault(),n.stopPropagation(),n.keyCode===13){f.$mode?f.$apply(function(){u.setMode(f.$mode-1)}):u.hide(!0);return}a.onKeyDown(n);g.$digest()}},w=u.init,u.init=function(){if(c&&l.useNative){t.prop("type","date");t.css("-webkit-appearance","textfield");return}if(h){t.prop("type","text");t.attr("readonly","true");t.on("click",p)}w()},b=u.destroy,u.destroy=function(){c&&l.useNative&&t.off("click",p);b()},k=u.show,u.show=function(){!h&&t.attr("readonly")||t.attr("disabled")||(k(),s(function(){if(u.$isShown){u.$element.on(h?"touchstart":"mousedown",u.$onMouseDown);if(l.keyboard)t.on("keydown",u.$onKeyDown)}},0,!1))},d=u.hide,u.hide=function(n){u.$isShown&&(u.$element.off(h?"touchstart":"mousedown",u.$onMouseDown),l.keyboard&&t.off("keydown",u.$onKeyDown),d(n))},u}var c=/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent),h="createTouch"in t.document&&c;return n.lang||(n.lang=f.getDefaultLocale()),l.defaults=n,l}]}).directive("bsDatepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$datepicker",function(n,t,i,r,u,f){var o=f.defaults,e=/(ip(a|o)d|iphone|android)/gi.test(n.navigator.userAgent);return{restrict:"EAC",require:"ngModel",link:function(n,t,i,o){function y(n){return!n||!n.length?null:n}function p(n){if(angular.isDate(n)){var t=isNaN(h.$options.minDate)||n.getTime()>=h.$options.minDate,i=isNaN(h.$options.maxDate)||n.getTime()<=h.$options.maxDate,r=t&&i;o.$setValidity("date",r);o.$setValidity("min",t);o.$setValidity("max",i);r&&(o.$dateValue=n)}}function w(){return!o.$dateValue||isNaN(o.$dateValue.getTime())?"":v(o.$dateValue,s.dateFormat)}var s={scope:n},l,h;angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","html","animation","autoclose","dateType","dateFormat","timezone","modelDateFormat","dayFormat","strictFormat","startWeek","startDate","useNative","lang","startView","minView","iconLeft","iconRight","daysOfWeekDisabled","id","prefixClass","prefixEvent"],function(n){angular.isDefined(i[n])&&(s[n]=i[n])});l=/^(false|0|)$/i;angular.forEach(["html","container","autoclose","useNative"],function(n){angular.isDefined(i[n])&&l.test(i[n])&&(s[n]=!1)});h=f(t,o,s);s=h.$options;e&&s.useNative&&(s.dateFormat="yyyy-MM-dd");var a=s.lang,v=function(n,t){return r.formatDate(n,t,a)},c=u({format:s.dateFormat,lang:a,strict:s.strictFormat});i.bsShow&&n.$watch(i.bsShow,function(n){h&&angular.isDefined(n)&&(angular.isString(n)&&(n=!!n.match(/true|,?(datepicker),?/i)),n===!0?h.show():h.hide())});angular.forEach(["minDate","maxDate"],function(n){angular.isDefined(i[n])&&i.$observe(n,function(t){h.$options[n]=c.getDateForAttribute(n,t);isNaN(h.$options[n])||h.$build(!1);p(o.$dateValue)})});angular.isDefined(i.dateFormat)&&i.$observe("dateFormat",function(n){h.$options.dateFormat=n});n.$watch(i.ngModel,function(){h.update(o.$dateValue)},!0);angular.isDefined(i.disabledDates)&&n.$watch(i.disabledDates,function(n,t){n=y(n);t=y(t);n&&h.updateDisabledDates(n)});o.$parsers.unshift(function(n){var t,i;if(!n)return o.$setValidity("date",!0),null;if(i=c.parse(n,o.$dateValue),!i||isNaN(i.getTime())){o.$setValidity("date",!1);return}return(p(i),s.dateType==="string")?(t=c.timezoneOffsetAdjust(i,s.timezone,!0),v(t,s.modelDateFormat||s.dateFormat)):(t=c.timezoneOffsetAdjust(o.$dateValue,s.timezone,!0),s.dateType==="number"?t.getTime():s.dateType==="unix"?t.getTime()/1e3:s.dateType==="iso"?t.toISOString():new Date(t))});o.$formatters.push(function(n){var t;return t=angular.isUndefined(n)||n===null?NaN:angular.isDate(n)?n:s.dateType==="string"?c.parse(n,null,s.modelDateFormat):s.dateType==="unix"?new Date(n*1e3):new Date(n),o.$dateValue=c.timezoneOffsetAdjust(t,s.timezone),w()});o.$render=function(){t.val(w())};n.$on("$destroy",function(){h&&h.destroy();s=null;h=null})}}}]).provider("datepickerViews",function(){function n(n,t){for(var i=[];n.length>0;)i.push(n.splice(0,t));return i}function t(n,t){return(n%t+t)%t}var i=this.defaults={dayFormat:"dd",daySplit:7};this.$get=["$dateFormatter","$dateParser","$sce",function(i,r,u){return function(f){var s=f.$scope,e=f.$options,c=e.lang,h=function(n,t){return i.formatDate(n,t,c)},l=r({format:e.dateFormat,lang:c,strict:e.strictFormat}),v=i.weekdaysShort(c),p=v.slice(e.startWeek).concat(v.slice(0,e.startWeek)),w=u.trustAsHtml('<th class="dow text-center">'+p.join('<\/th><th class="dow text-center">')+"<\/th>"),a=f.$date||(e.startDate?l.getDateForAttribute("startDate",e.startDate):new Date),o={year:a.getFullYear(),month:a.getMonth(),date:a.getDate()},y=[{format:e.dayFormat,split:7,steps:{month:1},update:function(n,t){!this.built||t||n.getFullYear()!==o.year||n.getMonth()!==o.month?(angular.extend(o,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$build()):(n.getDate()!==o.date||n.getDate()===1)&&(o.date=f.$date.getDate(),f.$updateSelected())},build:function(){var u=new Date(o.year,o.month,1),v=u.getTimezoneOffset(),r=new Date(+u-t(u.getDay()-e.startWeek,7)*864e5),y=r.getTimezoneOffset(),p=l.timezoneOffsetAdjust(new Date,e.timezone).toDateString(),a,i,c;for(y!==v&&(r=new Date(+r+(y-v)*6e4)),a=[],c=0;c<42;c++)i=l.daylightSavingAdjust(new Date(r.getFullYear(),r.getMonth(),r.getDate()+c)),a.push({date:i,isToday:i.toDateString()===p,label:h(i,this.format),selected:f.$date&&this.isSelected(i),muted:i.getMonth()!==o.month,disabled:this.isDisabled(i)});s.title=h(u,e.monthTitleFormat);s.showLabels=!0;s.labels=w;s.rows=n(a,this.split);this.built=!0},isSelected:function(n){return f.$date&&n.getFullYear()===f.$date.getFullYear()&&n.getMonth()===f.$date.getMonth()&&n.getDate()===f.$date.getDate()},isDisabled:function(n){var i=n.getTime(),t;if(i<e.minDate||i>e.maxDate||e.daysOfWeekDisabled.indexOf(n.getDay())!==-1)return!0;if(e.disabledDateRanges)for(t=0;t<e.disabledDateRanges.length;t++)if(i>=e.disabledDateRanges[t].start&&i<=e.disabledDateRanges[t].end)return!0;return!1},onKeyDown:function(n){if(f.$date){var i=f.$date.getTime(),t;n.keyCode===37?t=new Date(i-864e5):n.keyCode===38?t=new Date(i-6048e5):n.keyCode===39?t=new Date(i+864e5):n.keyCode===40&&(t=new Date(i+6048e5));this.isDisabled(t)||f.select(t,!0)}}},{name:"month",format:e.monthFormat,split:4,steps:{year:1},update:function(n){this.built&&n.getFullYear()===o.year?n.getMonth()!==o.month&&(angular.extend(o,{month:f.$date.getMonth(),date:f.$date.getDate()}),f.$updateSelected()):(angular.extend(o,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$build())},build:function(){for(var u=new Date(o.year,0,1),r=[],t,i=0;i<12;i++)t=new Date(o.year,i,1),r.push({date:t,label:h(t,this.format),selected:f.$isSelected(t),disabled:this.isDisabled(t)});s.title=h(t,e.yearTitleFormat);s.showLabels=!1;s.rows=n(r,this.split);this.built=!0},isSelected:function(n){return f.$date&&n.getFullYear()===f.$date.getFullYear()&&n.getMonth()===f.$date.getMonth()},isDisabled:function(n){var t=+new Date(n.getFullYear(),n.getMonth()+1,0);return t<e.minDate||n.getTime()>e.maxDate},onKeyDown:function(n){if(f.$date){var i=f.$date.getMonth(),t=new Date(f.$date);n.keyCode===37?t.setMonth(i-1):n.keyCode===38?t.setMonth(i-4):n.keyCode===39?t.setMonth(i+1):n.keyCode===40&&t.setMonth(i+4);this.isDisabled(t)||f.select(t,!0)}}},{name:"year",format:e.yearFormat,split:4,steps:{year:12},update:function(n,t){!this.built||t||parseInt(n.getFullYear()/20,10)!==parseInt(o.year/20,10)?(angular.extend(o,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$build()):n.getFullYear()!==o.year&&(angular.extend(o,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$updateSelected())},build:function(){for(var u=o.year-o.year%(this.split*3),t=[],i,r=0;r<12;r++)i=new Date(u+r,0,1),t.push({date:i,label:h(i,this.format),selected:f.$isSelected(i),disabled:this.isDisabled(i)});s.title=t[0].label+"-"+t[t.length-1].label;s.showLabels=!1;s.rows=n(t,this.split);this.built=!0},isSelected:function(n){return f.$date&&n.getFullYear()===f.$date.getFullYear()},isDisabled:function(n){var t=+new Date(n.getFullYear()+1,0,0);return t<e.minDate||n.getTime()>e.maxDate},onKeyDown:function(n){if(f.$date){var i=f.$date.getFullYear(),t=new Date(f.$date);n.keyCode===37?t.setYear(i-1):n.keyCode===38?t.setYear(i-4):n.keyCode===39?t.setYear(i+1):n.keyCode===40&&t.setYear(i+4);this.isDisabled(t)||f.select(t,!0)}}}];return{views:e.minView?Array.prototype.slice.call(y,e.minView):y,viewDate:o}}}]});angular.module("mgcrea.ngStrap.collapse",[]).provider("$collapse",function(){var n=this.defaults={animation:"am-collapse",disallowToggle:!1,activeClass:"in",startCollapsed:!1,allowMultiple:!1},t=this.controller=function(t,i,r){function s(n){for(var i=u.$targets.$active,t=0;t<i.length;t++)n<i[t]&&(i[t]=i[t]-1),i[t]===u.$targets.length&&(i[t]=u.$targets.length-1)}function h(n){var t=u.$targets.$active;return t.indexOf(n)===-1?!1:!0}function e(n){var t=u.$targets.$active.indexOf(n);t!==-1&&u.$targets.$active.splice(t,1)}function o(n){u.$options.allowMultiple||u.$targets.$active.splice(0,1);u.$targets.$active.indexOf(n)===-1&&u.$targets.$active.push(n)}var u=this,f;u.$options=angular.copy(n);angular.forEach(["animation","disallowToggle","activeClass","startCollapsed","allowMultiple"],function(n){angular.isDefined(r[n])&&(u.$options[n]=r[n])});f=/^(false|0|)$/i;angular.forEach(["disallowToggle","startCollapsed","allowMultiple"],function(n){angular.isDefined(r[n])&&f.test(r[n])&&(u.$options[n]=!1)});u.$toggles=[];u.$targets=[];u.$viewChangeListeners=[];u.$registerToggle=function(n){u.$toggles.push(n)};u.$registerTarget=function(n){u.$targets.push(n)};u.$unregisterToggle=function(n){var t=u.$toggles.indexOf(n);u.$toggles.splice(t,1)};u.$unregisterTarget=function(n){var t=u.$targets.indexOf(n);u.$targets.splice(t,1);u.$options.allowMultiple&&e(n);s(t);u.$viewChangeListeners.forEach(function(n){n()})};u.$targets.$active=u.$options.startCollapsed?[]:[0];u.$setActive=t.$setActive=function(n){angular.isArray(n)?u.$targets.$active=n:u.$options.disallowToggle?o(n):h(n)?e(n):o(n);u.$viewChangeListeners.forEach(function(n){n()})};u.$activeIndexes=function(){return u.$options.allowMultiple?u.$targets.$active:u.$targets.$active.length===1?u.$targets.$active[0]:-1}};this.$get=function(){var i={};return i.defaults=n,i.controller=t,i}}).directive("bsCollapse",["$window","$animate","$collapse",function(n,t,i){var r=i.defaults;return{require:["?ngModel","bsCollapse"],controller:["$scope","$element","$attrs",i.controller],link:function(n,t,i,r){var f=r[0],u=r[1];f&&(u.$viewChangeListeners.push(function(){f.$setViewValue(u.$activeIndexes())}),f.$formatters.push(function(n){if(angular.isArray(n))u.$setActive(n);else{var t=u.$activeIndexes();angular.isArray(t)?t.indexOf(n*1)===-1&&u.$setActive(n*1):t!==n*1&&u.$setActive(n*1)}return n}))}}}]).directive("bsCollapseToggle",function(){return{require:["^?ngModel","^bsCollapse"],link:function(n,t,i,r){var f=r[0],u=r[1];t.attr("data-toggle","collapse");u.$registerToggle(t);n.$on("$destroy",function(){u.$unregisterToggle(t)});t.on("click",function(){var r=i.bsCollapseToggle&&i.bsCollapseToggle!=="bs-collapse-toggle"?i.bsCollapseToggle:u.$toggles.indexOf(t);u.$setActive(r*1);n.$apply()})}}}).directive("bsCollapseTarget",["$animate",function(n){return{require:["^?ngModel","^bsCollapse"],link:function(t,i,r,u){function e(){var u=f.$targets.indexOf(i),t=f.$activeIndexes(),r="removeClass";angular.isArray(t)?t.indexOf(u)!==-1&&(r="addClass"):u===t&&(r="addClass");n[r](i,f.$options.activeClass)}var o=u[0],f=u[1];i.addClass("collapse");f.$options.animation&&i.addClass(f.$options.animation);f.$registerTarget(i);t.$on("$destroy",function(){f.$unregisterTarget(i)});f.$viewChangeListeners.push(function(){e()});e()}}}]);angular.module("mgcrea.ngStrap.button",[]).provider("$button",function(){var n=this.defaults={activeClass:"active",toggleEvent:"click"};this.$get=function(){return{defaults:n}}}).directive("bsCheckboxGroup",function(){return{restrict:"A",require:"ngModel",compile:function(n,t){n.attr("data-toggle","buttons");n.removeAttr("ng-model");var i=n[0].querySelectorAll('input[type="checkbox"]');angular.forEach(i,function(n){var i=angular.element(n);i.attr("bs-checkbox","");i.attr("ng-model",t.ngModel+"."+i.attr("value"))})}}}).directive("bsCheckbox",["$button","$$rAF",function(n,t){var r=n.defaults,i=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(n,u,f,e){var l=r,h=u[0].nodeName==="INPUT",a=h?u.parent():u,o=angular.isDefined(f.trueValue)?f.trueValue:!0,s,c;i.test(f.trueValue)&&(o=n.$eval(f.trueValue));s=angular.isDefined(f.falseValue)?f.falseValue:!1;i.test(f.falseValue)&&(s=n.$eval(f.falseValue));c=typeof o!="boolean"||typeof s!="boolean";c&&(e.$parsers.push(function(n){return n?o:s}),e.$formatters.push(function(n){return angular.equals(n,o)}),n.$watch(f.ngModel,function(){e.$render()}));e.$render=function(){var n=angular.equals(e.$modelValue,o);t(function(){h&&(u[0].checked=n);a.toggleClass(l.activeClass,n)})};u.bind(l.toggleEvent,function(){n.$apply(function(){h||e.$setViewValue(!a.hasClass("active"));c||e.$render()})})}}}]).directive("bsRadioGroup",function(){return{restrict:"A",require:"ngModel",compile:function(n,t){n.attr("data-toggle","buttons");n.removeAttr("ng-model");var i=n[0].querySelectorAll('input[type="radio"]');angular.forEach(i,function(n){angular.element(n).attr("bs-radio","");angular.element(n).attr("ng-model",t.ngModel)})}}}).directive("bsRadio",["$button","$$rAF",function(n,t){var i=n.defaults,r=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(n,u,f,e){var s=i,h=u[0].nodeName==="INPUT",c=h?u.parent():u,o;f.$observe("value",function(t){o=r.test(t)?n.$eval(t):t;e.$render()});e.$render=function(){var n=angular.equals(e.$modelValue,o);t(function(){h&&(u[0].checked=n);c.toggleClass(s.activeClass,n)})};u.bind(s.toggleEvent,function(){n.$apply(function(){e.$setViewValue(o);e.$render()})})}}}]);angular.module("mgcrea.ngStrap.aside",["mgcrea.ngStrap.modal"]).provider("$aside",function(){var n=this.defaults={animation:"am-fade-and-slide-right",prefixClass:"aside",prefixEvent:"aside",placement:"right",templateUrl:"aside/aside.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$modal",function(t){function i(i){var r=angular.extend({},n,i);return t(r)}return i}]}).directive("bsAside",["$window","$sce","$aside",function(n,t,i){var r=n.requestAnimationFrame||n.setTimeout;return{restrict:"EAC",scope:!0,link:function(n,r,u){var e={scope:n,element:r,show:!1},o,f;angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(n){angular.isDefined(u[n])&&(e[n]=u[n])});o=/^(false|0|)$/i;angular.forEach(["backdrop","keyboard","html","container"],function(n){angular.isDefined(u[n])&&o.test(u[n])&&(e[n]=!1)});angular.forEach(["title","content"],function(i){u[i]&&u.$observe(i,function(r){n[i]=t.trustAsHtml(r)})});u.bsAside&&n.$watch(u.bsAside,function(t){angular.isObject(t)?angular.extend(n,t):n.content=t},!0);f=i(e);r.on(u.trigger||"click",f.toggle);n.$on("$destroy",function(){f&&f.destroy();e=null;f=null})}}}]);angular.module("mgcrea.ngStrap.alert",["mgcrea.ngStrap.modal"]).provider("$alert",function(){var n=this.defaults={animation:"am-fade",prefixClass:"alert",prefixEvent:"alert",placement:null,templateUrl:"alert/alert.tpl.html",container:!1,element:null,backdrop:!1,keyboard:!0,show:!0,duration:!1,type:!1,dismissable:!0};this.$get=["$modal","$timeout",function(t,i){function r(r){var u={},f=angular.extend({},n,r),e;return u=t(f),u.$scope.dismissable=!!f.dismissable,f.type&&(u.$scope.type=f.type),e=u.show,f.duration&&(u.show=function(){e();i(function(){u.hide()},f.duration*1e3)}),u}return r}]}).directive("bsAlert",["$window","$sce","$alert",function(n,t,i){var r=n.requestAnimationFrame||n.setTimeout;return{restrict:"EAC",scope:!0,link:function(n,r,u){var e={scope:n,element:r,show:!1},o,f;angular.forEach(["template","templateUrl","controller","controllerAs","placement","keyboard","html","container","animation","duration","dismissable"],function(n){angular.isDefined(u[n])&&(e[n]=u[n])});o=/^(false|0|)$/i;angular.forEach(["keyboard","html","container","dismissable"],function(n){angular.isDefined(u[n])&&o.test(u[n])&&(e[n]=!1)});n.hasOwnProperty("title")||(n.title="");angular.forEach(["title","content","type"],function(i){u[i]&&u.$observe(i,function(r){n[i]=t.trustAsHtml(r)})});u.bsAlert&&n.$watch(u.bsAlert,function(t){angular.isObject(t)?angular.extend(n,t):n.content=t},!0);f=i(e);r.on(u.trigger||"click",f.toggle);n.$on("$destroy",function(){f&&f.destroy();e=null;f=null})}}}]);angular.module("mgcrea.ngStrap.affix",["mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.helpers.debounce"]).provider("$affix",function(){var n=this.defaults={offsetTop:"auto",inlineStyles:!0};this.$get=["$window","debounce","dimensions",function(t,i,r){function e(e,o){function it(n,t,i){var r=g(),u=nt();return r<=w?"top":n!==null&&r+n<=t.top?"middle":a!==null&&t.top+i+p>=u-a?"bottom":"middle"}function g(){return c[0]===t?t.pageYOffset:c[0].scrollTop}function nt(){return c[0]===t?t.document.body.scrollHeight:c[0].scrollHeight}var h={},s=angular.extend({},n,o),c=s.target,tt="affix affix-top affix-bottom",y=!1,p=0,k=0,w=0,a=0,d=null,v=null,l=e.parent(),b;if(s.offsetParent)if(s.offsetParent.match(/^\d+$/))for(b=0;b<s.offsetParent*1-1;b++)l=l.parent();else l=angular.element(s.offsetParent);return h.init=function(){this.$parseOffsets();k=r.offset(e[0]).top+p;y=!e[0].style.width;c.on("scroll",this.checkPosition);c.on("click",this.checkPositionWithEventLoop);u.on("resize",this.$debouncedOnResize);this.checkPosition();this.checkPositionWithEventLoop()},h.destroy=function(){c.off("scroll",this.checkPosition);c.off("click",this.checkPositionWithEventLoop);u.off("resize",this.$debouncedOnResize)},h.checkPositionWithEventLoop=function(){setTimeout(h.checkPosition,1)},h.checkPosition=function(){var u=g(),t=r.offset(e[0]),i=r.height(e[0]),n=it(v,t,i);d!==n&&(d=n,n==="top"?(v=null,y&&e.css("width",""),s.inlineStyles&&(e.css("position",s.offsetParent?"":"relative"),e.css("top",""))):n==="bottom"?(v=s.offsetUnpin?-(s.offsetUnpin*1):t.top-u,y&&e.css("width",""),s.inlineStyles&&(e.css("position",s.offsetParent?"":"relative"),e.css("top",s.offsetParent?"":f[0].offsetHeight-a-i-k+"px"))):(v=null,y&&e.css("width",e[0].offsetWidth+"px"),s.inlineStyles&&(e.css("position","fixed"),e.css("top",p+"px"))),e.removeClass(tt).addClass("affix"+(n!=="middle"?"-"+n:"")))},h.$onResize=function(){h.$parseOffsets();h.checkPosition()},h.$debouncedOnResize=i(h.$onResize,50),h.$parseOffsets=function(){var n=e.css("position");s.inlineStyles&&e.css("position",s.offsetParent?"":"relative");s.offsetTop&&(s.offsetTop==="auto"&&(s.offsetTop="+0"),s.offsetTop.match(/^[-+]\d+$/)?(p=-s.offsetTop*1,w=s.offsetParent?r.offset(l[0]).top+s.offsetTop*1:r.offset(e[0]).top-r.css(e[0],"marginTop",!0)+s.offsetTop*1):w=s.offsetTop*1);s.offsetBottom&&(a=s.offsetParent&&s.offsetBottom.match(/^[-+]\d+$/)?nt()-(r.offset(l[0]).top+r.height(l[0]))+s.offsetBottom*1+1:s.offsetBottom*1);s.inlineStyles&&e.css("position",n)},h.init(),h}var f=angular.element(t.document.body),u=angular.element(t);return e}]}).directive("bsAffix",["$affix","$window",function(n,t){return{restrict:"EAC",require:"^?bsAffixTarget",link:function(i,r,u,f){var o={scope:i,target:f?f.$element:angular.element(t)},e;angular.forEach(["offsetTop","offsetBottom","offsetParent","offsetUnpin","inlineStyles"],function(n){if(angular.isDefined(u[n])){var t=u[n];/true/i.test(t)&&(t=!0);/false/i.test(t)&&(t=!1);o[n]=t}});e=n(r,o);i.$on("$destroy",function(){e&&e.destroy();o=null;e=null})}}}]).directive("bsAffixTarget",function(){return{controller:["$element",function(n){this.$element=n}]}});angular.module("mgcrea.ngStrap",["mgcrea.ngStrap.modal","mgcrea.ngStrap.aside","mgcrea.ngStrap.alert","mgcrea.ngStrap.button","mgcrea.ngStrap.select","mgcrea.ngStrap.datepicker","mgcrea.ngStrap.timepicker","mgcrea.ngStrap.navbar","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover","mgcrea.ngStrap.dropdown","mgcrea.ngStrap.typeahead","mgcrea.ngStrap.scrollspy","mgcrea.ngStrap.affix","mgcrea.ngStrap.tab","mgcrea.ngStrap.collapse"])})(window,document);
(function(){"use strict";angular.module("mgcrea.ngStrap.alert").run(["$templateCache",function(n){n.put("alert/alert.tpl.html",'<div class="alert" ng-class="[type ? \'alert-\' + type : null]"><button type="button" class="close" ng-if="dismissable" ng-click="$hide()">&times;<\/button> <strong ng-bind="title"><\/strong>&nbsp;<span ng-bind-html="content"><\/span><\/div>')}]);angular.module("mgcrea.ngStrap.aside").run(["$templateCache",function(n){n.put("aside/aside.tpl.html",'<div class="aside" tabindex="-1" role="dialog"><div class="aside-dialog"><div class="aside-content"><div class="aside-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;<\/button><h4 class="aside-title" ng-bind="title"><\/h4><\/div><div class="aside-body" ng-bind="content"><\/div><div class="aside-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close<\/button><\/div><\/div><\/div><\/div>')}]);angular.module("mgcrea.ngStrap.datepicker").run(["$templateCache",function(n){n.put("datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px"><table style="table-layout: fixed; height: 100%; width: 100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)"><i class="{{$iconLeft}}"><\/i><\/button><\/th><th colspan="{{ rows[0].length - 2 }}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong" ng-click="$toggleMode()"><strong style="text-transform: capitalize" ng-bind="title"><\/strong><\/button><\/th><th><button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)"><i class="{{$iconRight}}"><\/i><\/button><\/th><\/tr><tr ng-if="showLabels" ng-bind-html="labels"><\/tr><\/thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"><\/span><\/button><\/td><\/tr><\/tbody><\/table><\/div>')}]);angular.module("mgcrea.ngStrap.dropdown").run(["$templateCache",function(n){n.put("dropdown/dropdown.tpl.html",'<ul tabindex="-1" class="dropdown-menu" role="menu" ng-show="content && content.length"><li role="presentation" ng-class="{divider: item.divider}" ng-repeat="item in content"><a role="menuitem" tabindex="-1" ng-href="{{item.href}}" ng-if="!item.divider && item.href" target="{{item.target || \'\'}}" ng-bind="item.text"><\/a> <a role="menuitem" tabindex="-1" href="javascript:void(0)" ng-if="!item.divider && item.click" ng-click="$eval(item.click);$hide()" ng-bind="item.text"><\/a><\/li><\/ul>')}]);angular.module("mgcrea.ngStrap.modal").run(["$templateCache",function(n){n.put("modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" aria-label="Close" ng-click="$hide()"><span aria-hidden="true">&times;<\/span><\/button><h4 class="modal-title" ng-bind="title"><\/h4><\/div><div class="modal-body" ng-bind="content"><\/div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close<\/button><\/div><\/div><\/div><\/div>')}]);angular.module("mgcrea.ngStrap.popover").run(["$templateCache",function(n){n.put("popover/popover.tpl.html",'<div class="popover" tabindex="-1"><div class="arrow"><\/div><h3 class="popover-title" ng-bind="title" ng-show="title"><\/h3><div class="popover-content" ng-bind="content"><\/div><\/div>')}]);angular.module("mgcrea.ngStrap.select").run(["$templateCache",function(n){n.put("select/select.tpl.html",'<ul tabindex="-1" class="select dropdown-menu" ng-show="$isVisible()" role="select"><li ng-if="$showAllNoneButtons"><div class="btn-group" style="margin-bottom: 5px; margin-left: 5px"><button type="button" class="btn btn-default btn-xs" ng-click="$selectAll()">{{$allText}}<\/button> <button type="button" class="btn btn-default btn-xs" ng-click="$selectNone()">{{$noneText}}<\/button><\/div><\/li><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $isActive($index)}"><a style="cursor: default" role="menuitem" tabindex="-1" ng-click="$select($index, $event)"><i class="{{$iconCheckmark}} pull-right" ng-if="$isMultiple && $isActive($index)"><\/i> <span ng-bind="match.label"><\/span><\/a><\/li><\/ul>')}]);angular.module("mgcrea.ngStrap.tab").run(["$templateCache",function(n){n.put("tab/tab.tpl.html",'<ul class="nav" ng-class="$navClass" role="tablist"><li role="presentation" ng-repeat="$pane in $panes track by $index" ng-class="[ $isActive($pane, $index) ? $activeClass : \'\', $pane.disabled ? \'disabled\' : \'\' ]"><a role="tab" data-toggle="tab" ng-click="!$pane.disabled && $setActive($pane.name || $index)" data-index="{{ $index }}" ng-bind-html="$pane.title" aria-controls="$pane.title"><\/a><\/li><\/ul><div ng-transclude class="tab-content"><\/div>')}]);angular.module("mgcrea.ngStrap.timepicker").run(["$templateCache",function(n){n.put("timepicker/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto"><table height="100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)"><i class="{{ $iconUp }}"><\/i><\/button><\/th><th>&nbsp;<\/th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)"><i class="{{ $iconUp }}"><\/i><\/button><\/th><th>&nbsp;<\/th><th><button ng-if="showSeconds" tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 2)"><i class="{{ $iconUp }}"><\/i><\/button><\/th><\/tr><\/thead><tbody><tr ng-repeat="(i, row) in rows"><td class="text-center"><button tabindex="-1" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled="row[0].disabled"><span ng-class="{\'text-muted\': row[0].muted}" ng-bind="row[0].label"><\/span><\/button><\/td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"><\/span><\/td><td class="text-center"><button tabindex="-1" ng-if="row[1].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled="row[1].disabled"><span ng-class="{\'text-muted\': row[1].muted}" ng-bind="row[1].label"><\/span><\/button><\/td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"><\/span><\/td><td class="text-center"><button tabindex="-1" ng-if="showSeconds && row[2].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[2].selected}" ng-click="$select(row[2].date, 2)" ng-disabled="row[2].disabled"><span ng-class="{\'text-muted\': row[2].muted}" ng-bind="row[2].label"><\/span><\/button><\/td><td ng-if="showAM">&nbsp;<\/td><td ng-if="showAM"><button tabindex="-1" ng-show="i == midIndex - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">AM<\/button> <button tabindex="-1" ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">PM<\/button><\/td><\/tr><\/tbody><tfoot><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)"><i class="{{ $iconDown }}"><\/i><\/button><\/th><th>&nbsp;<\/th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)"><i class="{{ $iconDown }}"><\/i><\/button><\/th><th>&nbsp;<\/th><th><button ng-if="showSeconds" tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 2)"><i class="{{ $iconDown }}"><\/i><\/button><\/th><\/tr><\/tfoot><\/table><\/div>')}]);angular.module("mgcrea.ngStrap.tooltip").run(["$templateCache",function(n){n.put("tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"><\/div><div class="tooltip-inner" ng-bind="title"><\/div><\/div>')}]);angular.module("mgcrea.ngStrap.typeahead").run(["$templateCache",function(n){n.put("typeahead/typeahead.tpl.html",'<ul tabindex="-1" class="typeahead dropdown-menu" ng-show="$isVisible()" role="select"><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}"><a role="menuitem" tabindex="-1" ng-click="$select($index, $event)" ng-bind="match.label"><\/a><\/li><\/ul>')}])})(window,document),function(n,t,i){"use strict";function d(n){var i=[];return o(i,t.noop).chars(n),i.join("")}function r(n,i){for(var f={},u=n.split(","),r=0;r<u.length;r++)f[i?t.lowercase(u[r]):u[r]]=!0;return f}function g(n,i){function k(n,r,e,s){if(r=t.lowercase(r),v[r])for(;f.last()&&y[f.last()];)o("",f.last());a[r]&&f.last()==r&&o("",r);(s=l[r]||!!s)||f.push(r);var h={};e.replace(tt,function(n,t,i,r,f){h[t]=u(i||r||f||"")});i.start&&i.start(r,h,s)}function o(n,r){var u=0,e;if(r=t.lowercase(r))for(u=f.length-1;0<=u&&f[u]!=r;u--);if(0<=u){for(e=f.length-1;e>=u;e--)i.end&&i.end(f[e]);f.length=u}}"string"!=typeof n&&(n=null===n||"undefined"==typeof n?"":""+n);var r,e,f=[],b=n,w;for(f.last=function(){return f[f.length-1]};n;){if(w="",e=!0,f.last()&&p[f.last()]?(n=n.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+f.last()+"[^>]*>","i"),function(n,t){return t=t.replace(ut,"$1").replace(ft,"$1"),i.chars&&i.chars(u(t)),""}),o("",f.last())):(0===n.indexOf("<!--")?(r=n.indexOf("--",4),0<=r&&n.lastIndexOf("-->",r)===r&&(i.comment&&i.comment(n.substring(4,r)),n=n.substring(r+3),e=!1)):c.test(n)?(r=n.match(c))&&(n=n.replace(r[0],""),e=!1):rt.test(n)?(r=n.match(h))&&(n=n.substring(r[0].length),r[0].replace(h,o),e=!1):it.test(n)&&((r=n.match(s))?(r[4]&&(n=n.substring(r[0].length),r[0].replace(s,k)),e=!1):(w+="<",n=n.substring(1))),e&&(r=n.indexOf("<"),w+=0>r?n:n.substring(0,r),n=0>r?"":n.substring(r),i.chars&&i.chars(u(w)))),n==b)throw nt("badparse",n);b=n}o()}function u(n){return n?(f.innerHTML=n.replace(/</g,"&lt;"),f.textContent):""}function e(n){return n.replace(/&/g,"&amp;").replace(et,function(n){var t=n.charCodeAt(0);return n=n.charCodeAt(1),"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(ot,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(n,i){var u=!1,r=t.bind(n,n.push);return{start:function(n,f,o){n=t.lowercase(n);!u&&p[n]&&(u=n);u||!0!==w[n]||(r("<"),r(n),t.forEach(f,function(u,f){var o=t.lowercase(f),s="img"===n&&"src"===o||"background"===o;!0===k[o]&&(!0!==b[o]||i(u,s))&&(r(" "),r(f),r('="'),r(e(u)),r('"'))}),r(o?"/>":">"))},end:function(n){n=t.lowercase(n);u||!0!==w[n]||(r("<\/"),r(n),r(">"));n==u&&(u=!1)},chars:function(n){u||r(e(n))}}}var nt=t.$$minErr("$sanitize"),s=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,h=/^<\/\s*([\w:-]+)[^>]*>/,tt=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,it=/^</,rt=/^<\//,ut=/\x3c!--(.*?)--\x3e/g,c=/<!DOCTYPE([^>]*?)>/i,ft=/<!\[CDATA\[(.*?)]]\x3e/g,et=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ot=/([^\#-~| |!])/g,l=r("area,br,col,hr,img,wbr"),k,f;n=r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");i=r("rp,rt");var a=t.extend({},i,n),v=t.extend({},n,r("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),y=t.extend({},i,r("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));n=r("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use");var p=r("script,style"),w=t.extend({},l,v,y,a,n),b=r("background,cite,href,longdesc,src,usemap,xlink:href");n=r("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width");i=r("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0);k=t.extend({},b,i,n);f=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(n){return function(t){var i=[];return g(t,o(i,function(t,i){return!/^unsafe/.test(n(t,i))})),i.join("")}}]});t.module("ngSanitize").filter("linky",["$sanitize",function(n){var i=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i;return function(u,f){function c(n){n&&o.push(d(n))}function a(n,i){o.push("<a ");t.isDefined(f)&&o.push('target="',f,'" ');o.push('href="',n.replace(/"/g,"&quot;"),'">');c(i);o.push("<\/a>")}if(!u)return u;for(var e,s=u,o=[],h,l;e=s.match(i);)h=e[0],e[2]||e[4]||(h=(e[3]?"http://":"mailto:")+h),l=e.index,c(s.substr(0,l)),a(h,e[0].replace(r,"")),s=s.substring(l+e[0].length);return c(s),n(o.join(""))}}])}(window,window.angular);
!function(n,t){"use strict";return"function"==typeof define&&define.amd?void define(["angular"],function(n){return t(n)}):t(n)}(angular||null,function(n){"use strict";var t=n.module("ngTable",[]),i;return t.value("ngTableDefaults",{params:{},settings:{}}),t.factory("ngTableParams",["$q","$log","ngTableDefaults",function(t,i,r){var u=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};return function(f,e){var c=this,h=function(){o.debugMode&&i.debug&&i.debug.apply(this,arguments)},s,o;return this.data=[],this.parameters=function(t,i){var r,e,l,o;if(i=i||!1,n.isDefined(t)){for(r in t)if(e=t[r],i&&r.indexOf("[")>=0){for(var a=r.split(/\[(.*)\]/).reverse(),f="",c=0,v=a.length;v>c;c++)l=a[c],""!==l&&(o=e,e={},e[f=l]=u(o)?parseFloat(o):o);"sorting"===f&&(s[f]={});s[f]=n.extend(s[f]||{},e[f])}else s[r]=u(t[r])?parseFloat(t[r]):t[r];return h("ngTable: set parameters",s),this}return s},this.settings=function(t){return n.isDefined(t)?(n.isArray(t.data)&&(t.total=t.data.length),o=n.extend(o,t),h("ngTable: set settings",o),this):o},this.page=function(t){return n.isDefined(t)?this.parameters({page:t}):s.page},this.total=function(t){return n.isDefined(t)?this.settings({total:t}):o.total},this.count=function(t){return n.isDefined(t)?this.parameters({count:t,page:1}):s.count},this.filter=function(t){return n.isDefined(t)?this.parameters({filter:t,page:1}):s.filter},this.sorting=function(t){if(2==arguments.length){var i={};return i[t]=arguments[1],this.parameters({sorting:i}),this}return n.isDefined(t)?this.parameters({sorting:t}):s.sorting},this.isSortBy=function(t,i){return n.isDefined(s.sorting[t])&&n.equals(s.sorting[t],i)},this.orderBy=function(){var n=[];for(var t in s.sorting)n.push(("asc"===s.sorting[t]?"+":"-")+t);return n},this.getData=function(t,i){return t.resolve(n.isArray(this.data)&&n.isObject(i)?this.data.slice((i.page()-1)*i.count(),i.page()*i.count()):[]),t.promise},this.getGroups=function(i,r){var u=t.defer();return u.promise.then(function(t){var u={},f,e;n.forEach(t,function(t){var i=n.isFunction(r)?r(t):t[r];u[i]=u[i]||{data:[]};u[i].value=i;u[i].data.push(t)});f=[];for(e in u)f.push(u[e]);h("ngTable: refresh groups",f);i.resolve(f)}),this.getData(u,c)},this.generatePagesArray=function(n,t,i){var h,o,s,f,u,e,r;if(h=11,e=[],u=Math.ceil(t/i),u>1){for(e.push({type:"prev",number:Math.max(1,n-1),active:n>1}),e.push({type:"first",number:1,active:n>1,current:1===n}),s=Math.round((h-5)/2),f=Math.max(2,n-s),o=Math.min(u-1,n+2*s-(n-f)),f=Math.max(2,f-(2*s-(o-f))),r=f;o>=r;)e.push(r===f&&2!==r||r===o&&r!==u-1?{type:"more",active:!1}:{type:"page",number:r,active:n!==r,current:n===r}),r++;e.push({type:"last",number:u,active:n!==u,current:n===u});e.push({type:"next",number:Math.min(u,n+1),active:u>n})}return e},this.url=function(t){var r,f,i,e,u,o;t=t||!1;r=t?[]:{};for(f in s)if(s.hasOwnProperty(f))if(i=s[f],e=encodeURIComponent(f),"object"==typeof i)for(u in i)n.isUndefined(i[u])||""===i[u]||(o=e+"["+encodeURIComponent(u)+"]",t?r.push(o+"="+i[u]):r[o]=i[u]);else n.isFunction(i)||n.isUndefined(i)||""===i||(t?r.push(e+"="+encodeURIComponent(i)):r[e]=encodeURIComponent(i));return r},this.reload=function(){var r=t.defer(),n=this,i=null;if(o.$scope)return o.$loading=!0,i=o.groupBy?o.getGroups(r,o.groupBy,this):o.getData(r,this),h("ngTable: reload data"),i||(i=r.promise),i.then(function(t){return o.$loading=!1,h("ngTable: current scope",o.$scope),o.groupBy?(n.data=t,o.$scope&&(o.$scope.$groups=t)):(n.data=t,o.$scope&&(o.$scope.$data=t)),o.$scope&&(o.$scope.pages=n.generatePagesArray(n.page(),n.total(),n.count())),o.$scope.$emit("ngTableAfterReloadData"),t})},this.reloadPages=function(){var n=this;o.$scope.pages=n.generatePagesArray(n.page(),n.total(),n.count())},s=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},n.extend(s,r.params),o={$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",filterDelay:750,counts:[10,25,50,100],getGroups:this.getGroups,getData:this.getData},n.extend(o,r.settings),this.settings(e),this.parameters(f,!0),this}}]),i=["$scope","ngTableParams","$timeout",function(t,i,r){function e(){t.params.$params.page=1}var u=!0,f;t.$loading=!1;t.hasOwnProperty("params")||(t.params=new i,t.params.isNullInstance=!0);t.params.settings().$scope=t;f=function(){var n=0;return function(t,i){r.cancel(n);n=r(t,i)}}();t.$watch("params.$params",function(i,r){if(i!==r){if(t.params.settings().$scope=t,n.equals(i.filter,r.filter))t.params.reload();else{var o=u?n.noop:e;f(function(){o();t.params.reload()},t.params.settings().filterDelay)}t.params.isNullInstance||(u=!1)}},!0);t.sortBy=function(n,i){var r=t.parse(n.sortable);if(r){var u=t.params.settings().defaultSort,e="asc"===u?"desc":"asc",o=t.params.sorting()&&t.params.sorting()[r]&&t.params.sorting()[r]===u,f=i.ctrlKey||i.metaKey?t.params.sorting():{};f[r]=o?e:u;t.params.parameters({sorting:f})}}}],t.directive("ngTable",["$compile","$q","$parse",function(t,r,u){return{restrict:"A",priority:1001,scope:!0,controller:i,compile:function(i){var r=[],o=0,f=null,e=i.find("thead");return n.forEach(n.element(i.find("tr")),function(t){t=n.element(t);t.hasClass("ng-table-group")||f||(f=t)}),f?(n.forEach(f.find("td"),function(t){var i=n.element(t);if(!i.attr("ignore-cell")||"true"!==i.attr("ignore-cell")){var e=function(n,t){return function(f){return u(i.attr("x-data-"+n)||i.attr("data-"+n)||i.attr(n))(f,{$columns:r})||t}},s=e("title"," "),l=e("header",!1),f=e("filter",!1)(),h=!1,c=!1;f&&f.$$name&&(c=f.$$name,delete f.$$name);f&&f.templateURL&&(h=f.templateURL,delete f.templateURL);i.attr("data-title-text",s());r.push({id:o++,title:s,sortable:e("sortable",!1),"class":i.attr("x-data-header-class")||i.attr("data-header-class")||i.attr("header-class"),filter:f,filterTemplateURL:h,filterName:c,headerTemplateURL:l,filterData:i.attr("filter-data")?i.attr("filter-data"):null,show:i.attr("ng-show")?function(n){return u(i.attr("ng-show"))(n)}:function(){return!0}})}}),function(i,f,o){if(i.$loading=!1,i.$columns=r,i.$filterRow={},i.$watch(o.ngTable,function(t){n.isUndefined(t)||(i.paramsModel=u(o.ngTable),i.params=t)},!0),i.parse=function(t){return n.isDefined(t)?t(i):""},o.showFilter&&i.$parent.$watch(o.showFilter,function(n){i.show_filter=n}),o.disableFilter&&i.$parent.$watch(o.disableFilter,function(n){i.$filterRow.disabled=n}),n.forEach(r,function(t){var r;if(t.filterData)return r=u(t.filterData)(i,{$column:t}),n.isObject(r)&&n.isObject(r.promise)?(delete t.filterData,r.promise.then(function(i){n.isArray(i)||n.isFunction(i)||n.isObject(i)?n.isArray(i)&&i.unshift({title:"-",id:""}):i=[];t.data=i})):t.data=r}),!f.hasClass("ng-table")){i.templates={header:o.templateHeader?o.templateHeader:"ng-table/header.html",pagination:o.templatePagination?o.templatePagination:"ng-table/pager.html"};var s=e.length>0?e:n.element(document.createElement("thead")).attr("ng-include","templates.header"),h=n.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"});f.find("thead").remove();f.addClass("ng-table").prepend(s).after(h);t(s)(i);t(h)(i)}}):void 0}}}]),t.directive("ngTablePagination",["$compile",function(t){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(i,r){i.params.settings().$scope.$on("ngTableAfterReloadData",function(){i.pages=i.params.generatePagesArray(i.params.page(),i.params.total(),i.params.count())},!0);i.$watch("templateUrl",function(u){if(!n.isUndefined(u)){var f=n.element(document.createElement("div"));f.attr({"ng-include":"templateUrl"});r.append(f);t(f)(i)}})}}}]),n.module("ngTable").run(["$templateCache",function(n){n.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in column.data" ng-disabled="$filterRow.disabled" multiple ng-multiple="true" ng-model="params.filter()[name]" ng-show="filter==\'select-multiple\'" class="filter filter-select-multiple form-control" name="{{column.filterName}}"> <\/select>');n.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control" name="{{column.filterName}}"> <\/select>');n.put("ng-table/filters/text.html",'<input type="text" name="{{column.filterName}}" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>');n.put("ng-table/header.html",'<tr> <th ng-repeat="column in $columns" ng-class="{ \'sortable\': parse(column.sortable), \'sort-asc\': params.sorting()[parse(column.sortable)]==\'asc\', \'sort-desc\': params.sorting()[parse(column.sortable)]==\'desc\' }" ng-click="sortBy(column, $event)" ng-show="column.show(this)" ng-init="template=column.headerTemplateURL(this)" class="header {{column.class}}"> <div ng-if="!template" ng-show="!template" ng-bind="parse(column.title)"><\/div> <div ng-if="template" ng-show="template" ng-include="template"><\/div> <\/th> <\/tr> <tr ng-show="show_filter" class="ng-table-filters"> <th ng-repeat="column in $columns" ng-show="column.show(this)" class="filter"> <div ng-repeat="(name, filter) in column.filter"> <div ng-if="column.filterTemplateURL" ng-show="column.filterTemplateURL"> <div ng-include="column.filterTemplateURL"><\/div> <\/div> <div ng-if="!column.filterTemplateURL" ng-show="!column.filterTemplateURL"> <div ng-include="\'ng-table/filters/\' + filter + \'.html\'"><\/div> <\/div> <\/div> <\/th> <\/tr> ');n.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"><\/span> <\/button> <\/div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;<\/a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;<\/a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;<\/a> <\/li> <\/ul> <\/div> ')}]),t}),function(){function b(){if(!s){var t=(a?a:"")+".resize-triggers { "+(v?v:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css";n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t));i.appendChild(n);s=!0}}var t=document.attachEvent,s=!1,h,c,n;if(!t){h=function(){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(n){return window.setTimeout(n,20)};return function(t){return n(t)}}();c=function(){var n=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return n(t)}}();function resetTriggers(n){var r=n.__resizeTriggers__,t=r.firstElementChild,i=r.lastElementChild,u=t.firstElementChild;i.scrollLeft=i.scrollWidth;i.scrollTop=i.scrollHeight;u.style.width=t.offsetWidth+1+"px";u.style.height=t.offsetHeight+1+"px";t.scrollLeft=t.scrollWidth;t.scrollTop=t.scrollHeight}function y(n){return n.offsetWidth!=n.__resizeLast__.width||n.offsetHeight!=n.__resizeLast__.height}function scrollListener(n){var t=this;resetTriggers(this);this.__resizeRAF__&&c(this.__resizeRAF__);this.__resizeRAF__=h(function(){y(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(i){i.call(t,n)}))})}var i=!1,p="animation",r="",u="animationstart",f="Webkit Moz O ms".split(" "),w="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),e="",l=document.createElement("fakeelement");if(l.style.animationName!==undefined&&(i=!0),i===!1)for(n=0;n<f.length;n++)if(l.style[f[n]+"AnimationName"]!==undefined){e=f[n];p=e+"Animation";r="-"+e.toLowerCase()+"-";u=w[n];i=!0;break}var o="resizeanim",a="@"+r+"keyframes "+o+" { from { opacity: 0; } to { opacity: 0; } } ",v=r+"animation: 1ms "+o+"; "}window.addResizeListener=function(n,i){t?n.attachEvent("onresize",i):(n.__resizeTriggers__||(getComputedStyle(n).position=="static"&&(n.style.position="relative"),b(),n.__resizeLast__={},n.__resizeListeners__=[],(n.__resizeTriggers__=document.createElement("div")).className="resize-triggers",n.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div><\/div><\/div><div class="contract-trigger"><\/div>',n.appendChild(n.__resizeTriggers__),resetTriggers(n),n.addEventListener("scroll",scrollListener,!0),u&&n.__resizeTriggers__.addEventListener(u,function(t){t.animationName==o&&resetTriggers(n)})),n.__resizeListeners__.push(i))};window.removeResizeListener=function(n,i){t?n.detachEvent("onresize",i):(n.__resizeListeners__.splice(n.__resizeListeners__.indexOf(i),1),n.__resizeListeners__.length||(n.removeEventListener("scroll",scrollListener),n.__resizeTriggers__=!n.removeChild(n.__resizeTriggers__)))}}(),function(){var n=angular.module("multi-transclude",[]),t=["$scope","$element","$transclude",function(n,t,i){var r,u;if(!i)throw new Error("Illegal use of ngMultiTransclude controller. No directive that requires a transclusion found.");this.$element=t;this.isChildOf=function(n){return n.$element[0].contains(this.$element[0])};n.$on("$destroy",function(){r&&(r.remove(),r=null)});u=angular.element('<div style="display:none;"><\/div>');this.transclude=function(n,t){for(var u,i=0;i<r.length;++i)if(u=angular.element(r[i]),u.attr("name")===n){t.empty();t.append(u);return}};this.transcluded=function(){u&&(u.remove(),u=null)};i(function(n){r=n;u.append(n);t.append(u)})}];n.directive("ngMultiTemplate",function(){return{transclude:!0,templateUrl:function(n,t){return t.ngMultiTemplate},controller:t,link:function(n,t,i,r){r.transcluded()}}});n.directive("ngMultiTranscludeController",function(){return{controller:t,link:function(n,t,i,r){r.transcluded()}}});n.directive("ngMultiTransclude",function(){return{require:["?^ngMultiTranscludeController","?^ngMultiTemplate"],link:function(n,t,i,r){var u=r[0],f=r[1],e;if(e=u&&f?u.isChildOf(f)?u:f:u||f,!e)throw new Error("Illegal use of ngMultiTransclude. No wrapping controller.");e.transclude(i.ngMultiTransclude,t)}}})}();
(function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})})(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(n,t){this.scope=n;n.$element=t;n.$nodeScope=null;n.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(n,t){function r(n){for(var u,f=0,e=n.childNodes(),t=0;t<e.length;t++)u=e[t].$childNodesScope,u&&u.childNodesCount()>0&&(f=1,r(u));i+=f}this.scope=n;n.$element=t;n.$modelValue=null;n.$parentNodeScope=null;n.$childNodesScope=null;n.$parentNodesScope=null;n.$treeScope=null;n.$handleScope=null;n.$type="uiTreeNode";n.$$apply=!1;n.collapsed=!1;n.init=function(i){var r=i[0];n.$treeScope=i[1]?i[1].scope:null;n.$parentNodeScope=r.scope.$nodeScope;n.$modelValue=r.scope.$modelValue[n.$index];n.$parentNodesScope=r.scope;r.scope.initSubNode(n);t.on("$destroy",function(){r.scope.destroySubNode(n)})};n.index=function(){return n.$parentNodesScope.$modelValue.indexOf(n.$modelValue)};n.dragEnabled=function(){return!(n.$treeScope&&!n.$treeScope.dragEnabled)};n.isSibling=function(t){return n.$parentNodesScope==t.$parentNodesScope};n.isChild=function(t){var i=n.childNodes();return i&&i.indexOf(t)>-1};n.prev=function(){var t=n.index();return t>0?n.siblings()[t-1]:null};n.siblings=function(){return n.$parentNodesScope.childNodes()};n.childNodesCount=function(){return n.childNodes()?n.childNodes().length:0};n.hasChild=function(){return n.childNodesCount()>0};n.childNodes=function(){return n.$childNodesScope&&n.$childNodesScope.$modelValue?n.$childNodesScope.childNodes():null};n.accept=function(t,i){return n.$childNodesScope&&n.$childNodesScope.$modelValue&&n.$childNodesScope.accept(t,i)};n.removeNode=function(){var t=n.remove();return n.$callbacks.removed(t),t};n.remove=function(){return n.$parentNodesScope.removeNode(n)};n.toggle=function(){n.collapsed=!n.collapsed};n.collapse=function(){n.collapsed=!0};n.expand=function(){n.collapsed=!1};n.depth=function(){var t=n.$parentNodeScope;return t?t.depth()+1:1};var i=0;n.maxSubDepth=function(){return i=0,n.$childNodesScope&&r(n.$childNodesScope),i}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(n,t){this.scope=n;n.$element=t;n.$modelValue=null;n.$nodeScope=null;n.$treeScope=null;n.$type="uiTreeNodes";n.$nodesMap={};n.nodropEnabled=!1;n.maxDepth=0;n.cloneEnabled=!1;n.initSubNode=function(t){if(!t.$modelValue)return null;n.$nodesMap[t.$modelValue.$$hashKey]=t};n.destroySubNode=function(t){if(!t.$modelValue)return null;n.$nodesMap[t.$modelValue.$$hashKey]=null};n.accept=function(t,i){return n.$treeScope.$callbacks.accept(t,n,i)};n.beforeDrag=function(t){return n.$treeScope.$callbacks.beforeDrag(t)};n.isParent=function(t){return t.$parentNodesScope==n};n.hasChild=function(){return n.$modelValue.length>0};n.safeApply=function(n){var t=this.$root.$$phase;t=="$apply"||t=="$digest"?n&&typeof n=="function"&&n():this.$apply(n)};n.removeNode=function(t){var i=n.$modelValue.indexOf(t.$modelValue);return i>-1?(n.safeApply(function(){n.$modelValue.splice(i,1)[0]}),t):null};n.insertNode=function(t,i){n.safeApply(function(){n.$modelValue.splice(t,0,i)})};n.childNodes=function(){var t,i=[];if(n.$modelValue)for(t=0;t<n.$modelValue.length;t++)i.push(n.$nodesMap[n.$modelValue[t].$$hashKey]);return i};n.depth=function(){return n.$nodeScope?n.$nodeScope.depth():0};n.outOfDepth=function(t){var i=n.maxDepth||n.$treeScope.maxDepth;return i>0?n.depth()+t.maxSubDepth()+1>i:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(n,t){this.scope=n;n.$element=t;n.$nodesScope=null;n.$type="uiTree";n.$emptyElm=null;n.$callbacks=null;n.dragEnabled=!0;n.emptyPlaceholderEnabled=!0;n.maxDepth=0;n.dragDelay=0;n.cloneEnabled=!1;n.nodropEnabled=!1;n.isEmpty=function(){return n.$nodesScope&&n.$nodesScope.$modelValue&&n.$nodesScope.$modelValue.length===0};n.place=function(t){n.$nodesScope.$element.append(t);n.$emptyElm.remove()};this.resetEmptyElement=function(){(!n.$nodesScope.$modelValue||n.$nodesScope.$modelValue.length===0)&&n.emptyPlaceholderEnabled?t.append(n.$emptyElm):n.$emptyElm.remove()};n.resetEmptyElement=this.resetEmptyElement;var i=function(n,t){for(var f,u=n.childNodes(),r=0;r<u.length;r++)t?u[r].collapse():u[r].expand(),f=u[r].$childNodesScope,f&&i(f,t)};n.collapseAll=function(){i(n.$nodesScope,!0)};n.expandAll=function(){i(n.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(n,t){return{restrict:"A",scope:!0,controller:"TreeController",link:function(i,r,u,f){var e={accept:null,beforeDrag:null},o={};angular.extend(o,n);o.treeClass&&r.addClass(o.treeClass);i.$emptyElm=angular.element(t.document.createElement("div"));o.emptyTreeClass&&i.$emptyElm.addClass(o.emptyTreeClass);i.$watch("$nodesScope.$modelValue.length",function(){i.$nodesScope.$modelValue&&f.resetEmptyElement()},!0);i.$watch(u.dragEnabled,function(n){typeof n=="boolean"&&(i.dragEnabled=n)});i.$watch(u.emptyPlaceholderEnabled,function(n){typeof n=="boolean"&&(i.emptyPlaceholderEnabled=n,f.resetEmptyElement())});i.$watch(u.nodropEnabled,function(n){typeof n=="boolean"&&(i.nodropEnabled=n)});i.$watch(u.cloneEnabled,function(n){typeof n=="boolean"&&(i.cloneEnabled=n)});i.$watch(u.maxDepth,function(n){typeof n=="number"&&(i.maxDepth=n)});i.$watch(u.dragDelay,function(n){typeof n=="number"&&(i.dragDelay=n)});e.accept=function(n,t){return!(t.nodropEnabled||t.outOfDepth(n))};e.beforeDrag=function(){return!0};e.removed=function(){};e.dropped=function(){};e.dragStart=function(){};e.dragMove=function(){};e.dragStop=function(){};e.beforeDrop=function(){};i.$watch(u.uiTree,function(n){angular.forEach(n,function(n,t){e[t]&&typeof n=="function"&&(e[t]=n)});i.$callbacks=e},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(n){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(t,i,r,u){var f={};angular.extend(f,n);f.handleClass&&i.addClass(f.handleClass);t!=u.scope&&(t.$nodeScope=u.scope,u.scope.$handleScope=t)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout",function(n,t,i,r,u){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(f,e,o,s){var v={},at="ontouchstart"in window,d,l,a,c,g,h,y=null,w,nt=document.body,b=document.documentElement,tt,ut,ht,ct,it,lt,k,p,ft,et,ot,st,rt;angular.extend(v,n);v.nodeClass&&e.addClass(v.nodeClass);f.init(s);f.collapsed=!!t.getNodeAttribute(f,"collapsed");f.sourceOnly=f.nodropEnabled||f.$treeScope.nodropEnabled;f.$watch(o.collapsed,function(n){typeof n=="boolean"&&(f.collapsed=n)});f.$watch("collapsed",function(n){t.setNodeAttribute(f,"collapsed",n);o.$set("collapsed",n)});ht=function(n){if((at||n.button!=2&&n.which!=3)&&!n.uiTreeDragging&&(!n.originalEvent||!n.originalEvent.uiTreeDragging)){var u=angular.element(n.target),o=u.scope(),ot=e.clone(),s,y,it,et,rt;if(o&&o.$type&&(o.$type=="uiTreeNode"||o.$type=="uiTreeHandle")&&(o.$type!="uiTreeNode"||!o.$handleScope)&&(s=u.prop("tagName").toLowerCase(),s!="input"&&s!="textarea"&&s!="button"&&s!="select")){while(u&&u[0]&&u[0]!=e){if(t.nodrag(u))return;u=u.parent()}f.beforeDrag(f)&&(n.uiTreeDragging=!0,n.originalEvent&&(n.originalEvent.uiTreeDragging=!0),n.preventDefault(),it=t.eventObj(n),d=!0,l=t.dragInfo(f),f.$apply(function(){f.$treeScope.$callbacks.dragStart(l.eventArgs(w,a))}),y=f.$element.prop("tagName"),y.toLowerCase()==="tr"?(c=angular.element(i.document.createElement(y)),et=angular.element(i.document.createElement("td")).addClass(v.placeholderClass),c.append(et)):c=angular.element(i.document.createElement(y)).addClass(v.placeholderClass),g=angular.element(i.document.createElement(y)),v.hiddenClass&&g.addClass(v.hiddenClass),a=t.positionStarted(it,f.$element),c.css("height",t.height(f.$element)+"px"),c.css("width",t.width(f.$element)+"px"),h=angular.element(i.document.createElement(f.$parentNodesScope.$element.prop("tagName"))).addClass(f.$parentNodesScope.$element.attr("class")).addClass(v.dragClass),h.css("width",t.width(f.$element)+"px"),h.css("z-index",9999),rt=(f.$element[0].querySelector(".angular-ui-tree-handle")||f.$element[0]).currentStyle,rt&&(document.body.setAttribute("ui-tree-cursor",r.find("body").css("cursor")||""),r.find("body").css({cursor:rt.cursor+"!important"})),f.sourceOnly&&c.css("display","none"),f.$element.after(c),f.$element.after(g),l.isClone()&&f.sourceOnly?h.append(ot):h.append(f.$element),r.find("body").append(h),h.css({left:it.pageX-a.offsetX+"px",top:it.pageY-a.offsetY+"px"}),w={placeholder:c,dragging:h},angular.element(r).bind("touchend",p),angular.element(r).bind("touchcancel",p),angular.element(r).bind("touchmove",k),angular.element(r).bind("mouseup",p),angular.element(r).bind("mousemove",k),angular.element(r).bind("mouseleave",ft),tt=Math.max(nt.scrollHeight,nt.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight),ut=Math.max(nt.scrollWidth,nt.offsetWidth,b.clientWidth,b.scrollWidth,b.offsetWidth))}}};ct=function(n){var o=t.eventObj(n),e,st,p,b,g,nt,s,ct,it,ft,ht,r,u,k,et,ot;if(h){if(n.preventDefault(),i.getSelection?i.getSelection().removeAllRanges():i.document.selection&&i.document.selection.empty(),p=o.pageX-a.offsetX,b=o.pageY-a.offsetY,p<0&&(p=0),b<0&&(b=0),b+10>tt&&(b=tt-10),p+10>ut&&(p=ut-10),h.css({left:p+"px",top:b+"px"}),g=window.pageYOffset||i.document.documentElement.scrollTop,nt=g+(window.innerHeight||i.document.clientHeight||i.document.clientHeight),nt<o.pageY&&nt<=tt&&window.scrollBy(0,10),g>o.pageY&&window.scrollBy(0,-10),t.positionMoved(n,a,d),d){d=!1;return}if(ct=t.offset(h).left-t.offset(c).left>=v.threshold,it=o.pageX-i.document.body.scrollLeft,ft=o.pageY-(window.pageYOffset||i.document.documentElement.scrollTop),angular.isFunction(h.hide)?h.hide():(ht=h[0].style.display,h[0].style.display="none"),i.document.elementFromPoint(it,ft),u=angular.element(i.document.elementFromPoint(it,ft)),angular.isFunction(h.show)?h.show():h[0].style.display=ht,rt=!u.scope().$type,rt&&(c.remove(),y&&(y.resetEmptyElement(),y=null)),a.dirAx&&a.distAxX>=v.levelThreshold&&(a.distAxX=0,a.distX>0&&(e=l.prev(),e&&!e.collapsed&&e.accept(f,e.childNodesCount())&&(e.$childNodesScope.$element.append(c),l.moveTo(e.$childNodesScope,e.childNodes(),e.childNodesCount()))),a.distX<0&&(st=l.next(),st||(s=l.parentNode(),s&&s.$parentNodesScope.accept(f,s.index()+1)&&(s.$element.after(c),l.moveTo(s.$parentNodesScope,s.siblings(),s.index()+1))))),!a.dirAx){if(r=u.scope(),k=!1,!r)return;if(!r.$treeScope||r.$parent.nodropEnabled||r.$treeScope.nodropEnabled||c.css("display","block"),r.$type=="uiTree"&&r.dragEnabled&&(k=r.isEmpty()),r.$type=="uiTreeHandle"&&(r=r.$nodeScope),r.$type!="uiTreeNode"&&!k)return;y&&c.parent()[0]!=y.$element[0]&&(y.resetEmptyElement(),y=null);k?(y=r,r.$nodesScope.accept(f,0)&&(r.place(c),l.moveTo(r.$nodesScope,r.$nodesScope.childNodes(),0))):r.dragEnabled()&&(u=r.$element,et=t.offset(u),ot=r.horizontal?o.pageX<et.left+t.width(u)/2:o.pageY<et.top+t.height(u)/2,r.$parentNodesScope.accept(f,r.index())?ot?(u[0].parentNode.insertBefore(c[0],u[0]),l.moveTo(r.$parentNodesScope,r.siblings(),r.index())):(u.after(c),l.moveTo(r.$parentNodesScope,r.siblings(),r.index()+1)):!ot&&r.accept(f,r.childNodesCount())?(r.$childNodesScope.$element.append(c),l.moveTo(r.$childNodesScope,r.childNodes(),r.childNodesCount())):rt=!0)}f.$apply(function(){f.$treeScope.$callbacks.dragMove(l.eventArgs(w,a))})}};it=function(n){n.preventDefault();h&&(f.$treeScope.$apply(function(){f.$treeScope.$callbacks.beforeDrop(l.eventArgs(w,a))}),g.replaceWith(f.$element),c.remove(),h.remove(),h=null,f.$$apply&&!rt?f.$treeScope.$apply(function(){l.apply();f.$treeScope.$callbacks.dropped(l.eventArgs(w,a))}):ot(),f.$treeScope.$apply(function(){f.$treeScope.$callbacks.dragStop(l.eventArgs(w,a))}),f.$$apply=!1,l=null);var t=document.body.getAttribute("ui-tree-cursor");t!==null&&(r.find("body").css({cursor:t}),document.body.removeAttribute("ui-tree-cursor"));angular.element(r).unbind("touchend",p);angular.element(r).unbind("touchcancel",p);angular.element(r).unbind("touchmove",k);angular.element(r).unbind("mouseup",p);angular.element(r).unbind("mousemove",k);angular.element(i.document.body).unbind("mouseleave",ft)};lt=function(n){f.dragEnabled()&&ht(n)};k=function(n){ct(n)};p=function(n){f.$$apply=!0;it(n)};ft=function(n){it(n)};et=function(){var n;return{exec:function(t,i){i||(i=0);this.cancel();n=u(t,i)},cancel:function(){u.cancel(n)}}}();ot=function(){e.bind("touchstart mousedown",function(n){et.exec(function(){lt(n)},f.dragDelay||0)});e.bind("touchend touchcancel mouseup",function(){et.cancel()})};ot();st=function(n){n.keyCode==27&&(f.$$apply=!1,it(n))};angular.element(i.document.body).bind("keydown",st);f.$on("$destroy",function(){angular.element(i.document.body).unbind("keydown",st)})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(n){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(t,i,r,u){var f={},e=u[0],o=u[1],s=u[2];angular.extend(f,n);f.nodesClass&&i.addClass(f.nodesClass);o?(o.scope.$childNodesScope=t,t.$nodeScope=o.scope):s.scope.$nodesScope=t;t.$treeScope=s.scope;e&&(e.$render=function(){t.$modelValue=e.$modelValue});t.$watch(r.maxDepth,function(n){typeof n=="number"&&(t.maxDepth=n)});t.$watch(function(){return r.nodropEnabled},function(n){typeof n!="undefined"&&(t.nodropEnabled=!0)},!0);r.$observe("horizontal",function(n){t.horizontal=typeof n!="undefined"})}}}])}(),function(){"use strict";angular.module("ui.tree").factory("UiTreeHelper",["$document","$window",function(n,t){return{nodesData:{},setNodeAttribute:function(n,t,i){if(!n.$modelValue)return null;var r=this.nodesData[n.$modelValue.$$hashKey];r||(r={},this.nodesData[n.$modelValue.$$hashKey]=r);r[t]=i},getNodeAttribute:function(n,t){if(!n.$modelValue)return null;var i=this.nodesData[n.$modelValue.$$hashKey];return i?i[t]:null},nodrag:function(n){return typeof n.attr("data-nodrag")!="undefined"?n.attr("data-nodrag")!=="false":!1},eventObj:function(n){var t=n;return n.targetTouches!==undefined?t=n.targetTouches.item(0):n.originalEvent!==undefined&&n.originalEvent.targetTouches!==undefined&&(t=n.originalEvent.targetTouches.item(0)),t},dragInfo:function(n){return{source:n,sourceInfo:{cloneModel:n.$treeScope.cloneEnabled===!0?angular.copy(n.$modelValue):undefined,nodeScope:n,index:n.index(),nodesScope:n.$parentNodesScope},index:n.index(),siblings:n.siblings().slice(0),parent:n.$parentNodesScope,moveTo:function(n,t,i){this.parent=n;this.siblings=t.slice(0);var r=this.siblings.indexOf(this.source);r>-1&&(this.siblings.splice(r,1),this.source.index()<i&&i--);this.siblings.splice(i,0,this.source);this.index=i},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(n){return angular.copy(n)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(n,t){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:n,pos:t}},apply:function(){var n=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,angular.copy(n)):(this.source.remove(),this.parent.insertNode(this.index,n)))}}},height:function(n){return n.prop("scrollHeight")},width:function(n){return n.prop("scrollWidth")},offset:function(i){var r=i[0].getBoundingClientRect();return{width:i.prop("offsetWidth"),height:i.prop("offsetHeight"),top:r.top+(t.pageYOffset||n[0].body.scrollTop||n[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||n[0].body.scrollLeft||n[0].documentElement.scrollLeft)}},positionStarted:function(n,t){var i={},r=n.pageX,u=n.pageY;return n.originalEvent&&n.originalEvent.touches&&n.originalEvent.touches.length>0&&(r=n.originalEvent.touches[0].pageX,u=n.originalEvent.touches[0].pageY),i.offsetX=r-this.offset(t).left,i.offsetY=u-this.offset(t).top,i.startX=i.lastX=r,i.startY=i.lastY=u,i.nowX=i.nowY=i.distX=i.distY=i.dirAx=0,i.dirX=i.dirY=i.lastDirX=i.lastDirY=i.distAxX=i.distAxY=0,i},positionMoved:function(n,t,i){var u=n.pageX,f=n.pageY,r;if(n.originalEvent&&n.originalEvent.touches&&n.originalEvent.touches.length>0&&(u=n.originalEvent.touches[0].pageX,f=n.originalEvent.touches[0].pageY),t.lastX=t.nowX,t.lastY=t.nowY,t.nowX=u,t.nowY=f,t.distX=t.nowX-t.lastX,t.distY=t.nowY-t.lastY,t.lastDirX=t.dirX,t.lastDirY=t.dirY,t.dirX=t.distX===0?0:t.distX>0?1:-1,t.dirY=t.distY===0?0:t.distY>0?1:-1,r=Math.abs(t.distX)>Math.abs(t.distY)?1:0,i){t.dirAx=r;t.moving=!0;return}t.dirAx!==r?(t.distAxX=0,t.distAxY=0):(t.distAxX+=Math.abs(t.distX),t.dirX!==0&&t.dirX!==t.lastDirX&&(t.distAxX=0),t.distAxY+=Math.abs(t.distY),t.dirY!==0&&t.dirY!==t.lastDirY&&(t.distAxY=0));t.dirAx=r}}}])}();angular.module("dndLists",[]).directive("dndDraggable",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(n,t,i,r){return function(u,f,e){f.attr("draggable","true");e.dndDisableIf&&u.$watch(e.dndDisableIf,function(n){f.attr("draggable",!n)});f.on("dragstart",function(o){o=o.originalEvent||o;o.dataTransfer.setData("Text",angular.toJson(u.$eval(e.dndDraggable)));o.dataTransfer.effectAllowed=e.dndEffectAllowed||"move";f.addClass("dndDragging");t(function(){f.addClass("dndDraggingSource")},0);i.dropEffect="none";r.isDragging=!0;r.dragType=e.dndType?u.$eval(e.dndType):undefined;n(e.dndDragstart)(u,{event:o});o.stopPropagation()});f.on("dragend",function(t){t=t.originalEvent||t;var o=i.dropEffect;u.$apply(function(){switch(o){case"move":n(e.dndMoved)(u,{event:t});break;case"copy":n(e.dndCopied)(u,{event:t})}});f.removeClass("dndDragging");f.removeClass("dndDraggingSource");r.isDragging=!1;t.stopPropagation()});f.on("click",function(t){t=t.originalEvent||t;u.$apply(function(){n(e.dndSelected)(u,{event:t})});t.stopPropagation()});f.on("selectstart",function(){return this.dragDrop&&this.dragDrop(),!1})}}]).directive("dndList",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(n,t,i,r){return function(u,f,e){function c(n,t,i){var u=a?n.offsetX||n.layerX:n.offsetY||n.layerY,f=a?t.offsetWidth:t.offsetHeight,r=a?t.offsetLeft:t.offsetTop;return r=i?r:0,u<r+f/2}function v(){return Array.prototype.indexOf.call(s.children,o)}function y(n){if(!r.isDragging&&!w||!b(n.dataTransfer.types))return!1;if(e.dndAllowedTypes&&r.isDragging){var t=u.$eval(e.dndAllowedTypes);if(angular.isArray(t)&&t.indexOf(r.dragType)===-1)return!1}return e.dndDisableIf&&u.$eval(e.dndDisableIf)?!1:!0}function l(){return h.remove(),f.removeClass("dndDragover"),!0}function p(t,i,f){return n(t)(u,{event:i,index:v(),item:f||undefined,external:!r.isDragging,type:r.isDragging?r.dragType:undefined})}function b(n){if(!n)return!0;for(var t=0;t<n.length;t++)if(n[t]==="Text"||n[t]==="text/plain")return!0;return!1}var h=angular.element("<li class='dndPlaceholder'><\/li>"),o=h[0],s=f[0],a=e.dndHorizontalList&&u.$eval(e.dndHorizontalList),w=e.dndExternalSources&&u.$eval(e.dndExternalSources);f.on("dragover",function(n){if(n=n.originalEvent||n,!y(n))return!0;if(o.parentNode!=s&&f.append(h),n.target!==s){for(var t=n.target;t.parentNode!==s&&t.parentNode;)t=t.parentNode;t.parentNode===s&&t!==o&&(c(n,t)?s.insertBefore(o,t):s.insertBefore(o,t.nextSibling))}else if(c(n,o,!0))while(o.previousElementSibling&&(c(n,o.previousElementSibling,!0)||o.previousElementSibling.offsetHeight===0))s.insertBefore(o,o.previousElementSibling);else while(o.nextElementSibling&&!c(n,o.nextElementSibling,!0))s.insertBefore(o,o.nextElementSibling.nextElementSibling);return e.dndDragover&&!p(e.dndDragover,n)?l():(f.addClass("dndDragover"),n.preventDefault(),n.stopPropagation(),!1)});f.on("drop",function(n){var r,t,f;if(n=n.originalEvent||n,!y(n))return!0;n.preventDefault();r=n.dataTransfer.getData("Text")||n.dataTransfer.getData("text/plain");try{t=JSON.parse(r)}catch(o){return l()}return e.dndDrop&&(t=p(e.dndDrop,n,t),!t)?l():(f=u.$eval(e.dndList),u.$apply(function(){f.splice(v(),0,t)}),i.dropEffect=n.dataTransfer.dropEffect==="none"?n.dataTransfer.effectAllowed==="copy"||n.dataTransfer.effectAllowed==="move"?n.dataTransfer.effectAllowed:n.ctrlKey?"copy":"move":n.dataTransfer.dropEffect,l(),n.stopPropagation(),!1)});f.on("dragleave",function(n){n=n.originalEvent||n;f.removeClass("dndDragover");t(function(){f.hasClass("dndDragover")||h.remove()},100)})}}]).factory("dndDragTypeWorkaround",function(){return{}}).factory("dndDropEffectWorkaround",function(){return{}}),function(n,t){typeof define=="function"&&define.amd?define(n):typeof module!="undefined"&&typeof exports=="object"?module.exports=n():t.rangy=n()}(function(){function t(n,t){var i=typeof n[t];return i==ht||!!(i==g&&n[t])||i=="unknown"}function y(n,t){return!!(typeof n[t]==g&&n[t])}function nt(n,t){return typeof n[t]!=f}function p(n){return function(t,i){for(var r=i.length;r--;)if(!n(t,i[r]))return!1;return!0}}function tt(n){return n&&w(n,vt)&&b(n,at)}function it(n){return y(n,"body")?n.body:n.getElementsByTagName("body")[0]}function o(n){typeof console!=f&&t(console,"log")&&console.log(n)}function rt(n,t){i&&t?alert(n):o(n)}function u(t){n.initialized=!0;n.supported=!1;rt("Rangy is not supported in this environment. Reason: "+t,n.config.alertOnFail)}function wt(t){rt("Rangy warning: "+t,n.config.alertOnWarn)}function ut(n){return n.message||n.description||String(n)}function k(){var f,s,h,r,v,y,p,l,k;if(i&&!n.initialized){if(s=!1,h=!1,t(document,"createRange")&&(f=document.createRange(),w(f,lt)&&b(f,ct)&&(s=!0)),r=it(document),!r||r.nodeName.toLowerCase()!="body"){u("No body element found");return}if(r&&t(r,"createTextRange")&&(f=r.createTextRange(),tt(f)&&(h=!0)),!s&&!h){u("Neither Range nor TextRange are available");return}n.initialized=!0;n.features={implementsDomRange:s,implementsTextRange:h};for(p in e)(v=e[p])instanceof a&&v.init(v,n);for(l=0,k=c.length;l<k;++l)try{c[l](n)}catch(d){y="Rangy init listener threw an exception. Continuing. Detail: "+ut(d);o(y)}}}function ft(t,i,r){r&&(t+=" in module "+r.name);n.warn("DEPRECATED: "+t+" is deprecated. Please use "+i+" instead.")}function et(n,t,i,u){n[t]=function(){return ft(t,i,u),n[i].apply(n,r.toArray(arguments))}}function bt(n){n=n||window;k();for(var t=0,i=l.length;t<i;++t)l[t](n)}function a(n,t,i){this.name=n;this.dependencies=t;this.initialized=!1;this.supported=!1;this.initializer=i}function ot(t,i,r){var u=new a(t,i,function(i){if(!i.initialized){i.initialized=!0;try{r(n,i);i.supported=!0}catch(u){var f="Module '"+t+"' failed to load: "+ut(u);o(f);u.stack&&o(u.stack)}}});return e[t]=u,u}function st(){}function kt(){}var g="object",ht="function",f="undefined",ct=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],lt=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],at=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],vt=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],w=p(t),yt=p(y),b=p(nt),pt=[].forEach?function(n,t){n.forEach(t)}:function(n,t){for(var i=0,r=n.length;i<r;++i)t(n[i],i)},e={},i=typeof window!=f&&typeof document!=f,r={isHostMethod:t,isHostObject:y,isHostProperty:nt,areHostMethods:w,areHostObjects:yt,areHostProperties:b,isTextRange:tt,getBody:it,forEach:pt},n={version:"1.3.0",initialized:!1,isBrowser:i,supported:!0,util:r,features:{},modules:e,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==f?!0:rangyAutoInitialize}},s,h,c,l,d,v;return n.fail=u,n.warn=wt,{}.hasOwnProperty?(r.extend=s=function(n,t,i){var u,r;for(var f in t)t.hasOwnProperty(f)&&(u=n[f],r=t[f],i&&u!==null&&typeof u=="object"&&r!==null&&typeof r=="object"&&s(u,r,!0),n[f]=r);return t.hasOwnProperty("toString")&&(n.toString=t.toString),n},r.createOptions=function(n,t){var i={};return s(i,t),n&&s(i,n),i}):u("hasOwnProperty not supported"),i||u("Rangy can only run in a browser"),function(){var n,t,u;if(i){t=document.createElement("div");t.appendChild(document.createElement("span"));u=[].slice;try{u.call(t.childNodes,0)[0].nodeType==1&&(n=function(n){return u.call(n,0)})}catch(f){}}n||(n=function(n){for(var i=[],t=0,r=n.length;t<r;++t)i[t]=n[t];return i});r.toArray=n}(),i&&(t(document,"addEventListener")?h=function(n,t,i){n.addEventListener(t,i,!1)}:t(document,"attachEvent")?h=function(n,t,i){n.attachEvent("on"+t,i)}:u("Document does not have required addEventListener or attachEvent method"),r.addListener=h),c=[],r.deprecationNotice=ft,r.createAliasForDeprecatedMethod=et,n.init=k,n.addInitListener=function(t){n.initialized?t(n):c.push(t)},l=[],n.addShimListener=function(n){l.push(n)},i&&(n.shim=n.createMissingNativeApi=bt,et(n,"createMissingNativeApi","shim")),a.prototype={init:function(){for(var r=this.dependencies||[],i=0,u=r.length,n,t;i<u;++i){if(t=r[i],n=e[t],!n||!(n instanceof a))throw new Error("required module '"+t+"' not found");if(n.init(),!n.supported)throw new Error("required module '"+t+"' not supported");}this.initializer(this)},fail:function(n){this.initialized=!0;this.supported=!1;throw new Error(n);},warn:function(t){n.warn("Module "+this.name+": "+t)},deprecationNotice:function(t,i){n.warn("DEPRECATED: "+t+" in module "+this.name+" is deprecated. Please use "+i+" instead")},createError:function(n){return new Error("Error in Rangy "+this.name+" module: "+n)}},n.createModule=function(t){var i,r,u;arguments.length==2?(i=arguments[1],r=[]):(i=arguments[2],r=arguments[1]);u=ot(t,r,i);n.initialized&&n.supported&&u.init()},n.createCoreModule=function(n,t,i){ot(n,t,i)},n.RangePrototype=st,n.rangePrototype=new st,n.selectionPrototype=new kt,n.createCoreModule("DomUtil",[],function(n,t){function ut(n){var t;return typeof n.namespaceURI==r||(t=n.namespaceURI)===null||t=="http://www.w3.org/1999/xhtml"}function ft(n){var t=n.parentNode;return t.nodeType==1?t:null}function f(n){for(var t=0;n=n.previousSibling;)++t;return t}function et(n){switch(n.nodeType){case 7:case 10:return 0;case 3:case 8:return n.length;default:return n.childNodes.length}}function p(n,t){for(var r=[],i=n;i;i=i.parentNode)r.push(i);for(i=t;i;i=i.parentNode)if(c(r,i))return i;return null}function w(n,t,i){for(var r=i?t:t.parentNode;r;){if(r===n)return!0;r=r.parentNode}return!1}function ot(n,t){return w(n,t,!0)}function e(n,t,i){for(var u,r=i?n:n.parentNode;r;){if(u=r.parentNode,u===t)return r;r=u}return null}function b(n){var t=n.nodeType;return t==3||t==4||t==8}function st(n){if(!n)return!1;var t=n.nodeType;return t==3||t==8}function k(n,t){var i=t.nextSibling,r=t.parentNode;return i?r.insertBefore(n,i):r.appendChild(n),n}function ht(n,t,i){var u=n.cloneNode(!1),e,r;if(u.deleteData(0,t),n.deleteData(t,n.length-t),k(u,n),i)for(e=0;r=i[e++];)r.node==n&&r.offset>t?(r.node=u,r.offset-=t):r.node==n.parentNode&&r.offset>f(n)&&++r.offset;return u}function o(n){if(n.nodeType==9)return n;if(typeof n.ownerDocument!=r)return n.ownerDocument;if(typeof n.document!=r)return n.document;if(n.parentNode)return o(n.parentNode);throw t.createError("getDocument: no document found for node");}function d(n){var i=o(n);if(typeof i.defaultView!=r)return i.defaultView;if(typeof i.parentWindow!=r)return i.parentWindow;throw t.createError("Cannot get a window object for node");}function g(n){if(typeof n.contentDocument!=r)return n.contentDocument;if(typeof n.contentWindow!=r)return n.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element");}function ct(n){if(typeof n.contentWindow!=r)return n.contentWindow;if(typeof n.contentDocument!=r)return n.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element");}function nt(n){return n&&i.isHostMethod(n,"setTimeout")&&i.isHostObject(n,"document")}function lt(n,t,r){var u;if(n?i.isHostProperty(n,"nodeType")?u=n.nodeType==1&&n.tagName.toLowerCase()=="iframe"?g(n):o(n):nt(n)&&(u=n.document):u=document,!u)throw t.createError(r+"(): Parameter must be a Window object or DOM node");return u}function at(n){for(var t;t=n.parentNode;)n=t;return n}function vt(n,i,r,u){var h,o,c,l,s;if(n==r)return i===u?0:i<u?-1:1;if(h=e(r,n,!0))return i<=f(h)?-1:1;if(h=e(n,r,!0))return f(h)<u?-1:1;if(o=p(n,r),!o)throw new Error("comparePoints error: nodes have no common ancestor");if(c=n===o?o:e(n,o,!0),l=r===o?o:e(r,o,!0),c===l)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");else for(s=o.firstChild;s;){if(s===c)return-1;if(s===l)return 1;s=s.nextSibling}}function l(n){var t;try{return t=n.parentNode,!1}catch(i){return!0}}function tt(n){if(!n)return"[No node]";if(s&&l(n))return"[Broken node]";if(b(n))return'"'+n.data+'"';if(n.nodeType==1){var t=n.id?' id="'+n.id+'"':"";return"<"+n.nodeName+t+">[index:"+f(n)+",length:"+n.childNodes.length+"]["+(n.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return n.nodeName}function yt(n){for(var t=o(n).createDocumentFragment(),i;i=n.firstChild;)t.appendChild(i);return t}function pt(n,t,i){var u=y(n),r=n.createElement("div"),f;return r.contentEditable=""+!!i,t&&(r.innerHTML=t),f=u.firstChild,f?u.insertBefore(r,f):u.appendChild(r),r}function wt(n){return n.parentNode.removeChild(n)}function it(n){this.root=n;this._next=n}function bt(n){return new it(n)}function rt(n,t){this.node=n;this.offset=t}function v(n){this.code=this[n];this.codeName=n;this.message="DOMException: "+this.codeName}var r="undefined",i=n.util,y=i.getBody,u,h,c,s,a;i.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method");i.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");u=document.createElement("div");i.areHostMethods(u,["insertBefore","appendChild","cloneNode"]||!i.areHostObjects(u,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation");i.isHostProperty(u,"innerHTML")||t.fail("Element is missing innerHTML property");h=document.createTextNode("test");i.areHostMethods(h,["splitText","deleteData","insertData","appendData","cloneNode"]||!i.areHostObjects(u,["previousSibling","nextSibling","childNodes","parentNode"])||!i.areHostProperties(h,["data"]))||t.fail("Incomplete Text Node implementation");c=function(n,t){for(var i=n.length;i--;)if(n[i]===t)return!0;return!1};s=!1,function(){var t=document.createElement("b"),i;t.innerHTML="1";i=t.firstChild;t.innerHTML="<br />";s=l(i);n.features.crashyTextNodes=s}();typeof getComputedStyle!=r?a=function(n,t){return d(n).getComputedStyle(n,null)[t]}:typeof document.documentElement.currentStyle!=r?a=function(n,t){return n.currentStyle?n.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found");it.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var n=this._current=this._next,t,i;if(this._current)if(t=n.firstChild,t)this._next=t;else{for(i=null;n!==this.root&&!(i=n.nextSibling);)n=n.parentNode;this._next=i}return this._current},detach:function(){this._current=this._next=this.root=null}};rt.prototype={equals:function(n){return!!n&&this.node===n.node&&this.offset==n.offset},inspect:function(){return"[DomPosition("+tt(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};v.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24};v.prototype.toString=function(){return this.message};n.dom={arrayContains:c,isHtmlNamespace:ut,parentElement:ft,getNodeIndex:f,getNodeLength:et,getCommonAncestor:p,isAncestorOf:w,isOrIsAncestorOf:ot,getClosestAncestorIn:e,isCharacterDataNode:b,isTextOrCommentNode:st,insertAfter:k,splitDataNode:ht,getDocument:o,getWindow:d,getIframeWindow:ct,getIframeDocument:g,getBody:y,isWindow:nt,getContentDocument:lt,getRootContainer:at,comparePoints:vt,isBrokenNode:l,inspectNode:tt,getComputedStyleProperty:a,createTestElement:pt,removeNode:wt,fragmentFromNodeChildren:yt,createIterator:bt,DomPosition:rt};n.DOMException=v}),n.createCoreModule("DomRange",["DomUtil"],function(n){function y(n,t){return n.nodeType!=3&&(a(n,t.startContainer)||a(n,t.endContainer))}function e(n){return n.document||g(n.startContainer)}function di(n){return o(n.startContainer)}function vt(n){return new lt(n.parentNode,h(n))}function rt(n){return new lt(n.parentNode,h(n)+1)}function yt(n,r,u){var f=n.nodeType==11?n.firstChild:n;return i(r)?u==r.length?t.insertAfter(n,r):r.parentNode.insertBefore(n,u==0?r:nt(r,u)):u>=r.childNodes.length?r.appendChild(n):r.insertBefore(n,r.childNodes[u]),f}function pt(n,t,i){if(r(n),r(t),e(t)!=e(n))throw new f("WRONG_DOCUMENT_ERR");var o=u(n.startContainer,n.startOffset,t.endContainer,t.endOffset),s=u(n.endContainer,n.endOffset,t.startContainer,t.startOffset);return i?o<=0&&s>=0:o<0&&s>0}function wt(n){for(var i,t,u=e(n.range).createDocumentFragment(),r;t=n.next();){if(i=n.isPartiallySelectedSubtree(),t=t.cloneNode(!i),i&&(r=n.getSubtreeIterator(),t.appendChild(wt(r)),r.detach()),t.nodeType==10)throw new f("HIERARCHY_REQUEST_ERR");u.appendChild(t)}return u}function b(n,i,r){var e,o,u,f;for(r=r||{stop:!1};u=n.next();)if(n.isPartiallySelectedSubtree()){if(i(u)===!1){r.stop=!0;return}if(f=n.getSubtreeIterator(),b(f,i,r),f.detach(),r.stop)return}else for(e=t.createIterator(u);o=e.next();)if(i(o)===!1){r.stop=!0;return}}function bt(n){for(var t;n.next();)n.isPartiallySelectedSubtree()?(t=n.getSubtreeIterator(),bt(t),t.detach()):n.remove()}function kt(n){for(var t,r=e(n.range).createDocumentFragment(),i;t=n.next();){if(n.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=n.getSubtreeIterator(),t.appendChild(kt(i)),i.detach()):n.remove(),t.nodeType==10)throw new f("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function gi(n,t,r){var f=!!(t&&t.length),e,o=!!r,u;return f&&(e=new RegExp("^("+t.join("|")+")$")),u=[],b(new s(n,!1),function(t){var s,h;(!f||e.test(t.nodeType))&&(!o||r(t))&&((s=n.startContainer,t==s&&i(s)&&n.startOffset==s.length)||(h=n.endContainer,t==h&&i(h)&&n.endOffset==0)||u.push(t))}),u}function dt(n){var i=typeof n.getName=="undefined"?"Range":n.getName();return"["+i+"("+t.inspectNode(n.startContainer)+":"+n.startOffset+", "+t.inspectNode(n.endContainer)+":"+n.endOffset+")]"}function s(n,t){if(this.range=n,this.clonePartiallySelectedTextNodes=t,!n.collapsed){this.sc=n.startContainer;this.so=n.startOffset;this.ec=n.endContainer;this.eo=n.endOffset;var r=n.commonAncestorContainer;this.sc===this.ec&&i(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===r&&!i(this.sc)?this.sc.childNodes[this.so]:tt(this.sc,r,!0),this._last=this.ec===r&&!i(this.ec)?this.ec.childNodes[this.eo-1]:tt(this.ec,r,!0))}}function ut(n){return function(t,i){for(var u,r=i?t:t.parentNode;r;){if(u=r.nodeType,at(n,u))return r;r=r.parentNode}return null}}function p(n,t){if(ur(n,t))throw new f("INVALID_NODE_TYPE_ERR");}function w(n,t){if(!at(t,n.nodeType))throw new f("INVALID_NODE_TYPE_ERR");}function ft(n,t){if(t<0||t>(i(n)?n.length:n.childNodes.length))throw new f("INDEX_SIZE_ERR");}function et(n,t){if(ni(n,!0)!==ni(t,!0))throw new f("WRONG_DOCUMENT_ERR");}function c(n){if(rr(n,!0))throw new f("NO_MODIFICATION_ALLOWED_ERR");}function ti(n,t){if(!n)throw new f(t);}function ii(n,t){return t<=(i(n)?n.length:n.childNodes.length)}function ri(n){return!!n.startContainer&&!!n.endContainer&&!(ki&&(t.isBrokenNode(n.startContainer)||t.isBrokenNode(n.endContainer)))&&o(n.startContainer)==o(n.endContainer)&&ii(n.startContainer,n.startOffset)&&ii(n.endContainer,n.endOffset)}function r(n){if(!ri(n))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+n.inspect()+")");}function fi(n,t){r(n);var u=n.startContainer,o=n.startOffset,f=n.endContainer,e=n.endOffset,s=u===f;i(f)&&e>0&&e<f.length&&nt(f,e,t);i(u)&&o>0&&o<u.length&&(u=nt(u,o,t),s?(e-=o,f=u):f==u.parentNode&&e>=h(u)&&e++,o=0);n.setStartAndEnd(u,o,f,e)}function ei(n){r(n);var t=n.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(n.cloneContents()),t.innerHTML}function ai(n){n.START_TO_START=ht;n.START_TO_END=oi;n.END_TO_END=fr;n.END_TO_START=si;n.NODE_BEFORE=hi;n.NODE_AFTER=ci;n.NODE_BEFORE_AND_AFTER=li;n.NODE_INSIDE=ct}function vi(n){ai(n);ai(n.prototype)}function yi(n,t){return function(){var l;r(this);var i=this.startContainer,f=this.startOffset,o=this.commonAncestorContainer,u=new s(this,!0),h,e;return i!==o&&(h=tt(i,o,!0),e=rt(h),i=e.node,f=e.offset),b(u,c),u.reset(),l=n(u),u.detach(),t(this,i,f,i,f),l}}function pi(t,f){function e(n,t){return function(i){w(i,gt);w(o(i),nr);var r=(n?vt:rt)(i);(t?l:a)(this,r.node,r.offset)}}function l(n,t,i){var r=n.endContainer,e=n.endOffset;(t!==n.startContainer||i!==n.startOffset)&&((o(t)!=o(r)||u(t,i,r,e)==1)&&(r=t,e=i),f(n,t,i,r,e))}function a(n,t,i){var r=n.startContainer,e=n.startOffset;(t!==n.endContainer||i!==n.endOffset)&&((o(t)!=o(r)||u(t,i,r,e)==-1)&&(r=t,e=i),f(n,r,e,t,i))}var b=function(){};b.prototype=n.rangePrototype;t.prototype=new b;d.extend(t.prototype,{setStart:function(n,t){p(n,!0);ft(n,t);l(this,n,t)},setEnd:function(n,t){p(n,!0);ft(n,t);a(this,n,t)},setStartAndEnd:function(){var n=arguments,i=n[0],r=n[1],u=i,t=r;switch(n.length){case 3:t=n[2];break;case 4:u=n[2];t=n[3]}f(this,i,r,u,t)},setBoundary:function(n,t,i){this["set"+(i?"Start":"End")](n,t)},setStartBefore:e(!0,!0),setStartAfter:e(!1,!0),setEndBefore:e(!0,!1),setEndAfter:e(!1,!1),collapse:function(n){r(this);n?f(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):f(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(n){p(n,!0);f(this,n,0,n,it(n))},selectNode:function(n){p(n,!1);w(n,gt);var t=vt(n),i=rt(n);f(this,t.node,t.offset,i.node,i.offset)},extractContents:yi(kt,f),deleteContents:yi(bt,f),canSurroundContents:function(){r(this);c(this.startContainer);c(this.endContainer);var n=new s(this,!0),t=n._first&&y(n._first,this)||n._last&&y(n._last,this);return n.detach(),!t},splitBoundaries:function(){fi(this)},splitBoundariesPreservingPositions:function(n){fi(this,n)},normalizeBoundaries:function(){var s,c;r(this);var t=this.startContainer,o=this.startOffset,n=this.endContainer,u=this.endOffset,a=function(t){var i=t.nextSibling;i&&i.nodeType==t.nodeType&&(n=t,u=t.length,t.appendData(i.data),v(i))},y=function(i){var r=i.previousSibling,e,f;r&&r.nodeType==i.nodeType&&(t=i,e=i.length,o=r.length,i.insertData(0,r.data),v(r),t==n?(u+=o,n=t):n==i.parentNode&&(f=h(i),u==f?(n=i,u=e):u>f&&u--))},l=!0,e;i(n)?u==n.length?a(n):u==0&&(e=n.previousSibling,e&&e.nodeType==n.nodeType&&(u=e.length,t==n&&(l=!1),e.appendData(n.data),v(n),n=e)):(u>0&&(s=n.childNodes[u-1],s&&i(s)&&a(s)),l=!this.collapsed);l?i(t)?o==0?y(t):o==t.length&&(e=t.nextSibling,e&&e.nodeType==t.nodeType&&(n==e&&(n=t,u+=t.length),t.appendData(e.data),v(e))):o<t.childNodes.length&&(c=t.childNodes[o],c&&i(c)&&y(c)):(t=n,o=u);f(this,t,o,n,u)},collapseToPoint:function(n,t){p(n,!0);ft(n,t);this.setStartAndEnd(n,t)}});vi(t)}function wi(n){n.collapsed=n.startContainer===n.endContainer&&n.startOffset===n.endOffset;n.commonAncestorContainer=n.collapsed?n.startContainer:t.getCommonAncestor(n.startContainer,n.endContainer)}function bi(n,i,r,u,f){n.startContainer=i;n.startOffset=r;n.endContainer=u;n.endOffset=f;n.document=t.getDocument(i);wi(n)}function l(n){this.startContainer=n;this.startOffset=0;this.endContainer=n;this.endOffset=0;this.document=n;wi(this)}var t=n.dom,d=n.util,lt=t.DomPosition,f=n.DOMException,i=t.isCharacterDataNode,h=t.getNodeIndex,a=t.isOrIsAncestorOf,g=t.getDocument,u=t.comparePoints,nt=t.splitDataNode,tt=t.getClosestAncestorIn,it=t.getNodeLength,at=t.arrayContains,o=t.getRootContainer,ki=n.features.crashyTextNodes,v=t.removeNode,ot,k,ui;s.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},next:function(){var n=this._current=this._next;return n&&(this._next=n!==this._last?n.nextSibling:null,i(n)&&this.clonePartiallySelectedTextNodes&&(n===this.ec&&(n=n.cloneNode(!0)).deleteData(this.eo,n.length-this.eo),this._current===this.sc&&(n=n.cloneNode(!0)).deleteData(0,this.so))),n},remove:function(){var n=this._current,t,r;i(n)&&(n===this.sc||n===this.ec)?(t=n===this.sc?this.so:0,r=n===this.ec?this.eo:n.length,t!=r&&n.deleteData(t,r-t)):n.parentNode&&v(n)},isPartiallySelectedSubtree:function(){var n=this._current;return y(n,this.range)},getSubtreeIterator:function(){var n;if(this.isSingleCharacterDataNode)n=this.range.cloneRange(),n.collapse(!1);else{n=new l(e(this.range));var t=this._current,i=t,r=0,u=t,f=it(t);a(t,this.sc)&&(i=this.sc,r=this.so);a(t,this.ec)&&(u=this.ec,f=this.eo);bi(n,i,r,u,f)}return new s(n,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var gt=[1,3,4,5,7,8,10],nr=[2,9,11],tr=[1,3,4,5,7,8,10,11],ir=[1,3,4,5,7,8];var ni=ut([9,11]),rr=ut([5,6,10,12]),ur=ut([6,10,12]);ot=document.createElement("style");k=!1;try{ot.innerHTML="<b>x<\/b>";k=ot.firstChild.nodeType==3}catch(er){}n.features.htmlParsingConforms=k;ui=k?function(n){var u=this.startContainer,e=g(u),r;if(!u)throw new f("INVALID_STATE_ERR");return r=null,u.nodeType==1?r=u:i(u)&&(r=t.parentElement(u)),r=r===null||r.nodeName=="HTML"&&t.isHtmlNamespace(g(r).documentElement)&&t.isHtmlNamespace(r)?e.createElement("body"):r.cloneNode(!1),r.innerHTML=n,t.fragmentFromNodeChildren(r)}:function(n){var r=e(this),i=r.createElement("body");return i.innerHTML=n,t.fragmentFromNodeChildren(i)};var st=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ht=0,oi=1,fr=2,si=3,hi=0,ci=1,li=2,ct=3;d.extend(n.rangePrototype,{compareBoundaryPoints:function(n,t){r(this);et(this.startContainer,t.startContainer);var i,f,e,o,s=n==si||n==ht?"start":"end",h=n==oi||n==ht?"start":"end";return i=this[s+"Container"],f=this[s+"Offset"],e=t[h+"Container"],o=t[h+"Offset"],u(i,f,e,o)},insertNode:function(n){if(r(this),w(n,tr),c(this.startContainer),a(n,this.startContainer))throw new f("HIERARCHY_REQUEST_ERR");var t=yt(n,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var n,t,u;return r(this),this.collapsed?e(this).createDocumentFragment():this.startContainer===this.endContainer&&i(this.startContainer)?(n=this.startContainer.cloneNode(!0),n.data=n.data.slice(this.startOffset,this.endOffset),t=e(this).createDocumentFragment(),t.appendChild(n),t):(u=new s(this,!0),n=wt(u),u.detach(),n)},canSurroundContents:function(){r(this);c(this.startContainer);c(this.endContainer);var n=new s(this,!0),t=n._first&&y(n._first,this)||n._last&&y(n._last,this);return n.detach(),!t},surroundContents:function(n){if(w(n,ir),!this.canSurroundContents())throw new f("INVALID_STATE_ERR");var t=this.extractContents();if(n.hasChildNodes())while(n.lastChild)n.removeChild(n.lastChild);yt(n,this.startContainer,this.startOffset);n.appendChild(t);this.selectNode(n)},cloneRange:function(){r(this);for(var t=new l(e(this)),i=st.length,n;i--;)n=st[i],t[n]=this[n];return t},toString:function(){var n,t,u;return r(this),n=this.startContainer,n===this.endContainer&&i(n)?n.nodeType==3||n.nodeType==4?n.data.slice(this.startOffset,this.endOffset):"":(t=[],u=new s(this,!0),b(u,function(n){(n.nodeType==3||n.nodeType==4)&&t.push(n.data)}),u.detach(),t.join(""))},compareNode:function(n){var t,i,e,u;if(r(this),t=n.parentNode,i=h(n),!t)throw new f("NOT_FOUND_ERR");return e=this.comparePoint(t,i),u=this.comparePoint(t,i+1),e<0?u>0?li:hi:u>0?ci:ct},comparePoint:function(n,t){return(r(this),ti(n,"HIERARCHY_REQUEST_ERR"),et(n,this.startContainer),u(n,t,this.startContainer,this.startOffset)<0)?-1:u(n,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:ui,toHtml:function(){return ei(this)},intersectsNode:function(n,t){var i,f,e,s;return(r(this),o(n)!=di(this))?!1:(i=n.parentNode,f=h(n),!i)?!0:(e=u(i,f,this.endContainer,this.endOffset),s=u(i,f+1,this.startContainer,this.startOffset),t?e<=0&&s>=0:e<0&&s>0)},isPointInRange:function(n,t){return r(this),ti(n,"HIERARCHY_REQUEST_ERR"),et(n,this.startContainer),u(n,t,this.startContainer,this.startOffset)>=0&&u(n,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(n){return pt(this,n,!1)},intersectsOrTouchesRange:function(n){return pt(this,n,!0)},intersection:function(n){if(this.intersectsRange(n)){var i=u(this.startContainer,this.startOffset,n.startContainer,n.startOffset),r=u(this.endContainer,this.endOffset,n.endContainer,n.endOffset),t=this.cloneRange();return i==-1&&t.setStart(n.startContainer,n.startOffset),r==1&&t.setEnd(n.endContainer,n.endOffset),t}return null},union:function(n){if(this.intersectsOrTouchesRange(n)){var t=this.cloneRange();return u(n.startContainer,n.startOffset,this.startContainer,this.startOffset)==-1&&t.setStart(n.startContainer,n.startOffset),u(n.endContainer,n.endOffset,this.endContainer,this.endOffset)==1&&t.setEnd(n.endContainer,n.endOffset),t}throw new f("Ranges do not intersect");},containsNode:function(n,t){return t?this.intersectsNode(n,!1):this.compareNode(n)==ct},containsNodeContents:function(n){return this.comparePoint(n,0)>=0&&this.comparePoint(n,it(n))<=0},containsRange:function(n){var t=this.intersection(n);return t!==null&&n.equals(t)},containsNodeText:function(n){var t=this.cloneRange(),i,r;return t.selectNode(n),i=t.getNodes([3]),i.length>0?(t.setStart(i[0],0),r=i.pop(),t.setEnd(r,r.length),this.containsRange(t)):this.containsNodeContents(n)},getNodes:function(n,t){return r(this),gi(this,n,t)},getDocument:function(){return e(this)},collapseBefore:function(n){this.setEndBefore(n);this.collapse(!1)},collapseAfter:function(n){this.setStartAfter(n);this.collapse(!0)},getBookmark:function(i){var o=e(this),r=n.createRange(o);i=i||t.getBody(o);r.selectNodeContents(i);var u=this.intersection(r),f=0,s=0;return u&&(r.setEnd(u.startContainer,u.startOffset),f=r.toString().length,s=f+u.toString().length),{start:f,end:s,containerNode:i}},moveToBookmark:function(n){var o=n.containerNode,t=0;this.setStart(o,0);this.collapse(!0);for(var s=[o],i,u=!1,h=!1,r,f,e;!h&&(i=s.pop());)if(i.nodeType==3)r=t+i.length,!u&&n.start>=t&&n.start<=r&&(this.setStart(i,n.start-t),u=!0),u&&n.end>=t&&n.end<=r&&(this.setEnd(i,n.end-t),h=!0),t=r;else for(e=i.childNodes,f=e.length;f--;)s.push(e[f])},getName:function(){return"DomRange"},equals:function(n){return l.rangesEqual(this,n)},isValid:function(){return ri(this)},inspect:function(){return dt(this)},detach:function(){}});pi(l,bi);d.extend(l,{rangeProperties:st,RangeIterator:s,copyComparisonConstants:vi,createPrototypeRange:pi,inspect:dt,toHtml:ei,getRangeDocument:e,rangesEqual:function(n,t){return n.startContainer===t.startContainer&&n.startOffset===t.startOffset&&n.endContainer===t.endContainer&&n.endOffset===t.endOffset}});n.DomRange=l}),n.createCoreModule("WrappedRange",["DomRange"],function(n,t){var o,r,i=n.dom,c=n.util,u=i.DomPosition,f=n.DomRange,e=i.getBody,s=i.getContentDocument,h=i.isCharacterDataNode,v,y;if(n.features.implementsDomRange&&function(){function h(n){for(var i=b.length,t;i--;)t=b[i],n[t]=n.nativeRange[t];n.collapsed=n.startContainer===n.endContainer&&n.startOffset===n.endOffset}function k(n,t,i,r,u){var f=n.startContainer!==t||n.startOffset!=i,e=n.endContainer!==r||n.endOffset!=u,o=!n.equals(n.nativeRange);(f||e||o)&&(n.setEnd(r,u),n.setStart(t,i))}var r,b=f.rangeProperties,a,l,u,v,y,p,w;o=function(n){if(!n)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=n;h(this)};f.createPrototypeRange(o,k);r=o.prototype;r.selectNode=function(n){this.nativeRange.selectNode(n);h(this)};r.cloneContents=function(){return this.nativeRange.cloneContents()};r.surroundContents=function(n){this.nativeRange.surroundContents(n);h(this)};r.collapse=function(n){this.nativeRange.collapse(n);h(this)};r.cloneRange=function(){return new o(this.nativeRange.cloneRange())};r.refresh=function(){h(this)};r.toString=function(){return this.nativeRange.toString()};l=document.createTextNode("test");e(document).appendChild(l);u=document.createRange();u.setStart(l,0);u.setEnd(l,0);try{u.setStart(l,1);r.setStart=function(n,t){this.nativeRange.setStart(n,t);h(this)};r.setEnd=function(n,t){this.nativeRange.setEnd(n,t);h(this)};a=function(n){return function(t){this.nativeRange[n](t);h(this)}}}catch(d){r.setStart=function(n,t){try{this.nativeRange.setStart(n,t)}catch(i){this.nativeRange.setEnd(n,t);this.nativeRange.setStart(n,t)}h(this)};r.setEnd=function(n,t){try{this.nativeRange.setEnd(n,t)}catch(i){this.nativeRange.setStart(n,t);this.nativeRange.setEnd(n,t)}h(this)};a=function(n,t){return function(i){try{this.nativeRange[n](i)}catch(r){this.nativeRange[t](i);this.nativeRange[n](i)}h(this)}}}r.setStartBefore=a("setStartBefore","setEndBefore");r.setStartAfter=a("setStartAfter","setEndAfter");r.setEndBefore=a("setEndBefore","setStartBefore");r.setEndAfter=a("setEndAfter","setStartAfter");r.selectNodeContents=function(n){this.setStartAndEnd(n,0,i.getNodeLength(n))};u.selectNodeContents(l);u.setEnd(l,3);v=document.createRange();v.selectNodeContents(l);v.setEnd(l,4);v.setStart(l,2);r.compareBoundaryPoints=u.compareBoundaryPoints(u.START_TO_END,v)==-1&&u.compareBoundaryPoints(u.END_TO_START,v)==1?function(n,t){return t=t.nativeRange||t,n==t.START_TO_END?n=t.END_TO_START:n==t.END_TO_START&&(n=t.START_TO_END),this.nativeRange.compareBoundaryPoints(n,t)}:function(n,t){return this.nativeRange.compareBoundaryPoints(n,t.nativeRange||t)};y=document.createElement("div");y.innerHTML="123";p=y.firstChild;w=e(document);w.appendChild(y);u.setStart(p,1);u.setEnd(p,2);u.deleteContents();p.data=="13"&&(r.deleteContents=function(){this.nativeRange.deleteContents();h(this)},r.extractContents=function(){var n=this.nativeRange.extractContents();return h(this),n});w.removeChild(y);w=null;c.isHostMethod(u,"createContextualFragment")&&(r.createContextualFragment=function(n){return this.nativeRange.createContextualFragment(n)});e(document).removeChild(l);r.getName=function(){return"WrappedRange"};n.WrappedRange=o;n.createNativeRange=function(n){return n=s(n,t,"createNativeRange"),n.createRange()}}(),n.features.implementsTextRange){var p=function(n){var e=n.parentElement(),t=n.duplicate(),r,f,u;return t.collapse(!0),r=t.parentElement(),t=n.duplicate(),t.collapse(!1),f=t.parentElement(),u=r==f?r:i.getCommonAncestor(r,f),u==e?u:i.getCommonAncestor(e,u)},w=function(n){return n.compareEndPoints("StartToEnd",n)==0},l=function(n,t,r,f,e){var c=n.duplicate(),o,k,s,g,y,it;if(c.collapse(r),o=c.parentElement(),i.isOrIsAncestorOf(t,o)||(o=t),!o.canHaveHTML)return k=new u(o.parentNode,i.getNodeIndex(o)),{boundaryPosition:k,nodeInfo:{nodeIndex:k.offset,containerElement:k.node}};s=i.getDocument(o).createElement("span");s.parentNode&&i.removeNode(s);for(var p,rt=r?"StartToStart":"StartToEnd",w,d,nt,b,l=e&&e.containerElement==o?e.nodeIndex:0,tt=o.childNodes.length,a=tt,v=a;;){if(v==tt?o.appendChild(s):o.insertBefore(s,o.childNodes[v]),c.moveToElementText(s),p=c.compareEndPoints(rt,n),p==0||l==a)break;else if(p==-1)if(a==l+1)break;else l=v;else a=a==l+1?l:v;v=Math.floor((l+a)/2);o.removeChild(s)}if(b=s.nextSibling,p==-1&&b&&h(b)){if(c.setEndPoint(r?"EndToStart":"EndToEnd",n),/[\r\n]/.test(b.data))for(y=c.duplicate(),it=y.text.replace(/\r\n/g,"\r").length,g=y.moveStart("character",it);(p=y.compareEndPoints("StartToEnd",y))==-1;)g++,y.moveStart("character",1);else g=c.text.length;nt=new u(b,g)}else w=(f||!r)&&s.previousSibling,d=(f||r)&&s.nextSibling,nt=d&&h(d)?new u(d,0):w&&h(w)?new u(w,w.data.length):new u(o,i.getNodeIndex(s));return i.removeNode(s),{boundaryPosition:nt,nodeInfo:{nodeIndex:v,containerElement:o}}},a=function(n,t){var u,f,s=n.offset,l=i.getDocument(n.node),r,c,o=e(l).createTextRange(),a=h(n.node);return a?(u=n.node,f=u.parentNode):(c=n.node.childNodes,u=s<c.length?c[s]:null,f=n.node),r=l.createElement("span"),r.innerHTML="&#feff;",u?f.insertBefore(r,u):f.appendChild(r),o.moveToElementText(r),o.collapse(!t),f.removeChild(r),a&&o[t?"moveStart":"moveEnd"]("character",s),o};r=function(n){this.textRange=n;this.refresh()};r.prototype=new f(document);r.prototype.refresh=function(){var n,t,i,r=p(this.textRange);w(this.textRange)?t=n=l(this.textRange,r,!0,!0).boundaryPosition:(i=l(this.textRange,r,!0,!1),n=i.boundaryPosition,t=l(this.textRange,r,!1,!1,i.nodeInfo).boundaryPosition);this.setStart(n.node,n.offset);this.setEnd(t.node,t.offset)};r.prototype.getName=function(){return"WrappedTextRange"};f.copyComparisonConstants(r);v=function(n){if(n.collapsed)return a(new u(n.startContainer,n.startOffset),!0);var i=a(new u(n.startContainer,n.startOffset),!0),r=a(new u(n.endContainer,n.endOffset),!1),t=e(f.getRangeDocument(n)).createTextRange();return t.setEndPoint("StartToStart",i),t.setEndPoint("EndToEnd",r),t};r.rangeToTextRange=v;r.prototype.toTextRange=function(){return v(this)};n.WrappedTextRange=r;(!n.features.implementsDomRange||n.config.preferTextRange)&&(y=function(n){return n("return this;")()}(Function),typeof y.Range=="undefined"&&(y.Range=r),n.createNativeRange=function(n){return n=s(n,t,"createNativeRange"),e(n).createTextRange()},n.WrappedRange=r)}n.createRange=function(i){return i=s(i,t,"createRange"),new n.WrappedRange(n.createNativeRange(i))};n.createRangyRange=function(n){return n=s(n,t,"createRangyRange"),new f(n)};c.createAliasForDeprecatedMethod(n,"createIframeRange","createRange");c.createAliasForDeprecatedMethod(n,"createIframeRangyRange","createRangyRange");n.addShimListener(function(t){var i=t.document;typeof i.createRange=="undefined"&&(i.createRange=function(){return n.createRange(i)});i=t=null})}),n.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(n,t){function yt(n){return typeof n=="string"?/^backward(s)?$/i.test(n):!!n}function ft(n,i){if(n){if(f.isWindow(n))return n;if(n instanceof h)return n.win;var r=f.getContentDocument(n,t,i);return f.getWindow(r)}return window}function bi(n){return ft(n,"getWinSelection").getSelection()}function fi(n){return ft(n,"getDocSelection").document.selection}function ei(n){var t=!1;return n.anchorNode&&(t=f.comparePoints(n.anchorNode,n.anchorOffset,n.focusNode,n.focusOffset)==1),t}function nt(n,t,i){var r=i?"end":"start",u=i?"start":"end";n.anchorNode=t[r+"Container"];n.anchorOffset=t[r+"Offset"];n.focusNode=t[u+"Container"];n.focusOffset=t[u+"Offset"]}function ki(n){var t=n.nativeSelection;n.anchorNode=t.anchorNode;n.anchorOffset=t.anchorOffset;n.focusNode=t.focusNode;n.focusOffset=t.focusOffset}function v(n){n.anchorNode=n.focusNode=null;n.anchorOffset=n.focusOffset=0;n.rangeCount=0;n.isCollapsed=!0;n._ranges.length=0}function kt(t){var i;return t instanceof k?(i=n.createNativeRange(t.getDocument()),i.setEnd(t.endContainer,t.endOffset),i.setStart(t.startContainer,t.startOffset)):t instanceof at?i=t.nativeRange:r.implementsDomRange&&t instanceof f.getWindow(t.startContainer).Range&&(i=t),i}function di(n){if(!n.length||n[0].nodeType!=1)return!1;for(var t=1,i=n.length;t<i;++t)if(!f.isAncestorOf(n[0],n[t]))return!1;return!0}function dt(n){var i=n.getNodes();if(!di(i))throw t.createError("getSingleElementFromRange: range "+n.inspect()+" did not consist of a single element");return i[0]}function gt(n){return!!n&&typeof n.text!="undefined"}function ci(n,t){var i=new at(t);n._ranges=[i];nt(n,i,!1);n.rangeCount=1;n.isCollapsed=i.collapsed}function tt(t){var i,u,f,r;if(t._ranges.length=0,t.docSelection.type=="None")v(t);else if(i=t.docSelection.createRange(),gt(i))ci(t,i);else{for(t.rangeCount=i.length,f=e(i.item(0)),r=0;r<t.rangeCount;++r)u=n.createRange(f),u.selectNode(i.item(r)),t._ranges.push(u);t.isCollapsed=t.rangeCount==1&&t._ranges[0].collapsed;nt(t,t._ranges[t.rangeCount-1],!1)}}function li(n,i){for(var r=n.docSelection.createRange(),o=dt(i),s=e(r.item(0)),u=y(s).createControlRange(),f=0,h=r.length;f<h;++f)u.add(r.item(f));try{u.add(o)}catch(c){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}u.select();tt(n)}function h(n,t,i){this.nativeSelection=n;this.docSelection=t;this._ranges=[];this.win=i;this.refresh()}function ai(n){n.win=n.anchorNode=n.focusNode=n._ranges=null;n.rangeCount=n.anchorOffset=n.focusOffset=0;n.detached=!0}function ni(n,t){for(var i=b.length,r,u;i--;)if(r=b[i],u=r.selection,t=="deleteAll")ai(u);else if(r.win==n)return t=="delete"?(b.splice(i,1),!0):u;return t=="deleteAll"&&(b.length=0),null}function vi(n,i){for(var o=e(i[0].startContainer),u=y(o).createControlRange(),r=0,f,s=i.length;r<s;++r){f=dt(i[r]);try{u.add(f)}catch(h){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)");}}u.select();tt(n)}function yi(n,t){if(n.win.document!=e(t))throw new rt("WRONG_DOCUMENT_ERR");}function pi(t){return function(i,r){var u;this.rangeCount?(u=this.getRangeAt(0),u["set"+(t?"Start":"End")](i,r)):(u=n.createRange(this.win.document),u.setStartAndEnd(i,r));this.setSingleRange(u,this.isBackward())}}function wi(n){var i=[],u=new ui(n.anchorNode,n.anchorOffset),f=new ui(n.focusNode,n.focusOffset),e=typeof n.getName=="function"?n.getName():"Selection",t,r;if(typeof n.rangeCount!="undefined")for(t=0,r=n.rangeCount;t<r;++t)i[t]=k.inspect(n.getRangeAt(t));return"["+e+"(Ranges: "+i.join(", ")+")(anchor: "+u.inspect()+", focus: "+f.inspect()+"]"}var et,o,p,u,g,wt,s,hi,st,b,ht,i,ti,ct,ii,it;n.config.checkSelectionRanges=!0;var ri="boolean",lt="number",f=n.dom,c=n.util,l=c.isHostMethod,k=n.DomRange,at=n.WrappedRange,rt=n.DOMException,ui=f.DomPosition,d,ut,r=n.features,a="Control",e=f.getDocument,y=f.getBody,vt=k.rangesEqual;if(et=l(window,"getSelection"),o=c.isHostObject(document,"selection"),r.implementsWinGetSelection=et,r.implementsDocSelection=o,p=o&&(!et||n.config.preferTextRange),p)d=fi,n.isSelectionValid=function(n){var t=ft(n,"isSelectionValid").document,i=t.selection;return i.type!="None"||e(i.createRange().parentElement())==t};else if(et)d=bi,n.isSelectionValid=function(){return!0};else return t.fail("Neither document.selection or window.getSelection() detected."),!1;if(n.getNativeSelection=d,u=d(),!u)return t.fail("Native selection was null (possibly issue 138?)"),!1;var oi=n.createNativeRange(document),pt=y(document),w=c.areHostProperties(u,["anchorNode","focusNode","anchorOffset","focusOffset"]);r.selectionHasAnchorAndFocus=w;g=l(u,"extend");r.selectionHasExtend=g;wt=typeof u.rangeCount==lt;r.selectionHasRangeCount=wt;var ot=!1,si=!0,bt=g?function(t,i){var u=k.getRangeDocument(i),r=n.createRange(u);r.collapseToPoint(i.endContainer,i.endOffset);t.addRange(kt(r));t.extend(i.startContainer,i.startOffset)}:null;if(c.areHostMethods(u,["addRange","getRangeAt","removeAllRanges"])&&typeof u.rangeCount==lt&&r.implementsDomRange&&function(){var t=window.getSelection(),i,h,o;if(t){var s=t.rangeCount,l=s>1,u=[],a=ei(t);for(i=0;i<s;++i)u[i]=t.getRangeAt(i);var c=f.createTestElement(document,"",!1),e=c.appendChild(document.createTextNode("   ")),r=document.createRange();for(r.setStart(e,1),r.collapse(!0),t.removeAllRanges(),t.addRange(r),si=t.rangeCount==1,t.removeAllRanges(),l||(h=window.navigator.appVersion.match(/Chrome\/(.*?) /),h&&parseInt(h[1])>=36?ot=!1:(o=r.cloneRange(),r.setStart(e,0),o.setEnd(e,3),o.setStart(e,2),t.addRange(r),t.addRange(o),ot=t.rangeCount==2)),f.removeNode(c),t.removeAllRanges(),i=0;i<s;++i)i==0&&a?bt?bt(t,u[i]):(n.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(u[i])):t.addRange(u[i])}}(),r.selectionSupportsMultipleRanges=ot,r.collapsedNonEditableSelectionsSupported=si,s=!1,pt&&l(pt,"createControlRange")&&(hi=pt.createControlRange(),c.areHostProperties(hi,["item","add"])&&(s=!0)),r.implementsControlRange=s,ut=w?function(n){return n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset}:function(n){return n.rangeCount?n.getRangeAt(n.rangeCount-1).collapsed:!1},l(u,"getRangeAt")?st=function(n,t){try{return n.getRangeAt(t)}catch(i){return null}}:w&&(st=function(t){var r=e(t.anchorNode),i=n.createRange(r);return i.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),i}),h.prototype=n.selectionPrototype,b=[],ht=function(n){if(n&&n instanceof h)return n.refresh(),n;n=ft(n,"getNativeSelection");var t=ni(n),i=d(n),r=o?fi(n):null;return t?(t.nativeSelection=i,t.docSelection=r,t.refresh()):(t=new h(i,r,n),b.push({win:n,selection:t})),t},n.getSelection=ht,c.createAliasForDeprecatedMethod(n,"getIframeSelection","getSelection"),i=h.prototype,!p&&w&&c.areHostMethods(u,["removeAllRanges","addRange"]))i.removeAllRanges=function(){this.nativeSelection.removeAllRanges();v(this)},ti=function(n,t){bt(n.nativeSelection,t);n.refresh()},i.addRange=wt?function(t,i){var u,f,r;if(s&&o&&this.docSelection.type==a)li(this,t);else if(yt(i)&&g)ti(this,t);else{ot?u=this.rangeCount:(this.removeAllRanges(),u=0);f=kt(t).cloneRange();try{this.nativeSelection.addRange(f)}catch(e){}this.rangeCount=this.nativeSelection.rangeCount;this.rangeCount==u+1?(n.config.checkSelectionRanges&&(r=st(this.nativeSelection,this.rangeCount-1),r&&!vt(r,t)&&(t=new at(r))),this._ranges[this.rangeCount-1]=t,nt(this,t,it(this.nativeSelection)),this.isCollapsed=ut(this)):this.refresh()}}:function(n,t){yt(t)&&g?ti(this,n):(this.nativeSelection.addRange(kt(n)),this.refresh())},i.setRanges=function(n){if(s&&o&&n.length>1)vi(this,n);else{this.removeAllRanges();for(var t=0,i=n.length;t<i;++t)this.addRange(n[t])}};else if(l(u,"empty")&&l(oi,"select")&&s&&p)i.removeAllRanges=function(){var n,t,i;try{this.docSelection.empty();this.docSelection.type!="None"&&(this.anchorNode?n=e(this.anchorNode):this.docSelection.type==a&&(t=this.docSelection.createRange(),t.length&&(n=e(t.item(0)))),n&&(i=y(n).createTextRange(),i.select(),this.docSelection.empty()))}catch(r){}v(this)},i.addRange=function(t){this.docSelection.type==a?li(this,t):(n.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,nt(this,t,!1))},i.setRanges=function(n){this.removeAllRanges();var t=n.length;t>1?vi(this,n):t&&this.addRange(n[0])};else return t.fail("No means of selecting a Range or TextRange was found"),!1;if(i.getRangeAt=function(n){if(n<0||n>=this.rangeCount)throw new rt("INDEX_SIZE_ERR");else return this._ranges[n].cloneRange()},p)ct=function(t){var i;n.isSelectionValid(t.win)?i=t.docSelection.createRange():(i=y(t.win.document).createTextRange(),i.collapse(!0));t.docSelection.type==a?tt(t):gt(i)?ci(t,i):v(t)};else if(l(u,"getRangeAt")&&typeof u.rangeCount==lt)ct=function(t){if(s&&o&&t.docSelection.type==a)tt(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var i=0,r=t.rangeCount;i<r;++i)t._ranges[i]=new n.WrappedRange(t.nativeSelection.getRangeAt(i));nt(t,t._ranges[t.rangeCount-1],it(t.nativeSelection));t.isCollapsed=ut(t)}else v(t)};else if(w&&typeof u.isCollapsed==ri&&typeof oi.collapsed==ri&&r.implementsDomRange)ct=function(n){var t,i=n.nativeSelection;i.anchorNode?(t=st(i,0),n._ranges=[t],n.rangeCount=1,ki(n),n.isCollapsed=ut(n)):v(n)};else return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;i.refresh=function(n){var i=n?this._ranges.slice(0):null,r=this.anchorNode,u=this.anchorOffset,t;if(ct(this),n){if((t=i.length,t!=this._ranges.length)||this.anchorNode!=r||this.anchorOffset!=u)return!0;while(t--)if(!vt(i[t],this._ranges[t]))return!0;return!1}};ii=function(n,t){var r=n.getAllRanges(),i,u;for(n.removeAllRanges(),i=0,u=r.length;i<u;++i)vt(t,r[i])||n.addRange(r[i]);n.rangeCount||v(n)};i.removeRange=s&&o?function(n){var t,o;if(this.docSelection.type==a){var i=this.docSelection.createRange(),s=dt(n),h=e(i.item(0)),r=y(h).createControlRange(),u,f=!1;for(t=0,o=i.length;t<o;++t)u=i.item(t),u!==s||f?r.add(i.item(t)):f=!0;r.select();tt(this)}else ii(this,n)}:function(n){ii(this,n)};!p&&w&&r.implementsDomRange?(it=ei,i.isBackward=function(){return it(this)}):it=i.isBackward=function(){return!1};i.isBackwards=i.isBackward;i.toString=function(){for(var t=[],n=0,i=this.rangeCount;n<i;++n)t[n]=""+this._ranges[n];return t.join("")};i.collapse=function(t,i){yi(this,t);var r=n.createRange(t);r.collapseToPoint(t,i);this.setSingleRange(r);this.isCollapsed=!0};i.collapseToStart=function(){if(this.rangeCount){var n=this._ranges[0];this.collapse(n.startContainer,n.startOffset)}else throw new rt("INVALID_STATE_ERR");};i.collapseToEnd=function(){if(this.rangeCount){var n=this._ranges[this.rangeCount-1];this.collapse(n.endContainer,n.endOffset)}else throw new rt("INVALID_STATE_ERR");};i.selectAllChildren=function(t){yi(this,t);var i=n.createRange(t);i.selectNodeContents(t);this.setSingleRange(i)};i.deleteFromDocument=function(){var t,r,n,i,u;if(s&&o&&this.docSelection.type==a){for(t=this.docSelection.createRange();t.length;)r=t.item(0),t.remove(r),f.removeNode(r);this.refresh()}else if(this.rangeCount&&(n=this.getAllRanges(),n.length)){for(this.removeAllRanges(),i=0,u=n.length;i<u;++i)n[i].deleteContents();this.addRange(n[u-1])}};i.eachRange=function(n,t){for(var i=0,r=this._ranges.length;i<r;++i)if(n(this.getRangeAt(i)))return t};i.getAllRanges=function(){var n=[];return this.eachRange(function(t){n.push(t)}),n};i.setSingleRange=function(n,t){this.removeAllRanges();this.addRange(n,t)};i.callMethodOnEachRange=function(n,t){var i=[];return this.eachRange(function(r){i.push(r[n].apply(r,t||[]))}),i};i.setStart=pi(!0);i.setEnd=pi(!1);n.rangePrototype.select=function(n){ht(this.getDocument()).setSingleRange(this,n)};i.changeEachRange=function(n){var t=[],i=this.isBackward();this.eachRange(function(i){n(i);t.push(i)});this.removeAllRanges();i&&t.length==1?this.addRange(t[0],"backward"):this.setRanges(t)};i.containsNode=function(n,t){return this.eachRange(function(i){return i.containsNode(n,t)},!0)||!1};i.getBookmark=function(n){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[n])}};i.moveToBookmark=function(t){for(var i=[],f=0,u,r;u=t.rangeBookmarks[f++];)r=n.createRange(this.win),r.moveToBookmark(u),i.push(r);t.backward?this.setSingleRange(i[0],"backward"):this.setRanges(i)};i.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}};i.restoreRanges=function(n){this.removeAllRanges();for(var t=0,i;i=n.ranges[t];++t)this.addRange(i,n.backward&&t==0)};i.toHtml=function(){var n=[];return this.eachRange(function(t){n.push(k.toHtml(t))}),n.join("")};r.implementsTextRange&&(i.getNativeTextRange=function(){var r,i;if(r=this.docSelection){if(i=r.createRange(),gt(i))return i;throw t.createError("getNativeTextRange: selection is a control selection");}else{if(this.rangeCount>0)return n.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range");}});i.getName=function(){return"WrappedSelection"};i.inspect=function(){return wi(this)};i.detach=function(){ni(this.win,"delete");ai(this)};h.detachAll=function(){ni(null,"deleteAll")};h.inspect=wi;h.isDirectionBackward=yt;n.Selection=h;n.selectionPrototype=i;n.addShimListener(function(n){typeof n.getSelection=="undefined"&&(n.getSelection=function(){return ht(n)});n=null})}),d=!1,v=function(){d||(d=!0,!n.initialized&&n.config.autoInitialize&&k())},i&&(document.readyState=="complete"?v():(t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",v,!1),h(window,"load",v))),n},this),function(n,t){typeof define=="function"&&define.amd?define(["./rangy-core"],n):typeof module!="undefined"&&typeof exports=="object"?module.exports=n(require("rangy")):n(t.rangy)}(function(n){return n.createModule("ClassApplier",["WrappedSelection"],function(n,t){function v(n,t){for(var i in n)if(n.hasOwnProperty(i)&&t(i,n[i])===!1)return!1;return!0}function ut(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ft(n,t){return!!n&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(n)}function y(n,t){if(typeof n.classList=="object")return n.classList.contains(t);var i=typeof n.className=="string",r=i?n.className:n.getAttribute("class");return ft(r,t)}function f(n,t){if(typeof n.classList=="object")n.classList.add(t);else{var r=typeof n.className=="string",i=r?n.className:n.getAttribute("class");i?ft(i,t)||(i+=" "+t):i=t;r?n.className=i:n.setAttribute("class",i)}}function et(n){var t=typeof n.className=="string";return t?n.className:n.getAttribute("class")}function p(n){return n&&n.split(/\s+/).sort().join(" ")}function w(n){return p(et(n))}function ot(n,t){return w(n)==w(t)}function st(n,t){for(var r=t.split(/\s+/),i=0,u=r.length;i<u;++i)if(!y(n,ut(r[i])))return!1;return!0}function dt(n){var t=n.parentNode;return t&&t.nodeType==1&&!/^(textarea|style|script|select|iframe)$/i.test(t.nodeName)}function gt(n,t,i,r,u){var e=n.node,f=n.offset,s=e,o=f;e==r&&f>u&&++o;e==t&&(f==i||f==i+1)&&(s=r,o+=u-i);e==t&&f>i+1&&--o;n.node=s;n.offset=o}function ni(n,t,i){n.node==t&&n.offset>i&&--n.offset}function b(n,t,i,f){i==-1&&(i=t.childNodes.length);var e=n.parentNode,o=r.getNodeIndex(n);u(f,function(n){gt(n,e,o,t,i)});t.childNodes.length==i?t.appendChild(n):t.insertBefore(n,t.childNodes[i])}function ht(n,t){var i=n.parentNode,f=r.getNodeIndex(n);u(t,function(n){ni(n,i,f)});r.removeNode(n)}function ti(n,t,i,r,u){for(var f,e=[];f=n.firstChild;)b(f,t,i++,u),e.push(f);return r&&ht(n,u),e}function k(n,t){return ti(n,n.parentNode,r.getNodeIndex(n),!0,t)}function d(n,t){var r=n.cloneRange(),i,u;return r.selectNodeContents(t),i=r.intersection(n),u=i?i.toString():"",u!=""}function ct(n){for(var t=n.getNodes([3]),u=0,i,r;(i=t[u])&&!d(n,i);)++u;for(r=t.length-1;(i=t[r])&&!d(n,i);)--r;return t.slice(u,r+1)}function lt(n,t){if(n.attributes.length!=t.attributes.length)return!1;for(var u=0,e=n.attributes.length,i,r,f;u<e;++u)if(i=n.attributes[u],f=i.name,f!="class"&&((r=t.attributes.getNamedItem(f),i===null!=(r===null))||i.specified!=r.specified||i.specified&&i.nodeValue!==r.nodeValue))return!1;return!0}function at(n,t){for(var i=0,u=n.attributes.length,r;i<u;++i)if(r=n.attributes[i].name,!(t&&l(t,r))&&n.attributes[i].specified&&r!="class")return!0;return!1}function vt(n){var t;return n&&n.nodeType==1&&((t=n.parentNode)&&t.nodeType==9&&t.designMode=="on"||e(n)&&!e(n.parentNode))}function yt(n){return(e(n)||n.nodeType!=1&&e(n.parentNode))&&!vt(n)}function pt(n){return n&&n.nodeType==1&&!ii.test(h(n,"display"))}function ui(n){if(n.data.length==0)return!0;if(ri.test(n.data))return!1;var t=h(n.parentNode,"whiteSpace");switch(t){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(n.data))return!1}return pt(n.previousSibling)||pt(n.nextSibling)}function g(n){for(var i=[],t,r=0;t=n[r++];)i.push(new rt(t.startContainer,t.startOffset),new rt(t.endContainer,t.endOffset));return i}function nt(n,t){for(var i=0,f,r,u,e=n.length;i<e;++i)f=n[i],r=t[i*2],u=t[i*2+1],f.setStartAndEnd(r.node,r.offset,u.node,u.offset)}function fi(n,t){return r.isCharacterDataNode(n)?t==0?!!n.previousSibling:t==n.length?!!n.nextSibling:!0:t>0&&t<n.childNodes.length}function o(n,i,u,f){var e,s,v=u==0,h,l,a,c;if(r.isAncestorOf(i,n))return n;if(r.isCharacterDataNode(i)){if(h=r.getNodeIndex(i),u==0)u=h;else if(u==i.length)u=h+1;else throw t.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+u+" in "+i.data);i=i.parentNode}if(fi(i,u)){for(e=i.cloneNode(!1),s=i.parentNode,e.id&&e.removeAttribute("id"),a=0;l=i.childNodes[u];)b(l,e,a++,f);return b(e,s,r.getNodeIndex(i)+1,f),i==n?e:o(n,s,r.getNodeIndex(e),f)}return n!=i?(e=i.parentNode,c=r.getNodeIndex(i),v||c++,o(n,e,c,f)):n}function ei(n,t){return n.namespaceURI==t.namespaceURI&&n.tagName.toLowerCase()==t.tagName.toLowerCase()&&ot(n,t)&&lt(n,t)&&h(n,"display")=="inline"&&h(t,"display")=="inline"}function wt(n){var t=n?"nextSibling":"previousSibling";return function(i,r){var e=i.parentNode,u=i[t],f;if(u){if(u&&u.nodeType==3)return u}else if(r&&(u=e[t],u&&u.nodeType==1&&ei(e,u)&&(f=u[n?"firstChild":"lastChild"],f&&f.nodeType==3)))return f;return null}}function tt(n){this.isElementMerge=n.nodeType==1;this.textNodes=[];var t=this.isElementMerge?n.lastChild:n;t&&(this.textNodes[0]=t)}function c(n,t,i){var e,u,c,o,r=this,s,f,l,h;if(r.cssClass=r.className=n,s=null,f={},typeof t=="object"&&t!==null){for(typeof t.elementTagName!="undefined"&&(t.elementTagName=t.elementTagName.toLowerCase()),i=t.tagNames,s=t.elementProperties,f=t.elementAttributes,u=0;o=bt[u++];)t.hasOwnProperty(o)&&(r[o]=t[o]);e=t.normalize}else e=t;if(r.normalize=typeof e=="undefined"?!0:e,r.attrExceptions=[],l=document.createElement(r.elementTagName),r.elementProperties=r.copyPropertiesToElement(s,l,!0),v(f,function(n,t){r.attrExceptions.push(n);f[n]=""+t}),r.elementAttributes=f,r.elementSortedClassName=r.elementProperties.hasOwnProperty("className")?p(r.elementProperties.className+" "+n):n,r.applyToAnyTagName=!1,h=typeof i,h=="string")i=="*"?r.applyToAnyTagName=!0:r.tagNames=ut(i.toLowerCase()).split(/\s*,\s*/);else if(h=="object"&&typeof i.length=="number")for(r.tagNames=[],u=0,c=i.length;u<c;++u)i[u]=="*"?r.applyToAnyTagName=!0:r.tagNames.push(i[u].toLowerCase());else r.tagNames=[r.elementTagName]}function hi(n,t,i){return new c(n,t,i)}var r=n.dom,rt=r.DomPosition,l=r.arrayContains,a=n.util,u=a.forEach,kt=a.isHostMethod(document,"createElementNS"),s=function(){function n(n,t,i){return t&&i?" ":""}return function(t,i){if(typeof t.classList=="object")t.classList.remove(i);else{var u=typeof t.className=="string",r=u?t.className:t.getAttribute("class");r=r.replace(new RegExp("(^|\\s)"+i+"(\\s|$)"),n);u?t.className=r:t.setAttribute("class",r)}}}(),h=r.getComputedStyleProperty,e=function(){var n=document.createElement("div");return typeof n.isContentEditable=="boolean"?function(n){return n&&n.nodeType==1&&n.isContentEditable}:function(n){return!n||n.nodeType!=1||n.contentEditable=="false"?!1:n.contentEditable=="true"||e(n.parentNode)}}(),ii=/^inline(-block|-table)?$/i,ri=/[^\r\n\t\f \u200B]/,oi=wt(!1),si=wt(!0),bt,it;tt.prototype={doMerge:function(n){var f=this.textNodes,t=f[0];if(f.length>1){var o=r.getNodeIndex(t),s=[],e=0,i;u(f,function(f,h){i=f.parentNode;h>0&&(i.removeChild(f),i.hasChildNodes()||r.removeNode(i),n&&u(n,function(n){n.node==f&&(n.node=t,n.offset+=e);n.node==i&&n.offset>o&&(--n.offset,n.offset==o+1&&h<len-1&&(n.node=t,n.offset=e))}));s[h]=f.data;e+=f.data.length});t.data=s.join("")}return t.data},getLength:function(){for(var n=this.textNodes.length,t=0;n--;)t+=this.textNodes[n].length;return t},toString:function(){var n=[];return u(this.textNodes,function(t,i){n[i]="'"+t.data+"'"}),"[Merge("+n.join(",")+")]"}};bt=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"];it={};c.prototype={elementTagName:"span",elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(n,t,i){var u,s,o={},h,e,c,l;for(var r in n)if(n.hasOwnProperty(r))if(e=n[r],c=t[r],r=="className")f(t,e),f(t,this.className),t[r]=p(t[r]),i&&(o[r]=e);else if(r=="style"){s=c;i&&(o[r]=h={});for(u in n[r])n[r].hasOwnProperty(u)&&(s[u]=e[u],i&&(h[u]=s[u]));this.attrExceptions.push(r)}else t[r]=e,i&&(o[r]=t[r],l=it.hasOwnProperty(r)?it[r]:r,this.attrExceptions.push(l));return i?o:""},copyAttributesToElement:function(n,t){for(var i in n)n.hasOwnProperty(i)&&!/^class(?:Name)?$/i.test(i)&&t.setAttribute(i,n[i])},appliesToElement:function(n){return l(this.tagNames,n.tagName.toLowerCase())},getEmptyElements:function(n){var t=this;return n.getNodes([1],function(n){return t.appliesToElement(n)&&!n.hasChildNodes()})},hasClass:function(n){return n.nodeType==1&&(this.applyToAnyTagName||this.appliesToElement(n))&&y(n,this.className)},getSelfOrAncestorWithClass:function(n){while(n){if(this.hasClass(n))return n;n=n.parentNode}return null},isModifiable:function(n){return!this.applyToEditableOnly||yt(n)},isIgnorableWhiteSpaceNode:function(n){return this.ignoreWhiteSpace&&n&&n.nodeType==3&&ui(n)},postApply:function(n,t,r,f){var a=n[0],o=n[n.length-1],s=[],e,h=a,v=o,y=0,p=o.length,c,l;if(u(n,function(n){c=oi(n,!f);c?(e||(e=new tt(c),s.push(e)),e.textNodes.push(n),n===a&&(h=e.textNodes[0],y=h.length),n===o&&(v=e.textNodes[0],p=e.getLength())):e=null}),l=si(o,!f),l&&(e||(e=new tt(o),s.push(e)),e.textNodes.push(l)),s.length){for(i=0,len=s.length;i<len;++i)s[i].doMerge(r);t.setStartAndEnd(h,y,v,p)}},createContainer:function(n){var i=r.getDocument(n),u,t=kt&&!r.isHtmlNamespace(n)&&(u=n.namespaceURI)?i.createElementNS(n.namespaceURI,this.elementTagName):i.createElement(this.elementTagName);if(this.copyPropertiesToElement(this.elementProperties,t,!1),this.copyAttributesToElement(this.elementAttributes,t),f(t,this.className),this.onElementCreate)this.onElementCreate(t,this);return t},elementHasProperties:function(n,t){var i=this;return v(t,function(t,r){if(t=="className")return st(n,r);if(typeof r=="object"){if(!i.elementHasProperties(n[t],r))return!1}else if(n[t]!==r)return!1})},elementHasAttributes:function(n,t){return v(t,function(t,i){if(n.getAttribute(t)!==i)return!1})},applyToTextNode:function(n){var t,i,r;dt(n)&&(t=n.parentNode,t.childNodes.length==1&&this.useExistingElements&&this.appliesToElement(t)&&this.elementHasProperties(t,this.elementProperties)&&this.elementHasAttributes(t,this.elementAttributes)?f(t,this.className):(i=n.parentNode,r=this.createContainer(i),i.insertBefore(r,n),r.appendChild(n)))},isRemovable:function(n){return n.tagName.toLowerCase()==this.elementTagName&&w(n)==this.elementSortedClassName&&this.elementHasProperties(n,this.elementProperties)&&!at(n,this.attrExceptions)&&this.elementHasAttributes(n,this.elementAttributes)&&this.isModifiable(n)},isEmptyContainer:function(n){var t=n.childNodes.length;return n.nodeType==1&&this.isRemovable(n)&&(t==0||t==1&&this.isEmptyContainer(n.firstChild))},removeEmptyContainers:function(n){var r=this,f=n.getNodes([1],function(n){return r.isEmptyContainer(n)}),t=[n],i=g(t);u(f,function(n){ht(n,i)});nt(t,i)},undoToTextNode:function(n,t,i,r){if(!t.containsNode(i)){var u=t.cloneRange();u.selectNode(i);u.isPointInRange(t.endContainer,t.endOffset)&&(o(i,t.endContainer,t.endOffset,r),t.setEndAfter(i));u.isPointInRange(t.startContainer,t.startOffset)&&(i=o(i,t.startContainer,t.startOffset,r))}this.isRemovable(i)?k(i,r):s(i,this.className)},splitAncestorWithClass:function(n,t,i){var r=this.getSelfOrAncestorWithClass(n);r&&o(r,n,t,i)},undoToAncestor:function(n,t){this.isRemovable(n)?k(n,t):s(n,this.className)},applyToRange:function(n,t){var i=this,e,r,o,s;t=t||[];e=g(t||[]);n.splitBoundariesPreservingPositions(e);i.removeEmptyElements&&i.removeEmptyContainers(n);r=ct(n);r.length&&(u(r,function(n){i.isIgnorableWhiteSpaceNode(n)||i.getSelfOrAncestorWithClass(n)||!i.isModifiable(n)||i.applyToTextNode(n,e)}),o=r[r.length-1],n.setStartAndEnd(r[0],0,o,o.length),i.normalize&&i.postApply(r,n,e,!1),nt(t,e));s=i.getEmptyElements(n);u(s,function(n){f(n,i.className)})},applyToRanges:function(n){for(var t=n.length;t--;)this.applyToRange(n[t],n);return n},applyToSelection:function(t){var i=n.getSelection(t);i.setRanges(this.applyToRanges(i.getAllRanges()))},undoToRange:function(n,t){var i=this,r,f,o,h,c,e,l,a;if(t=t||[],r=g(t),n.splitBoundariesPreservingPositions(r),i.removeEmptyElements&&i.removeEmptyContainers(n,r),f=ct(n),c=f[f.length-1],f.length){for(i.splitAncestorWithClass(n.endContainer,n.endOffset,r),i.splitAncestorWithClass(n.startContainer,n.startOffset,r),e=0,l=f.length;e<l;++e)o=f[e],h=i.getSelfOrAncestorWithClass(o),h&&i.isModifiable(o)&&i.undoToAncestor(h,r);n.setStartAndEnd(f[0],0,c,c.length);i.normalize&&i.postApply(f,n,r,!0);nt(t,r)}a=i.getEmptyElements(n);u(a,function(n){s(n,i.className)})},undoToRanges:function(n){for(var t=n.length;t--;)this.undoToRange(n[t],n);return n},undoToSelection:function(t){var r=n.getSelection(t),i=n.getSelection(t).getAllRanges();this.undoToRanges(i);r.setRanges(i)},isAppliedToRange:function(n){var i,r,t;if(n.collapsed||n.toString()=="")return!!this.getSelfOrAncestorWithClass(n.commonAncestorContainer);if(i=n.getNodes([3]),i.length)for(r=0;t=i[r++];)if(!this.isIgnorableWhiteSpaceNode(t)&&d(n,t)&&this.isModifiable(t)&&!this.getSelfOrAncestorWithClass(t))return!1;return!0},isAppliedToRanges:function(n){var t=n.length;if(t==0)return!1;while(t--)if(!this.isAppliedToRange(n[t]))return!1;return!0},isAppliedToSelection:function(t){var i=n.getSelection(t);return this.isAppliedToRanges(i.getAllRanges())},toggleRange:function(n){this.isAppliedToRange(n)?this.undoToRange(n):this.applyToRange(n)},toggleSelection:function(n){this.isAppliedToSelection(n)?this.undoToSelection(n):this.applyToSelection(n)},getElementsWithClassIntersectingRange:function(n){var t=[],i=this;return n.getNodes([3],function(n){var r=i.getSelfOrAncestorWithClass(n);r&&!l(t,r)&&t.push(r)}),t},detach:function(){}};c.util={hasClass:y,addClass:f,removeClass:s,getClass:et,hasSameClasses:ot,hasAllClasses:st,replaceWithOwnChildren:k,elementsHaveSameNonClassAttributes:lt,elementHasNonClassAttributes:at,splitNodeAt:o,isEditableElement:e,isEditingHost:vt,isEditable:yt};n.CssClassApplier=n.ClassApplier=c;n.createClassApplier=hi;a.createAliasForDeprecatedMethod(n,"createCssClassApplier","createClassApplier",t)}),n},this),function(n,t){typeof define=="function"&&define.amd?define(["./rangy-core"],n):typeof module!="undefined"&&typeof exports=="object"?module.exports=n(require("rangy")):n(t.rangy)}(function(n){return n.createModule("Highlighter",["ClassApplier"],function(n){function w(n,t){return n.characterRange.start-t.characterRange.start}function e(n,t){return t?n.getElementById(t):v(n)}function o(n,t){this.type=n;this.converterCreator=t}function s(n,t){y[n]=new o(n,t)}function h(n){var t=y[n];if(t instanceof o)return t.create();throw new Error("Highlighter type '"+n+"' is not valid");}function t(n,t){this.start=n;this.end=t}function r(n,t,i,r,u,e){u?(this.id=u,f=Math.max(f,u+1)):this.id=f++;this.characterRange=t;this.doc=n;this.classApplier=i;this.converter=r;this.containerElementId=e||null;this.applied=!1}function c(n,t){t=t||"textContent";this.doc=n||document;this.classAppliers={};this.highlights=[];this.converter=h(t)}var l=n.dom,a=l.arrayContains,v=l.getBody,u=n.util.createOptions,i=n.util.forEach,f=1,y={},p;o.prototype.create=function(){var n=this.converterCreator();return n.type=this.type,n};n.registerHighlighterType=s;t.prototype={intersects:function(n){return this.start<n.end&&this.end>n.start},isContiguousWith:function(n){return this.start==n.end||this.end==n.start},union:function(n){return new t(Math.min(this.start,n.start),Math.max(this.end,n.end))},intersection:function(n){return new t(Math.max(this.start,n.start),Math.min(this.end,n.end))},getComplements:function(n){var i=[];if(this.start>=n.start){if(this.end<=n.end)return[];i.push(new t(n.end,this.end))}else i.push(new t(this.start,Math.min(this.end,n.start))),this.end>n.end&&i.push(new t(n.end,this.end));return i},toString:function(){return"[CharacterRange("+this.start+", "+this.end+")]"}};t.fromCharacterRange=function(n){return new t(n.start,n.end)};p={rangeToCharacterRange:function(n,i){var r=n.getBookmark(i);return new t(r.start,r.end)},characterRangeToRange:function(t,i,r){var u=n.createRange(t);return u.moveToBookmark({start:i.start,end:i.end,containerNode:r}),u},serializeSelection:function(n,t){for(var r=n.getAllRanges(),f=r.length,u=[],e=f==1&&n.isBackward(),i=0,o=r.length;i<o;++i)u[i]={characterRange:this.rangeToCharacterRange(r[i],t),backward:e};return u},restoreSelection:function(n,t,i){var f,r,e,o,u,s;for(n.removeAllRanges(),f=n.win.document,r=0,e=t.length;r<e;++r)u=t[r],s=u.characterRange,o=this.characterRangeToRange(f,u.characterRange,i),n.addRange(o,u.backward)}};s("textContent",function(){return p});s("TextRange",function(){var i;return function(){if(!i){var r=n.modules.TextRange;if(r){if(!r.supported)throw new Error("TextRange module is present but not supported.");}else throw new Error("TextRange module is missing.");i={rangeToCharacterRange:function(n,i){return t.fromCharacterRange(n.toCharacterRange(i))},characterRangeToRange:function(t,i,r){var u=n.createRange(t);return u.selectCharacters(r,i.start,i.end),u},serializeSelection:function(n,t){return n.saveCharacterRanges(t)},restoreSelection:function(n,t,i){n.restoreCharacterRanges(i,t)}}}return i}}());r.prototype={getContainerElement:function(){return e(this.doc,this.containerElementId)},getRange:function(){return this.converter.characterRangeToRange(this.doc,this.characterRange,this.getContainerElement())},fromRange:function(n){this.characterRange=this.converter.rangeToCharacterRange(n,this.getContainerElement())},getText:function(){return this.getRange().toString()},containsElement:function(n){return this.getRange().containsNodeContents(n.firstChild)},unapply:function(){this.classApplier.undoToRange(this.getRange());this.applied=!1},apply:function(){this.classApplier.applyToRange(this.getRange());this.applied=!0},getHighlightElements:function(){return this.classApplier.getElementsWithClassIntersectingRange(this.getRange())},toString:function(){return"[Highlight(ID: "+this.id+", class: "+this.classApplier.className+", character range: "+this.characterRange.start+" - "+this.characterRange.end+")]"}};c.prototype={addClassApplier:function(n){this.classAppliers[n.className]=n},getHighlightForElement:function(n){for(var i=this.highlights,t=0,r=i.length;t<r;++t)if(i[t].containsElement(n))return i[t];return null},removeHighlights:function(n){for(var t=0,r=this.highlights.length,i;t<r;++t)i=this.highlights[t],a(n,i)&&(i.unapply(),this.highlights.splice(t--,1))},removeAllHighlights:function(){this.removeHighlights(this.highlights)},getIntersectingHighlights:function(n){var t=[],r=this.highlights;return i(n,function(n){i(r,function(i){n.intersectsRange(i.getRange())&&!a(t,i)&&t.push(i)})}),t},highlightCharacterRanges:function(f,e,o){var y,ut,h,c=this.highlights,b=this.converter,k=this.doc,ft=[],p=f?this.classAppliers[f]:null,l,et,d,g,nt,s,a,tt,w,v,it,rt;for(o=u(o,{containerElementId:null,exclusive:!0}),l=o.containerElementId,et=o.exclusive,l&&(d=this.doc.getElementById(l),d&&(g=n.createRange(this.doc),g.selectNodeContents(d),nt=new t(0,g.toString().length))),y=0,ut=e.length;y<ut;++y)if(s=e[y],v=[],nt&&(s=s.intersection(nt)),s.start!=s.end){for(h=0;h<c.length;++h)tt=!1,l==c[h].containerElementId&&(a=c[h].characterRange,w=p==c[h].classApplier,it=!w&&et,(a.intersects(s)||a.isContiguousWith(s))&&(w||it)&&(it&&i(a.getComplements(s),function(n){v.push(new r(k,n,c[h].classApplier,b,null,l))}),tt=!0,w&&(s=a.union(s)))),tt?(ft.push(c[h]),c[h]=new r(k,a.union(s),p,b,null,l)):v.push(c[h]);p&&v.push(new r(k,s,p,b,null,l));this.highlights=c=v}return i(ft,function(n){n.unapply()}),rt=[],i(c,function(n){n.applied||(n.apply(),rt.push(n))}),rt},highlightRanges:function(t,r,f){var s=[],c=this.converter,e,h,o;return f=u(f,{containerElement:null,exclusive:!0}),e=f.containerElement,h=e?e.id:null,e&&(o=n.createRange(e),o.selectNodeContents(e)),i(r,function(n){var t=e?o.intersection(n):n;s.push(c.rangeToCharacterRange(t,e||v(n.getDocument())))}),this.highlightCharacterRanges(t,s,{containerElementId:h,exclusive:f.exclusive})},highlightSelection:function(r,f){var c=this.converter,y=r?this.classAppliers[r]:!1,s,h,v;f=u(f,{containerElementId:null,selection:n.getSelection(this.doc),exclusive:!0});var l=f.containerElementId,p=f.exclusive,o=f.selection,w=o.win.document,a=e(w,l);if(!y&&r!==!1)throw new Error("No class applier found for class '"+r+"'");return s=c.serializeSelection(o,a),h=[],i(s,function(n){h.push(t.fromCharacterRange(n.characterRange))}),v=this.highlightCharacterRanges(r,h,{containerElementId:l,exclusive:p}),c.restoreSelection(o,s,a),v},unhighlightSelection:function(t){t=t||n.getSelection(this.doc);var i=this.getIntersectingHighlights(t.getAllRanges());return this.removeHighlights(i),t.removeAllRanges(),i},getHighlightsInSelection:function(t){return t=t||n.getSelection(this.doc),this.getIntersectingHighlights(t.getAllRanges())},selectionOverlapsHighlight:function(n){return this.getHighlightsInSelection(n).length>0},serialize:function(n){var t=this,o=t.highlights,r,f,e,s;return o.sort(w),n=u(n,{serializeHighlightText:!1,type:t.converter.type}),r=n.type,e=r!=t.converter.type,e&&(s=h(r)),f=["type:"+r],i(o,function(i){var r=i.characterRange,u,o;e&&(u=i.getContainerElement(),r=s.rangeToCharacterRange(t.converter.characterRangeToRange(t.doc,r,u),u));o=[r.start,r.end,i.id,i.classApplier.className,i.containerElementId];n.serializeHighlightText&&o.push(i.getText());f.push(o.join("$"))}),f.join("|")},deserialize:function(n){var u=n.split("|"),y=[],p=u[0],w,o,b,k=!1,s,c,f,l,a,v,i;if(p&&(w=/^type:(\w+)$/.exec(p)))o=w[1],o!=this.converter.type&&(b=h(o),k=!0),u.shift();else throw new Error("Serialized highlights are invalid.");for(v=u.length;v-->0;){if(i=u[v].split("$"),f=new t(+i[0],+i[1]),l=i[4]||null,k&&(a=e(this.doc,l),f=this.converter.rangeToCharacterRange(b.characterRangeToRange(this.doc,f,a),a)),s=this.classAppliers[i[3]],!s)throw new Error("No class applier found for class '"+i[3]+"'");c=new r(this.doc,f,s,this.converter,parseInt(i[2]),l);c.apply();y.push(c)}this.highlights=y}};n.Highlighter=c;n.createHighlighter=function(n,t){return new c(n,t)}}),n},this),function(n,t){typeof define=="function"&&define.amd?define(["./rangy-core"],n):typeof module!="undefined"&&typeof exports=="object"?module.exports=n(require("rangy")):n(t.rangy)}(function(n){return n.createModule("SaveRestore",["WrappedRange"],function(n,t){function i(n,t){return(t||document).getElementById(n)}function f(n,t){var f="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),i,r=e.getDocument(n.startContainer),u=n.cloneRange();return u.collapse(t),i=r.createElement("span"),i.id=f,i.style.lineHeight="0",i.style.display="none",i.className="rangySelectionBoundary",i.appendChild(r.createTextNode(v)),u.insertNode(i),i}function s(n,u,f,e){var o=i(f,n);o?(u[e?"setStartBefore":"setEndBefore"](o),r(o)):t.warn("Marker element has been removed. Cannot restore selection.")}function y(n,t){return t.compareBoundaryPoints(n.START_TO_START,n)}function h(t,i){var u,r,e=n.DomRange.getRangeDocument(t),s=t.toString(),h=o(i);return t.collapsed?(r=f(t,!1),{document:e,markerId:r.id,collapsed:!0}):(r=f(t,!1),u=f(t,!0),{document:e,startMarkerId:u.id,endMarkerId:r.id,collapsed:!1,backward:h,toString:function(){return"original text: '"+s+"', new text: '"+t.toString()+"'"}})}function c(u,f){var c=u.document,e,o,h;return typeof f=="undefined"&&(f=!0),e=n.createRange(c),u.collapsed?(o=i(u.markerId,c),o?(o.style.display="inline",h=o.previousSibling,h&&h.nodeType==3?(r(o),e.collapseToPoint(h,h.length)):(e.collapseBefore(o),r(o))):t.warn("Marker element has been removed. Cannot restore selection.")):(s(c,e,u.startMarkerId,!0),s(c,e,u.endMarkerId,!1)),f&&e.normalizeBoundaries(),e}function l(t,r){var e=[],f,s,l=o(r),u,c;for(t=t.slice(0),t.sort(y),u=0,c=t.length;u<c;++u)e[u]=h(t[u],l);for(u=c-1;u>=0;--u)f=t[u],s=n.DomRange.getRangeDocument(f),f.collapsed?f.collapseAfter(i(e[u].markerId,s)):(f.setEndBefore(i(e[u].endMarkerId,s)),f.setStartAfter(i(e[u].startMarkerId,s)));return e}function p(i){if(!n.isSelectionValid(i))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var r=n.getSelection(i),u=r.getAllRanges(),f=u.length==1&&r.isBackward(),e=l(u,f);return f?r.setSingleRange(u[0],f):r.setRanges(u),{win:i,rangeInfos:e,restored:!1}}function a(n){for(var i=[],r=n.length,t=r-1;t>=0;t--)i[t]=c(n[t],!0);return i}function w(t,i){if(!t.restored){var r=t.rangeInfos,u=n.getSelection(t.win),f=a(r),e=r.length;e==1&&i&&n.features.selectionHasExtend&&r[0].backward?(u.removeAllRanges(),u.addRange(f[0],!0)):u.setRanges(f);t.restored=!0}}function u(n,t){var u=i(t,n);u&&r(u)}function b(n){for(var r=n.rangeInfos,i=0,f=r.length,t;i<f;++i)t=r[i],t.collapsed?u(n.doc,t.markerId):(u(n.doc,t.startMarkerId),u(n.doc,t.endMarkerId))}var e=n.dom,r=e.removeNode,o=n.Selection.isDirectionBackward,v="﻿";n.util.extend(n,{saveRange:h,restoreRange:c,saveRanges:l,restoreRanges:a,saveSelection:p,restoreSelection:w,removeMarkerElement:u,removeMarkers:b})}),n},this),function(n,t){typeof define=="function"&&define.amd?define(["./rangy-core"],n):typeof module!="undefined"&&typeof exports=="object"?module.exports=n(require("rangy")):n(t.rangy)}(function(n){return n.createModule("Serializer",["WrappedSelection"],function(n,t){function a(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(n,t){var r;t=t||[];var e=n.nodeType,o=n.childNodes,s=o.length,h=[e,n.nodeName,s].join(":"),i="",u="";switch(e){case 3:i=a(n.nodeValue);break;case 8:i="<!--"+a(n.nodeValue)+"-->";break;default:i="<"+h+">";u="<\/>"}for(i&&t.push(i),r=0;r<s;++r)f(o[r],t);return u&&t.push(u),t}function r(n){var t=f(n).join("");return u(t).toString(16)}function e(n,t,r){var f=[],u=n;for(r=r||i.getDocument(n).documentElement;u&&u!=r;)f.push(i.getNodeIndex(u,!0)),u=u.parentNode;return f.join("/")+":"+t}function o(n,r,u){r||(r=(u||document).documentElement);for(var o=n.split(":"),f=r,h=o[0]?o[0].split("/"):[],s=h.length,e;s--;)if(e=parseInt(h[s],10),e<f.childNodes.length)f=f.childNodes[e];else throw t.createError("deserializePosition() failed: node "+i.inspectNode(f)+" has no child with index "+e+", "+s);return new i.DomPosition(f,parseInt(o[1],10))}function v(u,f,o){if(o=o||n.DomRange.getRangeDocument(u).documentElement,!i.isOrIsAncestorOf(o,u.commonAncestorContainer))throw t.createError("serializeRange(): range "+u.inspect()+" is not wholly contained within specified root node "+i.inspectNode(o));var s=e(u.startContainer,u.startOffset,o)+","+e(u.endContainer,u.endOffset,o);return f||(s+="{"+r(o)+"}"),s}function y(u,f,e){var h,c,l;if(f?e=e||i.getDocument(f):(e=e||document,f=e.documentElement),h=s.exec(u),c=h[4],c&&(l=r(f),c!==l))throw t.createError("deserializeRange(): checksums of serialized range root node ("+c+") and target root node ("+l+") do not match");var a=o(h[1],f,e),v=o(h[2],f,e),y=n.createRange(e);return y.setStartAndEnd(a.node,a.offset,v.node,v.offset),y}function p(n,t,i){t||(t=(i||document).documentElement);var f=s.exec(n),u=f[3];return!u||u===r(t)}function w(t,i,r){var f,e,u,o;for(t=n.getSelection(t),f=t.getAllRanges(),e=[],u=0,o=f.length;u<o;++u)e[u]=v(f[u],i,r);return e.join("|")}function b(t,r,u){var f,h;r?u=u||i.getWindow(r):(u=u||window,r=u.document.documentElement);var e=t.split("|"),o=n.getSelection(u),s=[];for(f=0,h=e.length;f<h;++f)s[f]=y(e[f],r,u.document);return o.setRanges(s),o}function k(n,t,r){var e,f,u,o;for(t?e=r?r.document:i.getDocument(t):(r=r||window,t=r.document.documentElement),f=n.split("|"),u=0,o=f.length;u<o;++u)if(!p(f[u],t,e))return!1;return!0}function d(n){for(var u=n.split(/[;,]/),t=0,f=u.length,i,r;t<f;++t)if(i=u[t].split("="),i[0].replace(/^\s+/,"")==h&&(r=i[1],r))return decodeURIComponent(r.replace(/\s+$/,""));return null}function g(n){n=n||window;var t=d(n.document.cookie);t&&b(t,n.doc)}function nt(t,i){t=t||window;i=typeof i=="object"?i:{};var r=i.expires?";expires="+i.expires.toUTCString():"",u=i.path?";path="+i.path:"",f=i.domain?";domain="+i.domain:"",e=i.secure?";secure":"",o=w(n.getSelection(t));t.document.cookie=encodeURIComponent(h)+"="+encodeURIComponent(o)+r+u+f+e}var c="undefined",l=n.util,u,i,s,h;(typeof encodeURIComponent==c||typeof decodeURIComponent==c)&&t.fail("encodeURIComponent and/or decodeURIComponent method is missing");u=function(){function t(n){for(var i=[],r=0,u=n.length,t;r<u;++r)t=n.charCodeAt(r),t<128?i.push(t):t<2048?i.push(t>>6|192,t&63|128):i.push(t>>12|224,t>>6&63|128,t&63|128);return i}function i(){for(var i=[],t=0,r,n;t<256;++t){for(n=t,r=8;r--;)(n&1)==1?n=n>>>1^3988292384:n>>>=1;i[t]=n>>>0}return i}function r(){return n||(n=i()),n}var n=null;return function(n){for(var f=t(n),i=-1,o=r(),u=0,s=f.length,e;u<s;++u)e=(i^f[u])&255,i=i>>>8^o[e];return(i^-1)>>>0}}();i=n.dom;s=/^([^,]+),([^,\{]+)(\{([^}]+)\})?$/;h="rangySerializedSelection";l.extend(n,{serializePosition:e,deserializePosition:o,serializeRange:v,deserializeRange:y,canDeserializeRange:p,serializeSelection:w,deserializeSelection:b,canDeserializeSelection:k,restoreSelectionFromCookie:g,saveSelectionCookie:nt,getElementChecksum:r,nodeToInfoString:f});l.crc32=u}),n},this),function(n,t){typeof define=="function"&&define.amd?define(["./rangy-core"],n):typeof module!="undefined"&&typeof exports=="object"?module.exports=n(require("rangy")):n(t.rangy)}(function(n){return n.createModule("TextRange",["WrappedSelection"],function(n,t){function nr(n,t){function e(n,t,i){o.push({start:n,end:t,isWord:i})}for(var s=n.join(""),f,o=[],i=0,r,u;f=t.wordRegex.exec(s);){if(r=f.index,u=r+f[0].length,r>i&&e(i,r,!1),t.includeTrailingSpace)while(di.test(n[u]))++u;e(r,u,!0);i=u}return i<n.length&&e(i,n.length,!1),o}function tr(n,t){for(var i=n.slice(t.start,t.end),u={isWord:t.isWord,chars:i,toString:function(){return i.join("")}},r=0,f=i.length;r<f;++r)i[r].token=u;return u}function it(n,t,i){for(var f=i(n,t),r=[],e=0,u;u=f[e++];)r.push(tr(n,u));return r}function ir(n){var t=n||"",i=typeof t=="string"?t.split(""):t;return i.sort(function(n,t){return n.charCodeAt(0)-t.charCodeAt(0)}),i.join("").replace(/(.)\1+/g,"$1")}function sr(n){var i,t;return n?(i=n.language||nt,t={},f(t,rt[i]||rt[nt]),f(t,n),t):rt[nt]}function w(n,t){var i=a(n,t);return t.hasOwnProperty("wordOptions")&&(i.wordOptions=sr(i.wordOptions)),t.hasOwnProperty("characterOptions")&&(i.characterOptions=a(i.characterOptions,p)),i}function b(n,t){var i=o(n,"display",t),r=n.tagName.toLowerCase();return i=="block"&&bt&&ut.hasOwnProperty(r)?ut[r]:i}function kt(n){for(var i=yr(n),t=0,r=i.length;t<r;++t)if(i[t].nodeType==1&&b(i[t])=="none")return!0;return!1}function hr(n){var t;return n.nodeType==3&&(t=n.parentNode)&&o(t,"visibility")=="hidden"}function cr(n){return n&&(n.nodeType==1&&!/^(inline(-block|-table)?|none)$/.test(b(n))||n.nodeType==9||n.nodeType==11)}function ar(n){return u.isCharacterDataNode(n)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(n.nodeName)}function vr(n){for(var t=[];n.parentNode;)t.unshift(n.parentNode),n=n.parentNode;return t}function yr(n){return vr(n).concat([n])}function pr(n){while(n&&!n.nextSibling)n=n.parentNode;return n?n.nextSibling:null}function dt(n,t){return!t&&n.hasChildNodes()?n.firstChild:pr(n)}function gt(n){var i=n.previousSibling,t;if(i){for(n=i;n.hasChildNodes();)n=n.lastChild;return n}return(t=n.parentNode,t&&t.nodeType==1)?t:null}function ni(n){var t,i,r;return!n||n.nodeType!=3?!1:(t=n.data,t==="")?!0:(i=n.parentNode,!i||i.nodeType!=1)?!1:(r=o(n.parentNode,"whiteSpace"),/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(r)||/^[\t\r ]+$/.test(t)&&r=="pre-line")}function ft(n){if(n.data==="")return!0;if(!ni(n))return!1;var t=n.parentNode;return t?kt(n)?!0:!1:!0}function s(n){var t=n.nodeType;return t==7||t==8||kt(n)||/^(script|style)$/i.test(n.nodeName)||hr(n)||ft(n)}function ti(n,t){var i=n.nodeType;return i==7||i==8||i==1&&b(n,t)=="none"}function h(){this.store={}}function i(n,t,i){return function(r){var u=this.cache,f;return u.hasOwnProperty(n)?(ii++,u[n]):(ri++,f=t.call(this,i?this[i]:this,r),u[n]=f,f)}}function ui(n,t){this.node=n;this.session=t;this.cache=new h;this.positions=new h}function ai(n,t){this.offset=t;this.nodeWrapper=n;this.node=n.node;this.session=n.session;this.cache=new h}function br(){return"[Position("+u.inspectNode(this.node)+":"+this.offset+")]"}function kr(){return ct(),e=new vi}function ht(){return e||kr()}function ct(){e&&e.detach();e=null}function l(n,i,r,u){function c(){var n=null;return i?(n=f,e||(f=f.previousVisible(),e=!f||r&&f.equals(r))):e||(n=f=f.nextVisible(),e=!f||r&&f.equals(r)),e&&(f=null),n}var f,e,h,o;return r&&(i?s(r.node)&&(r=n.previousVisible()):s(r.node)&&(r=r.nextVisible())),f=n,e=!1,o=!1,{next:function(){if(o)return o=!1,h;for(var n,t;n=c();)if(t=n.getCharacter(u),t)return h=n,n;return null},rewind:function(){if(h)o=!0;else throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");},dispose:function(){n=r=null}}}function k(n,t,i){function f(n){for(var t,r,u=[],f=n?c:a,e=!1,i=!1;t=f.next();){if(r=t.character,yt.test(r))i&&(i=!1,e=!0);else if(e){f.rewind();break}else i=!0;u.push(t)}return u}var c=l(n,!1,null,t),a=l(n,!0,null,t),o=i.tokenizer,s=f(!0),h=f(!1).reverse(),e=it(h.concat(s),i,o),r=s.length?e.slice(lt(e,s[0].token)):[],u=h.length?e.slice(0,lt(e,h.pop().token)+1):[];return{nextEndToken:function(){for(var n,t;r.length==1&&!(n=r[0]).isWord&&(t=f(!0)).length>0;)r=it(n.chars.concat(t),i,o);return r.shift()},previousStartToken:function(){for(var n,t;u.length==1&&!(n=u[0]).isWord&&(t=f(!1)).length>0;)u=it(t.reverse().concat(n.chars),i,o);return u.pop()},dispose:function(){c.dispose();a.dispose();r=u=null}}}function dr(n,t,i,r,u){var e=0,a,f=n,o,c,p=Math.abs(i),s,h,y,w;if(i!==0){h=i<0;switch(t){case v:for(o=l(n,h,null,r);(a=o.next())&&e<p;)++e,f=a;c=a;o.dispose();break;case d:for(y=k(n,r,u),w=h?y.previousStartToken:y.nextEndToken;(s=w())&&e<p;)s.isWord&&(++e,f=h?s.chars[0]:s.chars[s.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented");}h?(f=f.previousVisible(),e=-e):f&&f.isLeadingSpace&&!f.isTrailingSpace&&(t==d&&(o=l(n,!1,null,r),c=o.next(),o.dispose()),c&&(f=c.previousVisible()))}return{position:f,unitsMoved:e}}function yi(n,t,i,r){var u=n.getRangeBoundaryPosition(t,!0),f=n.getRangeBoundaryPosition(t,!1),e=r?f:u,o=r?u:f;return l(e,!!r,o,i)}function gr(n,t,i){for(var r=[],u=yi(n,t,i),f;f=u.next();)r.push(f);return u.dispose(),r}function nu(t,i,r){var u=n.createRange(t.node);return u.setStartAndEnd(t.node,t.offset,i.node,i.offset),!u.expand("word",{wordOptions:r})}function tu(n,t,i,r,u){function w(n,t){var i=h[n].previousVisible(),r=h[t-1],f=!u.wholeWordsOnly||nu(i,r,u.wordOptions);return{startPos:i,endPos:r,valid:f}}for(var o=tt(u.direction),b=l(n,o,n.session.getRangeBoundaryPosition(r,o),u.characterOptions),e="",h=[],c,s,f,a,v,p,y=null;c=b.next();)if(s=c.character,i||u.caseSensitive||(s=s.toLowerCase()),o?(h.unshift(c),e=s+e):(h.push(c),e+=s),i){if(v=t.exec(e),v)if(f=v.index,a=f+v[0].length,p){if(!o&&a<e.length||o&&f>0){y=w(f,a);break}}else p=!0}else if((f=e.indexOf(t))!=-1){y=w(f,f+t.length);break}return p&&(y=w(f,a)),b.dispose(),y}function r(n){return function(){var t=!!e,i=ht(),r=[i].concat(y.toArray(arguments)),u=n.apply(this,r);return t||ct(),u}}function at(n,t){return r(function(i,r,u,f){var e,o,s;return typeof u==wi&&(u=r,r=v),f=w(f,fr),e=n,t&&(e=u>=0,this.collapse(!e)),o=dr(i.getRangeBoundaryPosition(this,e),r,u,f.characterOptions,f.wordOptions),s=o.position,this[e?"setStart":"setEnd"](s.node,s.offset),o.unitsMoved})}function pi(n){return r(function(t,i){var e,u,r,f;for(i=a(i,p),u=yi(t,this,i,!n),r=0;(e=u.next())&&yt.test(e.character);)++r;return u.dispose(),f=r>0,f&&this[n?"moveStart":"moveEnd"]("character",n?r:-r,{characterOptions:i}),f})}function vt(n){return r(function(t,i){var r=!1;return this.changeEachRange(function(t){r=t[n](i)||r}),r})}var wi="undefined",v="character",d="word",u=n.dom,y=n.util,f=y.extend,a=y.createOptions,g=u.getBody,bi=/^[ \t\f\r\n]+$/,ki=/^[ \t\f\r]+$/,yt=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,di=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,nt="en",tt=n.Selection.isDirectionBackward,gi=!1,pt=!1,wt=!1,p,o,bt,ut,ii,ri,et,st,e,vi,lt;(function(){var i=u.createTestElement(document,"<p>1 <\/p><p><\/p>",!0),r=i.firstChild,t=n.getSelection();t.collapse(r.lastChild,2);t.setStart(r.firstChild,0);gi=(""+t).length==1;i.innerHTML="1 <br />";t.collapse(i,2);t.setStart(i.firstChild,0);pt=(""+t).length==1;i.innerHTML="1 <p>1<\/p>";t.collapse(i,2);t.setStart(i.firstChild,0);wt=(""+t).length==1;u.removeNode(i);t.removeAllRanges()})();p={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""};var rr={includeBlockContentTrailingSpace:!1,includeSpaceBeforeBr:!pt,includeSpaceBeforeBlock:!wt,includePreLineTrailingSpace:!0},rt={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:nr}},ur={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},fr={wordOptions:null,characterOptions:null},er={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},or={wordOptions:null,characterOptions:null,direction:"forward"};o=u.getComputedStyleProperty,function(){var n=document.createElement("table"),t=g(document);t.appendChild(n);bt=o(n,"display")=="block";t.removeChild(n)}();ut={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};h.prototype={get:function(n){return this.store.hasOwnProperty(n)?this.store[n]:null},set:function(n,t){return this.store[n]=t}};ii=0;ri=0;et={getPosition:function(n){var t=this.positions;return t.get(n)||t.set(n,new ai(this,n))},toString:function(){return"[NodeWrapper("+u.inspectNode(this.node)+")]"}};ui.prototype=et;var fi="EMPTY",ot="NON_SPACE",ei="UNCOLLAPSIBLE_SPACE",c="COLLAPSIBLE_SPACE",oi="TRAILING_SPACE_BEFORE_BLOCK",si="TRAILING_SPACE_IN_BLOCK",hi="TRAILING_SPACE_BEFORE_BR",ci="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",wr="TRAILING_LINE_BREAK_AFTER_BR",li="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";f(et,{isCharacterDataNode:i("isCharacterDataNode",u.isCharacterDataNode,"node"),getNodeIndex:i("nodeIndex",u.getNodeIndex,"node"),getLength:i("nodeLength",u.getNodeLength,"node"),containsPositions:i("containsPositions",ar,"node"),isWhitespace:i("isWhitespace",ni,"node"),isCollapsedWhitespace:i("isCollapsedWhitespace",ft,"node"),getComputedDisplay:i("computedDisplay",b,"node"),isCollapsed:i("collapsed",s,"node"),isIgnored:i("ignored",ti,"node"),next:i("nextPos",dt,"node"),previous:i("previous",gt,"node"),getTextNodeInfo:i("textNodeInfo",function(n){var t=null,i=!1,r=o(n.parentNode,"whiteSpace"),u=r=="pre-line";return u?(t=ki,i=!0):(r=="normal"||r=="nowrap")&&(t=bi,i=!0),{node:n,text:n.data,spaceRegex:t,collapseSpaces:i,preLine:u}},"node"),hasInnerText:i("hasInnerText",function(n,t){for(var r=this.session,u=r.getPosition(n.parentNode,this.getNodeIndex()+1),f=r.getPosition(n,0),i=t?u:f,e=t?f:u;i!==e;){if(i.prepopulateChar(),i.isDefinitelyNonEmpty())return!0;i=t?i.previousVisible():i.nextVisible()}return!1},"node"),isRenderedBlock:i("isRenderedBlock",function(n){for(var i=n.getElementsByTagName("br"),t=0,r=i.length;t<r;++t)if(!s(i[t]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:i("trailingSpace",function(n){if(n.tagName.toLowerCase()=="br")return"";switch(this.getComputedDisplay()){case"inline":for(var t=n.lastChild;t;){if(!ti(t))return t.nodeType==1?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:i("leadingSpace",function(){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});st={character:"",characterType:fi,isBr:!1,prepopulateChar:function(){var n=this,u,o;if(!n.prepopulatedChar){var f=n.node,t=n.offset,i="",r=fi,e=!1;if(t>0)if(f.nodeType==3){var h=f.data,l=h.charAt(t-1),a=n.nodeWrapper.getTextNodeInfo(),v=a.spaceRegex;a.collapseSpaces?v.test(l)?t>1&&v.test(h.charAt(t-2))||(a.preLine&&h.charAt(t)==="\n"?(i=" ",r=ci):(i=" ",r=c)):(i=l,r=ot,e=!0):(i=l,r=ei,e=!0)}else u=f.childNodes[t-1],u&&u.nodeType==1&&!s(u)&&(u.tagName.toLowerCase()=="br"?(i="\n",n.isBr=!0,r=c,e=!1):n.checkForTrailingSpace=!0),i||(o=f.childNodes[t],o&&o.nodeType==1&&!s(o)&&(n.checkForLeadingSpace=!0));n.prepopulatedChar=!0;n.character=i;n.characterType=r;n.isCharInvariant=e}},isDefinitelyNonEmpty:function(){var n=this.characterType;return n==ot||n==ei},resolveLeadingAndTrailingSpaces:function(){var n,t;this.prepopulatedChar||this.prepopulateChar();this.checkForTrailingSpace&&(n=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace(),n&&(this.isTrailingSpace=!0,this.character=n,this.characterType=c),this.checkForTrailingSpace=!1);this.checkForLeadingSpace&&(t=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace(),t&&(this.isLeadingSpace=!0,this.character=t,this.characterType=c),this.checkForLeadingSpace=!1)},getPrecedingUncollapsedPosition:function(n){for(var t=this,i;t=t.previousVisible();)if(i=t.getCharacter(n),i!=="")return t;return null},getCharacter:function(n){function s(){return h||(i=v.getPrecedingUncollapsedPosition(n),h=!0),i}var e,o;this.resolveLeadingAndTrailingSpaces();var u=this.character,f=ir(n.ignoreCharacters),l=u!==""&&f.indexOf(u)>-1;if(this.isCharInvariant)return l?"":u;if(e=["character",n.includeSpaceBeforeBr,n.includeBlockContentTrailingSpace,n.includePreLineTrailingSpace,f].join("_"),o=this.cache.get(e),o!==null)return o;var r="",a=this.characterType==c,t,i,h=!1,v=this;return a&&(this.type==li?r="\n":u==" "&&(!s()||i.isTrailingSpace||i.character=="\n"||i.character==" "&&i.characterType==c)||(u=="\n"&&this.isLeadingSpace?s()&&i.character!="\n"&&(r="\n"):(t=this.nextUncollapsed(),t&&(t.isBr?this.type=hi:t.isTrailingSpace&&t.character=="\n"?this.type=si:t.isLeadingSpace&&t.character=="\n"&&(this.type=oi),t.character=="\n"?(this.type!=hi||n.includeSpaceBeforeBr)&&(this.type!=oi||n.includeSpaceBeforeBlock)&&(this.type==si&&t.isTrailingSpace&&!n.includeBlockContentTrailingSpace||(this.type!=ci||t.type!=ot||n.includePreLineTrailingSpace)&&(u=="\n"?t.isTrailingSpace?this.isTrailingSpace||this.isBr&&(t.type=wr,s()&&i.isLeadingSpace&&!i.isTrailingSpace&&i.character=="\n"?t.character="":t.type=li):r="\n":u==" "&&(r=" "))):r=u)))),f.indexOf(r)>-1&&(r=""),this.cache.set(e,r),r},equals:function(n){return!!n&&this.node===n.node&&this.offset===n.offset},inspect:br,toString:function(){return this.character}};ai.prototype=st;f(st,{next:i("nextPos",function(n){var u=n.nodeWrapper,i=n.node,f=n.offset,o=u.session,t,r,e;return i?(f==u.getLength()?(t=i.parentNode,r=t?u.getNodeIndex()+1:0):u.isCharacterDataNode()?(t=i,r=f+1):(e=i.childNodes[f],o.getNodeWrapper(e).containsPositions()?(t=e,r=0):(t=i,r=f+1)),t?o.getPosition(t,r):null):null}),previous:i("previous",function(n){var o=n.nodeWrapper,r=n.node,f=n.offset,s=o.session,t,i,e;return f==0?(t=r.parentNode,i=t?o.getNodeIndex():0):o.isCharacterDataNode()?(t=r,i=f-1):(e=r.childNodes[f-1],s.getNodeWrapper(e).containsPositions()?(t=e,i=u.getNodeLength(e)):(t=r,i=f-1)),t?s.getPosition(t,i):null}),nextVisible:i("nextVisible",function(n){var t=n.next();if(!t)return null;var i=t.nodeWrapper,u=t.node,r=t;return i.isCollapsed()&&(r=i.session.getPosition(u.parentNode,i.getNodeIndex()+1)),r}),nextUncollapsed:i("nextUncollapsed",function(n){for(var t=n;t=t.nextVisible();)if(t.resolveLeadingAndTrailingSpaces(),t.character!=="")return t;return null}),previousVisible:i("previousVisible",function(n){var t=n.previous();if(!t)return null;var i=t.nodeWrapper,u=t.node,r=t;return i.isCollapsed()&&(r=i.session.getPosition(u.parentNode,i.getNodeIndex())),r})});e=null;vi=function(){function n(n){var t=new h;return{get:function(i){var u=t.get(i[n]),f,r;if(u)for(f=0;r=u[f++];)if(r.node===i)return r;return null},set:function(i){var r=i.node[n],u=t.get(r)||t.set(r,[]);u.push(i)}}}function t(){this.initCaches()}var i=y.isHostProperty(document.documentElement,"uniqueID");return t.prototype={initCaches:function(){this.elementCache=i?function(){var n=new h;return{get:function(t){return n.get(t.uniqueID)},set:function(t){n.set(t.node.uniqueID,t)}}}():n("tagName");this.textNodeCache=n("data");this.otherNodeCache=n("nodeName")},getNodeWrapper:function(n){var t,i;switch(n.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}return i=t.get(n),i||(i=new ui(n,this),t.set(i)),i},getPosition:function(n,t){return this.getNodeWrapper(n).getPosition(t)},getRangeBoundaryPosition:function(n,t){var i=t?"start":"end";return this.getPosition(n[i+"Container"],n[i+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},t}();f(u,{nextNode:dt,previousNode:gt});lt=Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1};f(n.rangePrototype,{moveStart:at(!0,!1),moveEnd:at(!1,!1),move:at(!0,!0),trimStart:pi(!0),trimEnd:pi(!1),trim:r(function(n,t){var i=this.trimStart(t),r=this.trimEnd(t);return i||r}),expand:r(function(n,t,i){var r=!1,u,a;if(i=w(i,er),u=i.characterOptions,t||(t=v),t==d){var s=i.wordOptions,h=n.getRangeBoundaryPosition(this,!0),c=n.getRangeBoundaryPosition(this,!1),y=k(h,u,s),l=y.nextEndToken(),o=l.chars[0].previousVisible(),e,f;return this.collapsed?e=l:(a=k(c,u,s),e=a.previousStartToken()),f=e.chars[e.chars.length-1],o.equals(h)||(this.setStart(o.node,o.offset),r=!0),f&&!f.equals(c)&&(this.setEnd(f.node,f.offset),r=!0),i.trim&&(i.trimStart&&(r=this.trimStart(u)||r),i.trimEnd&&(r=this.trimEnd(u)||r)),r}return this.moveEnd(v,1,i)}),text:r(function(n,t){return this.collapsed?"":gr(n,this,a(t,p)).join("")}),selectCharacters:r(function(n,t,i,r,u){var f={characterOptions:u};t||(t=g(this.getDocument()));this.selectNodeContents(t);this.collapse(!0);this.moveStart("character",i,f);this.collapse(!0);this.moveEnd("character",r-i,f)}),toCharacterRange:r(function(n,t,i){t||(t=g(this.getDocument()));var e=t.parentNode,o=u.getNodeIndex(t),h=u.comparePoints(this.startContainer,this.endContainer,e,o)==-1,r=this.cloneRange(),f,s;return h?(r.setStartAndEnd(this.startContainer,this.startOffset,e,o),f=-r.text(i).length):(r.setStartAndEnd(e,o,this.startContainer,this.startOffset),f=r.text(i).length),s=f+this.text(i).length,{start:f,end:s}}),findText:r(function(t,i,r){var o,u,s,c,e,l,h,a,f;for(r=w(r,ur),r.wholeWordsOnly&&(r.wordOptions.includeTrailingSpace=!1),o=tt(r.direction),u=r.withinRange,u||(u=n.createRange(),u.selectNodeContents(this.getDocument())),s=i,c=!1,typeof s=="string"?r.caseSensitive||(s=s.toLowerCase()):c=!0,e=t.getRangeBoundaryPosition(this,!o),l=u.comparePoint(e.node,e.offset),l===-1?e=t.getRangeBoundaryPosition(u,!0):l===1&&(e=t.getRangeBoundaryPosition(u,!1)),h=e,a=!1;;)if(f=tu(h,s,c,u,r),f){if(f.valid)return this.setStartAndEnd(f.startPos.node,f.startPos.offset,f.endPos.node,f.endPos.offset),!0;h=o?f.startPos:f.endPos}else if(r.wrap&&!a)u=u.cloneRange(),h=t.getRangeBoundaryPosition(u,!o),u.setBoundary(e.node,e.offset,o),a=!0;else return!1}),pasteHtml:function(n){if(this.deleteContents(),n){var t=this.createContextualFragment(n),i=t.lastChild;this.insertNode(t);this.collapseAfter(i)}}});f(n.selectionPrototype,{expand:r(function(n,t,i){this.changeEachRange(function(n){n.expand(t,i)})}),move:r(function(n,t,i,r){var f=0,u;return this.focusNode&&(this.collapse(this.focusNode,this.focusOffset),u=this.getRangeAt(0),r||(r={}),r.characterOptions=a(r.characterOptions,rr),f=u.move(t,i,r),this.setSingleRange(u)),f}),trimStart:vt("trimStart"),trimEnd:vt("trimEnd"),trim:vt("trim"),selectCharacters:r(function(t,i,r,u,f,e){var o=n.createRange(i);o.selectCharacters(i,r,u,e);this.setSingleRange(o,f)}),saveCharacterRanges:r(function(n,t,i){for(var u=this.getAllRanges(),e=u.length,f=[],o=e==1&&this.isBackward(),r=0,s=u.length;r<s;++r)f[r]={characterRange:u[r].toCharacterRange(t,i),backward:o,characterOptions:i};return f}),restoreCharacterRanges:r(function(t,i,r){this.removeAllRanges();for(var f=0,s=r.length,e,u,o;f<s;++f)u=r[f],o=u.characterRange,e=n.createRange(i),e.selectCharacters(i,o.start,o.end,u.characterOptions),this.addRange(e,u.backward)}),text:r(function(n,t){for(var r=[],i=0,u=this.rangeCount;i<u;++i)r[i]=this.getRangeAt(i).text(t);return r.join("")})});n.innerText=function(t,i){var r=n.createRange(t);return r.selectNodeContents(t),r.text(i)};n.createWordIterator=function(n,t,i){var u=ht();i=w(i,or);var f=u.getPosition(n,t),r=k(f,i.characterOptions,i.wordOptions),e=tt(i.direction);return{next:function(){return e?r.previousStartToken():r.nextEndToken()},dispose:function(){r.dispose();this.next=function(){}}}};n.noMutation=function(n){var t=ht();n(t);ct()};n.noMutation.createEntryPointFunction=r;n.textRange={isBlockNode:cr,isCollapsedWhitespaceNode:ft,createPosition:r(function(n,t,i){return n.getPosition(t,i)})}}),n},this);
(function(n,t,i,r){"use strict";function hi(n,t,i){return setTimeout(li(n,i),t)}function it(n,t,i){return Array.isArray(n)?(v(n,i[t],i),!0):!1}function v(n,t,i){var u;if(n)if(n.forEach)n.forEach(t,i);else if(n.length!==r)for(u=0;u<n.length;)t.call(i,n[u],u,n),u++;else for(u in n)n.hasOwnProperty(u)&&t.call(i,n[u],u,n)}function k(n,t,i){for(var f=Object.keys(t),u=0;u<f.length;)(!i||i&&n[f[u]]===r)&&(n[f[u]]=t[f[u]]),u++;return n}function ci(n,t){return k(n,t,!0)}function o(n,t,i){var u=t.prototype,r;r=n.prototype=Object.create(u);r.constructor=n;r._super=u;i&&k(r,i)}function li(n,t){return function(){return n.apply(t,arguments)}}function ai(n,t){return typeof n==fr?n.apply(t?t[0]||r:r,t):n}function er(n,t){return n===r?t:n}function pt(n,t,i){v(bt(t),function(t){n.addEventListener(t,i,!1)})}function wt(n,t,i){v(bt(t),function(t){n.removeEventListener(t,i,!1)})}function or(n,t){while(n){if(n==t)return!0;n=n.parentNode}return!1}function d(n,t){return n.indexOf(t)>-1}function bt(n){return n.trim().split(/\s+/g)}function rt(n,t,i){if(n.indexOf&&!i)return n.indexOf(t);for(var r=0;r<n.length;){if(i&&n[r][i]==t||!i&&n[r]===t)return r;r++}return-1}function kt(n){return Array.prototype.slice.call(n,0)}function sr(n,t,i){for(var u=[],e=[],r=0,f;r<n.length;)f=t?n[r][t]:n[r],rt(e,f)<0&&u.push(n[r]),e[r]=f,r++;return i&&(u=t?u.sort(function(n,i){return n[t]>i[t]}):u.sort()),u}function dt(n,t){for(var i,u,e=t[0].toUpperCase()+t.slice(1),f=0;f<ur.length;){if(i=ur[f],u=i?i+e:t,u in n)return u;f++}return r}function hu(){return su++}function hr(n){var t=n.ownerDocument;return t.defaultView||t.parentWindow}function s(n,t){var i=this;this.manager=n;this.callback=t;this.element=n.element;this.target=n.options.inputTarget;this.domHandler=function(t){ai(n.options.enable,[n])&&i.handler(t)};this.init()}function vu(n){var t,i=n.options.inputClass;return t=i?i:cu?pi:lu?ri:cr?wi:ii,new t(n,yu)}function yu(n,t,i){var r=i.pointers.length,o=i.changedPointers.length,s=t&f&&r-o==0,h=t&(u|e)&&r-o==0;i.isFirst=!!s;i.isFinal=!!h;s&&(n.session={});i.eventType=t;pu(n,i);n.emit("hammer.input",i);n.recognize(i);n.session.prevInput=i}function pu(n,t){var i=n.session,u=t.pointers,e=u.length,f;i.firstInput||(i.firstInput=vr(t));e>1&&!i.firstMultiple?i.firstMultiple=vr(t):e===1&&(i.firstMultiple=!1);var o=i.firstInput,r=i.firstMultiple,s=r?r.center:o.center,h=t.center=yr(u);t.timeStamp=si();t.deltaTime=t.timeStamp-o.timeStamp;t.angle=yi(s,h);t.distance=ti(s,h);wu(i,t);t.offsetDirection=pr(t.deltaX,t.deltaY);t.scale=r?gu(r.pointers,u):1;t.rotation=r?du(r.pointers,u):0;bu(i,t);f=n.element;or(t.srcEvent.target,f)&&(f=t.srcEvent.target);t.target=f}function wu(n,t){var i=t.center,r=n.offsetDelta||{},e=n.prevDelta||{},o=n.prevInput||{};(t.eventType===f||o.eventType===u)&&(e=n.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=n.offsetDelta={x:i.x,y:i.y});t.deltaX=e.x+(i.x-r.x);t.deltaY=e.y+(i.y-r.y)}function bu(n,t){var i=n.lastInterval||t,c=t.timeStamp-i.timeStamp,f,o,s,h;if(t.eventType!=e&&(c>au||i.velocity===r)){var l=i.deltaX-t.deltaX,a=i.deltaY-t.deltaY,u=ku(c,l,a);o=u.x;s=u.y;f=ft(u.x)>ft(u.y)?u.x:u.y;h=pr(l,a);n.lastInterval=t}else f=i.velocity,o=i.velocityX,s=i.velocityY,h=i.direction;t.velocity=f;t.velocityX=o;t.velocityY=s;t.direction=h}function vr(n){for(var i=[],t=0;t<n.pointers.length;)i[t]={clientX:tt(n.pointers[t].clientX),clientY:tt(n.pointers[t].clientY)},t++;return{timeStamp:si(),pointers:i,center:yr(i),deltaX:n.deltaX,deltaY:n.deltaY}}function yr(n){var t=n.length;if(t===1)return{x:tt(n[0].clientX),y:tt(n[0].clientY)};for(var r=0,u=0,i=0;i<t;)r+=n[i].clientX,u+=n[i].clientY,i++;return{x:tt(r/t),y:tt(u/t)}}function ku(n,t,i){return{x:t/n||0,y:i/n||0}}function pr(n,t){return n===t?gt:ft(n)>=ft(t)?n>0?ot:st:t>0?ht:ct}function ti(n,t,i){i||(i=ar);var r=t[i[0]]-n[i[0]],u=t[i[1]]-n[i[1]];return Math.sqrt(r*r+u*u)}function yi(n,t,i){i||(i=ar);var r=t[i[0]]-n[i[0]],u=t[i[1]]-n[i[1]];return Math.atan2(u,r)*180/Math.PI}function du(n,t){return yi(t[1],t[0],ni)-yi(n[1],n[0],ni)}function gu(n,t){return ti(t[0],t[1],ni)/ti(n[0],n[1],ni)}function ii(){this.evEl=tf;this.evWin=rf;this.allow=!0;this.pressed=!1;s.apply(this,arguments)}function pi(){this.evEl=wr;this.evWin=br;s.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function kr(){this.evTarget=of;this.evWin=sf;this.started=!1;s.apply(this,arguments)}function hf(n,t){var i=kt(n.touches),r=kt(n.changedTouches);return t&(u|e)&&(i=sr(i.concat(r),"identifier",!0)),[i,r]}function ri(){this.evTarget=gr;this.targetIds={};s.apply(this,arguments)}function cf(n,t){var r=kt(n.touches),o=this.targetIds;if(t&(f|g)&&r.length===1)return o[r[0].identifier]=!0,[r,r];var i,s,h=kt(n.changedTouches),c=[],l=this.target;if(s=r.filter(function(n){return or(n.target,l)}),t===f)for(i=0;i<s.length;)o[s[i].identifier]=!0,i++;for(i=0;i<h.length;)o[h[i].identifier]&&c.push(h[i]),t&(u|e)&&delete o[h[i].identifier],i++;if(c.length)return[sr(s.concat(c),"identifier",!0),c]}function wi(){s.apply(this,arguments);var n=li(this.handler,this);this.touch=new ri(this.manager,n);this.mouse=new ii(this.manager,n)}function ki(n,t){this.manager=n;this.set(t)}function lf(n){if(d(n,lt))return lt;var t=d(n,at),i=d(n,vt);return t&&i?at+" "+vt:t||i?t?at:vt:d(n,bi)?bi:ru}function p(n){this.id=hu();this.manager=null;this.options=ci(n||{},this.defaults);this.options.enable=er(this.options.enable,!0);this.state=ui;this.simultaneous={};this.requireFail=[]}function af(n){return n&yt?"cancel":n&w?"end":n&ut?"move":n&h?"start":""}function uu(n){return n==ct?"down":n==ht?"up":n==ot?"left":n==st?"right":""}function fi(n,t){var i=t.manager;return i?i.get(n):n}function c(){p.apply(this,arguments)}function ei(){c.apply(this,arguments);this.pX=null;this.pY=null}function di(){c.apply(this,arguments)}function gi(){p.apply(this,arguments);this._timer=null;this._input=null}function nr(){c.apply(this,arguments)}function tr(){c.apply(this,arguments)}function oi(){p.apply(this,arguments);this.pTime=!1;this.pCenter=!1;this._timer=null;this._input=null;this.count=0}function b(n,t){return t=t||{},t.recognizers=er(t.recognizers,b.defaults.preset),new rr(n,t)}function rr(n,t){t=t||{};this.options=ci(t,b.defaults);this.options.inputTarget=this.options.inputTarget||n;this.handlers={};this.session={};this.recognizers=[];this.element=n;this.input=vu(this);this.touchAction=new ki(this,this.options.touchAction);eu(this,!0);v(t.recognizers,function(n){var t=this.add(new n[0](n[1]));n[2]&&t.recognizeWith(n[2]);n[3]&&t.requireFailure(n[3])},this)}function eu(n,t){var i=n.element;v(n.options.cssProps,function(n,r){i.style[dt(i.style,r)]=t?n:""})}function vf(n,i){var r=t.createEvent("Event");r.initEvent(n,!0,!0);r.gesture=i;i.target.dispatchEvent(r)}var ur=["","webkit","moz","MS","ms","o"],ou=t.createElement("div"),fr="function",tt=Math.round,ft=Math.abs,si=Date.now,su=1,cr="ontouchstart"in n,cu=dt(n,"PointerEvent")!==r,lu=cr&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),et="touch",vi="mouse",au=25,f=1,g=2,u=4,e=8,gt=1,ot=2,st=4,ht=8,ct=16,l=ot|st,nt=ht|ct,lr=l|nt,ar=["x","y"],ni=["clientX","clientY"],dr,gr,fu,ir;s.prototype={handler:function(){},init:function(){this.evEl&&pt(this.element,this.evEl,this.domHandler);this.evTarget&&pt(this.target,this.evTarget,this.domHandler);this.evWin&&pt(hr(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&wt(this.element,this.evEl,this.domHandler);this.evTarget&&wt(this.target,this.evTarget,this.domHandler);this.evWin&&wt(hr(this.element),this.evWin,this.domHandler)}};var nf={mousedown:f,mousemove:g,mouseup:u},tf="mousedown",rf="mousemove mouseup";o(ii,s,{handler:function(n){var t=nf[n.type];(t&f&&n.button===0&&(this.pressed=!0),t&g&&n.which!==1&&(t=u),this.pressed&&this.allow)&&(t&u&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[n],changedPointers:[n],pointerType:vi,srcEvent:n}))}});var uf={pointerdown:f,pointermove:g,pointerup:u,pointercancel:e,pointerout:e},ff={2:et,3:"pen",4:vi,5:"kinect"},wr="pointerdown",br="pointermove pointerup pointercancel";n.MSPointerEvent&&(wr="MSPointerDown",br="MSPointerMove MSPointerUp MSPointerCancel");o(pi,s,{handler:function(n){var t=this.store,o=!1,h=n.type.toLowerCase().replace("ms",""),r=uf[h],s=ff[n.pointerType]||n.pointerType,c=s==et,i=rt(t,n.pointerId,"pointerId");(r&f&&(n.button===0||c)?i<0&&(t.push(n),i=t.length-1):r&(u|e)&&(o=!0),i<0)||(t[i]=n,this.callback(this.manager,r,{pointers:t,changedPointers:[n],pointerType:s,srcEvent:n}),o&&t.splice(i,1))}});var ef={touchstart:f,touchmove:g,touchend:u,touchcancel:e},of="touchstart",sf="touchstart touchmove touchend touchcancel";o(kr,s,{handler:function(n){var i=ef[n.type],t;(i===f&&(this.started=!0),this.started)&&(t=hf.call(this,n,i),i&(u|e)&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:et,srcEvent:n}))}});dr={touchstart:f,touchmove:g,touchend:u,touchcancel:e};gr="touchstart touchmove touchend touchcancel";o(ri,s,{handler:function(n){var i=dr[n.type],t=cf.call(this,n,i);t&&this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:et,srcEvent:n})}});o(wi,s,{handler:function(n,t,i){var r=i.pointerType==et,f=i.pointerType==vi;if(r)this.mouse.allow=!1;else if(f&&!this.mouse.allow)return;t&(u|e)&&(this.mouse.allow=!0);this.callback(n,t,i)},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var nu=dt(ou.style,"touchAction"),tu=nu!==r,iu="compute",ru="auto",bi="manipulation",lt="none",at="pan-x",vt="pan-y";ki.prototype={set:function(n){n==iu&&(n=this.compute());tu&&(this.manager.element.style[nu]=n);this.actions=n.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var n=[];return v(this.manager.recognizers,function(t){ai(t.options.enable,[t])&&(n=n.concat(t.getTouchAction()))}),lf(n.join(" "))},preventDefaults:function(n){var t,i;if(!tu){if(t=n.srcEvent,i=n.offsetDirection,this.manager.session.prevented){t.preventDefault();return}var r=this.actions,u=d(r,lt),f=d(r,vt),e=d(r,at);if(u||f&&i&l||e&&i&nt)return this.preventSrc(t)}},preventSrc:function(n){this.manager.session.prevented=!0;n.preventDefault()}};var ui=1,h=2,ut=4,w=8,y=w,yt=16,a=32;p.prototype={defaults:{},set:function(n){return k(this.options,n),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(n){if(it(n,"recognizeWith",this))return this;var t=this.simultaneous;return n=fi(n,this),t[n.id]||(t[n.id]=n,n.recognizeWith(this)),this},dropRecognizeWith:function(n){return it(n,"dropRecognizeWith",this)?this:(n=fi(n,this),delete this.simultaneous[n.id],this)},requireFailure:function(n){if(it(n,"requireFailure",this))return this;var t=this.requireFail;return n=fi(n,this),rt(t,n)===-1&&(t.push(n),n.requireFailure(this)),this},dropRequireFailure:function(n){if(it(n,"dropRequireFailure",this))return this;n=fi(n,this);var t=rt(this.requireFail,n);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(n){return!!this.simultaneous[n.id]},emit:function(n){function i(i){r.manager.emit(r.options.event+(i?af(t):""),n)}var r=this,t=this.state;t<w&&i(!0);i();t>=w&&i(!0)},tryEmit:function(n){if(this.canEmit())return this.emit(n);this.state=a},canEmit:function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(a|ui)))return!1;n++}return!0},recognize:function(n){var t=k({},n);if(!ai(this.options.enable,[this,t])){this.reset();this.state=a;return}this.state&(y|yt|a)&&(this.state=ui);this.state=this.process(t);this.state&(h|ut|w|yt)&&this.tryEmit(t)},process:function(){},getTouchAction:function(){},reset:function(){}};o(c,p,{defaults:{pointers:1},attrTest:function(n){var t=this.options.pointers;return t===0||n.pointers.length===t},process:function(n){var t=this.state,i=n.eventType,r=t&(h|ut),f=this.attrTest(n);return r&&(i&e||!f)?t|yt:r||f?i&u?t|w:(t&h)?t|ut:h:a}});o(ei,c,{defaults:{event:"pan",threshold:10,pointers:1,direction:lr},getTouchAction:function(){var t=this.options.direction,n=[];return t&l&&n.push(vt),t&nt&&n.push(at),n},directionTest:function(n){var i=this.options,r=!0,u=n.distance,t=n.direction,f=n.deltaX,e=n.deltaY;return t&i.direction||(i.direction&l?(t=f===0?gt:f<0?ot:st,r=f!=this.pX,u=Math.abs(n.deltaX)):(t=e===0?gt:e<0?ht:ct,r=e!=this.pY,u=Math.abs(n.deltaY))),n.direction=t,r&&u>i.threshold&&t&i.direction},attrTest:function(n){return c.prototype.attrTest.call(this,n)&&(this.state&h||!(this.state&h)&&this.directionTest(n))},emit:function(n){this.pX=n.deltaX;this.pY=n.deltaY;var t=uu(n.direction);t&&this.manager.emit(this.options.event+t,n);this._super.emit.call(this,n)}});o(di,c,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[lt]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&h)},emit:function(n){if(this._super.emit.call(this,n),n.scale!==1){var t=n.scale<1?"in":"out";this.manager.emit(this.options.event+t,n)}}});o(gi,p,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[ru]},process:function(n){var t=this.options,i=n.pointers.length===t.pointers,r=n.distance<t.threshold,o=n.deltaTime>t.time;if(this._input=n,!r||!i||n.eventType&(u|e)&&!o)this.reset();else if(n.eventType&f)this.reset(),this._timer=hi(function(){this.state=y;this.tryEmit()},t.time,this);else if(n.eventType&u)return y;return a},reset:function(){clearTimeout(this._timer)},emit:function(n){this.state===y&&(n&&n.eventType&u?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=si(),this.manager.emit(this.options.event,this._input)))}});o(nr,c,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[lt]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&h)}});o(tr,c,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:l|nt,pointers:1},getTouchAction:function(){return ei.prototype.getTouchAction.call(this)},attrTest:function(n){var t=this.options.direction,i;return t&(l|nt)?i=n.velocity:t&l?i=n.velocityX:t&nt&&(i=n.velocityY),this._super.attrTest.call(this,n)&&t&n.direction&&n.distance>this.options.threshold&&ft(i)>this.options.velocity&&n.eventType&u},emit:function(n){var t=uu(n.direction);t&&this.manager.emit(this.options.event+t,n);this.manager.emit(this.options.event,n)}});o(oi,p,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[bi]},process:function(n){var t=this.options,o=n.pointers.length===t.pointers,s=n.distance<t.threshold,c=n.deltaTime<t.time,i,r,e;if(this.reset(),n.eventType&f&&this.count===0)return this.failTimeout();if(s&&c&&o){if(n.eventType!=u)return this.failTimeout();if(i=this.pTime?n.timeStamp-this.pTime<t.interval:!0,r=!this.pCenter||ti(this.pCenter,n.center)<t.posThreshold,this.pTime=n.timeStamp,this.pCenter=n.center,r&&i?this.count+=1:this.count=1,this._input=n,e=this.count%t.taps,e===0)return this.hasRequireFailures()?(this._timer=hi(function(){this.state=y;this.tryEmit()},t.interval,this),h):y}return a},failTimeout:function(){return this._timer=hi(function(){this.state=a},this.options.interval,this),a},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==y&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});b.VERSION="2.0.4";b.defaults={domEvents:!1,touchAction:iu,enable:!0,inputTarget:null,inputClass:null,preset:[[nr,{enable:!1}],[di,{enable:!1},["rotate"]],[tr,{direction:l}],[ei,{direction:l},["swipe"]],[oi],[oi,{event:"doubletap",taps:2},["tap"]],[gi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};fu=1;ir=2;rr.prototype={set:function(n){return k(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},stop:function(n){this.session.stopped=n?ir:fu},recognize:function(n){var r=this.session,i,f,t,u;if(!r.stopped)for(this.touchAction.preventDefaults(n),f=this.recognizers,t=r.curRecognizer,(!t||t&&t.state&y)&&(t=r.curRecognizer=null),u=0;u<f.length;)i=f[u],r.stopped!==ir&&(!t||i==t||i.canRecognizeWith(t))?i.recognize(n):i.reset(),!t&&i.state&(h|ut|w)&&(t=r.curRecognizer=i),u++},get:function(n){var i,t;if(n instanceof p)return n;for(i=this.recognizers,t=0;t<i.length;t++)if(i[t].options.event==n)return i[t];return null},add:function(n){if(it(n,"add",this))return this;var t=this.get(n.options.event);return t&&this.remove(t),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},remove:function(n){if(it(n,"remove",this))return this;var t=this.recognizers;return n=this.get(n),t.splice(rt(t,n),1),this.touchAction.update(),this},on:function(n,t){var i=this.handlers;return v(bt(n),function(n){i[n]=i[n]||[];i[n].push(t)}),this},off:function(n,t){var i=this.handlers;return v(bt(n),function(n){t?i[n].splice(rt(i[n],t),1):delete i[n]}),this},emit:function(n,t){var i,r;if(this.options.domEvents&&vf(n,t),i=this.handlers[n]&&this.handlers[n].slice(),i&&i.length)for(t.type=n,t.preventDefault=function(){t.srcEvent.preventDefault()},r=0;r<i.length;)i[r](t),r++},destroy:function(){this.element&&eu(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};k(b,{INPUT_START:f,INPUT_MOVE:g,INPUT_END:u,INPUT_CANCEL:e,STATE_POSSIBLE:ui,STATE_BEGAN:h,STATE_CHANGED:ut,STATE_ENDED:w,STATE_RECOGNIZED:y,STATE_CANCELLED:yt,STATE_FAILED:a,DIRECTION_NONE:gt,DIRECTION_LEFT:ot,DIRECTION_RIGHT:st,DIRECTION_UP:ht,DIRECTION_DOWN:ct,DIRECTION_HORIZONTAL:l,DIRECTION_VERTICAL:nt,DIRECTION_ALL:lr,Manager:rr,Input:s,TouchAction:ki,TouchInput:ri,MouseInput:ii,PointerEventInput:pi,TouchMouseInput:wi,SingleTouchInput:kr,Recognizer:p,AttrRecognizer:c,Tap:oi,Pan:ei,Swipe:tr,Pinch:di,Rotate:nr,Press:gi,on:pt,off:wt,each:v,merge:ci,extend:k,inherit:o,bindFn:li,prefixed:dt});typeof define==fr&&define.amd?define(function(){return b}):typeof module!="undefined"&&module.exports?module.exports=b:n[i]=b})(window,document,"Hammer"),function(n,t,i){"use strict";function r(n,t){if(!n||!t||!t.type)return null;var r;return r=t.type.indexOf("pan")>-1?new i.Pan(t):t.type.indexOf("pinch")>-1?new i.Pinch(t):t.type.indexOf("press")>-1?new i.Press(t):t.type.indexOf("rotate")>-1?new i.Rotate(t):t.type.indexOf("swipe")>-1?new i.Swipe(t):new i.Tap(t),n.add(r),r}function u(n,t){return n&&(t.preventGhosts=n.preventGhosts),t}function f(n){return n.indexOf("pan")>-1?"pan":n.indexOf("pinch")>-1?"pinch":n.indexOf("press")>-1?"press":n.indexOf("rotate")>-1?"rotate":n.indexOf("swipe")>-1?"swipe":"tap"}function e(n,t,i){if(n&&t){var u=n.get(t.type);u||(u=r(n,t));t.directions||(t.directions=t.type==="pan"||t.type==="swipe"?"DIRECTION_ALL":t.type.indexOf("left")>-1?"DIRECTION_LEFT":t.type.indexOf("right")>-1?"DIRECTION_RIGHT":t.type.indexOf("up")>-1?"DIRECTION_UP":t.type.indexOf("down")>-1?"DIRECTION_DOWN":"");t.direction=o(t.directions);u.set(t);t.recognizeWith&&(n.get(t.recognizeWith)||r(n,{type:t.recognizeWith}),u.recognizeWith(n.get(t.recognizeWith)));t.dropRecognizeWith&&n.get(t.dropRecognizeWith)&&u.dropRecognizeWith(n.get(t.dropRecognizeWith));t.requireFailure&&(n.get(t.requireFailure)||r(n,{type:t.requireFailure}),u.requireFailure(n.get(t.requireFailure)));t.dropRequireFailure&&n.get(t.dropRequireFailure)&&u.dropRequireFailure(n.get(t.dropRequireFailure));t.preventGhosts&&i&&s(i)}}function o(n){var r=0;return t.forEach(n.split("|"),function(n){i.hasOwnProperty(n)&&(r=r|i[n])}),r}function s(t){function u(n){for(var u,f,t=0;t<i.length;t++)if(u=i[t][0],f=i[t][1],Math.abs(n.clientX-u)<r&&Math.abs(n.clientY-f)<r){n.stopPropagation();n.preventDefault();break}}function e(){i=[]}function o(){i.splice(0,1)}function s(n){if(n.touches.length-n.changedTouches.length<=0){var t=n.changedTouches[0];i.push([t.clientX,t.clientY]);setTimeout(o,f)}}if(t){var i=[],r=25,f=2500;"ontouchstart"in n&&(t[0].addEventListener("touchstart",e,!0),t[0].addEventListener("touchend",s,!0),t[0].addEventListener("click",u,!0),t[0].addEventListener("mouseup",u,!0))}}if(typeof t=="undefined")if(typeof require!="undefined"&&require)try{t=require("angular")}catch(h){return console.log("ERROR: Angular Hammer could not require() a reference to angular")}else if(typeof n.angular!="undefined")t=n.angular;else return console.log("ERROR: Angular Hammer could not find or require() a reference to angular");if(typeof i=="undefined")if(typeof require!="undefined"&&require)try{i=require("hammerjs")}catch(h){return console.log("ERROR: Angular Hammer could not require() a reference to Hammer")}else if(typeof n.Hammer!="undefined")i=n.Hammer;else return console.log("ERROR: Angular Hammer could not find or require() a reference to Hammer");t.module("hmTouchEvents",[]);t.forEach(["hmCustom:custom","hmSwipe:swipe","hmSwipeleft:swipeleft","hmSwiperight:swiperight","hmSwipeup:swipeup","hmSwipedown:swipedown","hmPan:pan","hmPanstart:panstart","hmPanmove:panmove","hmPanend:panend","hmPancancel:pancancel","hmPanleft:panleft","hmPanright:panright","hmPanup:panup","hmPandown:pandown","hmPress:press","hmPressup:pressup","hmRotate:rotate","hmRotatestart:rotatestart","hmRotatemove:rotatemove","hmRotateend:rotateend","hmRotatecancel:rotatecancel","hmPinch:pinch","hmPinchstart:pinchstart","hmPinchmove:pinchmove","hmPinchend:pinchend","hmPinchcancel:pinchcancel","hmPinchin:pinchin","hmPinchout:pinchout","hmTap:tap","hmDoubletap:doubletap"],function(n){var s=n.split(":"),o=s[0],r=s[1];t.module("hmTouchEvents").directive(o,["$parse","$window",function(n,s){return{restrict:"A",link:function(h,c,l){if(!i||!s.addEventListener){o==="hmTap"&&c.bind("click",p);o==="hmDoubletap"&&c.bind("dblclick",p);return}var v=c.data("hammer"),y=t.fromJson(l.hmManagerOptions),a=t.fromJson(l.hmRecognizerOptions);v||(v=new i.Manager(c[0],y),c.data("hammer",v),h.$on("$destroy",function(){v.destroy()}));var w=l[o],b=n(w),p=function(n){function r(){var t=b(h,{$event:n});t&&t.call(h,n)}var i=h.$root.$$phase,t=v.get(n.type);n.element=c;t&&(t.options.preventDefault&&n.preventDefault(),t.options.stopPropagation&&n.srcEvent.stopPropagation());i==="$apply"||i==="$digest"?r():h.$apply(r)};if(t.isArray(a)?t.forEach(a,function(n){o==="hmCustom"?r=n.event:(n.type||(n.type=f(r)),n.event&&delete n.event);(o==="hmCustom"||r.indexOf(n.type)>-1)&&e(v,u(y,n),c)}):t.isObject(a)?(o==="hmCustom"?r=a.event:(a.type||(a.type=f(r)),a.event&&delete a.event),(o==="hmCustom"||r.indexOf(a.type)>-1)&&e(v,u(y,a),c)):o!=="hmCustom"?(a={type:f(r)},o==="hmDoubletap"&&(a.event=r,a.taps=2,v.get("tap")&&(a.recognizeWith="tap")),a.type.indexOf("pan")>-1&&v.get("swipe")&&(a.recognizeWith="swipe"),a.type.indexOf("pinch")>-1&&v.get("rotate")&&(a.recognizeWith="rotate"),e(v,u(y,a),c)):r=null,r)v.on(r,p)}}}])})}(window,window.angular,window.Hammer),function(n,t){"use strict";function ht(n,t,i){if(!n)throw ngMinErr("areq",t||"?",i||"required");return n}function ct(n,t){return!n&&!t?"":n?t?(h(n)&&(n=n.join(" ")),h(t)&&(t=t.join(" ")),n+" "+t):n:t}function ni(n){var t={};return n&&(n.to||n.from)&&(t.to=n.to,t.from=n.from),t}function e(n,t,r){var u="";return n=h(n)?n:n&&c(n)&&n.length?n.split(/\s+/):[],i(n,function(n,i){n&&0<n.length&&(u+=0<i?" ":"",u+=r?t+n:n+t)}),u}function ti(n){if(n instanceof s)switch(n.length){case 0:return[];case 1:if(1===n[0].nodeType)return n;break;default:return s(nt(n))}if(1===n.nodeType)return s(n)}function nt(n){var t,i;if(!n[0])return n;for(t=0;t<n.length;t++)if(i=n[t],1==i.nodeType)return i}function ii(n,t,r){i(t,function(t){n.addClass(t,r)})}function ri(n,t,r){i(t,function(t){n.removeClass(t,r)})}function l(n){return function(t,i){i.addClass&&(ii(n,t,i.addClass),i.addClass=null);i.removeClass&&(ri(n,t,i.removeClass),i.removeClass=null)}}function w(n){if(n=n||{},!n.$$prepared){var t=n.domOperation||u;n.domOperation=function(){n.$$domOperationFired=!0;t();t=u};n.$$prepared=!0}return n}function a(n,t){lt(n,t);at(n,t)}function lt(n,t){t.from&&(n.css(t.from),t.from=null)}function at(n,t){t.to&&(n.css(t.to),t.to=null)}function v(n,t,i){var r=(t.addClass||"")+" "+(i.addClass||""),f=(t.removeClass||"")+" "+(i.removeClass||"");return n=ui(n.attr("class"),r,f),i.preparationClasses&&(t.preparationClasses=k(i.preparationClasses,t.preparationClasses),delete i.preparationClasses),r=t.domOperation!==u?t.domOperation:null,bt(t,i),r&&(t.domOperation=r),t.addClass=n.addClass?n.addClass:null,t.removeClass=n.removeClass?n.removeClass:null,t}function ui(n,t,r){function e(n){c(n)&&(n=n.split(" "));var t={};return i(n,function(n){n.length&&(t[n]=!0)}),t}var f={},u;return n=e(n),t=e(t),i(t,function(n,t){f[t]=1}),r=e(r),i(r,function(n,t){f[t]=1===f[t]?null:-1}),u={addClass:"",removeClass:""},i(f,function(t,i){var r,f;1===t?(r="addClass",f=!n[i]):-1===t&&(r="removeClass",f=n[i]);f&&(u[r].length&&(u[r]+=" "),u[r]+=i)}),u}function r(n){return n instanceof t.element?n[0]:n}function fi(n,t,i){var r="";t&&(r=e(t,"ng-",!0));i.addClass&&(r=k(r,e(i.addClass,"-add")));i.removeClass&&(r=k(r,e(i.removeClass,"-remove")));r.length&&(i.preparationClasses=r,n.addClass(r))}function b(n,t){var i=t?"-"+t+"s":"";return y(n,[p,i]),[p,i]}function tt(n,t){var i=t?"paused":"",r=o+"PlayState";return y(n,[r,i]),[r,i]}function y(n,t){n.style[t[0]]=t[1]}function k(n,t){return n?t?n+" "+t:n:t}function vt(n,t,r){var u=Object.create(null),f=n.getComputedStyle(t)||{};return i(r,function(n,t){var i=f[n],r;i&&(r=i.charAt(0),("-"===r||"+"===r||0<=r)&&(i=ei(i)),0===i&&(i=null),u[t]=i)}),u}function ei(n){var t=0;return n=n.split(/\s*,\s*/),i(n,function(n){"s"==n.charAt(n.length-1)&&(n=n.substring(0,n.length-1));n=parseFloat(n)||0;t=t?Math.max(n,t):n}),t}function it(n){return 0===n||null!=n}function yt(n,t){var i=f,r=n+"s";return t?i+="Duration":r+=" linear all",[i,r]}function pt(){var n=Object.create(null);return{flush:function(){n=Object.create(null)},count:function(t){return(t=n[t])?t.total:0},get:function(t){return(t=n[t])&&t.value},put:function(t,i){n[t]?n[t].total++:n[t]={total:1,value:i}}}}function wt(n,t,r){i(r,function(i){n[i]=d(n[i])?n[i]:t.style.getPropertyValue(i)})}var u=t.noop,bt=t.extend,s=t.element,i=t.forEach,h=t.isArray,c=t.isString,rt=t.isObject,ut=t.isUndefined,d=t.isDefined,kt=t.isFunction,ft=t.isElement,f,et,o,ot,dt,gt;ut(n.ontransitionend)&&d(n.onwebkittransitionend)?(f="WebkitTransition",et="webkitTransitionEnd transitionend"):(f="transition",et="transitionend");ut(n.onanimationend)&&d(n.onwebkitanimationend)?(o="WebkitAnimation",ot="webkitAnimationEnd animationend"):(o="animation",ot="animationend");var g=o+"Delay",st=o+"Duration",p=f+"Delay";n=f+"Duration";dt={transitionDuration:n,transitionDelay:p,transitionProperty:f+"Property",animationDuration:st,animationDelay:g,animationIterationCount:o+"IterationCount"};gt={transitionDuration:n,transitionDelay:p,animationDuration:st,animationDelay:g};t.module("ngAnimate",[]).directive("ngAnimateChildren",[function(){return function(n,i,r){n=r.ngAnimateChildren;t.isString(n)&&0===n.length?i.data("$$ngAnimateChildren",!0):r.$observe("ngAnimateChildren",function(n){i.data("$$ngAnimateChildren","on"===n||"true"===n)})}}]).factory("$$rAFScheduler",["$$rAF",function(n){function r(n){i=i.concat(n);u()}function u(){if(i.length){for(var f=i.shift(),r=0;r<f.length;r++)f[r]();t||n(function(){t||u()})}}var i,t;return i=r.queue=[],r.waitUntilQuiet=function(i){t&&t();t=n(function(){t=null;i();u()})},r}]).factory("$$AnimateRunner",["$q","$sniffer","$$animateAsyncRun",function(n,t,r){function f(n){this.setHost(n);this._doneCallbacks=[];this._runInAnimationFrame=r();this._state=0}return f.chain=function(n,t){function r(){i===n.length?t(!0):n[i](function(n){!1===n?t(!1):(i++,r())})}var i=0;r()},f.all=function(n,t){function u(i){r=r&&i;++f===n.length&&t(r)}var f=0,r=!0;i(n,function(n){n.done(u)})},f.prototype={setHost:function(n){this.host=n||{}},done:function(n){2===this._state?n():this._doneCallbacks.push(n)},progress:u,getPromise:function(){if(!this.promise){var t=this;this.promise=n(function(n,i){t.done(function(t){!1===t?i():n()})})}return this.promise},then:function(n,t){return this.getPromise().then(n,t)},"catch":function(n){return this.getPromise()["catch"](n)},"finally":function(n){return this.getPromise()["finally"](n)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(n){var t=this;0===t._state&&(t._state=1,t._runInAnimationFrame(function(){t._resolve(n)}))},_resolve:function(n){2!==this._state&&(i(this._doneCallbacks,function(t){t(n)}),this._doneCallbacks.length=0,this._state=2)}},f}]).factory("$$animateAsyncRun",["$$rAF",function(n){function i(i){t.push(i);1<t.length||n(function(){for(var n=0;n<t.length;n++)t[n]();t=[]})}var t=[];return function(){var n=!1;return i(function(){n=!0}),function(t){n?t():i(t)}}}]).provider("$$animateQueue",["$animateProvider",function(n){function f(n,i,r,u){return t[n].some(function(n){return n(i,r,u)})}function u(n,t){n=n||{};var i=0<(n.addClass||"").length,r=0<(n.removeClass||"").length;return t?i&&r:i||r}var t=this.rules={skip:[],cancel:[],join:[]};t.join.push(function(n,t){return!t.structural&&u(t.options)});t.skip.push(function(n,t){return!t.structural&&!u(t.options)});t.skip.push(function(n,t,i){return"leave"==i.event&&t.structural});t.skip.push(function(n,t,i){return i.structural&&2===i.state&&!t.structural});t.cancel.push(function(n,t,i){return i.structural&&t.structural});t.cancel.push(function(n,t,i){return 2===i.state&&t.structural});t.cancel.push(function(n,t,i){return n=t.options,i=i.options,n.addClass&&n.addClass===i.removeClass||n.removeClass&&n.removeClass===i.addClass});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(t,e,o,y,p,b,k,g,tt){function pt(){var n=!1;return function(t){n?t():e.$$postDigest(function(){n=!0;t()})}}function wt(n,t){var e=r(n),u=[],f=et[t];return f&&i(f,function(n){n.node.contains(e)&&u.push(n.callback)}),u}function kt(n,o,s){function et(r,u,f,e){ot(function(){var r=wt(n,u);r.length&&t(function(){i(r,function(t){t(n,f,e)})})});r.progress(u,f,e)}function g(t){var r=n,i=s;i.preparationClasses&&(r.removeClass(i.preparationClasses),i.preparationClasses=null);i.activeClasses&&(r.removeClass(i.activeClasses),i.activeClasses=null);yt(n,s);a(n,s);s.domOperation();p.complete(!t)}var d,y,p,ot,l,ft;if(((n=ti(n))&&(d=r(n),y=n.parent()),s=w(s),p=new k,ot=pt(),h(s.addClass)&&(s.addClass=s.addClass.join(" ")),s.addClass&&!c(s.addClass)&&(s.addClass=null),h(s.removeClass)&&(s.removeClass=s.removeClass.join(" ")),s.removeClass&&!c(s.removeClass)&&(s.removeClass=null),s.from&&!rt(s.from)&&(s.from=null),s.to&&!rt(s.to)&&(s.to=null),!d)||(l=[d.className,s.addClass,s.removeClass].join(" "),!ii(l)))return g(),p;var tt=0<=["enter","move","leave"].indexOf(o),ut=!ct||st.get(d),l=!ut&&it.get(d)||{},nt=!!l.state;if(ut||nt&&1==l.state||(ut=!gt(n,y,o)),ut)return g(),p;if(tt&&dt(n),y={structural:tt,element:n,event:o,close:g,options:s,runner:p},nt){if(f("skip",n,y,l))return 2===l.state?(g(),p):(v(n,l.options,s),l.runner);if(f("cancel",n,y,l))if(2===l.state)l.runner.end();else if(l.structural)l.close();else return v(n,l.options,y.options),l.runner;else if(f("join",n,y,l))if(2===l.state)v(n,s,{});else return fi(n,tt?o:null,s),o=y.event=l.event,s=v(n,l.options,y.options),l.runner}else v(n,s,{});return((nt=y.structural)||(nt="animate"===y.event&&0<Object.keys(y.options.to||{}).length||u(y.options)),!nt)?(g(),lt(n),p):(ft=(l.counter||0)+1,y.counter=ft,at(n,1,y),e.$$postDigest(function(){var t=it.get(d),i=!t,t=t||{},f=0<(n.parent()||[]).length&&("animate"===t.event||t.structural||u(t.options));i||t.counter!==ft||!f?(i&&(yt(n,s),a(n,s)),(i||tt&&t.event!==o)&&(s.domOperation(),p.end()),f||lt(n)):(o=!t.structural&&u(t.options,!0)?"setClass":t.event,at(n,2),t=b(n,o,t.options),t.done(function(t){g(!t);(t=it.get(d))&&t.counter===ft&&lt(r(n));et(p,o,"close",{})}),p.setHost(t),et(p,o,"start",{}))}),p)}function dt(n){n=r(n).querySelectorAll("[data-ng-animate]");i(n,function(n){var i=parseInt(n.getAttribute("data-ng-animate")),t=it.get(n);switch(i){case 2:t.runner.end();case 1:t&&it.remove(n)}})}function lt(n){n=r(n);n.removeAttribute("data-ng-animate");it.remove(n)}function ot(n,t){return r(n)===r(t)}function gt(n,t,i){var h;i=s(y[0].body);var e=ot(n,i)||"HTML"===n[0].nodeName,r=ot(n,o),f=!1,u;for((n=n.data("$ngAnimatePin"))&&(t=n);t&&t.length;){if(r||(r=ot(t,o)),n=t[0],1!==n.nodeType)break;if(h=it.get(n)||{},f||(f=h.structural||st.get(n)),(ut(u)||!0===u)&&(n=t.data("$$ngAnimateChildren"),d(n)&&(u=n)),f&&!1===u)break;r||(r=ot(t,o),r||(n=t.data("$ngAnimatePin"))&&(t=n));e||(e=ot(t,i));t=t.parent()}return(!f||u)&&r&&e}function at(n,t,i){i=i||{};i.state=t;n=r(n);n.setAttribute("data-ng-animate",t);i=(t=it.get(n))?bt(t,i):i;it.put(n,i)}var it=new p,st=new p,ct=null,ni=e.$watch(function(){return 0===g.totalPendingRequests},function(n){n&&(ni(),e.$$postDigest(function(){e.$$postDigest(function(){null===ct&&(ct=!0)})}))}),et={},vt=n.classNameFilter(),ii=vt?function(n){return vt.test(n)}:function(){return!0},yt=l(tt);return{on:function(n,t,i){t=nt(t);et[n]=et[n]||[];et[n].push({node:t,callback:i})},off:function(n,t,i){function u(n,t,i){var r=nt(t);return n.filter(function(n){return!(n.node===r&&(!i||n.callback===i))})}var r=et[n];r&&(et[n]=1===arguments.length?null:u(r,t,i))},pin:function(n,t){ht(ft(n),"element","not an element");ht(ft(t),"parentElement","not an element");n.data("$ngAnimatePin",t)},push:function(n,t,i,r){return i=i||{},i.domOperation=r,kt(n,t,i)},enabled:function(n,t){var f=arguments.length,i,u;return 0===f?t=!!ct:ft(n)?(i=r(n),u=st.get(i),1===f?t=!u:(t=!!t)?u&&st.remove(i):st.put(i,!0)):t=ct=!!n,t}}}]}]).provider("$$animation",["$animateProvider",function(){function n(n){return n.data("$$animationRunner")}var t=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(u,f,e,o,h,c){function y(n){function u(n){var e,t,i;if(n.processed)return n;for(n.processed=!0,e=n.domNode,t=e.parentNode,r.put(e,n);t;){if(i=r.get(t)){i.processed||(i=u(i));break}t=t.parentNode}return(i||f).children.push(n),n}for(var f={children:[]},r=new h,i,t=0;t<n.length;t++)i=n[t],r.put(i.domNode,n[t]={domNode:i.domNode,fn:i.fn,children:[]});for(t=0;t<n.length;t++)u(n[t]);return function(n){for(var f=[],r=[],u,i,e,t=0;t<n.children.length;t++)r.push(n.children[t]);for(n=r.length,u=0,i=[],t=0;t<r.length;t++)e=r[t],0>=n&&(n=u,u=0,f.push(i),i=[]),i.push(e.fn),e.children.forEach(function(n){u++;r.push(n)}),n--;return i.length&&f.push(i),f}(f)}var v=[],p=l(u);return function(h,l,b){function rt(n){n=n.hasAttribute("ng-animate-ref")?[n]:n.querySelectorAll("[ng-animate-ref]");var t=[];return i(n,function(n){var i=n.getAttribute("ng-animate-ref");i&&i.length&&t.push(n)}),t}function ut(n){var t=[],u={},e,f;return i(n,function(n,f){var e=r(n.element),h=0<=["enter","move"].indexOf(n.event),e=n.structural?rt(e):[],o;e.length?(o=h?"to":"from",i(e,function(n){var t=n.getAttribute("ng-animate-ref");u[t]=u[t]||{};u[t][o]={animationID:f,element:s(n)}})):t.push(n)}),e={},f={},i(u,function(i){var r=i.from,u=i.to,c;if(r&&u){var o=n[r.animationID],s=n[u.animationID],h=r.animationID.toString();f[h]||(c=f[h]={structural:!0,beforeStart:function(){o.beforeStart();s.beforeStart()},close:function(){o.close();s.close()},classes:ft(o.classes,s.classes),from:o,to:s,anchors:[]},c.classes.length?t.push(c):(t.push(o),t.push(s)));f[h].anchors.push({out:r.element,"in":u.element})}else r=r?r.animationID:u.animationID,u=r.toString(),e[u]||(e[u]=!0,t.push(n[r]))}),t}function ft(n,t){var f,i,r,u;for(n=n.split(" "),t=t.split(" "),f=[],i=0;i<n.length;i++)if(r=n[i],"ng-"!==r.substring(0,3))for(u=0;u<t.length;u++)if(r===t[u]){f.push(r);break}return f.join(" ")}function et(n){for(var i,r=t.length-1;0<=r;r--)if(i=t[r],e.has(i)&&(i=e.get(i)(n)))return i}function ot(t,i){t.from&&t.to?(n(t.from.element).setHost(i),n(t.to.element).setHost(i)):n(t.element).setHost(i)}function tt(){var t=n(h);!t||"leave"===l&&b.$$domOperationFired||t.end()}function g(n){h.off("$destroy",tt);h.removeData("$$animationRunner");p(h,b);a(h,b);b.domOperation();k&&u.removeClass(h,k);h.removeClass("ng-animate");d.complete(!n)}var it,d,nt,k;if(b=w(b),it=0<=["enter","move","leave"].indexOf(l),d=new o({end:function(){g()},cancel:function(){g(!0)}}),!t.length)return g(),d;h.data("$$animationRunner",d);nt=ct(h.attr("class"),ct(b.addClass,b.removeClass));k=b.tempClasses;k&&(nt+=" "+k,b.tempClasses=null);v.push({element:h,classes:nt,event:l,structural:it,options:b,beforeStart:function(){h.addClass("ng-animate");k&&u.addClass(h,k)},close:g});h.on("$destroy",tt);return 1<v.length?d:(f.$$postDigest(function(){var u=[],f,t;i(v,function(t){n(t.element)?u.push(t):t.close()});v.length=0;f=ut(u);t=[];i(f,function(i){t.push({domNode:r(i.from?i.from.element:i.element),fn:function(){var t,r,u;i.beforeStart();r=i.close;n(i.anchors?i.from.element||i.to.element:i.element)&&(u=et(i),u&&(t=u.start));t?(t=t(),t.done(function(n){r(!n)}),ot(i,t)):r()}})});c(y(t))}),d)}}]}]).provider("$animateCss",["$animateProvider",function(){var n=pt(),t=pt();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$animate",function(s,c,v,k,d,nt,rt,ut){function ct(n,t){var i=n.parentNode;return(i.$$ngAnimateParentKey||(i.$$ngAnimateParentKey=++ti))+"-"+n.getAttribute("class")+"-"+t}function kt(i,r,u,f){var o;return 0<n.count(u)&&(o=t.get(u),o||(r=e(r,"-stagger"),c.addClass(i,r),o=vt(s,i,f),o.animationDuration=Math.max(o.animationDuration,0),o.transitionDuration=Math.max(o.transitionDuration,0),c.removeClass(i,r),t.put(u,o))),o||{}}function pt(i){ft.push(i);rt.waitUntilQuiet(function(){n.flush();t.flush();for(var r=d(),i=0;i<ft.length;i++)ft[i](r);ft.length=0})}function bt(t,i,r){return i=n.get(r),i||(i=vt(s,t,dt),"infinite"===i.animationIterationCount&&(i.animationIterationCount=1)),n.put(r,i),t=i,r=t.animationDelay,i=t.transitionDelay,t.maxDelay=r&&i?Math.max(r,i):r||i,t.maxDuration=Math.max(t.animationDuration*t.animationIterationCount,t.transitionDuration),t}var ht=l(c),ti=0,ft=[];return function(t,s){function yi(){ti()}function rr(){ti(!0)}function ti(n){li||nr&&ui||(li=!0,ui=!1,s.$$skipPreparationClasses||c.removeClass(t,ei),c.removeClass(t,fr),tt(d,!1),b(d,!1),i(vt,function(n){d.style[n[0]]=""}),ht(t,s),a(t,s),Object.keys(wi).length&&i(wi,function(n,t){n?d.style.setProperty(t,n):d.style.removeProperty(t)}),s.onDone&&s.onDone(),si&&si.complete(!n))}function ur(n){l.blockTransition&&b(d,n);l.blockKeyframeAnimation&&tt(d,!!n)}function pi(){return si=new v({end:yi,cancel:rr}),pt(u),ti(),{$$willAnimate:!1,start:function(){return si},end:yi}}function er(){function u(){var e,h,u,y,p;if(!li){if(ur(!1),i(vt,function(n){d.style[n[0]]=n[1]}),ht(t,s),c.addClass(t,fr),l.recalculateTimingStyles){if(vi=d.className+" "+ei,ci=ct(d,vi),rt=bt(d,vi,ci),ri=rt.maxDelay,ai=Math.max(ri,0),dt=rt.maxDuration,0===dt){ti();return}l.hasTransitions=0<rt.transitionDuration;l.hasAnimations=0<rt.animationDuration}l.applyAnimationDelay&&(ri="boolean"!=typeof s.delay&&it(s.delay)?parseFloat(s.delay):ri,ai=Math.max(ri,0),rt.animationDelay=ri,oi=[g,ri+"s"],vt.push(oi),d.style[oi[0]]=oi[1]);ki=1e3*ai;tr=1e3*dt;s.easing&&(u=s.easing,l.hasTransitions&&(e=f+"TimingFunction",vt.push([e,u]),d.style[e]=u),l.hasAnimations&&(e=o+"TimingFunction",vt.push([e,u]),d.style[e]=u));rt.transitionDuration&&r.push(et);rt.animationDuration&&r.push(ot);n=Date.now();h=ki+1.5*tr;e=n+h;u=t.data("$$animateCss")||[];y=!0;u.length&&(p=u[0],(y=e>p.expectedEndTime)?k.cancel(p.timer):u.push(ti));y&&(h=k(a,h,!1),u[0]={timer:h,expectedEndTime:e},u.push(ti),t.data("$$animateCss",u));t.on(r.join(" "),v);s.to&&(s.cleanupStyles&&wt(wi,d,Object.keys(s.to)),at(t,s))}}function a(){var i=t.data("$$animateCss"),n;if(i){for(n=1;n<i.length;n++)i[n]();t.removeData("$$animateCss")}}function v(t){t.stopPropagation();var i=t.originalEvent||t;t=i.$manualTimeStamp||i.timeStamp||Date.now();i=parseFloat(i.elapsedTime.toFixed(3));Math.max(t-n,0)>=ki&&i>=dt&&(nr=!0,ti())}if(!li)if(d.parentNode){var n,r=[],e=function(n){if(nr)ui&&n&&(ui=!1,ti());else if(ui=!n,rt.animationDuration)if(n=tt(d,ui),ui)vt.push(n);else{var t=vt,i=t.indexOf(n);0<=n&&t.splice(i,1)}},h=0<di&&(rt.transitionDuration&&0===ii.transitionDuration||rt.animationDuration&&0===ii.animationDuration)&&Math.max(ii.animationDelay,ii.transitionDelay);h?k(u,Math.floor(h*di*1e3),!1):u();bi.resume=function(){e(!0)};bi.pause=function(){e(!1)}}else ti()}var wi={},d=r(t),ci,ii,di,rt,ri,l,oi;if(!d||!d.parentNode||!ut.enabled())return pi();s=w(s);var vt=[],gi=t.attr("class"),ft=ni(s),li,ui,nr,si,bi,ai,ki,dt,tr;if(0===s.duration||!nt.animations&&!nt.transitions)return pi();var hi=s.event&&h(s.event)?s.event.join(" "):s.event,ir="",fi="";hi&&s.structural?ir=e(hi,"ng-",!0):hi&&(ir=hi);s.addClass&&(fi+=e(s.addClass,"-add"));s.removeClass&&(fi.length&&(fi+=" "),fi+=e(s.removeClass,"-remove"));s.applyClassesEarly&&fi.length&&ht(t,s);var ei=[ir,fi].join(" ").trim(),vi=gi+" "+ei,fr=e(ei,"-active"),gi=ft.to&&0<Object.keys(ft.to).length;return(0<(s.keyframeStyle||"").length||gi||ei)?(0<s.stagger?(ft=parseFloat(s.stagger),ii={transitionDelay:ft,animationDelay:ft,transitionDuration:0,animationDuration:0}):(ci=ct(d,vi),ii=kt(d,ei,ci,gt)),s.$$skipPreparationClasses||c.addClass(t,ei),s.transitionStyle&&(ft=[f,s.transitionStyle],y(d,ft),vt.push(ft)),0<=s.duration&&(ft=0<d.style[f].length,ft=yt(s.duration,ft),y(d,ft),vt.push(ft)),s.keyframeStyle&&(ft=[o,s.keyframeStyle],y(d,ft),vt.push(ft)),di=ii?0<=s.staggerIndex?s.staggerIndex:n.count(ci):0,(hi=0===di)&&!s.skipBlocking&&b(d,9999),rt=bt(d,vi,ci),ri=rt.maxDelay,ai=Math.max(ri,0),dt=rt.maxDuration,l={},l.hasTransitions=0<rt.transitionDuration,l.hasAnimations=0<rt.animationDuration,l.hasTransitionAll=l.hasTransitions&&"all"==rt.transitionProperty,l.applyTransitionDuration=gi&&(l.hasTransitions&&!l.hasTransitionAll||l.hasAnimations&&!l.hasTransitions),l.applyAnimationDuration=s.duration&&l.hasAnimations,l.applyTransitionDelay=it(s.delay)&&(l.applyTransitionDuration||l.hasTransitions),l.applyAnimationDelay=it(s.delay)&&l.hasAnimations,l.recalculateTimingStyles=0<fi.length,(l.applyTransitionDuration||l.applyAnimationDuration)&&(dt=s.duration?parseFloat(s.duration):dt,l.applyTransitionDuration&&(l.hasTransitions=!0,rt.transitionDuration=dt,ft=0<d.style[f+"Property"].length,vt.push(yt(dt,ft))),l.applyAnimationDuration&&(l.hasAnimations=!0,rt.animationDuration=dt,vt.push([st,dt+"s"]))),0===dt&&!l.recalculateTimingStyles)?pi():(null!=s.delay&&(oi=parseFloat(s.delay),l.applyTransitionDelay&&vt.push([p,oi+"s"]),l.applyAnimationDelay&&vt.push([g,oi+"s"])),null==s.duration&&0<rt.transitionDuration&&(l.recalculateTimingStyles=l.recalculateTimingStyles||hi),ki=1e3*ai,tr=1e3*dt,s.skipBlocking||(l.blockTransition=0<rt.transitionDuration,l.blockKeyframeAnimation=0<rt.animationDuration&&0<ii.animationDelay&&0===ii.animationDuration),s.from&&(s.cleanupStyles&&wt(wi,d,Object.keys(s.from)),lt(t,s)),l.blockTransition||l.blockKeyframeAnimation?ur(dt):s.skipBlocking||b(d,!1),{$$willAnimate:!0,end:yi,start:function(){if(!li)return bi={end:yi,cancel:rr,resume:null,pause:null},si=new v(bi),pt(er),si}}):pi()}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(n){n.drivers.push("$$animateCssDriver");this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(n,t,f,e,o,h,a){function p(n){return n.replace(/\bng-\S+\b/g,"")}function w(n,t){return c(n)&&(n=n.split(" ")),c(t)&&(t=t.split(" ")),n.filter(function(n){return-1===t.indexOf(n)}).join(" ")}function d(t,u,e){function l(n){var t={},u=r(n).getBoundingClientRect();return i(["width","height","top","left"],function(n){var i=u[n];switch(n){case"top":i+=v.scrollTop;break;case"left":i+=v.scrollLeft}t[n]=Math.floor(i)+"px"}),t}function a(){var t=p(e.attr("class")||""),i=w(t,y),t=w(y,t),i=n(o,{to:l(e),addClass:"ng-anchor-in "+i,removeClass:"ng-anchor-out "+t,delay:!0});return i.$$willAnimate?i:null}function c(){o.remove();u.removeClass("ng-animate-shim");e.removeClass("ng-animate-shim")}var o=s(r(u).cloneNode(!0)),y=p(o.attr("class")||""),h,k;return(u.addClass("ng-animate-shim"),e.addClass("ng-animate-shim"),o.addClass("ng-anchor"),b.append(o),t=function(){var t=n(o,{addClass:"ng-anchor-out",delay:!0,from:l(u)});return t.$$willAnimate?t:null}(),!t&&(h=a(),!h))?c():(k=t||h,{start:function(){function i(){n&&n.end()}var t,n=k.start();return n.done(function(){if(n=null,!h&&(h=a()))return n=h.start(),n.done(function(){n=null;c();t.complete()}),n;c();t.complete()}),t=new f({end:i,cancel:i})}})}function g(n,t,r,e){var o=y(n,u),s=y(t,u),h=[];return i(e,function(n){(n=d(r,n.out,n["in"]))&&h.push(n)}),o||s||0!==h.length?{start:function(){function r(){i(n,function(n){n.end()})}var n=[],t;return o&&n.push(o.start()),s&&n.push(s.start()),i(h,function(t){n.push(t.start())}),t=new f({end:r,cancel:r}),f.all(n,function(n){t.complete(n)}),t}}:void 0}function y(t){var r=t.element,i=t.options||{};return t.structural&&(i.event=t.event,i.structural=!0,i.applyClassesEarly=!0,"leave"===t.event&&(i.onDone=i.domOperation)),i.preparationClasses&&(i.event=k(i.event,i.preparationClasses)),t=n(r,i),t.$$willAnimate?t:null}var v,b;return!o.animations&&!o.transitions?u:(v=a[0].body,t=r(e),b=s(t.parentNode&&11===t.parentNode.nodeType||v.contains(t)?t:v),l(h),function(n){return n.from&&n.to?g(n.from,n.to,n.classes,n.anchors):y(n)})}]}]).provider("$$animateJs",["$animateProvider",function(n){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,r,f){function e(i){var r,f;i=h(i)?i:i.split(" ");for(var e=[],o={},u=0;u<i.length;u++)r=i[u],f=n.$$registeredAnimations[r],f&&!o[r]&&(e.push(t.get(f)),o[r]=!0);return e}var o=l(f);return function(n,t,f,s){function v(){s.domOperation();o(n,s)}function nt(n,t,i,f,e){switch(i){case"animate":t=[t,f.from,f.to,e];break;case"setClass":t=[t,d,g,e];break;case"addClass":t=[t,d,e];break;case"removeClass":t=[t,g,e];break;default:t=[t,e]}if(t.push(f),n=n.apply(n,t))if(kt(n.start)&&(n=n.start()),n instanceof r)n.done(e);else if(kt(n))return n;return u}function h(n,t,f,e,o){var s=[];return i(e,function(i){var e=i[o];e&&s.push(function(){var i,s,h=!1,o=function(n){h||(h=!0,(s||u)(n),i.complete(!n))};return i=new r({end:function(){o()},cancel:function(){o(!0)}}),s=nt(e,n,t,f,function(n){o(!1===n)}),i})}),s}function k(n,t,u,f,e){var o=h(n,t,u,f,e),s,c;return 0===o.length&&("beforeSetClass"===e?(s=h(n,"removeClass",u,f,"beforeRemoveClass"),c=h(n,"addClass",u,f,"beforeAddClass")):"setClass"===e&&(s=h(n,"removeClass",u,f,"removeClass"),c=h(n,"addClass",u,f,"addClass")),s&&(o=o.concat(s)),c&&(o=o.concat(c))),0!==o.length?function(n){var t=[];return o.length&&i(o,function(n){t.push(n())}),t.length?r.all(t,n):n(),function(n){i(t,function(t){n?t.cancel():t.end()})}}:void 0}var p,b;3===arguments.length&&rt(f)&&(s=f,f=null);s=w(s);f||(f=n.attr("class")||"",s.addClass&&(f+=" "+s.addClass),s.removeClass&&(f+=" "+s.removeClass));var d=s.addClass,g=s.removeClass,y=e(f),c,l;return y.length&&("leave"==t?(b="leave",p="afterLeave"):(b="before"+t.charAt(0).toUpperCase()+t.substr(1),p=t),"enter"!==t&&"move"!==t&&(c=k(n,t,s,y,b)),l=k(n,t,s,y,p)),c||l?{start:function(){function e(t){f=!0;v();a(n,s);o.complete(t)}var i,t=[],f,o;return c&&t.push(function(n){i=c(n)}),t.length?t.push(function(n){v();n(!0)}):v(),l&&t.push(function(n){i=l(n)}),f=!1,o=new r({end:function(){f||((i||u)(void 0),e(void 0))},cancel:function(){f||((i||u)(!0),e(!0))}}),r.chain(t,e),o}}:void 0}}]}]).provider("$$animateJsDriver",["$$animationProvider",function(n){n.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(n,t){function r(t){return n(t.element,t.event,t.classes,t.options)}return function(n){if(n.from&&n.to){var u=r(n.from),f=r(n.to);if(u||f)return{start:function(){function r(){return function(){i(n,function(n){n.end()})}}var n=[],e;return u&&n.push(u.start()),f&&n.push(f.start()),t.all(n,function(n){e.complete(n)}),e=new t({end:r(),cancel:r()})}}}else return r(n)}}]}])}(window,window.angular);
!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(n){return function(t,i){if("__setXHR_"===t){var r=i(this);r instanceof Function&&r(this)}else n.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="7.2.2";ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(n,t,i){function r(r){r.method=r.method||"POST";r.headers=r.headers||{};var f=t.defer(),u=f.promise;return r.headers.__setXHR_=function(){return function(n){n&&(r.__XHR=n,r.xhrFn&&r.xhrFn(n),n.upload.addEventListener("progress",function(n){n.config=r;f.notify?f.notify(n):u.progressFunc&&i(function(){u.progressFunc(n)})},!1),n.upload.addEventListener("load",function(n){n.lengthComputable&&(n.config=r,f.notify?f.notify(n):u.progressFunc&&i(function(){u.progressFunc(n)}))},!1))}},n(r).then(function(n){f.resolve(n)},function(n){f.reject(n)},function(n){f.notify(n)}),u.success=function(n){return u.then(function(t){n(t.data,t.status,t.headers,r)}),u},u.error=function(n){return u.then(null,function(t){n(t.data,t.status,t.headers,r)}),u},u.progress=function(n){return u.progressFunc=n,u.then(null,null,function(t){n(t)}),u},u.abort=function(){return r.__XHR&&i(function(){r.__XHR.abort()}),u},u.xhr=function(n){return r.xhrFn=function(t){return function(){t&&t.apply(u,arguments);n.apply(u,arguments)}}(r.xhrFn),u},u}this.upload=function(n){function i(t,r,u){if(void 0!==r)if(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r))t.append(u,r);else if("form"===n.sendFieldsAs)if(angular.isObject(r))for(var f in r)r.hasOwnProperty(f)&&i(t,r[f],u+"["+f+"]");else t.append(u,r);else r=angular.isString(r)?r:angular.toJson(r),"json-blob"===n.sendFieldsAs?t.append(u,new Blob([r],{type:"application/json"})):t.append(u,r)}function u(n){return n instanceof Blob||n.flashId&&n.name&&n.size}function t(n,i,r){var f,e;if(u(i))n.append(r,i,i.fileName||i.name);else{if(!angular.isObject(i))throw"Expected file object in Upload.upload file option: "+i.toString();for(f in i)i.hasOwnProperty(f)&&(e=f.split(","),e[1]&&(i[f].fileName=e[1].replace(/^\s+|\s+$/g,"")),t(n,i[f],e[0]))}}return n.headers=n.headers||{},n.headers["Content-Type"]=void 0,n.transformRequest=n.transformRequest?angular.isArray(n.transformRequest)?n.transformRequest:[n.transformRequest]:[],n.transformRequest.push(function(r){var u,f=new FormData,e={},s,o;for(u in n.fields)n.fields.hasOwnProperty(u)&&(e[u]=n.fields[u]);r&&(e.data=r);for(u in e)e.hasOwnProperty(u)&&(s=e[u],n.formDataAppender?n.formDataAppender(f,u,s):i(f,s,u));if(null!=n.file)if(angular.isArray(n.file))for(o=0;o<n.file.length;o++)t(f,n.file[o],"file");else t(f,n.file,"file");return f}),r(n)};this.http=function(t){return t.transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof Blob?t:n.defaults.transformRequest[0].apply(this,arguments)},r(t)};this.setDefaults=function(n){this.defaults=n||{}};this.defaults={};this.version=ngFileUpload.version}]);ngFileUpload.service("Upload",["$parse","$timeout","$compile","UploadResize",function(n,t,i,r){var u=r;return u.getAttrWithDefaults=function(n,t){return null!=n[t]?n[t]:null==u.defaults[t]?u.defaults[t]:u.defaults[t].toString()},u.attrGetter=function(t,i,r,u){if(!r)return this.getAttrWithDefaults(i,t);try{return u?n(this.getAttrWithDefaults(i,t))(r,u):n(this.getAttrWithDefaults(i,t))(r)}catch(f){if(t.search(/min|max|pattern/i))return this.getAttrWithDefaults(i,t);throw f;}},u.updateModel=function(i,r,f,e,o,s,h){function p(){var c=o&&o.length?o[0]:null,l,h;i&&(l=!u.attrGetter("ngfMultiple",r,f)&&!u.attrGetter("multiple",r)&&!w,n(u.attrGetter("ngModel",r)).assign(f,l?c:o));h=u.attrGetter("ngfModel",r);h&&n(h).assign(f,o);e&&n(e)(f,{$files:o,$file:c,$event:s});t(function(){})}function b(n,t){var e=u.attrGetter("ngfResize",r,f),i;if(!e)return t();for(var h=n.length,s=function(){h--;0===h&&t()},c=function(t){return function(i){n.splice(t,1,i);s()}},l=function(n){return function(t){s();n.$error="resize";n.$errorParam=(t?(t.message?t.message:t)+": ":"")+(n&&n.name)}},o=0;o<n.length;o++)i=n[o],i.$error||0!==i.type.indexOf("image")?s():u.resize(i,e.width,e.height,e.quality).then(c(o),l(i))}var w=u.attrGetter("ngfKeep",r,f),c,v,y,l,a;if(w===!0){if(!o||!o.length)return;if(c=(i&&i.$modelValue||r.$$ngfPrevFiles||[]).slice(0),v=!1,u.attrGetter("ngfKeepDistinct",r,f)===!0){for(y=c.length,l=0;l<o.length;l++){for(a=0;y>a&&o[l].name!==c[a].name;a++);a===y&&(c.push(o[l]),v=!0)}if(!v)return;o=c}else o=c.concat(o)}r.$$ngfPrevFiles=o;h?p():u.validate(o,i,r,f,u.attrGetter("ngfValidateLater",r),function(){b(o,function(){t(function(){p()})})})},u}]);ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(n,t,i,r){function f(n){var t=n.match(/Android[^\d]*(\d+)\.(\d+)/),i;return t&&t.length>2?(i=r.defaults.androidFixMinorVersion||4,parseInt(t[1])<4||parseInt(t[1])===i&&parseInt(t[2])<i):-1===n.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(n)}function e(n,t,i,r,e,o,s,h){function a(){return"input"===t[0].tagName.toLowerCase()&&i.type&&"file"===i.type.toLowerCase()}function w(){return l("ngfChange")||l("ngfSelect")}function y(t){for(var e=t.__files_||t.target&&t.target.files,u=[],f=0;f<e.length;f++)u.push(e[f]);h.updateModel(r,i,n,w(),u.length?u:null,t)}function d(n){var r,i;if(t!==n)for(r=0;r<t[0].attributes.length;r++)i=t[0].attributes[r],"type"!==i.name&&"class"!==i.name&&"id"!==i.name&&"style"!==i.name&&((null==i.value||""===i.value)&&("required"===i.name&&(i.value="required"),"multiple"===i.name&&(i.value="multiple")),n.attr(i.name,i.value))}function g(){if(a())return t;var n=angular.element('<input type="file">');return d(n),n.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),u.push({el:t,ref:n}),document.body.appendChild(n[0]),n}function nt(i){if(t.attr("disabled")||l("ngfSelectDisabled",n))return!1;var r=tt(i);return null!=r?r:(b(i),f(navigator.userAgent)?setTimeout(function(){c[0].click()},0):c[0].click(),!1)}function tt(n){var t=n.changedTouches||n.originalEvent&&n.originalEvent.changedTouches,i;return"touchstart"===n.type?(p=t?t[0].clientY:0,!0):(n.stopPropagation(),n.preventDefault(),"touchend"===n.type)&&(i=t?t[0].clientY:0,Math.abs(i-p)>20)?!1:void 0}function b(t){c.val()&&(c.val(null),h.updateModel(r,i,n,w(),null,t,!0))}function k(n){if(c&&!c.attr("__ngf_ie10_Fix_")){if(!c[0].parentNode)return void(c=null);n.preventDefault();n.stopPropagation();c.unbind("click");var t=c.clone();return c.replaceWith(t),c=t,c.attr("__ngf_ie10_Fix_","true"),c.bind("change",y),c.bind("click",k),c[0].click(),!1}c.removeAttr("__ngf_ie10_Fix_")}var l=function(n,t){return h.attrGetter(n,i,t)},v=[],p,c;v.push(n.$watch(l("ngfMultiple"),function(){c.attr("multiple",l("ngfMultiple",n))}));v.push(n.$watch(l("ngfCapture"),function(){c.attr("capture",l("ngfCapture",n))}));i.$observe("accept",function(){c.attr("accept",l("accept"))});v.push(function(){i.$$observers&&delete i.$$observers.accept});p=0;c=t;a()||(c=g());c.bind("change",y);a()?t.bind("click",b):t.bind("click touchstart touchend",nt);h.registerValidators(r,c,i,n);-1!==navigator.appVersion.indexOf("MSIE 10")&&c.bind("click",k);n.$on("$destroy",function(){a()||c.remove();angular.forEach(v,function(n){n()})});o(function(){for(var t,n=0;n<u.length;n++)t=u[n],document.body.contains(t.el[0])||(u.splice(n,1),t.ref.remove())});window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,c,y)}var u=[];return{restrict:"AEC",require:"?ngModel",link:function(u,f,o,s){e(u,f,o,s,n,t,i,r)}}}]),function(){function n(n){return"img"===n.tagName.toLowerCase()?"image":"audio"===n.tagName.toLowerCase()?"audio":"video"===n.tagName.toLowerCase()?"video":/\./}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(n,t,i){var r=n;return r.dataUrl=function(n,r){var e,f,u;return r&&null!=n.dataUrl||!r&&null!=n.blobUrl?(e=i.defer(),t(function(){e.resolve(r?n.dataUrl:n.blobUrl)}),e.promise):(f=r?n.$ngfDataUrlPromise:n.$ngfBlobUrlPromise,f)?f:(u=i.defer(),t(function(){var i,f,e;if(window.FileReader&&n&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||n.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||n.size<4e6))if(i=window.URL||window.webkitURL,i&&i.createObjectURL&&!r){try{f=i.createObjectURL(n)}catch(o){return void t(function(){n.blobUrl="";u.reject()})}t(function(){n.blobUrl=f;f&&u.resolve(f)})}else e=new FileReader,e.onload=function(i){t(function(){n.dataUrl=i.target.result;u.resolve(i.target.result)})},e.onerror=function(){t(function(){n.dataUrl="";u.reject()})},e.readAsDataURL(n);else t(function(){n[r?"dataUrl":"blobUrl"]="";u.reject()})}),f=r?n.$ngfDataUrlPromise=u.promise:n.$ngfBlobUrlPromise=u.promise,f["finally"](function(){delete n[r?"$ngfDataUrlPromise":"$ngfBlobUrlPromise"]}),f)},r}]);var t=angular.element("<style>.ngf-hide{display:none !important}<\/style>");document.getElementsByTagName("head")[0].appendChild(t[0]);ngFileUpload.directive("ngfSrc",["$compile","$timeout","Upload",function(t,i,r){return{restrict:"AE",link:function(t,u,f){i(function(){var e=t.$watch(f.ngfSrc,function(e){if(angular.isString(e))return u.removeClass("ngf-hide"),u.attr("src",e);if(e&&e.type&&0===e.type.indexOf(n(u[0]))){var o=r.attrGetter("ngfNoObjectUrl",f,t);r.dataUrl(e,o)["finally"](function(){i(function(){e.blobUrl||e.dataUrl?(u.removeClass("ngf-hide"),u.attr("src",(o?e.dataUrl:e.blobUrl)||e.dataUrl)):u.addClass("ngf-hide")})})}else u.addClass("ngf-hide")});t.$on("$destroy",function(){e()})})}}}]);ngFileUpload.directive("ngfBackground",["Upload","$compile","$timeout",function(n,t,i){return{restrict:"AE",link:function(t,r,u){i(function(){var f=t.$watch(u.ngfBackground,function(f){if(angular.isString(f))return r.css("background-image","url('"+f+"')");if(f&&f.type&&0===f.type.indexOf("image")){var e=n.attrGetter("ngfNoObjectUrl",u,t);n.dataUrl(f,e)["finally"](function(){i(function(){e&&f.dataUrl||!e&&f.blobUrl?r.css("background-image","url('"+(e?f.dataUrl:f.blobUrl)+"')"):r.css("background-image","")})})}else r.css("background-image","")});t.$on("$destroy",function(){f()})})}}}])}();ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(n,t,i){function f(n){var i,t,r;if(n.length>2&&"/"===n[0]&&"/"===n[n.length-1])return n.substring(1,n.length-1);if(i=n.split(","),t="",i.length>1)for(r=0;r<i.length;r++)t+="("+f(i[r])+")",r<i.length-1&&(t+="|");else 0===n.indexOf(".")&&(n="*"+n),t="^"+n.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,".");return t}function u(n){if(angular.isString(n)){if(n.search(/kb/i)===n.length-2)return parseFloat(1e3*n.substring(0,n.length-2));if(n.search(/mb/i)===n.length-2)return parseFloat(1e6*n.substring(0,n.length-2));if(n.search(/gb/i)===n.length-2)return parseFloat(1e9*n.substring(0,n.length-2));if(n.search(/b/i)===n.length-1||n.search(/s/i)===n.length-1)return parseFloat(n.substring(0,n.length-1));if(n.search(/m/i)===n.length-1)return parseFloat(60*n.substring(0,n.length-1));if(n.search(/h/i)===n.length-1)return parseFloat(3600*n.substring(0,n.length-1))}return n}var r=n;return r.registerValidators=function(n,t,i,u){function f(n){angular.forEach(n.$ngfValidations,function(t){n.$setValidity(t.name,t.valid)})}n&&(n.$ngfValidations=[],n.$formatters.push(function(e){return r.attrGetter("ngfValidateLater",i,u)||!n.$$ngfValidated?(r.validate(e,n,i,u,!1,function(){f(n);n.$$ngfValidated=!1}),e&&0===e.length&&(e=null),!t||null!=e&&0!==e.length||t.val()&&t.val(null)):(f(n),n.$$ngfValidated=!1),e}))},r.validatePattern=function(n,t){if(!t)return!0;var i=new RegExp(f(t),"gi");return null!=n.type&&i.test(n.type.toLowerCase())||null!=n.name&&i.test(n.name.toLowerCase())},r.validate=function(n,t,i,f,e,o){function l(i,r,u){var o,e;if(n){for(var c="ngf"+i[0].toUpperCase()+i.substr(1),s=n.length,f=null;s--;)o=n[s],e=h(c,{$file:o}),null==e&&(e=r(h("ngfValidate")||{}),f=null==f?!0:f),null!=e&&(u(o,e)||(o.$error=i,o.$errorParam=e,n.splice(s,1),f=!1));null!==f&&t.$ngfValidations.push({name:i,valid:f})}}function s(i,r,u,f,e){if(n){var s=0,l=!1,a="ngf"+i[0].toUpperCase()+i.substr(1);n=void 0===n.length?[n]:n;angular.forEach(n,function(n){if(0!==n.type.search(u))return!0;var v=h(a,{$file:n})||r(h("ngfValidate",{$file:n})||{});v&&(c++,s++,f(n,v).then(function(t){e(t,v)||(n.$error=i,n.$errorParam=v,l=!0)},function(){h("ngfValidateForce",{$file:n})&&(n.$error=i,n.$errorParam=v,l=!0)})["finally"](function(){c--;s--;s||t.$ngfValidations.push({name:i,valid:!l});c||o.call(t,t.$ngfValidations)}))})}}var h,c;if((t=t||{},t.$ngfValidations=t.$ngfValidations||[],angular.forEach(t.$ngfValidations,function(n){n.valid=!0}),h=function(n,t){return r.attrGetter(n,i,f,t)},e)||(t.$$ngfValidated=!0,null==n||0===n.length))return void o.call(t);if(n=void 0===n.length?[n]:n.slice(0),l("pattern",function(n){return n.pattern},r.validatePattern),l("minSize",function(n){return n.size&&n.size.min},function(n,t){return n.size>=u(t)}),l("maxSize",function(n){return n.size&&n.size.max},function(n,t){return n.size<=u(t)}),l("validateFn",function(){return null},function(n,t){return t===!0||null===t||""===t}),!n.length)return void o.call(t,t.$ngfValidations);c=0;s("maxHeight",function(n){return n.height&&n.height.max},/image/,this.imageDimensions,function(n,t){return n.height<=t});s("minHeight",function(n){return n.height&&n.height.min},/image/,this.imageDimensions,function(n,t){return n.height>=t});s("maxWidth",function(n){return n.width&&n.width.max},/image/,this.imageDimensions,function(n,t){return n.width<=t});s("minWidth",function(n){return n.width&&n.width.min},/image/,this.imageDimensions,function(n,t){return n.width>=t});s("ratio",function(n){return n.ratio},/image/,this.imageDimensions,function(n,t){for(var i,r,f=t.toString().split(","),e=!1,u=0;u<f.length;u++)i=f[u],r=i.search(/x/i),i=r>-1?parseFloat(i.substring(0,r))/parseFloat(i.substring(r+1)):parseFloat(i),Math.abs(n.width/n.height-i)<.0001&&(e=!0);return e});s("maxDuration",function(n){return n.duration&&n.duration.max},/audio|video/,this.mediaDuration,function(n,t){return n<=u(t)});s("minDuration",function(n){return n.duration&&n.duration.min},/audio|video/,this.mediaDuration,function(n,t){return n>=u(t)});s("validateAsyncFn",function(){return null},/./,function(n,t){return t},function(n){return n===!0||null===n||""===n});c||o.call(t,t.$ngfValidations)},r.imageDimensions=function(n){var f,u;return n.width&&n.height?(f=t.defer(),i(function(){f.resolve({width:n.width,height:n.height})}),f.promise):n.$ngfDimensionPromise?n.$ngfDimensionPromise:(u=t.defer(),i(function(){return 0!==n.type.indexOf("image")?void u.reject("not image"):void r.dataUrl(n).then(function(t){function f(){var t=r[0].clientWidth,i=r[0].clientHeight;r.remove();n.width=t;n.height=i;u.resolve({width:t,height:i})}function e(){r.remove();u.reject("load error")}function o(){i(function(){r[0].parentNode&&(r[0].clientWidth?f():s>10?e():o())},1e3)}var r=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed"),s;r.on("load",f);r.on("error",e);s=0;o();angular.element(document.getElementsByTagName("body")[0]).append(r)},function(){u.reject("load error")})}),n.$ngfDimensionPromise=u.promise,n.$ngfDimensionPromise["finally"](function(){delete n.$ngfDimensionPromise}),n.$ngfDimensionPromise)},r.mediaDuration=function(n){var f,u;return n.duration?(f=t.defer(),i(function(){f.resolve(n.duration)}),f.promise):n.$ngfDurationPromise?n.$ngfDurationPromise:(u=t.defer(),i(function(){return 0!==n.type.indexOf("audio")&&0!==n.type.indexOf("video")?void u.reject("not media"):void r.dataUrl(n).then(function(t){function f(){var t=r[0].duration;n.duration=t;r.remove();u.resolve(t)}function e(){r.remove();u.reject("load error")}function o(){i(function(){r[0].parentNode&&(r[0].duration?f():s>10?e():o())},1e3)}var r=angular.element(0===n.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed"),s;r.on("loadedmetadata",f);r.on("error",e);s=0;o();angular.element(document.body).append(r)},function(){u.reject("load error")})}),n.$ngfDurationPromise=u.promise,n.$ngfDurationPromise["finally"](function(){delete n.$ngfDurationPromise}),n.$ngfDurationPromise)},r}]);ngFileUpload.service("UploadResize",["UploadValidate","$q","$timeout",function(n,t,i){var r=n,u=function(n,t,i,r){var u=Math.min(i/n,r/t);return{width:n*u,height:t*u}},f=function(n,i,r,f,e){var s=t.defer(),h=document.createElement("canvas"),o=document.createElement("img");return o.onload=function(){var n,t;try{n=u(o.width,o.height,i,r);h.width=n.width;h.height=n.height;t=h.getContext("2d");t.drawImage(o,0,0,n.width,n.height);s.resolve(h.toDataURL(e||"image/WebP",f||1))}catch(c){s.reject(c)}},o.onerror=function(){s.reject()},o.src=n,s.promise},e=function(n){for(var i=n.split(","),f=i[0].match(/:(.*?);/)[1],r=atob(i[1]),t=r.length,u=new Uint8Array(t);t--;)u[t]=r.charCodeAt(t);return new Blob([u],{type:f})};return r.resize=function(n,u,o,s){var h=t.defer();return 0!==n.type.indexOf("image")?(i(function(){h.resolve("Only images are allowed for resizing!")}),h.promise):(r.dataUrl(n,!0).then(function(t){f(t,u,o,s,n.type).then(function(t){var i=e(t);i.name=n.name;h.resolve(i)},function(){h.reject()})},function(){h.reject()}),h.promise)},r}]),function(){function t(t,i,r,u,f,e,o,s){function l(){return i.attr("disabled")||h("ngfDropDisabled",t)}function w(n,t,i,r){var u=h("ngfDragOverClass",n,{$event:i}),o=h("ngfDragOverClass")||"dragover",f,c,e;if(angular.isString(u))return void r(u);if(u&&(u.delay&&(p=u.delay),u.accept||u.reject)&&(f=i.dataTransfer.items,null!=f))for(c=h("ngfPattern",n,{$event:i}),e=0;e<f.length;e++)if("file"===f[e].kind||""===f[e].kind){if(!s.validatePattern(f[e],c)){o=u.reject;break}o=u.accept}r(o)}function b(n,t,i,r){function y(n,t,i){var f,e,r,u;null!=t&&(t.isDirectory?(f=(i||"")+t.name,n.push({name:t.name,type:"directory",path:f}),e=t.createReader(),r=[],s++,u=function(){e.readEntries(function(f){try{if(f.length)r=r.concat(Array.prototype.slice.call(f||[],0)),u();else{for(var e=0;e<r.length;e++)y(n,r[e],(i?i:"")+t.name+"/");s--}}catch(o){s--;console.error(o)}},function(){s--})},u()):(s++,t.file(function(t){try{s--;t.path=(i?i:"")+t.name;n.push(t)}catch(r){s--;console.error(r)}},function(){s--})))}var f=[],s=0,h=n.dataTransfer.items,u,c,v,l,a,p;if(h&&h.length>0&&"file"!==o.protocol())for(u=0;u<h.length;u++){if(h[u].webkitGetAsEntry&&h[u].webkitGetAsEntry()&&h[u].webkitGetAsEntry().isDirectory){if(c=h[u].webkitGetAsEntry(),c.isDirectory&&!i)continue;null!=c&&y(f,c)}else v=h[u].getAsFile(),null!=v&&f.push(v);if(!r&&f.length>0)break}else if(l=n.dataTransfer.files,null!=l)for(a=0;a<l.length&&(f.push(l.item(a)),r||!(f.length>0));a++);p=0;!function w(n){e(function(){if(s)10*p++<2e4&&w(10);else{if(!r&&f.length>1){for(u=0;"directory"===f[u].type;)u++;f=[f[u]]}t(f)}},n||0)}()}var a=n(),h=function(n,t,i){return s.attrGetter(n,r,t,i)};if(h("dropAvailable")&&e(function(){t[h("dropAvailable")]?t[h("dropAvailable")].value=a:t[h("dropAvailable")]=a}),!a)return void(h("ngfHideOnDropNotAvailable",t)===!0&&i.css("display","none"));s.registerValidators(u,null,r,t);var c,y=null,v=f(h("ngfStopPropagation")),p=1;i[0].addEventListener("dragover",function(n){if(!l()){if(n.preventDefault(),v(t)&&n.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var u=n.dataTransfer.effectAllowed;n.dataTransfer.dropEffect="move"===u||"linkMove"===u?"move":"copy"}e.cancel(y);c||(c="C",w(t,r,n,function(n){c=n;i.addClass(c)}))}},!1);i[0].addEventListener("dragenter",function(n){l()||(n.preventDefault(),v(t)&&n.stopPropagation())},!1);i[0].addEventListener("dragleave",function(){l()||(y=e(function(){i.removeClass(c);c=null},p||1))},!1);i[0].addEventListener("drop",function(n){l()||(n.preventDefault(),v(t)&&n.stopPropagation(),i.removeClass(c),c=null,b(n,function(i){s.updateModel(u,r,t,h("ngfChange")||h("ngfDrop"),i,n)},h("ngfAllowDir",t)!==!1,h("multiple")||h("ngfMultiple",t)))},!1);i[0].addEventListener("paste",function(n){var e,i,f;if(!l()&&(e=[],i=n.clipboardData||n.originalEvent.clipboardData,i&&i.items)){for(f=0;f<i.items.length;f++)-1!==i.items[f].type.indexOf("image")&&e.push(i.items[f].getAsFile());s.updateModel(u,r,t,h("ngfChange")||h("ngfDrop"),e,n)}},!1)}function n(){var n=document.createElement("div");return"draggable"in n&&"ondrop"in n&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload",function(n,i,r,u){return{restrict:"AEC",require:"?ngModel",link:function(f,e,o,s){t(f,e,o,s,n,i,r,u)}}}]);ngFileUpload.directive("ngfNoFileDrop",function(){return function(t,i){n()&&i.css("display","none")}});ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(t,i,r){return function(u,f,e){if(n()){var o=t(r.attrGetter("ngfDropAvailable",e));i(function(){o(u);o.assign&&o.assign(u,!0)})}}}])}();
!function(){function t(n,t){window.XMLHttpRequest.prototype[n]=t(window.XMLHttpRequest.prototype[n])}function n(n,t,i){try{Object.defineProperty(n,t,{get:i})}catch(r){}}if(window.FileAPI||(window.FileAPI={}),FileAPI.shouldLoad=window.XMLHttpRequest&&!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var i=function(n){if(!n.__listeners){n.upload||(n.upload={});n.__listeners=[];var t=n.upload.addEventListener;n.upload.addEventListener=function(i,r){n.__listeners[i]=r;t&&t.apply(this,arguments)}}};t("open",function(n){return function(t,r,u){i(this);this.__url=r;try{n.apply(this,[t,r,u])}catch(f){f.message.indexOf("Access is denied")>-1&&(this.__origError=f,n.apply(this,[t,"_fix_for_ie_crossdomain__",u]))}}});t("getResponseHeader",function(n){return function(t){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(t):null==n?null:n.apply(this,[t])}});t("getAllResponseHeaders",function(n){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==n?null:n.apply(this)}});t("abort",function(n){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==n?null:n.apply(this)}});t("setRequestHeader",function(n){return function(t,r){if("__setXHR_"===t){i(this);var u=r(this);u instanceof Function&&u(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[t]=r,n.apply(this,arguments)}});t("send",function(t){return function(){var i=this,e,u,f,r;if(arguments[0]&&arguments[0].__isFileAPIShim){for(e=arguments[0],u={url:i.__url,jsonp:!1,cache:!0,complete:function(t,r){t&&angular.isString(t)&&-1!==t.indexOf("#2174")&&(t=null);i.__completed=!0;!t&&i.__listeners.load&&i.__listeners.load({type:"load",loaded:i.__loaded,total:i.__total,target:i,lengthComputable:!0});!t&&i.__listeners.loadend&&i.__listeners.loadend({type:"loadend",loaded:i.__loaded,total:i.__total,target:i,lengthComputable:!0});"abort"===t&&i.__listeners.abort&&i.__listeners.abort({type:"abort",loaded:i.__loaded,total:i.__total,target:i,lengthComputable:!0});void 0!==r.status&&n(i,"status",function(){return 0===r.status&&t&&"abort"!==t?500:r.status});void 0!==r.statusText&&n(i,"statusText",function(){return r.statusText});n(i,"readyState",function(){return 4});void 0!==r.response&&n(i,"response",function(){return r.response});var u=r.responseText||(t&&0===r.status&&"abort"!==t?t:void 0);n(i,"responseText",function(){return u});n(i,"response",function(){return u});t&&n(i,"err",function(){return t});i.__fileApiXHR=r;i.onreadystatechange&&i.onreadystatechange();i.onload&&i.onload()},progress:function(n){if(n.target=i,i.__listeners.progress&&i.__listeners.progress(n),i.__total=n.total,i.__loaded=n.loaded,n.total===n.loaded){var t=this;setTimeout(function(){i.__completed||(i.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:i.__requestHeaders},u.data={},u.files={},f=0;f<e.data.length;f++)r=e.data[f],null!=r.val&&null!=r.val.name&&null!=r.val.size&&null!=r.val.type?u.files[r.key]=r.val:u.data[r.key]=r.val;setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';i.__fileApiXHR=FileAPI.upload(u)},1)}else{if(this.__origError)throw this.__origError;t.apply(i,arguments)}}});window.XMLHttpRequest.__isFileAPIShim=!0;window.FormData=FormData=function(){return{append:function(n,t,i){t.__isFileAPIBlobShim&&(t=t.data[0]);this.data.push({key:n,val:t,name:i})},data:[],__isFileAPIShim:!0}};window.Blob=Blob=function(n){return{data:n,__isFileAPIBlobShim:!0}}}}(),function(){function h(n){return"input"===n[0].tagName.toLowerCase()&&n.attr("type")&&"file"===n.attr("type").toLowerCase()}function u(){try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(n)return!0}catch(t){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function f(n){var t=0,i=0;if(window.jQuery)return jQuery(n).offset();if(n.offsetParent)do t+=n.offsetLeft-n.scrollLeft,i+=n.offsetTop-n.scrollTop,n=n.offsetParent;while(n);return{left:t,top:i}}if(FileAPI.shouldLoad){if(FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var e,n,t,i,r,o=document.createElement("script"),s=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)e=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)n=window.FileAPI.jsPath;else for(t=0;t<s.length;t++)if(r=s[t].src,i=r.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),i>-1){n=r.substring(0,i+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=n);o.setAttribute("src",e||n+"FileAPI.min.js");document.getElementsByTagName("head")[0].appendChild(o);FileAPI.hasFlash=u()}FileAPI.ngfFixIE=function(n,t,i){var r,e;if(!u())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';r=function(){n.attr("disabled")?t&&t.removeClass("js-fileapi-wrapper"):(t.attr("__ngf_flash_")||(t.unbind("change"),t.unbind("click"),t.bind("change",function(n){e.apply(this,[n]);i.apply(this,[n])}),t.attr("__ngf_flash_","true")),t.addClass("js-fileapi-wrapper"),h(n)||t.css("position","absolute").css("top",f(n[0]).top+"px").css("left",f(n[0]).left+"px").css("width",n[0].offsetWidth+"px").css("height",n[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",n.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"))};n.bind("mouseenter",r);e=function(n){for(var t=FileAPI.getFiles(n),i=0;i<t.length;i++)void 0===t[i].size&&(t[i].size=0),void 0===t[i].name&&(t[i].name="file"),void 0===t[i].type&&(t[i].type="undefined");n.target||(n.target={});n.target.files=t;n.target.files!==t&&(n.__files_=t);(n.__files_||n.target.files).item=function(t){return(n.__files_||n.target.files)[t]||null}}};FileAPI.disableFileInput=function(n,t){t?n.removeClass("js-fileapi-wrapper"):n.addClass("js-fileapi-wrapper")}}}();window.FileReader||(window.FileReader=function(){var n=this,r=!1,t,i;this.listeners={};this.addEventListener=function(t,i){n.listeners[t]=n.listeners[t]||[];n.listeners[t].push(i)};this.removeEventListener=function(t,i){n.listeners[t]&&n.listeners[t].splice(n.listeners[t].indexOf(i),1)};this.dispatchEvent=function(t){var r=n.listeners[t.type],i;if(r)for(i=0;i<r.length;i++)r[i].call(n,t)};this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;t=function(t,i){var r={type:t,target:n,loaded:i.loaded,total:i.total,error:i.error};return null!=i.result&&(r.target.result=i.result),r};i=function(i){r||(r=!0,n.onloadstart&&n.onloadstart(t("loadstart",i)));var u;"load"===i.type?(n.onloadend&&n.onloadend(t("loadend",i)),u=t("load",i),n.onload&&n.onload(u),n.dispatchEvent(u)):"progress"===i.type?(u=t("progress",i),n.onprogress&&n.onprogress(u),n.dispatchEvent(u)):(u=t("error",i),n.onerror&&n.onerror(u),n.dispatchEvent(u))};this.readAsArrayBuffer=function(n){FileAPI.readAsBinaryString(n,i)};this.readAsBinaryString=function(n){FileAPI.readAsBinaryString(n,i)};this.readAsDataURL=function(n){FileAPI.readAsDataURL(n,i)};this.readAsText=function(n){FileAPI.readAsText(n,i)}});
(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.moment=t()})(this,function(){"use strict";function i(){return ru.apply(null,arguments)}function eo(n){ru=n}function ui(n){return Object.prototype.toString.call(n)==="[object Array]"}function fi(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function oo(n,t){for(var r=[],i=0;i<n.length;++i)r.push(t(n[i],i));return r}function ft(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function ei(n,t){for(var i in t)ft(t,i)&&(n[i]=t[i]);return ft(t,"toString")&&(n.toString=t.toString),ft(t,"valueOf")&&(n.valueOf=t.valueOf),n}function kt(n,t,i,r){return sf(n,t,i,r,!0).utc()}function so(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(n){return n._pf==null&&(n._pf=so()),n._pf}function uu(n){if(n._isValid==null){var t=e(n);n._isValid=!isNaN(n._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated;n._strict&&(n._isValid=n._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined)}return n._isValid}function fu(n){var t=kt(NaN);return n!=null?ei(e(t),n):e(t).userInvalidated=!0,t}function gi(n,t){var u,i,r;if(typeof t._isAMomentObject!="undefined"&&(n._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(n._i=t._i),typeof t._f!="undefined"&&(n._f=t._f),typeof t._l!="undefined"&&(n._l=t._l),typeof t._strict!="undefined"&&(n._strict=t._strict),typeof t._tzm!="undefined"&&(n._tzm=t._tzm),typeof t._isUTC!="undefined"&&(n._isUTC=t._isUTC),typeof t._offset!="undefined"&&(n._offset=t._offset),typeof t._pf!="undefined"&&(n._pf=e(t)),typeof t._locale!="undefined"&&(n._locale=t._locale),di.length>0)for(u in di)i=di[u],r=t[i],typeof r!="undefined"&&(n[i]=r);return n}function dt(n){gi(this,n);this._d=new Date(n._d!=null?n._d.getTime():NaN);nr===!1&&(nr=!0,i.updateOffset(this),nr=!1)}function tt(n){return n instanceof dt||n!=null&&n._isAMomentObject!=null}function v(n){return n<0?Math.ceil(n):Math.floor(n)}function s(n){var t=+n,i=0;return t!==0&&isFinite(t)&&(i=v(t)),i}function eu(n,t,i){for(var f=Math.min(n.length,t.length),e=Math.abs(n.length-t.length),u=0,r=0;r<f;r++)(i&&n[r]!==t[r]||!i&&s(n[r])!==s(t[r]))&&u++;return u+e}function ou(){}function su(n){return n?n.toLowerCase().replace("_","-"):n}function ho(n){for(var r=0,i,t,f,u;r<n.length;){for(u=su(n[r]).split("-"),i=u.length,t=su(n[r+1]),t=t?t.split("-"):null;i>0;){if(f=hu(u.slice(0,i).join("-")),f)return f;if(t&&t.length>=i&&eu(u,t,!0)>=i-1)break;i--}r++}return null}function hu(n){var t=null;if(!et[n]&&typeof module!="undefined"&&module&&module.exports)try{t=oi._abbr;require("./locale/"+n);gt(t)}catch(i){}return et[n]}function gt(n,t){var i;return n&&(i=typeof t=="undefined"?ot(n):cu(n,t),i&&(oi=i)),oi._abbr}function cu(n,t){return t!==null?(t.abbr=n,et[n]=et[n]||new ou,et[n].set(t),gt(n),et[n]):(delete et[n],null)}function ot(n){var t;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return oi;if(!ui(n)){if(t=hu(n),t)return t;n=[n]}return ho(n)}function l(n,t){var i=n.toLowerCase();ni[i]=ni[i+"s"]=ni[t]=n}function p(n){return typeof n=="string"?ni[n]||ni[n.toLowerCase()]:undefined}function lu(n){var r={},t;for(var i in n)ft(n,i)&&(t=p(i),t&&(r[t]=n[i]));return r}function pt(n,t){return function(r){return r!=null?(au(this,n,r),i.updateOffset(this,t),this):si(this,n)}}function si(n,t){return n._d["get"+(n._isUTC?"UTC":"")+t]()}function au(n,t,i){return n._d["set"+(n._isUTC?"UTC":"")+t](i)}function vu(n,t){var i;if(typeof n=="object")for(i in n)this.set(i,n[i]);else if(n=p(n),typeof this[n]=="function")return this[n](t);return this}function tr(n,t,i){var r=""+Math.abs(n),u=t-r.length,f=n>=0;return(f?i?"+":"":"-")+Math.pow(10,Math.max(0,u)).toString().substr(1)+r}function r(n,t,i,r){var u=r;typeof r=="string"&&(u=function(){return this[r]()});n&&(wt[n]=u);t&&(wt[t[0]]=function(){return tr(u.apply(this,arguments),t[1],t[2])});i&&(wt[i]=function(){return this.localeData().ordinal(u.apply(this,arguments),n)})}function co(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function lo(n){for(var i=n.match(yu),t=0,r=i.length;t<r;t++)i[t]=wt[i[t]]?wt[i[t]]:co(i[t]);return function(u){var f="";for(t=0;t<r;t++)f+=i[t]instanceof Function?i[t].call(u,n):i[t];return f}}function rr(n,t){return n.isValid()?(t=pu(t,n.localeData()),ir[t]=ir[t]||lo(t),ir[t](n)):n.localeData().invalidDate()}function pu(n,t){function r(n){return t.longDateFormat(n)||n}var i=5;for(hi.lastIndex=0;i>=0&&hi.test(n);)n=n.replace(hi,r),hi.lastIndex=0,i-=1;return n}function ao(n){return typeof n=="function"&&Object.prototype.toString.call(n)==="[object Function]"}function t(n,t,i){er[n]=ao(t)?t:function(n){return n&&i?i:t}}function vo(n,t){return ft(er,n)?er[n](t._strict,t._locale):new RegExp(yo(n))}function yo(n){return n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,i,r,u){return t||i||r||u}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function c(n,t){var i,r=t;for(typeof n=="string"&&(n=[n]),typeof t=="number"&&(r=function(n,i){i[t]=s(n)}),i=0;i<n.length;i++)or[n[i]]=r}function ii(n,t){c(n,function(n,i,r,u){r._w=r._w||{};t(n,r._w,r,u)})}function po(n,t,i){t!=null&&ft(or,n)&&or[n](t,i._a,i,n)}function sr(n,t){return new Date(Date.UTC(n,t+1,0)).getUTCDate()}function wo(n){return this._months[n.month()]}function bo(n){return this._monthsShort[n.month()]}function ko(n,t,i){var r,u,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++)if((u=kt([2e3,r]),i&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(u,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(u,"").replace(".","")+"$","i")),i||this._monthsParse[r]||(f="^"+this.months(u,"")+"|^"+this.monthsShort(u,""),this._monthsParse[r]=new RegExp(f.replace(".",""),"i")),i&&t==="MMMM"&&this._longMonthsParse[r].test(n))||i&&t==="MMM"&&this._shortMonthsParse[r].test(n)||!i&&this._monthsParse[r].test(n))return r}function gu(n,t){var i;return typeof t=="string"&&(t=n.localeData().monthsParse(t),typeof t!="number")?n:(i=Math.min(n.date(),sr(n.year(),t)),n._d["set"+(n._isUTC?"UTC":"")+"Month"](t,i),n)}function nf(n){return n!=null?(gu(this,n),i.updateOffset(this,!0),this):si(this,"Month")}function go(){return sr(this.year(),this.month())}function hr(n){var i,t=n._a;return t&&e(n).overflow===-2&&(i=t[g]<0||t[g]>11?g:t[k]<1||t[k]>sr(t[b],t[g])?k:t[a]<0||t[a]>24||t[a]===24&&(t[st]!==0||t[ht]!==0||t[ct]!==0)?a:t[st]<0||t[st]>59?st:t[ht]<0||t[ht]>59?ht:t[ct]<0||t[ct]>999?ct:-1,e(n)._overflowDayOfYear&&(i<b||i>k)&&(i=k),e(n).overflow=i),n}function tf(n){i.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+n)}function w(n,t){var i=!0;return ei(function(){return i&&(tf(n+"\n"+(new Error).stack),i=!1),t.apply(this,arguments)},t)}function ns(n,t){cr[n]||(tf(t),cr[n]=!0)}function rf(n){var t,i,r=n._i,u=ts.exec(r);if(u){for(e(n).iso=!0,t=0,i=lr.length;t<i;t++)if(lr[t][1].exec(r)){n._f=lr[t][0];break}for(t=0,i=ar.length;t<i;t++)if(ar[t][1].exec(r)){n._f+=(u[6]||" ")+ar[t][0];break}r.match(yi)&&(n._f+="Z");wr(n)}else n._isValid=!1}function rs(n){var t=is.exec(n._i);if(t!==null){n._d=new Date(+t[1]);return}rf(n);n._isValid===!1&&(delete n._isValid,i.createFromInputFallback(n))}function us(n,t,i,r,u,f,e){var o=new Date(n,t,i,r,u,f,e);return n<1970&&o.setFullYear(n),o}function vr(n){var t=new Date(Date.UTC.apply(null,arguments));return n<1970&&t.setUTCFullYear(n),t}function uf(n){return ff(n)?366:365}function ff(n){return n%4==0&&n%100!=0||n%400==0}function fs(){return ff(this.year())}function lt(n,t,i){var f=i-t,r=i-n.day(),u;return r>f&&(r-=7),r<f-7&&(r+=7),u=o(n).add(r,"d"),{week:Math.ceil(u.dayOfYear()/7),year:u.year()}}function es(n){return lt(n,this._week.dow,this._week.doy).week}function os(){return this._week.dow}function ss(){return this._week.doy}function hs(n){var t=this.localeData().week(this);return n==null?t:this.add((n-t)*7,"d")}function cs(n){var t=lt(this,1,4).week;return n==null?t:this.add((n-t)*7,"d")}function ls(n,t,i,r,u){var o=6+u-r,s=vr(n,0,1+o),e=s.getUTCDay(),f;return e<u&&(e+=7),i=i!=null?1*i:u,f=1+o+7*(t-1)-e+i,{year:f>0?n:n-1,dayOfYear:f>0?f:uf(n-1)+f}}function as(n){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?t:this.add(n-t,"d")}function bt(n,t,i){return n!=null?n:t!=null?t:i}function vs(n){var t=new Date;return n._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function pr(n){var t,i,r=[],u,f;if(!n._d){for(u=vs(n),n._w&&n._a[k]==null&&n._a[g]==null&&ys(n),n._dayOfYear&&(f=bt(n._a[b],u[b]),n._dayOfYear>uf(f)&&(e(n)._overflowDayOfYear=!0),i=vr(f,0,n._dayOfYear),n._a[g]=i.getUTCMonth(),n._a[k]=i.getUTCDate()),t=0;t<3&&n._a[t]==null;++t)n._a[t]=r[t]=u[t];for(;t<7;t++)n._a[t]=r[t]=n._a[t]==null?t===2?1:0:n._a[t];n._a[a]===24&&n._a[st]===0&&n._a[ht]===0&&n._a[ct]===0&&(n._nextDay=!0,n._a[a]=0);n._d=(n._useUTC?vr:us).apply(null,r);n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm);n._nextDay&&(n._a[a]=24)}}function ys(n){var t,e,u,r,i,f,s;t=n._w;t.GG!=null||t.W!=null||t.E!=null?(i=1,f=4,e=bt(t.GG,n._a[b],lt(o(),1,4).year),u=bt(t.W,1),r=bt(t.E,1)):(i=n._locale._week.dow,f=n._locale._week.doy,e=bt(t.gg,n._a[b],lt(o(),i,f).year),u=bt(t.w,1),t.d!=null?(r=t.d,r<i&&++u):r=t.e!=null?t.e+i:i);s=ls(e,u,r,f,i);n._a[b]=s.year;n._dayOfYear=s.dayOfYear}function wr(n){if(n._f===i.ISO_8601){rf(n);return}n._a=[];e(n).empty=!0;for(var t=""+n._i,r,u,s,c=t.length,h=0,o=pu(n._f,n._locale).match(yu)||[],f=0;f<o.length;f++)u=o[f],r=(t.match(vo(u,n))||[])[0],r&&(s=t.substr(0,t.indexOf(r)),s.length>0&&e(n).unusedInput.push(s),t=t.slice(t.indexOf(r)+r.length),h+=r.length),wt[u]?(r?e(n).empty=!1:e(n).unusedTokens.push(u),po(u,r,n)):n._strict&&!r&&e(n).unusedTokens.push(u);e(n).charsLeftOver=c-h;t.length>0&&e(n).unusedInput.push(t);e(n).bigHour===!0&&n._a[a]<=12&&n._a[a]>0&&(e(n).bigHour=undefined);n._a[a]=ps(n._locale,n._a[a],n._meridiem);pr(n);hr(n)}function ps(n,t,i){var r;return i==null?t:n.meridiemHour!=null?n.meridiemHour(t,i):n.isPM!=null?(r=n.isPM(i),r&&t<12&&(t+=12),r||t!==12||(t=0),t):t}function ws(n){var t,f,u,r,i;if(n._f.length===0){e(n).invalidFormat=!0;n._d=new Date(NaN);return}for(r=0;r<n._f.length;r++)(i=0,t=gi({},n),n._useUTC!=null&&(t._useUTC=n._useUTC),t._f=n._f[r],wr(t),uu(t))&&(i+=e(t).charsLeftOver,i+=e(t).unusedTokens.length*10,e(t).score=i,(u==null||i<u)&&(u=i,f=t));ei(n,f||t)}function bs(n){if(!n._d){var t=lu(n._i);n._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond];pr(n)}}function ks(n){var t=new dt(hr(of(n)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function of(n){var t=n._i,i=n._f;return(n._locale=n._locale||ot(n._l),t===null||i===undefined&&t==="")?fu({nullInput:!0}):(typeof t=="string"&&(n._i=t=n._locale.preparse(t)),tt(t))?new dt(hr(t)):(ui(i)?ws(n):i?wr(n):fi(t)?n._d=t:ds(n),n)}function ds(n){var t=n._i;t===undefined?n._d=new Date:fi(t)?n._d=new Date(+t):typeof t=="string"?rs(n):ui(t)?(n._a=oo(t.slice(0),function(n){return parseInt(n,10)}),pr(n)):typeof t=="object"?bs(n):typeof t=="number"?n._d=new Date(t):i.createFromInputFallback(n)}function sf(n,t,i,r,u){var f={};return typeof i=="boolean"&&(r=i,i=undefined),f._isAMomentObject=!0,f._useUTC=f._isUTC=u,f._l=i,f._i=n,f._f=t,f._strict=r,ks(f)}function o(n,t,i,r){return sf(n,t,i,r,!1)}function lf(n,t){var r,i;if(t.length===1&&ui(t[0])&&(t=t[0]),!t.length)return o();for(r=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][n](r))&&(r=t[i]);return r}function gs(){var n=[].slice.call(arguments,0);return lf("isBefore",n)}function nh(){var n=[].slice.call(arguments,0);return lf("isAfter",n)}function pi(n){var t=lu(n),i=t.year||0,r=t.quarter||0,u=t.month||0,f=t.week||0,e=t.day||0,o=t.hour||0,s=t.minute||0,h=t.second||0,c=t.millisecond||0;this._milliseconds=+c+h*1e3+s*6e4+o*36e5;this._days=+e+f*7;this._months=+u+r*3+i*12;this._data={};this._locale=ot();this._bubble()}function br(n){return n instanceof pi}function af(n,t){r(n,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+tr(~~(n/60),2)+t+tr(~~n%60,2)})}function kr(n){var i=(n||"").match(yi)||[],u=i[i.length-1]||[],t=(u+"").match(vf)||["-",0,0],r=+(t[1]*60)+s(t[2]);return t[0]==="+"?r:-r}function dr(n,t){var r,u;return t._isUTC?(r=t.clone(),u=(tt(n)||fi(n)?+n:+o(n))-+r,r._d.setTime(+r._d+u),i.updateOffset(r,!1),r):o(n).local()}function gr(n){return-Math.round(n._d.getTimezoneOffset()/15)*15}function th(n,t){var r=this._offset||0,u;return n!=null?(typeof n=="string"&&(n=kr(n)),Math.abs(n)<16&&(n=n*60),!this._isUTC&&t&&(u=gr(this)),this._offset=n,this._isUTC=!0,u!=null&&this.add(u,"m"),r!==n&&(!t||this._changeInProgress?df(this,it(n-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:gr(this)}function ih(n,t){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,t),this):-this.utcOffset()}function rh(n){return this.utcOffset(0,n)}function uh(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(gr(this),"m")),this}function fh(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(kr(this._i)),this}function eh(n){return n=n?o(n).utcOffset():0,(this.utcOffset()-n)%60==0}function oh(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function sh(){var n,t;return typeof this._isDSTShifted!="undefined"?this._isDSTShifted:(n={},gi(n,this),n=of(n),n._a?(t=n._isUTC?kt(n._a):o(n._a),this._isDSTShifted=this.isValid()&&eu(n._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted)}function hh(){return!this._isUTC}function ch(){return this._isUTC}function yf(){return this._isUTC&&this._offset===0}function it(n,t){var i=n,r=null,u,f,e;return br(n)?i={ms:n._milliseconds,d:n._days,M:n._months}:typeof n=="number"?(i={},t?i[t]=n:i.milliseconds=n):(r=pf.exec(n))?(u=r[1]==="-"?-1:1,i={y:0,d:s(r[k])*u,h:s(r[a])*u,m:s(r[st])*u,s:s(r[ht])*u,ms:s(r[ct])*u}):(r=wf.exec(n))?(u=r[1]==="-"?-1:1,i={y:at(r[2],u),M:at(r[3],u),d:at(r[4],u),h:at(r[5],u),m:at(r[6],u),s:at(r[7],u),w:at(r[8],u)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(e=lh(o(i.from),o(i.to)),i={},i.ms=e.milliseconds,i.M=e.months),f=new pi(i),br(n)&&ft(n,"_locale")&&(f._locale=n._locale),f}function at(n,t){var i=n&&parseFloat(n.replace(",","."));return(isNaN(i)?0:i)*t}function bf(n,t){var i={milliseconds:0,months:0};return i.months=t.month()-n.month()+(t.year()-n.year())*12,n.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+n.clone().add(i.months,"M"),i}function lh(n,t){var i;return t=dr(t,n),n.isBefore(t)?i=bf(n,t):(i=bf(t,n),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function kf(n,t){return function(i,r){var u,f;return r===null||isNaN(+r)||(ns(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),f=i,i=r,r=f),i=typeof i=="string"?+i:i,u=it(i,r),df(this,u,n),this}}function df(n,t,r,u){var o=t._milliseconds,f=t._days,e=t._months;u=u==null?!0:u;o&&n._d.setTime(+n._d+o*r);f&&au(n,"Date",si(n,"Date")+f*r);e&&gu(n,si(n,"Month")+e*r);u&&i.updateOffset(n,f||e)}function ah(n,t){var r=n||o(),f=dr(r,this).startOf("day"),i=this.diff(f,"days",!0),u=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(t&&t[u]||this.localeData().calendar(u,this,o(r)))}function vh(){return new dt(this)}function yh(n,t){var i;return t=p(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(n=tt(n)?n:o(n),+this>+n):(i=tt(n)?+n:+o(n),i<+this.clone().startOf(t))}function ph(n,t){var i;return t=p(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(n=tt(n)?n:o(n),+this<+n):(i=tt(n)?+n:+o(n),+this.clone().endOf(t)<i)}function wh(n,t,i){return this.isAfter(n,i)&&this.isBefore(t,i)}function bh(n,t){var i;return t=p(t||"millisecond"),t==="millisecond"?(n=tt(n)?n:o(n),+this==+n):(i=+o(n),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))}function kh(n,t,i){var f=dr(n,this),e=(f.utcOffset()-this.utcOffset())*6e4,u,r;return t=p(t),t==="year"||t==="month"||t==="quarter"?(r=dh(this,f),t==="quarter"?r=r/3:t==="year"&&(r=r/12)):(u=this-f,r=t==="second"?u/1e3:t==="minute"?u/6e4:t==="hour"?u/36e5:t==="day"?(u-e)/864e5:t==="week"?(u-e)/6048e5:u),i?r:v(r)}function dh(n,t){var r=(t.year()-n.year())*12+(t.month()-n.month()),i=n.clone().add(r,"months"),u,f;return t-i<0?(u=n.clone().add(r-1,"months"),f=(t-i)/(i-u)):(u=n.clone().add(r+1,"months"),f=(t-i)/(u-i)),-(r+f)}function gh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function te(){var n=this.clone().utc();return 0<n.year()&&n.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():rr(n,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):rr(n,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function nc(n){var t=rr(this,n||i.defaultFormat);return this.localeData().postformat(t)}function tc(n,t){return this.isValid()?it({to:this,from:n}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ic(n){return this.from(o(),n)}function rc(n,t){return this.isValid()?it({from:this,to:n}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function uc(n){return this.to(o(),n)}function ie(n){var t;return n===undefined?this._locale._abbr:(t=ot(n),t!=null&&(this._locale=t),this)}function re(){return this._locale}function fc(n){n=p(n);switch(n){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return n==="week"&&this.weekday(0),n==="isoWeek"&&this.isoWeekday(1),n==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function ec(n){return(n=p(n),n===undefined||n==="millisecond")?this:this.startOf(n).add(1,n==="isoWeek"?"week":n).subtract(1,"ms")}function oc(){return+this._d-(this._offset||0)*6e4}function sc(){return Math.floor(+this/1e3)}function hc(){return this._offset?new Date(+this):this._d}function cc(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function lc(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function ac(){return uu(this)}function vc(){return ei({},e(this))}function yc(){return e(this).overflow}function wi(n,t){r(0,[n,n.length],0,t)}function ue(n,t,i){return lt(o([n,11,31+t-i]),t,i).week}function pc(n){var t=lt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return n==null?t:this.add(n-t,"y")}function wc(n){var t=lt(this,1,4).year;return n==null?t:this.add(n-t,"y")}function bc(){return ue(this.year(),1,4)}function kc(){var n=this.localeData()._week;return ue(this.year(),n.dow,n.doy)}function dc(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}function gc(n,t){return typeof n!="string"?n:isNaN(n)?(n=t.weekdaysParse(n),typeof n=="number")?n:null:parseInt(n,10)}function nl(n){return this._weekdays[n.day()]}function tl(n){return this._weekdaysShort[n.day()]}function il(n){return this._weekdaysMin[n.day()]}function rl(n){var t,i,r;for(this._weekdaysParse=this._weekdaysParse||[],t=0;t<7;t++)if(this._weekdaysParse[t]||(i=o([2e3,1]).day(t),r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(n))return t}function ul(n){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return n!=null?(n=gc(n,this.localeData()),this.add(n-t,"d")):t}function fl(n){var t=(this.day()+7-this.localeData()._week.dow)%7;return n==null?t:this.add(n-t,"d")}function el(n){return n==null?this.day()||7:this.day(this.day()%7?n:n-7)}function se(n,t){r(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function he(n,t){return t._meridiemParse}function ol(n){return(n+"").toLowerCase().charAt(0)==="p"}function sl(n,t,i){return n>11?i?"pm":"PM":i?"am":"AM"}function hl(n,t){t[ct]=s(("0."+n)*1e3)}function cl(){return this._isUTC?"UTC":""}function ll(){return this._isUTC?"Coordinated Universal Time":""}function al(n){return o(n*1e3)}function vl(){return o.apply(null,arguments).parseZone()}function yl(n,t,i){var r=this._calendar[n];return typeof r=="function"?r.call(t,i):r}function pl(n){var t=this._longDateFormat[n],i=this._longDateFormat[n.toUpperCase()];return t||!i?t:(this._longDateFormat[n]=i.replace(/MMMM|MM|DD|dddd/g,function(n){return n.slice(1)}),this._longDateFormat[n])}function wl(){return this._invalidDate}function bl(n){return this._ordinal.replace("%d",n)}function no(n){return n}function kl(n,t,i,r){var u=this._relativeTime[i];return typeof u=="function"?u(n,t,i,r):u.replace(/%d/i,n)}function dl(n,t){var i=this._relativeTime[n>0?"future":"past"];return typeof i=="function"?i(t):i.replace(/%s/i,t)}function gl(n){var t;for(var i in n)t=n[i],typeof t=="function"?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function io(n,t,i,r){var u=ot(),f=kt().set(r,t);return u[i](f,n)}function ri(n,t,i,r,u){if(typeof n=="number"&&(t=n,n=undefined),n=n||"",t!=null)return io(n,t,i,u);for(var e=[],f=0;f<r;f++)e[f]=io(n,f,i,u);return e}function na(n,t){return ri(n,t,"months",12,"month")}function ta(n,t){return ri(n,t,"monthsShort",12,"month")}function ia(n,t){return ri(n,t,"weekdays",7,"day")}function ra(n,t){return ri(n,t,"weekdaysShort",7,"day")}function ua(n,t){return ri(n,t,"weekdaysMin",7,"day")}function fa(){var n=this._data;return this._milliseconds=d(this._milliseconds),this._days=d(this._days),this._months=d(this._months),n.milliseconds=d(n.milliseconds),n.seconds=d(n.seconds),n.minutes=d(n.minutes),n.hours=d(n.hours),n.months=d(n.months),n.years=d(n.years),this}function ro(n,t,i,r){var u=it(t,i);return n._milliseconds+=r*u._milliseconds,n._days+=r*u._days,n._months+=r*u._months,n._bubble()}function ea(n,t){return ro(this,n,t,1)}function oa(n,t){return ro(this,n,t,-1)}function uo(n){return n<0?Math.floor(n):Math.ceil(n)}function sa(){var r=this._milliseconds,n=this._days,t=this._months,i=this._data,u,f,e,s,o;return r>=0&&n>=0&&t>=0||r<=0&&n<=0&&t<=0||(r+=uo(iu(t)+n)*864e5,n=0,t=0),i.milliseconds=r%1e3,u=v(r/1e3),i.seconds=u%60,f=v(u/60),i.minutes=f%60,e=v(f/60),i.hours=e%24,n+=v(e/24),o=v(fo(n)),t+=o,n-=uo(iu(o)),s=v(t/12),t%=12,i.days=n,i.months=t,i.years=s,this}function fo(n){return n*4800/146097}function iu(n){return n*146097/4800}function ha(n){var t,r,i=this._milliseconds;if(n=p(n),n==="month"||n==="year")return t=this._days+i/864e5,r=this._months+fo(t),n==="month"?r:r/12;t=this._days+Math.round(iu(this._months));switch(n){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return t*24+i/36e5;case"minute":return t*1440+i/6e4;case"second":return t*86400+i/1e3;case"millisecond":return Math.floor(t*864e5)+i;default:throw new Error("Unknown unit "+n);}}function ca(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+s(this._months/12)*31536e6}function ut(n){return function(){return this.as(n)}}function da(n){return n=p(n),this[n+"s"]()}function vt(n){return function(){return this._data[n]}}function ev(){return v(this.days()/7)}function ov(n,t,i,r,u){return u.relativeTime(t||1,!!i,n,r)}function sv(n,t,i){var r=it(n).abs(),h=yt(r.as("s")),f=yt(r.as("m")),e=yt(r.as("h")),o=yt(r.as("d")),s=yt(r.as("M")),c=yt(r.as("y")),u=h<nt.s&&["s",h]||f===1&&["m"]||f<nt.m&&["mm",f]||e===1&&["h"]||e<nt.h&&["hh",e]||o===1&&["d"]||o<nt.d&&["dd",o]||s===1&&["M"]||s<nt.M&&["MM",s]||c===1&&["y"]||["yy",c];return u[2]=t,u[3]=+n>0,u[4]=i,ov.apply(null,u)}function hv(n,t){return nt[n]===undefined?!1:t===undefined?nt[n]:(nt[n]=t,!0)}function cv(n){var t=this.localeData(),i=sv(this,!n,t);return n&&(i=t.pastFuture(+this,i)),t.postformat(i)}function ki(){var t=bi(this._milliseconds)/1e3,a=bi(this._days),i=bi(this._months),n,e,o;n=v(t/60);e=v(n/60);t%=60;n%=60;o=v(i/12);i%=12;var s=o,h=i,c=a,r=e,u=n,f=t,l=this.asSeconds();return l?(l<0?"-":"")+"P"+(s?s+"Y":"")+(h?h+"M":"")+(c?c+"D":"")+(r||u||f?"T":"")+(r?r+"H":"")+(u?u+"M":"")+(f?f+"S":""):"P0D"}var ru,di=i.momentProperties=[],nr=!1,et={},oi,ni={},yu=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,hi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ir={},wt={},wu=/\d/,y=/\d\d/,bu=/\d{3}/,ur=/\d{4}/,ci=/[+-]?\d{6}/,h=/\d\d?/,li=/\d{1,3}/,fr=/\d{1,4}/,ai=/[+-]?\d{1,6}/,vi=/[+-]?\d+/,yi=/Z|[+-]\d\d:?\d\d/gi,ti=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,er={},or={},b=0,g=1,k=2,a=3,st=4,ht=5,ct=6,ku,du,cr,yr,ef,hf,cf,vf,pf,wf,gf,ne,nu,tu,fe,ee,oe,ce,le,ae,ve,rt,ye,n,pe,we,be,ke,de,ge,to,u,d,yt,nt,bi,f;r("M",["MM",2],"Mo",function(){return this.month()+1});r("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});r("MMMM",0,0,function(n){return this.localeData().months(this,n)});l("month","M");t("M",h);t("MM",h,y);t("MMM",ti);t("MMMM",ti);c(["M","MM"],function(n,t){t[g]=s(n)-1});c(["MMM","MMMM"],function(n,t,i,r){var u=i._locale.monthsParse(n,r,i._strict);u!=null?t[g]=u:e(i).invalidMonth=n});ku="January_February_March_April_May_June_July_August_September_October_November_December".split("_");du="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");cr={};i.suppressDeprecationWarnings=!1;var ts=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ar=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],is=/^\/?Date\((\-?\d+)/i;for(i.createFromInputFallback=w("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))}),r(0,["YY",2],0,function(){return this.year()%100}),r(0,["YYYY",4],0,"year"),r(0,["YYYYY",5],0,"year"),r(0,["YYYYYY",6,!0],0,"year"),l("year","y"),t("Y",vi),t("YY",h,y),t("YYYY",fr,ur),t("YYYYY",ai,ci),t("YYYYYY",ai,ci),c(["YYYYY","YYYYYY"],b),c("YYYY",function(n,t){t[b]=n.length===2?i.parseTwoDigitYear(n):s(n)}),c("YY",function(n,t){t[b]=i.parseTwoDigitYear(n)}),i.parseTwoDigitYear=function(n){return s(n)+(s(n)>68?1900:2e3)},yr=pt("FullYear",!1),r("w",["ww",2],"wo","week"),r("W",["WW",2],"Wo","isoWeek"),l("week","w"),l("isoWeek","W"),t("w",h),t("ww",h,y),t("W",h),t("WW",h,y),ii(["w","ww","W","WW"],function(n,t,i,r){t[r.substr(0,1)]=s(n)}),ef={dow:0,doy:6},r("DDD",["DDDD",3],"DDDo","dayOfYear"),l("dayOfYear","DDD"),t("DDD",li),t("DDDD",bu),c(["DDD","DDDD"],function(n,t,i){i._dayOfYear=s(n)}),i.ISO_8601=function(){},hf=w("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var n=o.apply(null,arguments);return n<this?this:n}),cf=w("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var n=o.apply(null,arguments);return n>this?this:n}),af("Z",":"),af("ZZ",""),t("Z",yi),t("ZZ",yi),c(["Z","ZZ"],function(n,t,i){i._useUTC=!0;i._tzm=kr(n)}),vf=/([\+\-]|\d\d)/gi,i.updateOffset=function(){},pf=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,wf=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,it.fn=pi.prototype,gf=kf(1,"add"),ne=kf(-1,"subtract"),i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",nu=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===undefined?this.localeData():this.locale(n)}),r(0,["gg",2],0,function(){return this.weekYear()%100}),r(0,["GG",2],0,function(){return this.isoWeekYear()%100}),wi("gggg","weekYear"),wi("ggggg","weekYear"),wi("GGGG","isoWeekYear"),wi("GGGGG","isoWeekYear"),l("weekYear","gg"),l("isoWeekYear","GG"),t("G",vi),t("g",vi),t("GG",h,y),t("gg",h,y),t("GGGG",fr,ur),t("gggg",fr,ur),t("GGGGG",ai,ci),t("ggggg",ai,ci),ii(["gggg","ggggg","GGGG","GGGGG"],function(n,t,i,r){t[r.substr(0,2)]=s(n)}),ii(["gg","GG"],function(n,t,r,u){t[u]=i.parseTwoDigitYear(n)}),r("Q",0,0,"quarter"),l("quarter","Q"),t("Q",wu),c("Q",function(n,t){t[g]=(s(n)-1)*3}),r("D",["DD",2],"Do","date"),l("date","D"),t("D",h),t("DD",h,y),t("Do",function(n,t){return n?t._ordinalParse:t._ordinalParseLenient}),c(["D","DD"],k),c("Do",function(n,t){t[k]=s(n.match(h)[0],10)}),tu=pt("Date",!0),r("d",0,"do","day"),r("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)}),r("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)}),r("dddd",0,0,function(n){return this.localeData().weekdays(this,n)}),r("e",0,0,"weekday"),r("E",0,0,"isoWeekday"),l("day","d"),l("weekday","e"),l("isoWeekday","E"),t("d",h),t("e",h),t("E",h),t("dd",ti),t("ddd",ti),t("dddd",ti),ii(["dd","ddd","dddd"],function(n,t,i){var r=i._locale.weekdaysParse(n);r!=null?t.d=r:e(i).invalidWeekday=n}),ii(["d","e","E"],function(n,t,i,r){t[r]=s(n)}),fe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ee="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),oe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),r("H",["HH",2],0,"hour"),r("h",["hh",2],0,function(){return this.hours()%12||12}),se("a",!0),se("A",!1),l("hour","h"),t("a",he),t("A",he),t("H",h),t("h",h),t("HH",h,y),t("hh",h,y),c(["H","HH"],a),c(["a","A"],function(n,t,i){i._isPm=i._locale.isPM(n);i._meridiem=n}),c(["h","hh"],function(n,t,i){t[a]=s(n);e(i).bigHour=!0}),ce=/[ap]\.?m?\.?/i,le=pt("Hours",!0),r("m",["mm",2],0,"minute"),l("minute","m"),t("m",h),t("mm",h,y),c(["m","mm"],st),ae=pt("Minutes",!1),r("s",["ss",2],0,"second"),l("second","s"),t("s",h),t("ss",h,y),c(["s","ss"],ht),ve=pt("Seconds",!1),r("S",0,0,function(){return~~(this.millisecond()/100)}),r(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),r(0,["SSS",3],0,"millisecond"),r(0,["SSSS",4],0,function(){return this.millisecond()*10}),r(0,["SSSSS",5],0,function(){return this.millisecond()*100}),r(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),r(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),r(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),r(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),l("millisecond","ms"),t("S",li,wu),t("SS",li,y),t("SSS",li,bu),rt="SSSS";rt.length<=9;rt+="S")t(rt,/\d+/);for(rt="S";rt.length<=9;rt+="S")c(rt,hl);ye=pt("Milliseconds",!1);r("z",0,0,"zoneAbbr");r("zz",0,0,"zoneName");n=dt.prototype;n.add=gf;n.calendar=ah;n.clone=vh;n.diff=kh;n.endOf=ec;n.format=nc;n.from=tc;n.fromNow=ic;n.to=rc;n.toNow=uc;n.get=vu;n.invalidAt=yc;n.isAfter=yh;n.isBefore=ph;n.isBetween=wh;n.isSame=bh;n.isValid=ac;n.lang=nu;n.locale=ie;n.localeData=re;n.max=cf;n.min=hf;n.parsingFlags=vc;n.set=vu;n.startOf=fc;n.subtract=ne;n.toArray=cc;n.toObject=lc;n.toDate=hc;n.toISOString=te;n.toJSON=te;n.toString=gh;n.unix=sc;n.valueOf=oc;n.year=yr;n.isLeapYear=fs;n.weekYear=pc;n.isoWeekYear=wc;n.quarter=n.quarters=dc;n.month=nf;n.daysInMonth=go;n.week=n.weeks=hs;n.isoWeek=n.isoWeeks=cs;n.weeksInYear=kc;n.isoWeeksInYear=bc;n.date=tu;n.day=n.days=ul;n.weekday=fl;n.isoWeekday=el;n.dayOfYear=as;n.hour=n.hours=le;n.minute=n.minutes=ae;n.second=n.seconds=ve;n.millisecond=n.milliseconds=ye;n.utcOffset=th;n.utc=rh;n.local=uh;n.parseZone=fh;n.hasAlignedHourOffset=eh;n.isDST=oh;n.isDSTShifted=sh;n.isLocal=hh;n.isUtcOffset=ch;n.isUtc=yf;n.isUTC=yf;n.zoneAbbr=cl;n.zoneName=ll;n.dates=w("dates accessor is deprecated. Use date instead.",tu);n.months=w("months accessor is deprecated. Use month instead",nf);n.years=w("years accessor is deprecated. Use year instead",yr);n.zone=w("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",ih);pe=n;we={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};be={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};ke="Invalid date";de="%d";ge=/\d{1,2}/;to={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};u=ou.prototype;u._calendar=we;u.calendar=yl;u._longDateFormat=be;u.longDateFormat=pl;u._invalidDate=ke;u.invalidDate=wl;u._ordinal=de;u.ordinal=bl;u._ordinalParse=ge;u.preparse=no;u.postformat=no;u._relativeTime=to;u.relativeTime=kl;u.pastFuture=dl;u.set=gl;u.months=wo;u._months=ku;u.monthsShort=bo;u._monthsShort=du;u.monthsParse=ko;u.week=es;u._week=ef;u.firstDayOfYear=ss;u.firstDayOfWeek=os;u.weekdays=nl;u._weekdays=fe;u.weekdaysMin=il;u._weekdaysMin=oe;u.weekdaysShort=tl;u._weekdaysShort=ee;u.weekdaysParse=rl;u.isPM=ol;u._meridiemParse=ce;u.meridiem=sl;gt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var t=n%10,i=s(n%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return n+i}});i.lang=w("moment.lang is deprecated. Use moment.locale instead.",gt);i.langData=w("moment.langData is deprecated. Use moment.localeData instead.",ot);d=Math.abs;var la=ut("ms"),aa=ut("s"),va=ut("m"),ya=ut("h"),pa=ut("d"),wa=ut("w"),ba=ut("M"),ka=ut("y");var ga=vt("milliseconds"),nv=vt("seconds"),tv=vt("minutes"),iv=vt("hours"),rv=vt("days"),uv=vt("months"),fv=vt("years");return yt=Math.round,nt={s:45,m:45,h:22,d:26,M:11},bi=Math.abs,f=pi.prototype,f.abs=fa,f.add=ea,f.subtract=oa,f.as=ha,f.asMilliseconds=la,f.asSeconds=aa,f.asMinutes=va,f.asHours=ya,f.asDays=pa,f.asWeeks=wa,f.asMonths=ba,f.asYears=ka,f.valueOf=ca,f._bubble=sa,f.get=da,f.milliseconds=ga,f.seconds=nv,f.minutes=tv,f.hours=iv,f.days=rv,f.weeks=ev,f.months=uv,f.years=fv,f.humanize=cv,f.toISOString=ki,f.toString=ki,f.toJSON=ki,f.locale=ie,f.localeData=re,f.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ki),f.lang=nu,r("X",0,0,"unix"),r("x",0,0,"valueOf"),t("x",vi),t("X",/[+-]?\d+(\.\d{1,3})?/),c("X",function(n,t,i){i._d=new Date(parseFloat(n,10)*1e3)}),c("x",function(n,t,i){i._d=new Date(s(n))}),i.version="2.10.6",eo(o),i.fn=pe,i.min=gs,i.max=nh,i.utc=kt,i.unix=al,i.months=na,i.isDate=fi,i.locale=gt,i.invalid=fu,i.duration=it,i.isMoment=tt,i.weekdays=ia,i.parseZone=vl,i.localeData=ot,i.isDuration=br,i.monthsShort=ta,i.weekdaysMin=ua,i.defineLocale=cu,i.weekdaysShort=ra,i.normalizeUnits=p,i.relativeTimeThreshold=hv,i}),function(n,t){"use strict";t.module("carouselar.constants",[]).constant("CarouselarConstants",{RESIZE_TIMEOUT:300,MAX_DISPLAYING_IMAGE:5,BREAKPOINTS:{LANDSCAPE:960,PORTRAIT:640}})}(window,window.angular),function(n,t){"use strict";t.module("carouselar.controllers",["carouselar.constants"]).controller("CarouselarController",["$scope","$timeout","$window","CarouselarConstants",function(n,t,i,r){n.visibleImages=[];n.maxImageCount=1;n.displayingImageCount=0;n.activeSection=0;n.sectionCount=5;n.containerPosition="translateX(0)";n.singleImageWidth="100%";n.createArray=function(n){return new Array(n||0)};n.prev=function(){n.moveToSection(n.activeSection-1)};n.next=function(){n.moveToSection(n.activeSection+1)};n.moveToSection=function(t){var f,e,r,i,u;if(n.activeSection=t>=n.sectionCount?0:t<0?n.sectionCount-1:t,e=100/n.displayingImageCount,r=[],n.activeSection===n.sectionCount-1)for(f=(n.images.length-n.displayingImageCount)*e,i=0;i<n.displayingImageCount+1;i++)r.push(n.images.length-i);else{for(u=n.activeSection*n.displayingImageCount,r.push(u),i=1;i<n.displayingImageCount;i++)r.push(u+i);f=u*e}n.containerPosition="translateX(-"+f+"%)";n.visibleImages=r};n.resizeTimer=null;n.onResize=function(u,f){t.cancel(n.resizeTimer);n.resizeTimer=t(function(){var t=n.maxImageCount,u=f||i.innerWidth;u<r.BREAKPOINTS.LANDSCAPE&&(t=Math.ceil(n.maxImageCount/2),u<r.BREAKPOINTS.PORTRAIT&&(t=1));n.displayingImageCount=t},r.RESIZE_TIMEOUT)};n.$watch("displayingImageCount",function(t){t&&(n.sectionCount=Math.ceil(n.images.length/n.displayingImageCount),n.moveToSection(n.activeSection),n.singleImageWidth=100/t+"%")});n.isImageVisible=function(t){return n.visibleImages.indexOf(t)>-1}}]).controller("CarouselarImageController",["$scope",function(n){n.isLoading=!0;n.onLoad=function(){n.isLoading=!1;n.$apply()};var t=n.$watch("isVisible",function(i){i&&(n.compileImage(),t())})}])}(window,window.angular),function(n,t){"use strict";t.module("carouselar.directives",["carouselar.controllers","carouselar.constants"]).directive("carouselar",["$window","CarouselarConstants",function(n,i){return{replace:!0,restrict:"E",scope:{images:"="},controller:"CarouselarController",template:'<div class="carouselar"><div class="carouselar__container"><div class="carouselar__inner-container" ng-style="{\'transform\': containerPosition}"><div class="carouselar__image-container" ng-style="{\'width\': singleImageWidth}" ng-repeat="image in images" is-visible="isImageVisible($index)" img-url="{{image}}" carouselar-image><\/div><\/div><\/div><div class="carouselar__navigation"><span class="carouselar__navigation__button carouselar__navigation__button--prev" ng-click="prev()">PREV<\/span><div class="carouselar__navigation__index"><span class="carouselar__navigation__button carouselar__navigation__button--index" ng-repeat="i in createArray(sectionCount) track by $index" ng-class="{\'carouselar__navigation__button--active\':$index === activeSection}"ng-click="moveToSection($index)">{{$index + 1}}<\/span><\/div><span class="carouselar__navigation__button carouselar__navigation__button--next" ng-click="next()">NEXT<\/span><\/div><\/div>',link:function(r,u,f){r.maxImageCount=Math.min(parseInt(f.displayingImageCount),i.MAX_DISPLAYING_IMAGE)||1;var e=t.element(n);e.bind("resize",r.onResize);r.onResize();r.$on("$destroy",function(){e.unbind("resize",r.onResize)})}}}]).directive("carouselarImage",["$compile",function(n){return{restrict:"A",controller:"CarouselarImageController",scope:{isVisible:"=",imgUrl:"@"},template:'<div class="carouselar__loader" ng-if="isLoading"><\/div>',link:function(t,i){t.compileImage=function(){i.append('<img class="carouselar__image" carouselar-loader on-load="onLoad()" ng-src="{{imgUrl}}" />');n(i.contents())(t)}}}}]).directive("carouselarLoader",[function(){return{restrict:"A",scope:{onLoad:"&"},link:function(n,t){t.bind("load",n.onLoad)}}}])}(window,window.angular),function(n,t){"use strict";t.module("carouselar",["carouselar.controllers","carouselar.directives","carouselar.constants"])}(window,window.angular),function(n,t){"use strict";typeof define=="function"&&define.amd?define(["angular"],t):typeof exports=="object"?module.exports=t(require("angular")):t(n.angular)}(this,function(n){"use strict";return n.module("gridster",[]).constant("gridsterConfig",{columns:6,pushing:!0,floating:!0,swapping:!1,width:"auto",colWidth:"auto",rowHeight:"match",margins:[10,10],outerMargin:!0,isMobile:!1,mobileBreakPoint:600,mobileModeEnabled:!0,minColumns:1,minRows:1,maxRows:100,defaultSizeX:2,defaultSizeY:1,minSizeX:1,maxSizeX:null,minSizeY:1,maxSizeY:null,saveGridItemCalculatedHeightInMobile:!1,resizable:{enabled:!0,handles:["s","e","n","w","se","ne","sw","nw"]},draggable:{enabled:!0,scrollSensitivity:20,scrollSpeed:15}}).controller("GridsterCtrl",["gridsterConfig","$timeout",function(t,i){var r=this,u;n.extend(this,t);this.resizable=n.extend({},t.resizable||{});this.draggable=n.extend({},t.draggable||{});u=!1;this.layoutChanged=function(){u||(u=!0,i(function(){u=!1;r.loaded&&r.floatItemsUp();r.updateHeight(r.movingItem?r.movingItem.sizeY:0)},30))};this.grid=[];this.destroy=function(){this.grid&&(this.grid=[]);this.$element=null};this.setOptions=function(t){if(t)if(t=n.extend({},t),t.draggable&&(n.extend(this.draggable,t.draggable),delete t.draggable),t.resizable&&(n.extend(this.resizable,t.resizable),delete t.resizable),n.extend(this,t),this.margins&&this.margins.length===2)for(var i=0,r=this.margins.length;i<r;++i)this.margins[i]=parseInt(this.margins[i],10),isNaN(this.margins[i])&&(this.margins[i]=0);else this.margins=[0,0]};this.canItemOccupy=function(n,t,i){return t>-1&&i>-1&&n.sizeX+i<=this.columns&&n.sizeY+t<=this.maxRows};this.autoSetItemPosition=function(n){for(var i,r,t=0;t<this.maxRows;++t)for(i=0;i<this.columns;++i)if(r=this.getItems(t,i,n.sizeX,n.sizeY,n),r.length===0&&this.canItemOccupy(n,t,i)){this.putItem(n,t,i);return}throw new Error("Unable to place item!");};this.getItems=function(n,t,i,r,u){var s=[],e,o,f;for(i&&r||(i=r=1),!u||u instanceof Array||(u=[u]),e=0;e<r;++e)for(o=0;o<i;++o)f=this.getItem(n+e,t+o,u),f&&(!u||u.indexOf(f)===-1)&&s.indexOf(f)===-1&&s.push(f);return s};this.getBoundingBox=function(n){var u,o,t;if(n.length===0)return null;if(n.length===1)return{row:n[0].row,col:n[0].col,sizeY:n[0].sizeY,sizeX:n[0].sizeX};var f=0,e=0,i=9999,r=9999;for(u=0,o=n.length;u<o;++u)t=n[u],i=Math.min(t.row,i),r=Math.min(t.col,r),f=Math.max(t.row+t.sizeY,f),e=Math.max(t.col+t.sizeX,e);return{row:i,col:r,sizeY:f-i,sizeX:e-r}};this.removeItem=function(n){for(var i,r,t=0,u=this.grid.length;t<u;++t)if((i=this.grid[t],i)&&(r=i.indexOf(n),r!==-1)){i[r]=null;break}this.layoutChanged()};this.getItem=function(n,t,i){var f,e,u,o,r;for(!i||i instanceof Array||(i=[i]),f=1;n>-1;){for(e=1,u=t;u>-1;){if(o=this.grid[n],o&&(r=o[u],r&&(!i||i.indexOf(r)===-1)&&r.sizeX>=e&&r.sizeY>=f))return r;++e;--u}--n;++f}return null};this.putItems=function(n){for(var t=0,i=n.length;t<i;++t)this.putItem(n[t])};this.putItem=function(n,t,i,r){var f,e,u;if((typeof t=="undefined"||t===null)&&(t=n.row,i=n.col,typeof t=="undefined"||t===null)){this.autoSetItemPosition(n);return}if(this.canItemOccupy(n,t,i)||(i=Math.min(this.columns-n.sizeX,Math.max(0,i)),t=Math.min(this.maxRows-n.sizeY,Math.max(0,t))),n.oldRow!==null&&typeof n.oldRow!="undefined"){if(f=n.oldRow===t&&n.oldColumn===i,e=this.grid[t]&&this.grid[t][i]===n,f&&e){n.row=t;n.col=i;return}u=this.grid[n.oldRow];u&&u[n.oldColumn]===n&&delete u[n.oldColumn]}n.oldRow=n.row=t;n.oldColumn=n.col=i;this.moveOverlappingItems(n,r);this.grid[t]||(this.grid[t]=[]);this.grid[t][i]=n;this.movingItem===n&&this.floatItemUp(n);this.layoutChanged()};this.swapItems=function(n,t){this.grid[n.row][n.col]=t;this.grid[t.row][t.col]=n;var i=n.row,r=n.col;n.row=t.row;n.col=t.col;t.row=i;t.col=r};this.moveOverlappingItems=function(n,t){t?t.indexOf(n)===-1&&(t=t.slice(0),t.push(n)):t=[n];var i=this.getItems(n.row,n.col,n.sizeX,n.sizeY,t);this.moveItemsDown(i,n.row+n.sizeY,t)};this.moveItemsDown=function(n,t,i){var f,r,u,e,o,s;if(n&&n.length!==0){for(n.sort(function(n,t){return n.row-t.row}),i=i?i.slice(0):[],f={},u=0,e=n.length;u<e;++u)r=n[u],o=f[r.col],(typeof o=="undefined"||r.row<o)&&(f[r.col]=r.row);for(u=0,e=n.length;u<e;++u)r=n[u],s=t-f[r.col],this.moveItemDown(r,r.row+s,i),i.push(r)}};this.moveItemDown=function(n,t,i){if(!(n.row>=t)){while(n.row<t)++n.row,this.moveOverlappingItems(n,i);this.putItem(n,n.row,n.col,i)}};this.floatItemsUp=function(){var n,u,t,i,f,r;if(this.floating!==!1)for(n=0,u=this.grid.length;n<u;++n)if(t=this.grid[n],t)for(i=0,f=t.length;i<f;++i)r=t[i],r&&this.floatItemUp(r)};this.floatItemUp=function(n){var f;if(this.floating!==!1){for(var r=n.col,e=n.sizeY,o=n.sizeX,i=null,u=null,t=n.row-1;t>-1;){if(f=this.getItems(t,r,o,e,n),f.length!==0)break;i=t;u=r;--t}i!==null&&this.putItem(n,i,u)}};this.updateHeight=function(n){var t=this.minRows,i,r,u,f;for(n=n||0,i=this.grid.length;i>=0;--i)if(r=this.grid[i],r)for(u=0,f=r.length;u<f;++u)r[u]&&(t=Math.max(t,i+n+r[u].sizeY));this.gridHeight=this.maxRows-t>0?Math.min(this.maxRows,t):Math.max(this.maxRows,t)};this.pixelsToRows=function(n,t){return(this.outerMargin||(n+=this.margins[0]/2),t===!0)?Math.ceil(n/this.curRowHeight):t===!1?Math.floor(n/this.curRowHeight):Math.round(n/this.curRowHeight)};this.pixelsToColumns=function(n,t){return(this.outerMargin||(n+=this.margins[1]/2),t===!0)?Math.ceil(n/this.curColWidth):t===!1?Math.floor(n/this.curColWidth):Math.round(n/this.curColWidth)}}]).directive("gridsterPreview",function(){return{replace:!0,scope:!0,require:"^gridster",template:'<div ng-style="previewStyle()" class="gridster-item gridster-preview-holder"><\/div>',link:function(n,t,i,r){n.previewStyle=function(){return r.movingItem?{display:"block",height:r.movingItem.sizeY*r.curRowHeight-r.margins[0]+"px",width:r.movingItem.sizeX*r.curColWidth-r.margins[1]+"px",top:r.movingItem.row*r.curRowHeight+(r.outerMargin?r.margins[0]:0)+"px",left:r.movingItem.col*r.curColWidth+(r.outerMargin?r.margins[1]:0)+"px"}:{display:"none"}}}}}).directive("gridster",["$timeout","$window","$rootScope","gridsterDebounce",function(t,i,r,u){return{scope:!0,restrict:"EAC",controller:"GridsterCtrl",controllerAs:"gridster",compile:function(f){return f.prepend('<div ng-if="gridster.movingItem" gridster-preview><\/div>'),function(f,e,o,s){function l(n){var r,f,t,i,o,u;if(s.setOptions(n),c(e[0])){for(s.curWidth=s.width==="auto"?e[0].offsetWidth||parseInt(e.css("width"),10):s.width,s.curColWidth=s.colWidth==="auto"?(s.curWidth+(s.outerMargin?-s.margins[1]:s.margins[1]))/s.columns:s.colWidth,s.curRowHeight=s.rowHeight,typeof s.rowHeight=="string"&&(s.rowHeight==="match"?s.curRowHeight=Math.round(s.curColWidth):s.rowHeight.indexOf("*")!==-1?s.curRowHeight=Math.round(s.curColWidth*s.rowHeight.replace("*","").replace(" ","")):s.rowHeight.indexOf("/")!==-1&&(s.curRowHeight=Math.round(s.curColWidth/s.rowHeight.replace("/","").replace(" ","")))),s.isMobile=s.mobileModeEnabled&&s.curWidth<=s.mobileBreakPoint,r=0,f=s.grid.length;r<f;++r)if(t=s.grid[r],t)for(i=0,o=t.length;i<o;++i)t[i]&&(u=t[i],u.setElementPosition(),u.setElementSizeY(),u.setElementSizeX());y()}}function y(){e.css("height",s.gridHeight*s.curRowHeight+(s.outerMargin?s.margins[0]:-s.margins[0])+"px")}var c,a,v;s.loaded=!1;s.$element=e;f.gridster=s;e.addClass("gridster");c=function(n){return n.style.visibility!=="hidden"&&n.style.display!=="none"};a=o.gridster;a?f.$parent.$watch(a,function(n){l(n)},!0):l({});f.$watch(function(){return s.loaded},function(){s.loaded?e.addClass("gridster-loaded"):e.removeClass("gridster-loaded")});f.$watch(function(){return s.isMobile},function(){s.isMobile?e.addClass("gridster-mobile").removeClass("gridster-desktop"):e.removeClass("gridster-mobile").addClass("gridster-desktop");r.$broadcast("gridster-mobile-changed",s)});f.$watch(function(){return s.draggable},function(){r.$broadcast("gridster-draggable-changed",s)},!0);f.$watch(function(){return s.resizable},function(){r.$broadcast("gridster-resizable-changed",s)},!0);f.$watch(function(){return s.gridHeight},y);f.$watch(function(){return s.movingItem},function(){s.updateHeight(s.movingItem?s.movingItem.sizeY:0)});var p=e[0].offsetWidth||parseInt(e.css("width"),10),w=function(){var n=e[0].offsetWidth||parseInt(e.css("width"),10);n&&n!==p&&!s.movingItem&&(p=n,s.loaded&&e.removeClass("gridster-loaded"),l(),s.loaded&&e.addClass("gridster-loaded"),r.$broadcast("gridster-resized",[n,e[0].offsetHeight],s))},h=u(function(){w();t(function(){f.$apply()})},100);f.$watch(function(){return c(e[0])},h);typeof addResizeListener=="function"?window.addResizeListener(e[0],h):f.$watch(function(){return e[0].offsetWidth||parseInt(e.css("width"),10)},w);v=n.element(i);v.on("resize",h);f.$on("$destroy",function(){s.destroy();v.off("resize",h);typeof removeResizeListener=="function"&&window.removeResizeListener(e[0],h)});t(function(){f.$watch("gridster.floating",function(){s.floatItemsUp()});s.loaded=!0},100)}}}}]).controller("GridsterItemCtrl",function(){this.$element=null;this.gridster=null;this.row=null;this.col=null;this.sizeX=null;this.sizeY=null;this.minSizeX=0;this.minSizeY=0;this.maxSizeX=null;this.maxSizeY=null;this.init=function(n,t){this.$element=n;this.gridster=t;this.sizeX=t.defaultSizeX;this.sizeY=t.defaultSizeY};this.destroy=function(){this.gridster=null;this.$element=null};this.toJSON=function(){return{row:this.row,col:this.col,sizeY:this.sizeY,sizeX:this.sizeX}};this.isMoving=function(){return this.gridster.movingItem===this};this.setPosition=function(n,t){this.gridster.putItem(this,n,t);this.isMoving()||this.setElementPosition()};this.setSize=function(n,t,i){var e,r,u,f,o;if(n=n.toUpperCase(),e="size"+n,r="Size"+n,t!=="")return t=parseInt(t,10),(isNaN(t)||t===0)&&(t=this.gridster["default"+r]),u=n==="X"?this.gridster.columns:this.gridster.maxRows,this["max"+r]&&(u=Math.min(this["max"+r],u)),this.gridster["max"+r]&&(u=Math.min(this.gridster["max"+r],u)),n==="X"&&this.cols?u-=this.cols:n==="Y"&&this.rows&&(u-=this.rows),f=0,this["min"+r]&&(f=Math.max(this["min"+r],f)),this.gridster["min"+r]&&(f=Math.max(this.gridster["min"+r],f)),t=Math.max(Math.min(t,u),f),o=this[e]!==t||this["old"+r]&&this["old"+r]!==t,this["old"+r]=this[e]=t,this.isMoving()||this["setElement"+r](),!i&&o&&(this.gridster.moveOverlappingItems(this),this.gridster.layoutChanged()),o};this.setSizeY=function(n,t){return this.setSize("Y",n,t)};this.setSizeX=function(n,t){return this.setSize("X",n,t)};this.setElementPosition=function(){this.gridster.isMobile?this.$element.css({marginLeft:this.gridster.margins[0]+"px",marginRight:this.gridster.margins[0]+"px",marginTop:this.gridster.margins[1]+"px",marginBottom:this.gridster.margins[1]+"px",top:"",left:""}):this.$element.css({margin:0,top:this.row*this.gridster.curRowHeight+(this.gridster.outerMargin?this.gridster.margins[0]:0)+"px",left:this.col*this.gridster.curColWidth+(this.gridster.outerMargin?this.gridster.margins[1]:0)+"px"})};this.setElementSizeY=function(){this.gridster.isMobile&&!this.gridster.saveGridItemCalculatedHeightInMobile?this.$element.css("height",""):this.$element.css("height",this.sizeY*this.gridster.curRowHeight-this.gridster.margins[0]+"px")};this.setElementSizeX=function(){this.gridster.isMobile?this.$element.css("width",""):this.$element.css("width",this.sizeX*this.gridster.curColWidth-this.gridster.margins[1]+"px")};this.getElementSizeX=function(){return this.sizeX*this.gridster.curColWidth-this.gridster.margins[1]};this.getElementSizeY=function(){return this.sizeY*this.gridster.curRowHeight-this.gridster.margins[0]}}).factory("GridsterTouch",[function(){return function(n,t,i,r){var f={},o=function(n){if(Object.keys)return Object.keys(n).length;var t=0;for(var i in n)++t;return t},l=function(n){for(var r=0,i=0,u=navigator.userAgent.match(/\bMSIE\b/),t=n;t!=null;t=t.offsetParent)u&&(!document.documentMode||document.documentMode<8)&&t.currentStyle.position==="relative"&&t.offsetParent&&t.offsetParent.currentStyle.position==="relative"&&t.offsetLeft===t.offsetParent.offsetLeft?i+=t.offsetTop:(r+=t.offsetLeft,i+=t.offsetTop);return{x:r,y:i}},s=l(n),u=function(h){var v,k,b,c,a,d,g,y,p,w;if(h.type!=="mousemove"||o(f)!==0){for(v=!0,k=h.changedTouches?h.changedTouches:[h],b=0;b<k.length;++b){if(c=k[b],a=typeof c.identifier!="undefined"?c.identifier:typeof c.pointerId!="undefined"?c.pointerId:1,typeof c.pageX=="undefined")if(c.pageX=c.offsetX+s.x,c.pageY=c.offsetY+s.y,c.srcElement.offsetParent===n&&document.documentMode&&document.documentMode===8&&c.type==="mousedown")c.pageX+=c.srcElement.offsetLeft,c.pageY+=c.srcElement.offsetTop;else if(c.srcElement!==n&&!document.documentMode||document.documentMode<8){for(d=-2,g=-2,y=c.srcElement;y!==null;y=y.parentNode)d+=y.scrollLeft?y.scrollLeft:0,g+=y.scrollTop?y.scrollTop:0;c.pageX=c.clientX+d;c.pageY=c.clientY+g}p=c.pageX;w=c.pageY;h.type.match(/(start|down)$/i)?(s=l(n),f[a]&&(r&&r({target:h.target,which:h.which,pointerId:a,pageX:p,pageY:w}),delete f[a]),t&&v&&(v=t({target:h.target,which:h.which,pointerId:a,pageX:p,pageY:w})),f[a]={x:p,y:w},n.msSetPointerCapture?n.msSetPointerCapture(a):h.type==="mousedown"&&o(f)===1&&(e?n.setCapture(!0):(document.addEventListener("mousemove",u,!1),document.addEventListener("mouseup",u,!1)))):h.type.match(/move$/i)?!f[a]||f[a].x===p&&f[a].y===w||(i&&v&&(v=i({target:h.target,which:h.which,pointerId:a,pageX:p,pageY:w})),f[a].x=p,f[a].y=w):f[a]&&h.type.match(/(up|end|cancel)$/i)&&(r&&v&&(v=r({target:h.target,which:h.which,pointerId:a,pageX:p,pageY:w})),delete f[a],n.msReleasePointerCapture?n.msReleasePointerCapture(a):h.type==="mouseup"&&o(f)===0&&(e?n.releaseCapture():(document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",u,!1))))}v&&(h.preventDefault&&h.preventDefault(),h.preventManipulation&&h.preventManipulation(),h.preventMouseEvent&&h.preventMouseEvent())}},e=!1,h,c;return this.enable=function(){window.navigator.msPointerEnabled?(n.addEventListener("MSPointerDown",u,!1),n.addEventListener("MSPointerMove",u,!1),n.addEventListener("MSPointerUp",u,!1),n.addEventListener("MSPointerCancel",u,!1),typeof n.style.msContentZooming!="undefined"&&(h=n.style.msContentZooming,n.style.msContentZooming="none"),typeof n.style.msTouchAction!="undefined"&&(c=n.style.msTouchAction,n.style.msTouchAction="none")):n.addEventListener?(n.addEventListener("touchstart",u,!1),n.addEventListener("touchmove",u,!1),n.addEventListener("touchend",u,!1),n.addEventListener("touchcancel",u,!1),n.addEventListener("mousedown",u,!1),n.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&(e=!0,n.addEventListener("mousemove",u,!1),n.addEventListener("mouseup",u,!1))):n.attachEvent&&n.setCapture&&(e=!0,n.attachEvent("onmousedown",function(){return u(window.event),window.event.returnValue=!1,!1}),n.attachEvent("onmousemove",function(){return u(window.event),window.event.returnValue=!1,!1}),n.attachEvent("onmouseup",function(){return u(window.event),window.event.returnValue=!1,!1}))},this.disable=function(){window.navigator.msPointerEnabled?(n.removeEventListener("MSPointerDown",u,!1),n.removeEventListener("MSPointerMove",u,!1),n.removeEventListener("MSPointerUp",u,!1),n.removeEventListener("MSPointerCancel",u,!1),h&&(n.style.msContentZooming=h),c&&(n.style.msTouchAction=c)):n.removeEventListener?(n.removeEventListener("touchstart",u,!1),n.removeEventListener("touchmove",u,!1),n.removeEventListener("touchend",u,!1),n.removeEventListener("touchcancel",u,!1),n.removeEventListener("mousedown",u,!1),n.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&(e=!0,n.removeEventListener("mousemove",u,!1),n.removeEventListener("mouseup",u,!1))):n.detachEvent&&n.setCapture&&(e=!0,n.detachEvent("onmousedown"),n.detachEvent("onmousemove"),n.detachEvent("onmouseup"))},this}}]).factory("GridsterDraggable",["$document","$window","GridsterTouch",function(t,i,r){function u(u,f,e,o,s){function st(t){if(ot.indexOf(t.target.nodeName.toLowerCase())!==-1)return!1;var i=n.element(t.target);if(i.hasClass("gridster-item-resizable-handler")||i.attr("onclick")||i.attr("ng-click")||i.closest&&i.closest(".gridster-no-drag").length)return!1;switch(t.which){case 2:case 3:return}return nt=t.pageX,tt=t.pageY,c=parseInt(u.css("left"),10),l=parseInt(u.css("top"),10),b=u[0].offsetWidth,k=u[0].offsetHeight,ft=o.col,et=o.row,lt(t),!0}function ht(n){var o,t,i,r,f;return!u.hasClass("gridster-item-moving")||u.hasClass("gridster-item-resizing")?!1:(o=e.curWidth-1,d=n.pageX,g=n.pageY,t=d-nt+y,i=g-tt+p,y=p=0,nt=d,tt=g,r=t,f=i,c+r<ut?(t=ut-c,y=r-t):c+b+r>o&&(t=o-c-b,y=r-t),l+f<it?(i=it-l,p=f-i):l+k+f>rt&&(i=rt-l-k,p=f-i),c+=t,l+=i,u.css({top:l+"px",left:c+"px"}),at(n),!0)}function ct(n){return!u.hasClass("gridster-item-moving")||u.hasClass("gridster-item-resizing")?!1:(y=p=0,vt(n),!0)}function lt(n){u.addClass("gridster-item-moving");e.movingItem=o;e.updateHeight(o.sizeY);f.$apply(function(){e.draggable&&e.draggable.start&&e.draggable.start(n,u,s)})}function at(n){var k=o.row,d=o.col,g=e.draggable&&e.draggable.drag,p=e.draggable.scrollSensitivity,w=e.draggable.scrollSpeed,v=e.pixelsToRows(l),y=e.pixelsToColumns(c),a=e.getItems(v,y,o.sizeX,o.sizeY,o),nt=a.length!==0,b,ut,r,ft;if(e.swapping===!0&&nt){var t=e.getBoundingBox(a),et=t.sizeX===o.sizeX&&t.sizeY===o.sizeY,ot=t.row===k,st=t.col===d,ht=t.row===v&&t.col===y,tt=ot||st;if(et&&a.length===1){if(ht)e.swapItems(o,a[0]);else if(tt)return}else if(t.sizeX<=o.sizeX&&t.sizeY<=o.sizeY&&tt){var ct=o.row<=v?o.row:v+o.sizeY,lt=o.col<=y?o.col:y+o.sizeX,it=ct-t.row,rt=lt-t.col;for(b=0,ut=a.length;b<ut;++b)r=a[b],ft=e.getItems(r.row+it,r.col+rt,r.sizeX,r.sizeY,o),ft.length===0&&e.putItem(r,r.row+it,r.col+rt)}}e.pushing===!1&&nt||(o.row=v,o.col=y);n.pageY-h.body.scrollTop<p?h.body.scrollTop=h.body.scrollTop-w:i.innerHeight-(n.pageY-h.body.scrollTop)<p&&(h.body.scrollTop=h.body.scrollTop+w);n.pageX-h.body.scrollLeft<p?h.body.scrollLeft=h.body.scrollLeft-w:i.innerWidth-(n.pageX-h.body.scrollLeft)<p&&(h.body.scrollLeft=h.body.scrollLeft+w);(g||k!==o.row||d!==o.col)&&f.$apply(function(){g&&e.draggable.drag(n,u,s)})}function vt(n){u.removeClass("gridster-item-moving");var t=e.pixelsToRows(l),i=e.pixelsToColumns(c);(e.pushing!==!1||e.getItems(t,i,o.sizeX,o.sizeY,o).length===0)&&(o.row=t,o.col=i);e.movingItem=null;o.setPosition(o.row,o.col);f.$apply(function(){e.draggable&&e.draggable.stop&&e.draggable.stop(n,u,s)})}var c,l,b,k,d=0,g=0,nt=0,tt=0,y=0,p=0,it=0,rt=9999,ut=0,h=t[0],ft,et,ot=["select","input","textarea","button"],w=null,v=null,a=[];this.enable=function(){w!==!0&&(w=!0,u.ready(function(){var i,f,t,o;if(w===!0){for(i=0,f=a.length;i<f;++i)a[i].disable();for(a=[],e.draggable&&e.draggable.handle?(v=n.element(u[0].querySelectorAll(e.draggable.handle)),v.length===0&&(v=u)):v=u,t=0,o=v.length;t<o;++t)a[t]=new r(v[t],st,ht,ct),a[t].enable()}}))};this.disable=function(){if(w!==!1){w=!1;for(var n=0,t=a.length;n<t;++n)a[n].disable();a=[]}};this.toggle=function(n){n?this.enable():this.disable()};this.destroy=function(){this.disable()}}return u}]).factory("GridsterResizable",["GridsterTouch",function(t){function i(i,r,u,f,e){function a(o){function st(n){switch(n.which){case 2:case 3:return}return k=u.draggable.enabled,k&&(u.draggable.enabled=!1,r.$broadcast("gridster-draggable-changed",u)),tt=n.pageX,it=n.pageY,c=parseInt(i.css("left"),10),l=parseInt(i.css("top"),10),s=i[0].offsetWidth,h=i[0].offsetHeight,et=f.sizeX,ot=f.sizeY,ht(n),!0}function ht(n){i.addClass("gridster-item-moving");i.addClass("gridster-item-resizing");u.movingItem=f;f.setElementSizeX();f.setElementSizeY();f.setElementPosition();u.updateHeight(1);r.$apply(function(){u.resizable&&u.resizable.start&&u.resizable.start(n,i,e)})}function ct(n){var o=u.curWidth-1,t,r,f,e;return g=n.pageX,nt=n.pageY,t=g-tt+a,r=nt-it+v,a=v=0,tt=g,it=nt,f=r,e=t,p.indexOf("n")>=0&&(h-f<w()?(r=h-w(),v=f-r):l+f<rt&&(r=rt-l,v=f-r),l+=r,h-=r),p.indexOf("s")>=0&&(h+f<w()?(r=w()-h,v=f-r):l+h+f>ut&&(r=ut-l-h,v=f-r),h+=r),p.indexOf("w")>=0&&(s-e<b()?(t=s-b(),a=e-t):c+e<ft&&(t=ft-c,a=e-t),c+=t,s-=t),p.indexOf("e")>=0&&(s+e<b()?(t=b()-s,a=e-t):c+s+e>o&&(t=o-c-s,a=e-t),s+=t),i.css({top:l+"px",left:c+"px",width:s+"px",height:h+"px"}),at(n),!0}function lt(n){return u.draggable.enabled!==k&&(u.draggable.enabled=k,r.$broadcast("gridster-draggable-changed",u)),a=v=0,vt(n),!0}function at(n){var k=f.row,d=f.col,g=f.sizeX,nt=f.sizeY,p=u.resizable&&u.resizable.resize,a=f.col,t,v,y,w,b;["w","nw","sw"].indexOf(o)!==-1&&(a=u.pixelsToColumns(c,!1));t=f.row;["n","ne","nw"].indexOf(o)!==-1&&(t=u.pixelsToRows(l,!1));v=f.sizeX;["n","s"].indexOf(o)===-1&&(v=u.pixelsToColumns(s,!0));y=f.sizeY;["e","w"].indexOf(o)===-1&&(y=u.pixelsToRows(h,!0));w=t>-1&&a>-1&&v+a<=u.columns&&y+t<=u.maxRows;w&&(u.pushing!==!1||u.getItems(t,a,v,y,f).length===0)&&(f.row=t,f.col=a,f.sizeX=v,f.sizeY=y);b=f.row!==k||f.col!==d||f.sizeX!==g||f.sizeY!==nt;(p||b)&&r.$apply(function(){p&&u.resizable.resize(n,i,e)})}function vt(n){i.removeClass("gridster-item-moving");i.removeClass("gridster-item-resizing");u.movingItem=null;f.setPosition(f.row,f.col);f.setSizeY(f.sizeY);f.setSizeX(f.sizeX);r.$apply(function(){u.resizable&&u.resizable.stop&&u.resizable.stop(n,i,e)})}var p=o,c,l,s,h,g=0,nt=0,tt=0,it=0,a=0,v=0,rt=0,ut=9999,ft=0,w=function(){return(f.minSizeY?f.minSizeY:1)*u.curRowHeight-u.margins[0]},b=function(){return(f.minSizeX?f.minSizeX:1)*u.curColWidth-u.margins[1]},et,ot,k,y=null,d;this.enable=function(){y||(y=n.element('<div class="gridster-item-resizable-handler handle-'+p+'"><\/div>'),i.append(y));d=new t(y[0],st,ct,lt);d.enable()};this.disable=function(){y&&(y.remove(),y=null);d.disable();d=undefined};this.destroy=function(){this.disable()}}var o=[],h=u.resizable.handles,s,c,l;for(typeof h=="string"&&(h=u.resizable.handles.split(",")),s=!1,c=0,l=h.length;c<l;c++)o.push(new a(h[c]));this.enable=function(){if(!s){for(var n=0,t=o.length;n<t;n++)o[n].enable();s=!0}};this.disable=function(){if(s){for(var n=0,t=o.length;n<t;n++)o[n].disable();s=!1}};this.toggle=function(n){n?this.enable():this.disable()};this.destroy=function(){for(var n=0,t=o.length;n<t;n++)o[n].destroy()}}return i}]).factory("gridsterDebounce",function(){return function(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;i||n.apply(u,f)},o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(u,f)}}}).directive("gridsterItem",["$parse","GridsterDraggable","GridsterResizable","gridsterDebounce",function(n,t,i,r){return{scope:!0,restrict:"EA",controller:"GridsterItemCtrl",controllerAs:"gridsterItem",require:["^gridster","gridsterItem"],link:function(u,f,e,o){function ut(){s.setPosition(s.row,s.col);h.row&&h.row.assign&&h.row.assign(u,s.row);h.col&&h.col.assign&&h.col.assign(u,s.col)}function ft(){var t=s.setSizeX(s.sizeX,!0),n;t&&h.sizeX&&h.sizeX.assign&&h.sizeX.assign(u,s.sizeX);n=s.setSizeY(s.sizeY,!0);n&&h.sizeY&&h.sizeY.assign&&h.sizeY.assign(u,s.sizeY);(t||n)&&(s.gridster.moveOverlappingItems(s),c.layoutChanged(),u.$broadcast("gridster-item-resized",s))}function et(){var i=document.createElement("div"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var t in n)if(i.style[t]!==undefined)return n[t]}var a=e.gridsterItem,l,c=o[0],s=o[1],v,y,d,g,w,it;u.gridster=c;a?(v=n(a),l=v(u)||{},!l&&v.assign&&(l={row:s.row,col:s.col,sizeX:s.sizeX,sizeY:s.sizeY,minSizeX:0,minSizeY:0,maxSizeX:null,maxSizeY:null},v.assign(u,l))):l=e;s.init(f,c);f.addClass("gridster-item");var b=["minSizeX","maxSizeX","minSizeY","maxSizeY","sizeX","sizeY","row","col"],h={},k=[],rt=function(t){var i,r;if(typeof l[t]=="string")i=l[t];else if(typeof l[t.toLowerCase()]=="string")i=l[t.toLowerCase()];else if(a)i=a+"."+t;else return;k.push('"'+t+'":'+i);h[t]=n(i);r=h[t](u);typeof r=="number"&&(s[t]=r)};for(y=0,d=b.length;y<d;++y)rt(b[y]);g="{"+k.join(",")+"}";u.$watchCollection(g,function(n,t){var r,i,u;for(r in n)(i=n[r],u=t[r],u!==i)&&(i=parseInt(i,10),isNaN(i)||(s[r]=i))});u.$watch(function(){return s.row+","+s.col},ut);u.$watch(function(){return s.sizeY+","+s.sizeX+","+s.minSizeX+","+s.maxSizeX+","+s.minSizeY+","+s.maxSizeY},ft);var nt=new t(f,u,c,s,l),tt=new i(f,u,c,s,l),p=function(){tt.toggle(!c.isMobile&&c.resizable&&c.resizable.enabled)};p();w=function(){nt.toggle(!c.isMobile&&c.draggable&&c.draggable.enabled)};w();u.$on("gridster-draggable-changed",w);u.$on("gridster-resizable-changed",p);u.$on("gridster-resized",p);u.$on("gridster-mobile-changed",function(){p();w()});it=r(function(){u.$apply(function(){u.$broadcast("gridster-item-transition-end",s)})},50);f.on(et(),it);return u.$broadcast("gridster-item-initialized",s),u.$on("$destroy",function(){try{tt.destroy();nt.destroy()}catch(n){}try{c.removeItem(s)}catch(n){}try{s.destroy()}catch(n){}})}}}]).directive("gridsterNoDrag",function(){return{restrict:"A",link:function(n,t){t.addClass("gridster-no-drag")}}})});
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="textAngular"),function(){"use strict";var n={ie:function(){for(var i,n=3,t=document.createElement("div"),r=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->",r[0];);return n>4?n:i}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},o=!1,i,h,c,l,a,v,u,r,e,f;n.webkit&&(document.addEventListener("mousedown",function(n){var u=n||window.event,i=u.target,r,t;if(o&&i!==null){for(r=!1,t=i;t!==null&&t.tagName.toLowerCase()!=="html"&&!r;)r=t.contentEditable==="true",t=t.parentNode;r||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),i.focus(),i.select&&i.select())}o=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">'))}));var t=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,y=/^(ul|li|ol)$/i,s=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;if(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),n.ie>8||n.ie===undefined){for(u=document.styleSheets,r=0;r<u.length;r++)if((u[r].media.length===0||u[r].media.mediaText.match(/(all|screen)/ig))&&u[r].href&&u[r].href.match(/textangular\.(min\.|)css/ig)){i=u[r];break}i||(i=function(){var t=document.createElement("style");return n.webkit&&t.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(t),t.sheet}());h=function(n,t){return l(i,n,t)};l=function(n,t,r){var u,f;return n.cssRules?u=Math.max(n.cssRules.length-1,0):n.rules&&(u=Math.max(n.rules.length-1,0)),n.insertRule?n.insertRule(t+"{"+r+"}",u):n.addRule(t,r,u),i.rules?f=i.rules[u]:i.cssRules&&(f=i.cssRules[u]),f};v=function(n,t){for(var r,i=0;i<t.length;i++)if(t[i].cssText===n.cssText){r=i;break}return r};c=function(n){a(i,n)};a=function(n,t){var i=n.cssRules||n.rules,r;i&&i.length!==0&&(r=v(t,i),n.removeRule?n.removeRule(r):n.deleteRule(r))}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(t){return t?t===""?n.ie===undefined?"div":n.ie<=8?"P":"p":n.ie<=8?t.toUpperCase():t:n.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(n,t){return function(i){var r=angular.element("<div><\/div>");return r[0].innerHTML=i,angular.forEach(n,function(n){var i=[];n.selector&&n.selector!==""?i=r.find(n.selector):n.customAttribute&&n.customAttribute!==""&&(i=t.getByAttribute(r,n.customAttribute));angular.forEach(i,function(t){t=angular.element(t);n.selector&&n.selector!==""&&n.customAttribute&&n.customAttribute!==""?t.attr(n.customAttribute)!==undefined&&n.renderLogic(t):n.renderLogic(t)})}),r[0].innerHTML}}]).factory("taFixChrome",function(){return function(n){if(!n||!angular.isString(n)||n.length<=0)return n;for(var e=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/ig,t,i,r,f="",u=0;t=e.exec(n);)i=t[3]||t[4],i&&i.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(i=i.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/ig,""),r="<"+t[1].trim(),i.trim().length>0&&(r+=" style="+t[2].substring(0,1)+i+t[2].substring(0,1)),r+=t[5].trim()+">",f+=n.substring(u,t.index)+r,u=t.index+t[0].length);return f+=n.substring(u),u>0?f.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/ig,"$1"):n}}).factory("taSanitize",["$sanitize",function(n){function o(n,t){for(var i=0,r=0,u,f=/<[^>]*>/ig;u=f.exec(n);)if(r=u.index,u[0].substr(1,1)==="/")if(i===0)break;else i--;else i++;return t+n.substring(0,r)+angular.element(t)[0].outerHTML.substring(t.length)+n.substring(r)}function s(n){var y,p;if(!n||!angular.isString(n)||n.length<=0)return n;for(var u,w=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/ig,i,v,r,l,e="",a,h="",c=0;i=w.exec(n);)if(r=i[3]||i[4],y=new RegExp(f,"i"),angular.isString(r)&&y.test(r)){for(l="",p=new RegExp(f,"ig");v=p.exec(r);)for(u=0;u<t.length;u++)!v[u*2+2]||(l+="<"+t[u].tag+">");a=s(n.substring(c,i.index));h+=e.length>0?o(a,e):a;r=r.replace(new RegExp(f,"ig"),"");h+="<"+i[1].trim();r.length>0&&(h+=' style="'+r+'"');h+=i[5]+">";c=i.index+i[0].length;e=l}return h+(e.length>0?o(n.substring(c),e):n.substring(c))}function h(n){var i;if(!n||!angular.isString(n)||n.length<=0)return n;for(var f=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/ig,t,r="",u=0;t=f.exec(n);)r+=n.substring(u,t.index),u=t.index+t[0].length,i="<"+t[1]+t[5],/style=("([^"]+)"|'([^']+)')/ig.test(i)?i=i.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(t[3]||t[4])+';"'):i+=' style="text-align:'+(t[3]||t[4])+';"',i+=">",r+=i;return r+n.substring(u)}for(var r,u,f,t=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],e=[],i=0;i<t.length;i++){for(r="("+t[i].property+":\\s*(",u=0;u<t[i].values.length;u++)u>0&&(r+="|"),r+=t[i].values[u];r+=");)";e.push(r)}return f="("+e.join("|")+")",function(t,i,r){var u;if(!r)try{t=s(t)}catch(v){}t=h(t);try{u=n(t);r&&(u=t)}catch(v){u=i||""}var l=u.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/ig),e=u.replace(/(&#(9|10);)*/ig,""),a=/<pre[^>]*>.*?<\/pre[^>]*>/ig,o=0,c=0,f;for(u="";(f=a.exec(e))!==null&&o<l.length;)u+=e.substring(c,f.index)+l[o],c=f.index+f[0].length,o++;return u+e.substring(c)}}]).factory("taToolExecuteAction",["$q","$log",function(n,t){return function(i){i!==undefined&&(this.$editor=function(){return i});var r=n.defer(),e=r.promise,u=this.$editor(),f;try{f=this.action(r,u.startAction());e["finally"](function(){u.endAction.call(u)})}catch(o){t.error(o)}(f||f===undefined)&&r.resolve()}}]);angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(n,i,r){var u=function(t,i){for(var u,f=t.find("li"),r=f.length-1;r>=0;r--)u=angular.element("<"+i+">"+f[r].innerHTML+"<\/"+i+">"),t.after(u);t.remove();n.setSelectionToElementEnd(u[0])},e=function(t){/(<br(|\/)>)$/i.test(t.innerHTML.trim())?n.setSelectionBeforeElement(angular.element(t).find("br")[0]):n.setSelectionToElementEnd(t)},f=function(n,t){var i=angular.element("<"+t+">"+n[0].innerHTML+"<\/"+t+">");n.after(i);n.remove();e(i.find("li")[0])},o=function(n,t,r){for(var f,o="",u=0;u<n.length;u++)o+="<"+i("li")+">"+n[u].innerHTML+"<\/"+i("li")+">";f=angular.element("<"+r+">"+o+"<\/"+r+">");t.after(f);t.remove();e(f.find("li")[0])};return function(e,s){return e=i(e),function(h,c,l,a){var v,w,g,p,ht,nt,tt,it=angular.element("<"+e+">"),b,d,k,st,et,ft,ot,rt,ut,at;try{tt=n.getSelectionElement()}catch(yt){}if(b=angular.element(tt),tt!==undefined)if(d=tt.tagName.toLowerCase(),h.toLowerCase()==="insertorderedlist"||h.toLowerCase()==="insertunorderedlist"){if(k=i(h.toLowerCase()==="insertorderedlist"?"ol":"ul"),d===k)return u(b,e);if(d==="li"&&b.parent()[0].tagName.toLowerCase()===k&&b.parent().children().length===1)return u(b.parent(),e);if(d==="li"&&b.parent()[0].tagName.toLowerCase()!==k&&b.parent().children().length===1)return f(b.parent(),k);if(d.match(t)&&!b.hasClass("ta-bind"))return d==="ol"||d==="ul"?f(b,k):(st=!1,angular.forEach(b.children(),function(n){n.tagName.match(t)&&(st=!0)}),st?o(b.children(),b,k):o([angular.element("<div>"+tt.innerHTML+"<\/div>")[0]],b,k));if(d.match(t)){if(p=n.getOnlySelectedElements(),p.length===0)w=angular.element("<"+k+"><li>"+tt.innerHTML+"<\/li><\/"+k+">"),b.html(""),b.append(w);else{if(p.length===1&&(p[0].tagName.toLowerCase()==="ol"||p[0].tagName.toLowerCase()==="ul"))return p[0].tagName.toLowerCase()===k?u(angular.element(p[0]),e):f(angular.element(p[0]),k);for(g="",et=[],v=0;v<p.length;v++)if(p[v].nodeType!==3){if(ft=angular.element(p[v]),p[v].tagName.toLowerCase()==="li")continue;else g+=p[v].tagName.toLowerCase()==="ol"||p[v].tagName.toLowerCase()==="ul"?ft[0].innerHTML:p[v].tagName.toLowerCase()==="span"&&(p[v].childNodes[0].tagName.toLowerCase()==="ol"||p[v].childNodes[0].tagName.toLowerCase()==="ul")?ft[0].childNodes[0].innerHTML:"<"+i("li")+">"+ft[0].innerHTML+"<\/"+i("li")+">";et.unshift(ft)}w=angular.element("<"+k+">"+g+"<\/"+k+">");et.pop().replaceWith(w);angular.forEach(et,function(n){n.remove()})}n.setSelectionToElementEnd(w[0]);return}}else{if(h.toLowerCase()==="formatblock"){for(nt=l.toLowerCase().replace(/[<>]/ig,""),nt.trim()==="default"&&(nt=e,l="<"+e+">"),w=d==="li"?b.parent():b;!w[0].tagName||!w[0].tagName.match(t)&&!w.parent().attr("contenteditable");)w=w.parent(),d=(w[0].tagName||"").toLowerCase();if(d===nt){for(p=w.children(),ot=!1,v=0;v<p.length;v++)ot=ot||p[v].tagName.match(t);ot?(w.after(p),ht=w.next(),w.remove(),w=ht):(it.append(w[0].childNodes),w.after(it),w.remove(),w=it)}else if(w.parent()[0].tagName.toLowerCase()!==nt||w.parent().hasClass("ta-bind"))if(d.match(y))w.wrap(l);else{for(p=n.getOnlySelectedElements(),p.length===0&&(p=[w[0]]),v=0;v<p.length;v++)if(p[v].nodeType===3||!p[v].tagName.match(t))while(p[v].nodeType===3||!p[v].tagName||!p[v].tagName.match(t))p[v]=p[v].parentNode;if(angular.element(p[0]).hasClass("ta-bind"))w=angular.element(l),w[0].innerHTML=p[0].innerHTML,p[0].innerHTML=w[0].outerHTML;else if(nt==="blockquote"){for(g="",v=0;v<p.length;v++)g+=p[v].outerHTML;for(w=angular.element(l),w[0].innerHTML=g,p[0].parentNode.insertBefore(w[0],p[0]),v=p.length-1;v>=0;v--)p[v].parentNode&&p[v].parentNode.removeChild(p[v])}else for(v=0;v<p.length;v++)w=angular.element(l),w[0].innerHTML=p[v].innerHTML,p[v].parentNode.insertBefore(w[0],p[v]),p[v].parentNode.removeChild(p[v])}else{for(rt=w.parent(),ut=rt.contents(),v=0;v<ut.length;v++)rt.parent().hasClass("ta-bind")&&ut[v].nodeType===3&&(it=angular.element("<"+e+">"),it[0].innerHTML=ut[v].outerHTML,ut[v]=it[0]),rt.parent()[0].insertBefore(ut[v],rt[0]);rt.remove()}n.setSelectionToElementEnd(w[0]);return}if(h.toLowerCase()==="createlink"){var ct='<a href="'+l+'" target="'+(a.a.target?a.a.target:"")+'">',lt="<\/a>",vt=n.getSelection();vt.collapsed?n.insertHtml(ct+l+lt,s):rangy.getSelection().getRangeAt(0).canSurroundContents()&&(at=angular.element(ct+lt)[0],rangy.getSelection().getRangeAt(0).surroundContents(at));return}if(h.toLowerCase()==="inserthtml"){n.insertHtml(l,s);return}}try{r[0].execCommand(h,c,l)}catch(yt){}}}}]).service("taSelection",["$window","$document","taDOM",function(n,i,r){var f=i[0],u=n.rangy,o=function(n,t){return n.tagName&&n.tagName.match(/^br$/i)&&t===0&&!n.previousSibling?{element:n.parentNode,offset:0}:{element:n,offset:t}},e={getSelection:function(){var t=u.getSelection().getRangeAt(0),n=t.commonAncestorContainer,i={start:o(t.startContainer,t.startOffset),end:o(t.endContainer,t.endOffset),collapsed:t.collapsed};return n=n.nodeType===3?n.parentNode:n,i.container=n.parentNode===i.start.element||n.parentNode===i.end.element?n.parentNode:n,i},getOnlySelectedElements:function(){var t=u.getSelection().getRangeAt(0),n=t.commonAncestorContainer;return n=n.nodeType===3?n.parentNode:n,t.getNodes([1],function(t){return t.parentNode===n})},getSelectionElement:function(){return e.getSelection().container},setSelection:function(n,t,i){var r=u.createRange();r.setStart(n,t);r.setEnd(n,i);u.getSelection().setSingleRange(r)},setSelectionBeforeElement:function(n){var t=u.createRange();t.selectNode(n);t.collapse(!0);u.getSelection().setSingleRange(t)},setSelectionAfterElement:function(n){var t=u.createRange();t.selectNode(n);t.collapse(!1);u.getSelection().setSingleRange(t)},setSelectionToElementStart:function(n){var t=u.createRange();t.selectNodeContents(n);t.collapse(!0);u.getSelection().setSingleRange(t)},setSelectionToElementEnd:function(n){var t=u.createRange();t.selectNodeContents(n);t.collapse(!1);n.childNodes&&n.childNodes[n.childNodes.length-1]&&n.childNodes[n.childNodes.length-1].nodeName==="br"&&(t.startOffset=t.endOffset=t.startOffset-1);u.getSelection().setSingleRange(t)},insertHtml:function(n,i){var o,c,l,k,p,a,g,w=angular.element("<div>"+n+"<\/div>"),h=u.getSelection().getRangeAt(0),v=f.createDocumentFragment(),y=w[0].childNodes,b=!0,d,nt;if(y.length>0){for(k=[],l=0;l<y.length;l++)y[l].nodeName.toLowerCase()==="p"&&y[l].innerHTML.trim()===""||y[l].nodeType===3&&y[l].nodeValue.trim()===""||(b=b&&!t.test(y[l].nodeName),k.push(y[l]));for(d=0;d<k.length;d++)a=v.appendChild(k[d]);!b&&h.collapsed&&/^(|<br(|\/)>)$/i.test(h.startContainer.innerHTML)&&h.selectNode(h.startContainer)}else b=!0,a=v=f.createTextNode(n);if(b)h.deleteContents();else if(h.collapsed&&h.startContainer!==i)if(h.startContainer.innerHTML&&h.startContainer.innerHTML.match(/^<[^>]*>$/i))o=h.startContainer,h.startOffset===1?(h.setStartAfter(o),h.setEndAfter(o)):(h.setStartBefore(o),h.setEndBefore(o));else{if(h.startContainer.nodeType===3&&h.startContainer.parentNode!==i)for(o=h.startContainer.parentNode,c=o.cloneNode(),r.splitNodes(o.childNodes,o,c,h.startContainer,h.startOffset);!s.test(o.nodeName);)angular.element(o).after(c),o=o.parentNode,nt=c,c=o.cloneNode(),r.splitNodes(o.childNodes,o,c,nt);else o=h.startContainer,c=o.cloneNode(),r.splitNodes(o.childNodes,o,c,undefined,undefined,h.startOffset);if(angular.element(o).after(c),h.setStartAfter(o),h.setEndAfter(o),/^(|<br(|\/)>)$/i.test(o.innerHTML.trim())&&(h.setStartBefore(o),h.setEndBefore(o),angular.element(o).remove()),/^(|<br(|\/)>)$/i.test(c.innerHTML.trim())&&angular.element(c).remove(),o.nodeName.toLowerCase()==="li"){for(g=f.createDocumentFragment(),p=0;p<v.childNodes.length;p++)w=angular.element("<li>"),r.transferChildNodes(v.childNodes[p],w[0]),r.transferNodeAttributes(v.childNodes[p],w[0]),g.appendChild(w[0]);v=g;a&&(a=v.childNodes[v.childNodes.length-1],a=a.childNodes[a.childNodes.length-1])}}else h.deleteContents();h.insertNode(v);a&&e.setSelectionToElementEnd(a)}};return e}]).service("taDOM",function(){var n={getByAttribute:function(t,i){var r=[],u=t.children();return u.length&&angular.forEach(u,function(t){r=r.concat(n.getByAttribute(angular.element(t),i))}),t.attr(i)!==undefined&&r.push(t),r},transferChildNodes:function(n,t){for(t.innerHTML="";n.childNodes.length>0;)t.appendChild(n.childNodes[0]);return t},splitNodes:function(t,i,r,u,f,e){if(!u&&isNaN(e))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var o=document.createDocumentFragment(),s=document.createDocumentFragment(),h=0;t.length>0&&(isNaN(e)||e!==h)&&t[0]!==u;)o.appendChild(t[0]),h++;for(!isNaN(f)&&f>=0&&t[0]&&(o.appendChild(document.createTextNode(t[0].nodeValue.substring(0,f))),t[0].nodeValue=t[0].nodeValue.substring(f));t.length>0;)s.appendChild(t[0]);n.transferChildNodes(o,i);n.transferChildNodes(s,r)},transferNodeAttributes:function(n,t){for(var i=0;i<n.attributes.length;i++)t.setAttribute(n.attributes[i].name,n.attributes[i].value);return t}};return n});angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(n,t,i,r){var u=parseInt(n.$eval(i.taMaxText));if(isNaN(u))throw"Max text must be an integer";i.$observe("taMaxText",function(n){if(u=parseInt(n),isNaN(u))throw"Max text must be an integer";r.$dirty&&r.$validate()});r.$validators.taMaxText=function(n){var t=angular.element("<div/>");return t.html(n),t.text().length<=u}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(n,t,i,r){var u=parseInt(n.$eval(i.taMinText));if(isNaN(u))throw"Min text must be an integer";i.$observe("taMinText",function(n){if(u=parseInt(n),isNaN(u))throw"Min text must be an integer";r.$dirty&&r.$validate()});r.$validators.taMinText=function(n){var t=angular.element("<div/>");return t.html(n),!t.text().length||t.text().length>=u}}}});angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var n=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(t){return function(i){if(!i)return!0;var u=/(^[^<]|>)[^<]/i.exec(i),r;return(u?r=u.index:(i=i.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),r=i.indexOf(">")),i=i.trim().substring(r,r+100),/^[^<>]+$/i.test(i))?!1:i.length===0||i===t||/^>(\s|&nbsp;)*<\/[^>]+>$/ig.test(i)?!0:/>\s*[^\s<]/i.test(i)||n.test(i)?!1:!0}}}]).directive("taButton",[function(){return{link:function(n,t){t.attr("unselectable","on");t.on("mousedown",function(n,t){return t&&angular.extend(n,t),n.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(i,r,u,f,l,a,v,y,p,w,b,k,d,g){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(a,nt,tt,it){function nr(n){var t;return gi.forEach(function(i){if(i.keyCode===n.keyCode){var r=(n.metaKey?ht:0)+(n.ctrlKey?st:0)+(n.shiftKey?lt:0)+(n.altKey?ct:0);if(i.forbiddenModifiers&r)return;i.mustHaveModifiers.every(function(n){return r&n})&&(t=i.specialKey)}}),t}var rt=it[0],ii=it[1]||{},ft=nt.attr("contenteditable")!==undefined&&nt.attr("contenteditable"),ai=ft||nt[0].tagName.toLowerCase()==="textarea"||nt[0].tagName.toLowerCase()==="input",ut=!1,yt=!1,gt=!1,vi=tt.taUnsafeSanitizer||w.disableSanitizer,yi,ki=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,di=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,ri,et,ui,st=1,ht=2,ct=4,lt=8,gi=[{specialKey:"UndoKey",forbiddenModifiers:ct+lt,mustHaveModifiers:[ht+st],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:ct,mustHaveModifiers:[ht+st,lt],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:ct+lt,mustHaveModifiers:[ht+st],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:ht+lt+ct+st,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:ht+ct+st,mustHaveModifiers:[lt],keyCode:9}],ni,fi,pt,ei,bt,si,hi,bi;tt.taDefaultWrap===undefined&&(tt.taDefaultWrap="p");tt.taDefaultWrap===""?(et="",ui=n.ie===undefined?"<div><br><\/div>":n.ie>=11?"<p><br><\/p>":n.ie<=8?"<P>&nbsp;<\/P>":"<p>&nbsp;<\/p>"):(et=n.ie===undefined||n.ie>=11?"<"+tt.taDefaultWrap+"><br><\/"+tt.taDefaultWrap+">":n.ie<=8?"<"+tt.taDefaultWrap.toUpperCase()+"><\/"+tt.taDefaultWrap.toUpperCase()+">":"<"+tt.taDefaultWrap+"><\/"+tt.taDefaultWrap+">",ui=n.ie===undefined||n.ie>=11?"<"+tt.taDefaultWrap+"><br><\/"+tt.taDefaultWrap+">":n.ie<=8?"<"+tt.taDefaultWrap.toUpperCase()+">&nbsp;<\/"+tt.taDefaultWrap.toUpperCase()+">":"<"+tt.taDefaultWrap+">&nbsp;<\/"+tt.taDefaultWrap+">");ii.$options||(ii.$options={});ni=b(ui);fi=function(n){var s,u,i,h,r,f,e,o;if(ni(n))return n;if(s=angular.element("<div>"+n+"<\/div>"),s.children().length===0)n="<"+tt.taDefaultWrap+">"+n+"<\/"+tt.taDefaultWrap+">";else{for(u=s[0].childNodes,h=!1,i=0;i<u.length;i++)if(h=u[i].nodeName.toLowerCase().match(t))break;if(h)for(n="",i=0;i<u.length;i++)r=u[i],f=r.nodeName.toLowerCase(),f==="#comment"?n+="<!--"+r.nodeValue+"-->":f==="#text"?(e=r.textContent,n+=e.trim()?"<"+tt.taDefaultWrap+">"+e+"<\/"+tt.taDefaultWrap+">":e):f.match(t)?n+=r.outerHTML:(o=r.outerHTML||r.nodeValue,n+=o.trim()!==""?"<"+tt.taDefaultWrap+">"+o+"<\/"+tt.taDefaultWrap+">":o);else n="<"+tt.taDefaultWrap+">"+n+"<\/"+tt.taDefaultWrap+">"}return n};tt.taPaste&&(ri=k(tt.taPaste));nt.addClass("ta-bind");a["$undoManager"+(tt.id||"")]=rt.$undoManager={_stack:[],_index:0,_max:1e3,push:function(n){return typeof n=="undefined"||n===null||typeof this.current()!="undefined"&&this.current()!==null&&n===this.current()?n:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(n),pt&&r.cancel(pt),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,n)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(n){return n<0||n>this._stack.length-1?undefined:(this._index=n,this.current())},current:function(){return this._stack[this._index]}};var at,tr=a["$undoTaBind"+(tt.id||"")]=function(){if(!ut&&ft){var n=rt.$undoManager.undo();typeof n!="undefined"&&n!==null&&(ot(n),vt(n,!1),at&&r.cancel(at),at=r(function(){nt[0].focus();v.setSelectionToElementEnd(nt[0])},1))}},ir=a["$redoTaBind"+(tt.id||"")]=function(){if(!ut&&ft){var n=rt.$undoManager.redo();typeof n!="undefined"&&n!==null&&(ot(n),vt(n,!1),at&&r.cancel(at),at=r(function(){nt[0].focus();v.setSelectionToElementEnd(nt[0])},1))}},wt=function(){if(ft)return nt[0].innerHTML;if(ai)return nt.val();throw"textAngular Error: attempting to update non-editable taBind";},vt=function(n,t,i){gt=i||!1;(typeof t=="undefined"||t===null)&&(t=!0&&ft);(typeof n=="undefined"||n===null)&&(n=wt());ni(n)?(rt.$viewValue!==""&&rt.$setViewValue(""),t&&rt.$undoManager.current()!==""&&rt.$undoManager.push("")):(ci(),rt.$viewValue!==n&&(rt.$setViewValue(n),t&&rt.$undoManager.push(n)));rt.$render()};if(a["updateTaBind"+(tt.id||"")]=function(){ut||vt(undefined,undefined,!0)},ei=function(n){return rt.$oldViewValue=i(l(n),rt.$oldViewValue,vi)},nt.attr("required")&&(rt.$validators.required=function(n,t){return!ni(n||t)}),rt.$parsers.push(ei),rt.$parsers.unshift(fi),rt.$formatters.push(ei),rt.$formatters.unshift(fi),rt.$formatters.unshift(function(n){return rt.$undoManager.push(n||"")}),ai)if(a.events={},ft){bt=!1;si=function(n){var f,k,e,u,h,it,g,w,l,b,tt;if(n&&n.trim().length){if(n.match(/class=["']*Mso(Normal|List)/i)){f=n.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);f=f?f[1]:n;f=f.replace(/<o:p>[\s\S]*?<\/o:p>/ig,"").replace(/class=(["']|)MsoNormal(["']|)/ig,"");var y=angular.element("<div>"+f+"<\/div>"),s=angular.element("<div><\/div>"),t={element:null,lastIndent:[],lastLi:null,isUl:!1};for(t.lastIndent.peek=function(){var n=this.length;if(n>0)return this[n-1]},k=function(n){t.isUl=n;t.element=angular.element(n?"<ul>":"<ol>");t.lastIndent=[];t.lastIndent.peek=function(){var n=this.length;if(n>0)return this[n-1]};t.lastLevelMatch=null},e=0;e<=y[0].childNodes.length;e++)if(y[0].childNodes[e]&&y[0].childNodes[e].nodeName!=="#text"&&y[0].childNodes[e].tagName.toLowerCase()==="p")if(u=angular.element(y[0].childNodes[e]),h=(u.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i),h){if(u[0].childNodes.length<2||u[0].childNodes[1].childNodes.length<1)continue;var p=h[1].toLowerCase()==="bullet"||h[1].toLowerCase()!=="number"&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(u[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(u[0].childNodes[1].childNodes[0].innerHTML)),ut=(u.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),o=parseFloat(ut?ut[1]:0),c=(u.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(c&&c[2]&&(o=parseInt(c[2])),(!c||t.lastLevelMatch&&c[1]===t.lastLevelMatch[1])&&h[3]&&h[3].toLowerCase()!=="first"&&t.lastIndent.peek()!==null&&(t.isUl===p||t.lastIndent.peek()!==o)){if(t.lastIndent.peek()!=null&&t.lastIndent.peek()<o)t.element=angular.element(p?"<ul>":"<ol>"),t.lastLi.append(t.element);else if(t.lastIndent.peek()!=null&&t.lastIndent.peek()>o){while(t.lastIndent.peek()!=null&&t.lastIndent.peek()>o){if(t.element.parent()[0].tagName.toLowerCase()==="li"){t.element=t.element.parent();continue}else if(/[uo]l/i.test(t.element.parent()[0].tagName.toLowerCase()))t.element=t.element.parent();else break;t.lastIndent.pop()}t.isUl=t.element[0].tagName.toLowerCase()==="ul";p!==t.isUl&&(k(p),s.append(t.element))}}else k(p),s.append(t.element);t.lastLevelMatch=c;o!==t.lastIndent.peek()&&t.lastIndent.push(o);t.lastLi=angular.element("<li>");t.element.append(t.lastLi);t.lastLi.html(u.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/ig,""));u.remove()}else k(!1),s.append(u);it=function(n){n=angular.element(n);for(var t=n[0].childNodes.length-1;t>=0;t--)n.after(n[0].childNodes[t]);n.remove()};angular.forEach(s.find("span"),function(n){n.removeAttribute("lang");n.attributes.length<=0&&it(n)});angular.forEach(s.find("font"),it);n=s.html()}else{if(n=n.replace(/<(|\/)meta[^>]*?>/ig,""),n.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(n.match(/<[^>]*?(text-angular)[^>]*?>/)){for(g=angular.element("<div>"+n+"<\/div>"),g.find("textarea").remove(),w=d.getByAttribute(g,"ta-bind"),l=0;l<w.length;l++){for(b=w[l][0].parentNode.parentNode,tt=0;tt<w[l][0].childNodes.length;tt++)b.parentNode.insertBefore(w[l][0].childNodes[tt],b);b.parentNode.removeChild(b)}n=g.html().replace('<br class="Apple-interchange-newline">',"")}}else n.match(/^<span/)&&(n.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/ig)||(n=n.replace(/<(|\/)span[^>]*?>/ig,"")));n=n.replace(/<br class="Apple-interchange-newline"[^>]*?>/ig,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/ig,"&nbsp;")}/<li(\s.*)?>/i.test(n)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(n)===!1&&(n=n.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&<\/ul>"));n=n.replace(/^[ |\u00A0]+/gm,function(n){for(var t="",i=0;i<n.length;i++)t+="&nbsp;";return t}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");ri&&(n=ri(a,{$html:n})||n);n=i(n,"",vi);v.insertHtml(n,nt[0]);r(function(){rt.$setViewValue(wt());bt=!1;nt.removeClass("processing-paste")},0)}else bt=!1,nt.removeClass("processing-paste")};nt.on("paste",a.events.paste=function(n,t){var h,i,o,s,c,e;if(t&&angular.extend(n,t),ut||bt)return n.stopPropagation(),n.preventDefault(),!1;if(bt=!0,nt.addClass("processing-paste"),i=(n.originalEvent||n).clipboardData,i&&i.getData&&i.types.length>0){for(o="",s=0;s<i.types.length;s++)o+=" "+i.types[s];return/text\/html/i.test(o)?h=i.getData("text/html"):/text\/plain/i.test(o)&&(h=i.getData("text/plain")),si(h),n.stopPropagation(),n.preventDefault(),!1}c=u.rangy.saveSelection();e=angular.element('<div class="ta-hidden-input" contenteditable="true"><\/div>');f.find("body").append(e);e[0].focus();r(function(){u.rangy.restoreSelection(c);si(e[0].innerHTML);nt[0].focus();e.remove()},0)});nt.on("cut",a.events.cut=function(n){ut?n.preventDefault():r(function(){rt.$setViewValue(wt())},0)});nt.on("keydown",a.events.keydown=function(n,t){var e,r,i,u,f;if(t&&angular.extend(n,t),n.specialKey=nr(n),w.keyMappings.forEach(function(t){n.specialKey===t.commandKeyCode&&(n.specialKey=undefined);t.testForKey(n)&&(e=t.commandKeyCode);(t.commandKeyCode==="UndoKey"||t.commandKeyCode==="RedoKey")&&(t.enablePropagation||n.preventDefault())}),typeof e!="undefined"&&(n.specialKey=e),typeof n.specialKey!="undefined"&&(n.specialKey!=="UndoKey"||n.specialKey!=="RedoKey")&&(n.preventDefault(),g.sendKeyCommand(a,n)),!ut&&(n.specialKey==="UndoKey"&&(tr(),n.preventDefault()),n.specialKey==="RedoKey"&&(ir(),n.preventDefault()),n.keyCode===13&&!n.shiftKey)){if(i=v.getSelectionElement(),!i.tagName.match(s))return;u=angular.element(et);/^<br(|\/)>$/i.test(i.innerHTML.trim())&&i.parentNode.tagName.toLowerCase()==="blockquote"&&!i.nextSibling?(r=angular.element(i),f=r.parent(),f.after(u),r.remove(),f.children().length===0&&f.remove(),v.setSelectionToElementStart(u[0]),n.preventDefault()):/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(i.innerHTML.trim())&&i.tagName.toLowerCase()==="blockquote"&&(r=angular.element(i),r.after(u),r.remove(),v.setSelectionToElementStart(u[0]),n.preventDefault())}});nt.on("keyup",a.events.keyup=function(n,t){var o,i,f,u,e;if(t&&angular.extend(n,t),n.keyCode===9){o=v.getSelection();o.start.element===nt[0]&&nt.children().length&&v.setSelectionToElementStart(nt.children()[0]);return}if(pt&&r.cancel(pt),!ut&&!ki.test(n.keyCode)){if(et!==""&&n.keyCode===13&&!n.shiftKey){for(i=v.getSelectionElement();!i.tagName.match(s)&&i!==nt[0];)i=i.parentNode;i.tagName.toLowerCase()!==tt.taDefaultWrap&&i.tagName.toLowerCase()!=="li"&&(i.innerHTML.trim()===""||i.innerHTML.trim()==="<br>")&&(f=angular.element(et),angular.element(i).replaceWith(f),v.setSelectionToElementStart(f[0]))}u=wt();et!==""&&u.trim()===""?(ot(et),v.setSelectionToElementStart(nt.children()[0])):u.substring(0,1)!=="<"&&tt.taDefaultWrap!=="";e=yi!==n.keyCode&&di.test(n.keyCode);hi&&r.cancel(hi);hi=r(function(){vt(u,e,!0)},ii.$options.debounce||400);e||(pt=r(function(){rt.$undoManager.push(u)},250));yi=n.keyCode}});nt.on("blur",a.events.blur=function(){yt=!1;ut?(gt=!0,rt.$render()):vt(undefined,undefined,!0)});if(tt.placeholder&&(n.ie>8||n.ie===undefined)){if(tt.id)bi=h("#"+tt.id+".placeholder-text:before",'content: "'+tt.placeholder+'"');else throw"textAngular Error: An unique ID is required for placeholders to work";a.$on("$destroy",function(){c(bi)})}nt.on("focus",a.events.focus=function(){yt=!0;nt.removeClass("placeholder-text");ci()});nt.on("mouseup",a.events.mouseup=function(){var n=v.getSelection();n.start.element===nt[0]&&nt.children().length&&v.setSelectionToElementStart(nt.children()[0])});nt.on("mousedown",a.events.mousedown=function(n,t){t&&angular.extend(n,t);n.stopPropagation()})}else{nt.on("change blur",a.events.change=a.events.blur=function(){ut||rt.$setViewValue(wt())});nt.on("keydown",a.events.keydown=function(n,t){var f,u;if(t&&angular.extend(n,t),n.keyCode===9){var r=this.selectionStart,e=this.selectionEnd,i=nt.val();n.shiftKey?(f=i.lastIndexOf("\n",r),u=i.lastIndexOf("\t",r),u!==-1&&u>=f&&(nt.val(i.substring(0,u)+i.substring(u+1)),this.selectionStart=this.selectionEnd=r-1)):(nt.val(i.substring(0,r)+"\t"+i.substring(e)),this.selectionStart=this.selectionEnd=r+1);n.preventDefault()}});var oi=function(n,t){for(var i="",r=0;r<t;r++)i+=n;return i},pi=function(n,t,i){for(var r=0;r<n.length;r++)t.call(i,r,n[r])},wi=function(n,t){var i="",r=n.childNodes;return t++,i+=oi("\t",t-1)+n.outerHTML.substring(0,4),pi(r,function(n,r){var u=r.nodeName.toLowerCase();if(u==="#comment"){i+="<!--"+r.nodeValue+"-->";return}if(u==="#text"){i+=r.textContent;return}r.outerHTML&&(i+=u==="ul"||u==="ol"?"\n"+wi(r,t):"\n"+oi("\t",t)+r.outerHTML)}),i+="\n"+oi("\t",t-1)+n.outerHTML.substring(n.outerHTML.lastIndexOf("<"))};rt.$formatters.unshift(function(n){var t=angular.element("<div>"+n+"<\/div>")[0].childNodes;return t.length>0&&(n="",pi(t,function(t,i){var r=i.nodeName.toLowerCase();if(r==="#comment"){n+="<!--"+i.nodeValue+"-->";return}if(r==="#text"){n+=i.textContent;return}i.outerHTML&&(n.length>0&&(n+="\n"),n+=r==="ul"||r==="ol"?""+wi(i,0):""+i.outerHTML)})),n})}var kt=function(n){return a.$emit("ta-element-select",this),n.preventDefault(),!1},dt=function(n,t){if(t&&angular.extend(n,t),!e&&!ut){e=!0;var i;i=n.originalEvent?n.originalEvent.dataTransfer:n.dataTransfer;a.$emit("ta-drop-event",this,n,i);r(function(){e=!1;vt(undefined,undefined,!0)},100)}},ci=a["reApplyOnSelectorHandlers"+(tt.id||"")]=function(){ut||angular.forEach(y,function(n){nt.find(n).off("click",kt).on("click",kt)})},ot=function(n){nt[0].innerHTML=n},ti,li=!1;if(rt.$render=function(){if(!li){li=!0;var n=rt.$viewValue||"";if(!gt)if(ft&&yt&&(nt.removeClass("placeholder-text"),ti&&r.cancel(ti),ti=r(function(){yt||(nt[0].focus(),v.setSelectionToElementEnd(nt.children()[nt.children().length-1]));ti=undefined},1)),ft)if(tt.placeholder?n===""?ot(et):ot(n):ot(n===""?et:n),ut)nt.off("drop",dt);else{ci();nt.on("drop",dt)}else nt[0].tagName.toLowerCase()!=="textarea"&&nt[0].tagName.toLowerCase()!=="input"?ot(p(n)):nt.val(n);ft&&tt.placeholder&&(n===""?yt?nt.removeClass("placeholder-text"):nt.addClass("placeholder-text"):nt.removeClass("placeholder-text"));li=gt=!1}},tt.taReadonly&&(ut=a.$eval(tt.taReadonly),ut?(nt.addClass("ta-readonly"),(nt[0].tagName.toLowerCase()==="textarea"||nt[0].tagName.toLowerCase()==="input")&&nt.attr("disabled","disabled"),nt.attr("contenteditable")!==undefined&&nt.attr("contenteditable")&&nt.removeAttr("contenteditable")):(nt.removeClass("ta-readonly"),nt[0].tagName.toLowerCase()==="textarea"||nt[0].tagName.toLowerCase()==="input"?nt.removeAttr("disabled"):ft&&nt.attr("contenteditable","true")),a.$watch(tt.taReadonly,function(n,t){if(t!==n){if(n)nt.addClass("ta-readonly"),(nt[0].tagName.toLowerCase()==="textarea"||nt[0].tagName.toLowerCase()==="input")&&nt.attr("disabled","disabled"),nt.attr("contenteditable")!==undefined&&nt.attr("contenteditable")&&nt.removeAttr("contenteditable"),angular.forEach(y,function(n){nt.find(n).on("click",kt)}),nt.off("drop",dt);else{nt.removeClass("ta-readonly");nt[0].tagName.toLowerCase()==="textarea"||nt[0].tagName.toLowerCase()==="input"?nt.removeAttr("disabled"):ft&&nt.attr("contenteditable","true");angular.forEach(y,function(n){nt.find(n).off("click",kt)});nt.on("drop",dt)}ut=n}})),ft&&!ut){angular.forEach(y,function(n){nt.find(n).on("click",kt)});nt.on("drop",dt);nt.on("blur",function(){n.webkit&&(o=!0)})}}}}]);e=!1;f=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);f.config([function(){angular.forEach(taTools,function(n,t){delete taTools[t]})}]);f.run([function(){if(typeof define=="function"&&define.amd)define(function(n){window.rangy=n("rangy");window.rangy.saveSelection=n("rangy/lib/rangy-selectionsaverestore")});else if(typeof require=="function"&&typeof module!="undefined"&&typeof exports=="object")window.rangy=require("rangy"),window.rangy.saveSelection=require("rangy/lib/rangy-selectionsaverestore");else if(window.rangy){if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly.";}else throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";}]);f.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(n,t,i,r,u,f,e,o,s,h,c,l){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(a,v,y,p){var tt,it,rt,ut,ft,et,g,k,w=y.serial?y.serial:Math.floor(Math.random()*10000000000000000),ct,ot,st,nt,d,ht,b;if(a._name=y.name?y.name:"textAngularEditor"+w,nt=function(n,i,r){t(function(){var t=function(){n.off(i,t);r.apply(this,arguments)};n.on(i,t)},100)},ct=u(y.taDefaultWrap),angular.extend(a,angular.copy(i),{wrapSelection:function(n,t,i){n.toLowerCase()==="undo"?a["$undoTaBindtaTextElement"+w]():n.toLowerCase()==="redo"?a["$redoTaBindtaTextElement"+w]():(ct(n,!1,t,a.defaultTagAttributes),i&&a["reApplyOnSelectorHandlerstaTextElement"+w](),a.displayElements.text[0].focus())},showHtml:a.$eval(y.taShowHtml)||!1}),y.taFocussedClass&&(a.classes.focussed=y.taFocussedClass),y.taTextEditorClass&&(a.classes.textEditor=y.taTextEditorClass),y.taHtmlEditorClass&&(a.classes.htmlEditor=y.taHtmlEditorClass),y.taDefaultTagAttributes)try{angular.extend(a.defaultTagAttributes,angular.fromJson(y.taDefaultTagAttributes))}catch(lt){h.error(lt)}y.taTextEditorSetup&&(a.setup.textEditorSetup=a.$parent.$eval(y.taTextEditorSetup));y.taHtmlEditorSetup&&(a.setup.htmlEditorSetup=a.$parent.$eval(y.taHtmlEditorSetup));a.fileDropHandler=y.taFileDrop?a.$parent.$eval(y.taFileDrop):a.defaultFileDropHandler;g=v[0].innerHTML;v[0].innerHTML="";a.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea><\/textarea>"),text:angular.element("<div><\/div>"),scrollWindow:angular.element("<div class='ta-scroll-window'><\/div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"><\/div>'),popoverArrow:angular.element('<div class="arrow"><\/div>'),popoverContainer:angular.element('<div class="popover-content"><\/div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"><\/div>'),background:angular.element('<div class="ta-resizer-handle-background"><\/div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"><\/div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"><\/div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"><\/div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"><\/div>')],info:angular.element('<div class="ta-resizer-handle-info"><\/div>')}};a.displayElements.popover.append(a.displayElements.popoverArrow);a.displayElements.popover.append(a.displayElements.popoverContainer);a.displayElements.scrollWindow.append(a.displayElements.popover);a.displayElements.popover.on("mousedown",function(n,t){return t&&angular.extend(n,t),n.preventDefault(),!1});a.showPopover=function(n){a.displayElements.popover.css("display","block");a.reflowPopover(n);s.addClass(a.displayElements.popover,"in");nt(o.find("body"),"click keyup",function(){a.hidePopover()})};a.reflowPopover=function(n){a.displayElements.text[0].offsetHeight-51>n[0].offsetTop?(a.displayElements.popover.css("top",n[0].offsetTop+n[0].offsetHeight+a.displayElements.scrollWindow[0].scrollTop+"px"),a.displayElements.popover.removeClass("top").addClass("bottom")):(a.displayElements.popover.css("top",n[0].offsetTop-54+a.displayElements.scrollWindow[0].scrollTop+"px"),a.displayElements.popover.removeClass("bottom").addClass("top"));var i=a.displayElements.text[0].offsetWidth-a.displayElements.popover[0].offsetWidth,t=n[0].offsetLeft+n[0].offsetWidth/2-a.displayElements.popover[0].offsetWidth/2;a.displayElements.popover.css("left",Math.max(0,Math.min(i,t))+"px");a.displayElements.popoverArrow.css("margin-left",Math.min(t,Math.max(0,t-i))-11+"px")};a.hidePopover=function(){a.displayElements.popover.css("display","");a.displayElements.popoverContainer.attr("style","");a.displayElements.popoverContainer.attr("class","popover-content");a.displayElements.popover.removeClass("in")};a.displayElements.resize.overlay.append(a.displayElements.resize.background);angular.forEach(a.displayElements.resize.anchors,function(n){a.displayElements.resize.overlay.append(n)});a.displayElements.resize.overlay.append(a.displayElements.resize.info);a.displayElements.scrollWindow.append(a.displayElements.resize.overlay);a.reflowResizeOverlay=function(n){n=angular.element(n)[0];a.displayElements.resize.overlay.css({display:"block",left:n.offsetLeft-5+"px",top:n.offsetTop-5+"px",width:n.offsetWidth+10+"px",height:n.offsetHeight+10+"px"});a.displayElements.resize.info.text(n.offsetWidth+" x "+n.offsetHeight)};a.showResizeOverlay=function(n){var t=o.find("body");ot=function(i){var r={width:parseInt(n.attr("width")),height:parseInt(n.attr("height")),x:i.clientX,y:i.clientY},u,f;(r.width===undefined||isNaN(r.width))&&(r.width=n[0].offsetWidth);(r.height===undefined||isNaN(r.height))&&(r.height=n[0].offsetHeight);a.hidePopover();u=r.height/r.width;f=function(t){function o(n){return Math.round(Math.max(0,n))}var i={x:Math.max(0,r.width+(t.clientX-r.x)),y:Math.max(0,r.height+(t.clientY-r.y))},s=y.taResizeForceAspectRatio!==undefined,h=y.taResizeMaintainAspectRatio,c=s||h&&!t.shiftKey,f,e;c&&(f=i.y/i.x,i.x=u>f?i.x:i.y/u,i.y=u>f?i.x*u:i.y);e=angular.element(n);e.css("height",o(i.y)+"px");e.css("width",o(i.x)+"px");a.reflowResizeOverlay(n)};t.on("mousemove",f);nt(t,"mouseup",function(i){i.preventDefault();i.stopPropagation();t.off("mousemove",f);a.showPopover(n)});i.stopPropagation();i.preventDefault()};a.displayElements.resize.anchors[3].off("mousedown");a.displayElements.resize.anchors[3].on("mousedown",ot);a.reflowResizeOverlay(n);nt(t,"click",function(){a.hideResizeOverlay()})};a.hideResizeOverlay=function(){a.displayElements.resize.anchors[3].off("mousedown",ot);a.displayElements.resize.overlay.css("display","")};a.setup.htmlEditorSetup(a.displayElements.html);a.setup.textEditorSetup(a.displayElements.text);a.displayElements.html.attr({id:"taHtmlElement"+w,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":v.attr("ng-model-options")});a.displayElements.text.attr({id:"taTextElement"+w,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":v.attr("ng-model-options")});a.displayElements.scrollWindow.attr({"ng-hide":"showHtml"});y.taDefaultWrap&&a.displayElements.text.attr("ta-default-wrap",y.taDefaultWrap);y.taUnsafeSanitizer&&(a.displayElements.text.attr("ta-unsafe-sanitizer",y.taUnsafeSanitizer),a.displayElements.html.attr("ta-unsafe-sanitizer",y.taUnsafeSanitizer));a.displayElements.scrollWindow.append(a.displayElements.text);v.append(a.displayElements.scrollWindow);v.append(a.displayElements.html);a.displayElements.forminput.attr("name",a._name);v.append(a.displayElements.forminput);y.tabindex&&(v.removeAttr("tabindex"),a.displayElements.text.attr("tabindex",y.tabindex),a.displayElements.html.attr("tabindex",y.tabindex));y.placeholder&&(a.displayElements.text.attr("placeholder",y.placeholder),a.displayElements.html.attr("placeholder",y.placeholder));y.taDisabled&&(a.displayElements.text.attr("ta-readonly","disabled"),a.displayElements.html.attr("ta-readonly","disabled"),a.disabled=a.$parent.$eval(y.taDisabled),a.$parent.$watch(y.taDisabled,function(n){a.disabled=n;a.disabled?v.addClass(a.classes.disabled):v.removeClass(a.classes.disabled)}));y.taPaste&&(a._pasteHandler=function(n){return l(y.taPaste)(a.$parent,{$html:n})},a.displayElements.text.attr("ta-paste","_pasteHandler($html)"));n(a.displayElements.scrollWindow)(a);n(a.displayElements.html)(a);a.updateTaBindtaTextElement=a["updateTaBindtaTextElement"+w];a.updateTaBindtaHtmlElement=a["updateTaBindtaHtmlElement"+w];v.addClass("ta-root");a.displayElements.scrollWindow.addClass("ta-text ta-editor "+a.classes.textEditor);a.displayElements.html.addClass("ta-html ta-editor "+a.classes.htmlEditor);a._actionRunning=!1;d=!1;a.startAction=function(){return a._actionRunning=!0,d=e.rangy.saveSelection(),function(){d&&e.rangy.restoreSelection(d)}};a.endAction=function(){a._actionRunning=!1;d&&(a.showHtml?a.displayElements.html[0].focus():a.displayElements.text[0].focus(),e.rangy.removeMarkers(d));d=!1;a.updateSelectedStyles();a.showHtml||a["updateTaBindtaTextElement"+w]()};ft=function(){a.focussed=!0;v.addClass(a.classes.focussed);k.focus();v.triggerHandler("focus")};a.displayElements.html.on("focus",ft);a.displayElements.text.on("focus",ft);et=function(n){return a._actionRunning||o[0].activeElement===a.displayElements.html[0]||o[0].activeElement===a.displayElements.text[0]||(v.removeClass(a.classes.focussed),k.unfocus(),t(function(){a._bUpdateSelectedStyles=!1;v.triggerHandler("blur");a.focussed=!1},0)),n.preventDefault(),!1};a.displayElements.html.on("blur",et);a.displayElements.text.on("blur",et);a.displayElements.text.on("paste",function(n){v.triggerHandler("paste",n)});a.queryFormatBlockState=function(n){return!a.showHtml&&n.toLowerCase()===o[0].queryCommandValue("formatBlock").toLowerCase()};a.queryCommandState=function(n){return a.showHtml?"":o[0].queryCommandState(n)};a.switchView=function(){a.showHtml=!a.showHtml;s.enabled(!1,a.displayElements.html);s.enabled(!1,a.displayElements.text);a.showHtml?t(function(){return s.enabled(!0,a.displayElements.html),s.enabled(!0,a.displayElements.text),a.displayElements.html[0].focus()},100):t(function(){return s.enabled(!0,a.displayElements.html),s.enabled(!0,a.displayElements.text),a.displayElements.text[0].focus()},100)};y.ngModel?(ht=!0,p.$render=function(){if(ht){ht=!1;var n=a.$parent.$eval(y.ngModel);(n===undefined||n===null)&&g&&g!==""&&p.$setViewValue(g)}a.displayElements.forminput.val(p.$viewValue);a.html=p.$viewValue||""},v.attr("required")&&(p.$validators.required=function(n,t){var i=n||t;return!(!i||i.trim()==="")})):(a.displayElements.forminput.val(g),a.html=g);a.$watch("html",function(n,t){n!==t&&(y.ngModel&&p.$viewValue!==n&&p.$setViewValue(n),a.displayElements.forminput.val(n))});y.taTargetToolbars?k=f.registerEditor(a._name,a,y.taTargetToolbars.split(",")):(b=angular.element('<div text-angular-toolbar name="textAngularToolbar'+w+'">'),y.taToolbar&&b.attr("ta-toolbar",y.taToolbar),y.taToolbarClass&&b.attr("ta-toolbar-class",y.taToolbarClass),y.taToolbarGroupClass&&b.attr("ta-toolbar-group-class",y.taToolbarGroupClass),y.taToolbarButtonClass&&b.attr("ta-toolbar-button-class",y.taToolbarButtonClass),y.taToolbarActiveButtonClass&&b.attr("ta-toolbar-active-button-class",y.taToolbarActiveButtonClass),y.taFocussedClass&&b.attr("ta-focussed-class",y.taFocussedClass),v.prepend(b),n(b)(a.$parent),k=f.registerEditor(a._name,a,["textAngularToolbar"+w]));a.$on("$destroy",function(){f.unregisterEditor(a._name);angular.element(window).off("blur")});a.$on("ta-element-select",function(n,t){k.triggerElementSelect(n,t)&&a["reApplyOnSelectorHandlerstaTextElement"+w]()});a.$on("ta-drop-event",function(n,i,r,u){a.displayElements.text[0].focus();u&&u.files&&u.files.length>0?(angular.forEach(u.files,function(n){try{c.when(a.fileDropHandler(n,a.wrapSelection)||a.fileDropHandler!==a.defaultFileDropHandler&&c.when(a.defaultFileDropHandler(n,a.wrapSelection))).then(function(){a["updateTaBindtaTextElement"+w]()})}catch(t){h.error(t)}}),r.preventDefault(),r.stopPropagation()):t(function(){a["updateTaBindtaTextElement"+w]()},0)});a._bUpdateSelectedStyles=!1;angular.element(window).on("blur",function(){a._bUpdateSelectedStyles=!1;a.focussed=!1});a.updateSelectedStyles=function(){var n;st&&t.cancel(st);(n=r.getSelectionElement())!==undefined&&n.parentNode!==a.displayElements.text[0]?k.updateSelectedStyles(angular.element(n)):k.updateSelectedStyles();a._bUpdateSelectedStyles&&(st=t(a.updateSelectedStyles,200))};tt=function(){if(!a.focussed){a._bUpdateSelectedStyles=!1;return}a._bUpdateSelectedStyles||(a._bUpdateSelectedStyles=!0,a.$apply(function(){a.updateSelectedStyles()}))};a.displayElements.html.on("keydown",tt);a.displayElements.text.on("keydown",tt);it=function(){a._bUpdateSelectedStyles=!1};a.displayElements.html.on("keyup",it);a.displayElements.text.on("keyup",it);rt=function(n,t){t&&angular.extend(n,t);a.$apply(function(){if(k.sendKeyCommand(n))return a._bUpdateSelectedStyles||a.updateSelectedStyles(),n.preventDefault(),!1})};a.displayElements.html.on("keypress",rt);a.displayElements.text.on("keypress",rt);ut=function(){a._bUpdateSelectedStyles=!1;a.$apply(function(){a.updateSelectedStyles()})};a.displayElements.html.on("mouseup",ut);a.displayElements.text.on("mouseup",ut)}}}]);f.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(n,t,i){var r={},u={};return{registerEditor:function(i,f,e){if(!i||i==="")throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(u[i])throw'textAngular Error: An Editor with name "'+i+'" already exists';var o=[];return angular.forEach(e,function(n){r[n]&&o.push(r[n])}),u[i]={scope:f,toolbars:e,_registerToolbar:function(n){this.toolbars.indexOf(n.name)>=0&&o.push(n)},editorFunctions:{disable:function(){angular.forEach(o,function(n){n.disabled=!0})},enable:function(){angular.forEach(o,function(n){n.disabled=!1})},focus:function(){angular.forEach(o,function(n){n._parent=f;n.disabled=!1;n.focussed=!0;f.focussed=!0})},unfocus:function(){angular.forEach(o,function(n){n.disabled=!0;n.focussed=!1});f.focussed=!1},updateSelectedStyles:function(n){angular.forEach(o,function(t){angular.forEach(t.tools,function(i){i.activeState&&(t._parent=f,i.active=i.activeState(n))})})},sendKeyCommand:function(i){var r=!1;return(i.ctrlKey||i.metaKey||i.specialKey)&&angular.forEach(t,function(t,u){if(t.commandKeyCode&&(t.commandKeyCode===i.which||t.commandKeyCode===i.specialKey))for(var e=0;e<o.length;e++)if(o[e].tools[u]!==undefined){n.call(o[e].tools[u],f);r=!0;break}}),r},triggerElementSelect:function(n,i){var h=function(n,t){for(var i=!0,r=0;r<t.length;r++)i=i&&n.attr(t[r]);return i},r=[],c={},l=!1,s,u,v,a,e;if(i=angular.element(i),s=!1,angular.forEach(t,function(n,t){n.onElementSelect&&n.onElementSelect.element&&n.onElementSelect.element.toLowerCase()===i[0].tagName.toLowerCase()&&(!n.onElementSelect.filter||n.onElementSelect.filter(i))&&(s=s||angular.isArray(n.onElementSelect.onlyWithAttrs)&&h(i,n.onElementSelect.onlyWithAttrs),(!n.onElementSelect.onlyWithAttrs||h(i,n.onElementSelect.onlyWithAttrs))&&(c[t]=n))}),s?(angular.forEach(c,function(n,t){n.onElementSelect.onlyWithAttrs&&h(i,n.onElementSelect.onlyWithAttrs)&&r.push({name:t,tool:n})}),r.sort(function(n,t){return t.tool.onElementSelect.onlyWithAttrs.length-n.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(c,function(n,t){r.push({name:t,tool:n})}),r.length>0)for(u=0;u<r.length;u++){for(v=r[u].tool,a=r[u].name,e=0;e<o.length;e++)if(o[e].tools[a]!==undefined){v.onElementSelect.action.call(o[e].tools[a],n,i,f);l=!0;break}if(l)break}return l}}},u[i].editorFunctions},retrieveEditor:function(n){return u[n]},unregisterEditor:function(n){delete u[n]},registerToolbar:function(n){if(!n)throw"textAngular Error: A toolbar requires a scope";if(!n.name||n.name==="")throw"textAngular Error: A toolbar requires a name";if(r[n.name])throw'textAngular Error: A toolbar with name "'+n.name+'" already exists';r[n.name]=n;angular.forEach(u,function(t){t._registerToolbar(n)})},retrieveToolbar:function(n){return r[n]},retrieveToolbarsViaEditor:function(n){var t=[],i=this;return angular.forEach(this.retrieveEditor(n).toolbars,function(n){t.push(i.retrieveToolbar(n))}),t},unregisterToolbar:function(n){delete r[n]},updateToolsDisplay:function(n){var t=this;angular.forEach(n,function(n,i){t.updateToolDisplay(i,n)})},resetToolsDisplay:function(){var n=this;angular.forEach(t,function(t,i){n.resetToolDisplay(i)})},updateToolDisplay:function(n,t){var i=this;angular.forEach(r,function(r,u){i.updateToolbarToolDisplay(u,n,t)})},resetToolDisplay:function(n){var t=this;angular.forEach(r,function(i,r){t.resetToolbarToolDisplay(r,n)})},updateToolbarToolDisplay:function(n,t,i){if(r[n])r[n].updateToolDisplay(t,i);else throw'textAngular Error: No Toolbar with name "'+n+'" exists';},resetToolbarToolDisplay:function(n,i){if(r[n])r[n].updateToolDisplay(i,t[i],!0);else throw'textAngular Error: No Toolbar with name "'+n+'" exists';},removeTool:function(n){delete t[n];angular.forEach(r,function(t){var r,i,u;for(delete t.tools[n],r=0;r<t.toolbar.length;r++){for(u=0;u<t.toolbar[r].length;u++){if(t.toolbar[r][u]===n){i={group:r,index:u};break}if(i!==undefined)break}i!==undefined&&(t.toolbar[i.group].slice(i.index,1),t._$element.children().eq(i.group).children().eq(i.index).remove())}})},addTool:function(n,t,u,f){i(n,t);angular.forEach(r,function(i){i.addTool(n,t,u,f)})},addToolToToolbar:function(n,t,u,f,e){i(n,t);r[u].addTool(n,t,f,e)},refreshEditor:function(n){if(u[n])u[n].scope.updateTaBindtaTextElement(),u[n].scope.$$phase||u[n].scope.$digest();else throw'textAngular Error: No Editor with name "'+n+'" exists';},sendKeyCommand:function(n,t){angular.forEach(u,function(i){if(i.editorFunctions.sendKeyCommand(t))return n._bUpdateSelectedStyles||n.updateSelectedStyles(),t.preventDefault(),!1})}}}]);f.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(n,t,i,r,u,f){return{scope:{name:"@"},restrict:"EA",link:function(e,o,s){var h,c;if(!e.name||e.name==="")throw"textAngular Error: A toolbar requires a name";angular.extend(e,angular.copy(i));s.taToolbar&&(e.toolbar=e.$parent.$eval(s.taToolbar));s.taToolbarClass&&(e.classes.toolbar=s.taToolbarClass);s.taToolbarGroupClass&&(e.classes.toolbarGroup=s.taToolbarGroupClass);s.taToolbarButtonClass&&(e.classes.toolbarButton=s.taToolbarButtonClass);s.taToolbarActiveButtonClass&&(e.classes.toolbarButtonActive=s.taToolbarActiveButtonClass);s.taFocussedClass&&(e.classes.focussed=s.taFocussedClass);e.disabled=!0;e.focussed=!1;e._$element=o;o[0].innerHTML="";o.addClass("ta-toolbar "+e.classes.toolbar);e.$watch("focussed",function(){e.focussed?o.addClass(e.classes.focussed):o.removeClass(e.classes.focussed)});h=function(t,i){var r,f,u;return r=t&&t.display?angular.element(t.display):angular.element("<button type='button'>"),t&&t["class"]?r.addClass(t["class"]):r.addClass(e.classes.toolbarButton),r.attr("name",i.name),r.attr("ta-button","ta-button"),r.attr("ng-disabled","isDisabled()"),r.attr("tabindex","-1"),r.attr("ng-click","executeAction()"),r.attr("ng-class","displayActiveToolClass(active)"),t&&t.tooltiptext&&r.attr("title",t.tooltiptext),!t||t.display||i._display||(r[0].innerHTML="",t.buttontext&&(r[0].innerHTML=t.buttontext),t.iconclass&&(f=angular.element("<i>"),u=r[0].innerHTML,f.addClass(t.iconclass),r[0].innerHTML="",r.append(f),u&&u!==""&&r.append("&nbsp;"+u))),i._lastToolDefinition=angular.copy(t),n(r)(i)};e.tools={};e._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};c={$window:f,$editor:function(){return e._parent},isDisabled:function(){return typeof this.$eval("disabled")!="function"&&this.$eval("disabled")||this.$eval("disabled()")||this.name!=="html"&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(n){return n?e.classes.toolbarButtonActive:""},executeAction:u};angular.forEach(e.toolbar,function(n){var t=angular.element("<div>");t.addClass(e.classes.toolbarGroup);angular.forEach(n,function(n){e.tools[n]=angular.extend(e.$new(!0),r[n],c,{name:n});e.tools[n].$element=h(r[n],e.tools[n]);t.append(e.tools[n].$element)});o.append(t)});e.updateToolDisplay=function(n,t,i){var r=e.tools[n],u;if(r){if(r._lastToolDefinition&&!i&&(t=angular.extend({},r._lastToolDefinition,t)),t.buttontext===null&&t.iconclass===null&&t.display===null)throw'textAngular Error: Tool Definition for updating "'+n+'" does not have a valid display/iconclass/buttontext value';t.buttontext===null&&delete t.buttontext;t.iconclass===null&&delete t.iconclass;t.display===null&&delete t.display;u=h(t,r);r.$element.replaceWith(u);r.$element=u}};e.addTool=function(n,t,i,u){e.tools[n]=angular.extend(e.$new(!0),r[n],c,{name:n});e.tools[n].$element=h(r[n],e.tools[n]);var f;i===undefined&&(i=e.toolbar.length-1);f=angular.element(o.children()[i]);u===undefined?(f.append(e.tools[n].$element),e.toolbar[i][e.toolbar[i].length-1]=n):(f.children().eq(u).after(e.tools[n].$element),e.toolbar[i][u]=n)};t.registerToolbar(e);e.$on("$destroy",function(){t.unregisterToolbar(e.name)})}}}])}();
(function(n,t){"use strict";function it(){this.$get=["$$sanitizeUri",function(n){return function(t){typeof arguments[1]!="undefined"&&(arguments[1].version="taSanitize");var i=[];return pt(t,nt(i,function(t,i){return!/^unsafe/.test(n(t,i))})),i.join("")}}]}function rt(n){var i=[],r=nt(i,t.noop);return r.chars(n),i.join("")}function i(n){for(var i={},r=n.split(","),t=0;t<r.length;t++)i[r[t]]=!0;return i}function pt(n,i){function it(n,r,e,o){if(r=t.lowercase(r),p[r])while(f.last()&&w[f.last()])k("",f.last());y[r]&&f.last()==r&&k("",r);o=l[r]||!!o;o||f.push(r);var s={};e.replace(ut,function(n,t,i,r,f){var e=i||r||f||"";s[t]=u(e)});i.start&&i.start(r,s,o)}function k(n,r){var u=0,e;if(r=t.lowercase(r),r)for(u=f.length-1;u>=0;u--)if(f[u]==r)break;if(u>=0){for(e=f.length-1;e>=u;e--)i.end&&i.end(f[e]);f.length=u}}var v,a,r,f,g,d,nt;for(typeof n!="string"&&(n=n===null||typeof n=="undefined"?"":""+n),f=[],g=n,f.last=function(){return f[f.length-1]};n;){if(d="",a=!0,f.last()&&b[f.last()]?(n=n.replace(new RegExp("([^]*)<\\s*\\/\\s*"+f.last()+"[^>]*>","i"),function(n,t){return t=t.replace(ot,"$1").replace(st,"$1"),i.chars&&i.chars(u(t)),""}),k("",f.last())):(c.test(n)?(r=n.match(c),r&&(nt=r[0],i.whitespace&&i.whitespace(r[0]),n=n.replace(r[0],""),a=!1)):s.test(n)?(r=n.match(s),r&&(i.comment&&i.comment(r[1]),n=n.replace(r[0],""),a=!1)):h.test(n)?(r=n.match(h),r&&(n=n.replace(r[0],""),a=!1)):et.test(n)?(r=n.match(o),r&&(n=n.substring(r[0].length),r[0].replace(o,k),a=!1)):ft.test(n)&&(r=n.match(e),r?(r[4]&&(n=n.substring(r[0].length),r[0].replace(e,it)),a=!1):(d+="<",n=n.substring(1))),a&&(v=n.indexOf("<"),d+=v<0?n:n.substring(0,v),n=v<0?"":n.substring(v),i.chars&&i.chars(u(d)))),n==g)throw tt("badparse","The sanitizer was unable to parse the following block of html: {0}",n);g=n}k()}function u(n){if(!n)return"";var i=wt.exec(n),u=i[1],f=i[3],t=i[2];return t&&(r.innerHTML=t.replace(/</g,"&lt;"),t="textContent"in r?r.textContent:r.innerText),u+t+f}function f(n){return n.replace(/&/g,"&amp;").replace(ht,function(n){var t=n.charCodeAt(0),i=n.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(ct,function(n){var t=n.charCodeAt(0);return t<=159||t==173||t>=1536&&t<=1540||t==1807||t==6068||t==6069||t>=8204&&t<=8207||t>=8232&&t<=8239||t>=8288&&t<=8303||t==65279||t>=65520&&t<=65535?"&#"+t+";":n}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function bt(n){var i="",r=n.split(";");return t.forEach(r,function(n){var u=n.split(":"),r,n;u.length==2&&(r=g(t.lowercase(u[0])),n=g(t.lowercase(u[1])),((r==="color"||r==="background-color")&&(n.match(/^rgb\([0-9%,\. ]*\)$/i)||n.match(/^rgba\([0-9%,\. ]*\)$/i)||n.match(/^hsl\([0-9%,\. ]*\)$/i)||n.match(/^hsla\([0-9%,\. ]*\)$/i)||n.match(/^#[0-9a-f]{3,6}$/i)||n.match(/^[a-z]*$/i))||r==="text-align"&&(n==="left"||n==="right"||n==="center"||n==="justify")||r==="float"&&(n==="left"||n==="right"||n==="none")||(r==="width"||r==="height")&&n.match(/[0-9\.]*(px|em|rem|%)/)||r==="direction"&&n.match(/^ltr|rtl|initial|inherit$/))&&(i+=r+": "+n+";"))}),i}function kt(n,t,i,r){return n==="img"&&t["ta-insert-video"]&&(i==="ta-insert-video"||i==="allowfullscreen"||i==="frameborder"||i==="contenteditable"&&r==="false")?!0:!1}function nt(n,i){var u=!1,r=t.bind(n,n.push);return{start:function(n,e,o){n=t.lowercase(n);!u&&b[n]&&(u=n);u||k[n]!==!0||(r("<"),r(n),t.forEach(e,function(u,o){var s=t.lowercase(o),h=n==="img"&&s==="src"||s==="background";(s==="style"&&(u=bt(u))!==""||kt(n,e,s,u)||yt[s]===!0&&(d[s]!==!0||i(u,h)))&&(r(" "),r(o),r('="'),r(f(u)),r('"'))}),r(o?"/>":">"))},comment:function(n){r(n)},whitespace:function(n){r(f(n))},end:function(n){n=t.lowercase(n);u||k[n]!==!0||(r("<\/"),r(n),r(">"));n==u&&(u=!1)},chars:function(n){u||r(f(n))}}}var tt=t.$$minErr("$sanitize"),e=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,o=/^<\/\s*([\w:-]+)[^>]*>/,ut=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,ft=/^</,et=/^<\//,ot=/<!--(.*?)-->/g,s=/(^<!--.*?-->)/,h=/<!DOCTYPE([^>]*?)>/i,st=/<!\[CDATA\[(.*?)]]>/g,ht=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ct=/([^\#-~| |!])/g,c=/^(\s+)/,l=i("area,br,col,hr,img,wbr,input"),a=i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v=i("rp,rt"),y=t.extend({},v,a),p=t.extend({},a,i("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),w=t.extend({},v,i("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),lt=i("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),b=i("script,style"),k=t.extend({},l,p,w,y,lt),d=i("background,cite,href,longdesc,src,usemap,xlink:href"),at=i("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),vt=i("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),yt=t.extend({},d,vt,at),r=document.createElement("pre"),wt=/^(\s*)([\s\S]*?)(\s*)$/,g=function(){return String.prototype.trim?function(n){return t.isString(n)?n.trim():n}:function(n){return t.isString(n)?n.replace(/^\s\s*/,"").replace(/\s\s*$/,""):n}}();t.module("ngSanitize",[]).provider("$sanitize",it);t.module("ngSanitize").filter("linky",["$sanitize",function(n){var i=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,r=/^mailto:/;return function(u,f){function l(n){n&&o.push(rt(n))}function a(n,i){o.push("<a ");t.isDefined(f)&&o.push('target="',f,'" ');o.push('href="',n.replace(/"/g,"&quot;"),'">');l(i);o.push("<\/a>")}if(!u)return u;for(var e,s=u,o=[],h,c;e=s.match(i);)h=e[0],e[2]||e[4]||(h=(e[3]?"http://":"mailto:")+h),c=e.index,l(s.substr(0,c)),a(h,e[0].replace(r,"")),s=s.substring(c+e[0].length);return l(s),n(o.join(""))}}])})(window,window.angular);taTools={};angular.module("textAngularSetup",[]).constant("taRegisterTool",registerTextAngularTool).value("taTools",taTools).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(){},htmlEditorSetup:function(){}},defaultFileDropHandler:function(n,t){var i=new FileReader;return n.type.substring(0,5)==="image"?(i.onload=function(){i.result!==""&&t("insertImage",i.result,!0)},i.readAsDataURL(n),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(n){var t=angular.element("<iframe><\/iframe>"),i=n.prop("attributes");angular.forEach(i,function(n){t.attr(n.name,n.value)});t.attr("src",t.attr("ta-insert-video"));n.replaceWith(t)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(n,t){return{imgOnSelectAction:function(n,t,i){var u=function(){i.updateTaBindtaTextElement();i.hidePopover()},f,r,e,o,s,h,c,l,a,v;n.preventDefault();i.displayElements.popover.css("width","375px");f=i.displayElements.popoverContainer;f.empty();r=angular.element('<div class="btn-group" style="padding-right: 6px;">');e=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% <\/button>');e.on("click",function(n){n.preventDefault();t.css({width:"100%",height:""});u()});o=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% <\/button>');o.on("click",function(n){n.preventDefault();t.css({width:"50%",height:""});u()});s=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% <\/button>');s.on("click",function(n){n.preventDefault();t.css({width:"25%",height:""});u()});h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset<\/button>');h.on("click",function(n){n.preventDefault();t.css({width:"",height:""});u()});r.append(e);r.append(o);r.append(s);r.append(h);f.append(r);r=angular.element('<div class="btn-group" style="padding-right: 6px;">');c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"><\/i><\/button>');c.on("click",function(n){n.preventDefault();t.css("float","left");t.css("cssFloat","left");t.css("styleFloat","left");u()});l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"><\/i><\/button>');l.on("click",function(n){n.preventDefault();t.css("float","right");t.css("cssFloat","right");t.css("styleFloat","right");u()});a=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"><\/i><\/button>');a.on("click",function(n){n.preventDefault();t.css("float","");t.css("cssFloat","");t.css("styleFloat","");u()});r.append(c);r.append(a);r.append(l);f.append(r);r=angular.element('<div class="btn-group">');v=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"><\/i><\/button>');v.on("click",function(n){n.preventDefault();t.remove();u()});r.append(v);f.append(r);i.showPopover(t);i.showResizeOverlay(t)},aOnSelectAction:function(i,r,u){var f,s,e,h,c,o;i.preventDefault();u.displayElements.popover.css("width","436px");f=u.displayElements.popoverContainer;f.empty();f.css("line-height","28px");s=angular.element('<a href="'+r.attr("href")+'" target="_blank">'+r.attr("href")+"<\/a>");s.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"});f.append(s);e=angular.element('<div class="btn-group pull-right">');h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"><\/i><\/button>');h.on("click",function(i){i.preventDefault();var f=n.prompt(t.insertLink.dialogPrompt,r.attr("href"));f&&f!==""&&f!=="http://"&&(r.attr("href",f),u.updateTaBindtaTextElement());u.hidePopover()});e.append(h);c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"><\/i><\/button>');c.on("click",function(n){n.preventDefault();r.replaceWith(r.contents());u.updateTaBindtaTextElement();u.hidePopover()});e.append(c);o=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+t.editLink.targetToggle.buttontext+"<\/button>");r.attr("target")==="_blank"&&o.addClass("active");o.on("click",function(n){n.preventDefault();r.attr("target",r.attr("target")==="_blank"?"":"_blank");o.toggleClass("active");u.updateTaBindtaTextElement()});e.append(o);f.append(e);u.showPopover(r)},extractYoutubeVideoId:function(n){var t=n.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i);return t&&t[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions",function(n,t,i,r,u,f,e){var o={},s,h;if(f("",o),e.forceTextAngularSanitize===!0&&o.version!=="taSanitize")throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");n("html",{iconclass:"fa fa-code",tooltiptext:i.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});s=function(n){return function(){return this.$editor().queryFormatBlockState(n)}};h=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(t){n(t.toLowerCase(),{buttontext:t.toUpperCase(),tooltiptext:i.heading.tooltip+t.charAt(1),action:h,activeState:s(t.toLowerCase())})});n("p",{buttontext:"P",tooltiptext:i.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}});n("pre",{buttontext:"pre",tooltiptext:i.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}});n("ul",{iconclass:"fa fa-list-ul",tooltiptext:i.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}});n("ol",{iconclass:"fa fa-list-ol",tooltiptext:i.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}});n("quote",{iconclass:"fa fa-quote-right",tooltiptext:i.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}});n("undo",{iconclass:"fa fa-undo",tooltiptext:i.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}});n("redo",{iconclass:"fa fa-repeat",tooltiptext:i.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}});n("bold",{iconclass:"fa fa-bold",tooltiptext:i.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98});n("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:i.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(n){if(n&&n.nodeName==="#document")return!1;var t=!1;return n&&(t=n.css("text-align")==="left"||n.attr("align")==="left"||n.css("text-align")!=="right"&&n.css("text-align")!=="center"&&n.css("text-align")!=="justify"&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),t||this.$editor().queryCommandState("justifyLeft")}});n("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:i.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(n){if(n&&n.nodeName==="#document")return!1;var t=!1;return n&&(t=n.css("text-align")==="right"),t||this.$editor().queryCommandState("justifyRight")}});n("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:i.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(n){var t=!1;return n&&(t=n.css("text-align")==="justify"),t||this.$editor().queryCommandState("justifyFull")}});n("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:i.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(n){if(n&&n.nodeName==="#document")return!1;var t=!1;return n&&(t=n.css("text-align")==="center"),t||this.$editor().queryCommandState("justifyCenter")}});n("indent",{iconclass:"fa fa-indent",tooltiptext:i.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"});n("outdent",{iconclass:"fa fa-outdent",tooltiptext:i.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"});n("italics",{iconclass:"fa fa-italic",tooltiptext:i.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105});n("underline",{iconclass:"fa fa-underline",tooltiptext:i.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117});n("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:i.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}});n("clear",{iconclass:"fa fa-ban",tooltiptext:i.clear.tooltip,action:function(n,t){var i,u,c,f,o,l,a,p,v;if(this.$editor().wrapSelection("removeFormat",null),u=angular.element(r.getSelectionElement()),c=function(n){n=angular.element(n);var t=n;angular.forEach(n.children(),function(n){var i=angular.element("<p><\/p>");i.html(angular.element(n).html());t.after(i);t=i});n.remove()},angular.forEach(u.find("ul"),c),angular.forEach(u.find("ol"),c),u[0].tagName.toLowerCase()==="li"){var h=u[0].parentNode.childNodes,s=[],e=[],y=!1;for(i=0;i<h.length;i++)h[i]===u[0]?y=!0:y?e.push(h[i]):s.push(h[i]);if(f=angular.element(u[0].parentNode),o=angular.element("<p><\/p>"),o.html(angular.element(u[0]).html()),s.length===0||e.length===0)e.length===0?f.after(o):f[0].parentNode.insertBefore(o[0],f[0]),s.length===0&&e.length===0?f.remove():angular.element(u[0]).remove();else{for(l=angular.element("<"+f[0].tagName+"><\/"+f[0].tagName+">"),a=angular.element("<"+f[0].tagName+"><\/"+f[0].tagName+">"),i=0;i<s.length;i++)l.append(angular.element(s[i]));for(i=0;i<e.length;i++)a.append(angular.element(e[i]));f.after(a);f.after(o);f.after(l);f.remove()}r.setSelectionToElementEnd(o[0])}p=this.$editor();v=function(n){n=angular.element(n);n[0]!==p.displayElements.text[0]&&n.removeAttr("class");angular.forEach(n.children(),v)};angular.forEach(u,v);u[0].tagName.toLowerCase()!=="li"&&u[0].tagName.toLowerCase()!=="ol"&&u[0].tagName.toLowerCase()!=="ul"&&this.$editor().wrapSelection("formatBlock","default");t()}});n("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:i.insertImage.tooltip,action:function(){var n;return n=t.prompt(i.insertImage.dialogPrompt,"http://"),n&&n!==""&&n!=="http://"?this.$editor().wrapSelection("insertImage",n,!0):void 0},onElementSelect:{element:"img",action:u.imgOnSelectAction}});n("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:i.insertVideo.tooltip,action:function(){var n,r,f;return n=t.prompt(i.insertVideo.dialogPrompt,"https://"),n&&n!==""&&n!=="https://"&&(videoId=u.extractYoutubeVideoId(n),videoId)?(r="https://www.youtube.com/embed/"+videoId,f='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+r+'" contenteditable="false" allowfullscreen="true" frameborder="0" />',this.$editor().wrapSelection("insertHTML",f,!0)):void 0},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:u.imgOnSelectAction}});n("insertLink",{tooltiptext:i.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var n;return n=t.prompt(i.insertLink.dialogPrompt,"http://"),n&&n!==""&&n!=="http://"?this.$editor().wrapSelection("createLink",n,!0):void 0},activeState:function(n){return n?n[0].tagName==="A":!1},onElementSelect:{element:"a",action:u.aOnSelectAction}});n("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"><\/span><\/div>',disabled:!0,wordcount:0,activeState:function(){var i=this.$editor().displayElements.text,t=i[0].innerHTML||"",n=0;return t.replace(/\s*<[^>]*?>\s*/g,"")!==""&&(n=t.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/ig," ").replace(/(<[^>]*?>)/ig,"").replace(/\s+/ig," ").match(/\S+/g).length),this.wordcount=n,this.$editor().wordcount=n,!1}});n("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"><\/span><\/div>',disabled:!0,charcount:0,activeState:function(){var n=this.$editor().displayElements.text,i=n[0].innerText||n[0].textContent,t=i.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=t,this.$editor().charcount=t,!1}})}]);
(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t(require("angular"),function(){try{return require("interact.js")}catch(n){}}(),require("moment")):typeof define=="function"&&define.amd?define(["angular","interact","moment"],t):typeof exports=="object"?exports.angularBootstrapCalendarModuleName=t(require("angular"),function(){try{return require("interact.js")}catch(n){}}(),require("moment")):n.angularBootstrapCalendarModuleName=t(n.angular,n.interact,n.moment)})(this,function(n,t,i){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){"use strict";i(8);n.exports=i(12)},,,,,,,,function(){},,,,function(n,t,i){"use strict";function r(n){n.keys().forEach(n)}var u=i(13);n.exports=u.module("mwl.calendar",[]).constant("calendarUseTemplates",!0).run(["$templateCache","calendarUseTemplates",function(n,t){t&&(n.put("calendarMonthCellEvents.html",i(14)),n.put("calendarMonthCell.html",i(15)))}]).name;r(i(16));r(i(37));r(i(41))},function(t){t.exports=n},function(n){n.exports='<div class="events-list" ng-show="day.events.length > 0">\n  <a\n    ng-repeat="event in day.events | orderBy:\'startsAt\' track by event.$id"\n    href="javascript:;"\n    ng-click="vm.onEventClick({calendarEvent: event})"\n    class="pull-left event"\n    ng-class="\'event-\' + event.type + \' \' + event.cssClass"\n    ng-mouseenter="vm.highlightEvent(event, true)"\n    ng-mouseleave="vm.highlightEvent(event, false)"\n    tooltip-append-to-body="true"\n    tooltip-html-unsafe="{{ (event.startsAt | calendarDate:\'time\':true) + (vm.calendarConfig.displayEventEndTimes && event.endsAt ? \' - \' + (event.endsAt | calendarDate:\'time\':true) : \'\') + \' - \' + event.title }}"\n    mwl-draggable="event.draggable === true"\n    drop-data="{event: event}">\n  <\/a>\n<\/div>\n'},function(n){n.exports='<div\n  mwl-droppable\n  on-drop="vm.handleEventDrop(dropData.event, day.date)"\n  class="cal-month-day {{ day.cssClass }}"\n  ng-class="{\n            \'cal-day-outmonth\': !day.inMonth,\n            \'cal-day-inmonth\': day.inMonth,\n            \'cal-day-weekend\': day.isWeekend,\n            \'cal-day-past\': day.isPast,\n            \'cal-day-today\': day.isToday,\n            \'cal-day-future\': day.isFuture\n          }">\n\n  <small\n    class="cal-events-num badge badge-important pull-left"\n    ng-show="day.badgeTotal > 0"\n    ng-bind="day.badgeTotal">\n  <\/small>\n\n  <span\n    class="pull-right"\n    data-cal-date\n    ng-click="vm.calendarCtrl.drillDown(day.date)"\n    ng-bind="day.label">\n  <\/span>\n\n  <div class="cal-day-tick" ng-show="dayIndex === vm.openDayIndex && vm.view[vm.openDayIndex].events.length > 0">\n    <i class="glyphicon glyphicon-chevron-up"><\/i>\n    <i class="fa fa-chevron-up"><\/i>\n  <\/div>\n\n  <ng-include src="vm.cellEventsTemplateUrl || \'calendarMonthCellEvents.html\'"><\/ng-include>\n\n  <div id="cal-week-box" ng-if="$first && rowHovered">\n    Week {{ day.date.week() }}\n  <\/div>\n\n<\/div>\n'},function(n,t,i){function r(n){return i(f(n))}function f(n){return u[n]||function(){throw new Error("Cannot find module '"+n+"'.");}()}var u={"./mwlCalendar.js":17,"./mwlCalendarDay.js":19,"./mwlCalendarHourList.js":21,"./mwlCalendarMonth.js":23,"./mwlCalendarSlideBox.js":25,"./mwlCalendarWeek.js":27,"./mwlCalendarYear.js":29,"./mwlCollapseFallback.js":31,"./mwlDateModifier.js":32,"./mwlDraggable.js":33,"./mwlDroppable.js":34,"./mwlElementDimensions.js":35,"./mwlResizable.js":36};r.keys=function(){return Object.keys(u)};r.resolve=f;n.exports=r;r.id=16},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlCalendarCtrl",["$scope","$log","$timeout","$attrs","$locale","moment","calendarTitle",function(n,t,i,u,f,e,o){function v(n){return n.startsAt||t.warn("Bootstrap calendar: ","Event is missing the startsAt field",n),r.isDate(n.startsAt)||t.warn("Bootstrap calendar: ","Event startsAt should be a javascript date object",n),r.isDefined(n.endsAt)&&(r.isDate(n.endsAt)||t.warn("Bootstrap calendar: ","Event endsAt should be a javascript date object",n),e(n.startsAt).isAfter(e(n.endsAt))&&t.warn("Bootstrap calendar: ","Event cannot start after it finishes",n)),!0}function a(){o[s.view]&&r.isDefined(u.viewTitle)&&(s.viewTitle=o[s.view](s.currentDay));s.events=s.events.filter(v).map(function(n,t){return Object.defineProperty(n,"$id",{enumerable:!1,configurable:!0,value:t}),n});var t=e(s.currentDay),f=!0;h.clone().startOf(s.view).isSame(t.clone().startOf(s.view))&&!h.isSame(t)&&s.view===c&&(f=!1);h=t;c=s.view;f&&i(function(){n.$broadcast("calendar.refreshView")})}var s=this,h,c,l;s.events=s.events||[];s.changeView=function(n,t){s.view=n;s.currentDay=t};s.drillDown=function(n){var t=e(n).toDate(),i={year:"month",month:"day",week:"day"};s.onDrillDownClick({calendarDate:t,calendarNextView:i[s.view]})!==!1&&s.changeView(i[s.view],t)};h=e(s.currentDay);c=s.view;l=!1;n.$watchGroup(["vm.currentDay","vm.view",function(){return e.locale()+f.id}],function(){l?a():(l=!0,n.$watch("vm.events",a,!0))})}]).directive("mwlCalendar",["calendarUseTemplates",function(n){return{template:n?i(18):"",restrict:"EA",scope:{events:"=",view:"=",viewTitle:"=?",currentDay:"=",editEventHtml:"=",deleteEventHtml:"=",autoOpen:"=",onEventClick:"&",onEventTimesChanged:"&",onEditEventClick:"&",onDeleteEventClick:"&",onTimespanClick:"&",onDrillDownClick:"&",cellModifier:"&",dayViewStart:"@",dayViewEnd:"@",dayViewSplit:"@",monthCellTemplateUrl:"@",monthCellEventsTemplateUrl:"@"},controller:"MwlCalendarCtrl as vm",bindToController:!0}}])},function(n){n.exports='<div class="cal-context" ng-switch="vm.view">\n\n  <div class="alert alert-danger" ng-switch-default>The value passed to the view attribute of the calendar is not set<\/div>\n\n  <div class="alert alert-danger" ng-hide="vm.currentDay">The value passed to current-day attribute of the calendar is not set<\/div>\n\n  <mwl-calendar-year\n    events="vm.events"\n    current-day="vm.currentDay"\n    on-event-click="vm.onEventClick"\n    on-event-times-changed="vm.onEventTimesChanged"\n    on-edit-event-click="vm.onEditEventClick"\n    on-delete-event-click="vm.onDeleteEventClick"\n    on-timespan-click="vm.onTimespanClick"\n    edit-event-html="vm.editEventHtml"\n    delete-event-html="vm.deleteEventHtml"\n    auto-open="vm.autoOpen"\n    cell-modifier="vm.cellModifier"\n    ng-switch-when="year"\n  ><\/mwl-calendar-year>\n\n  <mwl-calendar-month\n    events="vm.events"\n    current-day="vm.currentDay"\n    on-event-click="vm.onEventClick"\n    on-event-times-changed="vm.onEventTimesChanged"\n    on-edit-event-click="vm.onEditEventClick"\n    on-delete-event-click="vm.onDeleteEventClick"\n    on-timespan-click="vm.onTimespanClick"\n    edit-event-html="vm.editEventHtml"\n    delete-event-html="vm.deleteEventHtml"\n    auto-open="vm.autoOpen"\n    cell-modifier="vm.cellModifier"\n    cell-template-url="{{ vm.monthCellTemplateUrl }}"\n    cell-events-template-url="{{ vm.monthCellEventsTemplateUrl }}"\n    ng-switch-when="month"\n    ><\/mwl-calendar-month>\n\n  <mwl-calendar-week\n    events="vm.events"\n    current-day="vm.currentDay"\n    on-event-click="vm.onEventClick"\n    on-event-times-changed="vm.onEventTimesChanged"\n    day-view-start="vm.dayViewStart"\n    day-view-end="vm.dayViewEnd"\n    day-view-split="vm.dayViewSplit"\n    ng-switch-when="week"\n    ><\/mwl-calendar-week>\n\n  <mwl-calendar-day\n    events="vm.events"\n    current-day="vm.currentDay"\n    on-event-click="vm.onEventClick"\n    on-event-times-changed="vm.onEventTimesChanged"\n    on-timespan-click="vm.onTimespanClick"\n    day-view-start="vm.dayViewStart"\n    day-view-end="vm.dayViewEnd"\n    day-view-split="vm.dayViewSplit"\n    ng-switch-when="day"\n    ><\/mwl-calendar-day>\n<\/div>\n'},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlCalendarDayCtrl",["$scope","$sce","moment","calendarHelper","calendarConfig",function(n,t,i,r,u){var f=this;f.calendarConfig=u;f.$sce=t;n.$on("calendar.refreshView",function(){f.dayViewSplit=f.dayViewSplit||30;f.dayViewHeight=r.getDayViewHeight(f.dayViewStart,f.dayViewEnd,f.dayViewSplit);f.view=r.getDayView(f.events,f.currentDay,f.dayViewStart,f.dayViewEnd,f.dayViewSplit)});f.eventDragComplete=function(n,t){var r=t*f.dayViewSplit,u=i(n.startsAt).add(r,"minutes"),e=i(n.endsAt).add(r,"minutes");delete n.tempStartsAt;f.onEventTimesChanged({calendarEvent:n,calendarNewEventStart:u.toDate(),calendarNewEventEnd:n.endsAt?e.toDate():null})};f.eventDragged=function(n,t){var r=t*f.dayViewSplit;n.tempStartsAt=i(n.startsAt).add(r,"minutes").toDate()};f.eventResizeComplete=function(n,t,r){var u=r*f.dayViewSplit,e=i(n.startsAt),o=i(n.endsAt);t==="start"?e.add(u,"minutes"):o.add(u,"minutes");delete n.tempStartsAt;f.onEventTimesChanged({calendarEvent:n,calendarNewEventStart:e.toDate(),calendarNewEventEnd:o.toDate()})};f.eventResized=function(n,t,r){var u=r*f.dayViewSplit;t==="start"&&(n.tempStartsAt=i(n.startsAt).add(u,"minutes").toDate())}}]).directive("mwlCalendarDay",["calendarUseTemplates",function(n){return{template:n?i(20):"",restrict:"EA",require:"^mwlCalendar",scope:{events:"=",currentDay:"=",onEventClick:"=",onEventTimesChanged:"=",onTimespanClick:"=",dayViewStart:"=",dayViewEnd:"=",dayViewSplit:"="},controller:"MwlCalendarDayCtrl as vm",bindToController:!0}}])},function(n){n.exports='<div class="cal-day-box">\n  <div class="row-fluid clearfix cal-row-head">\n    <div class="span1 col-xs-1 cal-cell" ng-bind="vm.calendarConfig.i18nStrings.timeLabel"><\/div>\n    <div class="span11 col-xs-11 cal-cell" ng-bind="vm.calendarConfig.i18nStrings.eventsLabel"><\/div>\n  <\/div>\n\n  <div class="cal-day-panel clearfix" ng-style="{height: vm.dayViewHeight + \'px\'}">\n\n    <mwl-calendar-hour-list\n      day-view-start="vm.dayViewStart"\n      day-view-end="vm.dayViewEnd"\n      day-view-split="vm.dayViewSplit"\n      on-timespan-click="vm.onTimespanClick"\n      current-day="vm.currentDay">\n    <\/mwl-calendar-hour-list>\n\n    <div\n      class="pull-left day-event day-highlight"\n      ng-repeat="event in vm.view track by event.$id"\n      ng-class="\'dh-event-\' + event.type + \' \' + event.cssClass"\n      ng-style="{top: event.top + \'px\', left: event.left + 60 + \'px\', height: event.height + \'px\'}"\n      mwl-draggable="event.draggable === true"\n      axis="\'y\'"\n      snap-grid="{y: 30}"\n      on-drag="vm.eventDragged(event, y)"\n      on-drag-end="vm.eventDragComplete(event, y)"\n      mwl-resizable="event.resizable === true && event.endsAt"\n      resize-edges="{top: true, bottom: true}"\n      on-resize="vm.eventResized(event, edge, y)"\n      on-resize-end="vm.eventResizeComplete(event, edge, y)">\n\n      <span class="cal-hours">\n        <span ng-show="event.top == 0"><span ng-bind="(event.tempStartsAt || event.startsAt) | calendarDate:\'day\':true"><\/span>, <\/span>\n        <span ng-bind="(event.tempStartsAt || event.startsAt) | calendarDate:\'time\':true"><\/span>\n      <\/span>\n      <a href="javascript:;" class="event-item" ng-click="vm.onEventClick({calendarEvent: event})">\n        <span ng-bind-html="vm.$sce.trustAsHtml(event.title) | calendarTruncateEventTitle:20:event.height"><\/span>\n      <\/a>\n\n    <\/div>\n\n  <\/div>\n\n<\/div>\n'},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlCalendarHourListCtrl",["$scope","moment","calendarConfig","calendarHelper",function(n,t,i,r){function o(){var n,o;for(f=t(u.dayViewStart||"00:00","HH:mm"),e=t(u.dayViewEnd||"23:00","HH:mm"),u.dayViewSplit=parseInt(u.dayViewSplit),u.hours=[],n=t(u.currentDay).clone().hours(f.hours()).minutes(f.minutes()).seconds(f.seconds()),o=0;o<=e.diff(f,"hours");o++)u.hours.push({label:r.formatDate(n,i.dateFormats.hour),date:n.clone()}),n.add(1,"hour")}var u=this,f,e,s=t.locale();n.$on("calendar.refreshView",function(){s!==t.locale()&&(s=t.locale(),o())});n.$watchGroup(["vm.dayViewStart","vm.dayViewEnd","vm.dayViewSplit","vm.currentDay"],function(){o()})}]).directive("mwlCalendarHourList",["calendarUseTemplates",function(n){return{restrict:"EA",template:n?i(22):"",controller:"MwlCalendarHourListCtrl as vm",scope:{currentDay:"=",dayViewStart:"=",dayViewEnd:"=",dayViewSplit:"=",onTimespanClick:"="},bindToController:!0}}])},function(n){n.exports='<div class="cal-day-panel-hour">\n\n  <div class="cal-day-hour" ng-repeat="hour in vm.hours track by $index">\n\n    <div\n      class="row-fluid cal-day-hour-part"\n      ng-click="vm.onTimespanClick({calendarDate: hour.date.toDate()})">\n      <div class="span1 col-xs-1"><strong ng-bind="hour.label"><\/strong><\/div>\n      <div class="span11 col-xs-11"><\/div>\n    <\/div>\n\n    <div\n      class="row-fluid cal-day-hour-part"\n      ng-click="vm.onTimespanClick({calendarDate: hour.date.clone().add(vm.dayViewSplit, \'minutes\').toDate()})">\n      <div class="span1 col-xs-1"><\/div>\n      <div class="span11 col-xs-11"><\/div>\n    <\/div>\n\n    <div\n      class="row-fluid cal-day-hour-part"\n      ng-show="vm.dayViewSplit < 30"\n      ng-click="vm.onTimespanClick({calendarDate: hour.date.clone().add(vm.dayViewSplit * 2, \'minutes\').toDate()})">\n      <div class="span1 col-xs-1"><\/div>\n      <div class="span11 col-xs-11"><\/div>\n    <\/div>\n\n    <div\n      class="row-fluid cal-day-hour-part"\n      ng-show="vm.dayViewSplit < 30"\n      ng-click="vm.onTimespanClick({calendarDate: hour.date.clone().add(vm.dayViewSplit * 3, \'minutes\').toDate()})">\n      <div class="span1 col-xs-1"><\/div>\n      <div class="span11 col-xs-11"><\/div>\n    <\/div>\n\n    <div\n      class="row-fluid cal-day-hour-part"\n      ng-show="vm.dayViewSplit < 15"\n      ng-click="vm.onTimespanClick({calendarDate: hour.date.clone().add(vm.dayViewSplit * 4, \'minutes\').toDate()})">\n      <div class="span1 col-xs-1"><\/div>\n      <div class="span11 col-xs-11"><\/div>\n    <\/div>\n\n    <div\n      class="row-fluid cal-day-hour-part"\n      ng-show="vm.dayViewSplit < 15"\n      ng-click="vm.onTimespanClick({calendarDate: hour.date.clone().add(vm.dayViewSplit * 5, \'minutes\').toDate()})">\n      <div class="span1 col-xs-1"><\/div>\n      <div class="span11 col-xs-11"><\/div>\n    <\/div>\n\n  <\/div>\n\n<\/div>\n'},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlCalendarMonthCtrl",["$scope","moment","calendarHelper","calendarConfig",function(n,t,i,r){var u=this;u.calendarConfig=r;n.$on("calendar.refreshView",function(){var r,n;for(u.weekDays=i.getWeekDayNames(),u.view=i.getMonthView(u.events,u.currentDay,u.cellModifier),r=Math.floor(u.view.length/7),u.monthOffsets=[],n=0;n<r;n++)u.monthOffsets.push(n*7);u.autoOpen&&u.view.forEach(function(n){n.inMonth&&t(u.currentDay).startOf("day").isSame(n.date)&&!u.openDayIndex&&u.dayClicked(n,!0)})});u.dayClicked=function(n,t,i){if(!t){u.onTimespanClick({calendarDate:n.date.toDate(),$event:i});if(i&&i.defaultPrevented)return}u.openRowIndex=null;var r=u.view.indexOf(n);r===u.openDayIndex?u.openDayIndex=null:(u.openDayIndex=r,u.openRowIndex=Math.floor(r/7))};u.highlightEvent=function(n,t){u.view.forEach(function(i){if(delete i.highlightClass,t){var r=i.events.indexOf(n)>-1;r&&(i.highlightClass="day-highlight dh-event-"+n.type)}})};u.handleEventDrop=function(n,r){var f=t(n.startsAt).date(t(r).date()).month(t(r).month()),e=i.adjustEndDateFromStartDiff(n.startsAt,f,n.endsAt);u.onEventTimesChanged({calendarEvent:n,calendarDate:r,calendarNewEventStart:f.toDate(),calendarNewEventEnd:e?e.toDate():null})}}]).directive("mwlCalendarMonth",["calendarUseTemplates",function(n){return{template:n?i(24):"",restrict:"EA",require:"^mwlCalendar",scope:{events:"=",currentDay:"=",onEventClick:"=",onEditEventClick:"=",onDeleteEventClick:"=",onEventTimesChanged:"=",editEventHtml:"=",deleteEventHtml:"=",autoOpen:"=",onTimespanClick:"=",cellModifier:"=",cellTemplateUrl:"@",cellEventsTemplateUrl:"@"},controller:"MwlCalendarMonthCtrl as vm",link:function(n,t,i,r){n.vm.calendarCtrl=r},bindToController:!0}}])},function(n){n.exports='<div class="cal-row-fluid cal-row-head">\n\n  <div class="cal-cell1" ng-repeat="day in vm.weekDays track by $index" ng-bind="day"><\/div>\n\n<\/div>\n<div class="cal-month-box">\n\n  <div\n    ng-repeat="rowOffset in vm.monthOffsets track by rowOffset"\n    ng-mouseenter="rowHovered = true"\n    ng-mouseleave="rowHovered = false">\n    <div class="cal-row-fluid cal-before-eventlist">\n      <div\n        ng-repeat="day in vm.view | calendarLimitTo:7:rowOffset track by $index"\n        ng-init="dayIndex = vm.view.indexOf(day)"\n        class="cal-cell1 cal-cell {{ day.highlightClass }}"\n        ng-click="vm.dayClicked(day, false, $event)"\n        ng-class="{pointer: day.events.length > 0}">\n        <ng-include src="vm.cellTemplateUrl || \'calendarMonthCell.html\'"><\/ng-include>\n      <\/div>\n    <\/div>\n\n    <mwl-calendar-slide-box\n      is-open="vm.openRowIndex === $index && vm.view[vm.openDayIndex].events.length > 0"\n      events="vm.view[vm.openDayIndex].events"\n      on-event-click="vm.onEventClick"\n      edit-event-html="vm.editEventHtml"\n      on-edit-event-click="vm.onEditEventClick"\n      delete-event-html="vm.deleteEventHtml"\n      on-delete-event-click="vm.onDeleteEventClick">\n    <\/mwl-calendar-slide-box>\n\n  <\/div>\n\n<\/div>\n'},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlCalendarSlideBoxCtrl",["$sce","$scope","$timeout","calendarConfig",function(n,t,i,r){var u=this;u.$sce=n;u.calendarConfig=r;u.isCollapsed=!0;t.$watch("vm.isOpen",function(n){i(function(){u.isCollapsed=!n})})}]).directive("mwlCalendarSlideBox",["calendarUseTemplates",function(n){return{restrict:"EA",template:n?i(26):"",replace:!0,controller:"MwlCalendarSlideBoxCtrl as vm",require:["^?mwlCalendarMonth","^?mwlCalendarYear"],link:function(n,t,i,r){n.isMonthView=!!r[0];n.isYearView=!!r[1]},scope:{isOpen:"=",events:"=",onEventClick:"=",editEventHtml:"=",onEditEventClick:"=",deleteEventHtml:"=",onDeleteEventClick:"="},bindToController:!0}}])},function(n){n.exports='<div class="cal-slide-box" collapse="vm.isCollapsed" mwl-collapse-fallback="vm.isCollapsed">\n  <div class="cal-slide-content cal-event-list">\n    <ul class="unstyled list-unstyled">\n\n      <li\n        ng-repeat="event in vm.events | orderBy:\'startsAt\' track by event.$id"\n        ng-class="event.cssClass"\n        mwl-draggable="event.draggable === true"\n        drop-data="{event: event}">\n        <span class="pull-left event" ng-class="\'event-\' + event.type"><\/span>\n        &nbsp;\n        <a\n          href="javascript:;"\n          class="event-item"\n          ng-click="vm.onEventClick({calendarEvent: event})">\n          <span ng-bind-html="vm.$sce.trustAsHtml(event.title)"><\/span>\n          (<span ng-bind="event.startsAt | calendarDate:(isMonthView ? \'time\' : \'datetime\'):true"><\/span><span ng-if="vm.calendarConfig.displayEventEndTimes && event.endsAt"> - <span ng-bind="event.endsAt | calendarDate:(isMonthView ? \'time\' : \'datetime\'):true"><\/span><\/span>)\n        <\/a>\n\n        <a\n          href="javascript:;"\n          class="event-item-edit"\n          ng-if="vm.editEventHtml && event.editable !== false"\n          ng-bind-html="vm.$sce.trustAsHtml(vm.editEventHtml)"\n          ng-click="vm.onEditEventClick({calendarEvent: event})">\n        <\/a>\n\n        <a\n          href="javascript:;"\n          class="event-item-delete"\n          ng-if="vm.deleteEventHtml && event.deletable !== false"\n          ng-bind-html="vm.$sce.trustAsHtml(vm.deleteEventHtml)"\n          ng-click="vm.onDeleteEventClick({calendarEvent: event})">\n        <\/a>\n      <\/li>\n\n    <\/ul>\n  <\/div>\n<\/div>\n'},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlCalendarWeekCtrl",["$scope","$sce","moment","calendarHelper","calendarConfig",function(n,t,i,r,u){var f=this;f.showTimes=u.showTimesOnWeekView;f.$sce=t;n.$on("calendar.refreshView",function(){f.dayViewSplit=f.dayViewSplit||30;f.dayViewHeight=r.getDayViewHeight(f.dayViewStart,f.dayViewEnd,f.dayViewSplit);f.view=f.showTimes?r.getWeekViewWithTimes(f.events,f.currentDay,f.dayViewStart,f.dayViewEnd,f.dayViewSplit):r.getWeekView(f.events,f.currentDay)});f.weekDragged=function(n,t,r){var u=i(n.startsAt).add(t,"days"),e=i(n.endsAt).add(t,"days"),o;r&&(o=r*f.dayViewSplit,u=u.add(o,"minutes"),e=e.add(o,"minutes"));delete n.tempStartsAt;f.onEventTimesChanged({calendarEvent:n,calendarNewEventStart:u.toDate(),calendarNewEventEnd:n.endsAt?e.toDate():null})};f.weekResized=function(n,t,r){var u=i(n.startsAt),e=i(n.endsAt);t==="start"?u.add(r,"days"):e.add(r,"days");f.onEventTimesChanged({calendarEvent:n,calendarNewEventStart:u.toDate(),calendarNewEventEnd:e.toDate()})};f.tempTimeChanged=function(n,t){var r=t*f.dayViewSplit;n.tempStartsAt=i(n.startsAt).add(r,"minutes").toDate()}}]).directive("mwlCalendarWeek",["calendarUseTemplates",function(n){return{template:n?i(28):"",restrict:"EA",require:"^mwlCalendar",scope:{events:"=",currentDay:"=",onEventClick:"=",onEventTimesChanged:"=",dayViewStart:"=",dayViewEnd:"=",dayViewSplit:"="},controller:"MwlCalendarWeekCtrl as vm",link:function(n,t,i,r){n.vm.calendarCtrl=r},bindToController:!0}}])},function(n){n.exports='<div class="cal-week-box" ng-class="{\'cal-day-box\': vm.showTimes}">\n  <div class="cal-row-fluid cal-row-head">\n\n    <div\n      class="cal-cell1"\n      ng-repeat="day in vm.view.days track by $index"\n      ng-class="{\n        \'cal-day-weekend\': day.isWeekend,\n        \'cal-day-past\': day.isPast,\n        \'cal-day-today\': day.isToday,\n        \'cal-day-future\': day.isFuture}"\n      mwl-element-dimensions="vm.dayColumnDimensions">\n\n      <span ng-bind="day.weekDayLabel"><\/span>\n      <br>\n      <small>\n        <span\n          data-cal-date\n          ng-click="vm.calendarCtrl.drillDown(day.date)"\n          class="pointer"\n          ng-bind="day.dayLabel">\n        <\/span>\n      <\/small>\n\n    <\/div>\n\n  <\/div>\n\n  <div class="cal-day-panel clearfix" ng-style="{height: vm.showTimes ? (vm.dayViewHeight + \'px\') : \'auto\'}">\n\n    <mwl-calendar-hour-list\n      day-view-start="vm.dayViewStart"\n      day-view-end="vm.dayViewEnd"\n      day-view-split="vm.dayViewSplit"\n      current-day="vm.currentDay"\n      ng-if="vm.showTimes">\n    <\/mwl-calendar-hour-list>\n\n    <div class="row">\n      <div class="col-xs-12">\n        <div\n          class="cal-row-fluid "\n          ng-repeat="event in vm.view.events track by event.$id">\n          <div\n            ng-class="\'cal-cell\' + (vm.showTimes ? 1 : event.daySpan) + \' cal-offset\' + event.dayOffset + \' day-highlight dh-event-\' + event.type + \' \' + event.cssClass"\n            ng-style="{top: vm.showTimes ? ((event.top + 2) + \'px\') : \'auto\', position: vm.showTimes ? \'absolute\' : \'inherit\'}"\n            data-event-class\n            mwl-draggable="event.draggable === true"\n            axis="vm.showTimes ? \'xy\' : \'x\'"\n            snap-grid="vm.showTimes ? {x: vm.dayColumnDimensions.width, y: 30} : {x: vm.dayColumnDimensions.width}"\n            on-drag="vm.tempTimeChanged(event, y)"\n            on-drag-end="vm.weekDragged(event, x, y)"\n            mwl-resizable="event.resizable === true && event.endsAt && !vm.showTimes"\n            resize-edges="{left: true, right: true}"\n            on-resize-end="vm.weekResized(event, edge, x)">\n            <strong ng-bind="(event.tempStartsAt || event.startsAt) | calendarDate:\'time\':true" ng-show="vm.showTimes"><\/strong>\n            <a\n              href="javascript:;"\n              ng-click="vm.onEventClick({calendarEvent: event})"\n              class="event-item"\n              ng-bind-html="vm.$sce.trustAsHtml(event.title)"\n              tooltip-html-unsafe="{{ event.title }}"\n              tooltip-placement="left"\n              tooltip-append-to-body="true">\n            <\/a>\n          <\/div>\n        <\/div>\n      <\/div>\n\n    <\/div>\n\n  <\/div>\n<\/div>\n'},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlCalendarYearCtrl",["$scope","moment","calendarHelper",function(n,t,i){var r=this;n.$on("calendar.refreshView",function(){r.view=i.getYearView(r.events,r.currentDay,r.cellModifier);r.autoOpen&&r.view.forEach(function(n){t(r.currentDay).startOf("month").isSame(n.date)&&!r.openMonthIndex&&r.monthClicked(n,!0)})});r.monthClicked=function(n,t,i){if(!t){r.onTimespanClick({calendarDate:n.date.toDate(),$event:i});if(i&&i.defaultPrevented)return}r.openRowIndex=null;var u=r.view.indexOf(n);u===r.openMonthIndex?r.openMonthIndex=null:(r.openMonthIndex=u,r.openRowIndex=Math.floor(u/4))};r.handleEventDrop=function(n,u){var f=t(n.startsAt).month(t(u).month()),e=i.adjustEndDateFromStartDiff(n.startsAt,f,n.endsAt);r.onEventTimesChanged({calendarEvent:n,calendarDate:u,calendarNewEventStart:f.toDate(),calendarNewEventEnd:e?e.toDate():null})}}]).directive("mwlCalendarYear",["calendarUseTemplates",function(n){return{template:n?i(30):"",restrict:"EA",require:"^mwlCalendar",scope:{events:"=",currentDay:"=",onEventClick:"=",onEventTimesChanged:"=",onEditEventClick:"=",onDeleteEventClick:"=",editEventHtml:"=",deleteEventHtml:"=",autoOpen:"=",onTimespanClick:"=",cellModifier:"="},controller:"MwlCalendarYearCtrl as vm",link:function(n,t,i,r){n.vm.calendarCtrl=r},bindToController:!0}}])},function(n){n.exports='<div class="cal-year-box">\n  <div ng-repeat="rowOffset in [0, 4, 8] track by rowOffset">\n    <div class="row cal-before-eventlist">\n      <div\n        class="span3 col-md-3 col-xs-6 cal-cell {{ day.cssClass }}"\n        ng-repeat="month in vm.view | calendarLimitTo:4:rowOffset track by $index"\n        ng-init="monthIndex = vm.view.indexOf(month)"\n        ng-click="vm.monthClicked(month, false, $event)"\n        ng-class="{pointer: month.events.length > 0, \'cal-day-today\': month.isToday}"\n        mwl-droppable\n        on-drop="vm.handleEventDrop(dropData.event, month.date)">\n\n        <span\n          class="pull-right"\n          data-cal-date\n          ng-click="vm.calendarCtrl.drillDown(month.date)"\n          ng-bind="month.label">\n        <\/span>\n\n        <small\n          class="cal-events-num badge badge-important pull-left"\n          ng-show="month.badgeTotal > 0"\n          ng-bind="month.badgeTotal">\n        <\/small>\n\n        <div\n          class="cal-day-tick"\n          ng-show="monthIndex === vm.openMonthIndex && vm.view[vm.openMonthIndex].events.length > 0">\n          <i class="glyphicon glyphicon-chevron-up"><\/i>\n          <i class="fa fa-chevron-up"><\/i>\n        <\/div>\n\n      <\/div>\n    <\/div>\n\n    <mwl-calendar-slide-box\n      is-open="vm.openRowIndex === $index && vm.view[vm.openMonthIndex].events.length > 0"\n      events="vm.view[vm.openMonthIndex].events"\n      on-event-click="vm.onEventClick"\n      edit-event-html="vm.editEventHtml"\n      on-edit-event-click="vm.onEditEventClick"\n      delete-event-html="vm.deleteEventHtml"\n      on-delete-event-click="vm.onDeleteEventClick">\n    <\/mwl-calendar-slide-box>\n\n  <\/div>\n\n<\/div>\n'},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlCollapseFallbackCtrl",["$scope","$attrs","$element",function(n,t,i){n.$watch(t.mwlCollapseFallback,function(n){n?i.addClass("ng-hide"):i.removeClass("ng-hide")})}]).directive("mwlCollapseFallback",["$injector",function(n){return n.has("collapseDirective")?{}:{restrict:"A",controller:"MwlCollapseFallbackCtrl"}}])},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlDateModifierCtrl",["$element","$attrs","$scope","moment",function(n,t,i,u){function e(){r.isDefined(t.setToToday)?f.date=new Date:r.isDefined(t.increment)?f.date=u(f.date).add(1,f.increment).toDate():r.isDefined(t.decrement)&&(f.date=u(f.date).subtract(1,f.decrement).toDate());i.$apply()}var f=this;n.bind("click",e);i.$on("$destroy",function(){n.unbind("click",e)})}]).directive("mwlDateModifier",function(){return{restrict:"A",controller:"MwlDateModifierCtrl as vm",scope:{date:"=",increment:"=",decrement:"="},bindToController:!0}})},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlDraggableCtrl",["$element","$scope","$window","$parse","$attrs","interact",function(n,t,i,u,f,e){function c(n,t){return n.css("-ms-transform",t).css("-webkit-transform",t).css("transform",t)}function s(){return u(f.mwlDraggable)(t)}function l(n,t,i){var r={x:n,y:t};return i&&i.x&&(r.x/=i.x),i&&i.y&&(r.y/=i.y),r}if(e){var h,o;f.snapGrid&&(o=u(f.snapGrid)(t),h={targets:[e.createSnapGrid(o)]});e(n[0]).draggable({snap:h,onstart:function(n){s()&&(r.element(n.target).addClass("dragging-active"),n.target.dropData=u(f.dropData)(t),n.target.style.pointerEvents="none",f.onDragStart&&(u(f.onDragStart)(t),t.$apply()))},onmove:function(n){if(s()){var e=r.element(n.target),h=(parseFloat(e.attr("data-x"))||0)+(n.dx||0),a=(parseFloat(e.attr("data-y"))||0)+(n.dy||0);switch(u(f.axis)(t)){case"x":a=0;break;case"y":h=0}i.getComputedStyle(e[0]).position==="static"&&e.css("position","relative");c(e,"translate("+h+"px, "+a+"px)").css("z-index",1e3).attr("data-x",h).attr("data-y",a);f.onDrag&&(u(f.onDrag)(t,l(h,a,o)),t.$apply())}},onend:function(n){if(s()){var i=r.element(n.target),e=i.attr("data-x"),h=i.attr("data-y");n.target.style.pointerEvents="auto";f.onDragEnd&&(u(f.onDragEnd)(t,l(e,h,o)),t.$apply());c(i,"").removeAttr("data-x").removeAttr("data-y").removeClass("dragging-active")}}});t.$on("$destroy",function(){e(n[0]).unset()})}}]).directive("mwlDraggable",function(){return{restrict:"A",controller:"MwlDraggableCtrl"}})},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlDroppableCtrl",["$element","$scope","$parse","$attrs","interact",function(n,t,i,u,f){f&&(f(n[0]).dropzone({ondragenter:function(n){r.element(n.target).addClass("drop-active")},ondragleave:function(n){r.element(n.target).removeClass("drop-active")},ondropdeactivate:function(n){r.element(n.target).removeClass("drop-active")},ondrop:function(n){n.relatedTarget.dropData&&(i(u.onDrop)(t,{dropData:n.relatedTarget.dropData}),t.$apply())}}),t.$on("$destroy",function(){f(n[0]).unset()}))}]).directive("mwlDroppable",function(){return{restrict:"A",controller:"MwlDroppableCtrl"}})},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlElementDimensionsCtrl",["$element","$scope","$parse","$attrs",function(n,t,i,r){i(r.mwlElementDimensions).assign(t,{width:n[0].offsetWidth,height:n[0].offsetHeight})}]).directive("mwlElementDimensions",function(){return{restrict:"A",controller:"MwlElementDimensionsCtrl"}})},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").controller("MwlResizableCtrl",["$element","$scope","$parse","$attrs","interact",function(n,t,i,u,f){function c(){return i(u.mwlResizable)(t)}function a(n,t,i){var r={};return r.edge=n,n==="start"?(r.x=t.data("x"),r.y=t.data("y")):n==="end"&&(r.x=parseFloat(t.css("width").replace("px",""))-e.width,r.y=parseFloat(t.css("height").replace("px",""))-e.height),i&&i.x&&(r.x=Math.round(r.x/i.x)),i&&i.y&&(r.y=Math.round(r.y/i.y)),r}var l,s,e,o,h;f&&(u.snapGrid&&(s=i(u.snapGrid)(t),l={targets:[f.createSnapGrid(s)]}),e={},o={},f(n[0]).resizable({edges:i(u.resizeEdges)(t),snap:l,onstart:function(n){if(c()){h="end";var t=r.element(n.target);e.height=t[0].offsetHeight;e.width=t[0].offsetWidth;o.height=t.css("height");o.width=t.css("width")}},onmove:function(n){if(c()){var f=r.element(n.target),e=parseFloat(f.data("x")||0),o=parseFloat(f.data("y")||0);f.css({width:n.rect.width+"px",height:n.rect.height+"px"});e+=n.deltaRect.left;o+=n.deltaRect.top;f.css("transform","translate("+e+"px,"+o+"px)");f.data("x",e);f.data("y",o);(n.deltaRect.left!==0||n.deltaRect.top!==0)&&(h="start");u.onResize&&(i(u.onResize)(t,a(h,f,s)),t.$apply())}},onend:function(n){if(c()){var f=r.element(n.target),e=a(h,f,s);f.data("x",null).data("y",null).css({transform:"",width:o.width,height:o.height});u.onResizeEnd&&(i(u.onResizeEnd)(t,e),t.$apply())}}}),t.$on("$destroy",function(){f(n[0]).unset()}))}]).directive("mwlResizable",function(){return{restrict:"A",controller:"MwlResizableCtrl"}})},function(n,t,i){function r(n){return i(f(n))}function f(n){return u[n]||function(){throw new Error("Cannot find module '"+n+"'.");}()}var u={"./calendarDate.js":38,"./calendarLimitTo.js":39,"./calendarTruncateEventTitle.js":40};r.keys=function(){return Object.keys(u)};r.resolve=f;n.exports=r;r.id=37},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").filter("calendarDate",["calendarHelper","calendarConfig",function(n,t){function i(i,r,u){return u===!0&&(r=t.dateFormats[r]),n.formatDate(i,r)}return i.$stateful=!0,i}])},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").filter("calendarLimitTo",["limitToFilter",function(n){return r.version.minor>=4?n:function(n,t,i){return(t=Math.abs(Number(t))===Infinity?Number(t):parseInt(t),isNaN(t))?n:(r.isNumber(n)&&(n=n.toString()),!r.isArray(n)&&!r.isString(n))?n:(i=!i||isNaN(i)?0:parseInt(i),i=i<0&&i>=-n.length?n.length+i:i,t>=0?n.slice(i,i+t):i===0?n.slice(t,n.length):n.slice(Math.max(0,i+t),i))}}])},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").filter("calendarTruncateEventTitle",function(){return function(n,t,i){return n?n.length>=t&&n.length/20>i/30?n.substr(0,t)+"...":n:""}})},function(n,t,i){function r(n){return i(f(n))}function f(n){return u[n]||function(){throw new Error("Cannot find module '"+n+"'.");}()}var u={"./calendarConfig.js":42,"./calendarHelper.js":43,"./calendarTitle.js":44,"./interact.js":45,"./moment.js":47};r.keys=function(){return Object.keys(u)};r.resolve=f;n.exports=r;r.id=41},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").provider("calendarConfig",function(){var i={angular:{date:{hour:"ha",day:"d MMM",month:"MMMM",weekDay:"EEEE",time:"HH:mm",datetime:"MMM d, h:mm a"},title:{day:"EEEE d MMMM, yyyy",week:"Week {week} of {year}",month:"MMMM yyyy",year:"yyyy"}},moment:{date:{hour:"ha",day:"D MMM",month:"MMMM",weekDay:"dddd",time:"HH:mm",datetime:"MMM D, h:mm a"},title:{day:"dddd D MMMM, YYYY",week:"Week {week} of {year}",month:"MMMM YYYY",year:"YYYY"}}},t="angular",u=r.copy(i[t].date),f=r.copy(i[t].title),e=!1,o=!1,s=!1,h={eventsLabel:"Events",timeLabel:"Time"},n=this;n.setDateFormats=function(t){return r.extend(u,t),n};n.setTitleFormats=function(t){return r.extend(f,t),n};n.setI18nStrings=function(t){return r.extend(h,t),n};n.setDisplayAllMonthEvents=function(t){return s=t,n};n.setDisplayEventEndTimes=function(t){return e=t,n};n.setDateFormatter=function(e){if(["angular","moment"].indexOf(e)===-1)throw new Error("Invalid date formatter. Allowed types are angular and moment.");return t=e,u=r.copy(i[t].date),f=r.copy(i[t].title),n};n.showTimesOnWeekView=function(t){return o=t,n};n.$get=function(){return{dateFormats:u,titleFormats:f,i18nStrings:h,displayAllMonthEvents:s,displayEventEndTimes:e,dateFormatter:t,showTimesOnWeekView:o}}})},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").factory("calendarHelper",["dateFilter","moment","calendarConfig",function(n,t,i){function f(r,u){return i.dateFormatter==="angular"?n(t(r).toDate(),u):i.dateFormatter==="moment"?t(r).format(u):void 0}function o(n,i,r){if(!r)return r;var u=t(i).diff(t(n));return t(r).add(u)}function e(n,i,u){var f=t(n.startsAt),e=t(n.endsAt||n.startsAt);if(i=t(i),u=t(u),r.isDefined(n.recursOn)){switch(n.recursOn){case"year":f.set({year:i.year()});break;case"month":f.set({year:i.year(),month:i.month()});break;default:throw new Error("Invalid value ("+n.recursOn+") given for recurs on. Can only be year or month.");}e=o(n.startsAt,f,e)}return f.isAfter(i)&&f.isBefore(u)||e.isAfter(i)&&e.isBefore(u)||f.isBefore(i)&&e.isAfter(u)||f.isSame(i)||e.isSame(u)}function u(n,t,i){return n.filter(function(n){return e(n,t,i)})}function l(n,i,r){var f=t(n).startOf(i),e=t(n).endOf(i);return u(r,f,e)}function s(n){return n.filter(function(n){return n.incrementsBadgeTotal!==!1}).length}function a(){for(var n=[],r=0;r<7;)n.push(f(t().weekday(r++),i.dateFormats.weekDay));return n}function v(n,r,e){for(var h=[],p=l(r,"year",n),c=t(r).startOf("year"),a=0;a<12;){var o=c.clone(),w=o.clone().endOf("month"),v=u(p,o,w),y={label:f(o,i.dateFormats.month),isToday:o.isSame(t().startOf("month")),events:v,date:o,badgeTotal:s(v)};e({calendarCell:y});h.push(y);c.add(1,"month");a++}return h}function y(n,r,f){var c=t(r).startOf("month"),e=c.clone().startOf("week"),y=t(r).endOf("month").endOf("week"),p,l,o,a,h,v;for(p=i.displayAllMonthEvents?u(n,e,y):u(n,c,c.clone().endOf("month")),l=[],o=t().startOf("day");e.isBefore(y);)a=e.month()===t(r).month(),h=[],(a||i.displayAllMonthEvents)&&(h=u(p,e,e.clone().endOf("day"))),v={label:e.date(),date:e.clone(),inMonth:a,isPast:o.isAfter(e),isToday:o.isSame(e),isFuture:o.isBefore(e),isWeekend:[0,6].indexOf(e.day())>-1,events:h,badgeTotal:s(h)},f({calendarCell:v}),l.push(v),e.add(1,"day");return l}function h(n,r){for(var o=t(r).startOf("week"),c=t(r).endOf("week"),e=o.clone(),s=[],h=t().startOf("day"),l;s.length<7;)s.push({weekDayLabel:f(e,i.dateFormats.weekDay),date:e.clone(),dayLabel:f(e,i.dateFormats.day),isPast:e.isBefore(h),isToday:e.isSame(h),isFuture:e.isAfter(h),isWeekend:[0,6].indexOf(e.day())>-1}),e.add(1,"day");return l=u(n,o,c).map(function(n){var i=t(n.startsAt).startOf("day"),u=t(n.endsAt||n.startsAt).startOf("day"),r=t(o).startOf("day"),f=t(c).startOf("day"),e,s;return e=i.isBefore(r)||i.isSame(r)?0:i.diff(r,"days"),u.isAfter(f)&&(u=f),i.isBefore(r)&&(i=r),s=t(u).diff(i,"days")+1,n.daySpan=s,n.dayOffset=e,n}),{days:s,events:l}}function c(n,i,r,f,o){var c=t(r||"00:00","HH:mm").hours(),l=t(f||"23:00","HH:mm").hours(),a=1800/o,s=t(i).startOf("day").add(c,"hours"),p=t(i).startOf("day").add(l,"hours"),v=(l-c+1)*a,y=a/60,h=[],w=u(n,t(i).startOf("day").toDate(),t(i).endOf("day").toDate());return w.map(function(n){if(n.top=t(n.startsAt).isBefore(s)?0:t(n.startsAt).startOf("minute").diff(s.startOf("minute"),"minutes")*y-2,t(n.endsAt||n.startsAt).isAfter(p))n.height=v-n.top;else{var i=n.startsAt;t(n.startsAt).isBefore(s)&&(i=s.toDate());n.height=n.endsAt?t(n.endsAt||n.startsAt).diff(i,"minutes")*y:30}return n.top-n.height>v&&(n.height=0),n.left=0,n}).filter(function(n){return n.height>0}).map(function(n){var t=!0;return h.forEach(function(i,r){var u=!0;i.forEach(function(t){(e(n,t.startsAt,t.endsAt||t.startsAt)||e(t,n.startsAt,n.endsAt||n.startsAt))&&(u=!1)});u&&t&&(t=!1,n.left=r*150,h[r].push(n))}),t&&(n.left=h.length*150,h.push([n])),n})}function p(n,i,r,u,f){var e=h(n,i),o=[];return e.days.forEach(function(n){var i=e.events.filter(function(i){return t(i.startsAt).startOf("day").isSame(t(n.date).startOf("day"))}),s=c(i,n.date,r,u,f);o=o.concat(s)}),e.events=o,e}function w(n,i,r){var u=t(n||"00:00","HH:mm"),f=t(i||"23:00","HH:mm"),e=1800/r;return(f.diff(u,"hours")+1)*e+2}return{getWeekDayNames:a,getYearView:v,getMonthView:y,getWeekView:h,getDayView:c,getWeekViewWithTimes:p,getDayViewHeight:w,adjustEndDateFromStartDiff:o,formatDate:f,eventIsInPeriod:e}}])},function(n,t,i){"use strict";var r=i(13);r.module("mwl.calendar").factory("calendarTitle",["moment","calendarConfig","calendarHelper",function(n,t,i){function r(n){return i.formatDate(n,t.titleFormats.day)}function u(i){var r=t.titleFormats.week;return r.replace("{week}",n(i).week()).replace("{year}",n(i).format("YYYY"))}function f(n){return i.formatDate(n,t.titleFormats.month)}function e(n){return i.formatDate(n,t.titleFormats.year)}return{day:r,week:u,month:f,year:e}}])},function(n,t,i){"use strict";var u=i(13),r;try{r=i(46)}catch(f){r=null}u.module("mwl.calendar").constant("interact",r)},function(n){if(typeof t=="undefined"){var i=new Error('Cannot find module "undefined"');i.code="MODULE_NOT_FOUND";throw i;}n.exports=t},function(n,t,i){"use strict";var r=i(13),u=i(48);r.module("mwl.calendar").constant("moment",u)},function(n){n.exports=i}])});!function(){"use strict";var n=angular.module("pasvaz.bindonce",[]);n.directive("bindonce",function(){var t=function(n){if(n&&0!==n.length){var t=angular.lowercase(""+n);n=!("f"===t||"0"===t||"false"===t||"no"===t||"n"===t||"[]"===t)}else n=!1;return n},n=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);return isNaN(n)&&(n=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10)),{restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(i,r,u,f){var o=function(n,i,r){var u="show"===i?"":"none",f="hide"===i?"":"none";n.css("display",t(r)?u:f)},s=function(n,t){if(angular.isObject(t)&&!angular.isArray(t)){var i=[];angular.forEach(t,function(n,t){n&&i.push(t)});t=i}t&&n.addClass(angular.isArray(t)?t.join(" "):t)},e=function(n,t){n.transclude(t,function(t){var r=n.element.parent(),i=n.element&&n.element[n.element.length-1],u=r&&r[0]||i&&i.parentNode,f=i&&i.nextSibling||null;angular.forEach(t,function(n){u.insertBefore(n,f)})})};return{watcherRemover:void 0,binders:[],group:u.boName,element:r,ran:!1,addBinder:function(n){this.binders.push(n);this.ran&&this.runBinders()},setupWatcher:function(n){var t=this;this.watcherRemover=i.$watch(n,function(n){void 0!==n&&(t.removeWatcher(),t.checkBindonce(n))},!0)},checkBindonce:function(n){var t=this,i=n.$promise?n.$promise.then:n.then;"function"==typeof i?i(function(){t.runBinders()}):t.runBinders()},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(var i,r,c,h,u;this.binders.length>0;)if(i=this.binders.shift(),!this.group||this.group==i.group){r=i.scope.$eval(i.interpolate?f(i.value):i.value);switch(i.attr){case"boIf":t(r)&&e(i,i.scope.$new());break;case"boSwitch":h=i.controller[0];(c=h.cases["!"+r]||h.cases["?"])&&(i.scope.$eval(i.attrs.change),angular.forEach(c,function(n){e(n,i.scope.$new())}));break;case"boSwitchWhen":u=i.controller[0];u.cases["!"+i.attrs.boSwitchWhen]=u.cases["!"+i.attrs.boSwitchWhen]||[];u.cases["!"+i.attrs.boSwitchWhen].push({transclude:i.transclude,element:i.element});break;case"boSwitchDefault":u=i.controller[0];u.cases["?"]=u.cases["?"]||[];u.cases["?"].push({transclude:i.transclude,element:i.element});break;case"hide":case"show":o(i.element,i.attr,r);break;case"class":s(i.element,r);break;case"text":i.element.text(r);break;case"html":i.element.html(r);break;case"style":i.element.css(r);break;case"src":i.element.attr(i.attr,r);n&&i.element.prop("src",r);break;case"attr":angular.forEach(i.attrs,function(n,t){var r,u;t.match(/^boAttr./)&&i.attrs[t]&&(r=t.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),u=i.scope.$eval(i.attrs[t]),i.element.attr(r,u))});break;case"href":case"alt":case"title":case"id":case"value":i.element.attr(i.attr,r)}}this.ran=!0}}}],link:function(n,t,i,r){var u=i.bindonce&&n.$eval(i.bindonce);void 0!==u?r.checkBindonce(u):(r.setupWatcher(i.bindonce),t.bind("$destroy",r.removeWatcher))}}});angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(t){var i=200;return n.directive(t.directiveName,function(){return{priority:t.priority||i,transclude:t.transclude||!1,terminal:t.terminal||!1,require:["^bindonce"].concat(t.require||[]),controller:t.controller,compile:function(n,i,r){return function(n,i,u,f){var e=f[0],s=u.boParent,o,h;if(s&&e.group!==s){for(o=e.element.parent(),e=void 0;9!==o[0].nodeType&&o.length;){if((h=o.data("$bindonceController"))&&h.group===s){e=h;break}o=o.parent()}if(!e)throw new Error("No bindonce controller: "+s);}e.addBinder({element:i,attr:t.attribute||t.directiveName,attrs:u,value:u[t.directiveName],interpolate:t.interpolate,group:s,transclude:r,controller:f.slice(1),scope:n})}}}})})}(),function(n){function de(n,i,r){t.Fc(this);this.hC=n;this.ec=i;this.PH=r}function bk(){this.gC=[]}function fe(){}function hu(n){this.key=-1;this.value=n}function sr(n){this.Ld=n;this.Xj=null;this.reset()}function lf(n){this.Ld=n;this.reset()}function b(n){t.Fc(this);this.tb=!1;this.n=[];this.Y=0;this.yo=this.Kd=null;void 0===n||null===n?this.ga=null:"string"==typeof n?"object"===n||"string"===n||"number"===n||"boolean"===n||"function"===n?this.ga=n:t.ha(n,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"==typeof n?this.ga=n===Object?"object":n===String?"string":n===Number?"number":n===Boolean?"boolean":n===Function?"function":n:t.ha(n,"null, a primitive type name, or a class type","List constructor: type")}function af(n){this.p=n;this.reset()}function it(n){t.Fc(this);this.tb=!1;void 0===n||null===n?this.ga=null:"string"==typeof n?"object"===n||"string"===n||"number"===n?this.ga=n:t.ha(n,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"==typeof n?this.ga=n===Object?"object":n===String?"string":n===Number?"number":n:t.ha(n,"null, a primitive type name, or a class type","Set constructor: type");this.ld={};this.kd=0;this.Kd=null;this.Y=0;this.Uh=this.kb=null}function nf(n){this.bb=n;this.reset()}function tr(n){t.Fc(this);this.tb=!0;this.bb=n}function vf(n){this.bb=n;this.reset()}function fl(n,t){this.key=n;this.value=t;this.Ko=this.Yb=null}function yf(n){this.bb=n;this.reset()}function gt(n,i){t.Fc(this);this.tb=!1;void 0===n||null===n?this.Th=null:"string"==typeof n?"object"===n||"string"===n||"number"===n?this.Th=n:t.ha(n,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"==typeof n?this.Th=n===Object?"object":n===String?"string":n===Number?"number":n:t.ha(n,"null, a primitive type name, or a class type","Map constructor: keytype");void 0===i||null===i?this.cj=null:"string"==typeof i?"object"===i||"string"===i||"boolean"===i||"number"===i||"function"===i?this.cj=i:t.ha(i,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"==typeof i?this.cj=i===Object?"object":i===String?"string":i===Number?"number":i===Boolean?"boolean":i===Function?"function":i:t.ha(i,"null, a primitive type name, or a class type","Map constructor: valtype");this.ld={};this.kd=0;this.zo=this.Kd=null;this.Y=0;this.Uh=this.kb=null}function by(n,i){null!==n.Th&&("string"==typeof n.Th?typeof i===n.Th&&null!==i||t.jc(i,n.Th):i instanceof n.Th||t.jc(i,n.Th))}function h(n,i){void 0===n?this.L=this.K=0:"number"==typeof n&&"number"==typeof i?(this.K=n,this.L=i):t.m("Invalid arguments to Point constructor")}function hrt(n,t){if(0===n)return 0<t?90:0>t?270:0;if(0===t)return 0<n?0:180;if(isNaN(n)||isNaN(t))return 0;var i=180*Math.atan(Math.abs(t/n))/Math.PI;return 0>n?i=0>t?i+180:180-i:0>t&&(i=360-i),i}function uu(n,i){return r&&t.l(i,hi,h,"transformInverted:t"),i.mi(n),n}function st(n,i){void 0===n?this.Aa=this.Ba=0:"number"==typeof n&&(0<=n||isNaN(n))&&"number"==typeof i&&(0<=i||isNaN(i))?(this.Ba=n,this.Aa=i):t.m("Invalid arguments to Size constructor")}function p(n,i,r,u){void 0===n?this.Aa=this.Ba=this.L=this.K=0:n instanceof h?i instanceof h?(this.K=Math.min(n.K,i.K),this.L=Math.min(n.L,i.L),this.Ba=Math.abs(n.K-i.K),this.Aa=Math.abs(n.L-i.L)):i instanceof st?(this.K=n.K,this.L=n.L,this.Ba=i.Ba,this.Aa=i.Aa):t.m("Incorrect arguments supplied"):"number"==typeof n&&"number"==typeof i&&"number"==typeof r&&(0<=r||isNaN(r))&&"number"==typeof u&&(0<=u||isNaN(u))?(this.K=n,this.L=i,this.Ba=r,this.Aa=u):t.m("Invalid arguments to Rect constructor")}function th(n,t,i){n.Ba=t;n.Aa=i}function ky(n,i,r,u,f){t.J(n);var e=n.Ba;return r+f<=-e?(n.K+=e/2,n.Ba=0):(n.K-=f,n.Ba+=r+f),r=n.Aa,i+u<=-r?(n.L+=r/2,n.Aa=0):(n.L-=i,n.Aa+=i+u),n}function lrt(n,i,r,u,f){t.J(n);var e=Math.max(n.K,i),o=Math.max(n.L,r);return i=Math.min(n.K+n.Ba,i+u),r=Math.min(n.L+n.Aa,r+f),n.K=e,n.L=o,n.Ba=Math.max(0,i-e),n.Aa=Math.max(0,r-o),n}function art(n,t){var u=n.Ba,f=t.width+10+10,i=n.K,r=t.x-10;return i>f+r||r>u+i?!1:(u=n.Aa,f=t.height+10+10,i=n.L,r=t.y-10,i>f+r||r>u+i?!1:!0)}function tf(n,t,i,r,u){var f=Math.min(n.K,t),e=Math.min(n.L,i);return t=Math.max(n.K+n.Ba,t+r),i=Math.max(n.L+n.Aa,i+u),n.K=f,n.L=e,n.Ba=t-f,n.Aa=i-e,n}function ni(n,i,r,u){void 0===n?this.eh=this.Wg=this.kh=this.mh=0:void 0===i?this.left=this.bottom=this.right=this.top=n:void 0===r?(u=i,this.top=n,this.right=i,this.bottom=n,this.left=u):void 0!==u?(this.top=n,this.right=i,this.bottom=r,this.left=u):t.m("Invalid arguments to Margin constructor")}function hi(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}function e(n,t,i,r){void 0===n?this.rg=this.qg=this.L=this.K=0:(void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=n,this.y=t,this.offsetX=i,this.offsetY=r)}function rf(n,t){return n.K=NaN,n.L=NaN,n.qg=t,n}function dy(n,i){(isNaN(n)||1<n||0>n)&&t.ha(n,"0 <= "+i+" <= 1",e,i)}function gy(n,i){(isNaN(n)||Infinity===n||-Infinity===n)&&t.ha(n,"real number, not NaN or Infinity",e,i)}function iv(){this.hf=[1,0,0,1,0,0]}function rv(n){this.type=n;this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0;this.wE=[]}function el(n,t,i){this.fillStyle="#000000";this.font="10px sans-serif";this.globalAlpha=1;this.lineCap="butt";this.px=0;this.lineJoin="miter";this.lineWidth=1;this.miterLimit=10;this.shadowBlur=0;this.shadowColor="rgba(0, 0, 0, 0)";this.shadowOffsetY=this.shadowOffsetX=0;this.strokeStyle="#000000";this.textAlign="start";this.document=t||document;this.YE=i;this.mx=null;this.path=[];this.lj=new iv;this.stack=[];this.Bf=[];this.IG=this.kF=this.zw=0;this.Nw=n;this.QJ="http://www.w3.org/2000/svg";this.width=this.Nw.width;this.height=this.Nw.height;this.Ll=yu(this,"svg",{width:this.width+"px",height:this.height+"px",cL:"0 0 "+this.Nw.width+" "+this.Nw.height});this.Ll.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg");this.Ll.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");ol(this,1,0,0,1,0,0);n=yu(this,"clipPath",{id:"mainClip"});n.appendChild(yu(this,"rect",{x:0,y:0,width:this.width,height:this.height}));this.Ll.appendChild(n);this.Bf[0].setAttributeNS(null,"clip-path","url(#mainClip)")}function yu(n,t,i,r){if(n=n.document.createElementNS(n.QJ,t),i)for(var u in i)n.setAttributeNS("href"===u?"http://www.w3.org/1999/xlink":"",u,i[u]);return r&&(n.textContent=r),n}function uv(n,t,i,r,u){1!==n.globalAlpha&&(i.opacity=n.globalAlpha);"fill"==t?(/^rgba\(/.test(n.fillStyle)?(n=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(n.fillStyle),i.fill="rgb("+n[1]+","+n[2]+","+n[3]+")",i["fill-opacity"]=n[4]):i.fill=n.fillStyle instanceof rv?grt(n,n.fillStyle):n.fillStyle,i.stroke="none"):"stroke"==t&&(i.fill="none",/^rgba\(/.test(n.strokeStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(n.strokeStyle),i.stroke="rgb("+t[1]+","+t[2]+","+t[3]+")",i["stroke-opacity"]=t[4]):i.stroke=n.strokeStyle instanceof rv?grt(n,n.strokeStyle):n.strokeStyle,i["stroke-width"]=n.lineWidth,i["stroke-linecap"]=n.lineCap,i["stroke-linejoin"]=n.lineJoin,i["stroke-miterlimit"]=n.miterLimit);r=r.hf;r="matrix("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+")";void 0!==u&&(r+=u);i.transform=r}function grt(n,t){var e="GRAD"+n.kF,i;if(n.kF++,"linear"===t.type)i={x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,id:e,gradientUnits:"userSpaceOnUse"},i=yu(n,"linearGradient",i);else if("radial"===t.type)i={x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,r1:t.r1,r2:t.r2,id:e},i=yu(n,"radialGradient",i);else throw Error("invalid gradient");for(var s=t.wE,h=s.length,o=[],u=0;u<h;u++){var f=s[u],r=f.color,f={offset:f.offset,"stop-color":r};/^rgba\(/.test(r)&&(r=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(r),f["stop-color"]="rgb("+r[1]+","+r[2]+","+r[3]+")",f["stop-opacity"]=r[4]);o.push(f)}for(o.sort(function(n,t){return n.offset>t.offset?1:-1}),u=0;u<h;u++)i.appendChild(yu(n,"stop",o[u]));return n.Ll.appendChild(i),"url(#"+e+")"}function nut(n,t,i,r){i={x:i[0],y:i[1],width:i[2],height:i[3]};uv(n,t,i,r);n.addElement("rect",i)}function dk(n,t,i,r){for(var u,f,o=[],e=0;e<i.length;e++){if(u=Array.prototype.slice.call(i[e]),f=[u.shift()],"A"==f[0])f.push(u.shift()+","+u.shift(),u.shift(),u.shift()+","+u.shift(),u.shift()+","+u.shift());else for(;u.length;)f.push(u.shift()+","+u.shift());o.push(f.join(" "))}i={d:o.join(" ")};uv(n,t,i,r);"clipPath"===t?(t="CLIP"+n.zw,n.zw++,r=yu(n,"clipPath",{id:t}),r.appendChild(yu(n,"path",i)),n.Ll.appendChild(r),0<n.Bf.length&&n.Bf[n.Bf.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):n.addElement("path",i)}function gk(n,t,i,r,u,f,e){var o=Math.abs(u-f),s;u!=f&&(s=t+r*Math.cos(f),f=i+r*Math.sin(f),o>=2*Math.PI?(gk(n,t,i,r,u,u+Math.PI,e),gk(n,t,i,r,u+Math.PI,u+2*Math.PI,e),n.path.push(["M",s,f])):(t+=r*Math.cos(u),i+=r*Math.sin(u),o=180*o/Math.PI,u=e?0:1,e=180<=o==!!e?0:1,0!==n.path.length?n.path.push(["L",t,i]):n.path.push(["M",t,i]),n.path.push(["A",r,r,o,e,u,s,f])))}function ol(n,t,i,r,u,f,e){var o=new iv;o.hf=[t,i,r,u,f,e];t={};uv(n,"g",t,o);o=n.addElement("g",t);n.Bf.push(o)}function rt(n){1<arguments.length&&t.m("Geometry constructor can take at most one optional argument, the Geometry type.");t.Fc(this);void 0===n?n=wr:r&&t.Fa(n,rt,rt,"constructor:type");this.ga=n;this.Bb=this.pb=this.Cc=this.tc=0;this.Pk=new b(ai);this.Xu=this.Pk.Y;this.Iu=(new p).freeze();this.$a=!0;this.Yi=hr;this.Zi=cu;this.so=this.to=NaN;this.Ac=cr}function tut(n,t){if(n.type!==nu||t.type!==wr)return!1;if(1===t.Fb.count){var i=t.Fb.wa(0);if(1===i.Ka.count&&u.I(n.sa,i.sa)&&u.I(n.ta,i.ta)&&(i=i.Ka.wa(0),i.type===fr&&u.I(n.D,i.D)&&u.I(n.F,i.F)))return!0}return!1}function uat(n,i){for(var u,e=n.length,r=t.N(),f=0;f<e;f++)u=n[f],r.x=u.x1,r.y=u.y1,i.Xa(r),u.x1=r.x,u.y1=r.y,r.x=u.x2,r.y=u.y2,i.Xa(r),u.x2=r.x,u.y2=r.y,r.x=u.ne,r.y=u.oe,i.Xa(r),u.ne=r.x,u.oe=r.y,r.x=u.$b,r.y=u.ac,i.Xa(r),u.$b=r.x,u.ac=r.y;t.B(r)}function uut(n,i,r){var v,c,o,f;switch(n.type){case nu:case kf:case uf:r?i.p(n.tc,n.Cc,0,0):tf(i,n.tc,n.Cc,0,0);tf(i,n.pb,n.Bb,0,0);break;case wr:for(n=n.Fb,v=n.length,c=0;c<v;c++){o=n.n[c];r&&0===c?i.p(o.sa,o.ta,0,0):tf(i,o.sa,o.ta,0,0);for(var y=o.Ka,p=y.length,s=o.sa,h=o.ta,l=0;l<p;l++){f=y.n[l];switch(f.type){case fr:case df:s=f.D;h=f.F;tf(i,s,h,0,0);break;case au:u.ep(s,h,f.Gb,f.Xb,f.ye,f.ze,f.D,f.F,.5,i);s=f.D;h=f.F;break;case ee:u.fB(s,h,f.Gb,f.Xb,f.D,f.F,.5,i);s=f.D;h=f.F;break;case br:case gf:for(var f=f.type===br?os(f,o):ih(f,o,s,h),w=f.length,e=null,a=0;a<w;a++)e=f[a],u.ep(e.x1,e.y1,e.x2,e.y2,e.ne,e.oe,e.$b,e.ac,.5,i);null!==e&&(s=e.$b,h=e.ac);break;default:t.m("Unknown Segment type: "+f.type)}}}break;default:t.m("Unknown Geometry type: "+n.type)}}function nd(n,t,i,r,f,e,o,s){var h,c;if(u.Sd(f,e,o,s,.05,n,t))return!0;if((h=(n-i)*(e-s),0===h)||(c=((n*r-t*i)*(f-o)-(n-i)*(f*s-e*o))/h,t=(n*r-t*i)*(e-s)/h,c>=n))return 0;if((f>o?f-o:o-f)<(e>s?e-s:s-e)){if(e<s?(n=e,f=s):(n=s,f=e),t<n||t>f)return 0}else if(f<o?(n=f,f=o):n=o,c<n||c>f)return 0;return 0<h?1:-1}function fut(n,t,i,r){for(var f=n.Fb.length,u=0;u<f;u++)if(n.Fb.n[u].La(t,i,r))return!0;return!1}function ai(n,i,u){t.Fc(this);void 0===u&&(u=!0);this.gm=u;this.vo=!0;void 0!==n?(r&&t.q(n,ai,"sx"),this.tc=n):this.tc=0;void 0!==i?(r&&t.q(i,ai,"sy"),this.Cc=i):this.Cc=0;this.vs=new b(ut);this.Wv=this.vs.Y;this.$a=!0}function ut(n,i,u,f,e,o,s,h){t.Fc(this);void 0===n?n=fr:r&&t.Fa(n,ut,ut,"constructor:type");this.ga=n;void 0!==i?(r&&t.q(i,ut,"ex"),this.pb=i):this.pb=0;void 0!==u?(r&&t.q(u,ut,"ey"),this.Bb=u):this.Bb=0;n===gf?(void 0!==o&&(n=o%360,0>n&&(n+=360),this.od=n),void 0!==f&&(r&&t.q(f,ut,"x1"),this.tg=Math.max(f,0)),void 0!==e&&(r&&t.q(e,ut,"y1"),this.ug=Math.max(e,0)),this.Bo=!!s,this.Pn=!!h):(void 0!==f&&(r&&t.q(f,ut,"x1"),this.od=f),void 0!==e&&(r&&t.q(e,ut,"y1"),this.Ee=e),void 0!==o&&(r&&t.q(o,ut,"x2"),n===br&&(o=Math.max(o,0)),this.tg=o),void 0!==s&&"number"==typeof s&&(r&&t.q(s,ut,"y2"),n===br&&(s=Math.max(s,0)),this.ug=s));this.Sh=!1;this.$a=!0;this.Bj=null}function os(n,i){var e,r,o,f;if(null!==n.Bj&&!1===i.$a)return n.Bj;e=n.radiusX;r=n.radiusY;void 0===r&&(r=e);var h=n.od,c=n.Ee,s=u.FE(0,0,e<r?e:r,n.yh,n.yh+n.vi);if(e!==r){o=t.Ah();o.reset();e<r?o.scale(1,r/e):o.scale(e/r,1);for(var e=s.length,r=t.N(),l=0;l<e;l++)f=s[l],r.x=f.x1,r.y=f.y1,o.Xa(r),f.x1=r.x,f.y1=r.y,r.x=f.x2,r.y=f.y2,o.Xa(r),f.x2=r.x,f.y2=r.y,r.x=f.ne,r.y=f.oe,o.Xa(r),f.ne=r.x,f.oe=r.y,r.x=f.$b,r.y=f.ac,o.Xa(r),f.$b=r.x,f.ac=r.y;t.B(r);t.bf(o)}for(o=s.length,e=0;e<o;e++)r=s[e],r.x1+=h,r.y1+=c,r.x2+=h,r.y2+=c,r.ne+=h,r.oe+=c,r.$b+=h,r.ac+=c;return n.Bj=s,n.Bj}function ih(n,i,r,f){function w(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(y(n,t))}function y(n,t){return(n[0]*t[0]+n[1]*t[1])/(Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))*Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)))}if(null!==n.Bj&&!1===i.$a)return n.Bj;i=n.tg;var e=n.ug,c=Math.PI/180*n.od,l=n.Bo,v=n.Pn,p=n.pb,a=n.Bb,s=Math.cos(c)*(r-p)/2+Math.sin(c)*(f-a)/2,h=-Math.sin(c)*(r-p)/2+Math.cos(c)*(f-a)/2,o=Math.pow(s,2)/Math.pow(i,2)+Math.pow(h,2)/Math.pow(e,2);return 1<o&&(i*=Math.sqrt(o),e*=Math.sqrt(o)),o=(l===v?-1:1)*Math.sqrt((Math.pow(i,2)*Math.pow(e,2)-Math.pow(i,2)*Math.pow(h,2)-Math.pow(e,2)*Math.pow(s,2))/(Math.pow(i,2)*Math.pow(h,2)+Math.pow(e,2)*Math.pow(s,2))),isNaN(o)&&(o=0),l=o*i*h/e,o=o*-e*s/i,isNaN(l)&&(l=0),isNaN(o)&&(o=0),r=(r+p)/2+Math.cos(c)*l-Math.sin(c)*o,f=(f+a)/2+Math.sin(c)*l+Math.cos(c)*o,c=w([1,0],[(s-l)/i,(h-o)/e]),a=[(s-l)/i,(h-o)/e],h=[(-s-l)/i,(-h-o)/e],s=w(a,h),-1>=y(a,h)&&(s=Math.PI),1<=y(a,h)&&(s=0),!v&&0<s&&(s-=2*Math.PI),v&&0>s&&(s+=2*Math.PI),v=i>e?1:i/e,h=i>e?e/i:1,i=u.FE(0,0,i>e?i:e,c,c+s,!0),e=t.Ah(),e.reset(),e.translate(r,f),e.rotate(n.od,0,0),e.scale(v,h),uat(i,e),t.bf(e),n.Bj=i,n.Bj}function kt(){this.W=null;this.Pz=new h(0,0).freeze();this.Wy=new h(0,0).freeze();this.Fu=this.yv=0;this.mv="";this.iw=this.Uu=!1;this.Ru=this.Hu=0;this.Cj=this.bv=!1;this.$q=null;this.gw=0;this.vg=this.ew=null}function fu(){this.W=null;this.ec="";this.Mv=this.bw=null;this.Gu=!1}function ii(){this.clear()}function d(n){1<arguments.length&&t.m("Model constructor can only take one optional argument, the Array of node data.");t.Fc(this);this.Qy=this.ec="";this.Wk=this.XC=!1;this.uz={};this.Se=[];this.Gc=new gt(null,Object);this.vm="key";this.Lu=this.qv=null;this.Iy=this.Jy=!1;this.Wr="category";this.hg=new gt(null,it);this.Pj=null;this.Xi=!1;this.Oz=null;this.ma=new vi;void 0!==n&&(this.Ng=n)}function fv(n,i){var o,r,u,s,f,c;if(t.isArray(i))for(o=t.ub(i),r=0;r<o;r++)u=t.rb(i,r),t.xb(u)&&t.kE(i,r,fv(n,u));else if(t.xb(i)){for(r in i)if(u=i[r],t.xb(u)&&(u=fv(n,u),i[r]=u,"points"===r&&Array.isArray(u))){for(s=0==u.length%2,f=0;f<u.length;f++)if("number"!=typeof u[f]){s=!1;break}if(s){for(s=new b(h),f=0;f<u.length/2;f++)c=new h(u[2*f],u[2*f+1]),s.add(c);s.freeze();i[r]=s}}if("object"!=typeof i)o=i;else{if(r=i,u=i["class"],"NaN"===u)r=NaN;else if("Date"===u)r=new Date(i.value);else if("go.Point"===u)r=new h(iu(i.x),iu(i.y));else if("go.Size"===u)r=new st(iu(i.width),iu(i.height));else if("go.Rect"===u)r=new p(iu(i.x),iu(i.y),iu(i.width),iu(i.height));else if("go.Margin"===u)r=new ni(iu(i.top),iu(i.right),iu(i.bottom),iu(i.left));else if("go.Spot"===u)r="string"==typeof i["enum"]?vrt(i["enum"]):new e(iu(i.x),iu(i.y),iu(i.offsetX),iu(i.offsetY));else if("go.Brush"===u){if(r=new ht,r.type=t.en(ht,i.type),i.start instanceof e&&(r.start=i.start),i.end instanceof e&&(r.end=i.end),"number"==typeof i.startRadius&&(r.hq=iu(i.startRadius)),"number"==typeof i.endRadius&&(r.mp=iu(i.endRadius)),u=i.colorStops)for(o in u)r.addColorStop(parseFloat(o),u[o])}else"go.Geometry"===u&&(r="string"==typeof i.path?rp(i.path):new rt,r.type=t.en(rt,i.type),"number"==typeof i.startX&&(r.sa=iu(i.startX)),"number"==typeof i.startY&&(r.ta=iu(i.startY)),"number"==typeof i.endX&&(r.D=iu(i.endX)),"number"==typeof i.endY&&(r.F=iu(i.endY)),i.spot1 instanceof e&&(r.G=i.spot1),i.spot2 instanceof e&&(r.H=i.spot2));o=r}return o}return i}function td(n,i,r){var e=t.ub(i),u="[ ",f,o;for(r&&1<e&&(u+="\n"),f=0;f<e;f++)o=t.rb(i,f),void 0!==o&&(0<f&&(u+=",",r&&(u+="\n")),u+=n.pu(o));return r&&1<e&&(u+="\n"),u+" ]"}function eut(n,t){return void 0===t||"__gohashid"===n||"_"===n[0]||"function"==typeof t?!0:!1}function tu(n){return isNaN(n)?"NaN":Infinity===n?"9e9999":-Infinity===n?"-9e9999":n}function out(n,r){var u=r,o,l,c,s,a;if(u instanceof h)r={"class":"go.Point",x:tu(u.x),y:tu(u.y)};else if(u instanceof st)r={"class":"go.Size",width:tu(u.width),height:tu(u.height)};else if(u instanceof p)r={"class":"go.Rect",x:tu(u.x),y:tu(u.y),width:tu(u.width),height:tu(u.height)};else if(u instanceof ni)r={"class":"go.Margin",top:tu(u.top),right:tu(u.right),bottom:tu(u.bottom),left:tu(u.left)};else if(u instanceof e)r=u.Cd()?{"class":"go.Spot",x:tu(u.x),y:tu(u.y),offsetX:tu(u.offsetX),offsetY:tu(u.offsetY)}:{"class":"go.Spot","enum":u.toString()};else if(u instanceof ht){if(r={"class":"go.Brush",type:u.type.name},u.type===yc?r.color=u.color:(u.type===fo||u.type===ku)&&(r.start=u.start,r.end=u.end,u.type===ku&&(0!==u.hq&&(r.startRadius=tu(u.hq)),isNaN(u.mp)||(r.endRadius=tu(u.mp)))),null!==u.hp){for(o={},u=u.hp.k;u.next();)o[u.key.toString()]=u.value;r.colorStops=o}}else if(u instanceof rt)r={"class":"go.Geometry",type:u.type.name},0!==u.sa&&(r.startX=tu(u.sa)),0!==u.ta&&(r.startY=tu(u.ta)),0!==u.D&&(r.endX=tu(u.D)),0!==u.F&&(r.endY=tu(u.F)),u.G.O(hr)||(r.spot1=u.G),u.H.O(cu)||(r.spot2=u.H),u.type===wr&&(r.path=iut(u));else if(u instanceof f||u instanceof i||u instanceof et||u instanceof d||u instanceof wt||u instanceof at||u instanceof ti||u instanceof ei||u instanceof vi||u instanceof dr)return t.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+u.toString()),"{}";o="{";l=!0;for(c in r)if(u=t.nb(r,c),!eut(c,u))if(l?l=!1:o+=", ",o+='"'+c+'":',"points"===c&&u instanceof b&&u.ga===h){for(s="[",u=u.k;u.next();)a=u.value,1<s.length&&(s+=","),s+=n.pu(a.x),s+=",",s+=n.pu(a.y);s+="]";o+=s}else o+=n.pu(u);return o+"}"}function iu(n){return"number"==typeof n?n:"NaN"===n?NaN:"9e9999"===n?Infinity:"-9e9999"===n?-Infinity:parseFloat(n)}function gi(n,t,i,r,u,f,e,o,s){void 0===o&&(o=null);void 0===s&&(s=null);var h=new ii;h.ea=n;h.Bd=i;h.Ff=t;h.propertyName=r;h.object=u;h.oldValue=f;h.ag=o;h.newValue=e;h.Zf=s;n.vw(h)}function ge(n,i,r){"string"!=typeof n&&"function"!=typeof n&&t.jc(n,"string or function",i,r)}function oe(n){return"number"==typeof n||"string"==typeof n}function se(n,t,i){if(void 0!==t){var r=n.hg.Da(t);null===r&&(r=new it,n.hg.add(t,r));r.add(i)}}function pe(n,t,i){if(void 0!==t){var r=n.hg.Da(t);r instanceof it&&(void 0===i||null===i?n.hg.remove(t):(r.remove(i),0===r.count&&n.hg.remove(t)))}}function up(n,t){if(void 0===t)return null;var i=n.hg.Da(t);return i instanceof it?i:null}function id(n,r,u){return u instanceof f||u instanceof i||u instanceof et||u instanceof dt||u instanceof ff||u instanceof wt||u instanceof at||u instanceof ti||u instanceof kt||u instanceof fu?("_"!==r[0]&&t.trace("Warning: found GraphObject or Diagram reference when copying model data on property '"+r+"' of data object: "+n.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+u.toString()),!0):u instanceof d||u instanceof vi||u instanceof dr||u instanceof ii?!0:!1}function k(n,i){2<arguments.length&&t.m("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");d.call(this);this.gh=[];this.pm=new it(Object);this.Kk=this.Ku=null;this.Lj="from";this.Oj="to";this.Dr=this.Cr="";this.zr="category";this.Vh=this.Ev="";this.Dv="isGroup";this.Vj="group";this.Ky=!1;void 0!==n&&(this.Ng=n);void 0!==i&&(this.tj=i)}function rd(n,i){var r=n.vl(i),r=n.tn(r),u,e,f;if(null===n.zf(r)&&se(n,r,i),r=n.zl(i),r=n.tn(r),null===n.zf(r)&&se(n,r,i),u=n.xl(i),t.isArray(u))for(e=t.ub(u),f=0;f<e;f++)r=t.rb(u,f),null===n.zf(r)&&se(n,r,i)}function ci(n){1<arguments.length&&t.m("TreeModel constructor can only take one optional argument, the Array of node data.");d.call(this);this.Wj="parent";this.Ly=!1;this.$r="parentLinkCategory";void 0!==n&&(this.Ng=n)}function ri(n,i,r){t.Fc(this);void 0===n?n="":t.i(n,"string",ri,"constructor:targetprop");void 0===i?i=n:t.i(i,"string",ri,"constructor:sourceprop");void 0===r?r=null:null!==r&&t.i(r,"function",ri,"constructor:conv");this.KD="";this.vg=null;this.fw=n;this.dw=this.Kz=0;this.ED=null;this.Zv=i;this.Hy=r;this.tz=sut;this.Ay=null}function dr(){this.zH=new b(ii).freeze();this.ec="";this.MC=!1}function vi(){this.vz=new it(d);this.Re=!1;this.FH=new b(dr).freeze();this.ah=-1;this.aD=999;this.Ki=!1;this.Qu=null;this.hl=0;this.By=!1;r&&(this.By=!0);this.jh=new b("string").freeze();this.Ho=new b("number");this.dz=!0;this.pz=!1}function hut(n,i,r){var f,e,u;if(n.yb)return!1;if(n.fA&&1>n.Qe&&t.trace("Ending transaction without having started a transaction: "+r),f=1===n.Qe,f&&i&&n.isEnabled&&n.ad("CommittingTransaction",r,n.kj),e=0,0<n.Qe&&(n.hl--,n.isEnabled)&&(u=n.jh.count,0<u&&(""===r&&(r=n.jh.wa(0)),n.jh.Ra(),n.jh.wd(u-1),n.jh.freeze()),u=n.Ho.count,0<u&&(e=n.Ho.wa(u-1),n.Ho.wd(u-1))),u=n.kj,f){if(i){if(n.pz=!1,n.isEnabled&&null!==u){for(i=u,i.Bp=!0,i.name=r,f=n.history,f.Ra(),e=f.count-1;e>n.pj;e--)u=f.wa(e),null!==u&&u.clear(),f.wd(e),n.pz=!0;e=n.RA;0===e&&(e=1);0<e&&f.count>=e&&(u=f.wa(0),null!==u&&u.clear(),f.wd(0),n.ah--);f.add(i);n.ah++;f.freeze();u=i}n.ad("CommittedTransaction",r,u)}else{n.Ki=!0;try{n.isEnabled&&null!==u&&(u.Bp=!0,u.undo())}finally{n.ad("RolledBackTransaction",r,u);n.Ki=!1}null!==u&&u.clear()}return n.Qu=null,!0}if(n.isEnabled&&!i&&null!==u){for(n=e,r=u.nh,i=r.count-1;i>=n;i--)f=r.wa(i),null!==f&&f.undo(),r.Ra(),r.wd(i);r.freeze()}return!1}function at(){0<arguments.length&&t.fd(at);t.Fc(this);this.W=null;this.kC=this.lC=this.wC=this.mC=!1;this.al=this.xy=null;this.bE=1.05;this.uC=1;this.qz=NaN;this.YC=null;this.cE=NaN}function ss(n,t,i,r,u){var e,f,o,s;if(!(n.contains(t)||(void 0===u&&(u=null),null!==u&&!u(t)||t instanceof fi)))if(n.add(t),t instanceof y){if(i&&t instanceof g)for(e=t.Vc;e.next();)f=e.value,ss(n,f,i,r,u);for(f=t.Td;f.next();)(e=f.value,n.contains(e))||(o=e.ca,s=e.fa,null!==o&&n.contains(o)&&null!==s&&n.contains(s)?ss(n,e,i,r,u):null!==o&&null!==s||ss(n,e,i,r,u));if(1<r)for(t=t.cF();t.next();)f=t.value,ss(n,f,i,r-1,u)}else if(t instanceof c)for(f=t.sj;f.next();)ss(n,f.value,i,r,u)}function ud(n,i,r,u,f){var o,h,e,l;if(null===i||f&&!i.canCopy())return null;if(u.contains(i))return n=u.Da(i),n instanceof s?n:null;if(o=null,h=i.data,null!==h&&null!==r?(e=r.ea,i instanceof c?e instanceof k&&(h=e.EE(h),t.xb(h)&&(e.nw(h),o=r.Vf(h))):(h=e.copyNodeData(h),t.xb(h)&&(e.Om(h),o=r.qh(h)))):(ce(i),o=i.copy(),null!==r&&o instanceof s&&r.add(o)),!(o instanceof s))return null;if(o.ib=!1,o.Fg=!1,u.add(i,o),i instanceof y){for(e=i.Td;e.next();)h=e.value,h.ca===i&&(l=u.Da(h),null!==l&&(l.ca=o)),h.fa===i&&(l=u.Da(h),null!==l&&(l.fa=o));if(i instanceof g&&o instanceof g)for(i=i.Vc;i.next();)e=ud(n,i.value,r,u,f),e instanceof c||null===e||(e.fb=o)}else if(i instanceof c)for(e=i.ca,null!==e&&(e=u.Da(e),null!==e&&(o.ca=e)),e=i.fa,null!==e&&(e=u.Da(e),null!==e&&(o.fa=e)),i=i.sj;i.next();)e=ud(n,i.value,r,u,f),null!==e&&(e.Dd=o);return o}function fd(n){var r=t.Hb(),i,u;for(n=n.k;n.next();)i=n.value,i instanceof c||r.push(i);for(n=new it(s),i=r.length,u=0;u<i;u++){for(var e=r[u],o=!0,f=0;f<i;f++)if(e.Al(r[f])){o=!1;break}o&&n.add(e)}return t.Ca(r),n}function wt(){0<arguments.length&&t.fd(wt);t.Fc(this);this.W=null;this.ec="";this.Re=!0;this.KC=!1;this.YD=null;this.lw=-1}function cut(n,t,i){var u=0,r;if(t.left?u=1===t.Ge?1:2===t.Ge?2:1:t.right&&1===t.Ge&&(u=3),r="",null!==n){switch(u){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}0!==u&&i.Ga(r,n)}else{switch(u){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}0!==u&&i.Ga(r)}if(null!==n)for(;null!==n;){r=null;switch(u){case 1:r=n.click;break;case 2:r=n.dn?n.dn:n.click;break;case 3:r=n.jt}if(null!==r&&(r(t,n),t.Ke))break;n=n.ia}else{r=null;switch(u){case 1:r=i.click;break;case 2:r=i.dn?i.dn:i.click;break;case 3:r=i.jt}null!==r&&r(t)}}function ct(){0<arguments.length&&t.fd(ct);wt.call(this);this.name="Dragging";this.jC=this.OC=!0;this.jr=this.BC=!1;this.SC=!0;this.fz=new st(NaN,NaN).freeze();this.gz=hr;this.hz=new h(NaN,NaN).freeze();this.AC=!1;this.yC=this.iC=this.zC=this.pC=this.Wi=null;this.Wq=this.QC=!1;this.Qo=new h(NaN,NaN);this.$v=new h;this.Is=!1;this.Yv=this.NC=!0;this.bo=100;this.Yl=this.Ov=null}function ed(n,t){if(n.ki){var i=n.h;null!==i&&i.gk&&(i.ea instanceof k&&1===t.count&&t.gb()instanceof c?(n.Qc=t.gb(),n.Qc.canRelinkFrom()&&n.Qc.canRelinkTo()&&n.Qc.Uf(),n.Wi=i.Cb.jB,null===n.Wi&&(n.Wi=new vu,n.Wi.h=i)):(n.Qc=null,n.Wi=null))}}function uo(n){return void 0===n?{point:u.Aj,Gz:u.Aj}:{point:n.copy(),Gz:u.Aj}}function kh(n,t,i,r){var u,f,e,o;if(!t.contains(i)&&(!r||i.canMove()||i.canCopy()))if(i instanceof y){if(t.add(i,uo(i.location)),i instanceof g)for(u=i.Vc;u.next();)f=u.value,kh(n,t,f,r);for(f=i.Td;f.next();)(u=f.value,t.contains(u))||(e=u.ca,o=u.fa,null!==e&&t.contains(e)&&null!==o&&t.contains(o)&&kh(n,t,u,r));if(n.TE)for(i=i.cF();i.next();)f=i.value,kh(n,t,f,r)}else if(i instanceof c)for(u=i,t.add(u,uo()),f=u.sj;f.next();)kh(n,t,f.value,r);else i instanceof fi||t.add(i,uo(i.location))}function od(n){var i=n.h,f,r,t,u;if(null!==i){for(f=i.ab,i.ab=!0,r=i.T,t=n.Yl;null!==t;){if(u=t.TA,null!==u&&(u(r,t,null),r.Ke))break;t=t.ia}i.ab=f}n.Ov=null;n.Yl=null}function lut(){var n=lr,t;rh(n);cd(n);t=n.h;null!==t&&n.Qo.P()&&(t.position=n.Qo);null!==t&&fh(t)}function aut(n,t){var i,r;if(null!==t)for(n.Is=!0,i=t.k;i.next();)r=i.key,r instanceof c&&(r.jq=!0)}function sd(n,t){var r,i;if(null!==t&&n.Is){for(r=t.k;r.next();)i=r.key,i instanceof c&&(i.jq=!1,i.qj?gat(i)&&i.hc():i.ja());n.Is=!1}}function vut(n,t){for(var i,u=Infinity,f=Infinity,e=-Infinity,o=-Infinity,s=n.k;s.next();)if(i=s.value,i.Rd()){var r=i.location,i=r.x,r=r.y;isNaN(i)||isNaN(r)||(i<u&&(u=i),r<f&&(f=r),i>e&&(e=i),r>o&&(o=r))}Infinity===u?t.p(0,0,0,0):t.p(u,f,e-u,o-f)}function hd(n,i){var r,u,e,f;if(null===n.rd&&(r=n.h,!(null===r||i&&(r.hb||r.ef))&&null!==n.Hc)){for(u=r.ma,u.isEnabled&&u.DF?null!==u.kj&&0<u.kj.nh.count&&(r.ma.$p(),r.yc("Drag")):cd(n),r.ab=!i,r.Ln=!i,n.wj=r.Rc.da,r=n.CE?r.Zm(n.Hc.Pl(),r,!0):r.Zm(r.selection,r,!0),u=r.k;u.next();)u.value.location=u.key.location;for(u=t.Jf(),vut(r,u),t.oc(u),u=new gt(s,Object),e=n.Hc.k;e.next();)f=e.key,f.Rd()&&f.canCopy()&&(f=r.Da(f),null!==f&&(f.xf(),u.add(f,uo(f.location))));for(r=r.k;r.next();)e=r.value,e instanceof c&&e.canCopy()&&u.add(e,uo());n.rd=u;ed(n,u.Pl());null!==n.Qc&&(r=n.Qc,u=r.Ij(),r.Dl(n.wj.x-(u.x+u.width/2),n.wj.y-(u.y+u.height/2)))}}function rh(n){var t=n.h;null!==t&&(null!==n.rd&&(t.mB(n.rd.Pl(),!1),n.rd=null),t.ab=!1,t.Ln=!1,n.wj=t.Rc.da)}function yut(n){if(null!==n.Qc){if(n.ki&&null!==n.Wi){var t=n.Wi;t.h.remove(t.le);t.h.remove(t.me)}n.Qc=null;n.Wi=null}}function cc(n,i,r){var f=n.h,e,u;null!==f&&(e=n.wj,u=t.N(),u.assign(f.T.da),n.moveParts(i,u.ju(e),r),t.B(u))}function put(n,t,i){return(t=t.fb,null!==t&&((n=put(n,t,i),null!==n)||(n=i.Da(t),null!==n)))?n:null}function cd(n){var u,t,i,r;if(null!==n.Hc){for(u=n.h,t=n.Hc.k;t.next();)i=t.key,i.Rd()&&(i.location=t.value.point);for(t=n.Hc.k;t.next();)(i=t.key,i instanceof c&&i.jq)&&(r=t.value.point,n.Hc.add(i,uo()),i.Dl(-r.x,-r.y));u.Ig()}}function wut(n,t){if(null===t)return!0;var i=t.U;return null===i||i instanceof fi||i.layer.Dc||n.Hc&&n.Hc.contains(i)||n.rd&&n.rd.contains(i)?!0:!1}function ld(n,t,i,r){var f=n.h,c,l,e,o;if(null!==f){n.ki&&(null!==n.Qc&&(n.Qc.ca=null,n.Qc.fa=null),kut(n,!1));c=!1;!1===n.Yv&&(c=f.ab,f.ab=!0);var h=!1,u=pp(f,t,null,function(t){return!wut(n,t)}),s=f.T;if(s.ke=u,l=f.ab,f.ab=!0,u!==n.Yl){for(e=n.Yl,n.Ov=e,n.Yl=u;null!==e;){if(o=e.TA,null!==o){if(u===e)break;if(null!==u&&u.rj(e))break;if(o(s,e,u),h=!0,s.Ke)break}e=e.ia}if(e=n.Ov,!n.la&&null===lr)return;for(;null!==u;){if(o=u.$F,null!==o){if(e===u)break;if(null!==e&&e.rj(u))break;if(o(s,u,e),h=!0,s.Ke)break}u=u.ia}if(u=n.Yl,!n.la&&null===lr)return}null===u&&(o=f.aG,null!==o&&(o(s),h=!0));(n.la||null!==lr)&&(n.doDragOver(t,u),n.la||null!==lr)&&(f.ab=l,h&&f.Ig(),!1===n.Yv&&(f.ab=c),(f.tf||f.uf)&&(i||r)&&not(f,s.Wd))}}function but(n,i,r){var o=n.Wi,f,e,u;if(null===o)return null;f=n.h.fn(i,o.dB,function(n){return o.findValidLinkablePort(n,r)});n=t.N();for(var s=Infinity,h=null,f=f.k;f.next();)e=f.value,null!==e.U&&(u=e.wb(si,n),u=i.nk(u),u<s&&(h=e,s=u));return t.B(n),h}function kut(n,t){var i=n.Qc,r,u,e,f,o,s;null===i||2>i.ra||(r=n.h,null===r||r.hb||(r=n.Wi,null===r)||(u=null,e=null,null===i.ca&&(u=but(n,i.o(0),!1),null!==u&&(e=u.U)),f=null,o=null,null===i.fa&&(f=but(n,i.o(i.ra-1),!0),null!==f&&(o=f.U)),(null===e||e instanceof y)&&(null===o||o instanceof y)&&(s=r.isValidLink(e,u,o,f),t?(i.Wn=i.o(0).copy(),i.$n=i.o(i.ra-1).copy(),i.jq=!1,i.ca=e,null!==u&&(i.Af=u.Ud),i.fa=o,null!==f&&(i.dg=f.Ud)):s?fft(r,e,u,o,f):fft(r,null,null,null,null))))}function dut(n,t){var u=n.h,i,r,f,e;if(null!==u&&null!==u.ea){if(n.ki&&kut(n,!0),od(n),i=pp(u,t,null,function(t){return!wut(n,t)}),r=u.T,r.ke=i,null!==i)for(f=i;null!==f;){if(e=f.Mt,null!==e&&(e(r,f),r.Ke))break;f=f.ia}else e=u.Mt,null!==e&&e(r);if((n.la||null!==lr)&&(n.doDropOnto(t,i),n.la||null!==lr))for(i=u.selection.k;i.next();)r=i.value,r instanceof y&&pat(u,r.pa)}}function gut(n,i,r){var u,e,a,h,o,l,f;if(null===n.rd&&(u=n.h,null!==u&&!u.hb&&!u.ef&&null!==u.ea)){for(u.ab=!r,u.Ln=!r,n.wj=u.T.da,u=u.Zm(i,u,!0),r=t.Jf(),vut(i,r),e=r.x+r.width/2,a=r.y+r.height/2,t.oc(r),h=n.$v,r=new gt(s,Object),o=t.N(),i=i.k;i.next();)f=i.value,f.Rd()&&f.canCopy()&&(l=f.location,f=u.Da(f),o.p(h.x-(e-l.x),h.y-(a-l.y)),f.location=o,f.xf(),r.add(f,uo(o)));for(t.B(o),u=u.k;u.next();)e=u.value,e instanceof c&&e.canCopy()&&r.add(e,uo());n.rd=r;ed(n,r.Pl());null!==n.Qc&&(r=n.Qc,u=r.Ij(),r.Dl(n.wj.x-(u.x+u.width/2),n.wj.y-(u.y+u.height/2)))}}function bt(){0<arguments.length&&t.fd(bt);wt.call(this);this.vD=100;this.VC=!1;var i=new c,n=new w;n.oi=!0;n.stroke="blue";i.add(n);n=new w;n.Gn="Standard";n.fill="blue";n.stroke="blue";i.add(n);i.Ne="Tool";this.RD=i;i=new y;n=new w;n.Ud="";n.Eb="Rectangle";n.fill=null;n.stroke="magenta";n.lb=2;n.Ea=u.jy;i.add(n);i.uk=!1;i.Ne="Tool";this.PD=i;this.QD=n;i=new y;n=new w;n.Ud="";n.Eb="Rectangle";n.fill=null;n.stroke="magenta";n.lb=2;n.Ea=u.jy;i.add(n);i.uk=!1;i.Ne="Tool";this.SD=i;this.TD=n;this.tD=this.sD=this.oD=this.nD=this.pD=null;this.RC=!0;this.OH=new gt(f,"boolean");this.wD=this.Yk=this.LD=null}function nft(n,t,i){var r,u;return null===t?!1:(r=t.Dd,null===r)?!1:r===i?!0:(u=new it(y),u.add(t),ad(n,r,i,u))}function ad(n,t,i,r){if(t===i)return!0;var u=t.ca;return null!==u&&u.ni&&(r.add(u),ad(n,u.Dd,i,r))?!0:(t=t.fa,null!==t&&t.ni&&(r.add(t),ad(n,t.Dd,i,r))?!0:!1)}function fat(n,t,i,r){var u,f;if(null===t||null===i)return n.mn;if(u=n.h.fH,u!==gp){if(u===aet){if(null!==r&&!r.Ic)return!0;for(u=i.Td;u.next();)if(f=u.value,f!==r&&f.Ic&&f.fa===i)return!1;return!ev(n,t,i,r,!0)}if(u===vet){if(null!==r&&!r.Ic)return!0;for(u=t.Td;u.next();)if(f=u.value,f!==r&&f.Ic&&f.ca===t)return!1;return!ev(n,t,i,r,!0)}if(u===set)return t===i?n=!0:(u=new it(y),u.add(i),n=tft(n,u,t,i,r)),!n;if(u===het)return!ev(n,t,i,r,!1);if(u===cet)return t===i?n=!0:(u=new it(y),u.add(i),n=ift(n,u,t,i,r)),!n}return!0}function ev(n,t,i,r,u){var e,f;if(t===i)return!0;if(null===t||null===i)return!1;for(e=t.Td;e.next();)if(f=e.value,f!==r&&(!u||f.Ic)&&f.fa===t&&(f=f.ca,f!==t&&ev(n,f,i,r,u)))return!0;return!1}function tft(n,t,i,r,u){var e,f;if(i===r)return!0;if(null===i||null===r||t.contains(i))return!1;for(t.add(i),e=i.Td;e.next();)if(f=e.value,f!==u&&f.fa===i&&(f=f.ca,f!==i&&tft(n,t,f,r,u)))return!0;return!1}function ift(n,t,i,r,u){var o,f;if(i===r)return!0;if(null===i||null===r||t.contains(i))return!1;for(t.add(i),o=i.Td;o.next();)if(f=o.value,f!==u){var e=f.ca,f=f.fa,e=e===i?f:e;if(e!==i&&ift(n,t,e,r,u))return!0}return!1}function ki(){0<arguments.length&&t.fd(ki);bt.call(this);this.name="Linking";this.zy={};this.yy=null;this.ua=ep;this.Hz=this.GD=null}function vu(){0<arguments.length&&t.fd(vu);bt.call(this);this.name="Relinking";var n=new w;n.Eb="Diamond";n.Ea=u.$x;n.fill="lightblue";n.stroke="dodgerblue";n.cursor="pointer";n.Gf=0;this.GC=n;n=new w;n.Eb="Diamond";n.Ea=u.$x;n.fill="lightblue";n.stroke="dodgerblue";n.cursor="pointer";n.Gf=-1;this.UD=n;this.kc=null;this.qD=new p}function fft(n,t,i,r,u){null!==t?(n.copyPortProperties(t,i,n.le,n.Nl,!1),n.h.add(n.le)):n.h.remove(n.le);null!==r?(n.copyPortProperties(r,u,n.me,n.Ol,!0),n.h.add(n.me)):n.h.remove(n.me)}function wi(){0<arguments.length&&t.fd(wi);wt.call(this);this.name="LinkReshaping";var n=new w;n.Eb="Rectangle";n.Ea=u.rq;n.fill="lightblue";n.stroke="dodgerblue";this.Sk=n;n=new w;n.Eb="Diamond";n.Ea=u.rq;n.fill="lightblue";n.stroke="dodgerblue";this.bD=n;this.xD=3;this.wy=this.kc=null;this.rD=new h;this.zz=null}function ov(n,i){t.l(n,f,wi,"setReshapingBehavior:obj");t.Fa(i,wi,wi,"setReshapingBehavior:behavior");n.Pv=i}function ll(n,t,i,r,u,f){return f?Math.abs(t.y-i.y)<n.Sg&&Math.abs(i.y-r.y)<n.Sg&&Math.abs(r.y-u.y)<n.Sg:Math.abs(t.x-i.x)<n.Sg&&Math.abs(i.x-r.x)<n.Sg&&Math.abs(r.x-u.x)<n.Sg}function yi(){0<arguments.length&&t.fd(yi);wt.call(this);this.name="Resizing";this.Tj=new st(1,1).freeze();this.Sj=new st(9999,9999).freeze();this.Dj=new st(NaN,NaN).freeze();this.jr=!1;this.ob=null;var n=new w;n.ek=si;n.Eb="Rectangle";n.Ea=u.rq;n.fill="lightblue";n.stroke="dodgerblue";n.lb=1;n.cursor="pointer";this.Sk=n;this.kc=null;this.Kv=new st;this.yz=new h;this.cz=new st(0,0);this.bz=new st(Infinity,Infinity);this.az=new st(1,1);this.kD=!0}function eft(n,t,i){if(null!==t)if(t.alignment.Tc()||""===t.cursor){if(t instanceof a)for(t=t.elements;t.next();)eft(n,t.value,i)}else n:{if(n=t.alignment,n.Me()&&(n=si),0>=n.x)i=0>=n.y?i+225:1<=n.y?i+135:i+180;else if(1<=n.x)0>=n.y?i+=315:1<=n.y&&(i+=45);else if(0>=n.y)i+=270;else if(1<=n.y)i+=90;else break n;0>i?i+=360:360<=i&&(i-=360);t.cursor=22.5>i?"e-resize":67.5>i?"se-resize":112.5>i?"s-resize":157.5>i?"sw-resize":202.5>i?"w-resize":247.5>i?"nw-resize":292.5>i?"n-resize":337.5>i?"ne-resize":"e-resize"}}function nr(){0<arguments.length&&t.fd(nr);wt.call(this);this.name="Rotating";this.DD=45;this.CD=2;this.ob=null;var n=new w;n.Eb="Ellipse";n.Ea=u.$x;n.fill="lightblue";n.stroke="dodgerblue";n.lb=1;n.cursor="pointer";this.Sk=n;this.kc=null;this.Jv=0;this.yD=new h}function al(){0<arguments.length&&t.fd(al);wt.call(this);this.name="ClickSelecting"}function hs(){0<arguments.length&&t.fd(hs);wt.call(this);this.name="Action";this.Kn=null}function te(){0<arguments.length&&t.fd(te);wt.call(this);this.name="ClickCreating";this.Kk=null;this.PC=!0;this.FC=new h(0,0)}function er(){var u,n,i,r;0<arguments.length&&t.fd(er);wt.call(this);this.name="ContextMenu";this.Tn=this.nC=null;this.eD=new h;this.ao=null;!0===t.CB&&(this.ao=new fi,this.Ry=null,u=this,this.VD=function(){u.stopTool()},!1===t.KE&&(n=document.createElement("div"),i=document.createElement("div"),n.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",i.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);",r=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(r),r.sheet.insertRule(".defaultCXul { list-style: none; }",0),r.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),r.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),n.addEventListener("contextmenu",function(n){return n.preventDefault(),!1},!1),n.addEventListener("selectstart",function(n){return n.preventDefault(),!1},!1),i.addEventListener("contextmenu",function(n){return n.preventDefault(),!1},!1),document.body&&(document.body.appendChild(n),document.body.appendChild(i)),t.it=n,t.ht=i,t.KE=!0))}function oft(n,t,i){n.la=!0;t&&n.standardMouseSelect();n.standardMouseClick();n.Tn=null;void 0===i&&(i=n.findObjectWithContextMenu());null!==i?(t=i.contextMenu,null!==t?(n.Tn=i instanceof f?i:null,n.showContextMenu(t,n.Tn)):n.showDefaultContextMenu()):n.showDefaultContextMenu()}function gr(){var i,n;0<arguments.length&&t.fd(gr);wt.call(this);this.name="DragSelecting";this.bo=175;this.UC=!1;i=new s;i.Ne="Tool";i.uk=!1;n=new w;n.name="SHAPE";n.Eb="Rectangle";n.fill=null;n.stroke="magenta";i.add(n);this.Vl=i}function pu(){0<arguments.length&&t.fd(pu);wt.call(this);this.name="Panning";this.Az=new h;this.Cj=!1;var n=this;this.JD=function(){document.removeEventListener("scroll",n.JD,!1);n.stopTool()}}function li(){0<arguments.length&&t.fd(li);wt.call(this);this.name="TextEditing";this.qC=this.Nz=this.ND=null;this.HD=wd;this.fl=null;this.cb=hft;this.bl=null;var n=document.createElement("textarea");n.aC=!0;this.vC=n;n.addEventListener("input",function(){var n=this.textEditingTool.ND;n.text=this.value;bi(n,Infinity,Infinity);this.style.width=20+n.Ha.width*this.wK+"px";this.rows=n.NF},!1);n.addEventListener("keydown",function(n){var i=n.which,t=this.textEditingTool;if(null!==t)if(13===i)t.acceptText(sp);else{if(9===i)return t.acceptText(pd),n.preventDefault(),!1;27===i&&(t.doCancel(),t.h&&t.h.focus())}},!1);n.addEventListener("focus",function(){var n=this.textEditingTool;n.cb===hp?n.cb=sv:n.cb===kd?n.cb=bd:n.cb===bd&&(n.cb=sv);this.select()},!1);n.addEventListener("blur",function(){this.focus();this.select()},!1)}function lft(n){if(null!==n.Ug&&null!==n.ph){var t=n.Ug,i=n.Ug.text,u=n.ph.value,r="",r="function"==typeof u?u():u;if(!n.isValidText(n.Ug,i,r)){n.cb=sv;null!==t.pt&&t.pt(n,i,r);null===n.bl&&(n.bl=n.ph.style.border,n.ph.style.border="3px solid red");n.ph.focus();return}n.yc(n.name);n.cb=kd;i!==r&&(n.Ug.text=r);n.mf=n.name;t=n.h;null!==t&&t.Ga("TextEdited",n.Ug,i);n.vk();n.stopTool();null!==t&&t.focus()}null!==n.bl&&(n.ph.style.border=n.bl,n.bl=null)}function lt(){wt.call(this);this.name="ToolManager";this.fD=new b(wt);this.gD=new b(wt);this.hD=new b(wt);this.IC=this.JC=1e3;this.xC=new st(2,2).Oa();this.Pu=this.Py=null;this.iD=vl}function no(n,i,r,u){t.i(i,"string",lt,"replaceStandardTool:name");t.l(u,b,lt,"replaceStandardTool:list");null!==r&&(t.l(r,wt,lt,"replaceStandardTool:newtool"),r.h&&r.h!==n.h&&t.m("Cannot share tools between Diagrams: "+r.toString()),r.name=i,r.Ed(n.h));n.findTool(i)?n.replaceTool(i,r):null!==r&&u.add(r)}function ff(){this.CH=eat;this.W=null;new gt;this.bm=this.cm=null;this.dC=this.zd=this.qr=this.Kj=!1;this.Re=!0;this.Ou=this.Nu=this.oC=null;this.Ny=0;this.Yy=600;this.IH=new h(0,0);this.fC=this.eC=this.ZD=!1;this.Io=new gt}function eat(n,t,i,r){return n/=r/2,1>n?i/2*n*n+t:-i/2*(--n*(n-2)-1)+t}function oat(n){n.Re&&requestAnimationFrame(function(){!1===n.zd||n.Kj||(n.zd=!1,n.W.Ga("AnimationStarting"),sat(n))})}function cp(n,i,u,e){if(n.zd&&(r&&(i instanceof f||t.m("addToAnimation:object must be a GraphObject.")),!(i instanceof s)||i.GA)){var h=n.Io,o;h.contains(i)?(i=h.Da(i),n=i[0],o=i[1],void 0===n.position&&(n.position=lp(u)),o.position=lp(e)):(n={},o={},n.position=lp(u),o.position=lp(e),h.add(i,[n,o]))}}function lp(n){return n instanceof h?n.copy():n instanceof st?n.copy():n}function sat(n){var t,i=n.W,o,u,e;if(null!==i)if(0===n.Io.count)n.Kj=!1,i.Ig();else{n.Kj=!0;t||(t={});var f=t.HK||n.CH,s=t.TK||null,h=t.UK||null,r=t.duration||n.Yy;for(t=n.Io.k,o=n.IH;t.next();)u=t.value[0].position,u&&!u.P()&&u.assign(o);n.oC=f;n.Nu=s;n.Ou=h;n.Ny=r;e=n.BH=n.Io;ap(n);gd(n,i,e,f,0,r,null!==n.cm&&null!==n.bm);bp(n.W);vp(n);requestAnimationFrame(function(t){var o=t||+new Date,s=o+r,u;(function h(t){!1!==n.Kj&&(u=t||+new Date,t=u>s?r:u-o,ap(n),gd(n,i,e,f,t,r,null!==n.cm&&null!==n.bm),n.Nu&&n.Nu(),bp(i),vp(n),u>s?aft(n):requestAnimationFrame(h))})(o)})}}function ap(n){if(!n.qr){var t=n.W;n.ZD=t.ab;n.eC=t.hu;n.fC=t.Oo;t.ab=!0;t.hu=!0;t.Oo=!0;n.qr=!0}}function vp(n){var t=n.W;t.ab=n.ZD;t.hu=n.eC;t.Oo=n.fC;n.qr=!1}function gd(n,t,i,r,u,f,e){for(i=i.k;i.next();){var c=i.key,s=i.value,l=s[0],s=s[1];for(var o in s)void 0!==dd[o]&&dd[o](c,l[o],s[o],r,u,f)}e&&(e=n.cm,n=n.bm,o=n.y-e.y,n=r(u,e.x,n.x-e.x,f),r=r(u,e.y,o,f),u=t.cc,t.cc=!0,t.position=new h(n,r),t.cc=u)}function aft(n){var t,i;for(n.Kj=!1,n.cm=null,n.bm=null,n.Io=new gt,ap(n),t=n.W.links;t.next();)i=t.value,null!==i.No&&(i.points=i.No,i.No=null);t=n.W;t.Sc();t.Ig();vp(n);n.Ou&&n.Ou();n.Ou=null;n.Nu=null;t.Ga("AnimationFinished")}function vft(n,t,i){var r=t.pa,u=i.pa;i instanceof g&&i.placeholder?(i=i.placeholder,r=i.wb(hr),r.x+=i.padding.left,r.y+=i.padding.top,cp(n,t,r,t.position)):cp(n,t,new h(u.x+u.width/2-r.width/2,u.y+u.height/2-r.height/2),t.position)}function yft(n,t,i){n.zd&&(null===n.cm&&t.P()&&null===n.bm&&(n.cm=t.copy()),n.bm=i.copy())}function et(){0<arguments.length&&t.fd(et);t.Fc(this);this.W=null;this.mb=new b(s);this.ec="";this.Qf=1;this.oz=!1;this.dl=this.Rz=this.Hk=this.Gk=this.Fk=this.Ek=this.Ck=this.Dk=this.Bk=this.Jk=this.Ak=this.Ik=this.zk=this.yk=!0;this.lz=!1;this.Lv=[]}function pft(n,t,i,r){var h,u,s,e,f;if(n.visible){t.globalAlpha=n.Qf;h=n.mb;n=n.Lv;n.length=0;for(var o=i.scale,p=h.length,w=r.length,l=0;l<p;l++)if(u=h.n[l],ns(u)){if(u instanceof c&&(u.pc&&n.push(u),!1===u.xg))continue;s=sh(u,u.pa);n:{e=s;for(var b=r,k=w,v=2/o,y=4/o,a=0;a<k;a++)if(f=b[a],0!==f[2]&&0!==f[3]&&e.zF(f[0]-v,f[1]-v,f[2]+y,f[3]+y)){e=!0;break n}e=!1}e&&(1<s.width*o||1<s.height*o?u.$e(t,i):ny(u,t))}t.globalAlpha=1}}function i(n){function r(){document.removeEventListener("DOMContentLoaded",r,!1);bft(u)}var u,i;1<arguments.length&&t.m("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");t.Fc(this);t.oA=[];this.cc=!0;this.yi=new ff;this.yi.W=this;this.sf=17;u=this;null!==document.body?bft(this):document.addEventListener("DOMContentLoaded",r,!1);this.Wb=new b(et);this.Ib=this.Jb=0;this.Rb=this.of=this.Za=null;this.el={};this.mG();this.Pa=new h(NaN,NaN).freeze();this.fc=1;this.gv=new h(NaN,NaN).freeze();this.hv=NaN;this.wv=.0001;this.tv=100;this.Oc=new hi;this.mw=new h(NaN,NaN).freeze();this.Yu=new p(NaN,NaN,NaN,NaN).freeze();this.Sl=we;this.Rn=pr;this.Uk=we;this.qo=pr;this.iv=this.fv=hr;this.lg=new it(f);this.Be=!0;this.co=new gt(c,p);this.eo=!0;this.yH=250;this.Tl=null;this.Du=new ni(16,16,16,16).freeze();this.Su=this.Sf=!1;this.jo=!0;this.Qk=new kt;this.Md=new kt;this.dc=new kt;this.Ej=null;this.cw=-1;this.Jz=!1;this.Vy=new gt("string",b);this.Uy=new gt("string","string");yat(this);this.Gv=new it(y);this.gl=new it(g);this.pv=new it(c);this.mb=new it(s);this.kv=!0;this.LC=!1;this.jw=gp;this.Mj=10;this.Oy=this.Sy=this.hw=null;this.My="";this.Uq="auto";this.Di=this.$i=this.Ni=this.zv=this.Oi=this.Pi=this.Qi=this.Ci=this.Gi=this.Ai=null;this.Ii=!0;this.wz=!1;this.Dy=null;this.lv=this.Ln=this.Ty=this.Oo=this.BD=this.Xi=!1;this.WC=!0;this.Jd=!1;this.pe=null;i=this;this.cD=function(n){if(n.ea===i.ea&&i.Sa){i.Sa=!1;try{var t=n.Bd;""===n.Ff&&t===di&&pet(i,n.object,n.propertyName)}finally{i.Sa=!0}}};this.dD=function(n){aat(i,n)};this.aE=!0;this.ah=-2;this.Ei=new gt(Object,s);this.Nk=new gt(Object,c);this.km=new gt(Object,Array);this.Wk=!1;this.zk=this.yk=this.tu=this.Re=!0;this.vu=this.uu=!1;this.Au=this.yu=this.Hk=this.Gk=this.Fk=this.Ek=this.Ck=this.Dk=this.Bk=this.xu=this.Jk=this.Ak=this.Ik=!0;this.uo=this.TC=!1;this.zu=this.wu=this.dv=this.cv=!0;this.Uv=this.Tv=16;this.Dz=this.Sv=!1;this.Fz=this.Ez=this.$j=this.Zj=null;this.Te=new ni(5).freeze();this.Xv=new it(s).freeze();this.uv=999999999;this.ev=new it(s).freeze();this.Vk=this.Jj=this.Ji=!0;this.fm=this.em=!1;this.kz=this.jz=0;this.Yd=null;this.Bu=!0;this.rf=!1;this.$d=null;this.wm=1;this.no=!1;this.FD=0;this.Go=null;this.$D=new p(NaN,NaN,NaN,NaN).freeze();this.Tu=new p(NaN,NaN,NaN,NaN).freeze();this.xm=new it;gft(this);this.ov=this.$u=this.Fv=this.sC=this.rC=this.tC=this.Nj=this.Rk=this.Ri=null;wft(this);this.md=null;this.Zu=!1;this.Sn=null;this.Cb=new lt;this.Cb.initializeStandardTools();this.Ya=this.Iw=this.Cb;this.Ye=new at;this.ea=new k;this.Xi=!0;this.ic=new ti;this.Xi=!1;void 0===n&&(n=document.createElement("div"));this.CC=this.Xy=null;this.Qz=!0;this.Cz=!1;this.Hj=null;this.sg=1;this.Tk=new ng;tg(this,n);this.mm=1;this.nm=0;this.ZC=new h;this.XD=500;this.Cu=new h;this.Bs=null;this.cc=!1}function wft(n){var i,t,r;n.Ri=new gt("string",s);i=new y;t=new ot;t.bind(new ri("text","",ne));i.add(t);n.tC=i;n.Ri.add("",i);i=new y;t=new ot;t.stroke="brown";t.bind(new ri("text","",ne));i.add(t);n.Ri.add("Comment",i);i=new y;i.uk=!1;i.dA=!1;t=new w;t.Eb="Ellipse";t.fill="black";t.stroke=null;t.Ea=new st(3,3).Oa();i.add(t);n.Ri.add("LinkLabel",i);n.Rk=new gt("string",g);i=new g;i.du="GROUPPANEL";i.type=pot;t=new ot;t.font="bold 12pt sans-serif";t.bind(new ri("text","",ne));i.add(t);t=new a(bo);t.name="GROUPPANEL";r=new w;r.Eb="Rectangle";r.fill="rgba(128,128,128,0.2)";r.stroke="black";t.add(r);r=new or;r.padding=new ni(5,5,5,5).Oa();t.add(r);i.add(t);n.rC=i;n.Rk.add("",i);n.Nj=new gt("string",c);i=new c;t=new w;t.oi=!0;i.add(t);t=new w;t.Gn="Standard";t.fill="black";t.stroke=null;t.lb=0;i.add(t);n.sC=i;n.Nj.add("",i);i=new c;t=new w;t.oi=!0;t.stroke="brown";i.add(t);n.Nj.add("Comment",i);i=new fi;i.type=bo;t=new w;t.fill=null;t.stroke="dodgerblue";t.lb=3;i.add(t);t=new or;t.margin=new ni(1.5,1.5,1.5,1.5).Oa();i.add(t);n.Fv=i;n.$u=i;i=new fi;i.type=go;t=new w;t.oi=!0;t.fill=null;t.stroke="dodgerblue";t.lb=3;i.add(t);n.ov=i}function bft(n){var i=document.createElement("p"),t,r;i.style.width="100%";i.style.height="200px";i.style.boxSizing="content-box";t=document.createElement("div");t.style.position="absolute";t.style.visibility="hidden";t.style.width="200px";t.style.height="150px";t.style.overflow="hidden";t.style.boxSizing="content-box";t.appendChild(i);document.body.appendChild(t);r=i.offsetWidth;t.style.overflow="scroll";i=i.offsetWidth;r===i&&(i=t.clientWidth);document.body.removeChild(t);n.sf=r-i}function ng(){this.NH="63ad05bbe23a1786468a4c741b6d2";this.NH===this._tk?this.Kh=!0:kft(this,!1)}function kft(i,r){var f="p",u=n[t.Ma("76a715b2f73f148a")][t.Ma("72ba13b5")],o,e;if(t.Ma("77bb5bb2f32603de")===n[t.Ma("76a715b2f73f148a")][t.Ma("6aba19a7ec351488")])try{if(i.Kh=!n[t.Ma("4da118b7ec2108")]([t.Ma("5bb806bfea351a904a84515e1b6d38b6")])([t.Ma("49bc19a1e6")])([t.Ma("59bd04a1e6380fa5539b")])([t.Ma("7bb8069ae7")]===t.Ma(t.qw)),!1===i.Kh)return;if(i.Kh=!n[t.Ma("4da118b7ec2108")]([t.Ma("5bb806bfea351a904a84515e1b6d38b6")])([t.Ma("49bc19a1e6")])([t.Ma("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([t.Ma("7bb8069ae7")]===t.Ma(t.qw)),!1===i.Kh)return}catch(s){}for(o=u[t.Ma("76ad18b4f73e")],e=u[t.Ma("73a612b6fb191d")](t.Ma("35e7"))+2;e<o;e++)f+=u[e];u=f[t.Ma("73a612b6fb191d")](t.Ma(t.qw));0>=u&&t.Ma(t.qw)!==t.Ma("7da71ca0ad381e90")&&(u=f[t.Ma("73a612b6fb191d")](t.Ma("76a715b2ef3e149757")));i.Kh=!(0<u&&u<f[t.Ma("73a612b6fb191d")](t.Ma("35")));i.Kh&&(f=document[t.Ma("79ba13b2f7333e8846865a7d00")]("div"),u=t.Ma("34af05bbcb331a804699"),"."===u[0]&&(u=u[t.Ma("69bd14a0f724128a44")](1)),f[t.Ma("79a417a0f0181a8946")]=u,document[t.Ma("78a712aa")]?(document[t.Ma("78a712aa")][t.Ma("7bb806b6ed32388c4a875b")](f),u=n[t.Ma("7dad0290ec3b0b91578e5b40007031bf")](f)[t.Ma("7dad0283f1390b81519f4645156528bf")](t.Ma("78a704b7e62456904c9b12701b6532a8")),document[t.Ma("78a712aa")][t.Ma('"68ad1bbcf533388c4a875b')](f),u&&-1!==u.indexOf(t.Ma(t.sI))&&-1!==u.indexOf(t.Ma(t.tI))&&(i.Kh=!1)):(i.Kh=null,r&&(i.Kh=!1)))}function tg(i,u){var f,s,e;if(void 0!==u&&null!==u||t.m("Diagram setup requires an argument DIV."),null!==i.Rb&&t.m("Diagram has already completed setup."),"string"==typeof u?i.Rb=document.getElementById(u):u instanceof HTMLDivElement?i.Rb=u:t.m("No DIV or DIV id supplied: "+u),null===i.Rb&&t.m("Invalid DIV id; could not get element with id: "+u),void 0!==i.Rb.W&&t.m("Invalid div id; div already has a Diagram associated with it."),"static"===n.getComputedStyle(i.Rb,null).position&&(i.Rb.style.position="relative"),i.Rb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",i.Rb.style["-ms-touch-action"]="none",i.Rb.innerHTML="",i.Rb.W=i,f=document.createElement("canvas"),f.getContext&&f.getContext("2d")){f.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";void 0!==f.style&&(f.style.position="absolute",f.style.top="0px",f.style.left="0px",f.style.zIndex="2",f.style.bL="none",f.style.webkitUserSelect="none",f.style.MozUserSelect="none");i.Jb=i.Rb.clientWidth||1;i.Ib=i.Rb.clientHeight||1;i.Za=f;i.of=f.getContext("2d");s=i.of;i.sg=i.computePixelRatio();kp(i,i.Jb,i.Ib);i.kz=0;i.jz=0;document.body?(e=document.body.parentNode,i.kz=e.offsetTop||0,i.jz=e.offsetLeft||0):document.addEventListener("load",function(){if(document.body){var n=document.body.parentNode;i.kz=n.offsetTop||0;i.jz=n.offsetLeft||0}},!1);f.W=i;i.vy=s[t.Ma("7eba17a4ca3b1a8346")][t.Ma("78a118b7")](s,t.Ql,4,4);i.Rb.insertBefore(f,i.Rb.firstChild);s=document.createElement("canvas");s.width=1;s.height=1;i.Xy=s;i.CC=s.getContext("2d");var e=document.createElement("div"),o=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div");e.style.position="absolute";e.style.overflow="auto";e.style.width=i.Jb+"px";e.style.height=i.Ib+"px";e.style.zIndex="1";o.style.position="absolute";o.style.overflow="auto";o.style.width=i.Jb+"px";o.style.height=i.Ib+"px";o.style.zIndex="1";c.style.position="absolute";c.style.width="1px";c.style.height="1px";l.style.position="absolute";l.style.width="1px";l.style.height="1px";i.Rb.appendChild(e);i.Rb.appendChild(o);e.appendChild(c);o.appendChild(l);e.onscroll=i.lD;e.onmousedown=i.mD;e.W=i;e.zD=!0;o.onscroll=i.lD;o.onmousedown=i.mD;o.W=i;o.AD=!0;i.Zj=e;i.$j=o;i.Ez=c;i.Fz=l;i.bK=t.HE(function(){i.na()},300,!1);i.oH=t.HE(function(){dft(i)},250,!1);i.preventDefault=function(n){return n.preventDefault(),!1};i.Qp=function(n){if(i.isEnabled){i.uo=!0;var r=i.Md;t.kn&&r.lx?(n.preventDefault(),n.simulated=!0,i.Bs=n):(i.Md=i.dc,i.dc=r,lc(i,i,n,r,!0),i.zB(n,null,n.target.W)||(i.doMouseMove(),i.Ya.isBeyondDragSize()&&(hv(i),i.mm=0)))}};i.Pp=function(u){if(i.isEnabled){i.uo=!0;var f=i.Md;if(t.kn&&null!==i.Bs)i.Bs=u,u.preventDefault();else if(t.kn&&400>u.timeStamp-i.nm)u.preventDefault();else if(i.Md=i.dc,i.dc=f,lc(i,i,u,f,!0),f.ok=!0,f.Ge=u.detail,i.Qk=f.copy(),!0===f.$q.simulated)u.preventDefault(),u.simulated=!0;else if(r&&r.cG&&(n.cG=i.op(f.da)),lr=null,i.doMouseDown(),1===u.button)return u.preventDefault(),!1}};i.Sp=function(n){if(i.isEnabled){i.uo=!0;var r=i.Md;if(t.kn){if(400>n.timeStamp-i.nm){n.preventDefault();return}i.nm=n.timeStamp}t.kn&&null!==i.Bs?(i.Bs=null,n.preventDefault()):(i.Md=i.dc,i.dc=r,lc(i,i,n,r,!0),r.zj=!0,r.Ge=n.detail,(t.gx||t.LA)&&(n.timeStamp-i.nm<i.XD&&!i.Ya.isBeyondDragSize()?i.mm++:i.mm=1,i.nm=n.timeStamp,r.Ge=i.mm),r.bubbles=n.bubbles,n.target.W&&(r.zh=n.target.W),i.JG(n,null,new h,r.zh)||(i.doMouseUp(),fh(i),gh(i,r,n)))}};i.th=function(n){if(i.isEnabled){var t=i.Md;i.Md=i.dc;i.dc=t;lc(i,i,n,t,!0);t.bubbles=!0;t.mk=void 0!==n.wheelDelta?n.wheelDelta:-40*n.detail;i.doMouseWheel();gh(i,t,n)}};i.Rp=function(){if(i.isEnabled){i.uo=!1;var n=i.Ya;n.cancelWaitAfter();n instanceof lt&&n.hideToolTip()}};i.WG=function(n){if(i.isEnabled){if(i.Jz=!1,1<n.touches.length){if(i.Ya.doCancel(),i.Ii){i.no=!0;i.wm=i.scale;var u=i.Jb,t=i.Ib,r=i.Za.getBoundingClientRect(),f=n.targetTouches[0],e=f.clientX-u/r.width*r.left,o=f.clientY-t/r.height*r.top,f=n.targetTouches[1],u=f.clientX-u/r.width*r.left-e,t=f.clientY-t/r.height*r.top-o,t=Math.sqrt(u*u+t*t);return i.FD=t,n.preventDefault(),n.cancelBubble=!0,!1}return hv(i),n.cancelBubble=!1,!0}t=i.Md;i.Md=i.dc;i.dc=t;t.h=i;wp(i,n.targetTouches[0],t);t.dd=0;t.button=0;t.ok=!0;t.zj=!1;t.Ge=1;t.mk=0;t.Ke=!1;t.bubbles=!1;t.event=n;t.timestamp=Date.now();t.zh=n.target.W?n.target.W:null;t.ke=null;i.Qk=t.copy();lr=null;i.doMouseDown();hat(i,t);gh(i,t,n)}};i.VG=function(n){if(i.isEnabled){if(1<n.touches.length){if(i.Ya.doCancel(),hv(i),i.Ii&&i.no&&1<n.targetTouches.length){var f=i.Jb,o=i.Ib,e=i.Za.getBoundingClientRect(),r=n.targetTouches[0],t=r.clientX-f/e.width*e.left,u=r.clientY-o/e.height*e.top,r=n.targetTouches[1],f=r.clientX-f/e.width*e.left,r=r.clientY-o/e.height*e.top,o=f-t,e=r-u,o=Math.sqrt(o*o+e*e)/i.FD,r=new h((Math.min(f,t)+Math.max(f,t))/2,(Math.min(r,u)+Math.max(r,u))/2),t=i.wm*o,u=i.Ye;return t!==i.scale&&u.canResetZoom(t)&&(f=i.eg,i.eg=r,u.resetZoom(t),i.eg=f),n.preventDefault(),n.cancelBubble=!0,!1}return n.cancelBubble=!1,!0}t=i.Md;i.Md=i.dc;i.dc=t;r=u=null;0<n.changedTouches.length?r=n.changedTouches[0]:0<n.targetTouches.length&&(r=n.targetTouches[0]);t.h=i;r?((u=document.elementFromPoint(r.clientX,r.clientY))&&u.W?(o=r,f=u.W):(o=n.changedTouches[0],f=i),wp(f,o,t)):null!==i.Md?(t.da=i.Md.da,t.Wd=i.Md.Wd,u=i.Md.zh):null!==i.Qk&&(t.da=i.Qk.da,t.Wd=i.Qk.Wd,u=i.Qk.zh);t.dd=0;t.button=0;t.ok=!1;t.zj=!1;t.Ge=1;t.mk=0;t.Ke=!1;t.bubbles=!1;t.event=n;t.timestamp=Date.now();t.zh=null===u?n.target.W:u.W?u.W:null;t.ke=null;i.Ya.isBeyondDragSize()&&hv(i);i.zB(r?r:n,null,t.zh)||(i.doMouseMove(),gh(i,t,n))}};i.UG=function(n){var t,r,u,f,e,o;if(i.isEnabled){if(hv(i),i.Jz)return n.preventDefault(),!1;t=i.Md;i.Md=i.dc;i.dc=t;1<n.touches.length?i.Ii&&(i.no=!1):(u=null,r=null,0<n.changedTouches.length?r=n.changedTouches[0]:0<n.targetTouches.length&&(r=n.targetTouches[0]),t.h=i,t.Ge=1,r?(u=document.elementFromPoint(r.clientX,r.clientY),u&&u.W?(e=r,f=u.W):(e=n.changedTouches[0],f=i),wp(f,e,t),f=r.screenX,e=r.screenY,o=i.ZC,n.timeStamp-i.nm<i.XD&&!(25<Math.abs(o.x-f)||25<Math.abs(o.y-e))?i.mm++:i.mm=1,t.Ge=i.mm,i.nm=n.timeStamp,i.ZC.p(f,e)):u=t.zh,t.dd=0,t.button=0,t.ok=!1,t.zj=!0,t.mk=0,t.Ke=!1,t.bubbles=!1,t.event=n,t.timestamp=Date.now(),t.zh=null===u?n.target.W:u.W?u.W:null,t.ke=null,i.JG(r?r:n,null,new h,t.zh)||(i.doMouseUp(),gh(i,t,n)))}};f.addEventListener("touchstart",i.WG,!1);f.addEventListener("touchmove",i.VG,!1);f.addEventListener("touchend",i.UG,!1);f.addEventListener("gesturestart",function(){!1!==i.Ii&&(i.wm=i.scale,i.Ya.doCancel(),i.HC=0)},!1);f.addEventListener("gesturechange",function(t){var r;if(!1!==i.Ii){if(r=t.scale,i.HC++,1===i.HC)if(1.02<r||.98>r)t.preventDefault();else{i.wm=null;return}if(null!==i.wm){var u=i.Jb,e=i.Ib,f=i.Za.getBoundingClientRect();t=new h(t.pageX-n.scrollX-u/f.width*f.left,t.pageY-n.scrollY-e/f.height*f.top);r*=i.wm;u=i.Ye;r!==i.scale&&u.canResetZoom(r)&&(e=i.eg,i.eg=t,u.resetZoom(r),i.eg=e)}}},!1);n.MSGesture&&(i.Go=new n.MSGesture,i.Go.target=s,f.addEventListener("pointerdown",function(n){i.Go.addPointer(n.pointerId)},!1),f.addEventListener("MSGestureStart",function(n){!1!==i.Ii&&(i.wm=i.scale,i.no=!0,n.preventDefault())},!1),f.addEventListener("MSGestureChange",function(n){var t,r,u;!1!==i.Ii&&(t=n.scale,1===t?(n.gestureObject.stop(),n.preventDefault()):(i.no&&(i.Ya.doCancel(),i.no=!1),n=i.JB(i.dm(n)),t=i.scale*t,r=i.Ye,t!==i.scale&&r.canResetZoom(t)&&(u=i.eg,i.eg=n,r.resetZoom(t),i.eg=u)))},!1));f.addEventListener("mousemove",i.Qp,!1);f.addEventListener("mousedown",i.Pp,!1);f.addEventListener("mouseup",i.Sp,!1);f.addEventListener("mousewheel",i.th,!1);f.addEventListener("DOMMouseScroll",i.th,!1);f.addEventListener("mouseout",i.Rp,!1);f.addEventListener("keydown",i.DJ,!1);f.addEventListener("keyup",i.EJ,!1);f.addEventListener("selectstart",function(n){return n.preventDefault(),!1},!1);f.addEventListener("contextmenu",function(n){return n.preventDefault(),!1},!1);n.addEventListener("resize",i.oH,!1);f.tabIndex=0;ef(i)}else i.Rb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element."}function dft(n){var t;if(null!==n.Za&&(t=n.Rb,0!==t.clientWidth&&0!==t.clientHeight)){var i=n.fm?n.sf:0,r=n.em?n.sf:0,u=n.sg;n.sg=n.computePixelRatio();n.sg!==u&&(kp(n,n.Jb,n.Ib),ef(n),n.ie());(t.clientWidth!==n.Jb+i||t.clientHeight!==n.Ib+r)&&(n.Jj=!0,n.Be=!0,t=n.ic,null!==t&&t.Gt&&t.M(),n.Jd||n.ie())}}function ef(n,t,i){void 0===t&&(t=n.of);void 0===i&&(i=!0);i&&(t.su="");t.Jn="";t.Rl=""}function gft(n){var t=new et;t.name="Background";n.Ys(t);t=new et;t.name="";n.Ys(t);t=new et;t.name="Foreground";n.Ys(t);t=new et;t.name="Adornment";t.Dc=!0;n.Ys(t);t=new et;t.name="Tool";t.Dc=!0;t.HA=!0;n.Ys(t);t=new et;t.name="Grid";t.Ve=!1;t.kf=!1;t.Dc=!0;n.UH(t,n.sl("Background"))}function net(n){n.md=new a(bc);n.md.name="GRID";var t=new w;t.Eb="LineH";t.stroke="lightgray";t.lb=.5;t.interval=1;n.md.add(t);t=new w;t.Eb="LineH";t.stroke="gray";t.lb=.5;t.interval=5;n.md.add(t);t=new w;t.Eb="LineH";t.stroke="gray";t.lb=1;t.interval=10;n.md.add(t);t=new w;t.Eb="LineV";t.stroke="lightgray";t.lb=.5;t.interval=1;n.md.add(t);t=new w;t.Eb="LineV";t.stroke="gray";t.lb=.5;t.interval=5;n.md.add(t);t=new w;t.Eb="LineV";t.stroke="gray";t.lb=1;t.interval=10;n.md.add(t);t=new s;t.add(n.md);t.Ne="Grid";t.hx=!1;t.GA=!1;t.kf=!1;t.Jt="GRID";n.add(t);n.mb.remove(t);n.md.visible=!1}function tet(n){var t,r,i;if(n.vA.P())return t=n.vA.copy(),t.ow(n.padding),t;for(var u=!0,o=n.Wb.n,s=o.length,f=0;f<s;f++)if(r=o[f],r.visible&&(!r.Dc||r.HA))for(var r=r.mb.n,h=r.length,e=0;e<h;e++)i=r[e],i.hx&&i.Wa()&&(i=i.pa,i.P()&&(u?(u=!1,t=i.copy()):t.yj(i)));return u&&(t=new p(0,0,0,0)),t.ow(n.padding),t}function cs(n,t){var i,f;if(!n.mc.Eg&&(void 0===t&&(t=!1),(t||n.rf)&&!n.cc&&n.Lc.P()&&null!==n.Za)){n.cc=!0;i=n.Sl;t&&n.Uk!==we&&(i=n.Uk);var r=i!==we?yp(n,i):n.scale,i=n.Ab.copy(),o=n.Jb/r,s=n.Ib/r,u=null,e=n.mc;e.zd&&(u=n.Pa.copy());n.position.Ra();f=n.Rn;t&&n.qo.Cd()&&(f=n.qo);iet(n,n.Pa,n.Lc,o,s,f);n.position.freeze();null!==u&&yft(e,u,n.Pa);n.scale=r;n.cc=!1;r=n.Ab;r.yf(i)||n.Ut(i,r)}}function yp(n,t){var r,u;if(null!==n.Za){if(n.Ji&&vc(n,n.vf()),r=n.Ye.mt,u=n.Lc,!u.P())return r;var i=u.width,u=u.height,f=n.Jb,e=n.Ib,o=f/i,s=e/u;return t===pl?(i=Math.min(s,o),i>r&&(i=r),i<n.Jg&&(i=n.Jg),i>n.Hg&&(i=n.Hg),i):t===dp?(i=s>o?(e-n.sf)/u:(f-n.sf)/i,i>r&&(i=r),i<n.Jg&&(i=n.Jg),i>n.Hg&&(i=n.Hg),i):n.scale}}function iet(n,t,i,r,u,f){var e,o;e=t.x;o=t.y;f.Cd()&&(r>i.width&&(e=i.x+(f.x*i.width+f.offsetX)-(f.x*r-f.offsetX)),u>i.height&&(o=i.y+(f.y*i.height+f.offsetY)-(f.y*u-f.offsetY)));r<i.width?(e=Math.min(e+r/2,i.right-r/2),e=Math.max(e,i.left+r/2),e-=r/2):e>i.left?e=i.left:e<i.right-r&&(e=i.right-r);u<i.height?(r=Math.min(o+u/2,i.bottom-u/2),r=Math.max(r,i.top+u/2),o=r-u/2):o>i.top?o=i.top:o<i.bottom-u&&(o=i.bottom-u);t.x=isFinite(e)?e:-n.padding.left;t.y=isFinite(o)?o:-n.padding.top}function pp(n,t,i,r){void 0===i&&(i=null);void 0===r&&(r=null);var u=n.Wb.nn;for(wu(n);u.next();)if(n=u.value,n.visible&&!n.Dc&&(n=n.de(t,i,r),null!==n))return n;return null}function hv(n){-1!==n.cw&&(clearTimeout(n.cw),n.cw=-1)}function hat(n,t){var i=t.copy();n.cw=setTimeout(function(){i.button=2;n.T=i;n.Jz=!0;n.doMouseUp()},850)}function lc(n,i,r,u,f){u.h=i;f?wp(n,r,u):(u.Wd=i.dc.Wd,u.da=i.dc.da);n=0;r.ctrlKey&&(n+=1);r.altKey&&(n+=2);r.shiftKey&&(n+=4);r.metaKey&&(n+=8);u.dd=n;u.button=r.button;t.ln&&0===r.button&&r.ctrlKey&&(u.button=2);u.ok=!1;u.zj=!1;u.Ge=1;u.mk=0;u.Ke=!1;u.bubbles=!1;u.event=r;u.timestamp=Date.now();u.zh=r.target.W?r.target.W:null;u.ke=null}function gh(n,i,u){return i.bubbles?(r&&r.pF&&t.trace("NOT handled "+u.type+" "+i.toString()),!0):(r&&r.pF&&t.trace("handled "+u.type+" "+n.Ya.name+" "+i.toString()),void 0!==u.stopPropagation&&u.stopPropagation(),(void 0===u.touches||2>u.touches.length)&&u.preventDefault(),u.cancelBubble=!0,!1)}function wp(n,i,r){var u=n.Za,o=n.Jb,s=n.Ib,f=0,e=0;null!==u&&(u=u.getBoundingClientRect(),f=i.clientX-o/u.width*u.left,e=i.clientY-s/u.height*u.top);r.Wd.p(f,e);null!==n.Oc?(i=t.qc(f,e),n.Oc.mi(i),r.da.assign(i),t.B(i)):r.da.p(f,e)}function ret(n){for(n.Jd||wu(n),n.Ji&&vc(n,n.vf()),cs(n),n=n.xm.k;n.next();)ret(n.value)}function bp(n){var i;if(!n.Jd&&(n.Sf=!1,null!==n.Rb)){n.Jd=!0;var t=n.yi,r=!1,u=!1;t.Eg?(u=!0,r=n.ab,n.ab=!0):t.zd||dft(n);n.cc||t.Eg||!n.Jj||nc(n)||nc(n);null!==n.md&&(n.md.visible&&!n.Zu&&(ls(n),n.Zu=!0),!n.md.visible&&n.Zu&&(n.Zu=!1));fet(n);wu(n);i=!1;(!n.rf||n.Bu)&&(n.rf?yg(n,!n.Su):(n.yc("Initial Layout"),!1===t.isEnabled&&t.iq(),yg(n,!1)),i=!0);n.Su=!1;wu(n);n.Oo||t.Eg||ret(n);i&&(n.rf||(cat(n),ls(n)),n.Ga("LayoutCompleted"));wu(n);n.cc||t.Eg||!n.Jj||nc(n)||(nc(n),wu(n));i&&!n.rf&&(n.rf=!0,n.Ie("Initial Layout"),n.ab||n.ma.clear(),setTimeout(function(){n.rh=!1},1));n.$e();u&&(n.ab=r);n.Jd=!1}}function cat(n){var i;if(n.Uk!==we?n.scale=yp(n,n.Uk):n.Sl!==we?n.scale=yp(n,n.Sl):(i=n.wF,isFinite(i)&&0<i&&(n.scale=i)),n.Ji&&vc(n,n.vf()),i=n.vF,i.P())n.position=i;else{i=t.N();i.eu(n.Lc,n.uF);var r=n.Ab,r=t.wk(0,0,r.width,r.height),u=t.N();u.eu(r,n.xF);n.position=new h(i.x-u.x,i.y-u.y);t.oc(r);t.B(u);t.B(i);cs(n,!0)}n.Ga("InitialLayoutCompleted")}function wu(n){var e,i,t,u,r;if((n.Jd||!n.mc.Eg)&&0!==n.lg.count)for(e=0;23>e;e++){if(i=n.lg.k,null===i||0===n.lg.count)break;for(n.lg=new it(f),t=n,u=n.lg,i.reset();i.next();)r=i.value,!r.Rd()||r instanceof g||(r.Bl()?(bi(r,Infinity,Infinity),r.Pc()):u.add(r));for(i.reset();i.next();)r=i.value,r instanceof g&&ig(t,r);for(i.reset();i.next();)t=i.value,t instanceof c&&(t.Bl()?(bi(t,Infinity,Infinity),t.Pc(),t.sx()):u.add(t));for(i.reset();i.next();)t=i.value,t instanceof fi&&(t.Bl()?(bi(t,Infinity,Infinity),t.Pc()):u.add(t))}}function ig(n,i){for(var r,e,u=i.Vc,f=t.Hb();u.next();)r=u.value,r.Wa()&&(r instanceof g?(pc(r)||he(r)||gc(r))&&ig(n,r):r instanceof c?f.push(r):(bi(r,Infinity,Infinity),r.Pc()));for(u=f.length,r=0;r<u;r++)e=f[r],bi(e,Infinity,Infinity),e.Pc();t.Ca(f);bi(i,Infinity,Infinity);i.Pc()}function lat(n,i,u,f,e){var s,o,c;if(null===n.Rb&&t.m("No div specified"),s=n.Za,null===s&&t.m("No canvas specified"),o=n.of,n.Be){c=n.sg;t.kn?(s.width=s.width,ef(n,o)):(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,n.Jb*c,n.Ib*c));o.mH=!1;o.tF=!1;o.drawImage(n.Xy,0<f?0:Math.round(-f),0<e?0:Math.round(-e));e=n.Pa;var s=n.fc,h=Math.round(e.x*s)/s,l=Math.round(e.y*s)/s;for(f=n.Oc,f.reset(),1!==s&&f.scale(s),0===e.x&&0===e.y||f.translate(-h,-l),o.save(),o.beginPath(),e=u.length,s=0;s<e;s++)h=u[s],0!==h[2]&&0!==h[3]&&o.rect(Math.floor(h[0]),Math.floor(h[1]),Math.ceil(h[2]),Math.ceil(h[3]));for(o.clip(),o.setTransform(1,0,0,1,0,0),o.scale(c,c),o.transform(f.m11,f.m12,f.m21,f.m22,f.dx,f.dy),r&&r.gj&&r.WE(n,o),u=n.Wb.n,e=u.length,n.bg(u,e,n),rg(n,o),s=0;s<e;s++)pft(u[s],o,n,i);o.restore();ef(n);r&&(r.rA||r.gj)&&r.qA(o,n,f);n.Tk?n.Tk.Ql(n)&&n.vy():n.dm=function(){};n.Vk=!1;n.Be=!1;n.bK()}}function uet(n,i,r,u,f,e,o,s,h,l){var v,a,y,w,b,k,d;if(null===n.Rb&&t.m("No div specified"),null===n.Za&&t.m("No canvas specified"),ef(n),uh(n),v=void 0,e&&u&&f&&(v=new p(e.x,e.y,u.width/f,u.height/f)),a=v.copy(),a.ow(r),ls(n,a),wu(n),a=n.Wb.n,y=a.length,n.bg(a,y,n,v),w=n.sg,i.setTransform(1,0,0,1,0,0),i.scale(w,w),i.clearRect(0,0,u.width,u.height),s&&(i.fillStyle=s,i.fillRect(0,0,u.width,u.height)),u=t.Ah(),u.reset(),u.translate(r.left,r.top),u.scale(f),0===e.x&&0===e.y||u.translate(-e.x,-e.y),i.setTransform(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),t.bf(u),rg(n,i),o){for(b=new it,r=o.k,r.reset();r.next();)f=r.value.U,!1===l&&"Grid"===f.layer.name||null===f||b.add(f);r=function(t){var u=h,r,e;if(t.visible&&(void 0===u&&(u=!0),u||!t.Dc)){i.globalAlpha=t.Qf;u=t.mb;t=t.Lv;t.length=0;for(var o=n.scale,s=u.length,f=0;f<s;f++)if(r=u.n[f],ns(r)&&b.contains(r)){if(r instanceof c&&(r.pc&&t.push(r),!1===r.xg))continue;e=r.pa;1<e.width*o||1<e.height*o?r.$e(i,n):ny(r,i)}i.globalAlpha=1}}}else!h&&l?(k=n.xp.U,d=k.layer,r=function(t){t===d?k.$e(i,n):t.$e(i,n,v,h,l)}):r=function(t){t.$e(i,n,v,h,l)};for(f=0;f<y;f++)r(a[f]);n.Tk?n.Tk.Ql(n)&&n.vy():n.dm=function(){};ef(n);uh(n);n.bg(a,y,n);ls(n)}function rg(n,t){var i=n.el,r;null!==i&&(void 0!==i.imageSmoothingEnabled&&(r=!!i.imageSmoothingEnabled,t.tF=r,t.mH=r,t.SK=r),i=i.defaultFont,void 0!==i&&null!==i&&(t.font=i,t.su=i))}function fet(n){var t,i,r;if(0===n.ma.Qe&&0<n.co.count){for(t=n.co.k;t.next();)i=t.key,r=t.value,i.df(),gw(i,r);n.co.clear()}}function ug(n,t,i,r,u){var f,s,h;t=Math.floor(t);i=Math.floor(i);r=Math.ceil(r);u=Math.ceil(u);for(var o=n.Hj,s=o.length,e=0;e<s;e++){if(f=o[e],t>=f[0]&&i>=f[1]&&t+r<=f[0]+f[2]&&i+u<=f[1]+f[3])return!1;t<=f[0]&&i<=f[1]&&t+r>=f[0]+f[2]&&i+u>=f[1]+f[3]?(o[e][2]=0,o[e][3]=0):t>=f[0]&&t<f[0]+f[2]&&i>=f[1]&&i+u<=f[1]+f[3]?(r=t+r-(f[0]+f[2]),t=f[0]+f[2],e=-1):t+r>f[0]&&t+r<=f[0]+f[2]&&i>=f[1]&&i+u<=f[1]+f[3]?(r=f[0]-t,e=-1):t>=f[0]&&t+r<=f[0]+f[2]&&i>=f[1]&&i<f[1]+f[3]?(u=i+u-(f[1]+f[3]),i=f[1]+f[3],e=-1):t>=f[0]&&t+r<=f[0]+f[2]&&i+u>f[1]&&i+u<=f[1]+f[3]?(u=f[1]-i,e=-1):o[e][0]>=t&&o[e][0]<t+r&&o[e][1]>=i&&o[e][1]+o[e][3]<=i+u?(o[e][2]-=t+r-o[e][0],o[e][0]=t+r,e=-1):o[e][0]+o[e][2]>t&&o[e][0]+o[e][2]<=t+r&&o[e][1]>=i&&o[e][1]+o[e][3]<=i+u?(o[e][2]=t-o[e][0],e=-1):o[e][0]>=t&&o[e][0]+o[e][2]<=t+r&&o[e][1]>=i&&o[e][1]<i+u?(o[e][3]-=i+u-o[e][1],o[e][1]=i+u,e=-1):o[e][0]>=t&&o[e][0]+o[e][2]<=t+r&&o[e][1]+o[e][3]>i&&o[e][1]+o[e][3]<=i+u&&(o[e][3]=i-o[e][1],e=-1)}for(e=0;e<s;e++)if(f=o[e],0<r&&0<u&&0<f[2]&&0<f[3]&&(Math.max(t+r,f[0]+f[2])-Math.min(t,f[0]))*(Math.max(i+u,f[1]+f[3])-Math.min(i,f[1]))<r*u+f[2]*f[3]+50)return s=Math.min(f[0],t),h=Math.min(f[1],i),t=Math.max(t+r,f[0]+f[2])-Math.min(f[0],t),i=Math.max(i+u,f[1]+f[3])-Math.min(f[1],i),o[e][2]=0,o[e][3]=0,ug(n,s,h,t,i);return o.push([t,i,r,u]),!0}function eet(n,i,r){var v,c,o;if(!0!==n.Be){if(n.Be=!0,n instanceof bu)wat(n);else if(!0===n.Qz&&r.width===i.width&&r.height===i.height){var l=n.scale,y=t.Jf(),s=Math.max(i.x,r.x),h=Math.max(i.y,r.y),e=Math.min(i.x+i.width,r.x+r.width),a=Math.min(i.y+i.height,r.y+r.height);if(y.x=s,y.y=h,y.width=Math.max(0,e-s)*l,y.height=Math.max(0,a-h)*l,0<y.width&&0<y.height){if(!n.Jd&&(n.Sf=!1,null!==n.Rb)&&(n.Jd=!0,fet(n),wu(n),n.Lc.P()||vc(n,n.vf()),v=n.Za,null!==v)){e=n.sg;s=n.Jb*e;h=n.Ib*e;a=n.scale*e;l=Math.round(Math.round(r.x*a)-Math.round(i.x*a));i=Math.round(Math.round(r.y*a)-Math.round(i.y*a));r=n.Xy;c=n.CC;r.width=s;r.height=h;r=190*n.sg;var a=70*n.sg,f=Math.max(l,0),b=Math.max(i,0),w=s-f,u=h-b;c.mH=!1;c.tF=!1;c.drawImage(v,f,b,w,u,0,0,w,u);n.Tk.Ql(n)&&c.clearRect(0,0,r,a);var v=t.Hb(),c=t.Hb(),u=Math.abs(l),w=Math.abs(i),p=0===f?0:s-u,f=t.qc(p,0),u=t.qc(u+p,h);c.push([Math.min(f.x,u.x),Math.min(f.y,u.y),Math.abs(f.x-u.x),Math.abs(f.y-u.y)]);o=n.Oc;o.reset();o.scale(e,e);1!==n.fc&&o.scale(n.fc);e=n.Pa;(0!==e.x||0!==e.y)&&isFinite(e.x)&&isFinite(e.y)&&o.translate(-e.x,-e.y);uu(f,o);uu(u,o);v.push([Math.min(f.x,u.x),Math.min(f.y,u.y),Math.abs(f.x-u.x),Math.abs(f.y-u.y)]);p=0===b?0:h-w;f.p(0,p);u.p(s,w+p);c.push([Math.min(f.x,u.x),Math.min(f.y,u.y),Math.abs(f.x-u.x),Math.abs(f.y-u.y)]);uu(f,o);uu(u,o);v.push([Math.min(f.x,u.x),Math.min(f.y,u.y),Math.abs(f.x-u.x),Math.abs(f.y-u.y)]);n.Tk.Ql(n)&&(s=0<l?0:-l,h=0<i?0:-i,f.p(s,h),u.p(r+s,a+h),c.push([Math.min(f.x,u.x),Math.min(f.y,u.y),Math.abs(f.x-u.x),Math.abs(f.y-u.y)]),uu(f,o),uu(u,o),v.push([Math.min(f.x,u.x),Math.min(f.y,u.y),Math.abs(f.x-u.x),Math.abs(f.y-u.y)]));t.B(f);t.B(u);!n.cc&&n.Jj&&(nc(n)||nc(n));lat(n,v,c,l,i);t.Ca(v);t.Ca(c);n.Jd=!1}}else n.ie();t.oc(y)}else n.Ig();for(n=n.xm.k;n.next();)eet(n.value)}}function ac(n){!1===n.Jj&&(n.Jj=!0)}function uh(n){!1===n.Vk&&(n.Vk=!0)}function kp(n,t,i){var r=n.Za,u=n.sg,f=t*u,u=i*u;(r.width!==f||r.height!==u)&&(r.width=f,r.height=u,r.style.width=t+"px",r.style.height=i+"px",n.Be=!0)}function nc(n){if(null!==n.Za&&!n.mc.zd){var i=n.Rb,h=n.Jb,c=n.Ib,nt=n.$D.copy(),e=!1,o=n.fm?n.sf:0,s=n.em?n.sf:0,f=i.clientWidth||h+o,i=i.clientHeight||c+s;if((f!==h+o||i!==c+s)&&(n.fm=!1,n.em=!1,n.Jb=f,n.Ib=i,kp(n,f,i),e=!0),n.Jj=!1,n.Sv)h===n.Jb&&c===n.Ib||n.Ig();else{var t=n.Ab,r=n.Lc,o=r.width,s=r.height,v=t.width,y=t.height,l=r.x,p=t.x,w=r.right,b=t.right,a=r.y,k=t.y,d=r.bottom,g=t.bottom,r=t="1px",u=n.scale;return f/u>o&&i/u>s||(n.qF&&n.tf&&(v+1<o?(t=(o-v)*u+n.Jb+"px",n.Zj.scrollLeft=(n.position.x-l)*u):l+1<p?(t=(p-l)*u+n.Jb+"px",n.Zj.scrollLeft=n.Zj.scrollWidth-n.Zj.clientWidth):w>b+1&&(t=(w-b)*u+n.Jb+"px",n.Zj.scrollLeft=n.position.x*u)),n.rF&&n.uf&&(y+1<s?(r=(s-y)*u+n.Ib+"px",n.$j.scrollTop=(n.position.y-a)*u):a+1<k?(r=(k-a)*u+n.Ib+"px",n.$j.scrollTop=n.$j.scrollHeight-n.$j.clientHeight):d>g+1&&(r=(d-g)*u+n.Ib+"px",n.$j.scrollTop=n.position.y*u))),f="1px"!==t,i="1px"!==r,f!==n.em&&(n.Ib="1px"===t?n.Ib+n.sf:Math.max(n.Ib-n.sf,1),e=!0),n.em=f,n.Ez.style.width=t,i!==n.fm&&(n.Jb="1px"===r?n.Jb+n.sf:Math.max(n.Jb-n.sf,1),e=!0),n.fm=i,n.Fz.style.height=r,e&&(kp(n,n.Jb,n.Ib),ef(n)),f=n.Jb,i=n.Ib,n.$j.style.height=i+"px",n.$j.style.width=f+(n.fm?n.sf:0)+"px",n.Zj.style.width=f+"px",n.Zj.style.height=i+(n.em?n.sf:0)+"px",n.Dz=!1,h!==f||c!==i?(t=n.Ab,n.Ut(nt,t,e?!0:void 0),!1):!0}}}function fg(n,r,u){if(t.l(r,et,i,"addLayer:layer"),null!==r.h&&r.h!==n&&t.m("Cannot share a Layer with another Diagram: "+r+" of "+r.h),null===u?null!==r.h&&t.m("Cannot add an existing Layer to this Diagram again: "+r):(t.l(u,et,i,"addLayer:existingLayer"),u.h!==n&&t.m("Existing Layer must be in this Diagram: "+u+" not in "+u.h),r===u&&t.m("Cannot move a Layer before or after itself: "+r)),r.h!==n){r=r.name;n=n.Wb;u=n.count;for(var f=0;f<u;f++)n.wa(f).name===r&&t.m("Cannot add Layer with the name '"+r+"'; a Layer with the same name is already present in this Diagram.")}}function ls(n,i){var o=n.md,c,l;if(null!==o&&o.visible){for(var s=t.Ml(),f=1,r=1,e=o.va.length,h=0;h<e;h++)c=o.va.n[h],l=c.interval,2>l||(un(c.Eb)?r=r*l/u.hF(r,l):f=f*l/u.hF(f,l));if(e=o.vt,s.p(r*e.width,f*e.height),i)h=i.width,c=i.height,r=i.x,e=i.y;else{for(f=t.Jf(),r=n.Ab,f.p(r.x,r.y,r.width,r.height),e=n.xm.k;e.next();)r=e.value.Ab,r.P()&&tf(f,r.x,r.y,r.width,r.height);if(h=f.width,c=f.height,r=f.x,e=f.y,!f.P())return}o.width=h+2*s.width;o.height=c+2*s.height;f=t.N();u.rt(r,e,0,0,s.width,s.height,f);f.offset(-s.width,-s.height);t.qk(s);o.U.location=f;t.B(f)}}function cv(n){if(n=n.selection,0<n.count){for(var i=n.Pe(),r=i.length,t=0;t<r;t++)i[t].ib=!1;n.Ra();n.clear();n.freeze()}}function oet(n,t){var r=n.Oc,f=t[0],e=t[1],o=f+t[2],u=e+t[3],s=r.m11,i=r.m12,l=r.m21,a=r.m22,v=r.dx,y=r.dy,h=f*s+e*l+v,c=f*i+e*a+y,r=o*s+e*l+v,e=o*i+e*a+y,p=f*s+u*l+v,f=f*i+u*a+y,s=o*s+u*l+v,o=o*i+u*a+y,u=h,i=c,h=Math.min(h,r),u=Math.max(u,r),i=Math.min(i,e),c=Math.max(c,e),h=Math.min(h,p),u=Math.max(u,p),i=Math.min(i,f),c=Math.max(c,f),h=Math.min(h,s),u=Math.max(u,s),i=Math.min(i,o),c=Math.max(c,o);return[h,i,u-h,c-i]}function yet(n){var t=n.rh;n.aE!==t&&(n.aE=t,n.Ga("Modified"))}function aat(n,i){var s,f,a,r,u,d,w,et,ot,nt,tt,it,v,rt,o,y,c,l,p,ft,h,e;if(i.ea===n.ea)if(s=i.Bd,f=i.propertyName,s===ro&&"S"===f[0])if("StartingFirstTransaction"===f){for(s=n.Cb,f=s.jf.k;f.next();)f.value.Ed(n);for(f=s.Kg.k;f.next();)f.value.Ed(n);for(f=s.Lg.k;f.next();)f.value.Ed(n);n.Jd||n.rf||(n.Su=!0,n.jo&&(n.Sf=!0),n.yi.Gl())}else"StartingUndo"===f||"StartingRedo"===f?(a=n.mc,a.Eg&&!n.ab&&a.iq(),n.Ga("ChangingSelection")):"StartedTransaction"===f&&(a=n.mc,a.Eg&&!n.ab&&a.iq(),n.lv&&a.Gl());else if(n.Sa){n.Sa=!1;try{if(r=i.Ff,""!==r)if(s===di){if("linkFromKey"===r)e=i.object,u=n.Vf(e),null!==u&&(d=i.newValue,o=n.af(d),u.ca=o);else if("linkToKey"===r)e=i.object,u=n.Vf(e),null!==u&&(d=i.newValue,o=n.af(d),u.fa=o);else if("linkFromPortId"===r)(e=i.object,u=n.Vf(e),null!==u)&&(w=i.newValue,"string"==typeof w&&(u.Af=w));else if("linkToPortId"===r)e=i.object,u=n.Vf(e),null!==u&&(w=i.newValue,"string"==typeof w&&(u.dg=w));else if("nodeGroupKey"===r)e=i.object,p=n.qh(e),null!==p&&(et=i.newValue,void 0!==et?(ot=n.af(et),p.fb=ot instanceof g?ot:null):p.fb=null);else if("linkLabelKeys"===r){if(e=i.object,u=n.Vf(e),null!==u){if(nt=i.oldValue,tt=i.newValue,t.isArray(nt))for(it=t.ub(nt),v=0;v<it;v++)rt=t.rb(nt,v),o=n.af(rt),null!==o&&(o.Dd=null);if(t.isArray(tt))for(it=t.ub(tt),v=0;v<it;v++)rt=t.rb(tt,v),o=n.af(rt),null!==o&&(o.Dd=u)}}else if("nodeParentKey"===r){var st=i.object,ut=n.af(i.newValue),k=n.Sw(st);null!==k&&(y=k.tt(),null!==y?null===ut?n.remove(y):n.vd?y.ca=ut:y.fa=ut:hg(n,ut,k))}else if("parentLinkCategory"===r){var st=i.object,k=n.Sw(st),b=i.newValue;null!==k&&"string"==typeof b&&(y=k.tt(),null!==y&&(y.cd=b))}else if("nodeCategory"===r){var e=i.object,ht=n.qh(e),b=i.newValue;null!==ht&&"string"==typeof b&&(ht.cd=b)}else if("linkCategory"===r){var e=i.object,ct=n.Vf(e),b=i.newValue;null!==ct&&"string"==typeof b&&(ct.cd=b)}else"nodeDataArray"===r?(n.na(),c=i.oldValue,wl(n,c),l=i.newValue,sg(n,l)):"linkDataArray"===r&&(n.na(),c=i.oldValue,wl(n,c),l=i.newValue,cg(n,l));n.rh=!0}else s===vr?(l=i.newValue,"nodeDataArray"===r&&t.xb(l)?wet(n,l):"linkDataArray"===r&&t.xb(l)?lg(n,l):"linkLabelKeys"===r&&oe(l)&&(u=n.Vf(i.object),o=n.af(l),null!==u&&null!==o&&(o.Dd=u)),n.rh=!0):s===kr?(c=i.oldValue,"nodeDataArray"===r&&t.xb(c)?ag(n,c):"linkDataArray"===r&&t.xb(c)?ag(n,c):"linkLabelKeys"===r&&oe(c)&&(o=n.af(c),null!==o&&(o.Dd=null)),n.rh=!0):s===ro&&"SourceChanged"===r&&(p=n.qh(i.object),ft=i.propertyName,null!==p&&"string"==typeof ft&&(p.Vb(ft),n.ea instanceof ci&&(u=n.Vf(i.object),null!==u&&u.Vb(ft))));else s===di?(h=i.propertyName,e=i.object,e===n.ea?("nodeKeyProperty"===h||"nodeCategoryProperty"===h||"linkFromKeyProperty"===h||"linkToKeyProperty"===h||"linkFromPortIdProperty"===h||"linkToPortIdProperty"===h||"linkLabelKeysProperty"===h||"nodeIsGroupProperty"===h||"nodeGroupKeyProperty"===h||"nodeParentKeyProperty"===h||"linkCategoryProperty"===h)&&(n.ma.yb||n.zn()):pet(n,e,h),n.rh=!0):s===vr||s===kr?(vat(n,i),n.rh=!0):s===ro&&(("FinishedUndo"===f||"FinishedRedo"===f)&&(n.ma.Ki=!0,n.Ga("ChangedSelection"),wu(n),n.ma.Ki=!1),n.Su=!0,n.Ig(),a=n.yi,a.zd&&0===n.ma.Qe&&oat(a),"CommittedTransaction"===f&&n.ma.pz&&(n.ah=Math.min(n.ah,n.ma.pj-1)),yet(n),n.wz||"CommittedTransaction"!==f||(n.wz=!0,setTimeout(function(){n.Ya.standardMouseOver();n.wz=!1},10)))}finally{n.Sa=!0}}}function pet(n,i,r){var u=n.qh(i),o,e,f;if(null!==u&&"string"==typeof r)u.Vb(r),n.ea instanceof ci&&(i=n.Vf(i),null!==i&&i.Vb(r));else if("string"==typeof r){for(u=null,n=n.km.k;n.next();){for(o=n.value,e=0;e<o.length;e++)f=o[e],null!==f.mg&&(f=f.mg.Da(i),null!==f&&(null===u&&(u=t.Hb()),u.push(f)));if(null!==u)break}if(i=u,null!==i){for(u=0;u<i.length;u++)i[u].Vb(r);t.Ca(i)}}}function vat(n,t){var f=t.Bd===vr,r=f?t.Zf:t.ag,o=f?t.newValue:t.oldValue,e=n.km.Da(t.object),u,i;if(Array.isArray(e)&&"number"==typeof r)for(u=0;u<e.length;u++)i=e[u],i.type!==wc&&i.type!==bo||r++,f?tst(i,o,r):(i.cf(r),ist(i,r-1))}function eg(n,i){var r=i.Li,u;if(t.isArray(r))if(u=n.km.Da(r),null===u)n.km.add(r,[i]);else{for(r=0;r<u.length;r++)if(u[r]===i)return;u.push(i)}}function og(n,i){var f=i.Li,r,u;if(t.isArray(f)&&(r=n.km.Da(f),null!==r))for(u=0;u<r.length;u++)if(r[u]===i){r.splice(u,1);0===r.length&&n.km.remove(f);break}}function sg(n,i){var f;if(null!==i){for(var r=n.ea,e=t.ub(i),u=0;u<e;u++)f=t.rb(i,u),r.te(f)?wet(n,f,!1):r instanceof k&&lg(n,f);if(r instanceof k||r instanceof ci){for(u=0;u<e;u++)f=t.rb(i,u),r.te(f)&&bet(n,f);if(r instanceof k)for(r=n.links;r.next();)uy(r.value)}vg(n,!1)}}function wet(n,t,i){if(void 0!==t&&null!==t&&!n.ma.yb&&!n.Ei.contains(t)){void 0===i&&(i=!0);var u=n.getCategoryForNodeData(t),r=n.findTemplateForNodeData(t,u);r instanceof s&&(ce(r),r=r.copy(),r instanceof s&&(r.Eh=u,n.Ln&&(r.Xk="Tool"),n.add(r),r.data=t,i&&bet(n,t)))}}function bet(n,i){var r=n.ea,o,s,f,u,e,h;if((r instanceof k||r instanceof ci)&&(o=r.Lb(i),void 0!==o)){if(s=up(r,o),f=n.qh(i),null!==s&&null!==f){for(s=s.k;s.next();)if(u=s.value,r instanceof k){if(r.te(u))f instanceof g&&r.hn(u)===o&&(e=n.qh(u),null!==e&&(e.fb=f));else if(e=n.Vf(u),null!==e&&f instanceof y&&(r.vl(u)===o&&(e.ca=f),r.zl(u)===o&&(e.fa=f),u=r.xl(u),t.isArray(u)))for(h=0;h<t.ub(u);h++)if(t.rb(u,h)===o){f.Dd=e;break}}else r instanceof ci&&r.te(u)&&f instanceof y&&r.jn(u)===o&&(e=n.Sw(u),hg(n,f,e));pe(r,o)}r instanceof k?(r=r.hn(i),void 0!==r&&(r=n.af(r),r instanceof g&&(f.fb=r))):r instanceof ci&&(r=r.jn(i),void 0!==r&&f instanceof y&&(r=n.af(r),hg(n,r,f)))}}function hg(n,t,i){var e;if(null!==t&&null!==i){var r=n.Cb.QA,u=t,f=i;if(n.vd){for(t=f.Td;t.next();)if(e=t.value,e.fa===f)return}else for(u=i,f=t,t=u.Td;t.next();)if(e=t.value,e.ca===u)return;null!==r&&ev(r,u,f,null,!0)||(r=n.getCategoryForLinkData(i.data),t=n.findTemplateForLinkData(i.data,r),t instanceof c&&(ce(t),t=t.copy(),t instanceof c&&(t.Eh=r,t.ca=u,t.fa=f,n.add(t),t.data=i.data)))}}function cg(n,i){var u,r,f;if(null!==i){for(u=t.ub(i),r=0;r<u;r++)f=t.rb(i,r),lg(n,f);vg(n,!1)}}function lg(n,i){var u,f,r,o,e;if(void 0!==i&&null!==i&&!n.ma.yb&&!n.Nk.contains(i)&&(f=n.getCategoryForLinkData(i),u=n.findTemplateForLinkData(i,f),u instanceof c&&(ce(u),u=u.copy(),u instanceof c))){if(u.Eh=f,f=n.ea,r=f.fJ(i),""!==r&&(u.Af=r),r=f.vl(i),void 0!==r&&(r=n.af(r),r instanceof y&&(u.ca=r)),r=f.iJ(i),""!==r&&(u.dg=r),r=f.zl(i),void 0!==r&&(r=n.af(r),r instanceof y&&(u.fa=r)),f=f.xl(i),t.isArray(f))for(r=t.ub(f),o=0;o<r;o++)e=t.rb(f,o),e=n.af(e),null!==e&&(e.Dd=u);n.add(u);u.data=i}}function wl(n,i){for(var f,u=t.ub(i),r=0;r<u;r++)f=t.rb(i,r),ag(n,f)}function ag(n,t){var r,o,u,h,i,f,e;if(void 0!==t&&null!==t&&(r=n.qh(t),r instanceof s&&(r.ib=!1,r.Fg=!1,o=r.layer,null!==o&&o.h===n))){if(u=n.ea,u instanceof k&&r instanceof y){if(h=u.Lb(r.data),void 0!==h){for(i=r.Td;i.next();)f=i.value.data,se(u,h,f);if(r.ni&&(i=r.Dd,null!==i&&(f=i.data,se(u,h,f))),r instanceof g)for(i=r.Vc;i.next();)f=i.value.data,u.te(f)&&se(u,h,f)}}else if(u instanceof ci&&r instanceof y)for(i=n.Vf(r.data),null!==i&&(i.ib=!1,i.Fg=!1,f=i.layer,null!==f)&&(e=f.cf(-1,i,!1),0<=e&&n.ed(kr,"parts",f,i,null,e,null),e=i.Gp,null!==e&&e(i,f,null)),i=n.vd,f=r.Td;f.next();)e=f.value,e=(i?e.fa:e.ca).data,u.te(e)&&se(u,h,e);u=o.cf(-1,r,!1);0<=u&&n.ed(kr,"parts",o,r,null,u,null);u=r.Gp;null!==u&&u(r,o,null)}}function vc(n,t){n.Ji=!1;var i=n.Tu;i.O(t)||(t=t.ba(),n.Tu=t,n.Hj=null,cs(n),n.Ga("DocumentBoundsChanged",null,i.copy()),ac(n))}function vg(n,t){for(var i=n.gl.k;i.next();)ket(n,i.value,t);null!==n.ic&&(t?n.ic.ff=!1:n.ic.M())}function ket(n,t,i){if(null!==t){for(var r=t.um.k;r.next();)ket(n,r.value,i);null!==t.ic&&(i?t.ic.ff=!1:t.ic.M())}}function yg(n,t){var i,u,f,r;if(!n.Ty){i=n.ic;u=n.lv;n.lv=!0;f=n.Sa;n.Sa=!0;try{for(r=n.gl.k;r.next();)det(n,r.value,t);i.ff||t&&!i.NA||(i.doLayout(n),wu(n),i.ff=!0)}finally{n.Bu=!i.ff;n.lv=u;n.Sa=f}}}function det(n,t,i){if(null!==t){for(var r=t.um.k;r.next();)det(n,r.value,i);r=t.ic;null===r||r.ff||i&&!r.NA||(t.jD=!t.location.P(),r.doLayout(t),t.M(pn),r.ff=!0,ig(n,t))}}function yat(n){function t(n){var t=n.toLowerCase(),u=new b("function");i.add(n,u);i.add(t,u);r.add(n,n);r.add(t,n)}var i=new gt("string",b),r=new gt("string","string");t("AnimationStarting");t("AnimationFinished");t("BackgroundSingleClicked");t("BackgroundDoubleClicked");t("BackgroundContextClicked");t("ClipboardChanged");t("ClipboardPasted");t("DocumentBoundsChanged");t("ExternalObjectsDropped");t("InitialLayoutCompleted");t("LayoutCompleted");t("LinkDrawn");t("LinkRelinked");t("LinkReshaped");t("Modified");t("ObjectSingleClicked");t("ObjectDoubleClicked");t("ObjectContextClicked");t("PartCreated");t("PartResized");t("PartRotated");t("SelectionMoved");t("SelectionCopied");t("SelectionDeleting");t("SelectionDeleted");t("SelectionGrouped");t("SelectionUngrouped");t("ChangingSelection");t("ChangedSelection");t("SubGraphCollapsed");t("SubGraphExpanded");t("TextEdited");t("TreeCollapsed");t("TreeExpanded");t("ViewportBoundsChanged");n.Vy=i;n.Uy=r}function get(n,t){var i=n.Uy.Da(t);return null!==i?i:n.Uy.Da(t.toLowerCase())}function pg(n,i){var r=n.Vy.Da(i);return null!==r?r:(r=n.Vy.Da(i.toLowerCase()),null!==r)?r:(t.m("Unknown DiagramEvent name: "+i),null)}function pat(n,t){var i=!1,r;if(n.Ab.kk(t)&&(i=!0),i=n.tA(t,function(n){return n.U},function(n){return n instanceof c},!0,function(n){return n instanceof c},i),0!==i.count)for(i=i.k;i.next();)r=i.value,r.qj&&r.hc()}function wg(n,i,r){var u,f,e;if(null===n.$d&&(n.$d=new ps),r=null!==r?r.fb:null,n.$d.Ap||n.$d.group!==r){if(null===r)for(i=n.Ji?tet(n):n.Lc.copy(),i.Wf(100,100),n.$d.initialize(i),i=t.Jf(),u=n.vh;u.next();)f=u.value,e=f.layer,null!==e&&e.visible&&!e.Dc&&bg(n,f,null,i);else for(r.pa.P()||r.xf(),i=r.pa.copy(),i.Wf(20,20),n.$d.initialize(i),i=t.Jf(),u=r.Vc;u.next();)f=u.value,f instanceof y&&bg(n,f,null,i);t.oc(i);n.$d.group=r;n.$d.Ap=!1}else i&&rb(n.$d);return n.$d}function bg(n,t,i,r){var u;if(t!==i)if(t.Wa()&&t.canAvoid()){i=t.getAvoidableRect(r);r=n.$d.Vm;t=n.$d.Um;for(var f=i.x+i.width,e=i.y+i.height,o=i.x;o<f;o+=r){for(u=i.y;u<e;u+=t)ib(n.$d,o,u);ib(n.$d,o,e)}for(u=i.y;u<e;u+=t)ib(n.$d,f,u);ib(n.$d,f,e)}else if(t instanceof g)for(t=t.Vc;t.next();)f=t.value,f instanceof y&&bg(n,f,i,r)}function kg(n,t){null===n.$d||n.$d.Ap||null!==t&&!t.canAvoid()||(n.$d.Ap=!0)}function not(n,t){n.Cu.assign(t);iot(n,n.Cu).yf(n.position)?fh(n):tot(n)}function tot(n){null===n.Tl&&(n.Tl={},n.Tl.id=setInterval(function(){if(null!==n.Tl){fh(n);var t=iot(n,n.Cu);t.yf(n.position)||(n.position=t,n.T.da=n.$G(n.Cu),n.zB(n.T.event,null,n.T.event.target.W)||n.doMouseMove(),n.Ji=!0,vc(n,n.vf()),n.Be=!0,n.Ig(),tot(n))}},n.yH))}function fh(n){null!==n.Tl&&(clearInterval(n.Tl.id),n.Tl=null)}function iot(n,i){var s=n.position,e=n.nE,f;if(0>=e.top&&0>=e.left&&0>=e.right&&0>=e.bottom)return s;var r=n.Ab,c=n.scale,r=t.wk(0,0,r.width*c,r.height*c),o=t.qc(0,0);return i.x>=r.x&&i.x<r.x+e.left?(f=Math.max(n.cq,1),f=f|0,o.x-=f,i.x<r.x+e.left/2&&(o.x-=f),i.x<r.x+e.left/4&&(o.x-=4*f)):i.x<=r.x+r.width&&i.x>r.x+r.width-e.right&&(f=Math.max(n.cq,1),f|=0,o.x+=f,i.x>r.x+r.width-e.right/2&&(o.x+=f),i.x>r.x+r.width-e.right/4&&(o.x+=4*f)),i.y>=r.y&&i.y<r.y+e.top?(f=Math.max(n.dq,1),f|=0,o.y-=f,i.y<r.y+e.top/2&&(o.y-=f),i.y<r.y+e.top/4&&(o.y-=4*f)):i.y<=r.y+r.height&&i.y>r.y+r.height-e.bottom&&(f=Math.max(n.dq,1),f|=0,o.y+=f,i.y>r.y+r.height-e.bottom/2&&(o.y+=f),i.y>r.y+r.height-e.bottom/4&&(o.y+=4*f)),o.yf(u.Aj)||(s=new h(s.x+o.x/c,s.y+o.y/c)),t.oc(r),t.B(o),s}function rot(n,i){var c,v,r,d,y,a,b,o,l;if(n.Ig(),null===n.Za)return null;"object"!=typeof i&&t.m("properties argument must be an Object.");var rt=!1,u=i.size||null,e=i.scale||null;void 0!==i.scale&&isNaN(i.scale)&&(e="NaN");c=i.maxSize;void 0===i.maxSize&&(rt=!0,c="svg"===i.context?new st(Infinity,Infinity):new st(2e3,2e3));var a=i.position||null,b=i.parts||null,f=void 0===i.padding?1:i.padding,ut=i.background||null,k=i.omitTemporary;void 0===k&&(k=!0);var it=i.document||document,ft=i.elementFinished||null,nt=i.showTemporary;void 0===nt&&(nt=!k);k=i.showGrid;void 0===k&&(k=nt);null!==u&&isNaN(u.width)&&isNaN(u.height)&&(u=null);f&&"number"==typeof f&&(f=new ni(f));f||(f=new ni(0));f.left=Math.max(f.left,0);f.right=Math.max(f.right,0);f.top=Math.max(f.top,0);f.bottom=Math.max(f.bottom,0);n.eo=!1;ef(n);var w=it.createElement("canvas"),g=w.getContext("2d"),tt=w;if(!(u||e||b||a))return w.width=n.Jb+Math.ceil(f.left+f.right),w.height=n.Ib+Math.ceil(f.top+f.bottom),"svg"===i.context&&(g=tt=new el(w,it,ft),g instanceof el&&(n.eo=!0)),uet(n,g,f,new st(w.width,w.height),n.fc,n.Pa,b,ut,nt,k),n.eo=!0,tt;if(v=n.Ye.mt,d=new h(0,0),r=n.Lc.copy(),r.tK(n.padding),null!==a&&a.P()?(d=a,e||(e=v)):(d.x=r.x,d.y=r.y),b){for(a=!0,b=b.k,b.reset();b.next();)o=b.value,o instanceof s&&(l=o.layer,l&&!l.visible||l&&l.Dc||!o.Wa()||(o=o.pa,o.P()&&(a?(a=!1,y=o.copy()):y.yj(o))));a&&(y=new p(0,0,0,0));r.width=y.width;r.height=y.height;d.x=y.x;d.y=y.y}return a=y=0,f&&(y=f.left+f.right,a=f.top+f.bottom),o=l=0,u&&(l=u.width,o=u.height,isFinite(l)&&(l=Math.max(0,l-y)),isFinite(o)&&(o=Math.max(0,o-a))),u&&e?("NaN"===e&&(e=v),u.P()?(u=l,r=o):isNaN(o)?(u=l,r=r.height*e):(u=r.width*e,r=o)):u?u.P()?(e=Math.min(l/r.width,o/r.height),u=l,r=o):isNaN(o)?(e=l/r.width,u=l,r=r.height*e):(e=o/r.height,u=r.width*e,r=o):e?"NaN"===e&&c.P()?(e=Math.min((c.width-y)/r.width,(c.height-a)/r.height),e>v?(e=v,u=r.width,r=r.height):(u=c.width,r=c.height)):(u=r.width*e,r=r.height*e):(e=v,u=r.width,r=r.height),f?(u+=y,r+=a):f=new ni(0),c&&(v=c.width,c=c.height,"svg"!==i.context&&rt&&!t.hH&&(u>v||r>c)&&(t.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(u)+"x"+Math.ceil(r)+" vs 2000x2000) Consider increasing the max size."),t.hH=!0),isNaN(v)&&(v=2e3),isNaN(c)&&(c=2e3),isFinite(v)&&(u=Math.min(u,v)),isFinite(c)&&(r=Math.min(r,c))),w.width=Math.ceil(u),w.height=Math.ceil(r),"svg"===i.context&&(g=tt=new el(w,it,ft),g instanceof el&&(n.eo=!0)),uet(n,g,f,new st(Math.ceil(u),Math.ceil(r)),e,d,b,ut,nt,k),n.eo=!0,tt}function uot(n){1<arguments.length&&t.m("Palette constructor can only take one optional argument, the DIV HTML element or its id.");i.call(this,n);this.at=!0;this.fk=!1;this.hb=!0;this.Cw=np;this.ic=new ui}function bu(n){var r,u,f;1<arguments.length&&t.m("Overview constructor can only take one optional argument, the DIV HTML element or its id.");i.call(this,n);this.yi.isEnabled=!1;this.cc=!0;this.Si=null;this.EH=this.Vu=!0;this.lK("drawShadows",!1);r=new s;u=new w;u.stroke="magenta";u.lb=2;u.fill="transparent";u.name="BOXSHAPE";r.du="BOXSHAPE";r.Jt="BOXSHAPE";r.cursor="move";r.add(u);this.Vl=r;this.Lz=document.createElement("canvas");this.MH=this.Lz.getContext("2d");r=new bl;r.Ed(this);this.Cb.jf.Pd(0,r);f=this;this.fG=function(){lv(f)};this.eG=function(){null!==f.Si&&(f.Sc(),f.na())};this.hb=!0;this.Ve=!1;this.Tm=pl;this.Cb.un=yl;this.cc=!1}function wat(n){n.cc||n.Jd||!1!==n.Sf||(n.Sf=!0,requestAnimationFrame(function(){var r,i,u;if(n.Sf&&!n.Jd&&(n.Sf=!1,null!==n.Rb)){if(n.Jd=!0,wu(n),n.Lc.P()||vc(n,n.vf()),null===n.Rb&&t.m("No div specified"),null===n.Za&&t.m("No canvas specified"),n.Be&&(r=n.Si,null!==r&&!r.mc.Eg&&!r.mc.zd)){for(r=n.of,i=n.Lz,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,n.Za.width,n.Za.height),r.drawImage(i,0,0),i=n.Oc,i.reset(),1!==n.fc&&i.scale(n.scale),0===n.position.x&&0===n.position.y||i.translate(-n.Pa.x,-n.Pa.y),r.setTransform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),i=n.Wb.length,u=0;u<i;u++)n.Wb.n[u].$e(r,n);n.Vk=!1;n.Be=!1}n.Jd=!1}}))}function lv(n){var r=n.Bg,i;if(null!==r&&(i=n.Si,null!==i)){n.Be=!0;var i=i.Ab,u=r.An,f=t.Ml();f.p(i.width,i.height);u.Ea=f;t.qk(f);n=2/n.scale;u instanceof w&&(u.lb=n);r.location=new h(i.x-n/2,i.y-n/2)}}function bl(){wt.call(this);this.name="MoveBox"}function ht(n){1<arguments.length&&t.m("Brush constructor can take at most one optional argument, the Brush type.");t.Fc(this);this.tb=!1;void 0===n?(this.ga=yc,this.Qn="black"):"string"==typeof n?(this.ga=yc,r&&t.fp("Brush constructor",n),this.Qn=n):(r&&t.Fa(n,ht,ht,"constructor:type"),this.ga=n,this.Qn="black");var i=this.ga;i===fo?(this.Po=np,this.ho=tv):this.ho=this.Po=i===ku?si:pi;this.aw=0;this.Wu=NaN;this.Zg=this.Nv=this.Yg=null;this.Fy=this.Gy=0}function f(){t.Fc(this);this.oa=30723;this.Qf=1;this.Ui=null;this.ec="";this.zc=this.Qb=null;this.Pa=new h(NaN,NaN).freeze();this.pf=new st(NaN,NaN).freeze();this.Tj=u.uq;this.Sj=u.wH;this.Oc=new hi;this.Ch=new hi;this.Zk=new hi;this.fc=1;this.Nn=0;this.$h=be;this.Gr=u.tq;this.$c=new p(NaN,NaN,NaN,NaN).freeze();this.Pb=new p(NaN,NaN,NaN,NaN).freeze();this.nd=new p(0,0,NaN,NaN).freeze();this.Ns=this.ar=this.R=this.bs=this.cs=null;this.Os=this.br=Infinity;this.Aq=this.Ae=pr;this.os=0;this.Yj=1;this.Hq=0;this.Fj=1;this.ss=-Infinity;this.rs=0;this.ts=u.Aj;this.us=io;this.Oq="";this.zm=this.Bi=this.Xl=this.Nc=this.S=null}function sf(n){n.S={Ai:null,Gi:null,Ci:null,Sr:null,Tr:null,Qi:null,Pi:null,Oi:null,Qr:null,Rr:null,Ni:null,wq:null,xq:null,yq:null,vq:null,$i:null,Di:null}}function kl(n,t,i,r,u,f,e){var o=.001,l=f.length,h;n.moveTo(t,i);r-=t;o=u-i;0===r&&(r=.001);u=o/r;for(var c=Math.sqrt(r*r+o*o),a=0,s=!0,v=0===e?!1:!0;.1<=c;){if(v){for(o=f[a++%l],o-=e;0>o;)o+=f[a++%l],s=!s;v=!1}else o=f[a++%l];o>c&&(o=c);h=Math.sqrt(o*o/(1+u*u));0>r&&(h=-h);t+=h;i+=u*h;s?n.lineTo(t,i):n.moveTo(t,i);c-=o;s=!s}}function yv(n,t,i){var e=n.qp(),s,o,u,r,f;if(null!==e)for(s=n.Nc.k;s.next();){if(o=s.value,u=o.iu,null!==u){if(r=e.ue(u),null===r)continue;o.MB(n,r,i,null)}else{if(r=e.data,null===r)continue;f=t.h;null!==f&&f.hu||o.MB(n,r,i,f)}null!==u&&(r=e,""!==u&&(r=e.ue(u)),null!==r&&(u=o.Fn,f=e,""!==u&&(f=e.ue(u)),null!==f&&o.eH(f,r,i)))}}function eh(n,t,i,r,u){var f=n.$c,e=n.Zk;e.reset();hot(n,e,t,i,r,u);n.Zk=e;f.x=t;f.y=i;f.width=r;f.height=u;e.Et()||e.ZG(f)}function eot(n,t,i,r){return!1===n.kf?!1:(r.multiply(n.transform),i?n.Xf(t,r):n.Ym(t,r))}function bi(n,i,r,u,f){var e,s,o,h;if(!1!==pc(n)){e=n.margin;s=e.top+e.bottom;i=Math.max(i-(e.right+e.left),0);r=Math.max(r-s,0);e=n.angle;(90===e||270===e)&&(e=i,i=r,r=e,e=u,u=f,f=e);e=n.Ea;s=0;n.lb&&(s=n.lb);i=isFinite(e.width)?e.width+s:i;r=isFinite(e.height)?e.height+s:r;var e=u||0,s=f||0,o=n instanceof a;switch(to(n)){case yr:s=e=0;o&&(r=i=Infinity);break;case cr:isFinite(i)&&i>u&&(e=i);isFinite(r)&&r>f&&(s=r);break;case du:isFinite(i)&&i>u&&(e=i);s=0;o&&(r=Infinity);break;case of:isFinite(r)&&r>f&&(s=r);e=0;o&&(i=Infinity)}o=n.Oe;h=n.Yf;e>o.width&&h.width<o.width&&(e=o.width);s>o.height&&h.height<o.height&&(s=o.height);u=Math.max(e/n.scale,h.width);f=Math.max(s/n.scale,h.height);o.width<u&&(u=Math.min(h.width,u));o.height<f&&(f=Math.min(h.height,f));i=Math.min(o.width,i);r=Math.min(o.height,r);i=Math.max(u,i);r=Math.max(f,r);n.$c.Ra();n.Kt(i,r,u,f);n.$c.freeze();n.$c.P()||t.m("Non-real measuredBounds has been set. Object "+n+", measuredBounds: "+n.$c.toString());hf(n,!1)}}function dg(n,t,i,r,u){var f=n.pa,e;if(f.x=t,f.y=i,f.width=r,f.height=u,!n.Ea.P()){f=n.$c;i=n.margin;t=i.right+i.left;e=i.top+i.bottom;i=f.width+t;f=f.height+e;r+=t;u+=e;t=to(n);i===r&&f===u&&(t=yr);switch(t){case yr:(i>r||f>u)&&(hf(n,!0),bi(n,i>r?r:i,f>u?u:f));break;case cr:hf(n,!0);bi(n,r,u,0,0);break;case du:hf(n,!0);bi(n,r,f,0,0);break;case of:hf(n,!0);bi(n,i,u,0,0)}}}function gg(n,i,r){var u,f,e;if(gl(n,!1),e=n.U,null!==e&&(u=e.h,null!==u))if(ty(e),n instanceof s){if(f=!1,e=i.P(),!1===u.Ji){var o=u.Lc,h=u.padding,c=o.x+h.left,l=o.y+h.top,a=o.width-2*h.right,o=o.height-2*h.bottom;e&&i.x>c&&i.y>l&&i.right<a&&i.bottom<o&&r.x>c&&r.y>l&&r.right<a&&r.bottom<o&&(f=!0)}0!=(n.Z&65536)!=!0&&i.O(r)||gst(n,f,u);u.Cz&&null!==u.Hj?(f=null,e&&(f=t.Jf(),sh(n,i,f)),u.na(r.P()?sh(n,r):null,f),null!==f&&t.oc(f)):u.na()}else oot(n,e),n.na(),i=n.U,null!==i&&(i.An!==n&&i.pG!==n&&i.tG!==n||kn(i,!0))}function oot(n,t){if(null!==n.Ud&&kn(t,!0),n instanceof a)for(var r=n.va,u=r.length,i=0;i<u;i++)oot(r.n[i],t)}function sot(n,t,i){var r=n.Pb;0===r.width||0===r.height||isNaN(r.x)||isNaN(r.y)||(null!==n.zc&&(gu(n,t,n.zc,!0,!0),n.zc instanceof ht&&n.zc.type===ku?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),ou(t,n.zc,!0)):t.fillRect(r.x,r.y,r.width,r.height)),null!==n.Qb&&(gu(n,t,n.Qb,!0),n.Qb instanceof ht&&n.Qb.type===ku?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),ou(t,n.Qb,!0)):t.fillRect(r.x,r.y,r.width,r.height)),n.rl(t,i))}function ou(n,t,i){if(i)if(n instanceof CanvasRenderingContext2D&&t instanceof ht&&t.type===ku){var r=t.Gy;t=t.Fy;t>r?(n.scale(r/t,1),n.translate((t-r)/2,0),i?n.fill():n.stroke(),n.translate(-(t-r)/2,0),n.scale(1/(r/t),1)):r>t?(n.scale(1,t/r),n.translate(0,(r-t)/2),i?n.fill():n.stroke(),n.translate(0,-(r-t)/2),n.scale(1,1/(t/r))):i?n.fill():n.stroke()}else i?n.fill():n.stroke();else n.stroke()}function gu(n,i,r,u,f){var a,c,p,v,l,y;if(null!==r)if(a=1,c=1,"string"==typeof r)u?i.Rl!==r&&(i.fillStyle=r,i.Rl=r):i.Jn!==r&&(i.strokeStyle=r,i.Jn=r);else if(r.type===yc)r=r.color,u?i.Rl!==r&&(i.fillStyle=r,i.Rl=r):i.Jn!==r&&(i.strokeStyle=r,i.Jn=r);else{var o,c=n.Ja,a=c.width,c=c.height;if(f)var s=n.pa,a=s.width,c=s.height;if(p=i instanceof CanvasRenderingContext2D,p&&(r.Zg&&r.type===av||r.Gy===a&&r.Fy===c))o=r.Zg;else{if(y=l=0,f&&(s=n.pa,a=s.width,c=s.height,l=s.x,y=s.y),r.start instanceof h?(n=r.start.x,f=r.start.y):r.start instanceof e?(n=r.start.x*a+r.start.offsetX,f=r.start.y*c+r.start.offsetY):(n=si.x*a+r.start.offsetX,f=si.y*c+r.start.offsetY),r.end instanceof h?(s=r.end.x,v=r.end.y):r.end instanceof e?(s=r.end.x*a+r.end.offsetX,v=r.end.y*c+r.end.offsetY):r.type===fo?(s=tv.x*a+r.end.offsetX,v=tv.y*c+r.end.offsetY):(s=si.x*a+r.end.offsetX,v=si.y*c+r.end.offsetY),n+=l,s+=l,f+=y,v+=y,r.type===fo?o=i.createLinearGradient(n,f,s,v):r.type===ku?(l=isNaN(r.mp)?Math.max(a,c)/2:r.mp,isNaN(r.hq)?(o=0,l=Math.max(a,c)/2):o=r.hq,o=i.createRadialGradient(n,f,o,s,v,l)):r.type===av?o=i.createPattern(r.pattern,"repeat"):t.jc(r.type,"Brush type"),r.type!==av&&(l=r.hp))for(l=l.k;l.next();)o.addColorStop(l.key,l.value);p&&(r.Zg=o,r.Gy=a,r.Fy=c)}u?i.Rl!==o&&(i.fillStyle=o,i.Rl=o):i.Jn!==o&&(i.strokeStyle=o,i.Jn=o)}}function nn(n){var t,i;if(0!=(n.oa&2048)==!0){if(t=n.Oc,t.reset(),!n.Pb.P()||!n.$c.P()){rn(n,!1);return}t.translate(n.Pb.x,n.Pb.y);t.translate(-n.Ha.x,-n.Ha.y);i=n.Ja;hot(n,t,i.x,i.y,i.width,i.height);rn(n,!1);bv(n,!0)}0!=(n.oa&4096)==!0&&(t=n.ia,null===t?(n.Ch.set(n.Oc),bv(n,!1)):null!==t.se&&(i=n.Ch,i.reset(),t.Kf()?i.multiply(t.Ch):null!==t.ia&&i.multiply(t.ia.Ch),i.multiply(n.Oc),bv(n,!1)))}function hot(n,i,r,u,f,e){var o,h;if(1!==n.scale&&i.scale(n.scale),0!==n.angle){if(o=si,n.gf&&n.gf.Cd()&&(o=n.gf),h=t.N(),n instanceof s&&n.Zb!==n)for(r=n.Zb,u=r.Ja,h.fu(u.x,u.y,u.width,u.height,o),r.Zk.Xa(h),h.offset(-r.Ha.x,-r.Ha.y),o=r.ia;null!==o&&o!==n;)o.Zk.Xa(h),h.offset(-o.Ha.x,-o.Ha.y),o=o.ia;else h.fu(r,u,f,e,o);i.rotate(n.angle,h.x,h.y);t.B(h)}}function pv(n){if(!1===pc(n)&&(hf(n,!0),gl(n,!0),n instanceof a)){n=n.va.n;for(var i=n.length,t=0;t<i;t++)pv(n[t])}}function dl(n){if(!1===he(n)){if(null!==n.ia)n.ia.ja();else{var t=n.h;null!==t&&(n.Wa()&&t.lg.add(n),n instanceof y&&n.Cf(),t.ie())}gl(n,!0)}}function wo(n){if(0!=(n.oa&2048)==!1&&(rn(n,!0),bv(n,!0),n instanceof a)){n=n.va.n;for(var i=n.length,t=0;t<i;t++)cot(n[t])}}function cot(n){if(bv(n,!0),n instanceof a){n=n.va.n;for(var i=n.length,t=0;t<i;t++)cot(n[t])}}function to(n){var i=n.ui,t=n.ia;return t&&t.ga===vs?wv(n,t.we(n.wc),t.ve(n.column)):t&&t.ga===bo&&t.Rw()===n?cr:i===be?t?(t.ga===wc&&null===t.To&&(i=t.va,tc(t,i,i.length)),t.To===n)?cr:(n=t.mA,n===be?yr:n):yr:i}function wv(n,t,i){var r=n.ui,u;if(r!==be)return r;u=r=void 0;switch(t.ui){case of:u=!0;break;case cr:u=!0}switch(i.ui){case du:r=!0;break;case cr:r=!0}return n=n.ia.mA,r=void 0!==r||n!==du&&n!==cr?!1:!0,u=void 0!==u||n!==of&&n!==cr?!1:!0,!0===r&&!0===u?cr:!0===r?du:!0===u?of:yr}function nw(n,t){n.oa=t?n.oa|512:n.oa&-513}function tn(n,t){n.oa=t?n.oa|1024:n.oa&-1025}function rn(n,t){n.oa=t?n.oa|2048:n.oa&-2049}function bv(n,t){n.oa=t?n.oa|4096:n.oa&-4097}function pc(n){return 0!=(n.oa&8192)}function hf(n,t){n.oa=t?n.oa|8192:n.oa&-8193}function he(n){return 0!=(n.oa&16384)}function gl(n,t){n.oa=t?n.oa|16384:n.oa&-16385}function lot(n){var t={value:null};return aot(n,t),t.value}function aot(n,t){var i=n.ia;return null===i||!aot(i,t)&&n.visible?(t.value=n,!1):!0}function oh(n){var t=n.U;t instanceof y&&(n=n.h)&&!n.ma.yb&&t.Cf()}function vot(n,r){var u,e,o,s;if("string"==typeof r)u=n,u instanceof ot?u.text=r:u instanceof w?u.Eb=r:u instanceof ir?u.source=r:u instanceof a?(e=t.en(a,r),null!==e?u.type=e:t.m("Unknown Panel type as an argument to GraphObject.make: "+r)):u instanceof ht?(e=t.en(ht,r),null!==e?u.type=e:t.m("Unknown Brush type as an argument to GraphObject.make: "+r)):u instanceof rt?(e=t.en(rt,r),null!==e?u.type=e:t.m("Unknown Geometry type as an argument to GraphObject.make: "+r)):u instanceof ut?(e=t.en(ut,r),null!==e?u.type=e:t.m("Unknown PathSegment type as an argument to GraphObject.make: "+r)):t.m("Unable to use a string as an argument to GraphObject.make: "+r);else if(r instanceof f)n instanceof a||t.m("A GraphObject can only be added to a Panel, not to: "+n),n.add(r);else if(r instanceof dt)n instanceof a||t.m("A RowColumnDefinition can only be added to a Panel, not to: "+n),u=r.pi?n.we(r.index):n.ve(r.index),t.l(r,dt,dt,"copyFrom:pd"),r.pi?u.height=r.height:u.width=r.width,u.si=r.si,u.Ef=r.Ef,u.alignment=r.alignment,u.gu=r.gu,u.ak=null===r.ak?null:r.ak.ba(),u.Bn=r.Bn,u.Cn=r.Cn,u.Wh=null,r.Wh&&(u.Wh=r.Wh.slice(0)),u.background=r.background,u.Hw=r.Hw,u.Nc=r.Nc;else if(r instanceof de)u=n,u instanceof c&&r.Xe===c?2==(r.value&2)?u.au=r:r===ae||r===ys||r===oa?u.Je=r:r===aw||r===vw||r===yw?u.Yo=r:r!==utt&&r!==io&&t.m("Unknown Link enum value for a Link property: "+r):u instanceof a&&r.Xe===a?u.type=r:u instanceof ot&&r.Xe===ot?u.OB=r:u instanceof f&&r.Xe===c?0===r.name.indexOf("Orient")?u.cu=r:t.m("Unknown Link enum value for GraphObject.segmentOrientation property: "+r):u instanceof f&&r.Xe===f?u.ui=r:u instanceof i&&r.Xe===i?u.Tm=r:u instanceof ht&&r.Xe===ht?u.type=r:u instanceof rt&&r.Xe===rt?u.type=r:u instanceof ut&&r.Xe===ut?u.type=r:u instanceof ri&&r.Xe===ri?u.mode=r:u instanceof ii&&r.Xe===ii?u.Bd=r:u instanceof l&&r.Xe===l?0===r.name.indexOf("Alignment")?u.alignment=r:0===r.name.indexOf("Arrangement")?u.We=r:0===r.name.indexOf("Compaction")?u.compaction=r:0===r.name.indexOf("Path")?u.path=r:0===r.name.indexOf("Sorting")?u.sorting=r:0===r.name.indexOf("Style")?u.bH=r:t.m("Unknown enum value: "+r):u instanceof nt&&r.Xe===nt?0===r.name.indexOf("Aggressive")?u.hE=r:0===r.name.indexOf("Cycle")?u.GE=r:0===r.name.indexOf("Init")?u.yF=r:0===r.name.indexOf("Layer")?u.LF=r:t.m("Unknown enum value: "+r):u instanceof ui&&r.Xe===ui?r===ey||r===hb||r===gtt||r===sb?u.sorting=r:r===ob||r===ts?u.We=r:r===fy||r===eb?u.alignment=r:t.m("Unknown enum value: "+r):u instanceof pt&&r.Xe===pt?r===yb||r===pb||r===ab||r===vb||r===wa?u.sorting=r:r===ec||r===pa||r===ru||r===ah?u.direction=r:r===ws||r===lh||r===re||r===ve?u.We=r:r===oc||r===wb?u.Rt=r:t.m("Unknown enum value: "+r):t.m("No property to set for this enum value: "+r);else if(r instanceof ri)n instanceof f||n instanceof dt?(e=r.ku,o=e.indexOf("."),0<o&&n instanceof a&&(u=e.substr(o+1),e=n.ue(e.substring(0,o)),null!==e&&(n=e,r.ku=u)),n.bind(r)):t.m("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+n);else if(r instanceof ai)n instanceof rt?n.Fb.add(r):t.m("A PathFigure can only be added to a Geometry, not to: "+n);else if(r instanceof ut)n instanceof ai?n.Ka.add(r):t.m("A PathSegment can only be added to a PathFigure, not to: "+n);else if(Array.isArray(r))for(u=0;u<r.length;u++)vot(n,r[u]);else if("object"==typeof r&&null!==r)if(u=n,u instanceof ht){e={};for(o in r)s=parseFloat(o),isNaN(s)?e[o]=r[o]:u.addColorStop(s,r[o]);t.Gx(u,e)}else u instanceof dt?(void 0!==r.row?(e=r.row,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&t.m("Must specify non-negative integer row for RowColumnDefinition "+r),u.hm=!0,u.Zc=e):void 0!==r.column?(e=r.column,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&t.m("Must specify non-negative integer column for RowColumnDefinition "+r),u.hm=!1,u.Zc=e):t.m("Must specify row or column value in a RowColumnDefinition "+r),e=t.wI(r,"row","column"),t.Gx(u,e)):t.Gx(u,r);else t.m('Unknown initializer "'+r+'" for object being constructed by GraphObject.make: '+n)}function a(n){f.call(this);void 0===n?0===arguments.length?this.ga=ta:t.m("invalid argument to Panel constructor: undefined"):(t.Fa(n,a,a,"type"),this.ga=n);this.va=new b(f);this.Te=u.tq;this.bh=!1;this.ga===bc&&(this.bh=!0);this.Rq=pr;this.Ac=be;this.ga===vs&&yot(this);this.Vo=ar;this.fr=new st(10,10).freeze();this.gr=u.Aj;this.Ul=this.Zl=null;this.vr=NaN;this.ng=this.Li=null;this.xo="category";this.mg=null;this.bj=new p(NaN,NaN,NaN,NaN);this.To=null;this.Qh=!1;this.ps=null}function yot(n){n.Gj=u.tq;n.Jh=1;n.Fi=null;n.am=null;n.Ih=1;n.Hh=null;n.$l=null;n.pd=[];n.jd=[];n.Em=dc;n.Wl=dc;n.aj=0;n.Mi=0}function wot(n,i,r,u){for(var o,s,h,l,e,v=u.length,f,c=n.pa,y=r?n.we(0):n.ve(0),a=0;a<v;a++)(f=u[a],void 0!==f&&f!==y&&0!==f.lc)&&(o=f.Cn,isNaN(o)&&(o=r?n.Jh:n.Ih),s=f.Bn,null===s&&(s=r?n.Fi:n.Hh),0!==o&&null!==s&&(gu(n,i,s,!1),s=!1,h=f.CG,null!==h&&(l=s=!0,void 0!==i.setLineDash?(i.setLineDash(h),i.lineDashOffset=n.qd):void 0!==i.webkitLineDash?(i.webkitLineDash=h,i.webkitLineDashOffset=n.qd):void 0!==i.mozDash?(i.mozDash=h,i.mozDashOffset=n.qd):l=!1),i.beginPath(),e=f.position+o,r?e>c.height&&(o-=e-c.height):e>c.width&&(o-=e-c.width),f=f.position+o/2,i.lineWidth=o,e=n.padding,r?(f+=e.top,o=e.left,e=c.width-e.right,s&&!l?kl(i,o,f,e,f,h,0):(i.moveTo(o,f),i.lineTo(e,f))):(f+=e.left,o=e.top,e=c.height-e.bottom,s&&!l?kl(i,f,o,f,e,h,0):(i.moveTo(f,o),i.lineTo(f,e))),i.stroke(),s&&(void 0!==i.setLineDash?(i.setLineDash(t.xi),i.lineDashOffset=0):void 0!==i.webkitLineDash?(i.webkitLineDash=t.xi,i.webkitLineDashOffset=0):void 0!==i.mozDash&&(i.mozDash=null,i.mozDashOffset=0))))}function tw(n,t,i,r,u){for(var f,s,o,c,a=r.length,e,h=n.pa,l=0;l<a;l++)(e=r[l],void 0!==e&&null!==e.background&&e.Hw!==u&&0!==e.lc)&&(f=i?h.height:h.width,e.position>f||(s=oo(e),o=e.Cn,isNaN(o)&&(o=i?n.Jh:n.Ih),c=e.Bn,null===c&&(c=i?n.Fi:n.Hh),null===c&&(o=0),s-=o,o=e.position+o,s+=e.lc,o+s>f&&(s=f-o),0>=s||(f=n.padding,gu(n,t,e.background,!0),i?t.fillRect(f.left,o+f.top,h.width-(f.left+f.right),s):t.fillRect(o+f.left,f.top,s,h.height-(f.top+f.bottom)))))}function iw(n,t,i){if(0!=n%t)return!1;t=i.length;for(var r=0;r<t;r++)if(0==n%i[r])return!1;return!0}function un(n){return"LineV"===n||"BarV"===n}function tc(n,t,i){for(var u,r=0;r<i;r++)if(u=t.n[r],!0===u.oi)return n.To=u;return t=t.n[0],n.To=t}function rw(n,t,i){if(i(n,t),t instanceof a){t=t.va.n;for(var u=t.length,r=0;r<u;r++)rw(n,t[r],i)}}function kv(n,t){bot(n,n,t)}function bot(n,t,i){var f,r,u;for(i(t),t=t.va.n,f=t.length,r=0;r<f;r++)u=t[r],u instanceof a&&bot(n,u,i)}function kot(n,t,i){if(i(t),t instanceof a){t=t.va.n;for(var u=t.length,r=0;r<u;r++)kot(n,t[r],i)}}function dot(n,t,i){var f,r,u;if(i(t))return t;if(t instanceof a)for(t=t.va.n,f=t.length,r=0;r<f;r++)if(u=dot(n,t[r],i),null!==u)return u;return null}function got(n){var t;n=n.va.n;for(var u=n.length,i=0,r=0;r<u;r++)if(t=n[r],t instanceof a)i=Math.max(i,got(t));else if(t instanceof w){n:{if(!t.lh)switch(t.io){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":t=0;break n}t=t.qe/2*t.Km*t.sk()}i=Math.max(i,t)}return i}function fn(n,t,i,r){for(var u,f,o,e=n.va.length;e--;)u=n.va.n[e],u.visible&&(f=u.pa,o=n.Ja,f.x>o.width||f.y>o.height||0>f.x+f.width||0>f.y+f.height||(u instanceof a&&fn(u,t,i,r),null!==t&&(u=t(u)),u&&(null===i||i(u))&&r.add(u)))}function en(n){var t=n.G;return(void 0===t||t===pr)&&(t=null),null===t&&n instanceof w&&(n=n.Ta,null!==n&&(t=n.G)),null===t&&(t=hr),t}function on(n){var t=n.H;return(void 0===t||t===pr)&&(t=null),null===t&&n instanceof w&&(n=n.Ta,null!==n&&(t=n.H)),null===t&&(t=cu),t}function nst(n){return n=n.Ul,null!==n&&n.tb}function ce(n){var u=n.Ul,o,e,i,r,h;if(null===u)null!==n.data&&t.m("Template cannot have .data be non-null: "+n),n.Ul=u=new b(ri);else if(u.tb)return;for(o=new b(f),rw(n,n,function(n,t){var i=t.Nc,e,s,r,f,h;if(null!==i)for(tn(t,!1),e=i.k;e.next();)i=e.value,i.mode===fp&&tn(t,!0),s=i.iu,null!==s&&(r=n,""!==s&&(r=n.ue(s)),null!==r&&(o.add(r),void 0===r.Fs&&(r.Fs=new b(ri)),r.Fs.add(i))),u.add(i);if(t instanceof a&&t.type===vs){if(0<t.pd.length)for(e=t.pd,s=e.length,r=0;r<s;r++)if(f=e[r],void 0!==f&&null!==f.Nc)for(h=f.Nc.k;h.next();)i=h.value,i.vg=f,i.Kz=2,i.dw=f.index,u.add(i);if(0<t.jd.length)for(e=t.jd,s=e.length,r=0;r<s;r++)if(f=e[r],void 0!==f&&null!==f.Nc)for(h=f.Nc.k;h.next();)i=h.value,i.vg=f,i.Kz=1,i.dw=f.index,u.add(i)}}),e=o.k;e.next();){if(i=e.value,void 0!==i.Fs)for(tn(i,!0),r=i.Fs.k;r.next();)h=r.value,null===i.Nc&&(i.Nc=new b(ri)),i.Nc.add(h);delete i.Fs}for(e=u.k;e.next();)i=e.value,r=i.vg,null!==r&&(i.vg=null,r===n?i.Fn="":(r instanceof dt&&(r=r.ia),i.Fn=""!==r.name?r.name:r.name="_"+t.ud(r)));u.freeze();n instanceof s&&n.Rd()&&(bi(n,Infinity,Infinity),n.Pc())}function sn(n){return n.type===wc||n.type===bo||n.type===go}function tst(n,t,i){if(void 0!==t&&null!==t){var r=n.getCategoryForItemData(t,i),r=n.findTemplateForItemData(t,i,r);r instanceof a&&(ce(r),r=r.copy(),"object"==typeof t&&(null===n.mg&&(n.mg=new gt(Object,a)),n.mg.add(t,r)),n.type!==wc&&n.type!==bo||i++,n.Pd(i,r),rst(r,i),ist(n,i),r.data=t)}}function ist(n,t){for(var u,r=n.va,i=t+1;i<r.length;)u=r.wa(i),u instanceof a&&rst(u,i),i++}function rst(n,t){n.type===eo?n.wc=t:n.type===ko&&(n.column=t);n.HF=t}function dt(){t.Fc(this);this.Ui=null;this.hm=!0;this.Zc=0;this.Rf=NaN;this.sm=0;this.rm=Infinity;this.Ae=pr;this.Pa=this.Ob=0;this.Nc=null;this.Cs=hn;this.$h=be;this.zs=this.ak=null;this.As=NaN;this.Qb=this.Wh=null;this.Nq=!1}function ie(n,t){n.Ob=isNaN(n.Rf)?Math.max(Math.min(n.rm,t),n.sm):Math.max(Math.min(n.rm,n.Rf),n.sm)}function ust(n){var r=n.Ui,t=n.Bn,i;return null===t&&(t=n.pi?r.Fi:r.Hh),i=n.Cn,isNaN(i)&&(i=n.pi?r.Jh:r.Ih),i=null!==t?i:0,0===n.index&&(i=0),t=n.uB,null===t&&(t=r.Gj),i+(n.pi?t.top:t.left)}function oo(n){var r=n.Ui,t=n.Bn,i;return null===t&&(t=n.pi?r.Fi:r.Hh),i=n.Cn,isNaN(i)&&(i=n.pi?r.Jh:r.Ih),i=null!==t?i:0,0===n.index&&(i=0),t=n.uB,null===t&&(t=r.Gj),i+(n.pi?t.top+t.bottom:t.left+t.right)}function uw(n){if(n.gu===hn){var t=n.Ui;return n.pi?t.wG:t.xE}return n.gu}function w(){f.call(this);this.Ta=null;this.io="None";this.lh=!1;this.dr=be;this.Lk=null;this.Kb=this.Yc="black";this.qe=1;this.Ro="butt";this.So="miter";this.Km=10;this.Jm=null;this.qd=0;this.Zi=this.Yi=pr;this.Zr=this.Yr=0;this.ir=!1;this.or=!0;this.as=null;this.mo=this.Uo="None";this.hr=1}function cn(n,i,r,u){var f=.001,g=u.Ha,y=g.width,g=g.height,o,c,h,p=r.length,v,d;if(!(2>p)){o=r[0][0];c=r[0][1];for(var s,l,e,w,k=0,a=t.Hb(),b=1;b<p;b++)s=r[b],f=s[0],h=s[1],s=f-o,o=h-c,0===s&&(s=.001),l=o/s,w=Math.atan2(o,s),o=Math.sqrt(s*s+o*o),a.push([s,w,l,o]),k+=o,o=f,c=h;for(o=r[0][0],c=r[0][1],r=0,f=y,p=y/2,b=0===p?!1:!0,h=0,e=a[h],s=e[0],w=e[1],l=e[2],e=e[3],v=0;.1<=k;){if(0===v&&(b?(f=y,r++,f-=p,k-=p,b=!1):(f=y,r++),0===f&&(f=1)),f>k){t.Ca(a);return}if(f>e?(v=f-e,f=e):v=0,d=Math.sqrt(f*f/(1+l*l)),0>s&&(d=-d),o+=d,c+=l*d,n.translate(o,c),n.rotate(w),n.translate(-(y/2),-(g/2)),0===v&&u.rl(n,i),n.translate(y/2,g/2),n.rotate(-w),n.translate(-o,-c),k-=f,e-=f,0!==v){if(h++,h===a.length){t.Ca(a);return}e=a[h];s=e[0];w=e[1];l=e[2];e=e[3];f=v}}t.Ca(a)}}function dv(n,i,r,u){var f=.001,k=r.length,e,h,c,l=i.length,p,b;if(!(2>l))if(e=i[0][0],h=i[0][1],2===l)kl(n,e,h,i[1][0],i[1][1],r,u);else{n.moveTo(e,h);for(var s,a,o,w=0,v=t.Hb(),y=1;y<l;y++)s=i[y],f=s[0],c=s[1],s=f-e,e=c-h,0===s&&(s=.001),a=e/s,e=Math.sqrt(s*s+e*e),v.push([s,a,e]),w+=e,e=f,h=c;for(e=i[0][0],h=i[0][1],i=0,l=!0,f=r[i%k],y=0!==u,c=0,o=v[c],s=o[0],a=o[1],o=o[2],p=0;.1<=w;)if(0===p&&(f=r[i%k],i++,y&&(u%=f,f-=u,y=!1)),f>w&&(f=w),f>o?(p=f-o,f=o):p=0,b=Math.sqrt(f*f/(1+a*a)),0>s&&(b=-b),e+=b,h+=a*b,l?n.lineTo(e,h):n.moveTo(e,h),w-=f,o-=f,0!==p){if(c++,c===v.length){t.Ca(v);return}o=v[c];s=o[0];a=o[1];o=o[2];f=p}else l=!l;t.Ca(v)}}function fst(n,i,r){var u,f;!1!==pc(n)&&(n.$c.Ra(),u=n.qe,0===u&&(f=n.U,f instanceof fi&&f.type===go&&f.uc instanceof w&&(u=f.uc.lb)),u*=n.fc,eh(n,-(u/2),-(u/2),i+u,r+u),i=n.$c,r=n.Oe,u=n.Yf,i.width=Math.min(r.width,i.width),i.height=Math.min(r.height,i.height),i.width=Math.max(u.width,i.width),i.height=Math.max(u.height,i.height),n.$c.freeze(),n.$c.P()||t.m("Non-real measuredBounds has been set. Object "+n+", measuredBounds: "+n.$c.toString()),hf(n,!1))}function est(n){var t=n.Ww;return n.lh?t===be?cr:t:t===be?u.eB[n.Eb].Ac:t}function fw(n,t,i,r,u){return n=i.x-n,t=i.y-t,t=n*n+t*t,t<r?(u.x=i.x,u.y=i.y,t):r}function ln(n,t,i,r,f,e,o,s,h){var c=!1,l=(f-o)*(t-r)-(e-s)*(n-i);return 0===l?!1:(h.x=((f*s-e*o)*(n-i)-(f-o)*(n*r-t*i))/l,h.y=((f*s-e*o)*(t-r)-(e-s)*(n*r-t*i))/l,(n>i?n-i:i-n)<(t>r?t-r:r-t)?(f=t<r?t:r,n=t<r?r:t,(h.y>f||u.sb(h.y,f))&&(h.y<n||u.sb(h.y,n))&&(c=!0)):(f=n<i?n:i,n=n<i?i:n,(h.x>f||u.sb(h.x,f))&&(h.x<n||u.sb(h.x,n))&&(c=!0)),c)}function ic(n,t,i,r){var f,e,u;return n.yl(t,i,r)?(n=t.x,t=t.y,f=i.x,e=i.y,i=r.x,r=r.y,n===f)?(t<e?(u=t,n=e):(u=e,n=t),r>=u&&r<=n):(n<f?(u=n,n=f):u=f,i>=u&&i<=n):!1}function ost(n){var t=n.h;null!==t&&t.ma.yb||(n.cu=ftt,"None"!==n.Uo?(n.Gf=-1,n.ek=lu):"None"!==n.mo&&(n.Gf=0,n.ek=new e(1-lu.x,lu.y)))}function ot(){f.call(this);this.re="";this.Kb="black";this.$g="13px sans-serif";this.ae="start";this.lr=!0;this.im=this.jm=!1;this.cl=cst;this.Nm=hst;this.sv=this.fh=0;this.lo=this.rz=this.sz=null;this.Eo={};this.Yq=!1;this.qf=this.fl=this.Ms=null;this.dk=this.ck=0;this.Qj=Infinity}function lst(n,t){var i=n.$g;null!==i&&t.su!==i&&(t.font=i,t.su=i)}function vn(n,i,r,u){var c,o,e,s,a,h,f,l;if(i=i.replace(/^\s+|\s+$/g,""),void 0===r.Gg&&(r.Gg=0),void 0===r.Ag&&(r.Ag=[]),void 0===r.Tf&&(r.Tf=[]),c=0,s=n.$g,o=n.ck+n.dk,a=Math.max(0,gv(n)+o),h=n.cl===ew?ast(s):0,!(n.fh>=n.Qj)){if(n.Nm===an){if(r.Bh=1,o=le(i,s),0===h||o<=u)return r.Gg=o,r.Ag.push(r.Gg),r.Tf.push(i),new st(o,a);for(f=ia(i),i=i.substr(f.length),e=ia(i),o=le(f+e,s);0<e.length&&o<=u;)f+=e,i=i.substr(e.length),e=ia(i),o=le((f+e).replace(/^\s+|\s+$/g,""),s);for(f+=e.replace(/^\s+|\s+$/g,""),u=Math.max(1,u-h);le(f,s)>u&&1<f.length;)f=f.substr(0,f.length-1);return f+=t.ot,e=le(f,s),r.Ag.push(e),r.Gg=e,r.Tf.push(f),new st(e,a)}for(h=0,0===i.length&&(h=1,r.Ag.push(0),r.Tf.push(i));0<i.length;){for(f=ia(i),i=i.substr(f.length);le(f,s)>u;){for(l=1,o=le(f.substr(0,l),s),e=0;o<=u;)l++,e=o,o=le(f.substr(0,l),s);if(1===l?(r.Ag[h]=o,c=Math.max(c,o)):(r.Ag[h]=e,c=Math.max(c,e)),l--,1>l&&(l=1),r.Tf[h]=f.substr(0,l),h++,n.fh+h===n.Qj)break;f=f.substr(l)}for(e=ia(i),o=le(f+e,s);0<e.length&&o<=u;)f+=e,i=i.substr(e.length),e=ia(i),o=le((f+e).replace(/^\s+|\s+$/g,""),s);if(f=f.replace(/^\s+|\s+$/g,""),""!==f&&(0===e.length?(r.Ag.push(o),c=Math.max(c,o)):(e=le(f,s),r.Ag.push(e),c=Math.max(c,e)),r.Tf.push(f),h++,n.fh+h===n.Qj))break}return r.Bh=h,r.Gg=Math.max(r.Gg,c),new st(r.Gg,a*r.Bh)}}function ia(n){for(var i=n.length,t=0;t<i&&" "!==n.charAt(t);)t++;for(;t<i&&" "===n.charAt(t);)t++;return t>=i?n:n.substr(0,t)}function le(n,i){return t.fq!==i&&(t.Dn.font=i,t.fq=i),t.Dn.measureText(n).width}function gv(n){var i,r;return null!==n.lo?n.lo:(i=n.$g,t.fq!==i&&(t.Dn.font=i,t.fq=i),r=0,void 0!==t.xA[i]&&5e3>t.dF?r=t.xA[i]:(r=1.3*t.Dn.measureText("M").width,t.xA[i]=r,t.dF++),n.lo=r)}function ast(n){t.fq!==n&&(t.Dn.font=n,t.fq=n);var i=0;return void 0!==t.Uw[n]&&5e3>t.wA?i=t.Uw[n]:(i=t.Dn.measureText(t.ot).width,t.Uw[n]=i,t.wA++),i}function ow(n,t,i){void 0===i.Bh&&(i.Bh=0);var r=n.indexOf("\r",t);return-1===r&&(r=n.indexOf("\n",t)),0<=r&&(i.Bh="\r"===n[r]&&r+1<n.length&&"\n"===n[r+1]?r+2:r+1),r}function vst(n,t,i){var u=n.re,o=n.ck+n.dk,o=Math.max(0,gv(n)+o),f;if(0===u.length)return i.Gg=0,n.fh=1,o;n.kx||(f=ow(u,0,{}),0<=f&&(u=u.substr(0,f)));for(var f=0,r=n.fh=0,e=-1,h={Bh:0},s=!1;!s;)e=ow(u,r,h),-1===e&&(e=u.length,s=!0),r<=e&&(r=u.substr(r,e-r),n.Nm!==an?(i.Bh=0,r=vn(n,r,i,t),f+=r.height,n.fh+=i.Bh):(vn(n,r,i,t),f+=o,n.fh++),n.fh===n.Qj&&(s=!0)),r=h.Bh;return n.sv=f}function ir(){f.call(this);this.jg=null;this.Es="";this.bk=new p(NaN,NaN,NaN,NaN).freeze();this.po=cr;this.Ks=this.qf=null;this.jv=this.av=this.qm=!1}function pst(){this.s=new rt;this.bc=null}function v(n,i,r,u,f,e){null===n.s&&t.m("StreamGeometryContext has been closed");void 0!==f&&!0===f?(null===n.bc&&t.m("Need to call beginFigure first"),u=new ut(df),u.D=i,u.F=r,n.bc.Ka.add(u)):(n.bc=new ai,n.bc.sa=i,n.bc.ta=r,n.bc.Cp=u,n.s.Fb.add(n.bc));void 0!==e&&(n.bc.vo=e)}function tt(n){null===n.s&&t.m("StreamGeometryContext has been closed");null===n.bc&&t.m("Need to call beginFigure first");var i=n.bc.Ka.length;0<i&&n.bc.Ka.n[i-1].close()}function bat(n){null===n.s&&t.m("StreamGeometryContext has been closed");null===n.bc&&t.m("Need to call beginFigure first");0<n.bc.Ka.length&&(n.bc.Cp=!0)}function o(n,i,r,u,f,e,o,s){null===n.s&&t.m("StreamGeometryContext has been closed");null===n.bc&&t.m("Need to call beginFigure first");var h=new ut(au);h.Gb=i;h.Xb=r;h.ye=u;h.ze=f;h.D=e;h.F=o;s&&h.close();n.bc.Ka.add(h)}function sw(n,i,r,u,f){null===n.s&&t.m("StreamGeometryContext has been closed");null===n.bc&&t.m("Need to call beginFigure first");var e=new ut(ee);e.Gb=i;e.Xb=r;e.D=u;e.F=f;n.bc.Ka.add(e)}function kat(n,i,r,u,f,e,o,s){null===n.s&&t.m("StreamGeometryContext has been closed");null===n.bc&&t.m("Need to call beginFigure first");i=new ut(gf,o,s,i,r,u,f,e);n.bc.Ka.add(i)}function s(n){0===arguments.length?a.call(this):a.call(this,n);this.Z=311807;this.Xk=this.Eh="";this.ms=this.js=this.ws=this.xr=null;this.ys="";this.Vg=this.xs=this.Fm=null;this.ls="";this.Lo=null;this.ks=new st(NaN,NaN).freeze();this.ns="";this.Mo=null;this.re="";this.Co=this.Lq=this.Mk=null;this.hh=new h(NaN,NaN).freeze();this.Er="";this.$k=null;this.Fr=hr;this.Pr=u.tH;this.Hr=u.sH;this.Vq=null;this.yr=wst;this.Im=new h(6,6).freeze();this.Hm="gray";this.Gm=4;this.$C=-1;this.DH=new p;this.Uj=null;this.Rj=NaN}function dat(n,i){var u,r,f,h,e,o;if(n.ib&&n.tB){if(u=n.An,null===u||!(n.pa.P()&&n.Wa()&&u.Cl()&&u.pa.P()))return;if(r=n.np("Selection"),null===r){if(r=n.AG,null===r&&(n instanceof c?r=i.RF:n instanceof s&&(r=n instanceof g?i.nF:i.dG)),!(r instanceof fi))return;if(ce(r),r=r.copy(),!(r instanceof fi))return;r.cd="Selection";r.uc=u}if(null!==r){f=r.placeholder;null!==f&&(h=u.sk(),e=0,u instanceof w&&(e=u.lb),o=t.Ml(),o.p((u.Ja.width+e)*h,(u.Ja.height+e)*h),f.Ea=o,t.qk(o));r.angle=u.ul();r.type!==go?(f=t.N(),r.location=u.wb(hr,f),t.B(f)):r.ja();n.il("Selection",r);return}}n.Hl("Selection")}function wn(n){var t=n.h;null!==t&&(uh(t),0!=(n.Z&16384)!=!0&&(n.Z|=16384,t.ie()))}function bst(n){0!=(n.Z&16384)!=!1&&(n.updateAdornments(),n.Z&=-16385,n=n.h,null!==n&&(n.Be=!0))}function hw(n,t){if(!1===gc(n)){var i=n.h;null!==i&&(n.Wa()&&i.lg.add(n),n instanceof y&&!i.ma.yb&&n.Cf(),t||i.ie());bn(n,!0)}}function kst(n){var i,t;if(!1!==gc(n)){i=n.position;t=n.location;t.P()&&i.P()||(dst(n,i,t),wo(n));var i=n.Pa,t=n.Pb,r=t.copy();t.Ra();t.x=i.x;t.y=i.y;t.freeze();gg(n,r,t);bn(n,!1)}}function fa(n,t,i,r){void 0===r&&(r=new h);i.Me()&&(i=si);var u=t.Ja;if(r.p(u.width*i.x+i.offsetX,u.height*i.y+i.offsetY),null===t||t===n)return r;for(t.transform.Xa(r),t=t.ia;null!==t&&t!==n;)t.transform.Xa(r),t=t.ia;return n.Zk.Xa(r),r.offset(-n.$c.x,-n.$c.y),r}function sh(n,t,i){var r,u,f,e;return(i=void 0===i?n.DH:i,isNaN(n.Rj)&&(n.Rj=got(n)),r=n.Rj,u=2*r,!n.qi)?(i.p(t.x-1-r,t.y-1-r,t.width+2+u,t.height+2+u),i):(r=t.x,u=t.y,f=t.width,t=t.height,e=n.shadowBlur,n=n.HG,f+=e,t+=e,r-=e/2,u-=e/2,0<n.x?f+=n.x:(r+=n.x,f-=n.x),0<n.y?t+=n.y:(u+=n.y,t-=n.y),i.p(r-1,u-1,f+2,t+2),i)}function dst(n,i,r){var f=NaN,c=NaN,e=t.N(),u=n.gf,o=n.Zb,s;if(u.Me()&&t.m("determineOffset: Part's locationSpot must be real: "+u.toString()),s=o.Ja,f=0,o.lb&&(f=o.qe),e.fu(0,0,s.width+f,s.height+f,u),o!==n)for(o.lb&&e.offset(-f/2,-f/2),o.transform.Xa(e),u=o.ia;null!==u&&u!==n;)u.transform.Xa(e),u=u.ia;n.Zk.Xa(e);e.offset(-n.$c.x,-n.$c.y);u=n.h;r.P()?(o=i.x,s=i.y,f=r.x-e.x,c=r.y-e.y,i.p(f,c),r=!1,null!==u&&(f=u.yi,f.Kj?r=!0:!f.zd||n instanceof fi||cp(f,n,new h(o,s),i),r||i.x===o&&i.y===s||(f=u.ab,u.ab=!0,n.j("position",new h(o,s),i),u.ab=f))):i.P()&&(f=i.x,c=i.y,i=r.copy(),r.p(f+e.x,c+e.y),r.O(i)||null===u||(f=u.ab,u.ab=!0,n.j("location",i,r),u.ab=f));t.B(e)}function gst(n,t,i){kn(n,!1);n instanceof y&&kg(i,n);n.layer.Dc||t||i.Sc();t=n.Pb;var r=i.Ab;r.P()?(ns(n)?art(t,r)||(n.bg(!1),wn(n)):t.Xf(r)&&n.bg(!0),n.updateAdornments()):i.Vk=!0}function ny(n,t){var r;if(n.visible&&(r=n.Pb,0!==r.width&&0!==r.height&&!isNaN(r.x)&&!isNaN(r.y))){var i=n.transform,u=n.ia,f=n.Ch;f.reset();null!==u&&(u.Kf()?f.multiply(u.se):null!==u.ia&&f.multiply(u.ia.se));f.multiply(n.Oc);null!==n.zc&&(gu(n,t,n.zc,!0,!0),t.fillRect(r.x,r.y,r.width,r.height));null===n.zc&&null===n.Qb&&(t.fillStyle="rgba(0,0,0,0.4)",t.fillRect(r.x,r.y,r.width,r.height));null!==n.Qb&&(i.Et()||t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),u=n.Ja,r=u.width,u=u.height,gu(n,t,n.Qb,!0),t.fillRect(0,0,r+0,u+0),i.Et()||(r=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*r,-i.m12*r,-i.m21*r,i.m11*r,r*(i.m21*i.dy-i.m22*i.dx),r*(i.m12*i.dx-i.m11*i.dy))))}}function nht(n,i,r,u){var f;i.constructor===n.constructor||t.gH||(t.gH=!0,t.trace('Should not change the class of the Part when changing category from "'+r+'" to "'+u+'"'),t.trace("  Old class: "+t.Dg(n)+", new class: "+t.Dg(i)+", part: "+n.toString()));n.Uf();f=n.data;r=n.Ne;var h=n.ib,c=n.Fg,e=!0,o=!0,s=!1;n instanceof y&&(e=n.ri,o=n.Uc,s=n.Hn);i.ji(n);i.cloneProtected(n);n.Eh=u;n.ja();n.na();i=n.h;u=!0;null!==i&&(u=i.ab,i.ab=!0);n.Zl=f;null!==f&&n.Vb();null!==i&&(i.ab=u);f=n.Ne;f!==r&&(n.Xk=r,n.Ne=f);n instanceof y&&(n.ri=e,n.Uc=o,n.Hn=s,n.Rd()&&n.M(64));n.ib=h;n.Fg=c}function gc(n){return 0!=(n.Z&32768)}function bn(n,t){n.Z=t?n.Z|32768:n.Z&-32769}function kn(n,t){n.Z=t?n.Z|65536:n.Z&-65537}function ns(n){return 0!=(n.Z&131072)}function ty(n){n=n.fb;null!==n&&(n.ja(),null!==n.Nb&&n.Nb.ja(),n.Cf())}function dn(n,t){var i=t.fb;return null!==i?dn(n,i):t instanceof y&&(i=t.Dd,null!==i)?dn(n,i):t}function iy(n,t,i){if(t===i||null===i)return!1;var r=t.fb;return null===r||r!==i&&!iy(n,r,i)?t instanceof y&&(t=t.Dd,null!==t)?iy(n,t,i):!1:!0}function tht(n,t,i){var r,u;return null===t||null===i?null:(r=t.fb,null===r)?null:t===i?r:(u=i.fb,null===u?null:r===u?u:iy(n,i,r)?r:iy(n,t,u)?u:tht(n,r,u))}function iht(n){return n.Wa()?(n=n.layer,null!==n&&n.Dc?!1:!0):!1}function fi(n){0===arguments.length?s.call(this,ta):s.call(this,n);this.Ne="Adornment";this.ob=null;this.Z&=-257;this.hh=new h(NaN,NaN);this.zi=new b(p);this.Nb=null}function y(n){0===arguments.length?s.call(this,ta):s.call(this,n);this.sc=new b(c);this.Ao=this.Yk=this.Br=this.Ar=null;this.rr=!0;this.Vs=!1;this.Qs=null;this.Eq=this.sr=!0;this.Fq=u.vH;this.Ad=this.Dh=null;this.ds=gn;this.fi=!1}function uht(n,t){null!==t&&(null===n.Dh&&(n.Dh=new it(ltt)),n.Dh.add(t))}function hh(n,t){if(null!==t){t.cs=null;var i=n.fb;null===i||i.xe||hh(i,i.tl(""))}}function cw(n,t,i){var f,u,r;hh(n,i);n.sc.contains(t)||(n.sc.add(t),f=n.OF,null!==f&&(u=!0,r=n.h,null!==r&&(u=r.Sa,r.Sa=!0),f(n,t,i),null!==r&&(r.Sa=u)),t.Ic&&(i=t.ca,t=t.fa,null!==i&&null!==t&&i!==t&&(f=!0,r=n.h,null!==r&&(f=r.vd),n=f?t:i,u=f?i:t,n.fi||(n.fi=u),!u.ri||null!==r&&r.ma.yb||(f?i===u&&(u.ri=!1):t===u&&(u.ri=!1)))))}function lw(n,t,i){var u,r,f;hh(n,i);n.sc.remove(t)&&(u=n.PF,r=n.h,null!==u&&(f=!0,null!==r&&(f=r.Sa,r.Sa=!0),u(n,t,i),null!==r&&(r.Sa=f)),t.Ic&&(i=!0,null!==r&&(i=r.vd),n=i?t.fa:t.ca,t=i?t.ca:t.fa,null!==n&&(n.fi=!1),null===t||t.ri||(0===t.sc.count?(t.fi=null,null!==r&&r.ma.yb||(t.ri=!0)):ry(t))))}function ry(n){var r,t,i;if(n.fi=!1,0!==n.sc.count&&(r=!0,t=n.h,null===t||!t.ma.yb)){for(null!==t&&(r=t.vd),t=n.sc.k;t.next();)if(i=t.value,i.Ic)if(r){if(i.ca===n){n.ri=!1;return}}else if(i.fa===n){n.ri=!1;return}n.ri=!0}}function ttt(n){null===n.Ad?n.Ad=new gt("string",f):n.Ad.clear();rw(n,n,function(n,t){var i=t.Ud;null!==i&&n.Ad.add(i,t)});0===n.Ad.count&&n.Ad.add("",n)}function fht(n,i,r){var u=i.Ud;if(null!==u&&(null!==n.Ad&&n.Ad.remove(u),i=n.h,null!==i&&r)){for(r=null,n=n.$E(u);n.next();)null===r&&(r=t.Hb()),r.push(n.value);if(null!==r){for(n=0;n<r.length;n++)i.remove(r[n]);t.Ca(r)}}}function itt(n,t,i,r,u){if(1<r)for(u=i?n.Qw():n.Cg();u.next();){var f=u.value;f.Ic&&(f=f.AA(n),null===f||f===n||t.contains(f)||(t.add(f),itt(f,t,i,r-1,f.Uc)))}else eht(n,t,i,u)}function eht(n,t,i,r){var f,u;for(n.Uc=!1,f=i?n.Qw():n.Cg();f.next();)u=f.value,r&&u.Uf(),u.Ic&&(u=u.AA(n),null===u||u===n||t.contains(u)||(t.add(u),r&&(u.na(),ty(u),u.sh(!1)),u.Uc&&(u.Hn=u.Uc,eht(u,t,i,u.Hn))))}function rtt(n,t,i,r,u,f,e){var s,o;for(n.Uc=!0,s=i?n.Qw():n.Cg();s.next();)o=s.value,o.Ic&&(u||(o.xg||o.hc(),o.updateAdornments()),o=o.AA(n),null!==o&&o!==n&&!t.contains(o)&&(t.add(o),u||(o.sh(!0),ty(o),vft(f,o,e)),2<r||o.Hn))&&(o.Hn=!1,rtt(o,t,i,r-1,o.Uc,f,e))}function c(){s.call(this,go);this.kg=null;this.Nh="";this.wg=this.cr=null;this.ci="";this.Ps=null;this.is=this.hs=this.gs=!1;this.tr=!0;this.zq=io;this.Mq=0;this.Pq=io;this.Qq=NaN;this.Bm=utt;this.Ds=.5;this.Vi=this.Ce=null;this.Bc=new b(h).freeze();this.No=this.De=null;this.xg=!1;this.Bz=null;this.Iz=!1;this.On=this.Hi=this.Ta=null;this.nf=0;this.$n=this.Wn=null;this.zi=new b(p);this.Mz=new h;this.OD=this.MD=null;this.Ey=!1;this.R=null}function uy(n){var t=n.ca,i=n.fa;null!==t&&null!==i?pht(n,t.cJ(i)):pht(n,null)}function pht(n,t){var i=n.Mk,u,f,r;i!==t&&(null!==i&&ptt(i,n),n.Mk=t,null!==t&&ytt(t,n),u=n.iA,null!==u&&(f=!0,r=n.h,null!==r&&(f=r.Sa,r.Sa=!0),u(n,i,t),null!==r&&(r.Sa=f)),n.xg&&(n.MD===i||n.OD===i)&&n.hc())}function wht(n,t){null===n.Ce&&(n.Ce=new it(y));n.Ce.add(t);n.ja()}function ett(n){0===n.Bc.count?n.xg=!1:(n.xg=!0,n.Wn=n.o(0).copy(),n.$n=n.o(n.ra-1).copy(),ctt(n,!1))}function ott(n,t){return Math.abs(t.x-n.x)>Math.abs(t.y-n.y)?(t.x=t.x>=n.x?n.x+9e9:n.x-9e9,t.y=n.y):(t.y=t.y>=n.y?n.y+9e9:n.y-9e9,t.x=n.x),t}function pw(n,t){var i=t.cs;return null===i&&(i=new ya,i.port=t,i.Jc=t.U,t.cs=i),dht(i,n)}function ww(n,t){if(null===t)return si;var i=n.vb;return i.Tc()&&(void 0===t&&(t=n.sd),null!==t&&(i=t.vb)),i===pr?pi:i}function bw(n,t){if(null===t)return si;var i=n.zb;return i.Tc()&&(void 0===t&&(t=n.Vd),null!==t&&(i=t.zb)),i===pr?pi:i}function kw(n){var t=n.up;return isNaN(t)&&(n=n.sd,null!==n&&(t=n.up)),isNaN(t)?0:t}function sa(n){var t=n.lq;return isNaN(t)&&(n=n.Vd,null!==n&&(t=n.lq)),isNaN(t)?0:t}function gat(n){var u,f,t,i,r;if(!n.qj||(u=n.points.n,f=u.length,4>f))return!1;for(n=wg(n.h,!0,n),t=1;t<f-2;t++)if(i=u[t],r=u[t+1],!ub(n,Math.min(i.x,r.x),Math.min(i.y,r.y),Math.abs(i.x-r.x),Math.abs(i.y-r.y)))return!0;return!1}function stt(n,t,i,r,u,f){var s=t.Vm,h=t.Um,c=ch(t,i,r),e=i,o=r;for(0===u?e+=s:90===u?o+=h:180===u?e-=s:o-=h;c>va&&ch(t,e,o)===c-tl;)i=e,r=o,0===u?e+=s:90===u?o+=h:180===u?e-=s:o-=h,c-=tl;f?c>va&&(180===u||0===u?i=Math.floor(i/s)*s+s/2:(90===u||270===u)&&(r=Math.floor(r/h)*h+h/2)):(i=Math.floor(i/s)*s+s/2,r=Math.floor(r/h)*h+h/2);c>va&&(f=u,e=i,o=r,0===u?(f=90,o+=h):90===u?(f=180,e-=s):180===u?(f=270,o-=h):270===u&&(f=0,e+=s),ch(t,e,o)===c-tl?stt(n,t,e,o,f,!1):(e=i,o=r,0===u?(f=270,o-=h):90===u?(f=0,e+=s):180===u?(f=90,o+=h):270===u&&(f=180,e-=s),ch(t,e,o)===c-tl&&stt(n,t,e,o,f,!1)));n.jl(i,r)}function dw(n,t,i,r){return(n=i-n,isNaN(n)||Infinity===n||-Infinity===n)?NaN:(0>n&&(n=-n),t=r-t,isNaN(t)||Infinity===t||-Infinity===t)?NaN:(0>t&&(t=-t),u.sb(n,0)?t:u.sb(t,0)?n:Math.sqrt(n*n+t*t))}function ha(n,t,i,r){var f=n.ra,u;2>f||(i?(u=n.o(1),i=u.x-r.x,r=u.y-r.y,u=dw(t.x,t.y,i,r),0!==u&&(f=2===f?.5*u:u,n=kw(n),n>f&&(n=f),i=n*(i-t.x)/u,n=n*(r-t.y)/u,t.x+=i,t.y+=n)):(u=n.o(f-2),i=u.x-r.x,r=u.y-r.y,u=dw(t.x,t.y,i,r),0!==u&&(f=2===f?.5*u:u,n=sa(n),n>f&&(n=f),i=n*(t.x-i)/u,n=n*(t.y-r)/u,t.x-=i,t.y-=n)))}function htt(n,t,i,r){for(var e,o=n.ra,f=t;u.sb(t.x,f.x)&&u.sb(t.y,f.y);){if(i>=o)return o-1;f=n.o(i++)}if(!u.sb(t.x,f.x)&&!u.sb(t.y,f.y))return i-1;for(e=f;u.sb(t.x,f.x)&&u.sb(f.x,e.x)&&(!r||(t.y>=f.y?f.y>=e.y:f.y<=e.y))||u.sb(t.y,f.y)&&u.sb(f.y,e.y)&&(!r||(t.x>=f.x?f.x>=e.x:f.x<=e.x));){if(i>=o)return o-1;e=n.o(i++)}return i-2}function ca(n,t,i,r,f,e,s){var p,a,h,y,c,l;if(!s&&nl(n)&&(s=[],p=0,n.Wa()&&(p=nvt(n,f,e,s)),y=f.x,y=f.y,0<p))if(u.I(f.y,e.y))if(f.x<e.x)for(a=0;a<p;){for(h=Math.max(f.x,Math.min(s[a++]-5,e.x-10)),t.lineTo(h+i,e.y+r),y=h+i,c=Math.min(h+10,e.x);a<p;)if(l=s[a],l<c+10)a++,c=Math.min(l+5,e.x);else break;l=(h+c)/2+i;l=e.y-10+r;h=c+i;c=e.y+r;n.Je===ys?v(t,h,c,!1,!1):o(t,y,l,h,l,h,c)}else for(a=p-1;0<=a;){for(h=Math.min(f.x,Math.max(s[a--]+5,e.x+10)),t.lineTo(h+i,e.y+r),y=h+i,c=Math.max(h-10,e.x);0<=a;)if(l=s[a],l>c-10)a--,c=Math.max(l-5,e.x);else break;l=e.y-10+r;h=c+i;c=e.y+r;n.Je===ys?v(t,h,c,!1,!1):o(t,y,l,h,l,h,c)}else if(u.I(f.x,e.x))if(f.y<e.y)for(a=0;a<p;){for(h=Math.max(f.y,Math.min(s[a++]-5,e.y-10)),t.lineTo(e.x+i,h+r),y=h+r,c=Math.min(h+10,e.y);a<p;)if(l=s[a],l<c+10)a++,c=Math.min(l+5,e.y);else break;l=e.x-10+i;h=e.x+i;c+=r;n.Je===ys?v(t,h,c,!1,!1):o(t,l,y,l,c,h,c)}else for(a=p-1;0<=a;){for(h=Math.min(f.y,Math.max(s[a--]+5,e.y+10)),t.lineTo(e.x+i,h+r),y=h+r,c=Math.max(h-10,e.y);0<=a;)if(l=s[a],l>c-10)a--,c=Math.max(l-5,e.y);else break;l=e.x-10+i;h=e.x+i;c+=r;n.Je===ys?v(t,h,c,!1,!1):o(t,l,y,l,c,h,c)}t.lineTo(e.x+i,e.y+r)}function nvt(n,t,i,r){var o=n.h,f,u,e;if(null===o||t.O(i))return 0;for(o=o.pn;o.next();)if(f=o.value,null!==f&&f.visible)for(var f=f.mb.n,h=f.length,s=0;s<h;s++){if(u=f[s],u===n)return 0<r.length&&r.sort(function(n,t){return n-t}),r.length;u instanceof c&&u.Wa()&&nl(u)&&(e=u.Ij(),e.P()&&n.Ij().Xf(e)&&!n.usesSamePort(u)&&(e=u.path,null!==e&&e.Cl()&&tvt(t,i,r,u)))}return 0<r.length&&r.sort(function(n,t){return n-t}),r.length}function tvt(n,i,r,f){for(var o,e,d=u.I(n.y,i.y),k=f.ra,s=f.o(0),v=t.N(),h=1;h<k;h++){o=f.o(h);h<k-1&&(e=f.o(h+1),s.y===o.y&&o.y===e.y?(o.x>s.x&&e.x>o.x||o.x<s.x&&e.x<o.x)&&(o=e,h++):s.x===o.x&&o.x===e.x&&(o.y>s.y&&e.y>o.y||o.y<s.y&&e.y<o.y)&&(o=e,h++));n:{var e=v,a=n.x,c=n.y,b=i.x,y=i.y,l=s.x,s=s.y,p=o.x,w=o.y;if(u.I(a,b)){if(!u.I(c,y)&&u.I(s,w)&&Math.min(c,y)<s&&Math.max(c,y)>s&&Math.min(l,p)<a&&Math.max(l,p)>a&&!u.I(l,p)){e.x=a;e.y=s;e=!0;break n}}else if(u.I(c,y)&&u.I(l,p)&&Math.min(a,b)<l&&Math.max(a,b)>l&&Math.min(s,w)<c&&Math.max(s,w)>c&&!u.I(s,w)){e.x=l;e.y=c;e=!0;break n}e.x=0;e.y=0;e=!1}e&&(d?r.push(v.x):r.push(v.y));s=o}t.B(v)}function nl(n){return n=n.Je,n===oa||n===ys}function ctt(n,t){if(t||nl(n)){var i=n.h;null===i||i.co.contains(n)||null===n.Bz||i.co.add(n,n.Bz)}}function gw(n,t){var e=n.layer,s,f,i,u;if(null!==e&&e.visible&&!e.Dc&&(f=e.h,null!==f))for(s=!1,f=f.pn;f.next();)if(i=f.value,i.visible)if(i===e)for(var s=!0,h=!1,i=i.mb.n,o=i.length,r=0;r<o;r++)u=i[r],u instanceof c&&(u===n?h=!0:h&&bht(n,u,t));else if(s)for(i=i.mb.n,o=i.length,r=0;r<o;r++)u=i[r],u instanceof c&&bht(n,u,t)}function bht(n,t,i){if(null!==t&&nl(t)&&null!==t.Ta){var r=t.Ij();r.P()&&(n.Ij().Xf(r)||i.Xf(r))&&(n.usesSamePort(t)||t.df())}}function la(n){var i=n.kg,u,e,o,t,r;if(null!==i&&(u=n.wg,null!==u)){e=n.Nh;o=n.ci;n:{if(null!==u&&null!==i.Dh)for(n=i.Dh.k;n.next();)if(t=n.value,t.Up===i&&t.Qt===u&&t.wx===e&&t.xx===o||t.Up===u&&t.Qt===i&&t.wx===o&&t.xx===e){n=t;break n}n=null}for(var s=t=null,h=i.sc.n,l=h.length,f=0;f<l;f++)r=h[f],(r.kg===i&&r.Nh===e&&r.wg===u&&r.ci===o||r.kg===u&&r.Nh===o&&r.wg===i&&r.ci===e)&&(null===s?s=r:(null===t&&(t=new b(c),t.add(s)),t.add(r)));if(null!==t)for(null===n&&(n=new ltt,n.Up=i,n.wx=e,n.Qt=u,n.xx=o,uht(i,n),uht(u,n)),n.links=t,f=0;f<t.count;f++)if(r=t.n[f],0===r.nf){for(i=1,u=0;u<t.count;u++)Math.abs(t.n[u].nf)===i&&(i++,u=-1);r.On=n;r.nf=r.ca===n.Up?i:-i;i=r.h;(null===i||i.rf)&&r.hc()}}}function aa(n){var t=n.On,i;if(null!==t)if(i=n.nf,n.On=null,n.nf=0,t.links.remove(n),2>t.links.count)1===t.links.count&&(i=t.links.n[0],i.On=null,i.nf=0,i.hc()),i=t.Up,null!==t&&null!==i.Dh&&i.Dh.remove(t),i=t.Qt,null!==t&&null!==i.Dh&&i.Dh.remove(t);else for(i=Math.abs(i),n=0==i%2,t=t.links.k;t.next();){var r=t.value,u=Math.abs(r.nf),f=0==u%2;u>i&&n===f&&(r.nf=0<r.nf?r.nf-2:r.nf+2,r.hc())}}function ltt(){t.Fc(this);this.links=this.xx=this.Qt=this.wx=this.Up=null}function ps(){t.Fc(this);this.group=null;this.Ap=!0;this.abort=!1;this.Pf=this.Of=1;this.Jr=this.Ir=-1;this.xd=this.Fd=8;this.rc=null;this.nH=!1;this.KG=22;this.KF=111}function tb(n,t,i){return n.Of<=t&&t<=n.Ir&&n.Pf<=i&&i<=n.Jr}function ch(n,t,i){return tb(n,t,i)?(t-=n.Of,t/=n.Fd,i-=n.Pf,i/=n.xd,n.rc[t|0][i|0]):0}function ib(n,t,i){tb(n,t,i)&&(t-=n.Of,t/=n.Fd,i-=n.Pf,i/=n.xd,n.rc[t|0][i|0]=nb)}function rb(n){var t,i;if(null!==n.rc)for(t=0;t<=n.Lm;t++)for(i=0;i<=n.Mm;i++)n.rc[t][i]>=va&&(n.rc[t][i]|=uc)}function ub(n,t,i,r,u){if(t>n.Ir||t+r<n.Of||i>n.Jr||i+u<n.Pf)return!0;t=(t-n.Of)/n.Fd|0;i=(i-n.Pf)/n.xd|0;r=Math.max(0,r)/n.Fd+1|0;var f=Math.max(0,u)/n.xd+1|0;if(0>t&&(r+=t,t=0),0>i&&(f+=i,i=0),0>r||0>f)return!0;for(u=Math.min(t+r-1,n.Lm)|0,r=Math.min(i+f-1,n.Mm)|0;t<=u;t++)for(f=i;f<=r;f++)if(n.rc[t][f]===nb)return!1;return!0}function so(n,t,i,r,u,f,e,o,s){var h,c,l;if(!(t<f||t>e||i<o||i>s)){if(h=t|0,c=i|0,l=n.rc[h][c],l>=va&&l<uc)for(u?c+=r:h+=r,l+=tl;f<=h&&h<=e&&o<=c&&c<=s&&!(l>=n.rc[h][c]);)n.rc[h][c]=l,l+=tl,u?c+=r:h+=r;if(h=u?c:h,u)if(0<r)for(i+=r;i<h;i+=r)so(n,t,i,1,!u,f,e,o,s),so(n,t,i,-1,!u,f,e,o,s);else for(i+=r;i>h;i+=r)so(n,t,i,1,!u,f,e,o,s),so(n,t,i,-1,!u,f,e,o,s);else if(0<r)for(t+=r;t<h;t+=r)so(n,t,i,1,!u,f,e,o,s),so(n,t,i,-1,!u,f,e,o,s);else for(t+=r;t>h;t+=r)so(n,t,i,1,!u,f,e,o,s),so(n,t,i,-1,!u,f,e,o,s)}}function kht(n,t,i,r,u,f,e,o,s,h,c){for(var l=t|0,a=i|0,v=n.rc[l][a];0===v&&l>o&&l<s&&a>h&&a<c;)if(e?a+=f:l+=f,v=n.rc[l][a],1>=Math.abs(l-r)&&1>=Math.abs(a-u))return n.abort=!0,0;for(l=t|0,a=i|0,v=n.rc[l][a],t=va,n.rc[l][a]=t;0===v&&l>o&&l<s&&a>h&&a<c;)e?a+=f:l+=f,v=n.rc[l][a],n.rc[l][a]=t,t+=tl;return e?a:l}function fb(n,t,i,r,u,f){var h,c,v;if(null!==n.rc&&(n.abort=!1,h=t.x,c=t.y,tb(n,h,c))){var h=h-n.Of,h=h/n.Fd,c=c-n.Pf,c=c/n.xd,l=r.x,a=r.y;if(tb(n,l,a))if(l-=n.Of,l/=n.Fd,a-=n.Pf,a/=n.xd,1>=Math.abs(h-l)&&1>=Math.abs(c-a))n.abort=!0;else{v=f.x;t=f.y;r=f.x+f.width;var s=f.y+f.height,v=v-n.Of,v=v/n.Fd;t-=n.Pf;t/=n.xd;r-=n.Of;r/=n.Fd;s-=n.Pf;s/=n.xd;f=Math.max(0,Math.min(n.Lm,v|0));r=Math.min(n.Lm,Math.max(0,r|0));t=Math.max(0,Math.min(n.Mm,t|0));var s=Math.min(n.Mm,Math.max(0,s|0)),h=h|0,c=c|0,l=l|0,a=a|0,v=h,y=c,e=0===i||90===i?1:-1;if((i=90===i||270===i)?y=kht(n,h,c,l,a,e,i,f,r,t,s):v=kht(n,h,c,l,a,e,i,f,r,t,s),!n.abort){n:{i=0===u||90===u?1:-1;u=90===u||270===u;for(var e=l|0,o=a|0,p=n.rc[e][o];0===p&&e>f&&e<r&&o>t&&o<s;)if(u?o+=i:e+=i,p=n.rc[e][o],1>=Math.abs(e-h)&&1>=Math.abs(o-c)){n.abort=!0;break n}for(e=l|0,o=a|0,p=n.rc[e][o],n.rc[e][o]=att;0===p&&e>f&&e<r&&o>t&&o<s;)u?o+=i:e+=i,p=n.rc[e][o],n.rc[e][o]=att}n.abort||(so(n,v,y,1,!1,f,r,t,s),so(n,v,y,-1,!1,f,r,t,s),so(n,v,y,1,!0,f,r,t,s),so(n,v,y,-1,!0,f,r,t,s))}}}}function ya(){t.Fc(this);this.port=this.Jc=null;this.Mg=[];this.Tp=!1}function ivt(n,i,r,u){i=i.offsetY;switch(i){case t.Wc:return 90;case t.Mc:return 180;case t.gd:return 270;case t.Xc:return 0}switch(i){case t.Wc|t.gd:return 180<r?270:90;case t.Mc|t.Xc:return 90<r&&270>=r?180:0}n=180*Math.atan2(n.height,n.width)/Math.PI;switch(i){case t.Mc|t.gd:return r>n&&r<=180+n?180:270;case t.gd|t.Xc:return r>180-n&&r<=360-n?270:0;case t.Xc|t.Wc:return r>n&&r<=180+n?90:0;case t.Wc|t.Mc:return r>180-n&&r<=360-n?180:90;case t.Mc|t.gd|t.Xc:return 90<r&&r<=180+n?180:r>180+n&&r<=360-n?270:0;case t.gd|t.Xc|t.Wc:return 180<r&&r<=360-n?270:r>n&&180>=r?90:0;case t.Xc|t.Wc|t.Mc:return r>n&&r<=180-n?90:r>180-n&&270>=r?180:0;case t.Wc|t.Mc|t.gd:return r>180-n&&r<=180+n?180:r>180+n?270:90}return u&&i!==(t.Mc|t.gd|t.Xc|t.Wc)&&(r-=15,0>r&&(r+=360)),r>n&&r<180-n?90:r>=180-n&&r<=180+n?180:r>180+n&&r<360-n?270:0}function dht(n,i){var nt=n.Mg,s,v,l,y,it,tt,p,a,d;if(0===nt.length){n:if(!n.Tp){if(nt=n.Tp,n.Tp=!0,v=null,l=n.Jc,l instanceof g&&!l.xe){if(!l.pa.P()){n.Tp=nt;break n}v=l;s=v.ZE()}else s=n.Jc.$E();var u=n.Mg.length=0,h=n.port.wb(hr,t.N()),e=n.port.wb(cu,t.N()),l=t.wk(h.x,h.y,0,0);for(l.xj(e),t.B(h),t.B(e),h=t.qc(l.x+l.width/2,l.y+l.height/2),s=s.k;s.next();)if(e=s.value,e.Wa()){var r=pi,o=e.sd===n.port||e.ca.Al(v),r=o?ww(e,n.port):bw(e,n.port);if(r.Ep()&&(o=o?e.Vd:e.sd,null!==o)&&(y=o.U,null!==y)){var o=e.computeOtherPoint(y,o),y=h.mj(o),r=ivt(l,r,y,e.pc),w;0===r?(w=t.Xc,180<y&&(y-=360)):w=90===r?t.Wc:180===r?t.Mc:t.gd;(r=n.Mg[u])?(r.link=e,r.angle=y,r.je=w):(r=new vtt(e,y,w),n.Mg[u]=r);r.vx.set(o);u++}}for(t.B(h),n.Mg.sort(ya.prototype.OJ),v=n.Mg.length,h=-1,u=s=0;u<v;u++)r=n.Mg[u],null!==r&&(r.je!==h&&(h=r.je,s=0),r.yp=s,s++);for(h=-1,s=0,u=v-1;0<=u;u--)r=n.Mg[u],null!==r&&(r.je!==h&&(h=r.je,s=r.yp+1),r.$m=s);if(u=n.Mg,o=n.port,v=n.Jc.$J,h=t.N(),s=t.N(),e=t.N(),r=t.N(),o.wb(hr,h),o.wb(tp,s),o.wb(cu,e),o.wb(ip,r),it=w=y=o=0,v===ntt)for(tt=0;tt<u.length;tt++)if(p=u[tt],null!==p){a=p.link.computeThickness();switch(p.je){case t.Wc:w+=a;break;case t.Mc:it+=a;break;case t.gd:o+=a;break;default:case t.Xc:y+=a}}for(var ut=0,f,c,b=0,rt=c=0,k=1,tt=0;tt<u.length;tt++)if(p=u[tt],null!==p){if(ut!=p.je){ut=p.je;switch(ut){case t.Wc:f=e;c=r;break;case t.Mc:f=r;c=h;break;case t.gd:f=h;c=s;break;default:case t.Xc:f=s;c=e}b=c.x-f.x;c=c.y-f.y;switch(ut){case t.Wc:w>Math.abs(b)?(k=Math.abs(b)/w,w=Math.abs(b)):k=1;break;case t.Mc:it>Math.abs(c)?(k=Math.abs(c)/it,it=Math.abs(c)):k=1;break;case t.gd:o>Math.abs(b)?(k=Math.abs(b)/o,o=Math.abs(b)):k=1;break;default:case t.Xc:y>Math.abs(c)?(k=Math.abs(c)/y,y=Math.abs(c)):k=1}rt=0}if(d=p.Kp,v===ntt){a=p.link.computeThickness();a*=k;d.set(f);switch(ut){case t.Wc:d.x=f.x+b/2+w/2-rt-a/2;break;case t.Mc:d.y=f.y+c/2+it/2-rt-a/2;break;case t.gd:d.x=f.x+b/2-o/2+rt+a/2;break;default:case t.Xc:d.y=f.y+c/2-y/2+rt+a/2}rt+=a}else a=.5,v===gn&&(a=(p.yp+1)/(p.$m+1)),d.x=f.x+b*a,d.y=f.y+c*a}for(t.B(h),t.B(s),t.B(e),t.B(r),f=n.Mg,u=0;u<f.length;u++)v=f[u],null!==v&&(v.Ow=n.computeEndSegmentLength(v));n.Tp=nt;t.oc(l)}nt=n.Mg}for(l=0;l<nt.length;l++)if(f=nt[l],null!==f&&f.link===i)return f;return null}function vtt(n,t,i){this.link=n;this.angle=t;this.je=i;this.vx=new h;this.$m=this.yp=0;this.Kp=new h;this.Ow=0}function g(n){0===arguments.length?y.call(this,ta):y.call(this,n);this.Lr=new it(s);this.um=new it(g);this.al=this.Mr=this.Kr=null;this.Ts=!1;this.pr=!0;this.Us=!1;this.Nb=this.Hs=null;this.Iq=!1;this.Jq=!0;this.Kq=!1;this.Yd=new ti;this.Yd.group=this}function ytt(n,t){var i,u,r;n.Lr.add(t)&&(t instanceof g&&n.um.add(t),i=n.VF,null!==i&&(u=!0,r=n.h,null!==r&&(u=r.Sa,r.Sa=!0),i(n,t),null!==r&&(r.Sa=u)));i=n.Nb;null===i&&(i=n);i.ja()}function ptt(n,t){var i,u,r;n.Lr.remove(t)&&(t instanceof g&&n.um.remove(t),i=n.WF,null!==i&&(u=!0,r=n.h,null!==r&&(u=r.Sa,r.Sa=!0),i(n,t),null!==r&&(r.Sa=u)));i=n.Nb;null===i&&(i=n);i.ja()}function wtt(n,t){var r,i;for(n.xe=!1,r=n.Vc;r.next();)if(i=r.value,i.sh(!1),i instanceof g&&(i.Qx=i.xe,wtt(i,t)),i instanceof y)i.Cf(t);else if(i instanceof c)for(i=i.sj;i.next();)i.value.Cf(t)}function ght(n,t,i,r){for(n.xe=!0,n=n.Vc;n.next();){var u=n.value;if(u.ja(),u.sh(!0),u instanceof g&&u.Qx&&ght(u,t,i,r),u instanceof y)u.Cf(t),vft(i,u,r);else if(u instanceof c)for(u=u.sj;u.next();)u.value.Cf(t)}}function or(){f.call(this);this.Te=u.tq;this.qs=new p(NaN,NaN,NaN,NaN)}function ti(){0<arguments.length&&t.fd(ti);t.Fc(this);this.iz=this.W=null;this.kr=this.mr=!0;this.ur=this.wo=!1;this.Bq=new h(0,0).freeze();this.nz=!0;this.xz=null;this.nr=!0}function fc(n,t,i,r,u,f,e,o){for(i=i.k;i.next();){var s=i.value;r&&!s.Fp||u&&!u(s)||s.canLayout()&&(f&&s instanceof y?s.ni||(s instanceof g&&null===s.ic?fc(n,t,s.Vc,!1,u,f,e,o):t.add(s)):e&&s instanceof c?t.add(s):!o||!s.Rd()||s instanceof y||t.add(s))}}function ei(){t.Fc(this);this.Yd=null;this.clear()}function il(n,i){r&&null!==i&&t.l(i,ti,ei,"setLayout");n.Yd=i}function nct(n,t){if(null===t)return!1;var i=n.vertexes.remove(t);return i&&(n.aB.remove(t.Jc),t.network=null),i}function btt(n,t){null!==t&&n.edges.remove(t)&&(n.PA.remove(t.link),t.network=null)}function rvt(n){for(var i,r=t.Hb(),u=n.edges.k;u.next();)i=u.value,null!==i.fromVertex&&null!==i.toVertex||r.push(i);for(u=r.length,i=0;i<u;i++)n.kp(r[i]);t.Ca(r)}function ktt(n,t,i){var u,r;if(null!==i&&i.network!==t){for(nct(n,i),t.kl(i),u=i.xc;u.next();)r=u.value,r.network!==t&&(btt(n,r),t.Wo(r),ktt(n,t,r.fromVertex));for(u=i.nc;u.next();)r=u.value,r.network!==t&&(btt(n,r),t.Wo(r),ktt(n,t,r.toVertex))}}function vt(){t.Fc(this);this.network=null;this.V=new p(0,0,10,10).freeze();this.Q=new h(5,5).freeze();this.clear()}function rr(){t.Fc(this);this.network=null;this.clear()}function ui(){0<arguments.length&&t.fd(ui);ti.call(this);this.Gt=!0;this.Ws=this.Xs=NaN;this.Dj=new st(NaN,NaN).freeze();this.Zh=new st(10,10).freeze();this.Ae=fy;this.hd=ob;this.Yh=ey;this.Gh=tct}function pt(){0<arguments.length&&t.fd(pt);ti.call(this);this.$y=this.fo=this.Hd=0;this.Xq=360;this.Zy=re;this.Ok=0;this.EC=re;this.Ju=this.zg=this.WD=0;this.kw=new nit;this.Mu=this.ym=0;this.JH=600;this.es=NaN;this.Dq=1;this.Gs=0;this.Js=360;this.hd=re;this.ua=ru;this.Yh=wa;this.Gh=dtt;this.Zh=6;this.Xr=wb}function oy(n,t,i,r,u){var l=n.Xq,h=n.Hd,o,f;for(n=n.zg,r=r*Math.PI/180,i=i*Math.PI/180,o=t.length,f=0;f<o;f++){var s=r+(u===ru?f*i/(360<=l?o:o-1):-(f*i)/o),c=t.wa(f),e=h*Math.tan(s)/n,e=Math.sqrt((h*h+n*n*e*e)/(1+e*e));c.Ia=e*Math.cos(s);c.Ua=e*Math.sin(s);c.actualAngle=180*s/Math.PI}}function sy(n,t,i,r){var s=n.Hd,h=n.zg,c=n.Ok,e,f;for(i=i*Math.PI/180,e=t.length,f=0;f<e;f++){var u=t.wa(f),o=t.wa(f===e-1?0:f+1),l=h*Math.sin(i);u.Ia=s*Math.cos(i);u.Ua=l;u.actualAngle=180*i/Math.PI;isNaN(u.diameter)&&vh(u,0);isNaN(o.diameter)&&vh(o,0);u=lb(n,s,h,r===ru?i:-i,(u.diameter+o.diameter)/2+c);i+=r===ru?u:-u}}function hy(n,t,i,r){var e=n.Hd,o=n.zg,h=n.Ju,s,f,u;for(i=i*Math.PI/180,s=t.length,f=0;f<s;f++)u=t.wa(f),u.Ia=e*Math.cos(i),u.Ua=o*Math.sin(i),u.actualAngle=180*i/Math.PI,u=lb(n,e,o,r===ru?i:-i,h),i+=r===ru?u:-u}function ict(n,t,i,r,u){var f=n.Mu,f=n.Xq;if(n.ym=0,n.kw=new nit,360>i){for(f=r+(u===ru?f:-f);0>f;)f+=360;f%=360;180<f&&(f-=360);f*=Math.PI/180;n.Mu=f;uct(n,t,i,r,u)}else rct(n,t,i,r,u);n.kw.commit(t)}function rct(n,t,i,r,u){var o=n.Hd,e=n.Ok,v=n.fo,s=o*Math.cos(r*Math.PI/180),h=n.zg*Math.sin(r*Math.PI/180),f=t.Pe(),c;if(3===f.length)f[0].Ia=o,f[0].Ua=0,f[1].Ia=f[0].Ia-f[0].width/2-f[1].width/2-e,f[1].y=f[0].y,f[2].Ia=(f[0].Ia+f[1].Ia)/2,f[2].y=f[0].y-f[2].height-e;else if(4===f.length)f[0].Ia=o,f[0].Ua=0,f[2].Ia=-f[0].Ia,f[2].Ua=f[0].Ua,f[1].Ia=0,f[1].y=Math.min(f[0].y,f[2].y)-f[1].height-e,f[3].Ia=0,f[3].y=Math.max(f[0].y+f[0].height+e,f[2].y+f[2].height+e);else{for(o=0;o<f.length;o++){if(f[o].Ia=s,f[o].Ua=h,o>=f.length-1)break;c=fct(n,s,h,f,o,u);c[0]||(c=ect(n,s,h,f,o,u));s=c[1];h=c[2]}if(n.ym++,!(23<n.ym)){var s=f[0].Ia,h=f[0].Ua,o=f[f.length-1].Ia,c=f[f.length-1].Ua,l=Math.abs(s-o)-((f[0].width+f[f.length-1].width)/2+e),a=Math.abs(h-c)-((f[0].height+f[f.length-1].height)/2+e),e=0;if(1>Math.abs(a)?Math.abs(s-o)<(f[0].width+f[f.length-1].width)/2&&(e=0):e=0<a?a:1>Math.abs(l)?0:l,l=!1,l=Math.abs(o)>Math.abs(c)?0<o!=h>c:0<c!=s<o,(l=u===ru?l:!l)&&(e=-Math.abs(e),e=Math.min(e,-f[f.length-1].width),e=Math.min(e,-f[f.length-1].height)),s=n.kw,0<e&&0>s.vp||Math.abs(e)<Math.abs(s.vp)&&!(0>e&&0<s.vp))for(s.vp=e,s.In=[],s.nq=[],h=0;h<f.length;h++)s.In[h]=f[h].Tb.x,s.nq[h]=f[h].Tb.y;1<Math.abs(e)&&(n.Hd=8>n.ym?n.Hd-e/(2*Math.PI):5>f.length&&10<e?n.Hd/2:n.Hd-(0<e?1.7:-2.3),n.zg=n.Hd*v,rct(n,t,i,r,u))}}}function uct(n,t,i,r,u){for(var l,s=n.Hd,e=n.zg,a=n.fo,f=s*Math.cos(r*Math.PI/180),c=e*Math.sin(r*Math.PI/180),o=t.Pe(),h=0;h<o.length;h++){if(o[h].Ia=f,o[h].Ua=c,h>=o.length-1)break;l=fct(n,f,c,o,h,u);l[0]||(l=ect(n,f,c,o,h,u));f=l[1];c=l[2]}if(n.ym++,!(23<n.ym)){if(f=Math.atan2(c,f),f=u===ru?n.Mu-f:f-n.Mu,f=Math.abs(f)<Math.abs(f-2*Math.PI)?f:f-2*Math.PI,s=f*(s+e)/2,e=n.kw,Math.abs(s)<Math.abs(e.vp))for(e.vp=s,e.In=[],e.nq=[],f=0;f<o.length;f++)e.In[f]=o[f].Tb.x,e.nq[f]=o[f].Tb.y;1<Math.abs(s)&&(n.Hd=8>n.ym?n.Hd-s/(2*Math.PI):n.Hd-(0<s?1.7:-2.3),n.zg=n.Hd*a,uct(n,t,i,r,u))}}function fct(n,t,i,r,u,f){var s=n.Hd,c=n.zg,e=0,o=0,h;if(n=(r[u].width+r[u+1].width)/2+n.Ok,h=!1,0<=i!=(f===ru)){if(e=t+n,e>s){if(e=t-n,e<-s)return t=[!1],t[1]=e,t[2]=o,t;h=!0}}else if(e=t-n,e<-s){if(e=t+n,e>s)return t=[!1],t[1]=e,t[2]=o,t;h=!0}return o=Math.sqrt(1-Math.min(1,e*e/(s*s)))*c,0>i!==h&&(o=-o),t=Math.abs(i-o)>(r[u].height+r[u+1].height)/2?[!1]:[!0],t[1]=e,t[2]=o,t}function ect(n,t,i,r,u,f){var c=n.Hd,s=n.zg,o=0,e=0,h;if(n=(r[u].height+r[u+1].height)/2+n.Ok,h=!1,0<=t!=(f===ru)){if(e=i-n,e<-s){if(e=i+n,e>s)return t=[!1],t[1]=o,t[2]=e,t;h=!0}}else if(e=i+n,e>s){if(e=i-n,e<-s)return t=[!1],t[1]=o,t[2]=e,t;h=!0}return o=Math.sqrt(1-Math.min(1,e*e/(s*s)))*c,0>t!==h&&(o=-o),t=Math.abs(t-o)>(r[u].width+r[u+1].width)/2?[!1]:[!0],t[1]=o,t[2]=e,t}function nit(){this.vp=-Infinity;this.nq=this.In=null}function tit(n,t,i,r,u){var f=n.JH,h,o,s,e;if(.001>Math.abs(n.fo-1))return void 0!==r&&void 0!==u?u*t:2*Math.PI*t;for(n=t>i?Math.sqrt(t*t-i*i)/t:Math.sqrt(i*i-t*t)/i,e=0,h=void 0!==r&&void 0!==u?u/(f+1):Math.PI/(2*(f+1)),o=0;o<=f;o++)s=Math.sin(void 0!==r&&void 0!==u?r+o*u/f:o*Math.PI/(2*f)),e=e+Math.sqrt(1-n*n*s*s)*h;return void 0!==r&&void 0!==u?(t>i?t:i)*e:4*(t>i?t:i)*e}function cb(n,t,i,r,u){return n=void 0!==r&&void 0!==u?tit(n,1,i,r,u):tit(n,1,i),t/n}function lb(n,t,i,r,u){var o,e,s,f;if(.001>Math.abs(n.fo-1))return u/t;for(o=t>i?Math.sqrt(t*t-i*i)/t:Math.sqrt(i*i-t*t)/i,f=0,n=2*Math.PI/(700*n.network.vertexes.count),t>i&&(r+=Math.PI/2),e=0;;e++)if(s=Math.sin(r+e*n),f=f+(t>i?t:i)*Math.sqrt(1-o*o*s*s)*n,f>=u)return e*n;return 0}function cy(){ei.call(this)}function ho(){vt.call(this);this.actualAngle=this.diameter=NaN}function vh(n,t){var i=n.network,r;if(null===i)return NaN;if(i=i.ic,null===i)return NaN;if(i.We===ve)if(i.Rt===oc)n.diameter=Math.max(n.width,n.height);else{if(i=Math.abs(Math.sin(t)),r=Math.abs(Math.cos(t)),0===i)return n.width;if(0===r)return n.height;n.diameter=Math.min(n.height/i,n.width/r)}else n.diameter=i.Rt===oc?Math.max(n.width,n.height):Math.sqrt(n.width*n.width+n.height*n.height);return n.diameter}function iit(){rr.call(this)}function yt(){0<arguments.length&&t.fd(yt);ti.call(this);this.yg=null;this.wr=0;this.gg=new st(100,100).freeze();this.Cq=!1;this.Xh=!0;this.Fh=!1;this.Fo=100;this.Zq=1;this.Rh=1e3;this.Zn=.05;this.Yn=50;this.Vn=150;this.Xn=0;this.Tq=10;this.Sq=5}function uvt(n,i,u){return r&&(t.q(i,yt,"computeClusterLayoutIterations:level"),t.q(u,yt,"computeClusterLayoutIterations:maxiter")),Math.max(Math.min(n.network.vertexes.count,u*(i+1)/11),10)}function oct(n,i,u){var o,f,e;if(r&&(t.q(i,yt,"layoutClusters:level"),t.q(u,yt,"layoutClusters:maxiter")),fvt(n,i)){for(o=n.Rh,n.Rh*=1+1/(i+1),f=evt(n,i),e=Math.max(0,uvt(n,i,u)),n.tx+=e,oct(n,i+1,u),cct(n,e),ovt(n,f,i),u=n.yg,null===u?u=new b(is):u.clear(),u.Ue(f.vertexes),u.sort(function(n,t){return null===n||null===t||n===t?0:t.$f-n.$f}),f=u.k;f.next();)svt(n,f.value,i);n.Rh=o}}function fvt(n,i){var u,f;if(r&&t.q(i,yt,"hasClusters:level"),10<i||3>n.network.vertexes.count)return!1;for(null===n.yg?n.yg=new b(is):n.yg.clear(),n.yg.Ue(n.network.vertexes),u=n.yg,u.sort(function(n,t){return null===n||null===t||n===t?0:t.$f-n.$f}),f=u.count-1;0<=f&&1>=u.n[f].$f;)f--;return 1<u.count-f}function evt(n,i){var e,s,c,f,o,y;r&&t.q(i,yt,"pushSubNetwork:level");for(var g=n.network,l=new sc,k=n.yg.k;k.next();)if(e=k.value,1<e.$f)l.kl(e),s={UB:e.$f,WB:e.width,TB:e.height,qH:e.Q.x,rH:e.Q.y},null===e.wh&&(e.wh=new b),e.wh.add(s),e.rB=e.wh.count-1;else break;for(c=g.edges.k;c.next();)f=c.value,f.fromVertex.network===l&&f.toVertex.network===l?l.Wo(f):f.fromVertex.network===l?(o=f.fromVertex.Xm,null===o&&(o=new b(is),f.fromVertex.Xm=o),o.add(f.toVertex),f.fromVertex.$f--,f.fromVertex.tk+=f.toVertex.tk):f.toVertex.network===l&&(o=f.toVertex.Xm,null===o&&(o=new b(is),f.toVertex.Xm=o),o.add(f.fromVertex),f.toVertex.$f--,f.toVertex.tk+=f.fromVertex.tk);for(c=l.edges.k;c.next();)f=c.value,f.length*=Math.max(1,u.sqrt((f.fromVertex.tk+f.toVertex.tk)/(4*i+1)));for(k=l.vertexes.k;k.next();)if(e=k.value,o=e.Xm,null!==o&&0<o.count&&(s=e.wh.n[e.wh.count-1],s=s.UB-e.$f,!(0>=s))){for(var a=0,d=0,w=o.count-s;w<o.count;w++){for(var v=o.n[w],f=null,c=v.edges.k;c.next();)if(y=c.value,y.gJ(v)===e){f=y;break}null!==f&&(d+=f.length,a+=v.width*v.height)}o=e.Ia;c=e.Ua;f=e.width;w=e.height;v=e.Q;y=f*w;1>y&&(y=1);a=u.sqrt((a+y+d*d*4/(s*s))/y);s=(a-1)*f/2;a=(a-1)*w/2;e.Tb=new p(o-v.x-s,c-v.y-a,f+2*s,w+2*a);e.focus=new h(v.x+s,v.y+a)}return n.network=l,g}function ovt(n,i,u){var f,e,o,s;for(r&&(t.l(i,sc,yt,"popNetwork:oldnet"),t.q(u,yt,"popNetwork:level")),u=n.network.vertexes.k;u.next();)f=u.value,f.network=i,null!==f.wh&&(e=f.wh.n[f.rB],f.$f=e.UB,o=e.qH,s=e.rH,f.Tb=new p(f.Ia-o,f.Ua-s,e.WB,e.TB),f.focus=new h(o,s),f.rB--);for(u=n.network.edges.k;u.next();)u.value.network=i;n.network=i}function svt(n,i,f){var s,o;if(r&&(t.l(i,is,yt,"surroundNode:oldnet"),t.q(f,yt,"surroundNode:level")),s=i.Xm,null!==s&&0!==s.count){f=i.Ia;var p=i.Ua,v=i.width,h=i.height;null!==i.wh&&0<i.wh.count&&(h=i.wh.n[0],v=h.WB,h=h.TB);for(var v=u.sqrt(v*v+h*h)/2,c=!1,e=h=0,l=0,a=i.vertexes.k;a.next();)o=a.value,1>=o.$f?e++:(c=!0,l++,h+=Math.atan2(i.Ua-o.Ua,i.Ia-o.Ia));if(0!==e)for(0<l&&(h/=l),l=i=0,i=c?2*Math.PI/(e+1):2*Math.PI/e,0==e%2&&(l=i/2),1<s.count&&s.sort(function(n,t){return null===n||null===t||n===t?0:t.width*t.height-n.width*n.height}),c=0==e%2?0:1,a=s.k;a.next();)if(o=a.value,!(1<o.$f||n.isFixed(o))){for(s=null,e=o.edges.k;e.next();){s=e.value;break}var e=o.width,y=o.height,e=u.sqrt(e*e+y*y)/2,s=v+s.length+e,e=h+(i*(c/2>>1)+l)*(0==c%2?1:-1);o.Ia=f+s*Math.cos(e);o.Ua=p+s*Math.sin(e);c++}}}function sct(n,t,i,r,u,f,e){var l=9e19,a=-1,s=0;n:for(;s<t;s++){var h=n[s],c=h.x-i,o=h.y-r,c=c*c+o*o;if(c<l){for(o=s-1;0<=o;o--)if(n[o].y>h.y&&n[o].x-h.x<u+e.width)continue n;for(o=s+1;o<t;o++)if(n[o].x>h.x&&n[o].y-h.y<f+e.height)continue n;a=s;l=c}}return a}function hct(n,i){r&&(t.l(n,is,yt,"getNodeDistance:vertexA"),t.l(i,is,yt,"getNodeDistance:vertexB"));var s=n.V,e=s.x,f=s.y,l=s.width,s=s.height,h=i.V,c=h.x,o=h.y,a=h.width,h=h.height;return e+l<c?f>o+h?(e=e+l-c,f=f-o-h,u.sqrt(e*e+f*f)):f+s<o?(e=e+l-c,f=f+s-o,u.sqrt(e*e+f*f)):c-(e+l):e>c+a?f>o+h?(e=e-c-a,f=f-o-h,u.sqrt(e*e+f*f)):f+s<o?(e=e-c-a,f=f+s-o,u.sqrt(e*e+f*f)):e-(c+a):f>o+h?f-(o+h):f+s<o?o-(f+s):.1}function cct(n,i){r&&t.q(i,yt,"performIterations:num");n.yg=null;for(var u=n.wr+i;n.wr<u&&(n.wr++,hvt(n)););n.yg=null}function hvt(n){var c,e,t,a;if(null===n.yg&&(n.yg=new b(is),n.yg.Ue(n.network.vertexes)),c=n.yg.n,0>=c.length)return!1;e=c[0];e.forceX=0;e.forceY=0;for(var u=e.Ia,i=u,o=e.Ua,h=o,e=1;e<c.length;e++){t=c[e];t.forceX=0;t.forceY=0;var s=t.Ia,t=t.Ua,u=Math.min(u,s),i=Math.max(i,s),o=Math.min(o,t),h=Math.max(h,t)}(o=i-u>h-o)?c.sort(function(n,t){return null===n||null===t||n===t?0:n.Ia-t.Ia}):c.sort(function(n,t){return null===n||null===t||n===t?0:n.Ua-t.Ua});for(var h=n.Rh,y=0,f=0,r=0,e=0;e<c.length;e++){var t=c[e],s=t.V,v=t.Q,u=s.x+v.x,s=s.y+v.y,f=t.charge*n.electricalFieldX(u,s),r=t.charge*n.electricalFieldY(u,s),f=f+t.mass*n.gravitationalFieldX(u,s),r=r+t.mass*n.gravitationalFieldY(u,s);for(t.forceX+=f,t.forceY+=r,v=e+1;v<c.length;v++)if(i=c[v],i!==t){var f=i.V,l=i.Q,r=f.x+l.x,l=f.y+l.y;if(u-r>h||r-u>h){if(o)break}else if(s-l>h||l-s>h){if(!o)break}else a=hct(t,i),1>a?(u>r?(f=Math.abs(i.V.right-t.V.x),f=(1+f)*Math.random()):u<r?(f=Math.abs(i.V.x-t.V.right),f=-(1+f)*Math.random()):(f=Math.max(i.width,t.width),f=(1+f)*Math.random()-f/2),s>l?(r=Math.abs(i.V.bottom-t.V.y),r=(1+r)*Math.random()):u<r?(r=Math.abs(i.V.y-t.V.bottom),r=-(1+r)*Math.random()):(r=Math.max(i.height,t.height),r=(1+r)*Math.random()-r/2)):(y=-(t.charge*i.charge)/(a*a),f=(r-u)/a*y,r=(l-s)/a*y),t.forceX+=f,t.forceY+=r,i.forceX-=f,i.forceY-=r}}for(e=n.network.edges.k;e.next();)o=e.value,t=o.fromVertex,i=o.toVertex,s=t.V,v=t.Q,u=s.x+v.x,s=s.y+v.y,f=i.V,l=i.Q,r=f.x+l.x,l=f.y+l.y,a=hct(t,i),1>a?(f=(u>r?1:-1)*(1+(i.width>t.width)?i.width:t.width)*Math.random(),r=(s>l?1:-1)*(1+(i.height>t.height)?i.height:t.height)*Math.random()):(y=o.stiffness*(a-o.length),f=(r-u)/a*y,r=(l-s)/a*y),t.forceX+=f,t.forceY+=r,i.forceX-=f,i.forceY-=r;for(e=0,u=Math.max(n.Rh/20,50),i=0;i<c.length;i++)t=c[i],n.isFixed(t)?n.moveFixedVertex(t):(o=t.forceX,h=t.forceY,o<-u?o=-u:o>u&&(o=u),h<-u?h=-u:h>u&&(h=u),t.Ia+=o,t.Ua+=h,e=Math.max(e,o*o+h*h));return e>n.sA*n.sA}function sc(){ei.call(this)}function is(){vt.call(this);this.isFixed=!1;this.mass=this.charge=NaN;this.tk=this.$f=this.forceY=this.forceX=0;this.wh=this.Xm=null;this.rB=0}function rit(){rr.call(this);this.length=this.stiffness=NaN}function nt(){0<arguments.length&&t.fd(nt);ti.call(this);this.Gd=this.om=25;this.ua=0;this.Un=gb;this.Do=nk;this.ro=tk;this.lm=4;this.Mn=ik;this.Ti=bit;this.Xh=!0;this.Mj=4;this.Mb=this.rv=this.qb=-1;this.Nf=this.Nr=0;this.Sb=this.Mf=this.og=this.dh=this.Xd=null;this.Ur=0;this.Av=this.tm=null;this.pg=0;this.Vr=null;this.ih=[];this.ih.length=100}function uit(n){var t=n.fromVertex.yd;return n=n.toVertex.yd,null===t&&null===n?8:null===t||null===n?4:1}function eu(n){null===n.tm&&(n.tm=[]);for(var t=0,r=n.network.vertexes.k,i;r.next();)i=r.value,n.tm[t]=i.layer,t++,n.tm[t]=i.column,t++,n.tm[t]=i.index,t++;return n.tm}function cf(n,t){for(var i=0,u=n.network.vertexes.k,r;u.next();)r=u.value,r.layer=t[i],i++,r.column=t[i],i++,r.index=t[i],i++}function lct(n,i,u){var p,b,d,y,a,h,o,s,l,f,v,e,c,w,k,g,tt;for(r&&(t.q(i,nt,"crossingMatrix:unfixedLayer"),t.q(u,nt,"crossingMatrix:direction")),p=yh(n,i),b=n.Xd[i],n.Av||(n.Av=[]),d=n.Av,a=0;a<b;a++){if(y=0,h=p[a],o=h.near,null!==o&&o.layer===h.layer)if(h=o.index,h>a)for(l=a+1;l<h;l++)s=p[l],s.near===o&&s.Sm===o.Sm||y++;else for(l=a-1;l>h;l--)s=p[l],s.near===o&&s.Sm===o.Sm||y++;if(0<=u)for(h=p[a].lf,o=0;o<h.count;o++)if(f=h.n[o],f.valid&&f.fromVertex.layer!==i)for(s=f.fromVertex.index,l=f.portToPos,f=f.portFromPos,v=o+1;v<h.count;v++)e=h.n[v],e.valid&&e.fromVertex.layer!==i&&(c=e.fromVertex.index,w=e.portToPos,e=e.portFromPos,l<w&&(s>c||s===c&&f>e)&&y++,w<l&&(c>s||c===s&&e>f)&&y++);if(0>=u)for(h=p[a].Ze,o=0;o<h.count;o++)if(f=h.n[o],f.valid&&f.toVertex.layer!==i)for(s=f.toVertex.index,l=f.portToPos,f=f.portFromPos,v=o+1;v<h.count;v++)e=h.n[v],e.valid&&e.toVertex.layer!==i&&(c=e.toVertex.index,w=e.portToPos,e=e.portFromPos,f<e&&(s>c||s===c&&l>w)&&y++,e<f&&(c>s||c===s&&w>l)&&y++);for(d[a*b+a]=y,h=a+1;h<b;h++){if(g=0,tt=0,0<=u)for(y=p[a].lf,k=p[h].lf,o=0;o<y.count;o++)if(f=y.n[o],f.valid&&f.fromVertex.layer!==i)for(s=f.fromVertex.index,f=f.portFromPos,v=0;v<k.count;v++)e=k.n[v],e.valid&&e.fromVertex.layer!==i&&(c=e.fromVertex.index,e=e.portFromPos,(s<c||s===c&&f<e)&&tt++,(c<s||c===s&&e<f)&&g++);if(0>=u)for(y=p[a].Ze,k=p[h].Ze,o=0;o<y.count;o++)if(f=y.n[o],f.valid&&f.toVertex.layer!==i)for(s=f.toVertex.index,l=f.portToPos,v=0;v<k.count;v++)e=k.n[v],e.valid&&e.toVertex.layer!==i&&(c=e.toVertex.index,w=e.portToPos,(s<c||s===c&&l<w)&&tt++,(c<s||c===s&&w<l)&&g++);d[a*b+h]=g;d[h*b+a]=tt}}return ph(n,i,p),d}function bb(n){for(var u,t,l,a,f,e=0,i=0;i<=n.qb;i++){for(var o=n,r=i,h=yh(o,r),v=o.Xd[r],c=0,s=void 0,s=0;s<v;s++)if(u=h[s].Ze,"undefined"!=typeof u)for(f=0;f<u.count;f++)t=u.n[f],t.valid&&t.toVertex.layer!==r&&(l=t.fromVertex.column+t.portFromColOffset,a=t.toVertex.column+t.portToColOffset,c+=(Math.abs(l-a)+1)*uit(t));ph(o,r,h);e+=c}return e}function fit(n,i,u){var o,h,f,a;r&&(t.q(i,nt,"barycenters:unfixedLayer"),t.q(u,nt,"barycenters:direction"));for(var v=yh(n,i),p=n.Xd[i],y=[],s=0;s<p;s++){f=v[s];o=null;0>=u&&(o=f.lf);h=null;0<=u&&(h=f.Ze);var l=0,c=0,e=f.near;if(null!==e&&e.layer===f.layer&&(l+=e.column-1,c++),null!==o)for(e=0;e<o.count;e++)f=o.n[e],a=f.fromVertex,f.valid&&!f.rev&&a.layer!==i&&(l+=a.column+f.portFromColOffset,c++);if(null!==h)for(o=0;o<h.count;o++)f=h.n[o],e=f.toVertex,f.valid&&!f.rev&&e.layer!==i&&(l+=e.column+f.portToColOffset,c++);y[s]=0===c?-1:l/c}return ph(n,i,v),y}function act(n,i,u){var o,s,f,v;r&&(t.q(i,nt,"medians:unfixedLayer"),t.q(u,nt,"medians:direction"));for(var y=yh(n,i),p=n.Xd[i],a=[],l=0;l<p;l++){f=y[l];o=null;0>=u&&(o=f.lf);s=null;0<=u&&(s=f.Ze);var h=0,c=[],e=f.near;if(null!==e&&e.layer===f.layer&&(c[h]=e.column-1,h++),null!==o)for(e=0;e<o.count;e++)f=o.n[e],v=f.fromVertex,f.valid&&!f.rev&&v.layer!==i&&(c[h]=v.column+f.portFromColOffset,h++);if(null!==s)for(o=0;o<s.count;o++)f=s.n[o],e=f.toVertex,f.valid&&!f.rev&&e.layer!==i&&(c[h]=e.column+f.portToColOffset,h++);0===h?a[l]=-1:(c.sort(function(n,t){return n-t}),s=h>>1,a[l]=h&1?c[s]:c[s-1]+c[s]>>1)}return ph(n,i,y),a}function ly(n,t,i,r,u,f){var s,h,e,o;if(t.component===r){if(t.component=i,u)for(e=t.nc;e.next();)o=e.value.toVertex,s=t.layer-o.layer,h=n.linkMinLength(e.value),s===h&&ly(n,o,i,r,u,f);if(f)for(e=t.xc;e.next();)o=e.value.fromVertex,s=o.layer-t.layer,h=n.linkMinLength(e.value),s===h&&ly(n,o,i,r,u,f)}}function eit(n,t,i,r,u,f){if(t.component===r){if(t.component=i,u)for(var e=t.nc,o;e.next();)o=e.value.toVertex,eit(n,o,i,r,u,f);if(f)for(t=t.xc;t.next();)e=t.value.fromVertex,eit(n,e,i,r,u,f)}}function cvt(n){for(n=n.vertexes.k;n.next();){var t=n.value;if(t.valid)return t}return null}function vct(n){var t,i,r;for(n=n.vertexes.k;n.next();)if(t=n.value,t.valid){for(i=!0,r=t.nc;r.next();)if(r.value.toVertex.valid){i=!1;break}if(i)return t}return null}function yct(n){var t,i,r;for(n=n.vertexes.k;n.next();)if(t=n.value,t.valid){for(i=!0,r=t.xc;r.next();)if(r.value.fromVertex.valid){i=!1;break}if(i)return t}return null}function oit(n,t){var i,r,u;for(t.lp=n.Ur,n.Ur++,i=t.nc;i.next();)r=i.value,u=r.toVertex,-1===u.lp&&(r.forest=!0,oit(n,u));t.finish=n.Ur;n.Ur++}function pct(n){for(var i,t=n.network.vertexes.k;t.next();)i=wct(n,t.value),n.qb=Math.max(i,n.qb)}function wct(n,t){var i=0,r;if(-1===t.layer){for(r=t.nc;r.next();)var u=r.value,f=n.linkMinLength(u),i=Math.max(i,wct(n,u.toVertex)+f);t.layer=i}else i=t.layer;return i}function bct(n,t){var i=0,f,r,u;if(-1===t.layer){for(u=t.xc;u.next();)r=u.value,f=n.linkMinLength(r),i=Math.max(i,bct(n,r.fromVertex)+f);t.layer=i}else i=t.layer;return i}function kct(n,t){var u,i,s,c;if(!t.valid){for(t.valid=!0,u=t.nc;u.next();)kct(n,u.value.toVertex);for(u=n.network.vertexes.k;u.next();)u.value.component=-1;for(var a=t.lf.n,f=a.length,r=0;r<f;r++)i=a[r],s=n.linkMinLength(i),i.fromVertex.layer-i.toVertex.layer>s&&ly(n,i.fromVertex,0,-1,!0,!1);for(ly(n,t,1,-1,!0,!0);0!==t.component;){for(var s=0,a=Infinity,p=0,h=null,y=n.network.vertexes.k;y.next();)if(c=y.value,1===c.component){for(var v=0,o=!1,e=c.lf.n,f=e.length,r=0;r<f;r++){var i=e[r],l=i.fromVertex,v=v+1;1!==l.component&&(s+=1,l=l.layer-c.layer,i=n.linkMinLength(i),a=Math.min(a,l-i))}for(i=c.Ze.n,f=i.length,r=0;r<f;r++)e=i[r].toVertex,v-=1,1!==e.component?s-=1:o=!0;(null===h||v<p)&&!o&&(h=c,p=v)}if(0<s){for(u.reset();u.next();)f=u.value,1===f.component&&(f.layer+=a);t.component=0}else h.component=0}for(u=n.network.vertexes.k;u.next();)u.value.component=-1;for(ly(n,t,1,-1,!0,!1);0!==t.component;){for(r=0,f=Infinity,a=0,s=null,p=n.network.vertexes.k;p.next();)if(h=p.value,1===h.component){for(y=0,c=!1,i=h.lf.n,v=i.length,o=0;o<v;o++)e=i[o].fromVertex,y+=1,1!==e.component?r+=1:c=!0;for(i=h.Ze.n,v=i.length,o=0;o<v;o++)e=i[o],l=e.toVertex,y-=1,1!==l.component&&(r-=1,l=h.layer-l.layer,e=n.linkMinLength(e),f=Math.min(f,l-e));(null===s||y>a)&&!c&&(s=h,a=y)}if(0>r){for(u.reset();u.next();)r=u.value,1===r.component&&(r.layer-=f);t.component=0}else s.component=0}}}function dct(n,t,i){return 90===n.ua?i&&!t.rev||!i&&t.rev?270:90:180===n.ua?i&&!t.rev||!i&&t.rev?0:180:270===n.ua?i&&!t.rev||!i&&t.rev?90:270:i&&!t.rev||!i&&t.rev?180:0}function gct(n,t){var r=t.layer,u,i,f,e;for(t.index=n.Xd[r],n.Xd[r]++,r=t.Ze.Pe(),u=!0;u;)for(u=!1,i=0;i<r.length-1;i++)f=r[i],e=r[i+1],f.portFromColOffset>e.portFromColOffset&&(u=!0,r[i]=e,r[i+1]=f);for(i=0;i<r.length;i++)u=r[i],u.valid&&(u=u.toVertex,-1===u.index&&gct(n,u))}function nlt(n,t){var r=t.layer,u,i,f,e;for(t.index=n.Xd[r],n.Xd[r]++,r=t.lf.Pe(),u=!0;u;)for(u=!1,i=0;i<r.length-1;i++)f=r[i],e=r[i+1],f.portToColOffset>e.portToColOffset&&(u=!0,r[i]=e,r[i+1]=f);for(i=0;i<r.length;i++)u=r[i],u.valid&&(u=u.fromVertex,-1===u.index&&nlt(n,u))}function kb(n,i,u){var h,e;r&&(t.q(i,nt,"medianBarycenterCrossingReduction:unfixedLayer"),t.q(u,nt,"medianBarycenterCrossingReduction:direction"));var o=yh(n,i),c=n.Xd[i],f=act(n,i,u),s=fit(n,i,u);for(u=0;u<c;u++)-1===s[u]&&(s[u]=o[u].column),-1===f[u]&&(f[u]=o[u].column);for(h=!0;h;)for(h=!1,u=0;u<c-1;u++)(f[u+1]<f[u]||f[u+1]===f[u]&&s[u+1]<s[u])&&(h=!0,e=f[u],f[u]=f[u+1],f[u+1]=e,e=s[u],s[u]=s[u+1],s[u+1]=e,e=o[u],o[u]=o[u+1],o[u+1]=e);for(u=f=0;u<c;u++)e=o[u],e.index=u,f+=n.nodeMinColumnSpace(e,!0),e.column=f,f+=1,f+=n.nodeMinColumnSpace(e,!1);ph(n,i,o)}function ue(n,t,i){var e=yh(n,t),c=n.Xd[t],r,l,a,b,v;for(i=lct(n,t,i),l=[],r=0;r<c;r++)l[r]=-1;for(a=[],r=0;r<c;r++)a[r]=-1;for(b=!1,v=!0;v;)for(v=!1,r=0;r<c-1;r++){var y=i[e[r].index*c+e[r+1].index],it=i[e[r+1].index*c+e[r].index],s=0,h=0,k=e[r].column,d=e[r+1].column,p=n.nodeMinColumnSpace(e[r],!0),w=n.nodeMinColumnSpace(e[r],!1),u=n.nodeMinColumnSpace(e[r+1],!0),f=n.nodeMinColumnSpace(e[r+1],!1),p=k-p+u,w=d-w+f,o=e[r].xc.k;for(o.reset();o.next();)if(f=o.value,f.valid&&f.fromVertex.layer===t){for(f=f.fromVertex,u=0;e[u]!==f;)u++;u<r&&(s+=2*(r-u),h+=2*(r+1-u));u===r+1&&(s+=1);u>r+1&&(s+=4*(u-r),h+=4*(u-(r+1)))}for(o=e[r].nc.k,o.reset();o.next();)if(f=o.value,f.valid&&f.toVertex.layer===t){for(f=f.toVertex,u=0;e[u]!==f;)u++;u===r+1&&(h+=1)}for(o=e[r+1].xc.k,o.reset();o.next();)if(f=o.value,f.valid&&f.fromVertex.layer===t){for(f=f.fromVertex,u=0;e[u]!==f;)u++;u<r&&(s+=2*(r+1-u),h+=2*(r-u));u===r&&(h+=1);u>r+1&&(s+=4*(u-(r+1)),h+=4*(u-r))}for(o=e[r+1].nc.k,o.reset();o.next();)if(f=o.value,f.valid&&f.toVertex.layer===t){for(f=f.toVertex,u=0;e[u]!==f;)u++;u===r&&(s+=1)}var u=f=0,o=l[e[r].index],g=a[e[r].index],nt=l[e[r+1].index],tt=a[e[r+1].index];-1!==o&&(f+=Math.abs(o-k),u+=Math.abs(o-w));-1!==g&&(f+=Math.abs(g-k),u+=Math.abs(g-w));-1!==nt&&(f+=Math.abs(nt-d),u+=Math.abs(nt-p));-1!==tt&&(f+=Math.abs(tt-d),u+=Math.abs(tt-p));(h<s-.5||h===s&&it<y-.5||h===s&&it===y&&u<f-.5)&&(v=b=!0,e[r].column=w,e[r+1].column=p,y=e[r],e[r]=e[r+1],e[r+1]=y)}for(r=0;r<c;r++)e[r].index=r;return ph(n,t,e),b}function ba(n,i,u){r&&(t.q(i,nt,"bendStraighten:unfixedLayer"),t.q(u,nt,"bendStraighten:direction"));for(var f=!1;lvt(n,i,u);)f=!0;return f}function lvt(n,i,u){var tt,k,w,l;r&&(t.q(i,nt,"shiftbendStraighten:unfixedLayer"),t.q(u,nt,"shiftbendStraighten:direction"));var e,o=yh(n,i),b=n.Xd[i],it=fit(n,i,-1);if(0<u)for(e=0;e<b;e++)it[e]=-1;if(tt=fit(n,i,1),0>u)for(e=0;e<b;e++)tt[e]=-1;for(k=!1,w=!0;w;)for(w=!1,e=0;e<b;e++){var a=o[e].column,v=n.nodeMinColumnSpace(o[e],!0),y=n.nodeMinColumnSpace(o[e],!1),v=0>e-1||a-o[e-1].column-1>v+n.nodeMinColumnSpace(o[e-1],!1)?a-1:a,y=e+1>=b||o[e+1].column-a-1>y+n.nodeMinColumnSpace(o[e+1],!0)?a+1:a,p=0,d=0,g=0,f,s,h,c;if(0>=u)for(l=o[e].xc.k;l.next();)f=l.value,f.valid&&f.fromVertex.layer!==i&&(s=uit(f),h=f.portFromColOffset,c=f.portToColOffset,f=f.fromVertex.column,p+=(Math.abs(a+c-(f+h))+1)*s,d+=(Math.abs(v+c-(f+h))+1)*s,g+=(Math.abs(y+c-(f+h))+1)*s);if(0<=u)for(l=o[e].nc.k;l.next();)f=l.value,f.valid&&f.toVertex.layer!==i&&(s=uit(f),h=f.portFromColOffset,c=f.portToColOffset,f=f.toVertex.column,p+=(Math.abs(a+h-(f+c))+1)*s,d+=(Math.abs(v+h-(f+c))+1)*s,g+=(Math.abs(y+h-(f+c))+1)*s);c=h=s=0;f=it[o[e].index];l=tt[o[e].index];-1!==f&&(s+=Math.abs(f-a),h+=Math.abs(f-v),c+=Math.abs(f-y));-1!==l&&(s+=Math.abs(l-a),h+=Math.abs(l-v),c+=Math.abs(l-y));(d<p||d===p&&h<s)&&(w=k=!0,o[e].column=v);(g<p||g===p&&c<s)&&(w=k=!0,o[e].column=y)}return ph(n,i,o),n.normalize(),k}function sit(n,i,u){r&&(t.q(i,nt,"medianStraighten:unfixedLayer"),t.q(u,nt,"medianStraighten:direction"));var f=yh(n,i),a=n.Xd[i],v=act(n,i,u),c=[];for(u=0;u<a;u++)c[u]=v[u];for(v=!0;v;)for(v=!1,u=0;u<a;u++){var l=f[u].column,o=n.nodeMinColumnSpace(f[u],!0),s=n.nodeMinColumnSpace(f[u],!1),h=0,e;-1===c[u]?0===u&&u===a-1?h=l:0===u?(e=f[u+1].column,h=e-l===s+n.nodeMinColumnSpace(f[u+1],!0)?l-1:l):u===a-1?(e=f[u-1].column,h=l-e===o+n.nodeMinColumnSpace(f[u-1],!1)?l+1:l):(e=f[u-1].column,o=e+n.nodeMinColumnSpace(f[u-1],!1)+o+1,e=f[u+1].column,s=e-n.nodeMinColumnSpace(f[u+1],!0)-s-1,h=(o+s)/2|0):0===u&&u===a-1?h=c[u]:0===u?(e=f[u+1].column,s=e-n.nodeMinColumnSpace(f[u+1],!0)-s-1,h=Math.min(c[u],s)):u===a-1?(e=f[u-1].column,o=e+n.nodeMinColumnSpace(f[u-1],!1)+o+1,h=Math.max(c[u],o)):(e=f[u-1].column,o=e+n.nodeMinColumnSpace(f[u-1],!1)+o+1,e=f[u+1].column,s=e-n.nodeMinColumnSpace(f[u+1],!0)-s-1,o<c[u]&&c[u]<s?h=c[u]:o>=c[u]?h=o:s<=c[u]&&(h=s));h!==l&&(v=!0,f[u].column=h)}ph(n,i,f);n.normalize()}function avt(n,i){var o,f,u,e,s;for(r&&(t.q(i,nt,"packAux:column"),t.q(1,nt,"packAux:direction")),o=!0,f=n.network.vertexes.k;f.next();)if(u=f.value,e=n.nodeMinColumnSpace(u,!0),s=n.nodeMinColumnSpace(u,!1),u.column-e<=i&&u.column+s>=i){o=!1;break}if(e=!1,o)for(f.reset();f.next();)u=f.value,u.column>i&&(u.column-=1,e=!0);return e}function vvt(n,i){var e,f,c;r&&(t.q(i,nt,"tightPackAux:column"),t.q(1,nt,"tightPackAux:direction"));for(var o=i,o=i+1,s=[],h=[],u=0;u<=n.qb;u++)s[u]=!1,h[u]=!1;for(e=n.network.vertexes.k;e.next();)u=e.value,f=u.column-n.nodeMinColumnSpace(u,!0),c=u.column+n.nodeMinColumnSpace(u,!1),f<=i&&c>=i&&(s[u.layer]=!0),f<=o&&c>=o&&(h[u.layer]=!0);for(f=!0,o=!1,u=0;u<=n.qb;u++)f=f&&!(s[u]&&h[u]);if(f)for(e.reset();e.next();)u=e.value,u.column>i&&(u.column-=1,o=!0);return o}function tlt(n,i){var u,o,f,s,e;for(r&&t.q(i,nt,"componentPack:direction"),u=0;u<=n.Mb;u++)for(;avt(n,u););for(n.normalize(),u=0;u<n.Mb;u++)for(;vvt(n,u););if(n.normalize(),0<i)for(u=0;u<=n.Mb;u++)for(o=eu(n),f=bb(n),s=f+1;f<s;)s=f,ilt(n,u,1),e=bb(n),e>f?cf(n,o):e<f&&(f=e,o=eu(n));if(0>i)for(u=n.Mb;0<=u;u--)for(o=eu(n),f=bb(n),s=f+1;f<s;)s=f,ilt(n,u,-1),e=bb(n),e>f?cf(n,o):e<f&&(f=e,o=eu(n));n.normalize()}function ilt(n,t,i){var u,r,f;for(n.pg=0,u=n.network.vertexes.k;u.next();)u.value.component=-1;if(0<i)for(u.reset();u.next();)r=u.value,r.column-n.nodeMinColumnSpace(r,!0)<=t&&(r.component=n.pg);if(0>i)for(u.reset();u.next();)r=u.value,r.column+n.nodeMinColumnSpace(r,!1)>=t&&(r.component=n.pg);for(n.pg++,u.reset();u.next();)r=u.value,-1===r.component&&(eit(n,r,n.pg,-1,!0,!0),n.pg++);for(t=[],r=0;r<n.pg*n.pg;r++)t[r]=!1;for(f=[],r=0;r<(n.qb+1)*(n.Mb+1);r++)f[r]=-1;for(u.reset();u.next();){r=u.value;for(var o=r.layer,e=Math.max(0,r.column-n.nodeMinColumnSpace(r,!0)),s=Math.min(n.Mb,r.column+n.nodeMinColumnSpace(r,!1));e<=s;e++)f[o*(n.Mb+1)+e]=r.component}for(r=0;r<=n.qb;r++){if(0<i)for(e=0;e<n.Mb;e++)-1!==f[r*(n.Mb+1)+e]&&-1!==f[r*(n.Mb+1)+e+1]&&f[r*(n.Mb+1)+e]!==f[r*(n.Mb+1)+e+1]&&(t[f[r*(n.Mb+1)+e]*n.pg+f[r*(n.Mb+1)+e+1]]=!0);if(0>i)for(e=n.Mb;0<e;e--)-1!==f[r*(n.Mb+1)+e]&&-1!==f[r*(n.Mb+1)+e-1]&&f[r*(n.Mb+1)+e]!==f[r*(n.Mb+1)+e-1]&&(t[f[r*(n.Mb+1)+e]*n.pg+f[r*(n.Mb+1)+e-1]]=!0)}for(f=[],r=0;r<n.pg;r++)f[r]=!0;for(o=new b("number"),o.add(0);0!==o.count;)if(s=o.n[o.count-1],o.wd(o.count-1),f[s])for(f[s]=!1,r=0;r<n.pg;r++)t[s*n.pg+r]&&o.Pd(0,r);if(0<i)for(u.reset();u.next();)r=u.value,f[r.component]&&(r.column-=1);if(0>i)for(u.reset();u.next();)r=u.value,f[r.component]&&(r.column+=1)}function db(n,t){return 270===n.ua?t?pf:bf:90===n.ua?t?bf:pf:180===n.ua?t?wf:lu:t?lu:wf}function rs(){this.index=this.be=this.He=this.he=this.gb=this.layer=0;this.link=null;this.wi=0}function rlt(n,i,u,f){return r&&(t.q(n,nt,"isUnoccupied2:px"),t.q(i,nt,"isUnoccupied2:py"),t.q(u,nt,"isUnoccupied2:qx"),t.q(f,nt,"isUnoccupied2:qy")),!0}function yh(n,t){var u,r=n.Xd[t],i,f;if(r>=n.ih.length){for(u=[],i=0;i<n.ih.length;i++)u[i]=n.ih[i];n.ih=u}for("undefined"==typeof n.ih[r]||null===n.ih[r]?u=[]:(u=n.ih[r],n.ih[r]=null),r=n.Vr[t],i=0;i<r.length;i++)f=r[i],f instanceof rk&&(u[f.index]=f);return u}function ph(n,t,i){n.ih[n.Xd[t]]=i}function ka(){ei.call(this)}function rk(){vt.call(this);this.index=this.column=this.layer=-1;this.component=NaN;this.near=null;this.valid=!1;this.finish=this.lp=NaN;this.Sm=0;this.ZA=this.$A=void 0}function kit(){rr.call(this);this.forest=this.rev=this.valid=!1;this.portToPos=this.portFromPos=NaN;this.portToColOffset=this.portFromColOffset=0}function l(){0<arguments.length&&t.fd(l);ti.call(this);this.bd=new it(Object);this.Vi=ok;this.Lf=co;this.Rs=ak;this.nv=ort;this.cC=null;this.Fh=!0;this.hd=vk;this.gg=new st(10,10).freeze();this.ya=new oi;this.xa=new oi}function ay(n,t,i,r){var u,f;for(i=i.k;i.next();)u=i.value,u instanceof y&&u.canLayout()&&"Comment"!==u.cd&&(!r||u.Fp)&&(u.ni||(u instanceof g&&null===u.ic?ay(n,t,u.Vc,!1):t.Xo(u)));for(i.reset();i.next();)(u=i.value,u instanceof c&&u.canLayout()&&"Comment"!==u.cd&&(!r||u.Fp))&&(f=u.ca,n=u.fa,null!==f&&null!==n&&f!==n&&"Comment"!==f.cd&&"Comment"!==n.cd&&(f=t.findGroupVertex(f),n=t.findGroupVertex(n),null!==f&&null!==n&&t.sn(f,n,u)))}function elt(n,i){var f,e,u;if(r&&t.l(i,oi,l,"walkTree:v"),null!==i){switch(n.Lf){case co:if(0<i.nc.count){for(f=new b(oi),e=i.NI;e.next();)u=e.value,olt(n,i,u)&&f.add(u);0<f.count&&(i.children=f.Pe())}break;case ul:if(0<i.xc.count){for(f=new b(oi),e=i.nK;e.next();)u=e.value,olt(n,i,u)&&f.add(u);0<f.count&&(i.children=f.Pe())}break;default:t.m("Unhandled path value"+n.Lf.toString())}for(var f=i.children,e=f.length,o=0;o<e;o++)u=f[o],u.initialized=!0,u.level=i.level+1,u.parent=i,n.bd.remove(u);for(o=0;o<e;o++)u=f[o],elt(n,u)}}function olt(n,i,u){if(r&&t.l(i,oi,l,"walkOK:v"),r&&t.l(u,oi,l,"walkOK:c"),u.initialized){var f;if(r&&t.l(u,oi,l,"isAncestor:a"),r&&t.l(i,oi,l,"isAncestor:b"),null===i)f=!1;else{for(f=i.parent;null!==f&&f!==u;)f=f.parent;f=f===u}if(f||u.level>i.level)return!1;n.removeChild(u.parent,u)}return!0}function slt(n,i){var u;if(r&&t.l(i,oi,l,"initializeTree:v"),null!==i){n.initializeTreeVertexValues(i);i.alignment===vo&&n.sortTreeVertexChildren(i);for(var s=0,f=i.Wm,e=0,h=i.children,c=h.length,o=0;o<c;o++)u=h[o],slt(n,u),s+=u.descendantCount+1,f=Math.max(f,u.maxChildrenCount),e=Math.max(e,u.maxGenerationCount);i.descendantCount=s;i.maxChildrenCount=f;i.maxGenerationCount=0<f?e+1:0}}function yvt(n,i){var u;r&&t.l(i,oi,l,"mom:v");switch(n.Rs){default:case ak:return null!==i.parent?i.parent:n.ya;case frt:return null===i.parent?n.ya:null===i.parent.parent?n.xa:i.parent;case urt:if(null!==i.parent)return null!==i.parent.parent?i.parent.parent:n.xa;case rrt:if(u=!0,0===i.Wm)u=!1;else for(var e=i.children,o=e.length,f=0;f<o;f++)if(0<e[f].Wm){u=!1;break}return u&&null!==i.parent?n.xa:null!==i.parent?i.parent:n.ya}}function hlt(n,i){if(r&&t.l(i,oi,l,"assignTree:v"),null!==i){n.assignTreeVertexValues(i);for(var f=i.children,e=f.length,u=0;u<e;u++)hlt(n,f[u])}}function clt(n,i){if(r&&t.l(i,oi,l,"sortTree:v"),null!==i){i.alignment!==vo&&n.sortTreeVertexChildren(i);for(var f=i.children,e=f.length,u=0;u<e;u++)clt(n,f[u])}}function wh(n){return n===gs||n===vo||n===nh||n===fs}function vy(n){return n===gs||n===vo}function dit(n){var u,i;if(r&&t.l(n,oi,l,"isLeftSideBus:v"),u=n.parent,null!==u&&(i=u.alignment,wh(i))){if(vy(i)){for(u=u.children,i=0;i<u.length&&n!==u[i];)i++;return 0==i%2}if(i===nh)return!0}return!1}function llt(n,i){var tt,f,s;if(r&&t.l(i,oi,l,"layoutTreeNone:v"),0===i.Wm){var nt=!1,c=0,o=us;null!==i.parent&&(c=i.parent.angle,o=i.parent.alignment,nt=wh(o));o=dit(i);i.qa.p(0,0);i.eb.p(i.width,i.height);null===i.parent||null===i.comments||(180!==c&&270!==c||nt)&&!o?i.Na.p(0,0):180===c&&!nt||(90===c||270===c)&&o?i.Na.p(i.width-2*i.Q.x,0):i.Na.p(0,i.height-2*i.Q.y)}else{for(var nt=ye(i),c=90===nt||270===nt,tt=0,o=i.children,v=o.length,h=0;h<v;h++)f=o[h],tt=Math.max(tt,c?f.eb.width:f.eb.height);var p=i.alignment,ht=p===lo,y=p===ao,ct=wh(p),w=Math.max(0,i.breadthLimit),rt=da(i),d=i.nodeSpacing,g=ds(i),at=ht||y?0:g/2,ft=i.rowSpacing,a=0;(ht||y||i.aq||i.bq&&1===i.maxGenerationCount)&&(a=Math.max(0,i.rowIndent));var ht=i.width,vt=i.height,e=0,u=0,lt=0,b=0,k=0,ot=0,it=0,st=0,et=0,ut=0;if(ct&&!vy(p)&&135<nt&&o.reverse(),vy(p))if(1<v)for(h=0;h<v;h++)f=o[h],s=f.eb,0==h%2&&h!==v-1?et=Math.max(et,(c?s.width:s.height)+bs(f)-d):0!=h%2&&(ut=Math.max(ut,(c?s.width:s.height)+bs(f)-d));else 1===v&&(et=c?o[0].eb.width:o[0].eb.height);if(ct)switch(p){case gs:case vo:u=135>nt?alt(i,o,et,e,u):vlt(i,o,et,e,u);et=u[0];e=u[1];u=u[2];break;case nh:for(h=0;h<v;h++)f=o[h],s=f.eb,w=0===it?0:ft,c?(f.qa.p(tt-s.width,k+w),e=Math.max(e,s.width),u=Math.max(u,k+w+s.height),k+=w+s.height):(f.qa.p(b+w,tt-s.height),e=Math.max(e,b+w+s.width),u=Math.max(u,s.height),b+=w+s.width),it++;break;case fs:for(tt=0;tt<v;tt++)f=o[tt],s=f.eb,w=0===it?0:ft,c?(f.qa.p(d/2+i.Q.x,k+w),e=Math.max(e,s.width),u=Math.max(u,k+w+s.height),k+=w+s.height):(f.qa.p(b+w,d/2+i.Q.y),e=Math.max(e,b+w+s.width),u=Math.max(u,s.height),b+=w+s.width),it++}else for(h=0;h<v;h++)f=o[h],s=f.eb,c?(0<w&&0<it&&b+d+s.width>w&&(b<tt&&hc(i,p,tt-b,0,st,h-1),ot++,it=0,st=h,lt=u,b=0,k=135<nt?-u-ft:u+ft),ut=0===it?at:d,fk(n,f,0,k),f.qa.p(b+ut,k),e=Math.max(e,b+ut+s.width),u=Math.max(u,lt+(0===ot?0:ft)+s.height),b+=ut+s.width):(0<w&&0<it&&k+d+s.height>w&&(k<tt&&hc(i,p,0,tt-k,st,h-1),ot++,it=0,st=h,lt=e,k=0,b=135<nt?-e-ft:e+ft),ut=0===it?at:d,fk(n,f,b,0),f.qa.p(b,k+ut),u=Math.max(u,k+ut+s.height),e=Math.max(e,lt+(0===ot?0:ft)+s.width),k+=ut+s.height),it++;0<ot&&(c?(u+=Math.max(0,rt),b<e&&hc(i,p,e-b,0,st,v-1),0<a&&(y||rl(i,a,0,0,v-1),e+=a)):(e+=Math.max(0,rt),k<u&&hc(i,p,0,u-k,st,v-1),0<a&&(y||rl(i,0,a,0,v-1),u+=a)));a=y=0;switch(p){case ga:c?y+=e/2-i.Q.x-g/2:a+=u/2-i.Q.y-g/2;break;case us:0<ot?c?y+=e/2-i.Q.x-g/2:a+=u/2-i.Q.y-g/2:c?(p=o[0].qa.x+o[0].Na.x,d=o[v-1].qa.x+o[v-1].Na.x+2*o[v-1].Q.x,y+=p+(d-p)/2-i.Q.x-g/2):(p=o[0].qa.y+o[0].Na.y,d=o[v-1].qa.y+o[v-1].Na.y+2*o[v-1].Q.y,a+=p+(d-p)/2-i.Q.y-g/2);break;case lo:c?(y-=g,e+=g):(a-=g,u+=g);break;case ao:c?(y+=e-i.width+g,e+=g):(a+=u-i.height+g,u+=g);break;case gs:case vo:c?y=1<v?y+(et+d/2-i.Q.x):y+(o[0].Q.x-i.Q.x+o[0].Na.x):a=1<v?a+(et+d/2-i.Q.y):a+(o[0].Q.y-i.Q.y+o[0].Na.y);break;case nh:c?y+=e+d/2-i.Q.x:a+=u+d/2-i.Q.y;break;case fs:break;default:t.m("Unhandled alignment value "+p.toString())}for(h=0;h<v;h++)f=o[h],c?f.qa.p(f.qa.x+f.Na.x-y,f.qa.y+(135<nt?(ct?-u:-f.eb.height)+f.Na.y-rt:vt+rt+f.Na.y)):f.qa.p(f.qa.x+(135<nt?(ct?-e:-f.eb.width)+f.Na.x-rt:ht+rt+f.Na.x),f.qa.y+f.Na.y-a);c?(e=git(i,e,y),0>y&&(y=0),135<nt&&(a+=u+rt),u+=vt+rt):(135<nt&&(y+=e+rt),e+=ht+rt,u=nrt(i,u,a),0>a&&(a=0));i.Na.p(y,a);i.eb.p(e,u)}}function alt(n,i,u,f,e){var w,o,p;if(r&&t.l(n,oi,l,"layoutBusChildrenPosDir:v"),w=i.length,0===w)return n=[],n[0]=u,n[1]=f,n[2]=e,n;if(1===w)return o=i[0],f=o.eb.width,e=o.eb.height,n=[],n[0]=u,n[1]=f,n[2]=e,n;for(var y=n.nodeSpacing,d=n.rowSpacing,h=90===ye(n),k=0,c=0,a=0,b=0;b<w;b++)if(!(0!=b%2||1<w&&b===w-1)){var o=i[b],s=o.eb,v=0===k?0:d;h?(p=bs(o)-y,o.qa.p(u-(s.width+p),a+v),f=Math.max(f,s.width+p),e=Math.max(e,a+v+s.height),a+=v+s.height):(p=bs(o)-y,o.qa.p(c+v,u-(s.height+p)),e=Math.max(e,s.height+p),f=Math.max(f,c+v+s.width),c+=v+s.width);k++}var k=0,g=c,nt=a;for(h?(c=u+y,a=0):(c=0,a=u+y),b=0;b<w;b++)0!=b%2&&(o=i[b],s=o.eb,v=0===k?0:d,h?(p=bs(o)-y,o.qa.p(c+p,a+v),f=Math.max(f,c+s.width+p),e=Math.max(e,a+v+s.height),a+=v+s.height):(p=bs(o)-y,o.qa.p(c+v,a+p),f=Math.max(f,c+v+s.width),e=Math.max(e,a+s.height+p),c+=v+s.width),k++);return 1<w&&1==w%2&&(o=i[w-1],s=o.eb,i=ylt(o,h?Math.max(Math.abs(nt),Math.abs(a)):Math.max(Math.abs(g),Math.abs(c))),h?(o.qa.p(u+y/2-o.Q.x-o.Na.x,e+i),h=u+y/2-o.Q.x-o.Na.x,f=Math.max(f,h+s.width),0>h&&(f-=h),e=Math.max(e,Math.max(nt,a)+i+s.height),0>o.qa.x&&(u=uk(n,o.qa.x,!1,u,y))):(o.qa.p(f+i,u+y/2-o.Q.y-o.Na.y),f=Math.max(f,Math.max(g,c)+i+s.width),h=u+y/2-o.Q.y-o.Na.y,e=Math.max(e,h+s.height),0>h&&(e-=h),0>o.qa.y&&(u=uk(n,o.qa.y,!0,u,y)))),n=[],n[0]=u,n[1]=f,n[2]=e,n}function vlt(n,i,u,f,e){var p,o,y,c;if(r&&t.l(n,oi,l,"layoutBusChildrenNegDir:v"),p=i.length,0===p)return n=[],n[0]=u,n[1]=f,n[2]=e,n;if(1===p)return o=i[0],f=o.eb.width,e=o.eb.height,n=[],n[0]=u,n[1]=f,n[2]=e,n;for(var v=n.nodeSpacing,w=n.rowSpacing,b=270===ye(n),d=0,s=0,c=0,a=0;a<p;a++)if(!(0!=a%2||1<p&&a===p-1)){var o=i[a],h=o.eb,k=0===d?0:w;b?(y=bs(o)-v,c=c-(k+h.height),o.qa.p(u-(h.width+y),c),f=Math.max(f,h.width+y),e=Math.max(e,Math.abs(c))):(y=bs(o)-v,s-=k+h.width,o.qa.p(s,u-(h.height+y)),e=Math.max(e,h.height+y),f=Math.max(f,Math.abs(s)));d++}var d=0,g=s,nt=c;for(b?(s=u+v,c=0):(s=0,c=u+v),a=0;a<p;a++)0!=a%2&&(o=i[a],h=o.eb,k=0===d?0:w,b?(y=bs(o)-v,c-=k+h.height,o.qa.p(s+y,c),f=Math.max(f,s+h.width+y),e=Math.max(e,Math.abs(c))):(y=bs(o)-v,s-=k+h.width,o.qa.p(s,c+y),e=Math.max(e,c+h.height+y),f=Math.max(f,Math.abs(s))),d++);for(1<p&&1==p%2&&(o=i[p-1],h=o.eb,w=ylt(o,b?Math.max(Math.abs(nt),Math.abs(c)):Math.max(Math.abs(g),Math.abs(s))),b?(o.qa.p(u+v/2-o.Q.x-o.Na.x,-e-h.height-w),s=u+v/2-o.Q.x-o.Na.x,f=Math.max(f,s+h.width),0>s&&(f-=s),e=Math.max(e,Math.abs(Math.min(nt,c))+w+h.height),0>o.qa.x&&(u=uk(n,o.qa.x,!1,u,v))):(o.qa.p(-f-h.width-w,u+v/2-o.Q.y-o.Na.y),f=Math.max(f,Math.abs(Math.min(g,s))+w+h.width),s=u+v/2-o.Q.y-o.Na.y,e=Math.max(e,s+h.height),0>s&&(e-=s),0>o.qa.y&&(u=uk(n,o.qa.y,!0,u,v)))),a=0;a<p;a++)o=i[a],b?o.qa.p(o.qa.x,o.qa.y+e):o.qa.p(o.qa.x+f,o.qa.y);return n=[],n[0]=u,n[1]=f,n[2]=e,n}function bs(n){return r&&t.l(n,oi,l,"fixRelativePostions:child"),null===n.parent?0:n.parent.nodeSpacing}function ylt(n){return r&&t.l(n,oi,l,"fixRelativePostions:lastchild"),null===n.parent?0:n.parent.rowSpacing}function uk(n,i,u,f,e){r&&t.l(n,oi,l,"fixRelativePostions:v");n=n.children;for(var s=n.length,o=0;o<s;o++)u?n[o].qa.p(n[o].qa.x,n[o].qa.y-i):n[o].qa.p(n[o].qa.x-i,n[o].qa.y);return i=n[s-1],Math.max(f,u?i.Na.y+i.Q.y-e/2:i.Na.x+i.Q.x-e/2)}function git(n,i,u){r&&t.l(n,oi,l,"calculateSubwidth:v");switch(n.alignment){case us:case ga:var f=i;return u+n.width>f&&(f=u+n.width),0>u&&(f-=u),f;case lo:return n.width>i?n.width:i;case ao:return 2*n.Q.x>i?n.width:i+n.width-2*n.Q.x;case gs:case vo:return f=Math.min(0,u),u=Math.max(i,u+n.width),Math.max(n.width,u-f);case nh:return n.width-n.Q.x+n.nodeSpacing/2+i;case fs:return Math.max(n.width,n.Q.x+n.nodeSpacing/2+i);default:return i}}function nrt(n,i,u){r&&t.l(n,oi,l,"calculateSubheight:v");switch(n.alignment){case us:case ga:var f=i;return u+n.height>f&&(f=u+n.height),0>u&&(f-=u),f;case lo:return n.height>i?n.height:i;case ao:return 2*n.Q.y>i?n.height:i+n.height-2*n.Q.y;case gs:case vo:return f=Math.min(0,u),u=Math.max(i,u+n.height),Math.max(n.height,u-f);case nh:return n.height-n.Q.y+n.nodeSpacing/2+i;case fs:return Math.max(n.height,n.Q.y+n.nodeSpacing/2+i);default:return i}}function trt(n,i,u){r&&t.l(n,de,l,"alignOffset:align");switch(n){case ga:i/=2;u/=2;break;case us:i/=2;u/=2;break;case lo:u=i=0;break;case ao:break;default:t.m("Unhandled alignment value "+n.toString())}return n=[],n[0]=i,n[1]=u,n}function hc(n,i,u,f,e,o){r&&t.l(n,oi,l,"shiftRelPosAlign:v");r&&t.l(i,de,l,"shiftRelPosAlign:align");i=trt(i,u,f);rl(n,i[0],i[1],e,o)}function rl(n,i,u,f,e){if(r&&t.l(n,oi,l,"shiftRelPos:v"),0!==i||0!==u)for(n=n.children;f<=e;f++){var o=n[f].qa;o.x+=i;o.y+=u}}function fk(n,i,u,f){r&&(t.l(i,oi,l,"recordMidPoints:v"),t.i(u,"number",l,"recordMidPoints:x"),t.i(f,"number",l,"recordMidPoints:y"));var e=i.parent;switch(n.Lf){case co:for(n=i.xc;n.next();)i=n.value,i.fromVertex===e&&i.fs.p(u,f);break;case ul:for(n=i.nc;n.next();)i=n.value,i.toVertex===e&&i.fs.p(u,f);break;default:t.m("Unhandled path value "+n.Lf.toString())}}function ek(n,t,i){for(var u,r=0;r<n.length;r++)u=n[r],u.x+=t,u.y+=i}function plt(n,i,u,f,e,o,s){var a,p,g,nt,d;r&&t.l(i,oi,l,"mergeFringes:parent");r&&t.l(u,oi,l,"mergeFringes:child");var h=ye(i),c=90===h||270===h,y=i.nodeSpacing;if(i=f,a=e,f=o,e=s,p=u.It,g=u.$t,s=u.eb,nt=c?Math.max(e,s.height):Math.max(f,s.width),(null===p||h!==ye(u))&&(p=su(n,2),g=su(n,2),c?(p[0].p(0,0),p[1].p(0,s.height),g[0].p(s.width,0),g[1].p(g[0].x,p[1].y)):(p[0].p(0,0),p[1].p(s.width,0),g[0].p(0,s.height),g[1].p(p[1].x,g[0].y))),c){if(u=f,f=9999999,!(null===a||2>a.length||null===p||2>p.length))for(o=e=0;e<a.length&&o<p.length;){var h=a[e],k=p[o],c=k.x,v=k.y,c=c+u,w=h;e+1<a.length&&(w=a[e+1]);var b=k,k=b.x,b=b.y;o+1<p.length&&(b=p[o+1],k=b.x,b=b.y,k+=u);d=f;h.y===v?d=c-h.x:h.y>v&&h.y<b?d=c+(h.y-v)/(b-v)*(k-c)-h.x:v>h.y&&v<w.y&&(d=c-(h.x+(v-h.y)/(w.y-h.y)*(w.x-h.x)));d<f&&(f=d);w.y<=h.y?e++:b<=v?o++:(w.y<=b&&e++,b<=w.y&&o++)}if(u-=f,u+=y,e=p,o=u,null===i||2>i.length||null===e||2>e.length)f=null;else{for(y=su(n,i.length+e.length),f=c=h=0;c<e.length&&e[c].y<i[0].y;)v=e[c++],y[f++].p(v.x+o,v.y);for(;h<i.length;)v=i[h++],y[f++].p(v.x,v.y);for(h=i[i.length-1].y;c<e.length&&e[c].y<=h;)c++;for(;c<e.length&&e[c].y>h;)v=e[c++],y[f++].p(v.x+o,v.y);for(e=su(n,f),h=0;h<f;h++)e[h].assign(y[h]);ks(n,y);f=e}if(c=g,v=u,null===a||2>a.length||null===c||2>c.length)e=null;else{for(y=su(n,a.length+c.length),o=w=e=0;e<a.length&&a[e].y<c[0].y;)h=a[e++],y[o++].p(h.x,h.y);for(;w<c.length;)h=c[w++],y[o++].p(h.x+v,h.y);for(c=c[c.length-1].y;e<a.length&&a[e].y<=c;)e++;for(;e<a.length&&a[e].y>c;)h=a[e++],y[o++].p(h.x,h.y);for(h=su(n,o),e=0;e<o;e++)h[e].assign(y[e]);ks(n,y);e=h}o=Math.max(0,u)+s.width;s=nt}else{if(u=e,f=9999999,!(null===a||2>a.length||null===p||2>p.length))for(o=e=0;e<a.length&&o<p.length;)h=a[e],k=p[o],c=k.x,v=k.y,v+=u,w=h,e+1<a.length&&(w=a[e+1]),b=k,k=b.x,b=b.y,o+1<p.length&&(b=p[o+1],k=b.x,b=b.y,b+=u),d=f,h.x===c?d=v-h.y:h.x>c&&h.x<k?d=v+(h.x-c)/(k-c)*(b-v)-h.y:c>h.x&&c<w.x&&(d=v-(h.y+(c-h.x)/(w.x-h.x)*(w.y-h.y))),d<f&&(f=d),w.x<=h.x?e++:k<=c?o++:(w.x<=k&&e++,k<=w.x&&o++);if(u-=f,u+=y,e=p,o=u,null===i||2>i.length||null===e||2>e.length)f=null;else{for(y=su(n,i.length+e.length),f=c=h=0;c<e.length&&e[c].x<i[0].x;)v=e[c++],y[f++].p(v.x,v.y+o);for(;h<i.length;)v=i[h++],y[f++].p(v.x,v.y);for(h=i[i.length-1].x;c<e.length&&e[c].x<=h;)c++;for(;c<e.length&&e[c].x>h;)v=e[c++],y[f++].p(v.x,v.y+o);for(e=su(n,f),h=0;h<f;h++)e[h].assign(y[h]);ks(n,y);f=e}if(c=g,v=u,null===a||2>a.length||null===c||2>c.length)e=null;else{for(y=su(n,a.length+c.length),o=w=e=0;e<a.length&&a[e].x<c[0].x;)h=a[e++],y[o++].p(h.x,h.y);for(;w<c.length;)h=c[w++],y[o++].p(h.x,h.y+v);for(c=c[c.length-1].x;e<a.length&&a[e].x<=c;)e++;for(;e<a.length&&a[e].x>c;)h=a[e++],y[o++].p(h.x,h.y);for(h=su(n,o),e=0;e<o;e++)h[e].assign(y[e]);ks(n,y);e=h}o=nt;s=Math.max(0,u)+s.height}return ks(n,i),ks(n,p),ks(n,a),ks(n,g),n=[],n[0]=u,n[1]=f,n[2]=e,n[3]=o,n[4]=s,n}function su(n,t){var i,r;if(n.Ls||(n.Ls=[]),i=n.Ls[t],void 0!==i&&(i=i.pop(),void 0!==i))return i;for(i=[],r=0;r<t;r++)i[r]=new h;return i}function ks(n,t){if(n.Ls){var r=t.length,i=n.Ls[r];void 0===i&&(i=[],n.Ls[r]=i);i.push(t)}}function irt(n,i,u,f){var s,e,o;if(null!==i)for(r&&t.l(i,oi,l,"assignAbsolutePositions:v"),i.x=u,i.y=f,i=i.children,s=i.length,e=0;e<s;e++)o=i[e],irt(n,o,u+o.qa.x,f+o.qa.y)}function wlt(n,i){if(null!==i){r&&t.l(i,oi,l,"setPortSpotsTree:v");n.setPortSpots(i);for(var f=i.children,e=f.length,u=0;u<e;u++)wlt(n,f[u])}}function ye(n){return n=n.angle,45>=n?0:135>=n?90:225>=n?180:315>=n?270:0}function da(n){var f,u;r&&t.l(n,oi,l,"computeLayerSpacing:v");var i=ye(n),i=90===i||270===i,u=n.layerSpacing;return 0<n.layerSpacingParentOverlap&&(f=Math.min(1,n.layerSpacingParentOverlap),u=u-(i?n.height*f:n.width*f)),u<(i?-n.height:-n.width)&&(u=i?-n.height:-n.width),u}function ds(n){var f,u;r&&t.l(n,oi,l,"computeNodeIndent:v");var i=ye(n),i=90===i||270===i,u=n.nodeIndent;return 0<n.nodeIndentPastParent&&(f=Math.min(1,n.nodeIndentPastParent),u=u+(i?n.width*f:n.height*f)),Math.max(0,u)}function wy(){ei.call(this)}function oi(){vt.call(this);this.initialized=!1;this.parent=null;this.children=[];this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0;this.comments=null;this.qa=new h(0,0);this.eb=new st(0,0);this.Na=new h(0,0);this.bq=this.aq=this.jK=!1;this.$t=this.It=null;this.sorting=yy;this.comparer=dtt;this.angle=0;this.alignment=us;this.nodeIndentPastParent=this.nodeIndent=0;this.nodeSpacing=20;this.layerSpacing=50;this.layerSpacingParentOverlap=0;this.compaction=py;this.breadthLimit=0;this.rowSpacing=25;this.commentSpacing=this.rowIndent=10;this.commentMargin=20;this.setsPortSpot=!0;this.portSpot=pr;this.setsChildPortSpot=!0;this.childPortSpot=pr}function bh(){rr.call(this);this.fs=new h(0,0)}function blt(){this.oo=[]}function pvt(n){var e=new blt,r,o,s,h;if("string"==typeof n)r=(new DOMParser).parseFromString(n,"text/xml");else if(n instanceof Document)r=n.implementation.createDocument("http://www.w3.org/2000/svg","svg",null),r.appendChild(r.importNode(n.documentElement,!0));else return null;if(n=r.getElementsByTagName("svg"),0===n.length)return null;var v=n[0],c=r.getElementsByTagName("linearGradient"),l=r.getElementsByTagName("radialGradient");for(n=0;n<c.length;n++){for(var t=c[n],u=as(ht,fo,{start:yrt,end:prt}),f=t.childNodes,i=0;i<f.length;i++)"stop"===f[i].tagName&&(o=ke(e,f[i],"stop-color"),o&&(s=ke(e,f[i],"offset"),s||(s="0"),h=parseFloat(s),isNaN(h)&&(h=0),u.addColorStop((-1!==s.indexOf("%")?.01:1)*h,o)));t=t.getAttribute("id");"string"==typeof t&&(e["_brush"+t]=u)}for(n=0;n<l.length;n++){for(t=l[n],u=as(ht,ku,{start:si,end:si}),f=t.childNodes,i=0;i<f.length;i++)"stop"===f[i].tagName&&(o=ke(e,f[i],"stop-color"))&&((s=ke(e,f[i],"offset"))||(s="0"),h=parseFloat(s),isNaN(h)&&(h=0),u.addColorStop((-1!==s.indexOf("%")?.01:1)*h,o));t=t.getAttribute("id");"string"==typeof t&&(e["_brush"+t]=u)}for(c=!0;c;)for(c=!1,l=r.getElementsByTagName("use"),n=0;n<l.length;n++)u=l[n],0===u.childNodes.length&&(t=u.href,void 0!==t&&(t=r.getElementById(t.baseVal.substring(1)),null!==t&&(t=t.cloneNode(!0),t.removeAttribute("id"),f=parseFloat(u.getAttribute("x")),isNaN(f)&&(f=0),i=parseFloat(u.getAttribute("y")),isNaN(i)&&(i=0),o=u.getAttribute("transform"),null===o&&(o=""),u.setAttribute("transform",o+" translate("+f+","+i+")"),u.appendChild(t),"use"===t.tagName&&(c=!0))));if(nv(e,v,null),r=new a,0===e.oo.length)return r;if(1===e.oo.length)return e.oo[0];for(n=0;n<e.oo.length;n++)r.add(e.oo[n]);return r}function klt(n,t){var i=n.getAttribute(t);return"string"!=typeof i&&n.style&&(i=n.style[t]),"string"!=typeof i?null:i}function ke(n,t,i){var r=t.getAttribute(i);return"string"!=typeof r&&t.style&&(r=t.style[i]),"string"!=typeof r||""===r||"inherit"===r?(t=t.parentNode,"g"===t.tagName||"use"===t.tagName?ke(n,t,i):null):r}function nv(n,i,r){var nt=i.tagName,it,l,e,g,p,k;if(("g"===nt||"svg"===nt||"use"===nt||"symbol"===nt)&&"none"!==ke(n,i,"display")){for(nt=i.childNodes,it=0;it<nt.length;it++)if(l=nt[it],e=null,void 0!==l.getAttribute){g=l.getAttribute("transform");switch(l.tagName){case"g":null===g?nv(n,l,null):(e=new a,nv(n,l,e));break;case"use":null===g?nv(n,l,null):(e=new a,nv(n,l,e));break;case"symbol":if("use"!==i.tagName)break;e=new a;nv(n,l,e);var f=e,c=n,s=l;ke(c,s,"preserveAspectRatio");ke(c,s,"viewBox");f.scale=1;break;case"path":f=l;e=new w;f=f.getAttribute("d");"string"==typeof f&&(e.iF=rut(f));break;case"line":var y=l,e=new w,f=parseFloat(y.getAttribute("x1"));isNaN(f)&&(f=0);c=parseFloat(y.getAttribute("y1"));isNaN(c)&&(c=0);s=parseFloat(y.getAttribute("x2"));isNaN(s)&&(s=0);y=parseFloat(y.getAttribute("y2"));isNaN(y)&&(y=0);p=new rt(nu);e.position=new h(Math.min(f,s),Math.min(c,y));0<(s-f)/(y-c)?(p.sa=0,p.ta=0,p.D=Math.abs(s-f),p.F=Math.abs(y-c)):(p.sa=0,p.ta=Math.abs(y-c),p.D=Math.abs(s-f),p.F=0);e.td=p;break;case"circle":s=l;e=new w;f=parseFloat(s.getAttribute("r"));isNaN(f)||0>f?e=null:(c=parseFloat(s.getAttribute("cx")),isNaN(c)&&(c=0),s=parseFloat(s.getAttribute("cy")),isNaN(s)&&(s=0),y=new rt(uf),y.sa=0,y.ta=0,y.D=2*f,y.F=2*f,e.position=new h(c-f,s-f),e.td=y);break;case"ellipse":y=l;e=new w;f=parseFloat(y.getAttribute("rx"));isNaN(f)||0>f?e=null:(c=parseFloat(y.getAttribute("ry")),isNaN(c)||0>c?e=null:(s=parseFloat(y.getAttribute("cx")),isNaN(s)&&(s=0),y=parseFloat(y.getAttribute("cy")),isNaN(y)&&(y=0),p=new rt(uf),p.sa=0,p.ta=0,p.D=2*f,p.F=2*c,e.position=new h(s-f,y-c),e.td=p));break;case"rect":if(p=l,e=new w,f=parseFloat(p.getAttribute("width")),isNaN(f)||0>f)e=null;else if(c=parseFloat(p.getAttribute("height")),isNaN(c)||0>c)e=null;else{s=parseFloat(p.getAttribute("x"));isNaN(s)&&(s=0);y=parseFloat(p.getAttribute("y"));isNaN(y)&&(y=0);var d=p.getAttribute("rx"),b=p.getAttribute("ry"),p=parseFloat(d);(isNaN(p)||0>p)&&(p=0);k=parseFloat(b);(isNaN(k)||0>k)&&(k=0);!d&&b?p=k:d&&!b&&(k=p);p=Math.min(p,f/2);k=Math.min(k,c/2);b=void 0;0===p&&0===k?(b=new rt(kf),b.sa=0,b.ta=0,b.D=f,b.F=c):(b=u.za/2,d=t.u(),v(d,p,0,!0),d.lineTo(f-p,0),o(d,f-p*b,0,f,k*b,f,k),d.lineTo(f,c-k),o(d,f,c-k*b,f-p*b,c,f-p,c),d.lineTo(p,c),o(d,p*b,c,0,c-k*b,0,c-k),d.lineTo(0,k),o(d,0,k*b,p*b,0,p,0),tt(d),b=d.s,t.v(d));e.position=new h(s,y);e.td=b}break;case"polygon":e=rat(l);break;case"polyline":e=rat(l)}if(null!==e){if(e instanceof w){if(f=ke(n,l,"fill"),null!==f&&-1!==f.indexOf("url")?(f=f.substring(f.indexOf("#")+1,f.length-1),f=n["_brush"+f],e.fill=f instanceof ht?f:"black"):e.fill=null===f?"black":"none"===f?null:f,f=ke(n,l,"stroke"),null!==f&&-1!==f.indexOf("url")?(f=f.substring(f.indexOf("#")+1,f.length-1),f=n["_brush"+f],e.stroke=f instanceof ht?f:"black"):e.stroke="none"===f?null:f,f=parseFloat(ke(n,l,"stroke-width")),isNaN(f)||(e.lb=f),f=ke(n,l,"stroke-linecap"),null!==f&&(e.OG=f),f=ke(n,l,"stroke-dasharray")){for(c=f.split(","),s=[],f=0;f<c.length;f++)y=parseFloat(c[f]),!isNaN(y)&&0<y&&s.push(y);e.Mx=s}(l=ke(n,l,"stroke-dashoffset"))&&(l=parseFloat(l),isNaN(l)||(e.PG=l));e.JA=!0}if(null!==g){for(g=g.split(")"),l=!0,f=0;f<g.length;f++)/\(.*[^0-9\.,\s-]/.test(g[f])&&(l=!1),/\(.*[0-9]-[0-9]/.test(g[f])&&(l=!1);if(l)for(f=g.length-1;0<=f;f--)if(c=g[f],""!==c)switch(s=c.indexOf("("),l=c.substring(0,s).replace(/\s*/,""),s=c.substring(s+1).split(/\s*[\s,]\s*/),l){case"rotate":glt(n,e,s);break;case"translate":l=e;c=parseFloat(s[0]);isNaN(c)&&(c=0);s=parseFloat(s[1]);isNaN(s)&&(s=0);(0!==c||0!==s)&&(y=l.position.copy(),isNaN(y.x)&&(y.x=0),isNaN(y.y)&&(y.y=0),l.position=new h(c+y.x,s+y.y));break;case"scale":nat(n,e,s);break;case"skewX":tat(n,e,s);break;case"skewY":iat(n,e,s);break;case"matrix":dlt(n,e,s)}}if(e instanceof a){for(g=e.elements.k,f=l=0,c=e.position.copy(),isNaN(c.x)&&(c.x=0),isNaN(c.y)&&(c.y=0);g.next();)s=g.value.position.copy(),isNaN(s.x)&&(s.x=0),isNaN(s.y)&&(s.y=0),s.x<l&&(l=s.x),s.y<f&&(f=s.y);c.x+=l;c.y+=f;e.position=c}null===r?n.oo.push(e):r.add(e)}}null!==e&&(n=klt(i,"visibility"),("hidden"===n||"collapse"===n)&&(e.visible=!1),(i=klt(i,"opacity"))&&(i=parseFloat(i),isNaN(i)||(e.opacity=i)))}}function dlt(n,t,i){var u=parseFloat(i[0]),f=parseFloat(i[1]),e=parseFloat(i[2]),o=parseFloat(i[3]),s=parseFloat(i[4]),h=parseFloat(i[5]),r,c;if(!isNaN(u+f+e+o+s+h))if(r=t.position.copy(),isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),t instanceof w)i=t.td.copy(),i.type===kf?i=n.Ss(i):i.type===uf?i=wk(i):i.type===nu&&(i.type=wr,n=new ai(i.sa,i.ta),c=new ut(fr,i.D,i.F),n.Ka.add(c),i.Fb.add(n)),i.offset(r.x,r.y),i.transform(u,f,e,o,s-r.x,h-r.y),n=i.normalize(),t.td=i,r.x-=n.x,r.y-=n.y,t.position=r;else{for(t=t.elements.k;t.next();)u=t.value.position.copy(),u.x+=r.x,u.y+=r.y,t.value.position=u;for(t.reset();t.next();)dlt(n,t.value,i);for(t.reset();t.next();)u=t.value.position.copy(),u.x-=r.x,u.y-=r.y,t.value.position=u}}function glt(n,t,i){var s=parseFloat(i[0]),o,f,u,r;if(isNaN(s)&&(s=0),o=parseFloat(i[1]),isNaN(o)&&(o=0),f=parseFloat(i[2]),isNaN(f)&&(f=0),0!==s)if(u=s*Math.PI/180,r=t.position.copy(),isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),t instanceof w){if(i=t.td.copy(),i.type===uf?i=wk(i):i.type===kf&&(i=n.Ss(i)),i.type===wr)i.rotate(s,o-r.x,f-r.y),f=i.normalize(),t.td=i,r.x-=f.x,r.y-=f.y,t.position=r;else{var s=i.sa-o+r.x,l=i.ta-f+r.y,h=i.D-o+r.x,c=i.F-f+r.y;n=s*Math.cos(u)-l*Math.sin(u)+o-r.x;s=l*Math.cos(u)+s*Math.sin(u)+f-r.y;o=h*Math.cos(u)-c*Math.sin(u)+o-r.x;f=c*Math.cos(u)+h*Math.sin(u)+f-r.y;h=Math.min(n,o);c=Math.min(s,f);i.sa=n-h;i.ta=s-c;i.D=o-h;i.F=f-c;r.x+=h;r.y+=c;t.position=r;t.td=i}t.fill instanceof ht&&(r=t.fill.copy(),i=Math.atan((.5-r.start.y)/(.5-r.start.x)),isNaN(i)||(i+=u,r.start=new e((1-Math.cos(i))/2,(1-Math.sin(i))/2),r.end=new e((1+Math.cos(i))/2,(1+Math.sin(i))/2)),t.fill=r);t.stroke instanceof ht&&(r=t.stroke.copy(),i=Math.atan((.5-r.start.y)/(.5-r.start.x)),isNaN(i)||(i+=u,r.start=new e((1-Math.cos(i))/2,(1-Math.sin(i))/2),r.end=new e((1+Math.cos(i))/2,(1+Math.sin(i))/2)),t.stroke=r)}else{for(t=t.elements.k;t.next();)u=t.value.position.copy(),u.x+=r.x,u.y+=r.y,t.value.position=u;for(t.reset();t.next();)glt(n,t.value,i);for(t.reset();t.next();)u=t.value.position.copy(),u.x-=r.x,u.y-=r.y,t.value.position=u}}function nat(n,t,i){var r=parseFloat(i[0]),f,u;if(isNaN(r)&&(r=1),f=parseFloat(i[1]),isNaN(f)&&(f=r),1!==r||1!==f)if(u=t.position.copy(),isNaN(u.x)&&(u.x=0),isNaN(u.y)&&(u.y=0),t instanceof w)n=t.td.copy(),u.x*=r,u.y*=f,t.position=u,n.scale(r,f),t.td=n;else{for(t=t.elements.k;t.next();)r=t.value.position.copy(),r.x+=u.x,r.y+=u.y,t.value.position=r;for(t.reset();t.next();)nat(n,t.value,i);for(t.reset();t.next();)r=t.value.position.copy(),r.x-=u.x,r.y-=u.y,t.value.position=r}}function tat(n,t,i){var u=parseFloat(i[0]),r,f;if(!isNaN(u))if(u=u*Math.PI/180,r=t.position.copy(),isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),t instanceof w)i=t.td.copy(),i.type===kf?i=n.Ss(i):i.type===uf?i=wk(i):i.type===nu&&(i.type=wr,n=new ai(i.sa,i.ta),f=new ut(fr,i.D,i.F),n.Ka.add(f),i.Fb.add(n)),i.offset(r.x,r.y),i.transform(1,0,Math.tan(u),1,-r.x,-r.y),n=i.normalize(),t.td=i,r.x-=n.x,r.y-=n.y,t.position=r;else{for(t=t.elements.k;t.next();)u=t.value.position.copy(),u.x+=r.x,u.y+=r.y,t.value.position=u;for(t.reset();t.next();)tat(n,t.value,i);for(t.reset();t.next();)u=t.value.position.copy(),u.x-=r.x,u.y-=r.y,t.value.position=u}}function iat(n,t,i){var u=parseFloat(i[0]),r,f;if(!isNaN(u))if(u=u*Math.PI/180,r=t.position.copy(),isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0),t instanceof w)i=t.td.copy(),i.type===kf?i=n.Ss(i):i.type===uf?i=wk(i):i.type===nu&&(i.type=wr,n=new ai(i.sa,i.ta),f=new ut(fr,i.D,i.F),n.Ka.add(f),i.Fb.add(n)),i.offset(r.x,r.y),i.transform(1,Math.tan(u),0,1,-r.x,-r.y),n=i.normalize(),t.td=i,r.x-=n.x,r.y-=n.y,t.position=r;else{for(t=t.elements.k;t.next();)u=t.value.position.copy(),u.x+=r.x,u.y+=r.y,t.value.position=u;for(t.reset();t.next();)iat(n,t.value,i);for(t.reset();t.next();)u=t.value.position.copy(),u.x-=r.x,u.y-=r.y,t.value.position=u}}function rat(n){var u=!1,s,c,f,t,i,e,o,r;if("polygon"===n.tagName)u=!0;else if("polyline"!==n.tagName)return null;if(s=new w,i=n.getAttribute("points"),n=new rt,c=new b(ai),f=i.split(/\s*[\s,]\s*/),4>f.length)return null;for(i=new b(ut),r=1;r<f.length;r+=2){if(e=eval(f[r-1]),o=eval(f[r]),"number"!=typeof e||isNaN(e)||"number"!=typeof o||isNaN(o))return null;1===r?t=new ai(e,o):i.add(new ut(fr,e,o))}return u&&(u=new ut(fr,t.sa,t.ta),u.close(),i.add(u)),t.Ka=i,c.add(t),n.Fb=c,t=n.normalize(),s.position=new h(-t.x,-t.y),s.td=n,s}function wk(n){var i=n.sa,r=n.ta,t=n.D,o=n.F,e=Math.abs(t-i)/2,f=Math.abs(o-r)/2,i=Math.min(i,t)+e,r=Math.min(r,o)+f;return new h,o=new ai(i,r-f),t=new ut(au),t.Gb=i+u.za*e,t.Xb=r-f,t.ye=i+e,t.ze=r-u.za*f,t.D=i+e,t.F=r,o.Ka.add(t),t=new ut(au),t.Gb=i+e,t.Xb=r+u.za*f,t.ye=i+u.za*e,t.ze=r+f,t.D=i,t.F=r+f,o.Ka.add(t),t=new ut(au),t.Gb=i-u.za*e,t.Xb=r+f,t.ye=i-e,t.ze=r+u.za*f,t.D=i-e,t.F=r,o.Ka.add(t),t=new ut(au),t.Gb=i-e,t.Xb=r-u.za*f,t.ye=i-u.za*e,t.ze=r-f,t.D=i,t.F=r-f,o.Ka.add(t),n.type=wr,n.Fb.add(o),n}var ft,es={},r,t,ur,yo,crt,po,vrt,pi,pr,hr,np,tp,si,ip,tv,cu,pf,wf,lu,bf,yrt,prt,wrt,brt,krt,drt,kk,u,nu,kf,uf,wr,iut,rut,rp,df,fr,au,ee,br,gf,ro,di,vr,kr,sut,fp,ne,ep,rft,uft,op,hl,cl,vd,sft,yd,pd,sp,wd,vl,yl,dd,we,pl,dp,gp,set,het,cet,aet,vet,yc,fo,ku,av,fot,yr,be,of,du,cr,ar,vv,as,na,ta,pot,wc,bo,vs,eo,ko,go,bc,hn,kc,dc,an,sst,hst,cst,ew,yst,yn,ra,ua,pn,wst,rc,rht,ea,gn,ntt,utt,oht,io,ae,ys,oa,aw,vw,yw,ftt,sht,hht,cht,lht,aht,vht,yht,dtt,tct,eb,fy,ob,ts,gtt,sb,ey,hb,re,lh,ws,ve,ru,ah,ec,pa,ab,vb,yb,pb,wa,wb,oc,gb,hit,nk,cit,lit,tk,ait,vit,yit,ik,pit,ult,wit,flt,bit,ok,co,ul,yy,sk,hk,ck,ga,us,lo,ao,gs,vo,nh,fs,lk,py,ak,rrt,urt,frt,vk,ert,yk,ort,srt,pk;if(void 0===document.createElement("canvas").getContext)throw n.console&&n.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(n,t,i){i.get&&n.__defineGetter__(t,i.get);i.set&&n.__defineSetter__(t,i.set)});Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(n,t){return{get:n.__lookupGetter__(t),set:n.__lookupSetter__(t)}});Object.getPrototypeOf||(Object.getPrototypeOf=function(n){return n.__proto__});Object.isFrozen||(Object.isFrozen=function(n){return!0===n.GH});Object.freeze||(Object.freeze=function(n){n.GH=!0});Array.isArray||(Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)});Function.prototype.bind||(Function.prototype.bind=function(n){function t(){return f.apply(n,u.concat(r.call(arguments)))}function i(){}var r=Array.prototype.slice,u=r.call(arguments,1),f=this;return i.prototype=this.prototype,t.prototype=new i,t}),function(){for(var r=0,i=["ms","moz","webkit","o"],t=0;t<i.length&&!n.requestAnimationFrame;++t)n.requestAnimationFrame=n[i[t]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[i[t]+"CancelAnimationFrame"]||n[i[t]+"CancelRequestAnimationFrame"];n.requestAnimationFrame||(n.requestAnimationFrame=function(t){var i=(new Date).getTime(),u=Math.max(8,16-(i-r)),f=n.setTimeout(function(){t(i+u)},u);return r=i+u,f});n.cancelAnimationFrame||(n.cancelAnimationFrame=function(n){clearTimeout(n)})}();r={gj:!1,rA:!1,XE:!1,WI:!1,YI:!1,cG:!1,pF:!1,mE:!1,assert:function(i,u){if(!i&&r.mE)throw n&&(t.trace(u),n.alert(u)),Error(u);},lt:null,enableBoundsInfo:function(n){r.gj=!0;n&&n.Yt()},disableBoundsInfo:function(n){r.gj=!1;n&&(ef(n),n.Yt())},UE:function(n,t){var s,u,o,f,e,i;for(void 0===n&&(n=r.lt),void 0===t&&(t=n.sl("").mb),s=t.length,u=n.Za.getContext("2d"),u.fillStyle="rgba(255,255,0,.3)",o=0;o<s;o++)f=t.wa(o),e=f.pa,null!==f.va?r.UE(n,f.va):(i=f.Ch.copy(),i.XA(f.Oc),u.save(),u.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),u.fillRect(e.x,e.y,e.width,e.height),u.restore())},VE:function(n,t){var i,s,f;for(n||(n=r.lt),t||(t=n.sl("").mb),i=n.Za.getContext("2d"),s=t.length,i.fillStyle="rgba(0,0,255,.3)",f=0;f<s;f++){var e=t.wa(f),o=e.Ja,u=e.Ch;null!==e.va?r.VE(n,e.va):(i.save(),i.transform(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),i.fillRect(o.x,o.y,o.width,o.height),i.restore())}},RI:function(n,t){var i,s,f;for(n||(n=r.lt),t||(t=n.sl("").mb),i=n.Za.getContext("2d"),s=t.length,i.fillStyle="rgba(0,0,255,.3)",f=0;f<s;f++){var e=t.wa(f),o=e.Ha,u=e.Ch;null!==e.va?r.RI(n,e.va):(i.save(),i.transform(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),i.fillRect(o.x||0,o.y||0,o.width,o.height),i.restore())}},EK:function(){r.VE();r.UE()},FK:function(n){n||(n=r.lt);var t=n.Lc;n=n.Za.getContext("2d");n.strokeStyle="rgba(0,255,0,.9)";n.strokeRect(t.x,t.y,t.width,t.height)},WE:function(n,t){t.fillStyle="red";t.fillRect(0,0,8,8);t.lineWidth=8;t.strokeStyle="rgba(255,255,0,.6)";var i=n.Ab;t.strokeRect(i.x,i.y,i.width,i.height);t.fillStyle="rgba(0,255,0,.2)";t.fillRect(n.Lc.x,n.Lc.y,n.Lc.width,n.Lc.height)},SI:function(n,t){t instanceof fi||(n.lineWidth=2,n.strokeStyle="rgba(255,0,0,.5)",n.strokeRect(t.Pb.x,t.Pb.y,t.Pb.width,t.Pb.height),void 0!==t.stroke&&(n.strokeStyle=t.stroke),void 0!==t.qe&&(n.lineWidth=t.qe),null!==t.ia&&t.ia.type===vs&&(n.lineWidth=1,n.strokeStyle="rgba(10,200,10,.6)",void 0!==t.stroke&&(n.strokeStyle=t.stroke),void 0!==t.qe&&(n.lineWidth=t.qe)))},TI:function(n,t){n.lineWidth=1;n.strokeStyle="rgba(0,0,255,.5)";n.strokeRect(t.Ja.x,t.Ja.y,t.Ja.width,t.Ja.height);void 0!==t.stroke&&(n.strokeStyle=t.stroke);void 0!==t.qe&&(n.lineWidth=t.qe)},qA:function(n,t,i){var e,f,r,u;for(n.setTransform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),i=t.Wb.length,e=0;e<i;e++)for(var s=t.Wb.wa(e),h=s.mb.length,o=0;o<h;o++)f=s.mb.wa(o),void 0!==f.location&&null!==f.location&&(f.location.P()&&(r=f.location.x,u=f.location.y,n.beginPath(),n.strokeStyle="limegreen",n.lineWidth=2,n.moveTo(r,u+6),n.lineTo(r,u),n.lineTo(r+6,u),n.moveTo(r,u),n.lineTo(r+10,u+20),n.stroke()),r=f.position.x,u=f.position.y,n.beginPath(),n.strokeStyle="red",n.lineWidth=2,n.moveTo(r,u+6),n.lineTo(r,u),n.lineTo(r+6,u),n.moveTo(r,u),n.lineTo(r+20,u+10),n.stroke());n.setTransform(1,0,0,1,0,0)},XI:function(n,t,i){var f=n.length,u,r;for(t.fillStyle="rgba(255,0,0,.1)",u=0;u<f;u++)r=oet(i,n[u]),t.fillRect(r[0],r[1],r[2],r[3])},UI:function(n,t,i,r,u){n.fillStyle="rgba(0,255,0,.2)";n.fillRect(t,i,r,u)},VI:function(n,t,i){var r,u;for(n.save(),r=t.Oc,r.reset(),1!==t.fc&&r.scale(t.fc),t=t.Pa,0===t.x&&0===t.y||r.translate(-t.x,-t.y),n.setTransform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),i=i.Bc.n,r=i.length,t=0;t<r;t++)u=i[t],n.beginPath(),n.moveTo(u.x-4,u.y),n.lineTo(u.x+4,u.y),n.moveTo(u.x,u.y-4),n.lineTo(u.x,u.y+4),n.lineWidth=2,n.strokeStyle="rgba(255,0,0,.9)",n.stroke();n.restore()},DK:function(n){for(n||(n=r.lt),n=n.pn;n.next();)t.trace(n.value.toString())},YK:function(n,t){var r=t.dm(n),i=t.dc;return i.Wd=t.JB(r),i.da=r,gh(t,i,n)},VK:function(n,t){t.de(n.da)&&(t.of.fillStyle="lime",t.of.Rl="lime",t.of.fillRect(n.Wd.x,n.Wd.y,1*t.scale,1*t.scale))},WK:function(n){var t=wg(n,!1,null),r,u,i,f,e;if(!t.Ap)for(n=n.of,r=0;r<=t.Lm;r++)for(u=0;u<=t.Mm;u++)i=t.rc[r][u],i!==nb&&(f=r*t.Fd+t.Of,e=u*t.xd+t.Pf,0!==i&&(n.fillStyle="rgba(255, 0, 0, .2)",n.fillRect(f,e,t.Fd,t.xd)),i>=uc||(i%=10,n.fillStyle="blue",n.fillText(i.toString(),f,e+t.xd)))},$I:function(n){var f,u;if(n instanceof i)for(n=n.pn;n.next();)for(u=n.value,t.trace(u.toString()),u=u.vj;u.next();)r.$I(u.value);else if(n instanceof s){if(t.trace("References for "+n),n.layer&&t.trace("  "+n.layer.toString()+' LayerName: "'+n.Ne+'"'),n.An!==n&&t.trace("  SelectionObject: "+n.An.toString()+' SelectionObjectName: "'+n.du+'"'),n.Zb!==n&&t.trace("  LocationObject: "+n.Zb.toString()+' LocationObjectName: "'+n.Jt+'"'),n.Vg){for(f="",u=n.Vg.k;u.next();)f+=u.key+" ";t.trace("  Adornments: "+f)}if(n.fb&&t.trace("  ContainingGroup: "+n.fb.toString()),n instanceof y){if(n.Ad)for(u=n.Ad.k;u.next(););if(0<n.Td.count){for(f="",u=n.Td;u.next();)f+=u.value.toString()+", ";t.trace("  Links: "+f)}if(n.Dd&&t.trace("  LabeledLink: "+n.Dd.toString()),n instanceof g){for(t.trace("  Placeholder: "+n.placeholder),f="",u=n.Vc;u.next();)f+=u.value.toString()+", ";for(t.trace("  Members: "+f),f="",u=n.um.k;u.next();)f+=u.value.toString()+", ";t.trace("  NestedGroups: "+f);t.trace("  Layout: "+n.ic)}}else if(n instanceof c){for(t.trace("  Path: "+n.path),t.trace("  From: "+n.ca+" "+n.sd+' "'+n.Af+'"'),t.trace("  To: "+n.fa+" "+n.Vd+' "'+n.dg+'"'),f="",u=n.sj;u.next();)f+=u.value.toString()+", ";t.trace("  LabelNodes: "+f)}}},aJ:function(n){if(n instanceof i)for(n=n.pn;n.next();){var u=n.value;for(t.trace(u.toString()),u=u.vj;u.next();)r.aJ(u.value)}else n instanceof s&&(u=" ",n.lA&&(u+="c"),n.nA&&(u+="d"),n.DA&&(u+="g"),n.WA&&(u+="m"),n.oB&&(u+="h"),n.pB&&(u+="z"),n.qB&&(u+="o"),n.uk&&(u+="s"),n.DB&&(u+="t"),n.tB&&(u+="A"),n.hx&&(u+="B"),n.jx&&(u+="L"),n.ib&&(u+="S"),n.qi&&(u+="H"),r.DC(n,1,u))},DC:function(n,i,u){for(var f="",e=0;e<i;e++)f+="  ";if(f+=n.toString(),u&&(f+=u),u=" ",u=n.visible?u+"v":u+"~",n.kf&&(u+="p"),n.oi&&(u+="m"),n.Bt&&(u+="a"),f=f+u+(" "+n.pa.toString()),n.Ea.P()&&(f+=" d:"+n.Ea.toString()),n.Ja.P()&&(f+=" n:"+n.Ja.toString()),1!==n.scale&&(f+=" s:"+n.scale),0!==n.angle&&(f+=" a:"+n.angle),null!==n.background&&(f+=" b:"+n.background.toString()),null!==n.hk&&(f+=" a:"+n.background.toString()),n instanceof a&&(f+=" elts:"+n.va.count,0!==n.IB&&(f+=" top:"+n.IB),0!==n.OA&&(f+=" left:"+n.OA),null!==n.Ht&&(f+=" itemArray#:"+t.ub(n.Ht)),n.zJ&&(f+=" cat:"+n.zJ),null!==n.data&&(f+=" data:"+n.data)),t.trace(f),n instanceof a)for(n=n.elements;n.next();)r.DC(n.value,i+1,"")},GK:function(n){for(t.trace("DelayedReferences ("+n.hg.count+")"),n=n.hg.k;n.next();){for(var i="",r=n.value.k;r.next();)i+=ne(r.value)+", ";t.trace("  "+n.key+": "+i)}}};es.Debug=r;t={xi:Object.freeze([]),xA:{},dF:0,Uw:{},wA:0,ot:"...",yt:{},$w:0,KB:[],zx:null,Dn:document.createElement("canvas").getContext("2d"),fq:"",BK:document.createElement("img"),oA:[],CB:"ontouchstart"in n,aL:"ongesturestart"in n,KE:!1,ht:null,it:null,gt:null,yw:"",kn:n.navigator&&0<n.navigator.userAgent.indexOf("534.30")&&0<n.navigator.userAgent.indexOf("Android"),gx:n.navigator&&0<n.navigator.userAgent.indexOf("MSIE 10.0"),LA:n.navigator&&0<n.navigator.userAgent.indexOf("Trident/7"),ln:0<=navigator.platform.toUpperCase().indexOf("MAC"),iH:!1,lH:!1,kH:!1,jH:!1,LE:null,mq:!1,gH:!1,hH:!1,HE:function(n,t,i){var r;return function(){var u=this,f=arguments;clearTimeout(r);r=setTimeout(function(){r=null;i||n.apply(u,f)},t);i&&!r&&n.apply(u,f)}},m:function(n){r&&r.mE&&alert(n);throw Error(n);},J:function(n,i){if(n.tb){var r="The object is frozen, so its properties cannot be set: "+n.toString();void 0!==i&&(r+="  to value: "+i);t.m(r)}},l:function(n,i,r,u){n instanceof i||(r=t.li(r),void 0!==u&&(r+="."+u),t.jc(n,i,r))},i:function(n,i,r,u){typeof n!==i&&(r=t.li(r),void 0!==u&&(r+="."+u),t.jc(n,i,r))},q:function(n,i,r){"number"==typeof n&&isFinite(n)||(i=t.li(i),void 0!==r&&(i+="."+r),t.m(i+" must be a real number type, and not NaN or Infinity: "+n))},Fa:function(n,i,r,u){n instanceof de&&n.Xe===i||(r=t.li(r),void 0!==u&&(r+="."+u),t.jc(n,"a constant of class "+t.Dg(i),r))},fp:function(n,i){"string"==typeof n?fot(n)||t.m('Color "'+n+'" is not a valid color string for '+i):n instanceof ht||t.m("Value for "+i+" must be a color string or a Brush, not "+n)},jc:function(n,i,r,u){i=t.li(i);r=t.li(r);void 0!==u&&(r+="."+u);"string"==typeof n?t.m(r+" value is not an instance of "+i+': "'+n+'"'):t.m(r+" value is not an instance of "+i+": "+n)},ha:function(n,i,r,u){r=t.li(r);void 0!==u&&(r+="."+u);t.m(r+" is not in the range "+i+": "+n)},fd:function(n){t.m(t.Dg(n)+" constructor cannot take any arguments.")},Ub:function(n){t.m("Collection was modified during iteration: "+n.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},trace:function(){},xb:function(n){return"object"==typeof n&&null!==n},Ec:null,on:function(i,r,u,f){for(r=0;r<i.length;r++){var e=i[r];t.xb(e)&&(e=t.Df(e,u,f));i[r]=e}return f||t.Ec(i)?i:n.ko.observableArray(i)},Df:function(n,i,r){if(n)for(var u in n)"__gohashid"!==u&&(n[u]=t.FJ(n,u,i,r));return n},FJ:function(i,r,u,f){var s=i[r],e,h,o;if(e=t.Ec(s)?s:Array.isArray(s)?t.on(s,r,u,f):n.ko.observable(s),f){if(f=e.bC){o=u.__gohashid;f[o]&&(f[o].dispose(),delete f[o]);o=!1;for(h in f){o=!0;break}}!o&&e.Eu&&(e.Eu.dispose(),delete e.Eu)}else e.Eu||(e.Eu=e.subscribe(function(n){e.Jo=n},null,"beforeChange")),f=e.bC,f||(e.bC=f={}),o=u.__gohashid,f[o]||(f[o]=e.subscribe(function(n){u.Ax(i,r,e.Jo,n)}));return e},isArray:function(n){return Array.isArray(n)||t.Ec&&t.Ec(n)||n instanceof NodeList||n instanceof HTMLCollection},uJ:function(n){return Array.isArray(n)||t.Ec&&t.Ec(n)},ft:function(n,i,r){t.isArray(n)||t.jc(n,"Array or NodeList or HTMLCollection",i,r)},ub:function(n){return t.Ec&&t.Ec(n)&&(n=n()),n.length},rb:function(n,i){return t.Ec&&t.Ec(n)&&(n=n()),Array.isArray(n),n[i]},kE:function(n,i,r){t.Ec&&t.Ec(n)&&(n=n());Array.isArray(n)?n[i]=r:t.m("Cannot replace an object in an HTMLCollection or NodeList at "+i)},cA:function(n,i){if(t.Ec&&t.Ec(n)&&(n=n()),Array.isArray(n))return n.indexOf(i);for(var u=n.length,r=0;r<u;r++)if(n[r]===i)return r;return-1},ej:function(n,i,r){t.Ec&&t.Ec(n)&&(n=n());Array.isArray(n)?i>=n.length?n.push(r):n.splice(i,0,r):t.m("Cannot insert an object into an HTMLCollection or NodeList: "+r+" at "+i)},fj:function(n,i){t.Ec&&t.Ec(n)&&(n=n());Array.isArray(n)?i>=n.length?n.pop():n.splice(i,1):t.m("Cannot remove an object from an HTMLCollection or NodeList at "+i)},sy:[],N:function(){var n=t.sy.pop();return void 0===n?new h:n},qc:function(n,i){var r=t.sy.pop();return void 0===r?new h(n,i):(r.x=n,r.y=i,r)},B:function(n){t.sy.push(n)},YB:[],Ml:function(){var n=t.YB.pop();return void 0===n?new st:n},qk:function(n){t.YB.push(n)},ty:[],Jf:function(){var n=t.ty.pop();return void 0===n?new p:n},wk:function(n,i,r,u){var f=t.ty.pop();return void 0===f?new p(n,i,r,u):(f.x=n,f.y=i,f.width=r,f.height=u,f)},oc:function(n){t.ty.push(n)},ZB:[],Ah:function(){var n=t.ZB.pop();return void 0===n?new hi:n},bf:function(n){t.ZB.push(n)},uy:null,u:function(){var n=t.uy;return null!==n?(t.uy=null,n):new pst},v:function(n){n.reset();t.uy=n},XB:[],Hb:function(){var n=t.XB.pop();return void 0===n?[]:n},Ca:function(n){n.length=0;t.XB.push(n)},$B:1,Fc:function(n){n.__gohashid=t.$B++},xt:function(n){var i=n.__gohashid;return void 0===i&&(i=t.$B++,n.__gohashid=i),i},ud:function(n){return n.__gohashid},g:function(n,t,i){"name"!==t&&"length"!==t&&(n[t]=i)},ka:function(n,t){t.Cy=n;es[n]=t},Qa:function(n,t){function i(){}i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n},ii:function(n){n.KH=!0},defineProperty:function(n,i,u,f,e){var h,o,c,s;t.i(n,"function","Util.defineProperty:classfunc");t.i(i,"object","Util.defineProperty:propobj");t.i(u,"function","Util.defineProperty:getter");t.i(f,"function","Util.defineProperty:setter");for(h in i){if(o=i[h],i={get:u,set:f},void 0!==e)for(c in e)i[c]=e[c];Object.defineProperty(n.prototype,h,i);e=Object.getOwnPropertyDescriptor(n.prototype,h);o&&e&&Object.defineProperty(n.prototype,o,e);r&&o&&(s=o.charAt(0).toUpperCase()+o.slice(1),o===s&&t.m('Defining capitalized property "'+s+'"!?'),Object.defineProperty(n.prototype,s,{get:function(){t.gx||t.LA||t.trace('Getting the property "'+s+'" is probably not what you intended: it is capitalized but should be spelled "'+o+'"')},set:function(){t.m('Setting the property "'+s+'" is probably not what you intended: it is capitalized but should be spelled "'+o+'"')}}));break}},A:function(n,i,u,f){var o,e,h,s;t.i(n,"function","Util.defineReadOnlyProperty:classfunc");t.i(i,"object","Util.defineReadOnlyProperty:propobj");t.i(u,"function","Util.defineReadOnlyProperty:getter");for(o in i){if(e=i[o],i={get:u,set:function(n){t.m('The property "'+e+'" is read-only and cannot be set to '+n)}},void 0!==f)for(h in f)i[h]=f[h];Object.defineProperty(n.prototype,o,i);f=Object.getOwnPropertyDescriptor(n.prototype,o);e&&f&&Object.defineProperty(n.prototype,e,f);r&&e&&(s=e.charAt(0).toUpperCase()+e.slice(1),Object.defineProperty(n.prototype,s,{get:function(){t.gx||t.LA||t.trace('Getting the property "'+s+'" is probably not what you intended: it is capitalized but should be spelled "'+e+'"')},set:function(){t.m('Setting the read-only property "'+s+'" is probably not what you intended: it is capitalized but should be spelled "'+e+'", and cannot be set anyway')}}));break}},ce:function(n,t){for(var i in t)t[i]=!0;n.prototype.uD=t},li:function(n){return void 0===n?"":"string"==typeof n?n:"function"==typeof n?t.Dg(n):null===n?"*":""},Dg:function(n){if("function"==typeof n){if(n.Cy)return n.Cy;if(n.name)return n.name;var i=n.toString(),r=i.indexOf("(");if(i=i.substring(9,r).trim())return n.Cy=i}else if("object"==typeof n&&n.constructor)return t.Dg(n.constructor);return typeof n},w:function(n,i,r){t.i(n,"function","Util.defineEnumValue:classfunc");t.i(i,"string","Util.defineEnumValue:name");t.i(r,"number","Util.defineEnumValue:num");r=new de(n,i,r);Object.freeze(r);n[i]=r;var u=n.ru;return u||(u=new gt("string",de),n.ru=u),u.add(i,r),r},en:function(n,i){if(!i)return null;t.i(n,"function","Util.findEnumValueForName:classfunc");t.i(i,"string","Util.findEnumValueForName:name");var r=n.ru;return r?r.Da(i):null},wI:function(n){var u={},t,r,i;for(t in n){for(r=!1,i=1;i<arguments.length;i++)if(arguments[i]===t){r=!0;break}r||(u[t]=n[t])}return u},nb:function(n,i){if(!n||!i)return null;var u=void 0;try{"function"==typeof i?u=i(n):"function"==typeof n.getAttribute?(u=n.getAttribute(i),null===u&&(u=void 0)):(u=n[i],t.Ec&&t.Ec(u)&&(u=u()))}catch(f){r&&t.trace("property get error: "+f.toString())}return u},Va:function(n,i,u){if(n&&i)try{if("function"==typeof i)i(n,u);else if("function"==typeof n.setAttribute)n.setAttribute(i,u);else if(t.Ec){var f=n[i];t.Ec(f)?f(u):n[i]=u}else n[i]=u}catch(e){r&&t.trace("property set error: "+e.toString())}},Gx:function(n,u){var l,v,c,s,e,f,o,h;t.i(n,"object","Setting properties requires Objects as arguments");t.i(u,"object","Setting properties requires Objects as arguments");l=r;l||(r=t);v=n instanceof a;c=n instanceof i;for(s in u){if(s||t.m("Setting properties requires non-empty property names"),e=n,f=s,(v||c)&&(o=s.indexOf("."),0<o&&(h=s.substring(0,o),v?e=n.ue(h):(e=n[h])||(e=n.Cb[h]),e?f=s.substr(o+1):t.m("Unable to find object named: "+h+" in "+n.toString()+" when trying to set property: "+s))),"_"!==f[0]&&!t.Yw(e,f))if(c&&t.Yw(n.Cb,f))e=n.Cb;else if(c&&get(n,f)){n.Xz(f,u[f]);continue}else t.m('Trying to set undefined property "'+f+'" on object: '+e.toString());e[f]=u[s];"_"===f[0]&&(o=e.Xl,o||(o=[],e.Xl=o),o.push(f))}return r=l,n},Yw:function(n,t){for(var r,i=Object.getPrototypeOf(n);i&&i!==Function;){if(i.hasOwnProperty(t)||(r=i.uD,r&&r[t]))return!0;i=Object.getPrototypeOf(i)}return!1},rE:function(n,i){var r,u,f;if(!t.xb(i)||i instanceof Element||i instanceof CanvasRenderingContext2D)return"";r="";for(u in i)"string"!=typeof u?(""===r&&(r=i+"\n"),r+="  "+u+" is not a string property\n"):"_"===u.charAt(0)||2>=u.length||(f=t.nb(i,u),null===f||"function"==typeof f||t.Yw(i,u)||(""===r&&(r=i+"\n"),r+='  unknown property "'+u+'" has value: '+f+" at "+n+"\n"));return r},ww:function(n,r){var u,f;if(r&&"number"!=typeof r&&"string"!=typeof r&&"boolean"!=typeof r&&"function"!=typeof r)if(void 0!==t.ud(r)){if(!t.Vv.contains(r))if(t.Vv.add(r),t.vv.add(t.rE(n,r)),r instanceof b||r instanceof it||r instanceof gt)for(u=r.k;u.next();)t.ww(n+"["+u.key+"]",u.value);else for(u in r)if(f=t.nb(r,u),void 0!==f&&null!==f&&t.xb(f)&&f!==r.uD){if(r instanceof ot){if(f===r.Eo)continue}else if(r instanceof a){if("data"===u||f===r.Zl)continue;if("itemArray"===u||f===r.Li)continue;if(r instanceof s&&f===r.Uj)continue}else if(!(r instanceof i))if(r instanceof at){if("archetypeGroupData"===u||f===r.xy)continue}else if(r instanceof ki){if("archetypeLinkData"===u||f===r.zy)continue;if("archetypeLabelNodeData"===u||f===r.yy)continue}else if(r instanceof te){if("archetypeNodeData"===u||f===r.Kk)continue}else if(r instanceof d){if("nodeDataArray"===u||f===r.Se)continue;if("linkDataArray"===u||f===r.gh||f===r.pm)continue;if(f===r.Gc)continue;if(f===r.hg)continue}else if(r instanceof ei||r instanceof vt||r instanceof rr)continue;t.ww(n+"."+u,f)}}else if(Array.isArray(r))for(u=0;u<r.length;u++)t.ww(n+"["+u+"]",r[u]);else t.vv.add(t.rE(n,r))},rI:function(n){return void 0===t.Vv?t.Vv=new it:t.Vv.clear(),t.vv=new bk,t.ww("",n),n=t.vv.toString(),t.vv=null,n},aK:function(n){for(var r,u,i=[],t=0;256>t;t++)i[t]=t;for(r=0,t=0;256>t;t++)r=(r+i[t]+119)%256,u=i[t],i[t]=i[r],i[r]=u;for(var r=t=0,e="",f=0;f<n.length;f++)t=(t+1)%256,r=(r+i[t])%256,u=i[t],i[t]=i[r],i[r]=u,e+=String.fromCharCode(n.charCodeAt(f)^i[(i[t]+i[r])%256]);return e},mJ:function(n){for(var i=[],t=0;256>t;t++)i["0123456789abcdef".charAt(t>>4)+"0123456789abcdef".charAt(t&15)]=String.fromCharCode(t);n.length%2&&(n="0"+n);for(var r=[],u=0,t=0;t<n.length;t+=2)r[u++]=i[n.substr(t,2)];return n=r.join(""),""===n?"0":n},Ma:function(n){return t.aK(t.mJ(n))},Ql:null,qw:"69bd1ba7ec221a8850924c6711642ef45bfd21",sI:"28fb41",tI:"2bf147"};t.Ql=function(){var u=document.createElement("canvas"),r=u.getContext("2d"),i,n;for(r[t.Ma("7ca11abfd022028846")]=t.Ma("398c3597c01238"),i=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22402913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],n=1;5>n;n++)r[t.Ma("7ca11abfd7330390")](t.Ma(i[n-1]),10,15*n+0);for(r[t.Ma("7ca11abfd022028846")]=t.Ma("39f046ebb36e4b"),n=1;5>n;n++)r[t.Ma("7ca11abfd7330390")](t.Ma(i[n-1]),10,15*n+0);return(4!==i.length||"5"!==i[0][0]||"7"!==i[3][0])&&(t.w=function(n,t){var r=new de(n,t,2),i;return Object.freeze(r),n[t]=r,i=n.ru,i||(i=new gt("string",de),n.ru=i),i.add(t,r),r}),u}();de.prototype.toString=function(){return t.Dg(this.hC)+"."+this.ec};t.A(de,{Xe:"classType"},function(){return this.hC});t.A(de,{name:"name"},function(){return this.ec});t.A(de,{value:"value"},function(){return this.PH});bk.prototype.toString=function(){return this.gC.join("")};bk.prototype.add=function(n){n&&this.gC.push(n)};t.A(fe,{k:"iterator"},function(){return this});fe.prototype.reset=fe.prototype.reset=function(){};fe.prototype.next=fe.prototype.hasNext=fe.prototype.next=function(){return!1};fe.prototype.first=fe.prototype.gb=function(){return null};fe.prototype.any=function(){return!1};fe.prototype.all=function(){return!0};fe.prototype.each=function(){};t.A(fe,{count:"count"},function(){return 0});fe.prototype.ig=function(){};fe.prototype.toString=function(){return"EmptyIterator"};t.fg=new fe;t.ce(hu,{key:!0,value:!0});t.A(hu,{k:"iterator"},function(){return this});hu.prototype.reset=hu.prototype.reset=function(){this.key=-1};hu.prototype.next=hu.prototype.hasNext=hu.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1};hu.prototype.first=hu.prototype.gb=function(){return this.key=0,this.value};hu.prototype.any=function(n){return this.key=-1,n(this.value)};hu.prototype.all=function(n){return this.key=-1,n(this.value)};hu.prototype.each=function(n){this.key=-1;n(this.value)};t.A(hu,{count:"count"},function(){return 1});hu.prototype.ig=function(){this.value=null};hu.prototype.toString=function(){return"SingletonIterator("+this.value+")"};t.ce(sr,{key:!0,value:!0});t.A(sr,{k:"iterator"},function(){return this});t.g(sr,"predicate",sr.prototype.Fl);t.defineProperty(sr,{Fl:"predicate"},function(){return this.Xj},function(n){this.Xj=n});sr.prototype.reset=sr.prototype.reset=function(){var n=this.Ld;n.Kd=null;this.cb=n.Y;this.Zc=-1};sr.prototype.next=sr.prototype.hasNext=sr.prototype.next=function(){var i=this.Ld,r;i.Y!==this.cb&&t.Ub(i);var i=i.n,u=i.length,n=++this.Zc,f=this.Xj;if(null!==f)for(;n<u;){if(r=i[n],f(r))return this.key=this.Zc=n,this.value=r,!0;n++}else{if(n<u)return this.key=n,this.value=i[n],!0;this.ig()}return!1};sr.prototype.first=sr.prototype.gb=function(){var n=this.Ld,t,i;this.cb=n.Y;this.Zc=0;var n=n.n,r=n.length,u=this.Xj;if(null!==u){for(t=0;t<r;){if(i=n[t],u(i))return this.key=this.Zc=t,this.value=i;t++}return null}return 0<r?(i=n[0],this.key=0,this.value=i):null};sr.prototype.any=function(n){var i=this.Ld,f,u;i.Kd=null;f=i.Y;this.Zc=-1;for(var e=i.n,s=e.length,o=this.Xj,r=0;r<s;r++)if(u=e[r],null===o||o(u)){if(n(u))return!0;i.Y!==f&&t.Ub(i)}return!1};sr.prototype.all=function(n){var i=this.Ld,f,u;i.Kd=null;f=i.Y;this.Zc=-1;for(var e=i.n,s=e.length,o=this.Xj,r=0;r<s;r++)if(u=e[r],null===o||o(u)){if(!n(u))return!1;i.Y!==f&&t.Ub(i)}return!0};sr.prototype.each=function(n){var i=this.Ld,f,u;i.Kd=null;f=i.Y;this.Zc=-1;for(var e=i.n,s=e.length,o=this.Xj,r=0;r<s;r++)u=e[r],(null===o||o(u))&&(n(u),i.Y!==f&&t.Ub(i))};t.A(sr,{count:"count"},function(){var t=this.Xj;if(null!==t){for(var i=0,r=this.Ld.n,u=r.length,n=0;n<u;n++)t(r[n])&&i++;return i}return this.Ld.n.length});sr.prototype.ig=function(){this.key=-1;this.value=null;this.cb=-1;this.Xj=null;this.Ld.Kd=this};sr.prototype.toString=function(){return"ListIterator@"+this.Zc+"/"+this.Ld.count};t.ce(lf,{key:!0,value:!0});t.A(lf,{k:"iterator"},function(){return this});lf.prototype.reset=lf.prototype.reset=function(){var n=this.Ld;n.yo=null;this.cb=n.Y;this.Zc=n.n.length};lf.prototype.next=lf.prototype.hasNext=lf.prototype.next=function(){var i=this.Ld,n;return(i.Y!==this.cb&&t.Ub(i),n=--this.Zc,0<=n)?(this.key=n,this.value=i.n[n],!0):(this.ig(),!1)};lf.prototype.first=lf.prototype.gb=function(){var n=this.Ld,t;return this.cb=n.Y,t=n.n,this.Zc=n=t.length-1,0<=n?(t=t[n],this.key=n,this.value=t):null};lf.prototype.any=function(n){var i=this.Ld;i.yo=null;var f=i.Y,u=i.n,r=u.length;for(this.Zc=r,r-=1;0<=r;r++){if(n(u[r]))return!0;i.Y!==f&&t.Ub(i)}return!1};lf.prototype.all=function(n){var i=this.Ld;i.yo=null;var f=i.Y,u=i.n,r=u.length;for(this.Zc=r,r-=1;0<=r;r++){if(!n(u[r]))return!1;i.Y!==f&&t.Ub(i)}return!0};lf.prototype.each=function(n){var i=this.Ld;i.yo=null;var f=i.Y,u=i.n,r=u.length;for(this.Zc=r,r-=1;0<=r;r++)n(u[r]),i.Y!==f&&t.Ub(i)};t.A(lf,{count:"count"},function(){return this.Ld.n.length});lf.prototype.ig=function(){this.key=-1;this.value=null;this.cb=-1;this.Ld.yo=this};lf.prototype.toString=function(){return"ListIteratorBackwards("+this.Zc+"/"+this.Ld.count+")"};t.ka("List",b);b.prototype.Xg=function(n){null!==this.ga&&("string"==typeof this.ga?typeof n===this.ga&&null!==n||t.jc(n,this.ga):n instanceof this.ga||t.jc(n,this.ga))};b.prototype.Zd=function(){var n=this.Y;n++;999999999<n&&(n=0);this.Y=n};b.prototype.freeze=b.prototype.freeze=function(){return this.tb=!0,this};b.prototype.thaw=b.prototype.Ra=function(){return this.tb=!1,this};b.prototype.toString=function(){return"List("+t.li(this.ga)+")#"+t.ud(this)};b.prototype.add=b.prototype.add=function(n){null!==n&&(r&&this.Xg(n),t.J(this,n),this.n.push(n),this.Zd())};b.prototype.addAll=b.prototype.Ue=function(n){var f,e,u,i;if(null===n)return this;if(t.J(this),f=this.n,t.isArray(n))for(e=t.ub(n),u=0;u<e;u++)i=t.rb(n,u),r&&this.Xg(i),f.push(i);else for(n=n.k;n.next();)i=n.value,r&&this.Xg(i),f.push(i);return this.Zd(),this};b.prototype.clear=b.prototype.clear=function(){t.J(this);this.n.length=0;this.Zd()};b.prototype.contains=b.prototype.has=b.prototype.contains=function(n){return null===n?!1:(r&&this.Xg(n),-1!==this.n.indexOf(n))};b.prototype.indexOf=b.prototype.indexOf=function(n){return null===n?-1:(r&&this.Xg(n),this.n.indexOf(n))};b.prototype.elt=b.prototype.get=b.prototype.wa=function(n){r&&t.q(n,b,"elt:i");var i=this.n;return(0>n||n>=i.length)&&t.ha(n,"0 <= i < length",b,"elt:i"),i[n]};b.prototype.setElt=b.prototype.set=b.prototype.Tg=function(n,i){r&&(this.Xg(i),t.q(n,b,"setElt:i"));var u=this.n;(0>n||n>=u.length)&&t.ha(n,"0 <= i < length",b,"setElt:i");t.J(this,n);u[n]=i};b.prototype.first=b.prototype.gb=function(){var n=this.n;return 0===n.length?null:n[0]};b.prototype.any=function(n){for(var r=this.n,u=this.Y,f=r.length,i=0;i<f;i++){if(n(r[i]))return!0;this.Y!==u&&t.Ub(this)}return!1};b.prototype.all=function(n){for(var r=this.n,u=this.Y,f=r.length,i=0;i<f;i++){if(!n(r[i]))return!1;this.Y!==u&&t.Ub(this)}return!0};b.prototype.each=function(n){for(var r=this.n,u=this.Y,f=r.length,i=0;i<f;i++)n(r[i]),this.Y!==u&&t.Ub(this)};b.prototype.insertAt=b.prototype.Pd=function(n,i){r&&(this.Xg(i),t.q(n,b,"insertAt:i"));0>n&&t.ha(n,">= 0",b,"insertAt:i");t.J(this,n);var u=this.n;return n>=u.length?u.push(i):u.splice(n,0,i),this.Zd(),!0};b.prototype.remove=b.prototype["delete"]=b.prototype.remove=function(n){if(null===n)return!1;r&&this.Xg(n);t.J(this,n);var i=this.n;return(n=i.indexOf(n),-1===n)?!1:(n===i.length-1?i.pop():i.splice(n,1),this.Zd(),!0)};b.prototype.removeAt=b.prototype.wd=function(n){r&&t.q(n,b,"removeAt:i");var i=this.n;(0>n||n>=i.length)&&t.ha(n,"0 <= i < length",b,"removeAt:i");t.J(this,n);n===i.length-1?i.pop():i.splice(n,1);this.Zd()};b.prototype.removeRange=b.prototype.removeRange=function(n,i){var u,f;r&&(t.q(n,b,"removeRange:from"),t.q(i,b,"removeRange:to"));u=this.n;(0>n||n>=u.length)&&t.ha(n,"0 <= from < length",b,"elt:from");(0>i||i>=u.length)&&t.ha(i,"0 <= to < length",b,"elt:to");t.J(this,n);f=u.slice((i||n)+1||u.length);u.length=0>n?u.length+n:n;u.push.apply(u,f);this.Zd()};b.prototype.copy=function(){for(var t=new b(this.ga),i=this.n,r=this.count,n=0;n<r;n++)t.add(i[n]);return t};b.prototype.toArray=b.prototype.Pe=function(){for(var r=this.n,t=this.count,i=Array(t),n=0;n<t;n++)i[n]=r[n];return i};b.prototype.toSet=function(){for(var t=new it(this.ga),i=this.n,r=this.count,n=0;n<r;n++)t.add(i[n]);return t};b.prototype.sort=b.prototype.sort=function(n){return r&&t.i(n,"function",b,"sort:sortfunc"),t.J(this),this.n.sort(n),this.Zd(),this};b.prototype.sortRange=b.prototype.gq=function(n,i,u){var f=this.n,o=f.length,e;if(void 0===i&&(i=0),void 0===u&&(u=o),r&&(t.i(n,"function",b,"sortRange:sortfunc"),t.q(i,b,"sortRange:from"),t.q(u,b,"sortRange:to")),t.J(this),e=u-i,1>=e)return this;if((0>i||i>=o-1)&&t.ha(i,"0 <= from < length",b,"sortRange:from"),2===e)return u=f[i],o=f[i+1],0<n(u,o)&&(f[i]=o,f[i+1]=u,this.Zd()),this;if(0===i)if(u>=o)f.sort(n);else for(e=f.slice(0,u),e.sort(n),n=0;n<u;n++)f[n]=e[n];else if(u>=o)for(e=f.slice(i),e.sort(n),n=i;n<o;n++)f[n]=e[n-i];else for(e=f.slice(i,u),e.sort(n),n=i;n<u;n++)f[n]=e[n-i];return this.Zd(),this};b.prototype.reverse=b.prototype.reverse=function(){return t.J(this),this.n.reverse(),this.Zd(),this};t.A(b,{count:"count"},function(){return this.n.length});t.A(b,{size:"size"},function(){return this.n.length});t.A(b,{length:"length"},function(){return this.n.length});t.A(b,{k:"iterator"},function(){if(0>=this.n.length)return t.fg;var n=this.Kd;return null!==n?(n.reset(),n):new sr(this)});t.A(b,{nn:"iteratorBackwards"},function(){if(0>=this.n.length)return t.fg;var n=this.yo;return null!==n?(n.reset(),n):new lf(this)});t.ce(af,{key:!0,value:!0});t.A(af,{k:"iterator"},function(){return this});af.prototype.reset=af.prototype.reset=function(){var n=this.p;n.Kd=null;this.cb=n.Y;this.Db=null};af.prototype.next=af.prototype.hasNext=af.prototype.next=function(){var i=this.p,n;return(i.Y!==this.cb&&t.Ub(i),n=this.Db,n=null===n?i.kb:n.Yb,null!==n)?(this.Db=n,this.value=n.value,this.key=n.key,!0):(this.ig(),!1)};af.prototype.first=af.prototype.gb=function(){var n=this.p,t;return(this.cb=n.Y,n=n.kb,null!==n)?(this.Db=n,t=n.value,this.key=n.key,this.value=t):null};af.prototype.any=function(n){var i=this.p,u,r;for(i.Kd=null,u=i.Y,this.Db=null,r=i.kb;null!==r;){if(n(r.value))return!0;i.Y!==u&&t.Ub(i);r=r.Yb}return!1};af.prototype.all=function(n){var i=this.p,u,r;for(i.Kd=null,u=i.Y,this.Db=null,r=i.kb;null!==r;){if(!n(r.value))return!1;i.Y!==u&&t.Ub(i);r=r.Yb}return!0};af.prototype.each=function(n){var i=this.p,u,r;for(i.Kd=null,u=i.Y,this.Db=null,r=i.kb;null!==r;)n(r.value),i.Y!==u&&t.Ub(i),r=r.Yb};t.A(af,{count:"count"},function(){return this.p.kd});af.prototype.ig=function(){this.value=this.key=null;this.cb=-1;this.p.Kd=this};af.prototype.toString=function(){return null!==this.Db?"SetIterator@"+this.Db.value:"SetIterator"};t.ka("Set",it);it.prototype.Xg=function(n){null!==this.ga&&("string"==typeof this.ga?typeof n===this.ga&&null!==n||t.jc(n,this.ga):n instanceof this.ga||t.jc(n,this.ga))};it.prototype.Zd=function(){var n=this.Y;n++;999999999<n&&(n=0);this.Y=n};it.prototype.freeze=it.prototype.freeze=function(){return this.tb=!0,this};it.prototype.thaw=it.prototype.Ra=function(){return this.tb=!1,this};it.prototype.toString=function(){return"Set("+t.li(this.ga)+")#"+t.ud(this)};it.prototype.add=it.prototype.add=function(n){if(null===n)return!1;r&&this.Xg(n);t.J(this,n);var i=n;return t.xb(n)&&(i=t.xt(n)),void 0===this.ld[i]?(this.kd++,n=new fl(n,n),this.ld[i]=n,i=this.Uh,null===i?this.kb=n:(n.Ko=i,i.Yb=n),this.Uh=n,this.Zd(),!0):!1};it.prototype.addAll=it.prototype.Ue=function(n){if(null===n)return this;if(t.J(this),t.isArray(n))for(var r=t.ub(n),i=0;i<r;i++)this.add(t.rb(n,i));else for(n=n.k;n.next();)this.add(n.value);return this};it.prototype.contains=it.prototype.has=it.prototype.contains=function(n){if(null===n)return!1;r&&this.Xg(n);var i=n;return t.xb(n)&&(i=t.ud(n),void 0===i)?!1:void 0!==this.ld[i]};it.prototype.containsAll=function(n){if(null===n)return!0;for(n=n.k;n.next();)if(!this.contains(n.value))return!1;return!0};it.prototype.containsAny=function(n){if(null===n)return!0;for(n=n.k;n.next();)if(this.contains(n.value))return!0;return!1};it.prototype.first=it.prototype.gb=function(){var n=this.kb;return null===n?null:n.value};it.prototype.any=function(n){for(var r=this.Y,i=this.kb;null!==i;){if(n(i.value))return!0;this.Y!==r&&t.Ub(this);i=i.Yb}return!1};it.prototype.all=function(n){for(var r=this.Y,i=this.kb;null!==i;){if(!n(i.value))return!1;this.Y!==r&&t.Ub(this);i=i.Yb}return!0};it.prototype.each=function(n){for(var r=this.Y,i=this.kb;null!==i;)n(i.value),this.Y!==r&&t.Ub(this),i=i.Yb};it.prototype.remove=it.prototype["delete"]=it.prototype.remove=function(n){var i,u,f;return null===n?!1:(r&&this.Xg(n),t.J(this,n),i=n,t.xb(n)&&(i=t.ud(n),void 0===i))?!1:(n=this.ld[i],void 0===n)?!1:(u=n.Yb,f=n.Ko,null!==u&&(u.Ko=f),null!==f&&(f.Yb=u),this.kb===n&&(this.kb=u),this.Uh===n&&(this.Uh=f),delete this.ld[i],this.kd--,this.Zd(),!0)};it.prototype.removeAll=function(n){if(null===n)return this;if(t.J(this),t.isArray(n))for(var r=t.ub(n),i=0;i<r;i++)this.remove(t.rb(n,i));else for(n=n.k;n.next();)this.remove(n.value);return this};it.prototype.retainAll=function(n){var i,r;if(null===n||0===this.count)return this;for(t.J(this),i=new it(this.ga),i.Ue(n),n=new b(this.ga),r=this.k;r.next();)i.contains(r.value)||n.add(r.value);for(i=n.k;i.next();)this.remove(i.value);return this};it.prototype.clear=it.prototype.clear=function(){t.J(this);this.ld={};this.kd=0;this.Uh=this.kb=null;this.Zd()};it.prototype.copy=function(){var n=new it(this.ga),t=this.ld;for(var i in t)n.add(t[i].value);return n};it.prototype.toArray=it.prototype.Pe=function(){var n=Array(this.kd),t=this.ld,i=0;for(var r in t)n[i]=t[r].value,i++;return n};it.prototype.toList=function(){var n=new b(this.ga),t=this.ld;for(var i in t)n.add(t[i].value);return n};t.A(it,{count:"count"},function(){return this.kd});t.A(it,{size:"size"},function(){return this.kd});t.A(it,{k:"iterator"},function(){if(0>=this.kd)return t.fg;var n=this.Kd;return null!==n?(n.reset(),n):new af(this)});t.ce(nf,{key:!0,value:!0});t.A(nf,{k:"iterator"},function(){return this});nf.prototype.reset=nf.prototype.reset=function(){this.cb=this.bb.Y;this.Db=null};nf.prototype.next=nf.prototype.hasNext=nf.prototype.next=function(){var i=this.bb,n;return(i.Y!==this.cb&&t.Ub(i),n=this.Db,n=null===n?i.kb:n.Yb,null!==n)?(this.Db=n,this.value=this.key=i=n.key,!0):(this.ig(),!1)};nf.prototype.first=nf.prototype.gb=function(){var n=this.bb;return this.cb=n.Y,n=n.kb,null!==n?(this.Db=n,this.value=this.key=n=n.key):null};nf.prototype.any=function(n){var r=this.bb,u=r.Y,i;for(this.Db=null,i=r.kb;null!==i;){if(n(i.key))return!0;r.Y!==u&&t.Ub(r);i=i.Yb}return!1};nf.prototype.all=function(n){var r=this.bb,u=r.Y,i;for(this.Db=null,i=r.kb;null!==i;){if(!n(i.key))return!1;r.Y!==u&&t.Ub(r);i=i.Yb}return!0};nf.prototype.each=function(n){var r=this.bb,u=r.Y,i;for(this.Db=null,i=r.kb;null!==i;)n(i.key),r.Y!==u&&t.Ub(r),i=i.Yb};t.A(nf,{count:"count"},function(){return this.bb.kd});nf.prototype.ig=function(){this.value=this.key=null;this.cb=-1};nf.prototype.toString=function(){return null!==this.Db?"MapKeySetIterator@"+this.Db.value:"MapKeySetIterator"};t.Qa(tr,it);tr.prototype.freeze=function(){return this};tr.prototype.Ra=function(){return this};tr.prototype.toString=function(){return"MapKeySet("+this.bb.toString()+")"};tr.prototype.add=tr.prototype.set=tr.prototype.add=function(){return t.m("This Set is read-only: "+this.toString()),!1};tr.prototype.contains=tr.prototype.has=tr.prototype.contains=function(n){return this.bb.contains(n)};tr.prototype.remove=tr.prototype["delete"]=tr.prototype.remove=function(){return t.m("This Set is read-only: "+this.toString()),!1};tr.prototype.clear=tr.prototype.clear=function(){t.m("This Set is read-only: "+this.toString())};tr.prototype.first=tr.prototype.gb=function(){var n=this.bb.kb;return null!==n?n.key:null};tr.prototype.any=function(n){for(var t=this.bb.kb;null!==t;){if(n(t.key))return!0;t=t.Yb}return!1};tr.prototype.all=function(n){for(var t=this.bb.kb;null!==t;){if(!n(t.key))return!1;t=t.Yb}return!0};tr.prototype.each=function(n){for(var t=this.bb.kb;null!==t;)n(t.key),t=t.Yb};tr.prototype.copy=function(){return new tr(this.bb)};tr.prototype.toSet=function(){var n=new it(this.bb.Th),t=this.bb.ld;for(var i in t)n.add(t[i].key);return n};tr.prototype.toArray=tr.prototype.Pe=function(){var n=this.bb.ld,t=Array(this.bb.kd),i=0;for(var r in n)t[i]=n[r].key,i++;return t};tr.prototype.toList=function(){var n=new b(this.ga),t=this.bb.ld;for(var i in t)n.add(t[i].key);return n};t.A(tr,{count:"count"},function(){return this.bb.kd});t.A(tr,{size:"size"},function(){return this.bb.kd});t.A(tr,{k:"iterator"},function(){return 0>=this.bb.kd?t.fg:new nf(this.bb)});t.ce(vf,{key:!0,value:!0});t.A(vf,{k:"iterator"},function(){return this});vf.prototype.reset=vf.prototype.reset=function(){var n=this.bb;n.zo=null;this.cb=n.Y;this.Db=null};vf.prototype.next=vf.prototype.hasNext=vf.prototype.next=function(){var i=this.bb,n;return(i.Y!==this.cb&&t.Ub(i),n=this.Db,n=null===n?i.kb:n.Yb,null!==n)?(this.Db=n,this.value=n.value,this.key=n.key,!0):(this.ig(),!1)};vf.prototype.first=vf.prototype.gb=function(){var n=this.bb,t;return(this.cb=n.Y,n=n.kb,null!==n)?(this.Db=n,t=n.value,this.key=n.key,this.value=t):null};vf.prototype.any=function(n){var i=this.bb,u,r;for(i.zo=null,u=i.Y,this.Db=null,r=i.kb;null!==r;){if(n(r.value))return!0;i.Y!==u&&t.Ub(i);r=r.Yb}return!1};vf.prototype.all=function(n){var i=this.bb,u,r;for(i.zo=null,u=i.Y,this.Db=null,r=i.kb;null!==r;){if(!n(r.value))return!1;i.Y!==u&&t.Ub(i);r=r.Yb}return!0};vf.prototype.each=function(n){var i=this.bb,u,r;for(i.zo=null,u=i.Y,this.Db=null,r=i.kb;null!==r;)n(r.value),i.Y!==u&&t.Ub(i),r=r.Yb};t.A(vf,{count:"count"},function(){return this.bb.kd});vf.prototype.ig=function(){this.value=this.key=null;this.cb=-1;this.bb.zo=this};vf.prototype.toString=function(){return null!==this.Db?"MapValueSetIterator@"+this.Db.value:"MapValueSetIterator"};t.ce(fl,{key:!0,value:!0});fl.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};t.ce(yf,{key:!0,value:!0});t.A(yf,{k:"iterator"},function(){return this});yf.prototype.reset=yf.prototype.reset=function(){var n=this.bb;n.Kd=null;this.cb=n.Y;this.Db=null};yf.prototype.next=yf.prototype.hasNext=yf.prototype.next=function(){var i=this.bb,n;return(i.Y!==this.cb&&t.Ub(i),n=this.Db,n=null===n?i.kb:n.Yb,null!==n)?(this.Db=n,this.key=n.key,this.value=n.value,!0):(this.ig(),!1)};yf.prototype.first=yf.prototype.gb=function(){var n=this.bb;return this.cb=n.Y,n=n.kb,null!==n?(this.Db=n,this.key=n.key,this.value=n.value,n):null};yf.prototype.any=function(n){var i=this.bb,u,r;for(i.Kd=null,u=i.Y,this.Db=null,r=i.kb;null!==r;){if(n(r))return!0;i.Y!==u&&t.Ub(i);r=r.Yb}return!1};yf.prototype.all=function(n){var i=this.bb,u,r;for(i.Kd=null,u=i.Y,this.Db=null,r=i.kb;null!==r;){if(!n(r))return!1;i.Y!==u&&t.Ub(i);r=r.Yb}return!0};yf.prototype.each=function(n){var i=this.bb,u,r;for(i.Kd=null,u=i.Y,this.Db=null,r=i.kb;null!==r;)n(r),i.Y!==u&&t.Ub(i),r=r.Yb};t.A(yf,{count:"count"},function(){return this.bb.kd});yf.prototype.ig=function(){this.value=this.key=null;this.cb=-1;this.bb.Kd=this};yf.prototype.toString=function(){return null!==this.Db?"MapIterator@"+this.Db:"MapIterator"};t.ka("Map",gt);gt.prototype.Zd=function(){var n=this.Y;n++;999999999<n&&(n=0);this.Y=n};gt.prototype.freeze=gt.prototype.freeze=function(){return this.tb=!0,this};gt.prototype.thaw=gt.prototype.Ra=function(){return this.tb=!1,this};gt.prototype.toString=function(){return"Map("+t.li(this.Th)+","+t.li(this.cj)+")#"+t.ud(this)};gt.prototype.add=gt.prototype.set=gt.prototype.add=function(n,i){var f,u;return(r&&(by(this,n),null!==this.cj&&("string"==typeof this.cj?typeof i===this.cj&&null!==i||t.jc(i,this.cj):i instanceof this.cj||t.jc(i,this.cj))),t.J(this,n),f=n,t.xb(n)&&(f=t.xt(n)),u=this.ld[f],void 0===u)?(this.kd++,u=new fl(n,i),this.ld[f]=u,f=this.Uh,null===f?this.kb=u:(u.Ko=f,f.Yb=u),this.Uh=u,this.Zd(),!0):(u.value=i,!1)};gt.prototype.addAll=gt.prototype.Ue=function(n){var f,i,u;if(null===n)return this;if(t.isArray(n))for(f=t.ub(n),i=0;i<f;i++)u=t.rb(n,i),this.add(u.key,u.value);else for(r&&t.l(n,gt,gt,"addAll:map"),n=n.k;n.next();)this.add(n.key,n.value);return this};gt.prototype.first=gt.prototype.gb=function(){return this.kb};gt.prototype.any=function(n){for(var r=this.Y,i=this.kb;null!==i;){if(n(i))return!0;this.Y!==r&&t.Ub(this);i=i.Yb}return!1};gt.prototype.all=function(n){for(var r=this.Y,i=this.kb;null!==i;){if(!n(i))return!1;this.Y!==r&&t.Ub(this);i=i.Yb}return!0};gt.prototype.each=function(n){for(var r=this.Y,i=this.kb;null!==i;)n(i),this.Y!==r&&t.Ub(this),i=i.Yb};gt.prototype.contains=gt.prototype.has=gt.prototype.contains=function(n){r&&by(this,n);var i=n;return t.xb(n)&&(i=t.ud(n),void 0===i)?!1:void 0!==this.ld[i]};gt.prototype.getValue=gt.prototype.get=gt.prototype.Da=function(n){r&&by(this,n);var i=n;return t.xb(n)&&(i=t.ud(n),void 0===i)?null:(n=this.ld[i],void 0===n?null:n.value)};gt.prototype.remove=gt.prototype["delete"]=gt.prototype.remove=function(n){var i,u,f;return null===n?!1:(r&&by(this,n),t.J(this,n),i=n,t.xb(n)&&(i=t.ud(n),void 0===i))?!1:(n=this.ld[i],void 0===n)?!1:(u=n.Yb,f=n.Ko,null!==u&&(u.Ko=f),null!==f&&(f.Yb=u),this.kb===n&&(this.kb=u),this.Uh===n&&(this.Uh=f),delete this.ld[i],this.kd--,this.Zd(),!0)};gt.prototype.clear=gt.prototype.clear=function(){t.J(this);this.ld={};this.kd=0;this.Uh=this.kb=null;this.Zd()};gt.prototype.copy=function(){var t=new gt(this.Th,this.cj),i=this.ld,r,n;for(r in i)n=i[r],t.add(n.key,n.value);return t};gt.prototype.toArray=gt.prototype.Pe=function(){var t=this.ld,i=Array(this.kd),r=0,u,n;for(u in t)n=t[u],i[r]=new fl(n.key,n.value),r++;return i};gt.prototype.toKeySet=gt.prototype.Pl=function(){return new tr(this)};t.A(gt,{count:"count"},function(){return this.kd});t.A(gt,{size:"size"},function(){return this.kd});t.A(gt,{k:"iterator"},function(){if(0>=this.count)return t.fg;var n=this.Kd;return null!==n?(n.reset(),n):new yf(this)});t.A(gt,{LK:"iteratorKeys"},function(){return 0>=this.count?t.fg:new nf(this)});t.A(gt,{JF:"iteratorValues"},function(){if(0>=this.count)return t.fg;var n=this.zo;return null!==n?(n.reset(),n):new vf(this)});t.ka("Point",h);t.ii(h);t.ce(h,{x:!0,y:!0});h.prototype.assign=function(n){this.K=n.K;this.L=n.L};h.prototype.p=function(n,t){this.K=n;this.L=t};h.prototype.setTo=h.prototype.eq=function(n,i){return r&&(t.i(n,"number",h,"setTo:x"),t.i(i,"number",h,"setTo:y")),t.J(this),this.K=n,this.L=i,this};h.prototype.set=h.prototype.set=function(n){return r&&t.l(n,h,h,"set:p"),t.J(this),this.K=n.K,this.L=n.L,this};h.prototype.copy=function(){var n=new h;return n.K=this.K,n.L=this.L,n};h.prototype.Oa=function(){return this.tb=!0,Object.freeze(this),this};h.prototype.ba=function(){return Object.isFrozen(this)?this:this.copy().freeze()};h.prototype.freeze=function(){return this.tb=!0,this};h.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,this};h.parse=function(n){var t,r,i,u;if("string"==typeof n){for(n=n.split(" "),t=0,r=0;""===n[t];)t++;for(i=n[t++],i&&(r=parseFloat(i)),u=0;""===n[t];)t++;return(i=n[t++])&&(u=parseFloat(i)),new h(r,u)}return new h};h.stringify=function(n){return n instanceof h?n.x.toString()+" "+n.y.toString():n.toString()};h.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};h.prototype.equals=h.prototype.O=function(n){return n instanceof h?this.K===n.x&&this.L===n.y:!1};h.prototype.equalTo=function(n,t){return this.K===n&&this.L===t};h.prototype.equalsApprox=h.prototype.yf=function(n){return u.I(this.K,n.x)&&u.I(this.L,n.y)};h.prototype.add=h.prototype.add=function(n){return r&&t.l(n,h,h,"add:p"),t.J(this),this.K+=n.x,this.L+=n.y,this};h.prototype.subtract=h.prototype.ju=function(n){return r&&t.l(n,h,h,"subtract:p"),t.J(this),this.K-=n.x,this.L-=n.y,this};h.prototype.offset=h.prototype.offset=function(n,i){return r&&(t.q(n,h,"offset:dx"),t.q(i,h,"offset:dy")),t.J(this),this.K+=n,this.L+=i,this};h.prototype.rotate=h.prototype.rotate=function(n){var u,f,i;return(r&&t.q(n,h,"rotate:angle"),t.J(this),0===n)?this:(u=this.K,f=this.L,0===u&&0===f)?this:(90===n?(n=0,i=1):180===n?(n=-1,i=0):270===n?(n=0,i=-1):(i=n*Math.PI/180,n=Math.cos(i),i=Math.sin(i)),this.K=n*u-i*f,this.L=i*u+n*f,this)};h.prototype.scale=h.prototype.scale=function(n,i){return r&&(t.q(n,h,"scale:sx"),t.q(i,h,"scale:sy")),this.K*=n,this.L*=i,this};h.prototype.distanceSquaredPoint=h.prototype.nk=function(n){r&&t.l(n,h,h,"distanceSquaredPoint:p");var i=n.x-this.K;return n=n.y-this.L,i*i+n*n};h.prototype.distanceSquared=h.prototype.nt=function(n,i){r&&(t.q(n,h,"distanceSquared:px"),t.q(i,h,"distanceSquared:py"));var u=n-this.K,f=i-this.L;return u*u+f*f};h.prototype.normalize=h.prototype.normalize=function(){t.J(this);var n=this.K,i=this.L,r=Math.sqrt(n*n+i*i);return 0<r&&(this.K=n/r,this.L=i/r),this};h.prototype.directionPoint=h.prototype.mj=function(n){return r&&t.l(n,h,h,"directionPoint:p"),hrt(n.x-this.K,n.y-this.L)};h.prototype.direction=h.prototype.direction=function(n,i){return r&&(t.q(n,h,"direction:px"),t.q(i,h,"direction:py")),hrt(n-this.K,i-this.L)};h.prototype.projectOntoLineSegment=function(n,i,f,e){return r&&(t.q(n,h,"projectOntoLineSegment:px"),t.q(i,h,"projectOntoLineSegment:py"),t.q(f,h,"projectOntoLineSegment:qx"),t.q(e,h,"projectOntoLineSegment:qy")),u.vn(n,i,f,e,this.K,this.L,this),this};h.prototype.projectOntoLineSegmentPoint=function(n,i){return r&&(t.l(n,h,h,"projectOntoLineSegmentPoint:p"),t.l(i,h,h,"projectOntoLineSegmentPoint:q")),u.vn(n.x,n.y,i.x,i.y,this.K,this.L,this),this};h.prototype.snapToGrid=function(n,i,f,e){return r&&(t.q(n,h,"snapToGrid:originx"),t.q(i,h,"snapToGrid:originy"),t.q(f,h,"snapToGrid:cellwidth"),t.q(e,h,"snapToGrid:cellheight")),u.rt(this.K,this.L,n,i,f,e,this),this};h.prototype.snapToGridPoint=function(n,i){return r&&(t.l(n,h,h,"snapToGridPoint:p"),t.l(i,st,h,"snapToGridPoint:q")),u.rt(this.K,this.L,n.x,n.y,i.width,i.height,this),this};h.prototype.setRectSpot=h.prototype.eu=function(n,i){return r&&(t.l(n,p,h,"setRectSpot:r"),t.l(i,e,h,"setRectSpot:spot")),t.J(this),this.K=n.x+i.x*n.width+i.offsetX,this.L=n.y+i.y*n.height+i.offsetY,this};h.prototype.setSpot=h.prototype.fu=function(n,i,u,f,o){return r&&(t.q(n,h,"setSpot:x"),t.q(i,h,"setSpot:y"),t.q(u,h,"setSpot:w"),t.q(f,h,"setSpot:h"),(0>u||0>f)&&t.m("Point.setSpot:Width and height cannot be negative"),t.l(o,e,h,"setSpot:spot")),t.J(this),this.K=n+o.x*u+o.offsetX,this.L=i+o.y*f+o.offsetY,this};h.prototype.transform=function(n){return r&&t.l(n,hi,h,"transform:t"),n.Xa(this),this};h.distanceLineSegmentSquared=ur=function(n,i,u,f,e,o){var l;r&&(t.q(n,h,"distanceLineSegmentSquared:px"),t.q(i,h,"distanceLineSegmentSquared:py"),t.q(u,h,"distanceLineSegmentSquared:ax"),t.q(f,h,"distanceLineSegmentSquared:ay"),t.q(e,h,"distanceLineSegmentSquared:bx"),t.q(o,h,"distanceLineSegmentSquared:by"));var s=e-u,c=o-f,a=s*s+c*c;return(u-=n,f-=i,l=-u*s-f*c,0>=l||l>=a)?(s=e-n,c=o-i,Math.min(u*u+f*f,s*s+c*c)):(n=s*f-c*u,n*n/a)};h.distanceSquared=yo=function(n,i,u,f){return r&&(t.q(n,h,"distanceSquared:px"),t.q(i,h,"distanceSquared:py"),t.q(u,h,"distanceSquared:qx"),t.q(f,h,"distanceSquared:qy")),n=u-n,i=f-i,n*n+i*i};h.direction=crt=function(n,i,u,f){return(r&&(t.q(n,h,"direction:px"),t.q(i,h,"direction:py"),t.q(u,h,"direction:qx"),t.q(f,h,"direction:qy")),n=u-n,i=f-i,0===n)?0<i?90:0>i?270:0:0===i?0<n?0:180:isNaN(n)||isNaN(i)?0:(f=180*Math.atan(Math.abs(i/n))/Math.PI,0>n?f=0>i?f+180:180-f:0>i&&(f=360-f),f)};t.g(h,"x",h.prototype.x);t.defineProperty(h,{x:"x"},function(){return this.K},function(n){t.J(this,n);r&&t.i(n,"number",h,"x");this.K=n});t.g(h,"y",h.prototype.y);t.defineProperty(h,{y:"y"},function(){return this.L},function(n){t.J(this,n);r&&t.i(n,"number",h,"y");this.L=n});h.prototype.isReal=h.prototype.P=function(){return isFinite(this.x)&&isFinite(this.y)};t.ka("Size",st);t.ii(st);t.ce(st,{width:!0,height:!0});st.prototype.assign=function(n){this.Ba=n.Ba;this.Aa=n.Aa};st.prototype.p=function(n,t){this.Ba=n;this.Aa=t};st.prototype.setTo=st.prototype.eq=function(n,i){return r&&(t.i(n,"number",st,"setTo:w"),t.i(i,"number",st,"setTo:h")),0>n&&t.ha(n,">= 0",st,"setTo:w"),0>i&&t.ha(i,">= 0",st,"setTo:h"),t.J(this),this.Ba=n,this.Aa=i,this};st.prototype.set=st.prototype.set=function(n){return r&&t.l(n,st,st,"set:s"),t.J(this),this.Ba=n.Ba,this.Aa=n.Aa,this};st.prototype.copy=function(){var n=new st;return n.Ba=this.Ba,n.Aa=this.Aa,n};st.prototype.Oa=function(){return this.tb=!0,Object.freeze(this),this};st.prototype.ba=function(){return Object.isFrozen(this)?this:this.copy().freeze()};st.prototype.freeze=function(){return this.tb=!0,this};st.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,this};st.parse=function(n){var t,r,i,u;if("string"==typeof n){for(n=n.split(" "),t=0,r=0;""===n[t];)t++;for(i=n[t++],i&&(r=parseFloat(i)),u=0;""===n[t];)t++;return(i=n[t++])&&(u=parseFloat(i)),new st(r,u)}return new st};st.stringify=function(n){return n instanceof st?n.width.toString()+" "+n.height.toString():n.toString()};st.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};st.prototype.equals=st.prototype.O=function(n){return n instanceof st?this.Ba===n.width&&this.Aa===n.height:!1};st.prototype.equalTo=function(n,t){return this.Ba===n&&this.Aa===t};st.prototype.equalsApprox=st.prototype.yf=function(n){return u.I(this.Ba,n.width)&&u.I(this.Aa,n.height)};t.g(st,"width",st.prototype.width);t.defineProperty(st,{width:"width"},function(){return this.Ba},function(n){t.J(this,n);r&&t.i(n,"number",st,"width");0>n&&t.ha(n,">= 0",st,"width");this.Ba=n});t.g(st,"height",st.prototype.height);t.defineProperty(st,{height:"height"},function(){return this.Aa},function(n){t.J(this,n);r&&t.i(n,"number",st,"height");0>n&&t.ha(n,">= 0",st,"height");this.Aa=n});st.prototype.isReal=st.prototype.P=function(){return isFinite(this.width)&&isFinite(this.height)};t.ka("Rect",p);t.ii(p);t.ce(p,{x:!0,y:!0,width:!0,height:!0});p.prototype.assign=function(n){this.K=n.K;this.L=n.L;this.Ba=n.Ba;this.Aa=n.Aa};p.prototype.p=function(n,t,i,r){this.K=n;this.L=t;this.Ba=i;this.Aa=r};p.prototype.setTo=p.prototype.eq=function(n,i,u,f){return r&&(t.i(n,"number",p,"setTo:x"),t.i(i,"number",p,"setTo:y"),t.i(u,"number",p,"setTo:w"),t.i(f,"number",p,"setTo:h")),0>u&&t.ha(u,">= 0",p,"setTo:w"),0>f&&t.ha(f,">= 0",p,"setTo:h"),t.J(this),this.K=n,this.L=i,this.Ba=u,this.Aa=f,this};p.prototype.set=p.prototype.set=function(n){return r&&t.l(n,p,p,"set:r"),t.J(this),this.K=n.K,this.L=n.L,this.Ba=n.Ba,this.Aa=n.Aa,this};p.prototype.setPoint=p.prototype.Hf=function(n){return r&&t.l(n,h,p,"setPoint:p"),t.J(this),this.K=n.K,this.L=n.L,this};p.prototype.setSize=function(n){return r&&t.l(n,st,p,"setSize:s"),t.J(this),this.Ba=n.Ba,this.Aa=n.Aa,this};p.prototype.copy=function(){var n=new p;return n.K=this.K,n.L=this.L,n.Ba=this.Ba,n.Aa=this.Aa,n};p.prototype.Oa=function(){return this.tb=!0,Object.freeze(this),this};p.prototype.ba=function(){return Object.isFrozen(this)?this:this.copy().freeze()};p.prototype.freeze=function(){return this.tb=!0,this};p.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,this};p.parse=function(n){var t,r,i,u,f,e;if("string"==typeof n){for(n=n.split(" "),t=0,r=0;""===n[t];)t++;for(i=n[t++],i&&(r=parseFloat(i)),u=0;""===n[t];)t++;for((i=n[t++])&&(u=parseFloat(i)),f=0;""===n[t];)t++;for((i=n[t++])&&(f=parseFloat(i)),e=0;""===n[t];)t++;return(i=n[t++])&&(e=parseFloat(i)),new p(r,u,f,e)}return new p};p.stringify=function(n){return n instanceof p?n.x.toString()+" "+n.y.toString()+" "+n.width.toString()+" "+n.height.toString():n.toString()};p.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};p.prototype.equals=p.prototype.O=function(n){return n instanceof p?this.K===n.x&&this.L===n.y&&this.Ba===n.width&&this.Aa===n.height:!1};p.prototype.equalTo=function(n,t,i,r){return this.K===n&&this.L===t&&this.Ba===i&&this.Aa===r};p.prototype.equalsApprox=p.prototype.yf=function(n){return u.I(this.K,n.x)&&u.I(this.L,n.y)&&u.I(this.Ba,n.width)&&u.I(this.Aa,n.height)};p.prototype.containsPoint=p.prototype.La=function(n){return r&&t.l(n,h,p,"containsPoint:p"),this.K<=n.x&&this.K+this.Ba>=n.x&&this.L<=n.y&&this.L+this.Aa>=n.y};p.prototype.containsRect=p.prototype.kk=function(n){return r&&t.l(n,p,p,"containsRect:r"),this.K<=n.x&&n.x+n.width<=this.K+this.Ba&&this.L<=n.y&&n.y+n.height<=this.L+this.Aa};p.prototype.contains=p.prototype.contains=function(n,i,u,f){return r?(t.q(n,p,"contains:x"),t.q(i,p,"contains:y"),void 0===u?u=0:t.q(u,p,"contains:w"),void 0===f?f=0:t.q(f,p,"contains:h"),(0>u||0>f)&&t.m("Rect.contains:Width and height cannot be negative")):(void 0===u&&(u=0),void 0===f&&(f=0)),this.K<=n&&n+u<=this.K+this.Ba&&this.L<=i&&i+f<=this.L+this.Aa};p.prototype.reset=function(){t.J(this);this.Aa=this.Ba=this.L=this.K=0};p.prototype.offset=p.prototype.offset=function(n,i){return r&&(t.q(n,p,"offset:dx"),t.q(i,p,"offset:dy")),t.J(this),this.K+=n,this.L+=i,this};p.prototype.inflate=p.prototype.Wf=function(n,i){return r&&(t.q(n,p,"inflate:w"),t.q(i,p,"inflate:h")),ky(this,i,n,i,n)};p.prototype.addMargin=p.prototype.ow=function(n){return r&&t.l(n,ni,p,"addMargin:m"),ky(this,n.top,n.right,n.bottom,n.left)};p.prototype.subtractMargin=p.prototype.tK=function(n){return r&&t.l(n,ni,p,"subtractMargin:m"),ky(this,-n.top,-n.right,-n.bottom,-n.left)};p.prototype.grow=function(n,i,u,f){return r&&(t.q(n,p,"grow:t"),t.q(i,p,"grow:r"),t.q(u,p,"grow:b"),t.q(f,p,"grow:l")),ky(this,n,i,u,f)};p.prototype.intersectRect=function(n){return r&&t.l(n,p,p,"intersectRect:r"),lrt(this,n.x,n.y,n.width,n.height)};p.prototype.intersect=function(n,i,u,f){return r&&(t.q(n,p,"intersect:x"),t.q(i,p,"intersect:y"),t.q(u,p,"intersect:w"),t.q(f,p,"intersect:h"),(0>u||0>f)&&t.m("Rect.intersect:Width and height cannot be negative")),lrt(this,n,i,u,f)};p.prototype.intersectsRect=p.prototype.Xf=function(n){return r&&t.l(n,p,p,"intersectsRect:r"),this.zF(n.x,n.y,n.width,n.height)};p.prototype.intersects=p.prototype.zF=function(n,i,u,f){r&&(t.q(n,p,"intersects:x"),t.q(i,p,"intersects:y"),t.q(n,p,"intersects:w"),t.q(i,p,"intersects:h"),(0>u||0>f)&&t.m("Rect.intersects:Width and height cannot be negative"));var e=this.Ba,o=this.K;return Infinity!==e&&Infinity!==u&&(e+=o,u+=n,isNaN(u)||isNaN(e)||o>u||n>e)?!1:(n=this.Aa,u=this.L,Infinity!==n&&Infinity!==f&&(n+=u,f+=i,isNaN(f)||isNaN(n)||u>f||i>n)?!1:!0)};p.prototype.unionPoint=p.prototype.xj=function(n){return r&&t.l(n,h,p,"unionPoint:p"),tf(this,n.x,n.y,0,0)};p.prototype.unionRect=p.prototype.yj=function(n){return r&&t.l(n,p,p,"unionRect:r"),tf(this,n.K,n.L,n.Ba,n.Aa)};p.prototype.union=p.prototype.dH=function(n,i,u,f){return t.J(this),r?(t.q(n,p,"union:x"),t.q(i,p,"union:y"),void 0===u?u=0:t.q(u,p,"union:w"),void 0===f?f=0:t.q(f,p,"union:h"),(0>u||0>f)&&t.m("Rect.union:Width and height cannot be negative")):(void 0===u&&(u=0),void 0===f&&(f=0)),tf(this,n,i,u,f)};p.prototype.setSpot=p.prototype.fu=function(n,i,u){return r&&(t.q(n,p,"setSpot:x"),t.q(i,p,"setSpot:y"),t.l(u,e,p,"setSpot:spot")),t.J(this),this.K=n-u.offsetX-u.x*this.Ba,this.L=i-u.offsetY-u.y*this.Aa,this};p.contains=po=function(n,i,u,f,e,o,s,h){return r?(t.q(n,p,"contains:rx"),t.q(i,p,"contains:ry"),t.q(u,p,"contains:rw"),t.q(f,p,"contains:rh"),t.q(e,p,"contains:x"),t.q(o,p,"contains:y"),void 0===s?s=0:t.q(s,p,"contains:w"),void 0===h?h=0:t.q(h,p,"contains:h"),(0>u||0>f||0>s||0>h)&&t.m("Rect.contains:Width and height cannot be negative")):(void 0===s&&(s=0),void 0===h&&(h=0)),n<=e&&e+s<=n+u&&i<=o&&o+h<=i+f};p.intersects=function(n,i,u,f,e,o,s,h){return(r&&(t.q(n,p,"intersects:rx"),t.q(i,p,"intersects:ry"),t.q(u,p,"intersects:rw"),t.q(f,p,"intersects:rh"),t.q(e,p,"intersects:x"),t.q(o,p,"intersects:y"),t.q(s,p,"intersects:w"),t.q(h,p,"intersects:h"),(0>u||0>f||0>s||0>h)&&t.m("Rect.intersects:Width and height cannot be negative")),u+=n,s+=e,n>s||e>u)?!1:(n=f+i,h+=o,i>h||o>n?!1:!0)};t.g(p,"x",p.prototype.x);t.defineProperty(p,{x:"x"},function(){return this.K},function(n){t.J(this,n);r&&t.i(n,"number",p,"x");this.K=n});t.g(p,"y",p.prototype.y);t.defineProperty(p,{y:"y"},function(){return this.L},function(n){t.J(this,n);r&&t.i(n,"number",p,"y");this.L=n});t.g(p,"width",p.prototype.width);t.defineProperty(p,{width:"width"},function(){return this.Ba},function(n){t.J(this,n);r&&t.i(n,"number",p,"width");0>n&&t.ha(n,">= 0",p,"width");this.Ba=n});t.g(p,"height",p.prototype.height);t.defineProperty(p,{height:"height"},function(){return this.Aa},function(n){t.J(this,n);r&&t.i(n,"number",p,"height");0>n&&t.ha(n,">= 0",p,"height");this.Aa=n});t.g(p,"left",p.prototype.left);t.defineProperty(p,{left:"left"},function(){return this.K},function(n){t.J(this,n);r&&t.i(n,"number",p,"left");this.K=n});t.g(p,"top",p.prototype.top);t.defineProperty(p,{top:"top"},function(){return this.L},function(n){t.J(this,n);r&&t.i(n,"number",p,"top");this.L=n});t.g(p,"right",p.prototype.right);t.defineProperty(p,{right:"right"},function(){return this.K+this.Ba},function(n){t.J(this,n);r&&t.q(n,p,"right");this.K+=n-(this.K+this.Ba)});t.g(p,"bottom",p.prototype.bottom);t.defineProperty(p,{bottom:"bottom"},function(){return this.L+this.Aa},function(n){t.J(this,n);r&&t.q(n,p,"top");this.L+=n-(this.L+this.Aa)});t.g(p,"position",p.prototype.position);t.defineProperty(p,{position:"position"},function(){return new h(this.K,this.L)},function(n){t.J(this,n);r&&t.l(n,h,p,"position");this.K=n.x;this.L=n.y});t.g(p,"size",p.prototype.size);t.defineProperty(p,{size:"size"},function(){return new st(this.Ba,this.Aa)},function(n){t.J(this,n);r&&t.l(n,st,p,"size");this.Ba=n.width;this.Aa=n.height});t.g(p,"center",p.prototype.eA);t.defineProperty(p,{eA:"center"},function(){return new h(this.K+this.Ba/2,this.L+this.Aa/2)},function(n){t.J(this,n);r&&t.l(n,h,p,"center");this.K=n.x-this.Ba/2;this.L=n.y-this.Aa/2});t.g(p,"centerX",p.prototype.Ia);t.defineProperty(p,{Ia:"centerX"},function(){return this.K+this.Ba/2},function(n){t.J(this,n);r&&t.q(n,p,"centerX");this.K=n-this.Ba/2});t.g(p,"centerY",p.prototype.Ua);t.defineProperty(p,{Ua:"centerY"},function(){return this.L+this.Aa/2},function(n){t.J(this,n);r&&t.q(n,p,"centerY");this.L=n-this.Aa/2});p.prototype.isReal=p.prototype.P=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};p.prototype.isEmpty=function(){return 0===this.width&&0===this.height};t.ka("Margin",ni);t.ii(ni);t.ce(ni,{top:!0,right:!0,bottom:!0,left:!0});ni.prototype.assign=function(n){this.mh=n.mh;this.kh=n.kh;this.Wg=n.Wg;this.eh=n.eh};ni.prototype.setTo=ni.prototype.eq=function(n,i,u,f){return r&&(t.i(n,"number",ni,"setTo:t"),t.i(i,"number",ni,"setTo:r"),t.i(u,"number",ni,"setTo:b"),t.i(f,"number",ni,"setTo:l")),t.J(this),this.mh=n,this.kh=i,this.Wg=u,this.eh=f,this};ni.prototype.set=ni.prototype.set=function(n){return r&&t.l(n,ni,ni,"assign:m"),t.J(this),this.mh=n.mh,this.kh=n.kh,this.Wg=n.Wg,this.eh=n.eh,this};ni.prototype.copy=function(){var n=new ni;return n.mh=this.mh,n.kh=this.kh,n.Wg=this.Wg,n.eh=this.eh,n};ni.prototype.Oa=function(){return this.tb=!0,Object.freeze(this),this};ni.prototype.ba=function(){return Object.isFrozen(this)?this:this.copy().freeze()};ni.prototype.freeze=function(){return this.tb=!0,this};ni.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,this};ni.parse=function(n){var t,r,i,u,f,e;if("string"==typeof n){for(n=n.split(" "),t=0,r=0;""===n[t];)t++;for(i=n[t++],i&&(r=parseFloat(i)),u=void 0;""===n[t];)t++;for((i=n[t++])&&(u=parseFloat(i)),f=void 0;""===n[t];)t++;for((i=n[t++])&&(f=parseFloat(i)),e=void 0;""===n[t];)t++;return(i=n[t++])&&(e=parseFloat(i)),new ni(r,u,f,e)}return new ni};ni.stringify=function(n){return n instanceof ni?n.top.toString()+" "+n.right.toString()+" "+n.bottom.toString()+" "+n.left.toString():n.toString()};ni.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};ni.prototype.equals=ni.prototype.O=function(n){return n instanceof ni?this.mh===n.top&&this.kh===n.right&&this.Wg===n.bottom&&this.eh===n.left:!1};ni.prototype.equalTo=function(n,t,i,r){return this.mh===n&&this.kh===t&&this.Wg===i&&this.eh===r};ni.prototype.equalsApprox=ni.prototype.yf=function(n){return u.I(this.mh,n.top)&&u.I(this.kh,n.right)&&u.I(this.Wg,n.bottom)&&u.I(this.eh,n.left)};t.g(ni,"top",ni.prototype.top);t.defineProperty(ni,{top:"top"},function(){return this.mh},function(n){t.J(this,n);r&&t.q(n,ni,"top");this.mh=n});t.g(ni,"right",ni.prototype.right);t.defineProperty(ni,{right:"right"},function(){return this.kh},function(n){t.J(this,n);r&&t.q(n,ni,"right");this.kh=n});t.g(ni,"bottom",ni.prototype.bottom);t.defineProperty(ni,{bottom:"bottom"},function(){return this.Wg},function(n){t.J(this,n);r&&t.q(n,ni,"bottom");this.Wg=n});t.g(ni,"left",ni.prototype.left);t.defineProperty(ni,{left:"left"},function(){return this.eh},function(n){t.J(this,n);r&&t.q(n,ni,"left");this.eh=n});ni.prototype.isReal=ni.prototype.P=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};t.ii(hi);t.ce(hi,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0});hi.prototype.set=hi.prototype.set=function(n){return r&&t.l(n,hi,hi,"set:t"),this.m11=n.m11,this.m12=n.m12,this.m21=n.m21,this.m22=n.m22,this.dx=n.dx,this.dy=n.dy,this};hi.prototype.copy=function(){var n=new hi;return n.m11=this.m11,n.m12=this.m12,n.m21=this.m21,n.m22=this.m22,n.dx=this.dx,n.dy=this.dy,n};hi.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};hi.prototype.equals=hi.prototype.O=function(n){return n instanceof hi?this.m11===n.m11&&this.m12===n.m12&&this.m21===n.m21&&this.m22===n.m22&&this.dx===n.dx&&this.dy===n.dy:!1};hi.prototype.reset=hi.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0};hi.prototype.multiply=hi.prototype.multiply=function(n){r&&t.l(n,hi,hi,"multiply:matrix");var i=this.m12*n.m11+this.m22*n.m12,u=this.m11*n.m21+this.m21*n.m22,f=this.m12*n.m21+this.m22*n.m22,e=this.m11*n.dx+this.m21*n.dy+this.dx,o=this.m12*n.dx+this.m22*n.dy+this.dy;return this.m11=this.m11*n.m11+this.m21*n.m12,this.m12=i,this.m21=u,this.m22=f,this.dx=e,this.dy=o,this};hi.prototype.multiplyInverted=hi.prototype.XA=function(n){r&&t.l(n,hi,hi,"multiplyInverted:matrix");var i=1/(n.m11*n.m22-n.m12*n.m21),o=n.m22*i,s=-n.m12*i,u=-n.m21*i,f=n.m11*i,e=i*(n.m21*n.dy-n.m22*n.dx),h=i*(n.m12*n.dx-n.m11*n.dy);return n=this.m12*o+this.m22*s,i=this.m11*u+this.m21*f,u=this.m12*u+this.m22*f,f=this.m11*e+this.m21*h+this.dx,e=this.m12*e+this.m22*h+this.dy,this.m11=this.m11*o+this.m21*s,this.m12=n,this.m21=i,this.m22=u,this.dx=f,this.dy=e,this};hi.prototype.invert=hi.prototype.FA=function(){var n=1/(this.m11*this.m22-this.m12*this.m21),t=-this.m12*n,i=-this.m21*n,r=this.m11*n,u=n*(this.m21*this.dy-this.m22*this.dx),f=n*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*n;this.m12=t;this.m21=i;this.m22=r;this.dx=u;this.dy=f};hi.prototype.rotate=hi.prototype.rotate=function(n,i,u){var f;r&&(t.q(n,hi,"rotate:angle"),t.q(i,hi,"rotate:rx"),t.q(u,hi,"rotate:ry"));this.translate(i,u);0===n?(n=1,f=0):90===n?(n=0,f=1):180===n?(n=-1,f=0):270===n?(n=0,f=-1):(f=n*Math.PI/180,n=Math.cos(f),f=Math.sin(f));var e=this.m12*n+this.m22*f,o=this.m11*-f+this.m21*n,s=this.m12*-f+this.m22*n;this.m11=this.m11*n+this.m21*f;this.m12=e;this.m21=o;this.m22=s;this.translate(-i,-u)};hi.prototype.translate=hi.prototype.translate=function(n,i){r&&(t.q(n,hi,"translate:x"),t.q(i,hi,"translate:y"));this.dx+=this.m11*n+this.m21*i;this.dy+=this.m12*n+this.m22*i};hi.prototype.scale=hi.prototype.scale=function(n,i){void 0===i&&(i=n);r&&(t.q(n,hi,"translate:sx"),t.q(i,hi,"translate:sy"));this.m11*=n;this.m12*=n;this.m21*=i;this.m22*=i};hi.prototype.transformPoint=hi.prototype.Xa=function(n){r&&t.l(n,h,hi,"transformPoint:p");var i=n.K,u=n.L;return n.K=i*this.m11+u*this.m21+this.dx,n.L=i*this.m12+u*this.m22+this.dy,n};hi.prototype.invertedTransformPoint=hi.prototype.mi=function(n){r&&t.l(n,h,hi,"invertedTransformPoint:p");var i=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*i,o=this.m11*i,s=i*(this.m12*this.dx-this.m11*this.dy),u=n.K,f=n.L;return n.K=u*this.m22*i+f*-this.m21*i+i*(this.m21*this.dy-this.m22*this.dx),n.L=u*e+f*o+s,n};hi.prototype.transformRect=hi.prototype.ZG=function(n){r&&t.l(n,p,hi,"transformRect:rect");var f=n.K,e=n.L,o=f+n.Ba,u=e+n.Aa,s=this.m11,i=this.m12,l=this.m21,a=this.m22,v=this.dx,y=this.dy,h=f*s+e*l+v,c=f*i+e*a+y,w=o*s+e*l+v,e=o*i+e*a+y,b=f*s+u*l+v,f=f*i+u*a+y,s=o*s+u*l+v,o=o*i+u*a+y,u=h,i=c,h=Math.min(h,w),u=Math.max(u,w),i=Math.min(i,e),c=Math.max(c,e),h=Math.min(h,b),u=Math.max(u,b),i=Math.min(i,f),c=Math.max(c,f),h=Math.min(h,s),u=Math.max(u,s),i=Math.min(i,o),c=Math.max(c,o);n.K=h;n.L=i;n.Ba=u-h;n.Aa=c-i};hi.prototype.isIdentity=hi.prototype.Et=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};t.ka("Spot",e);t.ii(e);t.ce(e,{x:!0,y:!0,offsetX:!0,offsetY:!0});e.prototype.assign=function(n){this.K=n.K;this.L=n.L;this.qg=n.qg;this.rg=n.rg};e.prototype.setTo=e.prototype.eq=function(n,i,u,f){return r&&(dy(n,"setTo:x"),dy(i,"setTo:y"),gy(u,"setTo:offx"),gy(f,"setTo:offy")),t.J(this),this.K=n,this.L=i,this.qg=u,this.rg=f,this};e.prototype.set=e.prototype.set=function(n){return r&&t.l(n,e,e,"set:s"),t.J(this),this.K=n.K,this.L=n.L,this.qg=n.qg,this.rg=n.rg,this};e.prototype.copy=function(){var n=new e;return n.K=this.K,n.L=this.L,n.qg=this.qg,n.rg=this.rg,n};e.prototype.Oa=function(){return this.tb=!0,Object.freeze(this),this};e.prototype.ba=function(){return Object.isFrozen(this)?this:this.copy().freeze()};e.prototype.freeze=function(){return this.tb=!0,this};e.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,this};e.parse=vrt=function(n){var i,u,r,f,o,s;if("string"==typeof n){if(n=n.trim(),"None"===n)return t.NONE;if("TopLeft"===n)return t.my;if("Top"===n||"TopCenter"===n||"MiddleTop"===n)return t.sq;if("TopRight"===n)return t.oy;if("Left"===n||"LeftCenter"===n||"MiddleLeft"===n)return t.pq;if("Center"===n)return t.Yx;if("Right"===n||"RightCenter"===n||"MiddleRight"===n)return t.qq;if("BottomLeft"===n)return t.Tx;if("Bottom"===n||"BottomCenter"===n||"MiddleBottom"===n)return t.oq;if("BottomRight"===n)return t.Vx;if("TopSide"===n)return t.qy;if("LeftSide"===n)return t.by;if("RightSide"===n)return t.ky;if("BottomSide"===n)return t.Xx;if("TopBottomSides"===n)return t.ly;if("LeftRightSides"===n)return t.ay;if("TopLeftSides"===n)return t.ny;if("TopRightSides"===n)return t.py;if("BottomLeftSides"===n)return t.Ux;if("BottomRightSides"===n)return t.Wx;if("NotTopSide"===n)return t.iy;if("NotLeftSide"===n)return t.gy;if("NotRightSide"===n)return t.hy;if("NotBottomSide"===n)return t.ey;if("AllSides"===n)return t.Sx;if("Default"===n)return t.Zx;for(n=n.split(" "),i=0,u=0;""===n[i];)i++;for(r=n[i++],r&&(u=parseFloat(r)),f=0;""===n[i];)i++;for((r=n[i++])&&(f=parseFloat(r)),o=0;""===n[i];)i++;for((r=n[i++])&&(o=parseFloat(r)),s=0;""===n[i];)i++;return(r=n[i++])&&(s=parseFloat(r)),new e(u,f,o,s)}return new e};e.stringify=function(n){return n instanceof e?n.Cd()?n.x.toString()+" "+n.y.toString()+" "+n.offsetX.toString()+" "+n.offsetY.toString():n.toString():n.toString()};e.prototype.toString=function(){return this.Cd()?0===this.qg&&0===this.rg?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.O(t.NONE)?"None":this.O(t.my)?"TopLeft":this.O(t.sq)?"Top":this.O(t.oy)?"TopRight":this.O(t.pq)?"Left":this.O(t.Yx)?"Center":this.O(t.qq)?"Right":this.O(t.Tx)?"BottomLeft":this.O(t.oq)?"Bottom":this.O(t.Vx)?"BottomRight":this.O(t.qy)?"TopSide":this.O(t.by)?"LeftSide":this.O(t.ky)?"RightSide":this.O(t.Xx)?"BottomSide":this.O(t.ly)?"TopBottomSides":this.O(t.ay)?"LeftRightSides":this.O(t.ny)?"TopLeftSides":this.O(t.py)?"TopRightSides":this.O(t.Ux)?"BottomLeftSides":this.O(t.Wx)?"BottomRightSides":this.O(t.iy)?"NotTopSide":this.O(t.gy)?"NotLeftSide":this.O(t.hy)?"NotRightSide":this.O(t.ey)?"NotBottomSide":this.O(t.Sx)?"AllSides":this.O(t.Zx)?"Default":"None"};e.prototype.equals=e.prototype.O=function(n){return n instanceof e?(this.K===n.x||isNaN(this.K)&&isNaN(n.x))&&(this.L===n.y||isNaN(this.L)&&isNaN(n.y))&&this.qg===n.offsetX&&this.rg===n.offsetY:!1};e.prototype.opposite=function(){return new e(.5-(this.K-.5),.5-(this.L-.5),-this.qg,-this.rg)};e.prototype.includesSide=function(n){return!this.Ep()||!n.Ep()?!1:(n=n.offsetY,(this.rg&n)===n)};t.g(e,"x",e.prototype.x);t.defineProperty(e,{x:"x"},function(){return this.K},function(n){t.J(this,n);r&&dy(n,"x");this.K=n});t.g(e,"y",e.prototype.y);t.defineProperty(e,{y:"y"},function(){return this.L},function(n){t.J(this,n);r&&dy(n,"y");this.L=n});t.g(e,"offsetX",e.prototype.offsetX);t.defineProperty(e,{offsetX:"offsetX"},function(){return this.qg},function(n){t.J(this,n);r&&gy(n,"offsetX");this.qg=n});t.g(e,"offsetY",e.prototype.offsetY);t.defineProperty(e,{offsetY:"offsetY"},function(){return this.rg},function(n){t.J(this,n);r&&gy(n,"offsetY");this.rg=n});e.prototype.isSpot=e.prototype.Cd=function(){return!isNaN(this.x)&&!isNaN(this.y)};e.prototype.isNoSpot=e.prototype.Me=function(){return isNaN(this.x)||isNaN(this.y)};e.prototype.isSide=e.prototype.Ep=function(){return this.Me()&&1===this.offsetX&&0!==this.offsetY};e.prototype.isDefault=e.prototype.Tc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};t.gd=1;t.Mc=2;t.Xc=4;t.Wc=8;t.NONE=rf(new e(0,0,0,0),0).Oa();t.Zx=rf(new e(0,0,-1,0),-1).Oa();t.my=new e(0,0,0,0).Oa();t.sq=new e(.5,0,0,0).Oa();t.oy=new e(1,0,0,0).Oa();t.pq=new e(0,.5,0,0).Oa();t.Yx=new e(.5,.5,0,0).Oa();t.qq=new e(1,.5,0,0).Oa();t.Tx=new e(0,1,0,0).Oa();t.oq=new e(.5,1,0,0).Oa();t.Vx=new e(1,1,0,0).Oa();t.qy=rf(new e(0,0,1,t.gd),1).Oa();t.by=rf(new e(0,0,1,t.Mc),1).Oa();t.ky=rf(new e(0,0,1,t.Xc),1).Oa();t.Xx=rf(new e(0,0,1,t.Wc),1).Oa();t.ly=rf(new e(0,0,1,t.gd|t.Wc),1).Oa();t.ay=rf(new e(0,0,1,t.Mc|t.Xc),1).Oa();t.ny=rf(new e(0,0,1,t.gd|t.Mc),1).Oa();t.py=rf(new e(0,0,1,t.gd|t.Xc),1).Oa();t.Ux=rf(new e(0,0,1,t.Wc|t.Mc),1).Oa();t.Wx=rf(new e(0,0,1,t.Wc|t.Xc),1).Oa();t.iy=rf(new e(0,0,1,t.Mc|t.Xc|t.Wc),1).Oa();t.gy=rf(new e(0,0,1,t.gd|t.Xc|t.Wc),1).Oa();t.hy=rf(new e(0,0,1,t.gd|t.Mc|t.Wc),1).Oa();t.ey=rf(new e(0,0,1,t.gd|t.Mc|t.Xc),1).Oa();t.Sx=rf(new e(0,0,1,t.gd|t.Mc|t.Xc|t.Wc),1).Oa();e.None=pi=t.NONE;e.Default=pr=t.Zx;e.TopLeft=hr=t.my;e.TopCenter=np=t.sq;e.TopRight=tp=t.oy;e.LeftCenter=t.pq;e.Center=si=t.Yx;e.RightCenter=t.qq;e.BottomLeft=ip=t.Tx;e.BottomCenter=tv=t.oq;e.BottomRight=cu=t.Vx;e.MiddleTop=pf=t.sq;e.MiddleLeft=wf=t.pq;e.MiddleRight=lu=t.qq;e.MiddleBottom=bf=t.oq;e.Top=t.sq;e.Left=yrt=t.pq;e.Right=prt=t.qq;e.Bottom=t.oq;e.TopSide=wrt=t.qy;e.LeftSide=brt=t.by;e.RightSide=krt=t.ky;e.BottomSide=drt=t.Xx;e.TopBottomSides=t.ly;e.LeftRightSides=t.ay;e.TopLeftSides=t.ny;e.TopRightSides=t.py;e.BottomLeftSides=t.Ux;e.BottomRightSides=t.Wx;e.NotTopSide=t.iy;e.NotLeftSide=t.gy;e.NotRightSide=t.hy;e.NotBottomSide=t.ey;e.AllSides=kk=t.Sx;iv.prototype.copy=function(){var n=new iv;return n.hf[0]=this.hf[0],n.hf[1]=this.hf[1],n.hf[2]=this.hf[2],n.hf[3]=this.hf[3],n.hf[4]=this.hf[4],n.hf[5]=this.hf[5],n};rv.prototype.addColorStop=function(n,t){this.wE.push({offset:n,color:t})};ft=el.prototype;ft.arc=function(n,t,i,r,u,f){gk(this,n,t,i,r,u,f)};ft.beginPath=function(){this.path=[]};ft.bezierCurveTo=function(n,t,i,r,u,f){this.path.push(["C",n,t,i,r,u,f])};ft.clearRect=function(){};ft.clip=function(){dk(this,"clipPath",this.path,new iv)};ft.closePath=function(){this.path.push(["z"])};ft.createLinearGradient=function(n,t,i,r){var u=new rv("linear");return u.x1=n,u.y1=t,u.x2=i,u.y2=r,u};ft.createPattern=function(){};ft.createRadialGradient=function(n,t,i,r,u,f){var e=new rv("radial");return e.x1=n,e.y1=t,e.r1=i,e.x2=r,e.y2=u,e.r2=f,e};ft.drawImage=function(n,t,i,r,u,f,e,o,s){n=[t,i,r,u,f,e,o,s,n];t=this.lj;u=n[8];i={x:0,y:0,width:u.naturalWidth,height:u.naturalHeight,href:u.src};r="";f=n[6]/n[2];e=n[7]/n[3];(0!==n[4]||0!==n[5])&&(r+=" translate("+n[4]+", "+n[5]+")");(1!==f||1!==e)&&(r+=" scale("+f+", "+e+")");(0!==n[0]||0!==n[1])&&(r+=" translate("+-n[0]+", "+-n[1]+")");(0!==n[0]||0!==n[1]||n[2]!==u.naturalWidth||n[3]!==u.naturalHeight)&&(u="CLIP"+this.zw,this.zw++,f=yu(this,"clipPath",{id:u}),f.appendChild(yu(this,"rect",{x:n[0],y:n[1],width:n[2],height:n[3]})),this.Ll.appendChild(f),i["clip-path"]="url(#"+u+")");uv(this,"image",i,t,r);this.addElement("image",i)};ft.fill=function(){dk(this,"fill",this.path,this.lj)};ft.fillRect=function(n,t,i,r){nut(this,"fill",[n,t,i,r],this.lj)};ft.fillText=function(n,t,i){n=[n,t,i];t=this.textAlign;"left"===t?t="start":"right"===t?t="end":"center"===t&&(t="middle");t={x:n[1],y:n[2],style:"font: "+this.font,"text-anchor":t};uv(this,"fill",t,this.lj);this.addElement("text",t,n[0])};ft.lineTo=function(n,t){this.path.push(["L",n,t])};ft.moveTo=function(n,t){this.path.push(["M",n,t])};ft.quadraticCurveTo=function(n,t,i,r){this.path.push(["Q",n,t,i,r])};ft.rect=function(n,t,i,r){this.path.push(["M",n,t],["L",n+i,t],["L",n+i,t+r],["L",n,t+r],["z"])};ft.restore=function(){this.lj=this.stack.pop();this.path=this.stack.pop();var n=this.stack.pop();this.fillStyle=n.fillStyle;this.font=n.font;this.globalAlpha=n.globalAlpha;this.lineCap=n.lineCap;this.px=n.px;this.lineJoin=n.lineJoin;this.lineWidth=n.lineWidth;this.miterLimit=n.miterLimit;this.shadowBlur=n.shadowBlur;this.shadowColor=n.shadowColor;this.shadowOffsetX=n.shadowOffsetX;this.shadowOffsetY=n.shadowOffsetY;this.strokeStyle=n.strokeStyle;this.textAlign=n.textAlign};ft.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,px:this.px,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],n=0;n<this.path.length;n++)t.push(this.path[n]);this.stack.push(t);this.stack.push(this.lj.copy())};ft.setTransform=function(n,t,i,r,u,f){1===n&&0===t&&0===i&&1===r&&0===u&&0===f||ol(this,n,t,i,r,u,f)};ft.scale=function(){};ft.stroke=function(){dk(this,"stroke",this.path,this.lj)};ft.strokeRect=function(n,t,i,r){nut(this,"stroke",[n,t,i,r],this.lj)};ft.addElement=function(n,t,i){return n=yu(this,n,t,i),0<this.Bf.length?this.Bf[this.Bf.length-1].appendChild(n):this.Ll.appendChild(n),this.mx=n};ft.jb=function(){var i="SHADOW"+this.IG,n,r,u,f,e,t;this.IG++;n=this.addElement("filter",{id:i,width:"250%",height:"250%"},null);(0!==this.shadowOffsetX||0!==this.shadowOffsetY)&&(r=yu(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",$K:this.shadowBlur/2}),u=yu(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor}),f=yu(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"}),e=yu(this,"feOffset",{"in":"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),t=yu(this,"feMerge",{}),t.appendChild(yu(this,"feMergeNode",{"in":"offsetBlur"})),t.appendChild(yu(this,"feMergeNode",{"in":"SourceGraphic"})),n.appendChild(r),n.appendChild(u),n.appendChild(f),n.appendChild(e),n.appendChild(t));0<this.Bf.length&&this.Bf[this.Bf.length-1].setAttributeNS(null,"filter","url(#"+i+")")};u={za:4*((Math.sqrt(2)-1)/3),Aj:new h(0,0).Oa(),xH:new p(0,0,0,0).Oa(),tq:new ni(0,0,0,0).Oa(),vH:new ni(2,2,2,2).Oa(),wH:new st(Infinity,Infinity).Oa(),tH:new h(-Infinity,-Infinity).Oa(),sH:new h(Infinity,Infinity).Oa(),uq:new st(0,0).Oa(),jy:new st(1,1).Oa(),rq:new st(6,6).Oa(),$x:new st(8,8).Oa(),uH:new h(NaN,NaN).Oa(),VB:null,sqrt:function(n){var i,t;if(0>=n)return 0;if(i=u.VB,null===i){for(i=[],t=0;2e3>=t;t++)i[t]=Math.sqrt(t);u.VB=i}return 1>n?(t=1/n,2e3>=t?1/i[t|0]:Math.sqrt(n)):2e3>=n?i[n|0]:Math.sqrt(n)},I:function(n,t){var i=n-t;return.5>i&&-.5<i},sb:function(n,t){var i=n-t;return 5e-8>i&&-5e-8<i},Sd:function(n,t,i,r,u,f,e){0>=u&&(u=1e-6);var o,s,h,c;if(n<i?(s=n,o=i):(s=i,o=n),t<r?(c=t,h=r):(c=r,h=t),n===i)return c<=e&&e<=h&&n-u<=f&&f<=n+u;if(t===r)return s<=f&&f<=o&&t-u<=e&&e<=t+u;if(o+=u,s-=u,s<=f&&f<=o&&(h+=u,c-=u,c<=e&&e<=h))if(o-s>h-c)if(n-i>u||i-n>u){if(f=(r-t)/(i-n)*(f-n)+t,f-u<=e&&e<=f+u)return!0}else return!0;else if(t-r>u||r-t>u){if(e=(i-n)/(r-t)*(e-t)+n,e-u<=f&&f<=e+u)return!0}else return!0;return!1},uw:function(n,t,i,r,f,e,o,s,h,c,l,a){if(u.Sd(n,t,o,s,a,i,r)&&u.Sd(n,t,o,s,a,f,e))return u.Sd(n,t,o,s,a,c,l);var p=(n+i)/2,w=(t+r)/2,v=(i+f)/2,y=(r+e)/2;f=(f+o)/2;e=(e+s)/2;r=(p+v)/2;i=(w+y)/2;var v=(v+f)/2,y=(y+e)/2,b=(r+v)/2,k=(i+y)/2;return u.uw(n,t,p,w,r,i,b,k,h,c,l,a)||u.uw(b,k,v,y,f,e,o,s,h,c,l,a)},qI:function(n,t,i,r,u,f,e,o,s){var h=(i+u)/2,c=(r+f)/2;return s.x=(((n+i)/2+h)/2+(h+(u+e)/2)/2)/2,s.y=(((t+r)/2+c)/2+(c+(f+o)/2)/2)/2,s},pI:function(n,t,i,r,u,f,e,o){var s=(i+u)/2,h=(r+f)/2;return crt(((n+i)/2+s)/2,((t+r)/2+h)/2,(s+(u+e)/2)/2,(h+(f+o)/2)/2)},ep:function(n,t,i,r,f,e,o,s,h,c){if(u.Sd(n,t,o,s,h,i,r)&&u.Sd(n,t,o,s,h,f,e))tf(c,n,t,0,0),tf(c,o,s,0,0);else{var v=(n+i)/2,y=(t+r)/2,l=(i+f)/2,a=(r+e)/2;f=(f+o)/2;e=(e+s)/2;r=(v+l)/2;i=(y+a)/2;var l=(l+f)/2,a=(a+e)/2,p=(r+l)/2,w=(i+a)/2;u.ep(n,t,v,y,r,i,p,w,h,c);u.ep(p,w,l,a,f,e,o,s,h,c)}return c},Fe:function(n,t,i,r,f,e,o,s,h,c){if(u.Sd(n,t,o,s,h,i,r)&&u.Sd(n,t,o,s,h,f,e))0===c.length&&c.push([n,t]),c.push([o,s]);else{var v=(n+i)/2,y=(t+r)/2,l=(i+f)/2,a=(r+e)/2;f=(f+o)/2;e=(e+s)/2;r=(v+l)/2;i=(y+a)/2;var l=(l+f)/2,a=(a+e)/2,p=(r+l)/2,w=(i+a)/2;u.Fe(n,t,v,y,r,i,p,w,h,c);u.Fe(p,w,l,a,f,e,o,s,h,c)}return c},gB:function(n,t,i,r,f,e,o,s,h,c){var l,a,v,y;return u.Sd(n,t,f,e,c,i,r)?u.Sd(n,t,f,e,c,s,h):(l=(n+i)/2,a=(t+r)/2,i=(i+f)/2,r=(r+e)/2,v=(l+i)/2,y=(a+r)/2,u.gB(n,t,l,a,v,y,o,s,h,c)||u.gB(v,y,i,r,f,e,o,s,h,c))},ZK:function(n,t,i,r,u,f,e){return e.x=((n+i)/2+(i+u)/2)/2,e.y=((t+r)/2+(r+f)/2)/2,e},fB:function(n,t,i,r,f,e,o,s){var h,c,l,a;return u.Sd(n,t,f,e,o,i,r)?(tf(s,n,t,0,0),tf(s,f,e,0,0)):(h=(n+i)/2,c=(t+r)/2,i=(i+f)/2,r=(r+e)/2,l=(h+i)/2,a=(c+r)/2,u.fB(n,t,h,c,l,a,o,s),u.fB(l,a,i,r,f,e,o,s)),s},Wp:function(n,t,i,r,f,e,o,s){var h,c,l,a;return u.Sd(n,t,f,e,o,i,r)?(0===s.length&&s.push([n,t]),s.push([f,e])):(h=(n+i)/2,c=(t+r)/2,i=(i+f)/2,r=(r+e)/2,l=(h+i)/2,a=(c+r)/2,u.Wp(n,t,h,c,l,a,o,s),u.Wp(l,a,i,r,f,e,o,s)),s},dt:function(n,t,i,r,f,e,o,s,h,c,l,a,v,y){var p,w,b,k;if(0>=v&&(v=1e-6),u.Sd(n,t,o,s,v,i,r)&&u.Sd(n,t,o,s,v,f,e)){if(p=(n-o)*(c-a)-(t-s)*(h-l),!p)return!1;if(v=((n*s-t*o)*(h-l)-(n-o)*(h*a-c*l))/p,p=((n*s-t*o)*(c-a)-(t-s)*(h*a-c*l))/p,(h>l?h-l:l-h)<(c>a?c-a:a-c)){if(t<s?(h=t,o=s):(h=s,o=t),p<h||p>o)return!1}else if(n<o?h=n:(h=o,o=n),v<h||v>o)return!1;return y.x=v,y.y=p,!0}p=(n+i)/2;w=(t+r)/2;i=(i+f)/2;r=(r+e)/2;f=(f+o)/2;e=(e+s)/2;b=(p+i)/2;k=(w+r)/2;i=(i+f)/2;r=(r+e)/2;var nt=(b+i)/2,tt=(k+r)/2,d=(l-h)*(l-h)+(a-c)*(a-c),g=!1;return u.dt(n,t,p,w,b,k,nt,tt,h,c,l,a,v,y)&&(n=(y.x-h)*(y.x-h)+(y.y-c)*(y.y-c),n<d&&(d=n,g=!0)),t=y.x,p=y.y,u.dt(nt,tt,i,r,f,e,o,s,h,c,l,a,v,y)&&(n=(y.x-h)*(y.x-h)+(y.y-c)*(y.y-c),n<d?g=!0:(y.x=t,y.y=p)),g},et:function(n,t,i,r,f,e,o,s,h,c,l,a,v){var y=0,p,w;if(0>=v&&(v=1e-6),u.Sd(n,t,o,s,v,i,r)&&u.Sd(n,t,o,s,v,f,e)){if((v=(n-o)*(c-a)-(t-s)*(h-l),!v)||(p=((n*s-t*o)*(h-l)-(n-o)*(h*a-c*l))/v,w=((n*s-t*o)*(c-a)-(t-s)*(h*a-c*l))/v,p>=l))return y;if((h>l?h-l:l-h)<(c>a?c-a:a-c)){if(t<s?(h=t,n=s):(h=s,n=t),w<h||w>n)return y}else if(n<o?(h=n,n=o):h=o,p<h||p>n)return y;0<v?y++:0>v&&y--}else{var p=(n+i)/2,w=(t+r)/2,b=(i+f)/2,k=(r+e)/2;f=(f+o)/2;e=(e+s)/2;r=(p+b)/2;i=(w+k)/2;var b=(b+f)/2,k=(k+e)/2,d=(r+b)/2,g=(i+k)/2,y=y+u.et(n,t,p,w,r,i,d,g,h,c,l,a,v),y=y+u.et(d,g,b,k,f,e,o,s,h,c,l,a,v)}return y},vn:function(n,t,i,r,f,e,o){if(u.sb(n,i)){var s;return(t<r?(s=t,i=r):(s=r,i=t),r=e,r<s)?(o.x=n,o.y=s,!1):r>i?(o.x=n,o.y=i,!1):(o.x=n,o.y=r,!0)}return u.sb(t,r)?(n<i?s=n:(s=i,i=n),r=f,r<s)?(o.x=s,o.y=t,!1):r>i?(o.x=i,o.y=t,!1):(o.x=r,o.y=t,!0):(s=((n-f)*(n-i)+(t-e)*(t-r))/((i-n)*(i-n)+(r-t)*(r-t)),-5e-6>s)?(o.x=n,o.y=t,!1):1.000005<s?(o.x=i,o.y=r,!1):(o.x=n+s*(i-n),o.y=t+s*(r-t),!0)},uh:function(n,t,i,r,f,e,o,s,h){return u.I(n,i)&&u.I(t,r)?(h.x=n,h.y=t,!1):u.sb(f,o)?u.sb(n,i)?(u.vn(n,t,i,r,f,e,h),!1):(e=(r-t)/(i-n)*(f-n)+t,u.vn(n,t,i,r,f,e,h)):(s=(s-e)/(o-f),u.sb(n,i))?(e=s*(n-f)+e,t<r?(o=t,i=r):(o=r,i=t),e<o)?(h.x=n,h.y=o,!1):e>i?(h.x=n,h.y=i,!1):(h.x=n,h.y=e,!0):(o=(r-t)/(i-n),u.sb(s,o))?(u.vn(n,t,i,r,f,e,h),!1):(f=(o*n-s*f+e-t)/(o-s),u.sb(o,0))?(n<i?o=n:(o=i,i=n),f<o)?(h.x=o,h.y=t,!1):f>i?(h.x=i,h.y=t,!1):(h.x=f,h.y=t,!0):(e=o*(f-n)+t,u.vn(n,t,i,r,f,e,h))},MK:function(n,t,i,r,f){return u.uh(i.x,i.y,r.x,r.y,n.x,n.y,t.x,t.y,f)},IK:function(n,t,i,r,u,f,e,o,s,h){function l(i,r){var u=(i-n)*(i-n)+(r-t)*(r-t);u<p&&(p=u,s.x=i,s.y=r)}var p=Infinity,c,a,v,y;if(l(s.x,s.y),u<e?(c=u,a=e):(c=e,a=u),f<o?(v=u,y=e):(v=e,y=u),c=(a-c)/2+h,h=(y-v)/2+h,u=(u+e)/2,f=(f+o)/2,0===c||0===h)return s;if(.5>(i>n?i-n:n-i)){if(c=1-(i-u)*(i-u)/(c*c),0>c)return s;c=Math.sqrt(c);r=-h*c+f;l(i,h*c+f);l(i,r)}else{if(i=(r-t)/(i-n),r=1/(c*c)+i*i/(h*h),o=2*i*(t-i*n)/(h*h)-2*i*f/(h*h)-2*u/(c*c),c=o*o-4*r*(2*i*n*f/(h*h)-2*t*f/(h*h)+f*f/(h*h)+u*u/(c*c)-1+(t-i*n)*(t-i*n)/(h*h)),0>c)return s;c=Math.sqrt(c);h=(-o+c)/(2*r);l(h,i*h-i*n+t);c=(-o-c)/(2*r);l(c,i*c-i*n+t)}return s},yl:function(n,t,i,r,f,e,o,s,h){var l=1e21,a=n,v=t,c;return u.uh(n,t,n,r,f,e,o,s,h)&&(c=(h.x-f)*(h.x-f)+(h.y-e)*(h.y-e),c<l&&(l=c,a=h.x,v=h.y)),u.uh(i,t,i,r,f,e,o,s,h)&&(c=(h.x-f)*(h.x-f)+(h.y-e)*(h.y-e),c<l&&(l=c,a=h.x,v=h.y)),u.uh(n,t,i,t,f,e,o,s,h)&&(c=(h.x-f)*(h.x-f)+(h.y-e)*(h.y-e),c<l&&(l=c,a=h.x,v=h.y)),u.uh(n,r,i,r,f,e,o,s,h)&&(c=(h.x-f)*(h.x-f)+(h.y-e)*(h.y-e),c<l&&(l=c,a=h.x,v=h.y)),h.x=a,h.y=v,1e21>l},bx:function(n,t,i){var f=t.x,e=t.y,r=i.x,o=i.y,s=n.left,h=n.right,c=n.top,l=n.bottom;return f===r?(e<o?(n=e,r=o):(n=o,r=e),s<=f&&f<=h&&n<=l&&r>=c):e===o?(f<r?n=f:(n=r,r=f),c<=e&&e<=l&&n<=h&&r>=s):n.La(t)||n.La(i)||u.ax(s,c,h,c,f,e,r,o)||u.ax(h,c,h,l,f,e,r,o)||u.ax(h,l,s,l,f,e,r,o)||u.ax(s,l,s,c,f,e,r,o)?!0:!1},ax:function(n,t,i,r,f,e,o,s){return 0>=u.Bw(n,t,i,r,f,e)*u.Bw(n,t,i,r,o,s)&&0>=u.Bw(f,e,o,s,n,t)*u.Bw(f,e,o,s,i,r)},Bw:function(n,t,i,r,u,f){return i-=n,r-=t,n=u-n,t=f-t,f=n*r-t*i,0===f&&(f=n*i+t*r,0<f&&(f=(n-i)*i+(t-r)*r,0>f&&(f=0))),0>f?-1:0<f?1:0},Tt:function(n){return 0>n&&(n+=360),360<=n&&(n-=360),n},FE:function(n,t,i,r,f,e){var o=Math.PI;e||(r*=o/180,f*=o/180);e=r<f?1:-1;var h=[],c=o/2,s=r;for(r=Math.min(2*o+1e-5,Math.abs(f-r));1e-5<r;)f=s+e*Math.min(r,c),h.push(u.zI(i,s,f,n,t)),r-=Math.abs(f-s),s=f;return h},zI:function(n,t,i,r,u){var f=(i-t)/2,o=n*Math.cos(f),s=n*Math.sin(f),e=.5522847498*Math.tan(f),h=o+e*s,o=-s+e*o,s=-o,e=f+t,f=Math.cos(e),e=Math.sin(e);return{x1:r+n*Math.cos(t),y1:u+n*Math.sin(t),x2:r+h*f-o*e,y2:u+h*e+o*f,ne:r+h*f-s*e,oe:u+h*e+s*f,$b:r+n*Math.cos(i),ac:u+n*Math.sin(i)}},rt:function(n,t,i,r,u,f,e){i=Math.floor((n-i)/u)*u+i;r=Math.floor((t-r)/f)*f+r;var o=i;return i+u-n<u/2&&(o=i+u),n=r,r+f-t<f/2&&(n=r+f),e.p(o,n),e},hF:function(n,t){var u=Math.max(n,t),i=Math.min(n,t),r=1,f=1;do r=u%i,u=f=i,i=r;while(0<r);return f},OI:function(n,t,i,r){var s=0>i,h=0>r,f,o,c,e;return n<t?(f=1,o=0):(f=0,o=1),c=0===f?n:t,e=0===f?i:r,(0===f?s:h)&&(e=-e),f=o,i=0===f?i:r,(0===f?s:h)&&(i=-i),u.QI(c,0===f?n:t,e,i,0,0)},QI:function(n,t,i,r,u,f){var c;if(0<r)if(0<i){f=n*n;u=t*t;n*=i;var e=t*r,o=-u+e,h=-u+Math.sqrt(n*n+e*e);for(t=o,c=0;9999999999>c;++c){if(t=.5*(o+h),t===o||t===h)break;var s=n/(t+f),l=e/(t+u),s=s*s+l*l-1;if(0<s)o=t;else if(0>s)h=t;else break}i=f*i/(t+f)-i;r=u*r/(t+u)-r;i=Math.sqrt(i*i+r*r)}else i=Math.abs(r-t);else r=n*n-t*t,u=n*i,u<r?(r=u/r,u=n*r,f=t*Math.sqrt(Math.abs(1-r*r)),i=u-i,i=Math.sqrt(i*i+f*f)):i=Math.abs(i-n);return i}};t.ka("Geometry",rt);t.ii(rt);rt.prototype.copy=function(){var n=new rt,r;n.ga=this.ga;n.tc=this.tc;n.Cc=this.Cc;n.pb=this.pb;n.Bb=this.Bb;for(var i=this.Pk,u=i.length,f=n.Pk,t=0;t<u;t++)r=i.n[t].copy(),f.add(r);return n.Xu=this.Xu,n.Iu.assign(this.Iu),n.$a=this.$a,n.Yi=this.Yi.ba(),n.Zi=this.Zi.ba(),n.to=this.to,n.so=this.so,n.Ac=this.Ac,n};rt.Line=nu=t.w(rt,"Line",0);rt.Rectangle=kf=t.w(rt,"Rectangle",1);rt.Ellipse=uf=t.w(rt,"Ellipse",2);rt.Path=wr=t.w(rt,"Path",3);rt.prototype.Oa=function(){return this.freeze(),Object.freeze(this),this};rt.prototype.freeze=function(){var n,i,t;for(this.tb=!0,n=this.Fb,n.freeze(),i=n.length,t=0;t<i;t++)n.n[t].freeze();return this};rt.prototype.Ra=function(){var n,r,i;for(Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,n=this.Fb,n.Ra(),r=n.length,i=0;i<r;i++)n.n[i].Ra();return this};rt.prototype.equalsApprox=rt.prototype.yf=function(n){var i,r,t;if(!(n instanceof rt))return!1;if(this.type!==n.type)return this.type===nu&&n.type===wr?tut(this,n):n.type===nu&&this.type===wr?tut(n,this):!1;if(this.type===wr){if(i=this.Fb,n=n.Fb,r=i.length,r!==n.length)return!1;for(t=0;t<r;t++)if(!i.n[t].yf(n.n[t]))return!1;return!0}return u.I(this.sa,n.sa)&&u.I(this.ta,n.ta)&&u.I(this.D,n.D)&&u.I(this.F,n.F)};rt.stringify=iut=function(n){return n.toString()};rt.prototype.toString=function(n){var t,i,r,f;switch(this.type){case nu:return void 0===n?"M"+this.sa.toString()+" "+this.ta.toString()+"L"+this.D.toString()+" "+this.F.toString():"M"+this.sa.toFixed(n)+" "+this.ta.toFixed(n)+"L"+this.D.toFixed(n)+" "+this.F.toFixed(n);case kf:return t=new p(this.sa,this.ta,0,0),t.dH(this.D,this.F,0,0),void 0===n?"M"+t.x.toString()+" "+t.y.toString()+"H"+t.right.toString()+"V"+t.bottom.toString()+"H"+t.left.toString()+"z":"M"+t.x.toFixed(n)+" "+t.y.toFixed(n)+"H"+t.right.toFixed(n)+"V"+t.bottom.toFixed(n)+"H"+t.left.toFixed(n)+"z";case uf:return(t=new p(this.sa,this.ta,0,0),t.dH(this.D,this.F,0,0),void 0===n)?(i=t.left.toString()+" "+(t.y+t.height/2).toString(),r=t.right.toString()+" "+(t.y+t.height/2).toString(),"M"+i+"A"+(t.width/2).toString()+" "+(t.height/2).toString()+" 0 0 1 "+r+"A"+(t.width/2).toString()+" "+(t.height/2).toString()+" 0 0 1 "+i):(i=t.left.toFixed(n)+" "+(t.y+t.height/2).toFixed(n),r=t.right.toFixed(n)+" "+(t.y+t.height/2).toFixed(n),"M"+i+"A"+(t.width/2).toFixed(n)+" "+(t.height/2).toFixed(n)+" 0 0 1 "+r+"A"+(t.width/2).toFixed(n)+" "+(t.height/2).toFixed(n)+" 0 0 1 "+i);case wr:for(var t="",i=this.Fb,r=i.length,u=0;u<r;u++)f=i.n[u],0<u&&(t+=" x "),f.Cp&&(t+="F "),t+=f.toString(n);return t;default:return this.type.toString()}};rt.fillPath=rut=function(n){var i,r;"string"!=typeof n&&t.jc(n,"string",rt,"fillPath:str");n=n.split(/[Xx]/);for(var f=n.length,r="",u=0;u<f;u++)i=n[u],r=null!==i.match(/[Ff]/)?0===u?r+i:r+("X"+(" "===i[0]?"":" ")+i):r+((0===u?"":"X ")+"F"+(" "===i[0]?"":" ")+i);return r};rt.parse=rp=function(n,i){function a(){return c>=ot-1?!0:null!==p[c+1].match(/[A-Za-z]/)}function s(){return c++,p[c]}function d(){var n=new h(parseFloat(s()),parseFloat(s()));return y===y.toLowerCase()&&(n.x=e.x+n.x,n.y=e.y+n.y),n}function w(){return e=d()}function g(){return k=d()}function st(){var n=[parseFloat(s()),parseFloat(s()),parseFloat(s()),parseFloat(s()),parseFloat(s())];return a()||(n.push(parseFloat(s())),a()||n.push(parseFloat(s()))),y===y.toLowerCase()&&(n[2]+=e.x,n[3]+=e.y),n}function et(){return"c"!==nt.toLowerCase()&&"s"!==nt.toLowerCase()?e:new h(2*e.x-k.x,2*e.y-k.y)}var f,l;void 0===i&&(i=!1);"string"!=typeof n&&t.jc(n,"string",rt,"parse:str");n=n.replace(/,/gm," ");n=n.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");n=n.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");n=n.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2");n=n.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");n=n.replace(/([0-9])([+\-])/gm,"$1 $2");n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");n=n.replace(/[\s\r\t\n]+/gm," ");n=n.replace(/^\s+|\s+$/g,"");for(var p=n.split(" "),c=-1,y="",nt="",b=new h(0,0),k=new h(0,0),e=new h(0,0),ot=p.length,u=t.u(),r,it=!1,ut=!1,ft=!0;!(c>=ot-1);)if(nt=y,y=s(),""!==y)switch(y.toUpperCase()){case"X":ft=!0;ut=it=!1;break;case"M":for(r=w(),null===u.bc||!0===ft?(v(u,r.x,r.y,it,!1,!ut),ft=!1):u.moveTo(r.x,r.y),b=e;!a();)r=w(),u.lineTo(r.x,r.y);break;case"L":for(;!a();)r=w(),u.lineTo(r.x,r.y);break;case"H":for(;!a();)e=r=new h((y===y.toLowerCase()?e.x:0)+parseFloat(s()),e.y),u.lineTo(e.x,e.y);break;case"V":for(;!a();)e=r=new h(e.x,(y===y.toLowerCase()?e.y:0)+parseFloat(s())),u.lineTo(e.x,e.y);break;case"C":for(;!a();)f=d(),l=g(),r=w(),o(u,f.x,f.y,l.x,l.y,r.x,r.y);break;case"S":for(;!a();)f=et(),l=g(),r=w(),o(u,f.x,f.y,l.x,l.y,r.x,r.y);break;case"Q":for(;!a();)l=g(),r=w(),sw(u,l.x,l.y,r.x,r.y);break;case"T":for(;!a();)k=l=et(),r=w(),sw(u,l.x,l.y,r.x,r.y);break;case"B":for(;!a();)r=st(),u.arcTo(r[0],r[1],r[2],r[3],r[4],r[5],r[6]);break;case"A":for(;!a();){var f=Math.abs(parseFloat(s())),l=Math.abs(parseFloat(s())),ht=parseFloat(s()),ct=!!parseFloat(s()),lt=!!parseFloat(s());r=w();kat(u,f,l,ht,ct,lt,r.x,r.y)}break;case"Z":tt(u);e=b;break;case"F":for(r=null,f=1;p[c+f];)if(null!==p[c+f].match(/[Uu]/))f++;else if(null===p[c+f].match(/[A-Za-z]/))f++;else{r=p[c+f];break}r.match(/[Mm]/)?it=!0:bat(u);break;case"U":for(r=null,f=1;p[c+f];)if(null!==p[c+f].match(/[Ff]/))f++;else if(null===p[c+f].match(/[A-Za-z]/))f++;else{r=p[c+f];break}r.match(/[Mm]/)?ut=!0:u.jb(!1)}if(b=u.s,t.v(u),i)for(u=b.Fb.k;u.next();)u.value.Cp=!0;return b};rt.prototype.MA=function(){var n,i,t;if(this.$a||(n=this.Fb,this.Xu!==n.Y))return!0;for(i=n.length,t=0;t<i;t++)if(n.n[t].MA())return!0;return!1};rt.prototype.NB=function(){var n,i,t;for(this.$a=!1,n=this.Fb,this.Xu=n.Y,i=n.length,t=0;t<i;t++)n.n[t].NB()};rt.prototype.vf=function(){var n=this.Iu;n.Ra();isNaN(this.to)||isNaN(this.so)?n.p(0,0,0,0):n.p(0,0,this.to,this.so);uut(this,n,!1);tf(n,0,0,0,0);n.freeze()};rt.prototype.computeBoundsWithoutOrigin=rt.prototype.vI=function(){var n=new p;return uut(this,n,!0),n};rt.prototype.normalize=rt.prototype.normalize=function(){t.J(this);var n=this.vI();return this.offset(-n.x,-n.y),new h(-n.x,-n.y)};rt.prototype.offset=rt.prototype.offset=function(n,i){t.J(this);r&&(t.q(n,rt,"offset"),t.q(i,rt,"offset"));this.transform(1,0,0,1,n,i)};rt.prototype.scale=rt.prototype.scale=function(n,i){t.J(this);r&&(t.q(n,rt,"scale:x"),t.q(i,rt,"scale:y"),0>=n&&t.ha(n,"scale must be greater than zero",rt,"scale:x"),0>=i&&t.ha(i,"scale must be greater than zero",rt,"scale:y"));this.transform(n,0,0,i,0,0)};rt.prototype.rotate=rt.prototype.rotate=function(n,i,u){t.J(this);void 0===i&&(i=0);void 0===u&&(u=0);r&&(t.q(n,rt,"rotate:angle"),t.q(i,rt,"rotate:x"),t.q(u,rt,"rotate:y"));var f=t.Ah();f.reset();f.rotate(n,i,u);this.transform(f.m11,f.m12,f.m21,f.m22,f.dx,f.dy);t.bf(f)};rt.prototype.transform=rt.prototype.transform=function(n,i,r,u,f,e){var s,h,c,o;switch(this.type){case nu:case kf:case uf:s=this.tc;h=this.Cc;this.tc=s*n+h*r+f;this.Cc=s*i+h*u+e;s=this.pb;h=this.Bb;this.pb=s*n+h*r+f;this.Bb=s*i+h*u+e;break;case wr:for(var v=this.Fb,y=v.length,l=0;l<y;l++){c=v.n[l];s=c.sa;h=c.ta;c.sa=s*n+h*r+f;c.ta=s*i+h*u+e;for(var c=c.Ka,p=c.length,a=0;a<p;a++){o=c.n[a];switch(o.type){case fr:case df:s=o.D;h=o.F;o.D=s*n+h*r+f;o.F=s*i+h*u+e;break;case au:s=o.Gb;h=o.Xb;o.Gb=s*n+h*r+f;o.Xb=s*i+h*u+e;s=o.ye;h=o.ze;o.ye=s*n+h*r+f;o.ze=s*i+h*u+e;s=o.D;h=o.F;o.D=s*n+h*r+f;o.F=s*i+h*u+e;break;case ee:s=o.Gb;h=o.Xb;o.Gb=s*n+h*r+f;o.Xb=s*i+h*u+e;s=o.D;h=o.F;o.D=s*n+h*r+f;o.F=s*i+h*u+e;break;case br:s=o.Ia;h=o.Ua;o.Ia=s*n+h*r+f;o.Ua=s*i+h*u+e;o.radiusX*=Math.sqrt(n*n+r*r);void 0!==o.radiusY&&(o.radiusY*=Math.sqrt(i*i+u*u));break;case gf:s=o.D;h=o.F;o.D=s*n+h*r+f;o.F=s*i+h*u+e;o.radiusX*=Math.sqrt(n*n+r*r);o.radiusY*=Math.sqrt(i*i+u*u);break;default:t.m("Unknown Segment type: "+o.type)}}}}this.$a=!0};rt.prototype.Ss=function(n,i){var f=this.tc,e=this.Cc,u=this.pb,r=this.Bb,o=Math.min(f,u),s=Math.min(e,r),f=Math.abs(u-f),e=Math.abs(r-e),r=t.N();return r.x=o,r.y=s,i.Xa(r),u=new ai(r.x,r.y),r.x=o+f,r.y=s,i.Xa(r),u.Ka.add(new ut(fr,r.x,r.y)),r.x=o+f,r.y=s+e,i.Xa(r),u.Ka.add(new ut(fr,r.x,r.y)),r.x=o,r.y=s+e,i.Xa(r),u.Ka.add(new ut(fr,r.x,r.y).close()),t.B(r),n.type=wr,n.Fb.add(u),n};rt.prototype.La=function(n,i,r,f){var y=n.x,p=n.y,b=this.Tb.x-20,v,d;n=n.y;for(var a=0,h,c,e,k,o,l,w,ut=this.Fb.n,ft=ut.length,tt=0;tt<ft;tt++)if(v=ut[tt],v.Cp){if(r&&v.La(y,p,i))return!0;d=v.Ka;h=v.sa;c=v.ta;for(var it=h,rt=c,g=0;g<=d.length;g++){g!==d.length?(e=d.n[g],k=e.type,l=e.D,w=e.F):(k=fr,l=it,w=rt);switch(k){case df:if(o=nd(y,p,b,n,h,c,it,rt),!0===o)return!0;a+=o;it=l;rt=w;break;case fr:if(o=nd(y,p,b,n,h,c,l,w),!0===o)return!0;a+=o;break;case au:o=u.et(h,c,e.Gb,e.Xb,e.ye,e.ze,l,w,b,n,y,p,.5);a+=o;break;case ee:o=u.et(h,c,(h+2*e.Gb)/3,(c+2*e.Xb)/3,(e.Gb+2*l)/3,(e.Gb+2*l)/3,l,w,b,n,y,p,.5);a+=o;break;case br:case gf:k=e.type===br?os(e,v):ih(e,v,h,c);for(var et=k.length,s=null,nt=0;nt<et;nt++){if(s=k[nt],0===nt){if(o=nd(y,p,b,n,h,c,s.x1,s.y1),!0===o)return!0;a+=o}o=u.et(s.x1,s.y1,s.x2,s.y2,s.ne,s.oe,s.$b,s.ac,b,n,y,p,.5);a+=o}null!==s&&(l=s.$b,w=s.ac);break;default:t.m("Unknown Segment type: "+e.type)}h=l;c=w}if(0!==a)return!0;a=0}else if(v.La(y,p,f?i:i+2))return!0;return 0!==a};rt.prototype.getPointAlongPath=function(n){var i,o;(0>n||1<n)&&t.ha(n,"0 <= fraction <= 1",rt,"getPointAlongPath:fraction");var e=this.Fb.gb(),y=t.Hb(),r=[];r.push([e.sa,e.ta]);for(var s=e.sa,f=e.ta,l=s,w=f,a=e.Ka.n,v=a.length,c=0;c<v;c++){i=a[c];switch(i.ga){case df:y.push(r);r=[];r.push([i.D,i.F]);s=i.D;f=i.F;l=s;w=f;break;case fr:r.push([i.D,i.F]);s=i.D;f=i.F;break;case au:u.Fe(s,f,i.od,i.Ee,i.tg,i.ug,i.pb,i.Bb,.5,r);s=i.D;f=i.F;break;case ee:u.Wp(s,f,i.od,i.Ee,i.pb,i.Bb,.5,r);s=i.D;f=i.F;break;case br:for(var b=os(i,e),k=b.length,p=0;p<k;p++)o=b[p],u.Fe(s,f,o.x2,o.y2,o.ne,o.oe,o.$b,o.ac,.5,r),s=o.$b,f=o.ac;break;case gf:for(b=ih(i,e,s,f),k=b.length,p=0;p<k;p++)o=b[p],u.Fe(s,f,o.x2,o.y2,o.ne,o.oe,o.$b,o.ac,.5,r),s=o.$b,f=o.ac;break;default:t.m("Segment not of valid type")}i.Sh&&r.push([l,w])}for(y.push(r),v=0,s=y.length,e=null,f=0;f<s;f++)for(l=y[f],w=l.length,c=0;c<w;c++)r=l[c],0!==c&&(a=Math.sqrt(yo(e[0],e[1],r[0],r[1])),v+=a),e=r;for(n*=v,f=v=0;f<s;f++)for(l=y[f],w=l.length,c=0;c<w;c++){if(r=l[c],0!==c){if(a=Math.sqrt(yo(e[0],e[1],r[0],r[1])),v+a>n)return c=(n-v)/a,t.Ca(y),new h(e[0]+(r[0]-e[0])*c,e[1]+(r[1]-e[1])*c);v+=a}e=r}return t.Ca(y),null};t.g(rt,"type",rt.prototype.type);t.defineProperty(rt,{type:"type"},function(){return this.ga},function(n){this.ga!==n&&(r&&t.Fa(n,rt,rt,"type"),t.J(this,n),this.ga=n,this.$a=!0)});t.g(rt,"startX",rt.prototype.sa);t.defineProperty(rt,{sa:"startX"},function(){return this.tc},function(n){this.tc!==n&&(r&&t.q(n,rt,"startX"),t.J(this,n),this.tc=n,this.$a=!0)});t.g(rt,"startY",rt.prototype.ta);t.defineProperty(rt,{ta:"startY"},function(){return this.Cc},function(n){this.Cc!==n&&(r&&t.q(n,rt,"startY"),t.J(this,n),this.Cc=n,this.$a=!0)});t.g(rt,"endX",rt.prototype.D);t.defineProperty(rt,{D:"endX"},function(){return this.pb},function(n){this.pb!==n&&(r&&t.q(n,rt,"endX"),t.J(this,n),this.pb=n,this.$a=!0)});t.g(rt,"endY",rt.prototype.F);t.defineProperty(rt,{F:"endY"},function(){return this.Bb},function(n){this.Bb!==n&&(r&&t.q(n,rt,"endY"),t.J(this,n),this.Bb=n,this.$a=!0)});t.g(rt,"figures",rt.prototype.Fb);t.defineProperty(rt,{Fb:"figures"},function(){return this.Pk},function(n){this.Pk!==n&&(r&&t.l(n,b,rt,"figures"),t.J(this,n),this.Pk=n,this.$a=!0)});t.defineProperty(rt,{G:"spot1"},function(){return this.Yi},function(n){r&&t.l(n,e,rt,"spot1");t.J(this,n);this.Yi=n.ba()});t.defineProperty(rt,{H:"spot2"},function(){return this.Zi},function(n){r&&t.l(n,e,rt,"spot2");t.J(this,n);this.Zi=n.ba()});t.A(rt,{Tb:"bounds"},function(){return this.MA()&&(this.NB(),this.vf()),this.Iu});t.ka("PathFigure",ai);t.ii(ai);ai.prototype.copy=function(){var n=new ai,r;n.gm=this.gm;n.vo=this.vo;n.tc=this.tc;n.Cc=this.Cc;for(var i=this.vs,u=i.length,f=n.vs,t=0;t<u;t++)r=i.n[t].copy(),f.add(r);return n.Wv=this.Wv,n.$a=this.$a,n};ai.prototype.equalsApprox=ai.prototype.yf=function(n){var i,r,t;if(!(n instanceof ai&&u.I(this.sa,n.sa)&&u.I(this.ta,n.ta))||(i=this.Ka,n=n.Ka,r=i.length,r!==n.length))return!1;for(t=0;t<r;t++)if(!i.n[t].yf(n.n[t]))return!1;return!0};ft=ai.prototype;ft.toString=function(n){for(var i=void 0===n?"M"+this.sa.toString()+" "+this.ta.toString():"M"+this.sa.toFixed(n)+" "+this.ta.toFixed(n),r=this.Ka,u=r.length,t=0;t<u;t++)i+=" "+r.n[t].toString(n);return i};ft.freeze=function(){var n,i,t;for(this.tb=!0,n=this.Ka,n.freeze(),i=n.length,t=0;t<i;t++)n.n[t].freeze();return this};ft.Ra=function(){var n,i,t;for(this.tb=!1,n=this.Ka,n.Ra(),i=n.length,t=0;t<i;t++)n.n[t].Ra();return this};ft.MA=function(){var n,i,t;if(this.$a||(n=this.Ka,this.Wv!==n.Y))return!0;for(i=n.length,t=0;t<i;t++)if(n.n[t].$a)return!0;return!1};ft.NB=function(){var n,r,t,i;for(this.$a=!1,n=this.Ka,this.Wv=n.Y,r=n.length,t=0;t<r;t++)i=n.n[t],i.$a=!1,i.Bj=null};t.g(ai,"isFilled",ai.prototype.Cp);t.defineProperty(ai,{Cp:"isFilled"},function(){return this.gm},function(n){r&&t.i(n,"boolean",ai,"isFilled");t.J(this,n);this.gm=n});t.g(ai,"isShadowed",ai.prototype.qi);t.defineProperty(ai,{qi:"isShadowed"},function(){return this.vo},function(n){r&&t.i(n,"boolean",ai,"isShadowed");t.J(this,n);this.vo=n});t.g(ai,"startX",ai.prototype.sa);t.defineProperty(ai,{sa:"startX"},function(){return this.tc},function(n){r&&t.q(n,ai,"startX");t.J(this,n);this.tc=n;this.$a=!0});t.g(ai,"startY",ai.prototype.ta);t.defineProperty(ai,{ta:"startY"},function(){return this.Cc},function(n){r&&t.q(n,ai,"startY");t.J(this,n);this.Cc=n;this.$a=!0});t.g(ai,"segments",ai.prototype.Ka);t.defineProperty(ai,{Ka:"segments"},function(){return this.vs},function(n){r&&t.l(n,b,ai,"segments");t.J(this,n);this.vs=n;this.$a=!0});ai.prototype.La=function(n,i,r){for(var f,o=this.sa,s=this.ta,c=o,l=s,v=this.Ka.n,p=v.length,a=0;a<p;a++){f=v[a];switch(f.type){case df:c=f.D;l=f.F;o=f.D;s=f.F;break;case fr:if(u.Sd(o,s,f.D,f.F,r,n,i))return!0;o=f.D;s=f.F;break;case au:if(u.uw(o,s,f.Gb,f.Xb,f.ye,f.ze,f.D,f.F,.5,n,i,r))return!0;o=f.D;s=f.F;break;case ee:if(u.gB(o,s,f.Gb,f.Xb,f.D,f.F,.5,n,i,r))return!0;o=f.D;s=f.F;break;case br:case gf:for(var y=f.type===br?os(f,this):ih(f,this,o,s),w=y.length,e=null,h=0;h<w;h++)if(e=y[h],0===h&&u.Sd(o,s,e.x1,e.y1,r,n,i)||u.uw(e.x1,e.y1,e.x2,e.y2,e.ne,e.oe,e.$b,e.ac,.5,n,i,r))return!0;null!==e&&(o=e.$b,s=e.ac);break;default:t.m("Unknown Segment type: "+f.type)}if(f.Ct&&(o!==c||s!==l)&&u.Sd(o,s,c,l,r,n,i))return!0}return!1};t.ka("PathSegment",ut);t.ii(ut);ut.prototype.copy=function(){var n=new ut;return n.ga=this.ga,n.pb=this.pb,n.Bb=this.Bb,void 0!==this.od&&(n.od=this.od),void 0!==this.Ee&&(n.Ee=this.Ee),void 0!==this.tg&&(n.tg=this.tg),void 0!==this.ug&&(n.ug=this.ug),void 0!==this.Bo&&(n.Bo=this.Bo),void 0!==this.Pn&&(n.Pn=this.Pn),n.Sh=this.Sh,n.$a=this.$a,n};ut.prototype.equalsApprox=ut.prototype.yf=function(n){if(!(n instanceof ut)||this.type!==n.type||this.Ct!==n.Ct)return!1;switch(this.type){case df:case fr:return u.I(this.D,n.D)&&u.I(this.F,n.F);case au:return u.I(this.D,n.D)&&u.I(this.F,n.F)&&u.I(this.Gb,n.Gb)&&u.I(this.Xb,n.Xb)&&u.I(this.ye,n.ye)&&u.I(this.ze,n.ze);case ee:return u.I(this.D,n.D)&&u.I(this.F,n.F)&&u.I(this.Gb,n.Gb)&&u.I(this.Xb,n.Xb);case br:return u.I(this.yh,n.yh)&&u.I(this.vi,n.vi)&&u.I(this.Ia,n.Ia)&&u.I(this.Ua,n.Ua)&&u.I(this.radiusX,n.radiusX)&&u.I(this.radiusY,n.radiusY);case gf:return this.ex===n.ex&&this.ix===n.ix&&u.I(this.Rx,n.Rx)&&u.I(this.D,n.D)&&u.I(this.F,n.F)&&u.I(this.radiusX,n.radiusX)&&u.I(this.radiusY,n.radiusY);default:return!1}};ut.prototype.toString=function(n){switch(this.type){case df:n=void 0===n?"M"+this.D.toString()+" "+this.F.toString():"M"+this.D.toFixed(n)+" "+this.F.toFixed(n);break;case fr:n=void 0===n?"L"+this.D.toString()+" "+this.F.toString():"L"+this.D.toFixed(n)+" "+this.F.toFixed(n);break;case au:n=void 0===n?"C"+this.Gb.toString()+" "+this.Xb.toString()+" "+this.ye.toString()+" "+this.ze.toString()+" "+this.D.toString()+" "+this.F.toString():"C"+this.Gb.toFixed(n)+" "+this.Xb.toFixed(n)+" "+this.ye.toFixed(n)+" "+this.ze.toFixed(n)+" "+this.D.toFixed(n)+" "+this.F.toFixed(n);break;case ee:n=void 0===n?"Q"+this.Gb.toString()+" "+this.Xb.toString()+" "+this.D.toString()+" "+this.F.toString():"Q"+this.Gb.toFixed(n)+" "+this.Xb.toFixed(n)+" "+this.D.toFixed(n)+" "+this.F.toFixed(n);break;case br:n=void 0===n?"B"+this.yh.toString()+" "+this.vi.toString()+" "+this.Ia.toString()+" "+this.Ua.toString()+" "+this.radiusX:"B"+this.yh.toFixed(n)+" "+this.vi.toFixed(n)+" "+this.Ia.toFixed(n)+" "+this.Ua.toFixed(n)+" "+this.radiusX;break;case gf:n=void 0===n?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Rx.toString()+" "+(this.ix?1:0)+" "+(this.ex?1:0)+" "+this.D.toString()+" "+this.F.toString():"A"+this.radiusX.toFixed(n)+" "+this.radiusY.toFixed(n)+" "+this.Rx.toFixed(n)+" "+(this.ix?1:0)+" "+(this.ex?1:0)+" "+this.D.toFixed(n)+" "+this.F.toFixed(n);break;default:n=this.type.toString()}return n+(this.Sh?"z":"")};ut.Move=df=t.w(ut,"Move",0);ut.Line=fr=t.w(ut,"Line",1);ut.Bezier=au=t.w(ut,"Bezier",2);ut.QuadraticBezier=ee=t.w(ut,"QuadraticBezier",3);ut.Arc=br=t.w(ut,"Arc",4);ut.SvgArc=gf=t.w(ut,"SvgArc",4);ut.prototype.freeze=function(){return this.tb=!0,this};ut.prototype.Ra=function(){return this.tb=!1,this};ut.prototype.close=ut.prototype.close=function(){return this.Sh=!0,this};t.g(ut,"isClosed",ut.prototype.Ct);t.defineProperty(ut,{Ct:"isClosed"},function(){return this.Sh},function(n){this.Sh!==n&&(this.Sh=n,this.$a=!0)});t.g(ut,"type",ut.prototype.type);t.defineProperty(ut,{type:"type"},function(){return this.ga},function(n){r&&t.Fa(n,ut,ut,"type");t.J(this,n);this.ga=n;this.$a=!0});t.g(ut,"endX",ut.prototype.D);t.defineProperty(ut,{D:"endX"},function(){return this.pb},function(n){r&&t.q(n,ut,"endX");t.J(this,n);this.pb=n;this.$a=!0});t.g(ut,"endY",ut.prototype.F);t.defineProperty(ut,{F:"endY"},function(){return this.Bb},function(n){r&&t.q(n,ut,"endY");t.J(this,n);this.Bb=n;this.$a=!0});t.defineProperty(ut,{Gb:"point1X"},function(){return this.od},function(n){r&&t.q(n,ut,"point1X");t.J(this,n);this.od=n;this.$a=!0});t.defineProperty(ut,{Xb:"point1Y"},function(){return this.Ee},function(n){r&&t.q(n,ut,"point1Y");t.J(this,n);this.Ee=n;this.$a=!0});t.defineProperty(ut,{ye:"point2X"},function(){return this.tg},function(n){r&&t.q(n,ut,"point2X");t.J(this,n);this.tg=n;this.$a=!0});t.defineProperty(ut,{ze:"point2Y"},function(){return this.ug},function(n){r&&t.q(n,ut,"point2Y");t.J(this,n);this.ug=n;this.$a=!0});t.defineProperty(ut,{Ia:"centerX"},function(){return this.od},function(n){r&&t.q(n,ut,"centerX");t.J(this,n);this.od=n;this.$a=!0});t.defineProperty(ut,{Ua:"centerY"},function(){return this.Ee},function(n){r&&t.q(n,ut,"centerY");t.J(this,n);this.Ee=n;this.$a=!0});t.defineProperty(ut,{radiusX:"radiusX"},function(){return this.tg},function(n){r&&t.q(n,ut,"radiusX");0>n&&t.ha(n,">= zero",ut,"radiusX");t.J(this,n);this.tg=n;this.$a=!0});t.defineProperty(ut,{radiusY:"radiusY"},function(){return this.ug},function(n){r&&t.q(n,ut,"radiusY");0>n&&t.ha(n,">= zero",ut,"radiusY");t.J(this,n);this.ug=n;this.$a=!0});t.defineProperty(ut,{yh:"startAngle"},function(){return this.pb},function(n){this.pb!==n&&(t.J(this,n),r&&t.q(n,ut,"startAngle"),n%=360,0>n&&(n+=360),this.pb=n,this.$a=!0)});t.defineProperty(ut,{vi:"sweepAngle"},function(){return this.Bb},function(n){r&&t.q(n,ut,"sweepAngle");t.J(this,n);360<n&&(n=360);-360>n&&(n=-360);this.Bb=n;this.$a=!0});t.defineProperty(ut,{ex:"isClockwiseArc"},function(){return this.Pn},function(n){t.J(this,n);this.Pn=n;this.$a=!0});t.defineProperty(ut,{ix:"isLargeArc"},function(){return this.Bo},function(n){t.J(this,n);this.Bo=n;this.$a=!0});t.defineProperty(ut,{Rx:"xAxisRotation"},function(){return this.od},function(n){r&&t.q(n,ut,"xAxisRotation");n%=360;0>n&&(n+=360);t.J(this,n);this.od=n;this.$a=!0});t.ka("InputEvent",kt);kt.prototype.copy=function(){var n=new kt;return n.W=this.W,n.Pz.assign(this.Wd),n.Wy.assign(this.da),n.yv=this.yv,n.Fu=this.Fu,n.mv=this.mv,n.Uu=this.Uu,n.iw=this.iw,n.Hu=this.Hu,n.Ru=this.Ru,n.bv=this.bv,n.Cj=this.Cj,n.$q=this.$q,n.gw=this.gw,n.ew=this.ew,n.vg=this.vg,n};kt.prototype.toString=function(){var n="^";return this.dd&&(n+="M:"+this.dd),this.button&&(n+="B:"+this.button),this.key&&(n+="K:"+this.key),this.Ge&&(n+="C:"+this.Ge),this.mk&&(n+="D:"+this.mk),this.Ke&&(n+="h"),this.bubbles&&(n+="b"),null!==this.da&&(n+="@"+this.da.toString()),n};t.g(kt,"diagram",kt.prototype.h);t.defineProperty(kt,{h:"diagram"},function(){return this.W},function(n){this.W=n});t.g(kt,"viewPoint",kt.prototype.Wd);t.defineProperty(kt,{Wd:"viewPoint"},function(){return this.Pz},function(n){t.l(n,h,kt,"viewPoint");this.Pz.assign(n)});t.g(kt,"documentPoint",kt.prototype.da);t.defineProperty(kt,{da:"documentPoint"},function(){return this.Wy},function(n){t.l(n,h,kt,"documentPoint");this.Wy.assign(n)});t.g(kt,"modifiers",kt.prototype.dd);t.defineProperty(kt,{dd:"modifiers"},function(){return this.yv},function(n){this.yv=n});t.g(kt,"button",kt.prototype.button);t.defineProperty(kt,{button:"button"},function(){return this.Fu},function(n){this.Fu=n});t.g(kt,"key",kt.prototype.key);t.defineProperty(kt,{key:"key"},function(){return this.mv},function(n){this.mv=n});t.g(kt,"down",kt.prototype.ok);t.defineProperty(kt,{ok:"down"},function(){return this.Uu},function(n){this.Uu=n});t.g(kt,"up",kt.prototype.zj);t.defineProperty(kt,{zj:"up"},function(){return this.iw},function(n){this.iw=n});t.g(kt,"clickCount",kt.prototype.Ge);t.defineProperty(kt,{Ge:"clickCount"},function(){return this.Hu},function(n){this.Hu=n});t.g(kt,"delta",kt.prototype.mk);t.defineProperty(kt,{mk:"delta"},function(){return this.Ru},function(n){this.Ru=n});t.g(kt,"handled",kt.prototype.Ke);t.defineProperty(kt,{Ke:"handled"},function(){return this.bv},function(n){this.bv=n});t.g(kt,"bubbles",kt.prototype.bubbles);t.defineProperty(kt,{bubbles:"bubbles"},function(){return this.Cj},function(n){this.Cj=n});t.g(kt,"event",kt.prototype.event);t.defineProperty(kt,{event:"event"},function(){return this.$q},function(n){this.$q=n});t.A(kt,{lx:"isTouchEvent"},function(){var t=n.TouchEvent;return t&&this.event instanceof t});t.g(kt,"timestamp",kt.prototype.timestamp);t.defineProperty(kt,{timestamp:"timestamp"},function(){return this.gw},function(n){this.gw=n});t.g(kt,"targetDiagram",kt.prototype.zh);t.defineProperty(kt,{zh:"targetDiagram"},function(){return this.ew},function(n){this.ew=n});t.g(kt,"targetObject",kt.prototype.ke);t.defineProperty(kt,{ke:"targetObject"},function(){return this.vg},function(n){this.vg=n});t.g(kt,"control",kt.prototype.control);t.defineProperty(kt,{control:"control"},function(){return 0!=(this.dd&1)},function(n){this.dd=n?this.dd|1:this.dd&-2});t.g(kt,"shift",kt.prototype.shift);t.defineProperty(kt,{shift:"shift"},function(){return 0!=(this.dd&4)},function(n){this.dd=n?this.dd|4:this.dd&-5});t.g(kt,"alt",kt.prototype.alt);t.defineProperty(kt,{alt:"alt"},function(){return 0!=(this.dd&2)},function(n){this.dd=n?this.dd|2:this.dd&-3});t.g(kt,"meta",kt.prototype.Op);t.defineProperty(kt,{Op:"meta"},function(){return 0!=(this.dd&8)},function(n){this.dd=n?this.dd|8:this.dd&-9});t.g(kt,"left",kt.prototype.left);t.defineProperty(kt,{left:"left"},function(){return 0===this.button},function(n){this.button=n?0:2});t.g(kt,"middle",kt.prototype.MJ);t.defineProperty(kt,{MJ:"middle"},function(){return 1===this.button},function(n){this.button=n?1:0});t.g(kt,"right",kt.prototype.right);t.defineProperty(kt,{right:"right"},function(){return 2===this.button},function(n){this.button=n?2:0});t.ka("DiagramEvent",fu);fu.prototype.copy=function(){var n=new fu;return n.W=this.W,n.ec=this.ec,n.bw=this.bw,n.Mv=this.Mv,n.Gu=this.Gu,n};fu.prototype.toString=function(){var n="*"+this.name;return this.cancel&&(n+="x"),null!==this.Nx&&(n+=":"+this.Nx.toString()),null!==this.yx&&(n+="("+this.yx.toString()+")"),n};t.g(fu,"diagram",fu.prototype.h);t.defineProperty(fu,{h:"diagram"},function(){return this.W},function(n){this.W=n});t.g(fu,"name",fu.prototype.name);t.defineProperty(fu,{name:"name"},function(){return this.ec},function(n){this.ec=n});t.g(fu,"subject",fu.prototype.Nx);t.defineProperty(fu,{Nx:"subject"},function(){return this.bw},function(n){this.bw=n});t.g(fu,"parameter",fu.prototype.yx);t.defineProperty(fu,{yx:"parameter"},function(){return this.Mv},function(n){this.Mv=n});t.g(fu,"cancel",fu.prototype.cancel);t.defineProperty(fu,{cancel:"cancel"},function(){return this.Gu},function(n){this.Gu=n});t.ka("ChangedEvent",ii);ii.Transaction=ro=t.w(ii,"Transaction",-1);ii.Property=di=t.w(ii,"Property",0);ii.Insert=vr=t.w(ii,"Insert",1);ii.Remove=kr=t.w(ii,"Remove",2);ii.prototype.clear=ii.prototype.clear=function(){this.Gq=di;this.Am=this.xv="";this.Bv=this.Cv=this.Iv=this.Jo=this.Hv=this.W=this.pe=null};ii.prototype.copy=function(){var i=new ii,n;return i.pe=this.pe,i.W=this.W,i.Gq=this.Gq,i.xv=this.xv,i.Am=this.Am,i.Hv=this.Hv,n=this.Jo,i.Jo=t.xb(n)&&"function"==typeof n.ba?n.ba():n,n=this.Iv,i.Iv=t.xb(n)&&"function"==typeof n.ba?n.ba():n,n=this.Cv,i.Cv=t.xb(n)&&"function"==typeof n.ba?n.ba():n,n=this.Bv,i.Bv=t.xb(n)&&"function"==typeof n.ba?n.ba():n,i};ii.prototype.toString=function(){var n="",n=this.Bd===ro?n+"* ":this.Bd===di?n+(null!==this.ea?"!m":"!d"):n+((null!==this.ea?"!m":"!d")+this.Bd);return this.propertyName&&"string"==typeof this.propertyName&&(n+=" "+this.propertyName),this.Ff&&this.Ff!==this.propertyName&&(n+=" "+this.Ff),n+=": ",this.Bd===ro?null!==this.oldValue&&(n+=" "+this.oldValue):(null!==this.object&&(n+=ne(this.object)),null!==this.oldValue&&(n+="  old: "+ne(this.oldValue)),null!==this.ag&&(n+=" "+this.ag),null!==this.newValue&&(n+="  new: "+ne(this.newValue)),null!==this.Zf&&(n+=" "+this.Zf)),n};ii.prototype.getValue=ii.prototype.Da=function(n){return n?this.oldValue:this.newValue};ii.prototype.getParam=function(n){return n?this.ag:this.Zf};ii.prototype.canUndo=ii.prototype.canUndo=function(){return null!==this.ea||null!==this.h?!0:!1};ii.prototype.undo=ii.prototype.undo=function(){this.canUndo()&&(null!==this.ea?this.ea.changeState(this,!0):null!==this.h&&this.h.changeState(this,!0))};ii.prototype.canRedo=ii.prototype.canRedo=function(){return null!==this.ea||null!==this.h?!0:!1};ii.prototype.redo=ii.prototype.redo=function(){this.canRedo()&&(null!==this.ea?this.ea.changeState(this,!1):null!==this.h&&this.h.changeState(this,!1))};t.g(ii,"model",ii.prototype.ea);t.defineProperty(ii,{ea:"model"},function(){return this.pe},function(n){this.pe=n});t.g(ii,"diagram",ii.prototype.h);t.defineProperty(ii,{h:"diagram"},function(){return this.W},function(n){this.W=n});t.g(ii,"change",ii.prototype.Bd);t.defineProperty(ii,{Bd:"change"},function(){return this.Gq},function(n){r&&t.Fa(n,ii,ii,"change");this.Gq=n});t.g(ii,"modelChange",ii.prototype.Ff);t.defineProperty(ii,{Ff:"modelChange"},function(){return this.xv},function(n){r&&t.i(n,"string",ii,"modelChange");this.xv=n});t.g(ii,"propertyName",ii.prototype.propertyName);t.defineProperty(ii,{propertyName:"propertyName"},function(){return this.Am},function(n){r&&"string"!=typeof n&&t.l(n,Function,ii,"propertyName");this.Am=n});t.g(ii,"isTransactionFinished",ii.prototype.xJ);t.A(ii,{xJ:"isTransactionFinished"},function(){return this.Gq===ro&&("CommittedTransaction"===this.Am||"FinishedUndo"===this.Am||"FinishedRedo"===this.Am)});t.g(ii,"object",ii.prototype.object);t.defineProperty(ii,{object:"object"},function(){return this.Hv},function(n){this.Hv=n});t.g(ii,"oldValue",ii.prototype.oldValue);t.defineProperty(ii,{oldValue:"oldValue"},function(){return this.Jo},function(n){this.Jo=n});t.g(ii,"oldParam",ii.prototype.ag);t.defineProperty(ii,{ag:"oldParam"},function(){return this.Iv},function(n){this.Iv=n});t.g(ii,"newValue",ii.prototype.newValue);t.defineProperty(ii,{newValue:"newValue"},function(){return this.Cv},function(n){this.Cv=n});t.g(ii,"newParam",ii.prototype.Zf);t.defineProperty(ii,{Zf:"newParam"},function(){return this.Bv},function(n){this.Bv=n});t.ka("Model",d);d.prototype.clear=d.prototype.clear=function(){this.ge&&t.on(this.Se,"nodeDataArray",this,!0);this.Se=[];this.Gc.clear();this.hg.clear();this.ma.clear()};ft=d.prototype;ft.ou=function(){var n="";return""!==this.name&&(n+=',\n  "name": '+this.quote(this.name)),""!==this.bn&&(n+=',\n  "dataFormat": '+this.quote(this.bn)),this.hb&&(n+=',\n  "isReadOnly": '+this.hb),"key"!==this.uj&&"string"==typeof this.uj&&(n+=',\n  "nodeKeyProperty": '+this.quote(this.uj)),this.Fw&&(n+=',\n  "copiesArrays": true'),this.Ew&&(n+=',\n  "copiesArrayObjects": true'),"category"!==this.El&&"string"==typeof this.El&&(n+=',\n  "nodeCategoryProperty": '+this.quote(this.El)),n};ft.QB=function(){var t="",n=this.SA,i=!1;for(var r in n)if(!eut(r,n[r])){i=!0;break}return i&&(t=',\n  "modelData": '+out(this,n)),t+',\n  "nodeDataArray": '+td(this,this.Ng,!0)};ft.Xt=function(n){n.name&&(this.name=n.name);n.dataFormat&&(this.bn=n.dataFormat);n.isReadOnly&&(this.hb=n.isReadOnly);n.nodeKeyProperty&&(this.uj=n.nodeKeyProperty);n.copiesArrays&&(this.Fw=n.copiesArrays);n.copiesArrayObjects&&(this.Ew=n.copiesArrayObjects);n.nodeCategoryProperty&&(this.El=n.nodeCategoryProperty)};ft.hB=function(n){var t=n.modelData;t&&(fv(this,t),this.SA=t);(n=n.nodeDataArray)&&(fv(this,n),this.Ng=n)};ft.toString=function(n){var f,r,u,i;if(void 0===n&&(n=0),1<n)return this.FB();if(i=(""!==this.name?this.name:"")+" Model",0<n)for(i+="\n node data:",n=this.Ng,f=t.ub(n),r=0;r<f;r++)u=t.rb(n,r),i=i+(" "+this.Lb(u)+":"+ne(u));return i};d.prototype.toJson=d.prototype.toJSON=d.prototype.FB=function(n){return void 0===n&&(n=this.constructor===d?"go.Model":this.constructor===k?"go.GraphLinksModel":this.constructor===ci?"go.TreeModel":t.Dg(this)),'{ "class": '+this.quote(n)+this.ou()+this.QB()+"}"};d.fromJson=d.fromJSON=function(i,u){var e,s,f,o;if(void 0===u&&(u=null),u&&t.l(u,d,d,"fromJson:model"),e=null,"string"==typeof i)if(n&&n.JSON&&n.JSON.parse)try{e=n.JSON.parse(i)}catch(h){r&&t.trace("JSON.parse error: "+h.toString())}else t.trace("WARNING: no JSON.parse available");else"object"==typeof i?e=i:t.m("Unable to construct a Model from: "+i);if(null===u){if(s=null,f=e["class"],"string"==typeof f)try{o=null;0===f.indexOf("go.")?(f=f.substr(3),o=es[f]):(o=es[f])||(o=n[f]);"function"==typeof o&&(s=new o)}catch(c){}null===s||s instanceof d?u=s:t.m("Unable to construct a Model of declared class: "+e["class"])}return null===u&&(u=new k),u.Xt(e),u.hB(e),u};d.prototype.quote=function(n){for(var t,i="",u=n.length,r=0;r<u;r++)t=n[r],i='"'===t||"\\"===t?i+("\\"+t):"\b"===t?i+"\\b":"\f"===t?i+"\\f":"\n"===t?i+"\\n":"\r"===t?i+"\\r":"\t"===t?i+"\\t":i+t;return'"'+i+'"'};d.prototype.writeJsonValue=d.prototype.pu=function(n){return void 0===n?"undefined":null===n?"null":!0===n?"true":!1===n?"false":"string"==typeof n?this.quote(n):"number"==typeof n?Infinity===n?"9e9999":-Infinity===n?"-9e9999":isNaN(n)?'{"class":"NaN"}':n.toString():n instanceof Date?'{"class":"Date", "value":"'+n.toJSON()+'"}':n instanceof Number?this.pu(n.valueOf()):t.isArray(n)?td(this,n):t.xb(n)?out(this,n):"function"==typeof n?"null":n.toString()};t.g(d,"name",d.prototype.name);t.defineProperty(d,{name:"name"},function(){return this.ec},function(n){var i=this.ec;i!==n&&(t.i(n,"string",d,"name"),this.ec=n,this.j("name",i,n))});t.g(d,"dataFormat",d.prototype.bn);t.defineProperty(d,{bn:"dataFormat"},function(){return this.Qy},function(n){var i=this.Qy;i!==n&&(t.i(n,"string",d,"dataFormat"),this.Qy=n,this.j("dataFormat",i,n))});t.g(d,"knockoutJS",d.prototype.ge);t.defineProperty(d,{ge:"knockoutJS"},function(){return this.XC},function(i){this.XC=i;t.Ec||(t.Ec="object"==typeof n.ko&&"function"==typeof n.ko.isObservable?n.ko.isObservable:null,i&&null===t.Ec&&t.trace("No value for ko.isObservable: is KnockoutJS library not loaded?"))});t.g(d,"isReadOnly",d.prototype.hb);t.defineProperty(d,{hb:"isReadOnly"},function(){return this.Wk},function(n){var i=this.Wk;i!==n&&(t.i(n,"boolean",d,"isReadOnly"),this.Wk=n,this.j("isReadOnly",i,n))});t.g(d,"modelData",d.prototype.SA);t.defineProperty(d,{SA:"modelData"},function(){return this.uz},function(n){var i=this.uz;i!==n&&(t.i(n,"object",d,"modelData"),this.uz=n,this.j("modelData",i,n))});d.prototype.addChangedListener=d.prototype.Wz=function(n){t.i(n,"function",d,"addChangedListener:listener");null===this.Pj&&(this.Pj=new b("function"));this.Pj.add(n)};d.prototype.removeChangedListener=d.prototype.kB=function(n){t.i(n,"function",d,"removeChangedListener:listener");null!==this.Pj&&(this.Pj.remove(n),0===this.Pj.count&&(this.Pj=null))};d.prototype.vw=function(n){var t,i,u,r;if(this.ab||this.ma.oF(n),null!==this.Pj)if(t=this.Pj,i=t.length,1===i)t=t.wa(0),t(n);else if(0!==i)for(u=t.Pe(),r=0;r<i;r++)t=u[r],t(n)};d.prototype.raiseChangedEvent=d.prototype.ed=function(n,t,i,r,u,f,e){gi(this,"",n,t,i,r,u,f,e)};d.prototype.raiseChanged=d.prototype.j=function(n,t,i,r,u){gi(this,"",di,n,this,t,i,r,u)};d.prototype.raiseDataChanged=d.prototype.Ax=function(n,t,i,r,u,f){gi(this,"",di,t,n,i,r,u,f)};t.g(d,"undoManager",d.prototype.ma);t.defineProperty(d,{ma:"undoManager"},function(){return this.Oz},function(n){var i=this.Oz;i!==n&&(t.l(n,vi,d,"undoManager"),null!==i&&i.fK(this),this.Oz=n,null!==n&&n.VH(this))});t.g(d,"skipsUndoManager",d.prototype.ab);t.defineProperty(d,{ab:"skipsUndoManager"},function(){return this.Xi},function(n){t.i(n,"boolean",d,"skipsUndoManager");this.Xi=n});d.prototype.changeState=function(n,i){if(null!==n&&n.ea===this)if(n.Bd===di){var r=n.object,u=n.propertyName,f=n.Da(i);t.Va(r,u,f)}else n.Bd===vr?"nodeDataArray"===n.Ff?(r=n.newValue,t.xb(r)&&(u=this.Lb(r),void 0!==u&&(i?(this.ge&&t.Df(r,this,!0),t.fj(this.Se,n.Zf),this.Gc.remove(u)):(this.ge&&t.Df(r,this,!1),t.ej(this.Se,n.Zf,r),this.Gc.add(u,r))))):""===n.Ff?(r=n.object,!t.isArray(r)&&n.propertyName&&(r=t.nb(n.object,n.propertyName)),t.isArray(r)&&(u=n.newValue,f=n.Zf,i?t.fj(r,f):t.ej(r,f,u))):t.m("unknown ChangedEvent.Insert object: "+n.toString()):n.Bd===kr?"nodeDataArray"===n.Ff?(r=n.oldValue,t.xb(r)&&(u=this.Lb(r),void 0!==u&&(i?(this.ge&&t.Df(r,this,!1),t.ej(this.Se,n.ag,r),this.Gc.add(u,r)):(this.ge&&t.Df(r,this,!0),t.fj(this.Se,n.ag),this.Gc.remove(u))))):""===n.Ff?(r=n.object,!t.isArray(r)&&n.propertyName&&(r=t.nb(n.object,n.propertyName)),t.isArray(r)&&(u=n.oldValue,f=n.ag,i?t.ej(r,f,u):t.fj(r,f))):t.m("unknown ChangedEvent.Remove object: "+n.toString()):n.Bd!==ro&&t.m("unknown ChangedEvent: "+n.toString())};d.prototype.startTransaction=d.prototype.yc=function(n){return this.ma.yc(n)};d.prototype.commitTransaction=d.prototype.Ie=function(n){return this.ma.Ie(n)};d.prototype.rollbackTransaction=d.prototype.$p=function(){return this.ma.$p()};d.prototype.updateTargetBindings=d.prototype.Vb=function(n,t){void 0===t&&(t="");gi(this,"SourceChanged",ro,t,n,null,null)};t.g(d,"nodeKeyProperty",d.prototype.uj);t.defineProperty(d,{uj:"nodeKeyProperty"},function(){return this.vm},function(n){var i=this.vm;i!==n&&(ge(n,d,"nodeKeyProperty"),0<this.Gc.count&&t.m("Cannot set Model.nodeKeyProperty when there is existing node data"),this.vm=n,this.j("nodeKeyProperty",i,n))});d.prototype.getKeyForNodeData=d.prototype.Lb=function(n){if(null!==n){var i=this.vm;if(""!==i&&(i=t.nb(n,i),void 0!==i)){if(oe(i))return i;t.m("Key value for node data "+n+" is not a number or a string: "+i)}}};d.prototype.setKeyForNodeData=d.prototype.wB=function(n,i){var r,u;null===i&&(i=void 0);void 0===i||oe(i)||t.jc(i,"number or string",d,"setKeyForNodeData:key");null!==n&&(r=this.vm,""!==r&&(this.te(n)?(u=t.nb(n,r),u!==i&&null===this.zf(i)&&(t.Va(n,r,i),this.Gc.remove(u),this.Gc.add(i,n),gi(this,"nodeKey",di,r,n,u,i),"string"==typeof r&&this.Vb(n,r),this.Zt(u,i))):t.Va(n,r,i)))};t.g(d,"makeUniqueKeyFunction",d.prototype.IJ);t.defineProperty(d,{IJ:"makeUniqueKeyFunction"},function(){return this.qv},function(n){var i=this.qv;i!==n&&(null!==n&&t.i(n,"function",d,"makeUniqueKeyFunction"),this.qv=n,this.j("makeUniqueKeyFunction",i,n))});d.prototype.containsNodeData=d.prototype.te=function(n){return n=this.Lb(n),void 0===n?!1:this.Gc.contains(n)};d.prototype.findNodeDataForKey=d.prototype.zf=function(n){return null===n&&t.m("Model.findNodeDataForKey:key must not be null"),void 0!==n&&oe(n)?this.Gc.Da(n):null};t.g(d,"nodeDataArray",d.prototype.Ng);t.defineProperty(d,{Ng:"nodeDataArray"},function(){return this.Se},function(n){var f=this.Se,e,u,r,i,o;if(f!==n){for(t.ft(n,d,"nodeDataArray"),this.ge&&t.Ec&&(null!==f&&t.on(f,"nodeDataArray",this,!0),n=t.on(n,"nodeDataArray",this,!1)),this.Gc.clear(),this.LB(),e=t.ub(n),r=0;r<e;r++){if(i=t.rb(n,r),!t.xb(i)){t.m("Model.nodeDataArray must only contain Objects, not: "+i);return}t.xt(i)}for(this.Se=n,u=new b(Object),r=0;r<e;r++)i=t.rb(n,r),o=this.Lb(i),void 0===o?u.add(i):null!==this.Gc.Da(o)?u.add(i):this.Gc.add(o,i);for(r=u.k;r.next();)i=r.value,this.SF(i),u=this.Lb(i),this.Gc.add(u,i);for(gi(this,"nodeDataArray",di,"nodeDataArray",this,f,n),r=0;r<e;r++)i=t.rb(n,r),this.Zp(i),this.Yp(i);this.tE();t.uJ(n)||(this.hb=!0)}});d.prototype.makeNodeDataKeyUnique=d.prototype.SF=function(n){var u,i,r;if(null!==n&&(u=this.vm,""!==u&&(i=this.Lb(n),void 0===i||this.Gc.contains(i)))){if(r=this.qv,null!==r&&(i=r(this,n),void 0!==i&&null!==i&&!this.Gc.contains(i))){t.Va(n,u,i);return}if("string"==typeof i){for(r=2;this.Gc.contains(i+r);)r++;t.Va(n,u,i+r)}else if(void 0===i||"number"==typeof i){for(r=-this.Gc.count-1;this.Gc.contains(r);)r--;t.Va(n,u,r)}else t.m("Model.getKeyForNodeData returned something other than a string or a number: "+i)}};d.prototype.addNodeData=d.prototype.Om=function(n){if(null!==n){this.ge&&t.Df(n,this,!1);t.xt(n);var i=this.Lb(n);(void 0===i||this.Gc.Da(i)!==n)&&(this.SF(n),i=this.Lb(n),this.Gc.add(i,n),i=t.ub(this.Se),t.ej(this.Se,i,n),gi(this,"nodeDataArray",vr,"nodeDataArray",this,null,n,null,i),this.Zp(n),this.Yp(n))}};d.prototype.addNodeDataCollection=function(n){if(t.isArray(n))for(var r=t.ub(n),i=0;i<r;i++)this.Om(t.rb(n,i));else for(n=n.k;n.next();)this.Om(n.value)};d.prototype.removeNodeData=d.prototype.Bx=function(n){if(null!==n){var i=this.Lb(n);void 0!==i&&this.Gc.contains(i)&&(this.ge&&t.Df(n,this,!0),this.Gc.remove(i),i=t.cA(this.Se,n),0>i||(t.fj(this.Se,i),gi(this,"nodeDataArray",kr,"nodeDataArray",this,n,null,i,null),this.nu(n)))}};d.prototype.removeNodeDataCollection=function(n){if(t.isArray(n))for(var r=t.ub(n),i=0;i<r;i++)this.Bx(t.rb(n,i));else for(n=n.k;n.next();)this.Bx(n.value)};ft=d.prototype;ft.Zt=function(n,t){var i=up(this,n);i instanceof it&&this.hg.add(t,i)};ft.LB=function(){};ft.Zp=function(){};ft.Yp=function(){};ft.nu=function(){};d.prototype.clearUnresolvedReferences=d.prototype.tE=function(n){void 0===n?this.hg.clear():this.hg.remove(n)};t.g(d,"copyNodeDataFunction",d.prototype.yI);t.defineProperty(d,{yI:"copyNodeDataFunction"},function(){return this.Lu},function(n){var i=this.Lu;i!==n&&(null!==n&&t.i(n,"function",d,"copyNodeDataFunction"),this.Lu=n,this.j("copyNodeDataFunction",i,n))});t.g(d,"copiesArrays",d.prototype.Fw);t.defineProperty(d,{Fw:"copiesArrays"},function(){return this.Jy},function(n){var i=this.Jy;i!==n&&(null!==n&&t.i(n,"boolean",d,"copiesArrays"),this.Jy=n,this.j("copiesArrays",i,n))});t.g(d,"copiesArrayObjects",d.prototype.Ew);t.defineProperty(d,{Ew:"copiesArrayObjects"},function(){return this.Iy},function(n){var i=this.Iy;i!==n&&(null!==n&&t.i(n,"boolean",d,"copiesArrayObjects"),this.Iy=n,this.j("copiesArrayObjects",i,n))});d.prototype.copyNodeData=function(n){var i,e,f,h,o,u,c,s,l;if(null===n)return null;if(i=null,i=this.Lu,null!==i)i=i(n,this);else{i=new n.constructor;for(e in n){if(f=t.nb(n,e),(!r||!id(n,e,f))&&this.Fw&&Array.isArray(f)){for(h=[],o=0;o<f.length;o++){if(u=f[o],this.Ew&&t.xb(u)){c=new u.constructor;for(s in u)l=t.nb(u,s),r&&id(u,s,l),t.Va(c,s,l);u=c}h.push(u)}f=h}t.Va(i,e,f)}this.ge&&t.Df(i,this,!1)}return i&&t.Fc(i),i};d.prototype.setDataProperty=function(n,i,u){if(r&&(t.i(n,"object",d,"setDataProperty:data"),t.i(i,"string",d,"setDataProperty:propname"),""===i&&t.m("Model.setDataProperty: property name must not be an empty string when setting "+n+" to "+u)),this.te(n)){if(i===this.uj)this.wB(n,u);else if(i===this.El){this.Fx(n,u);return}}else!t.mq&&n instanceof f&&(t.mq=!0,t.trace('Model.setDataProperty is modifying a GraphObject, "'+n.toString()+'"'),t.trace("  Is that really your intent?"));var e=t.nb(n,i);e!==u&&(t.Va(n,i,u),this.Ax(n,i,e,u))};d.prototype.addArrayItem=function(n,t){this.rJ(n,-1,t)};d.prototype.insertArrayItem=d.prototype.rJ=function(n,i,u){r&&(t.ft(n,d,"insertArrayItem:arr"),t.q(i,d,"insertArrayItem:idx"));n===this.Se&&t.m("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>i&&(i=t.ub(n));t.ej(n,i,u);gi(this,"",vr,"",n,null,u,null,i)};d.prototype.removeArrayItem=function(n,i){void 0===i&&(i=-1);r&&(t.ft(n,d,"removeArrayItem:arr"),t.q(i,d,"removeArrayItem:idx"));n===this.Se&&t.m("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===i&&(i=t.ub(n)-1);var u=t.rb(n,i);t.fj(n,i);gi(this,"",kr,"",n,u,null,i,null)};t.g(d,"nodeCategoryProperty",d.prototype.El);t.defineProperty(d,{El:"nodeCategoryProperty"},function(){return this.Wr},function(n){var t=this.Wr;t!==n&&(ge(n,d,"nodeCategoryProperty"),this.Wr=n,this.j("nodeCategoryProperty",t,n))});d.prototype.getCategoryForNodeData=d.prototype.getCategoryForNodeData=function(n){if(null===n)return"";var i=this.Wr;return""===i?"":(i=t.nb(n,i),void 0===i)?"":"string"==typeof i?i:(t.m("getCategoryForNodeData found a non-string category for "+n+": "+i),"")};d.prototype.setCategoryForNodeData=d.prototype.Fx=function(n,i){var r,u;t.i(i,"string",d,"setCategoryForNodeData:cat");null!==n&&(r=this.Wr,""!==r&&(this.te(n)?(u=t.nb(n,r),void 0===u&&(u=""),u!==i&&(t.Va(n,r,i),gi(this,"nodeCategory",di,r,n,u,i))):t.Va(n,r,i)))};t.ka("GraphLinksModel",k);t.Qa(k,d);k.prototype.clear=k.prototype.clear=function(){d.prototype.clear.call(this);this.ge&&t.on(this.gh,"linkDataArray",this,!0);this.gh=[];this.pm.clear()};ft=k.prototype;ft.toString=function(n){var f,i,u,r;if(void 0===n&&(n=0),2<=n)return this.FB();if(r=(""!==this.name?this.name:"")+" GraphLinksModel",0<n){for(r+="\n node data:",n=this.Ng,f=t.ub(n),i=0;i<f;i++)u=t.rb(n,i),r=r+(" "+this.Lb(u)+":"+ne(u));for(r+="\n link data:",n=this.tj,f=t.ub(n),i=0;i<f;i++)u=t.rb(n,i),r+=" "+this.vl(u)+"-->"+this.zl(u)}return r};ft.ou=function(){var t=d.prototype.ou.call(this),n="";return"category"!==this.Hp&&"string"==typeof this.Hp&&(n+=',\n  "linkCategoryProperty": '+this.quote(this.Hp)),"from"!==this.qn&&"string"==typeof this.qn&&(n+=',\n  "linkFromKeyProperty": '+this.quote(this.qn)),"to"!==this.rn&&"string"==typeof this.rn&&(n+=',\n  "linkToKeyProperty": '+this.quote(this.rn)),""!==this.Ip&&"string"==typeof this.Ip&&(n+=',\n  "linkFromPortIdProperty": '+this.quote(this.Ip)),""!==this.Mp&&"string"==typeof this.Mp&&(n+=',\n  "linkToPortIdProperty": '+this.quote(this.Mp)),""!==this.St&&"string"==typeof this.St&&(n+=',\n  "nodeIsLinkLabelProperty": '+this.quote(this.St)),""!==this.Jp&&"string"==typeof this.Jp&&(n+=',\n  "linkLabelKeysProperty": '+this.quote(this.Jp)),"isGroup"!==this.Vp&&"string"==typeof this.Vp&&(n+=',\n  "nodeIsGroupProperty": '+this.quote(this.Vp)),"group"!==this.wn&&"string"==typeof this.wn&&(n+=',\n  "nodeGroupKeyProperty": '+this.quote(this.wn)),t+n};ft.QB=function(){var n=d.prototype.QB.call(this),t=',\n  "linkDataArray": '+td(this,this.tj,!0);return n+t};ft.Xt=function(n){d.prototype.Xt.call(this,n);n.linkFromKeyProperty&&(this.qn=n.linkFromKeyProperty);n.linkToKeyProperty&&(this.rn=n.linkToKeyProperty);n.linkFromPortIdProperty&&(this.Ip=n.linkFromPortIdProperty);n.linkToPortIdProperty&&(this.Mp=n.linkToPortIdProperty);n.linkCategoryProperty&&(this.Hp=n.linkCategoryProperty);n.nodeIsLinkLabelProperty&&(this.St=n.nodeIsLinkLabelProperty);n.linkLabelKeysProperty&&(this.Jp=n.linkLabelKeysProperty);n.nodeIsGroupProperty&&(this.Vp=n.nodeIsGroupProperty);n.nodeGroupKeyProperty&&(this.wn=n.nodeGroupKeyProperty)};ft.hB=function(n){d.prototype.hB.call(this,n);(n=n.linkDataArray)&&(fv(this,n),this.tj=n)};k.prototype.changeState=function(n,i){if(n.Bd===vr){var r=null;if("linkDataArray"===n.Ff?r=this.gh:"linkLabelKeys"===n.Ff&&(r=this.xl(n.object)),t.isArray(r)){i?(this.ge&&t.xb(n.newValue)&&t.Df(n.newValue,this,!0),t.fj(r,n.Zf)):(this.ge&&t.xb(n.newValue)&&t.Df(n.newValue,this,!1),t.ej(r,n.Zf,n.newValue));return}}else if(n.Bd===kr&&(r=null,"linkDataArray"===n.Ff?r=this.gh:"linkLabelKeys"===n.Ff&&(r=this.xl(n.object)),t.isArray(r))){i?(this.ge&&t.xb(n.oldValue)&&t.Df(n.oldValue,this,!1),t.ej(r,n.ag,n.oldValue)):(this.ge&&t.xb(n.oldValue)&&t.Df(n.oldValue,this,!0),t.fj(r,n.ag));return}d.prototype.changeState.call(this,n,i)};t.g(k,"archetypeNodeData",k.prototype.ct);t.defineProperty(k,{ct:"archetypeNodeData"},function(){return this.Kk},function(n){var i=this.Kk;i!==n&&(null!==n&&t.l(n,Object,k,"archetypeNodeData"),this.Kk=n,this.j("archetypeNodeData",i,n))});k.prototype.tn=function(n){var r,i;if(void 0!==n)return r=this.Kk,null!==r&&(i=this.zf(n),null===i&&(i=this.copyNodeData(r),t.Va(i,this.vm,n),this.Om(i))),n};t.g(k,"linkFromKeyProperty",k.prototype.qn);t.defineProperty(k,{qn:"linkFromKeyProperty"},function(){return this.Lj},function(n){var t=this.Lj;t!==n&&(ge(n,k,"linkFromKeyProperty"),this.Lj=n,this.j("linkFromKeyProperty",t,n))});k.prototype.getFromKeyForLinkData=k.prototype.vl=function(n){if(null!==n){var i=this.Lj;if(""!==i&&(i=t.nb(n,i),void 0!==i)){if(oe(i))return i;t.m("FromKey value for link data "+n+" is not a number or a string: "+i)}}};k.prototype.setFromKeyForLinkData=k.prototype.Hx=function(n,i){var r,u;null===i&&(i=void 0);void 0===i||oe(i)||t.jc(i,"number or string",k,"setFromKeyForLinkData:key");null!==n&&(r=this.Lj,""!==r&&((i=this.tn(i),this.jj(n))?(u=t.nb(n,r),u!==i&&(pe(this,u,n),t.Va(n,r,i),null===this.zf(i)&&se(this,i,n),gi(this,"linkFromKey",di,r,n,u,i),"string"==typeof r&&this.Vb(n,r))):t.Va(n,r,i)))};t.g(k,"linkToKeyProperty",k.prototype.rn);t.defineProperty(k,{rn:"linkToKeyProperty"},function(){return this.Oj},function(n){var t=this.Oj;t!==n&&(ge(n,k,"linkToKeyProperty"),this.Oj=n,this.j("linkToKeyProperty",t,n))});k.prototype.getToKeyForLinkData=k.prototype.zl=function(n){if(null!==n){var i=this.Oj;if(""!==i&&(i=t.nb(n,i),void 0!==i)){if(oe(i))return i;t.m("ToKey value for link data "+n+" is not a number or a string: "+i)}}};k.prototype.setToKeyForLinkData=k.prototype.Jx=function(n,i){var r,u;null===i&&(i=void 0);void 0===i||oe(i)||t.jc(i,"number or string",k,"setToKeyForLinkData:key");null!==n&&(r=this.Oj,""!==r&&((i=this.tn(i),this.jj(n))?(u=t.nb(n,r),u!==i&&(pe(this,u,n),t.Va(n,r,i),null===this.zf(i)&&se(this,i,n),gi(this,"linkToKey",di,r,n,u,i),"string"==typeof r&&this.Vb(n,r))):t.Va(n,r,i)))};t.g(k,"linkFromPortIdProperty",k.prototype.Ip);t.defineProperty(k,{Ip:"linkFromPortIdProperty"},function(){return this.Cr},function(n){var t=this.Cr;t!==n&&(ge(n,k,"linkFromPortIdProperty"),this.Cr=n,this.j("linkFromPortIdProperty",t,n))});k.prototype.getFromPortIdForLinkData=k.prototype.fJ=function(n){if(null===n)return"";var i=this.Cr;return""===i?"":(n=t.nb(n,i),void 0===n?"":n)};k.prototype.setFromPortIdForLinkData=k.prototype.vB=function(n,i){var r,u;t.i(i,"string",k,"setFromPortIdForLinkData:portname");null!==n&&(r=this.Cr,""!==r&&(this.jj(n)?(u=t.nb(n,r),void 0===u&&(u=""),u!==i&&(t.Va(n,r,i),gi(this,"linkFromPortId",di,r,n,u,i),"string"==typeof r&&this.Vb(n,r))):t.Va(n,r,i)))};t.g(k,"linkToPortIdProperty",k.prototype.Mp);t.defineProperty(k,{Mp:"linkToPortIdProperty"},function(){return this.Dr},function(n){var t=this.Dr;t!==n&&(ge(n,k,"linkToPortIdProperty"),this.Dr=n,this.j("linkToPortIdProperty",t,n))});k.prototype.getToPortIdForLinkData=k.prototype.iJ=function(n){if(null===n)return"";var i=this.Dr;return""===i?"":(n=t.nb(n,i),void 0===n?"":n)};k.prototype.setToPortIdForLinkData=k.prototype.yB=function(n,i){var r,u;t.i(i,"string",k,"setToPortIdForLinkData:portname");null!==n&&(r=this.Dr,""!==r&&(this.jj(n)?(u=t.nb(n,r),void 0===u&&(u=""),u!==i&&(t.Va(n,r,i),gi(this,"linkToPortId",di,r,n,u,i),"string"==typeof r&&this.Vb(n,r))):t.Va(n,r,i)))};t.g(k,"nodeIsLinkLabelProperty",k.prototype.St);t.defineProperty(k,{St:"nodeIsLinkLabelProperty"},function(){return this.Ev},function(n){var t=this.Ev;t!==n&&(ge(n,k,"nodeIsLinkLabelProperty"),this.Ev=n,this.j("nodeIsLinkLabelProperty",t,n))});k.prototype.isLinkLabelForNodeData=k.prototype.tJ=function(n){if(null===n)return!1;var i=this.Ev;return""===i?!1:t.nb(n,i)?!0:!1};t.g(k,"linkLabelKeysProperty",k.prototype.Jp);t.defineProperty(k,{Jp:"linkLabelKeysProperty"},function(){return this.Vh},function(n){var t=this.Vh;t!==n&&(ge(n,k,"linkLabelKeysProperty"),this.Vh=n,this.j("linkLabelKeysProperty",t,n))});k.prototype.getLabelKeysForLinkData=k.prototype.xl=function(n){if(null===n)return t.xi;var i=this.Vh;return""===i?t.xi:(n=t.nb(n,i),void 0===n?t.xi:n)};k.prototype.setLabelKeysForLinkData=k.prototype.EG=function(n,i){var r,f,o,u,e;if(t.ft(i,k,"setLabelKeysForLinkData:arr"),null!==n&&(r=this.Vh,""!==r))if(this.jj(n)){if(f=t.nb(n,r),void 0===f&&(f=t.xi),f!==i){for(o=t.ub(f),u=0;u<o;u++)e=t.rb(f,u),pe(this,e,n);for(t.Va(n,r,i),o=t.ub(i),u=0;u<o;u++)e=t.rb(i,u),null===this.zf(e)&&se(this,e,n);gi(this,"linkLabelKeys",di,r,n,f,i);"string"==typeof r&&this.Vb(n,r)}}else t.Va(n,r,i)};k.prototype.addLabelKeyForLinkData=k.prototype.fE=function(n,i){var r,u;null!==i&&void 0!==i&&(oe(i)||t.jc(i,"number or string",k,"addLabelKeyForLinkData:key"),null!==n)&&(r=this.Vh,""!==r&&(u=t.nb(n,r),void 0===u?this.EG(n,[i]):t.isArray(u)?0<=t.cA(u,i)||(t.ej(u,Infinity,i),this.jj(n)&&(null===this.zf(i)&&se(this,i,n),gi(this,"linkLabelKeys",vr,r,n,null,i))):t.m(r+" property is not an Array; cannot addLabelKeyForLinkData: "+n)))};k.prototype.removeLabelKeyForLinkData=k.prototype.eK=function(n,i){var r,u,f;null!==i&&void 0!==i&&(oe(i)||t.jc(i,"number or string",k,"removeLabelKeyForLinkData:key"),null!==n)&&(r=this.Vh,""!==r&&(u=t.nb(n,r),t.isArray(u)?(f=t.cA(u,i),0>f||(t.fj(u,f),this.jj(n)&&(pe(this,i,n),gi(this,"linkLabelKeys",kr,r,n,i,null)))):void 0!==u&&t.m(r+" property is not an Array; cannot removeLabelKeyforLinkData: "+n)))};t.g(k,"linkDataArray",k.prototype.tj);t.defineProperty(k,{tj:"linkDataArray"},function(){return this.gh},function(n){var u=this.gh,f,r,e,i;if(u!==n){for(t.ft(n,k,"linkDataArray"),this.ge&&t.Ec&&(null!==u&&t.on(u,"linkDataArray",this,!0),n=t.on(n,"linkDataArray",this,!1)),f=t.ub(n),i=0;i<f;i++){if(r=t.rb(n,i),!t.xb(r)){t.m("GraphLinksModel.linkDataArray must only contain Objects, not: "+r);return}t.xt(r)}for(this.gh=n,e=new it(Object),i=0;i<f;i++)r=t.rb(n,i),e.add(r);for(this.pm=e,gi(this,"linkDataArray",di,"linkDataArray",this,u,n),i=0;i<f;i++)r=t.rb(n,i),rd(this,r)}});k.prototype.containsLinkData=k.prototype.jj=function(n){return null===n?!1:this.pm.contains(n)};k.prototype.addLinkData=k.prototype.nw=function(n){if(null!==n){if(this.ge&&t.Df(n,this,!1),void 0===t.ud(n))t.Fc(n);else if(this.jj(n))return;this.pm.add(n);var i=t.ub(this.gh);t.ej(this.gh,i,n);gi(this,"linkDataArray",vr,"linkDataArray",this,null,n,null,i);rd(this,n)}};k.prototype.addLinkDataCollection=function(n){if(t.isArray(n))for(var r=t.ub(n),i=0;i<r;i++)this.nw(t.rb(n,i));else for(n=n.k;n.next();)this.nw(n.value)};k.prototype.removeLinkData=k.prototype.lB=function(n){var i,r,f,u;if(null!==n&&(this.ge&&t.Df(n,this,!0),this.pm.remove(n),i=this.gh.indexOf(n),!(0>i)&&(t.fj(this.gh,i),gi(this,"linkDataArray",kr,"linkDataArray",this,n,null,i,null),i=this.vl(n),pe(this,i,n),i=this.zl(n),pe(this,i,n),r=this.xl(n),t.isArray(r))))for(f=t.ub(r),u=0;u<f;u++)i=t.rb(r,u),pe(this,i,n)};k.prototype.removeLinkDataCollection=function(n){if(t.isArray(n))for(var r=t.ub(n),i=0;i<r;i++)this.lB(t.rb(n,i));else for(n=n.k;n.next();)this.lB(n.value)};t.g(k,"copyLinkDataFunction",k.prototype.xI);t.defineProperty(k,{xI:"copyLinkDataFunction"},function(){return this.Ku},function(n){var i=this.Ku;i!==n&&(null!==n&&t.i(n,"function",k,"copyLinkDataFunction"),this.Ku=n,this.j("copyLinkDataFunction",i,n))});k.prototype.copyLinkData=k.prototype.EE=function(n){var i,u,f;if(null===n)return null;if(i=null,i=this.Ku,null!==i)i=i(n,this);else{i=new n.constructor;for(u in n)f=t.nb(n,u),r&&id(n,u,f),t.Va(i,u,f);this.ge&&t.Df(i,this,!1)}return i&&(t.Fc(i),""!==this.Lj&&t.Va(i,this.Lj,void 0),""!==this.Oj&&t.Va(i,this.Oj,void 0),""!==this.Vh&&t.Va(i,this.Vh,[])),i};t.g(k,"nodeIsGroupProperty",k.prototype.Vp);t.defineProperty(k,{Vp:"nodeIsGroupProperty"},function(){return this.Dv},function(n){var t=this.Dv;t!==n&&(ge(n,k,"nodeIsGroupProperty"),this.Dv=n,this.j("nodeIsGroupProperty",t,n))});k.prototype.isGroupForNodeData=k.prototype.KA=function(n){if(null===n)return!1;var i=this.Dv;return""===i?!1:t.nb(n,i)?!0:!1};t.g(k,"nodeGroupKeyProperty",k.prototype.wn);t.defineProperty(k,{wn:"nodeGroupKeyProperty"},function(){return this.Vj},function(n){var t=this.Vj;t!==n&&(ge(n,k,"nodeGroupKeyProperty"),this.Vj=n,this.j("nodeGroupKeyProperty",t,n))});t.g(k,"copiesGroupKeyOfNodeData",k.prototype.nl);t.defineProperty(k,{nl:"copiesGroupKeyOfNodeData"},function(){return this.Ky},function(n){this.Ky!==n&&(t.i(n,"boolean",k,"copiesGroupKeyOfNodeData"),this.Ky=n)});k.prototype.getGroupKeyForNodeData=k.prototype.hn=function(n){if(null!==n){var i=this.Vj;if(""!==i&&(i=t.nb(n,i),void 0!==i)){if(oe(i))return i;t.m("GroupKey value for node data "+n+" is not a number or a string: "+i)}}};k.prototype.setGroupKeyForNodeData=k.prototype.Ix=function(n,i){var r,u;null===i&&(i=void 0);void 0===i||oe(i)||t.jc(i,"number or string",k,"setGroupKeyForNodeData:key");null!==n&&(r=this.Vj,""!==r&&(this.te(n)?(u=t.nb(n,r),u!==i&&(pe(this,u,n),t.Va(n,r,i),null===this.zf(i)&&se(this,i,n),gi(this,"nodeGroupKey",di,r,n,u,i),"string"==typeof r&&this.Vb(n,r))):t.Va(n,r,i)))};k.prototype.copyNodeData=function(n){return null===n?null:(n=d.prototype.copyNodeData.call(this,n),this.nl||""===this.Vj||t.Va(n,this.Vj,void 0),n)};k.prototype.setDataProperty=function(n,i,u){if(r&&(t.i(n,"object",k,"setDataProperty:data"),t.i(i,"string",k,"setDataProperty:propname"),""===i&&t.m("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+n+" to "+u)),this.te(n))if(i===this.uj)this.wB(n,u);else{if(i===this.El){this.Fx(n,u);return}if(i===this.wn){this.Ix(n,u);return}i===this.Vp&&t.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+i)}else if(this.jj(n)){if(i===this.qn){this.Hx(n,u);return}if(i===this.rn){this.Jx(n,u);return}if(i===this.Ip){this.vB(n,u);return}if(i===this.Mp){this.yB(n,u);return}if(i===this.Hp){this.DG(n,u);return}if(i===this.Jp){this.EG(n,u);return}}else!t.mq&&n instanceof f&&(t.mq=!0,t.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+n.toString()+'"'),t.trace("  Is that really your intent?"));var e=t.nb(n,i);e!==u&&(t.Va(n,i,u),this.Ax(n,i,e,u))};ft=k.prototype;ft.Zt=function(n,i){var f,r,s;for(d.prototype.Zt.call(this,n,i),f=this.Gc.k;f.next();)this.nB(f.value,n,i);for(f=this.pm.k;f.next();){var u=f.value,e=n,o=i;if(this.vl(u)===e&&(r=this.Lj,t.Va(u,r,o),gi(this,"linkFromKey",di,r,u,e,o),"string"==typeof r&&this.Vb(u,r)),this.zl(u)===e&&(r=this.Oj,t.Va(u,r,o),gi(this,"linkToKey",di,r,u,e,o),"string"==typeof r&&this.Vb(u,r)),s=this.xl(u),t.isArray(s))for(var c=t.ub(s),r=this.Vh,h=0;h<c;h++)t.rb(s,h)===e&&(t.kE(s,h,o),gi(this,"linkLabelKeys",vr,r,u,e,o))}};ft.nB=function(n,i,r){if(this.hn(n)===i){var u=this.Vj;t.Va(n,u,r);gi(this,"nodeGroupKey",di,u,n,i,r);"string"==typeof u&&this.Vb(n,u)}};ft.LB=function(){var r;d.prototype.LB.call(this);for(var i=this.tj,u=t.ub(i),n=0;n<u;n++)r=t.rb(i,n),rd(this,r)};ft.Zp=function(n){var u,f,i,r,e;if(d.prototype.Zp.call(this,n),n=this.Lb(n),f=up(this,n),null!==f){for(u=new b(Object),f=f.k;f.next();)if(i=f.value,this.te(i))this.hn(i)===n&&(r=this.Vj,gi(this,"nodeGroupKey",di,r,i,n,n),"string"==typeof r&&this.Vb(i,r),u.add(i));else if(this.vl(i)===n&&(r=this.Lj,gi(this,"linkFromKey",di,r,i,n,n),"string"==typeof r&&this.Vb(i,r),u.add(i)),this.zl(i)===n&&(r=this.Oj,gi(this,"linkToKey",di,r,i,n,n),"string"==typeof r&&this.Vb(i,r),u.add(i)),e=this.xl(i),t.isArray(e))for(var s=t.ub(e),r=this.Vh,o=0;o<s;o++)t.rb(e,o)===n&&(gi(this,"linkLabelKeys",vr,r,i,n,n),u.add(i));for(u=u.k;u.next();)pe(this,n,u.value)}};ft.Yp=function(n){d.prototype.Yp.call(this,n);var t=this.hn(n);null===this.zf(t)&&se(this,t,n)};ft.nu=function(n){d.prototype.nu.call(this,n);var t=this.hn(n);pe(this,t,n)};t.g(k,"linkCategoryProperty",k.prototype.Hp);t.defineProperty(k,{Hp:"linkCategoryProperty"},function(){return this.zr},function(n){var t=this.zr;t!==n&&(ge(n,k,"linkCategoryProperty"),this.zr=n,this.j("linkCategoryProperty",t,n))});k.prototype.getCategoryForLinkData=k.prototype.getCategoryForLinkData=function(n){if(null===n)return"";var i=this.zr;return""===i?"":(i=t.nb(n,i),void 0===i)?"":"string"==typeof i?i:(t.m("getCategoryForLinkData found a non-string category for "+n+": "+i),"")};k.prototype.setCategoryForLinkData=k.prototype.DG=function(n,i){var r,u;if(t.i(i,"string",k,"setCategoryForLinkData:cat"),null!==n){if(r=this.zr,""===r)return"";this.jj(n)?(u=t.nb(n,r),void 0===u&&(u=""),u!==i&&(t.Va(n,r,i),gi(this,"linkCategory",di,r,n,u,i),"string"==typeof r&&this.Vb(n,r))):t.Va(n,r,i)}};t.ka("TreeModel",ci);t.Qa(ci,d);ci.prototype.toString=function(n){var f,r,u,i;if(void 0===n&&(n=0),2<=n)return this.FB();if(i=(""!==this.name?this.name:"")+" TreeModel",0<n)for(i+="\n node data:",n=this.Ng,f=t.ub(n),r=0;r<f;r++)u=t.rb(n,r),i=i+(" "+this.Lb(u)+":"+ne(u));return i};ci.prototype.ou=function(){var t=d.prototype.ou.call(this),n="";return"parent"!==this.xn&&"string"==typeof this.xn&&(n+=',\n  "nodeParentKeyProperty": '+this.quote(this.xn)),t+n};ci.prototype.Xt=function(n){d.prototype.Xt.call(this,n);n.nodeParentKeyProperty&&(this.xn=n.nodeParentKeyProperty)};ci.prototype.tn=function(n){return n};t.g(ci,"nodeParentKeyProperty",ci.prototype.xn);t.defineProperty(ci,{xn:"nodeParentKeyProperty"},function(){return this.Wj},function(n){var t=this.Wj;t!==n&&(ge(n,ci,"nodeParentKeyProperty"),this.Wj=n,this.j("nodeParentKeyProperty",t,n))});t.g(ci,"copiesParentKeyOfNodeData",ci.prototype.ol);t.defineProperty(ci,{ol:"copiesParentKeyOfNodeData"},function(){return this.Ly},function(n){this.Ly!==n&&(t.i(n,"boolean",ci,"copiesParentKeyOfNodeData"),this.Ly=n)});ci.prototype.getParentKeyForNodeData=ci.prototype.jn=function(n){if(null!==n){var i=this.Wj;if(""!==i&&(i=t.nb(n,i),void 0!==i)){if(oe(i))return i;t.m("ParentKey value for node data "+n+" is not a number or a string: "+i)}}};ci.prototype.setParentKeyForNodeData=ci.prototype.xh=function(n,i){var r,u;null===i&&(i=void 0);void 0===i||oe(i)||t.jc(i,"number or string",ci,"setParentKeyForNodeData:key");null!==n&&(r=this.Wj,""!==r&&((i=this.tn(i),this.te(n))?(u=t.nb(n,r),u!==i&&(pe(this,u,n),t.Va(n,r,i),null===this.zf(i)&&se(this,i,n),gi(this,"nodeParentKey",di,r,n,u,i),"string"==typeof r&&this.Vb(n,r))):t.Va(n,r,i)))};t.g(ci,"parentLinkCategoryProperty",ci.prototype.ZJ);t.defineProperty(ci,{ZJ:"parentLinkCategoryProperty"},function(){return this.$r},function(n){var t=this.$r;t!==n&&(ge(n,ci,"parentLinkCategoryProperty"),this.$r=n,this.j("parentLinkCategoryProperty",t,n))});ci.prototype.getParentLinkCategoryForNodeData=ci.prototype.hJ=function(n){if(null===n)return"";var i=this.$r;return""===i?"":(i=t.nb(n,i),void 0===i)?"":"string"==typeof i?i:(t.m("getParentLinkCategoryForNodeData found a non-string category for "+n+": "+i),"")};ci.prototype.setParentLinkCategoryForNodeData=ci.prototype.kK=function(n,i){var r,u;if(t.i(i,"string",ci,"setParentLinkCategoryForNodeData:cat"),null!==n){if(r=this.$r,""===r)return"";this.te(n)?(u=t.nb(n,r),void 0===u&&(u=""),u!==i&&(t.Va(n,r,i),gi(this,"parentLinkCategory",di,r,n,u,i),"string"==typeof r&&this.Vb(n,r))):t.Va(n,r,i)}};ci.prototype.copyNodeData=function(n){return null===n?null:(n=d.prototype.copyNodeData.call(this,n),this.ol||""===this.Wj||t.Va(n,this.Wj,void 0),n)};ci.prototype.setDataProperty=function(n,i,u){if(r&&(t.i(n,"object",ci,"setDataProperty:data"),t.i(i,"string",ci,"setDataProperty:propname"),""===i&&t.m("TreeModel.setDataProperty: property name must not be an empty string when setting "+n+" to "+u)),this.te(n))if(i===this.uj)this.wB(n,u);else{if(i===this.El){this.Fx(n,u);return}if(i===this.xn){this.xh(n,u);return}}else!t.mq&&n instanceof f&&(t.mq=!0,t.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+n.toString()+'"'),t.trace("  Is that really your intent?"));var e=t.nb(n,i);e!==u&&(t.Va(n,i,u),this.Ax(n,i,e,u))};ft=ci.prototype;ft.Zt=function(n,t){d.prototype.Zt.call(this,n,t);for(var i=this.Gc.k;i.next();)this.nB(i.value,n,t)};ft.nB=function(n,i,r){if(this.jn(n)===i){var u=this.Wj;t.Va(n,u,r);gi(this,"nodeParentKey",di,u,n,i,r);"string"==typeof u&&this.Vb(n,u)}};ft.Zp=function(n){var i,t,r,u;if(d.prototype.Zp.call(this,n),n=this.Lb(n),t=up(this,n),null!==t){for(i=new b(Object),t=t.k;t.next();)r=t.value,this.te(r)&&this.jn(r)===n&&(u=this.Wj,gi(this,"nodeParentKey",di,u,r,n,n),"string"==typeof u&&this.Vb(r,u),i.add(r));for(i=i.k;i.next();)pe(this,n,i.value)}};ft.Yp=function(n){d.prototype.Yp.call(this,n);var t=this.jn(n),t=this.tn(t);null===this.zf(t)&&se(this,t,n)};ft.nu=function(n){d.prototype.nu.call(this,n);var t=this.jn(n);pe(this,t,n)};t.ka("Binding",ri);ri.OneWay=sut=t.w(ri,"OneWay",1);ri.TwoWay=fp=t.w(ri,"TwoWay",2);ri.parseEnum=function(n,i){return t.i(n,"function",ri,"parseEnum:ctor"),t.Fa(i,n,ri,"parseEnum:defval"),function(r){return t.en(n,r)||i}};ri.toString=ne=function(n){var i=n;return t.xb(n)&&(n.text?i=n.text:n.name?i=n.name:void 0!==n.key?i=n.key:void 0!==n.id?i=n.id:n.constructor===Object&&(n.Text?i=n.Text:n.Name?i=n.Name:void 0!==n.Key?i=n.Key:void 0!==n.Id?i=n.Id:void 0!==n.ID&&(i=n.ID))),void 0===i?"undefined":null===i?"null":i.toString()};ri.prototype.toString=function(){return"Binding("+this.Fn+" "+this.ku+":"+this.AB+")"};ri.prototype.freeze=function(){return this.tb=!0,this};ri.prototype.Ra=function(){return this.tb=!1,this};t.g(ri,"targetId",ri.prototype.Fn);t.defineProperty(ri,{Fn:null},function(){return this.KD},function(n){t.J(this);t.i(n,"string",ri,"targetId");this.KD=n});t.g(ri,"targetProperty",ri.prototype.ku);t.defineProperty(ri,{ku:"targetProperty"},function(){return this.fw},function(n){t.J(this);t.i(n,"string",ri,"targetProperty");this.fw=n});t.g(ri,"sourceName",ri.prototype.iu);t.defineProperty(ri,{iu:"sourceName"},function(){return this.ED},function(n){t.J(this);t.i(n,"string",ri,"sourceName");this.ED=n});t.g(ri,"sourceProperty",ri.prototype.AB);t.defineProperty(ri,{AB:"sourceProperty"},function(){return this.Zv},function(n){t.J(this);t.i(n,"string",ri,"sourceProperty");this.Zv=n});t.g(ri,"converter",ri.prototype.BE);t.defineProperty(ri,{BE:"converter"},function(){return this.Hy},function(n){t.J(this);null!==n&&t.i(n,"function",ri,"converter");this.Hy=n});t.g(ri,"backConverter",ri.prototype.pE);t.defineProperty(ri,{pE:"backConverter"},function(){return this.Ay},function(n){t.J(this);null!==n&&t.i(n,"function",ri,"backConverter");this.Ay=n});t.g(ri,"mode",ri.prototype.mode);t.defineProperty(ri,{mode:"mode"},function(){return this.tz},function(n){t.J(this);t.Fa(n,ri,ri,"mode");this.tz=n});ri.prototype.makeTwoWay=function(n){return void 0===n&&(n=null),null!==n&&t.i(n,"function",ri,"makeTwoWay"),this.mode=fp,this.pE=n,this};ri.prototype.ofObject=ri.prototype.bB=function(n){return void 0===n&&(n=""),r&&t.i(n,"string",ri,"ofObject:srcname"),this.iu=n,this};ri.prototype.updateTarget=ri.prototype.eH=function(n,i,u){var s=this.Zv,e,o,h;if(!u||s===u)if(u=this.fw,e=this.Hy,null===e&&""===u)t.trace("Binding error: target property is the empty string: "+this.toString());else if(r&&"string"==typeof u&&("function"!=typeof n.setAttribute&&0<u.length&&"_"!==u[0]&&!t.Yw(n,u)?t.trace("Binding error: undefined target property: "+u+" on "+n.toString()):"name"===u&&n instanceof f&&t.trace("Binding error: cannot modify GraphObject.name on "+n.toString())),o=i,""!==s&&(o=t.nb(i,s)),void 0!==o)if(null===e)""!==u&&t.Va(n,u,o);else try{""!==u?(h=e(o,n),r&&void 0===h&&t.trace('Binding warning: conversion function returned undefined when setting target property "'+u+'" on '+n.toString()+", function is: "+e),t.Va(n,u,h)):e(o,n)}catch(c){r&&t.trace("Binding error: "+c.toString()+' setting target property "'+u+'" on '+n.toString()+" with conversion function: "+e)}};ri.prototype.updateSource=ri.prototype.MB=function(n,i,u,f){var s,e,o,h;if(this.tz===fp&&(s=this.fw,(!u||s===u)&&(u=this.Zv,e=this.Ay,(null!==e||""!==u)&&(o=n,""!==s&&(o=t.nb(n,s)),void 0!==o))))if(null===e)f&&f.ea?(r&&f.ea.uj===u&&f.ea.te(i)&&t.trace("Binding error: cannot have TwoWay Binding on node data key property: "+this.toString()),f.ea.setDataProperty(i,u,o)):t.Va(i,u,o);else try{""!==u?(h=e(o,i),f&&f.ea?(r&&(f.ea.uj===u&&f.ea.te(i)&&t.trace("Binding error: cannot have TwoWay Binding on node data key property: "+this.toString()),void 0===h&&t.trace('Binding warning: conversion function returned undefined when setting source property "'+u+'" on '+i.toString()+", function is: "+e)),f.ea.setDataProperty(i,u,h)):t.Va(i,u,h)):e(o,i)}catch(c){r&&t.trace("Binding error: "+c.toString()+' setting source property "'+u+'" on '+i.toString()+" with conversion function: "+e)}};t.ka("Transaction",dr);dr.prototype.toString=function(n){var r="Transaction: "+this.name+" "+this.nh.count.toString()+(this.Bp?"":", incomplete"),u,t,i;if(void 0!==n&&0<n)for(u=this.nh.count,t=0;t<u;t++)i=this.nh.wa(t),null!==i&&(r+="\n  "+i.toString(n-1));return r};dr.prototype.clear=dr.prototype.clear=function(){var n=this.nh,t,i;for(n.Ra(),t=n.count-1;0<=t;t--)i=n.wa(t),null!==i&&i.clear();n.clear();n.freeze()};dr.prototype.canUndo=dr.prototype.canUndo=function(){return this.Bp};dr.prototype.undo=dr.prototype.undo=function(){var n,t;if(this.canUndo())for(n=this.nh.count-1;0<=n;n--)t=this.nh.wa(n),null!==t&&t.undo()};dr.prototype.canRedo=dr.prototype.canRedo=function(){return this.Bp};dr.prototype.redo=dr.prototype.redo=function(){var i,n,t;if(this.canRedo())for(i=this.nh.count,n=0;n<i;n++)t=this.nh.wa(n),null!==t&&t.redo()};t.A(dr,{nh:"changes"},function(){return this.zH});t.g(dr,"name",dr.prototype.name);t.defineProperty(dr,{name:"name"},function(){return this.ec},function(n){this.ec=n});t.g(dr,"isComplete",dr.prototype.Bp);t.defineProperty(dr,{Bp:"isComplete"},function(){return this.MC},function(n){this.MC=n});t.ka("UndoManager",vi);vi.prototype.toString=function(n){for(var i="UndoManager "+this.pj+"<"+this.history.count+"<="+this.RA,i=i+"[",r=this.bG.count,t=0;t<r;t++)0<t&&(i+=" "),i+=this.bG.wa(t);if(i+="]",void 0!==n&&0<n)for(r=this.history.count,t=0;t<r;t++)i+="\n "+this.history.wa(t).toString(n-1);return i};vi.prototype.clear=vi.prototype.clear=function(){var n=this.history,t,i;for(n.Ra(),t=n.count-1;0<=t;t--)i=n.wa(t),null!==i&&i.clear();n.clear();this.ah=-1;n.freeze();this.Ki=!1;this.Qu=null;this.hl=0;this.jh.Ra();this.jh.clear();this.jh.freeze();this.Ho.clear()};vi.prototype.addModel=vi.prototype.VH=function(n){this.vz.add(n)};vi.prototype.removeModel=vi.prototype.fK=function(n){this.vz.remove(n)};vi.prototype.startTransaction=vi.prototype.yc=function(n){if(void 0===n&&(n=""),null===n&&(n=""),this.yb)return!1;!0===this.dz&&(this.dz=!1,this.hl++,this.ad("StartingFirstTransaction",n,this.kj),0<this.hl&&this.hl--);this.isEnabled&&(this.jh.Ra(),this.jh.add(n),this.jh.freeze(),null===this.kj?this.Ho.add(0):this.Ho.add(this.kj.nh.count));this.hl++;var t=1===this.Qe;return t&&this.ad("StartedTransaction",n,this.kj),t};vi.prototype.commitTransaction=vi.prototype.Ie=function(n){return hut(this,!0,n)};vi.prototype.rollbackTransaction=vi.prototype.$p=function(){return hut(this,!1,"")};vi.prototype.canUndo=vi.prototype.canUndo=function(){if(!this.isEnabled||0<this.Qe||this.yb)return!1;var n=this.YG;return null!==n&&n.canUndo()?!0:!1};vi.prototype.undo=vi.prototype.undo=function(){if(this.canUndo()){var n=this.YG;try{this.ad("StartingUndo","Undo",n);this.Ki=!0;this.ah--;n.undo()}catch(i){t.trace("undo error: "+i.toString())}finally{this.Ki=!1;this.ad("FinishedUndo","Undo",n)}}};vi.prototype.canRedo=vi.prototype.canRedo=function(){if(!this.isEnabled||0<this.Qe||this.yb)return!1;var n=this.XG;return null!==n&&n.canRedo()?!0:!1};vi.prototype.redo=vi.prototype.redo=function(){if(this.canRedo()){var n=this.XG;try{this.ad("StartingRedo","Redo",n);this.Ki=!0;this.ah++;n.redo()}catch(i){t.trace("redo error: "+i.toString())}finally{this.Ki=!1;this.ad("FinishedRedo","Redo",n)}}};vi.prototype.ad=function(n,t,i){void 0===i&&(i=null);var r=new ii;for(r.Bd=ro,r.propertyName=n,r.object=i,r.oldValue=t,n=this.NJ;n.next();)t=n.value,r.ea=t,t.vw(r)};vi.prototype.handleChanged=vi.prototype.oF=function(n){var r,i;!this.isEnabled||this.yb||this.skipsEvent(n)||(i=this.kj,null===i&&(this.Qu=i=new dr),r=n.copy(),i=i.nh,i.Ra(),i.add(r),i.freeze(),this.fA&&0>=this.Qe&&!this.dz&&(n=n.h,null!==n&&!1===n.rf||t.trace("Change not within a transaction: "+r.toString())))};vi.prototype.skipsEvent=function(n){if(null===n||0>n.Bd.value)return!0;if(n=n.object,n instanceof f){if(n=n.layer,null!==n&&n.Dc)return!0}else if(n instanceof et&&n.Dc)return!0;return!1};t.A(vi,{NJ:"models"},function(){return this.vz.k});t.g(vi,"isEnabled",vi.prototype.isEnabled);t.defineProperty(vi,{isEnabled:"isEnabled"},function(){return this.Re},function(n){this.Re=n});t.A(vi,{YG:"transactionToUndo"},function(){return 0<=this.pj&&this.pj<=this.history.count-1?this.history.wa(this.pj):null});t.A(vi,{XG:"transactionToRedo"},function(){return this.pj<this.history.count-1?this.history.wa(this.pj+1):null});t.A(vi,{yb:"isUndoingRedoing"},function(){return this.Ki});t.A(vi,{history:"history"},function(){return this.FH});t.g(vi,"maxHistoryLength",vi.prototype.RA);t.defineProperty(vi,{RA:"maxHistoryLength"},function(){return this.aD},function(n){this.aD=n});t.A(vi,{pj:"historyIndex"},function(){return this.ah});t.A(vi,{kj:"currentTransaction"},function(){return this.Qu});t.A(vi,{Qe:"transactionLevel"},function(){return this.hl});t.A(vi,{DF:"isInTransaction"},function(){return 0<this.hl});t.defineProperty(vi,{fA:"checksTransactionLevel"},function(){return this.By},function(n){this.By=n});t.A(vi,{bG:"nestedTransactionNames"},function(){return this.jh});t.ka("CommandHandler",at);at.prototype.toString=function(){return"CommandHandler"};t.A(at,{h:"diagram"},function(){return this.W});at.prototype.Ed=function(n){r&&null!==n&&t.l(n,i,at,"setDiagram");this.W=n};at.prototype.doKeyDown=function(){var n=this.h;if(null!==n){var u=n.T,r=t.ln?u.Op:u.control,f=u.shift,e=u.alt,i=u.key;!r||"C"!==i&&"Insert"!==i?r&&"X"===i||f&&"Del"===i?this.canCutSelection()&&this.cutSelection():"Del"===i?this.canDeleteSelection()&&this.deleteSelection():r&&"V"===i||f&&"Insert"===i?this.canPasteSelection()&&this.pasteSelection():r&&"Y"===i||e&&f&&"Backspace"===i?this.canRedo()&&this.redo():r&&"Z"===i||e&&"Backspace"===i?this.canUndo()&&this.undo():r&&"A"===i?this.canSelectAll()&&this.selectAll():"Esc"===i?this.canStopCommand()&&this.stopCommand():"Up"===i?n.uf&&(r?n.scroll("pixel","up"):n.scroll("line","up")):"Down"===i?n.uf&&(r?n.scroll("pixel","down"):n.scroll("line","down")):"Left"===i?n.tf&&(r?n.scroll("pixel","left"):n.scroll("line","left")):"Right"===i?n.tf&&(r?n.scroll("pixel","right"):n.scroll("line","right")):"PageUp"===i?f&&n.tf?n.scroll("page","left"):n.uf&&n.scroll("page","up"):"PageDown"===i?f&&n.tf?n.scroll("page","right"):n.uf&&n.scroll("page","down"):"Home"===i?(u=n.Lc,r&&n.uf?n.position=new h(n.position.x,u.y):!r&&n.tf&&(n.position=new h(u.x,n.position.y))):"End"===i?(u=n.Lc,f=n.Ab,r&&n.uf?n.position=new h(f.x,u.bottom-f.height):!r&&n.tf&&(n.position=new h(u.right-f.width,f.y))):"Subtract"===i?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===i?this.canIncreaseZoom()&&this.increaseZoom():r&&"0"===i?this.canResetZoom()&&this.resetZoom():f&&"Z"===i?this.canZoomToFit()&&this.zoomToFit():r&&!f&&"G"===i?this.canGroupSelection()&&this.groupSelection():r&&f&&"G"===i?this.canUngroupSelection()&&this.ungroupSelection():u.event&&113===u.event.which?this.canEditTextBlock()&&this.editTextBlock():u.event&&93===u.event.which?this.canShowContextMenu()&&this.showContextMenu():u.bubbles=!0:this.canCopySelection()&&this.copySelection()}};at.prototype.doKeyUp=function(){var n=this.h;null!==n&&(n.T.bubbles=!0)};at.prototype.stopCommand=function(){var n=this.h,t;null!==n&&(t=n.Ya,t instanceof lt&&n.Ve&&n.xw(),null!==t&&t.doCancel())};at.prototype.canStopCommand=function(){return!0};at.prototype.selectAll=function(){var n=this.h,t;if(null!==n){n.na();try{for(n.gc="wait",n.Ga("ChangingSelection"),t=n.vj;t.next();)t.value.ib=!0;for(t=n.vh;t.next();)t.value.ib=!0;for(t=n.links;t.next();)t.value.ib=!0}finally{n.Ga("ChangedSelection");n.gc=""}}};at.prototype.canSelectAll=function(){var n=this.h;return null!==n&&n.Ve};at.prototype.deleteSelection=function(){var n=this.h,t,i;if(null!==n&&!n.Ga("SelectionDeleting",n.selection))try{for(n.gc="wait",n.yc("Delete"),n.Ga("ChangingSelection"),t=new it(s),i=n.selection.k;i.next();)ss(t,i.value,!0,this.QE?Infinity:0,function(n){return n.canDelete()});n.mB(t,!0);n.Ga("SelectionDeleted",t)}finally{n.Ga("ChangedSelection");n.Ie("Delete");n.gc=""}};at.prototype.canDeleteSelection=function(){var n=this.h;return null===n||n.hb||n.ef||!n.ll||0===n.selection.count?!1:!0};at.prototype.Zm=function(n,t,i){var u=new gt(s,s),r;for(n=n.k;n.next();)r=n.value,ud(this,r,t,u,i);if(null!==t){i=t.ea;n=!1;null!==t.Cb.Od&&(n=t.Cb.Od.ki);for(var o=new it(c),h=new gt(c,c),l=u.k;l.next();)if(r=l.value,r instanceof c)n||null!==r.ca&&null!==r.fa||o.add(r);else if(i instanceof ci&&r instanceof y&&null!==r.data){var f=r,r=l.key,e=r.uA();null!==e&&((e=u.Da(e))?(i.xh(f.data,i.Lb(e.data)),f=t.Vf(f.data),r=r.tt(),null!==r&&null!==f&&h.add(r,f)):i.xh(f.data,void 0))}if(0<o.count&&t.mB(o,!1),0<h.count)for(t=h.k;t.next();)u.add(t.key,t.value)}for(t=u.k;t.next();)t.value.Vb();return u};at.prototype.copySelection=function(){var n=this.h,t;if(null!==n){for(t=new it(s),n=n.selection.k;n.next();)ss(t,n.value,!0,this.DE?Infinity:0,function(n){return n.canCopy()});this.copyToClipboard(t)}};at.prototype.canCopySelection=function(){var n=this.h;return null!==n&&n.dj&&n.rw&&0!==n.selection.count?!0:!1};at.prototype.cutSelection=function(){this.copySelection();this.deleteSelection()};at.prototype.canCutSelection=function(){var n=this.h;return null!==n&&!n.hb&&!n.ef&&n.dj&&n.ll&&n.rw&&0!==n.selection.count?!0:!1};at.prototype.copyToClipboard=function(n){var r=this.h,i;if(null!==r){if(i=null,null===n)t.gt=null,t.yw="";else{var i=r.ea,u=!1,f=!1,e=null;try{i instanceof ci&&(u=i.ol,i.ol=this.kA);i instanceof k&&(f=i.nl,i.nl=this.jA);e=r.Zm(n,null,!0)}finally{i instanceof ci&&(i.ol=u);i instanceof k&&(i.nl=f);i=new b(s);i.Ue(e);t.gt=i;t.yw=r.ea.bn}}r.Ga("ClipboardChanged",i)}};at.prototype.pasteFromClipboard=function(){var u=new it(s),r=t.gt,i;if(null===r||(i=this.h,null===i||t.yw!==i.ea.bn))return u;var n=i.ea,f=!1,e=!1,o=null;try{n instanceof ci&&(f=n.ol,n.ol=this.kA);n instanceof k&&(e=n.nl,n.nl=this.jA);o=i.Zm(r,i,!1)}finally{for(n instanceof ci&&(n.ol=f),n instanceof k&&(n.nl=e),r=o.k;r.next();)i=r.value,n=r.key,i.location.P()||(n.location.P()?i.location=n.location:!i.position.P()&&n.position.P()&&(i.position=n.position)),u.add(i)}return u};at.prototype.pasteSelection=function(n){var t=this.h,i,u,r,f,e;if(null!==t)try{for(t.gc="wait",t.yc("Paste"),t.Ga("ChangingSelection"),i=this.pasteFromClipboard(),0<i.count&&cv(t),u=i.k;u.next();)u.value.ib=!0;t.Ga("ChangedSelection");n instanceof h&&(r=t.computePartsBounds(t.selection),r&&(f=t.Cb.Od,e=f.computeEffectiveCollection(t.selection),f.moveParts(e,new h(n.x-r.Ia,n.y-r.Ua),!1)));t.Ga("ClipboardPasted",i)}finally{t.Ie("Paste");t.gc=""}};at.prototype.canPasteSelection=function(){var n=this.h;return null===n||n.hb||n.ef||!n.Pm||!n.rw||null===t.gt||t.yw!==n.ea.bn?!1:!0};at.prototype.undo=function(){var n=this.h;null!==n&&n.ma.undo()};at.prototype.canUndo=function(){var n=this.h;return null===n||n.hb||n.ef?!1:n.Zz&&n.ma.canUndo()};at.prototype.redo=function(){var n=this.h;null!==n&&n.ma.redo()};at.prototype.canRedo=function(){var n=this.h;return null===n||n.hb||n.ef?!1:n.Zz&&n.ma.canRedo()};at.prototype.decreaseZoom=function(n){void 0===n&&(n=1/this.qu);t.q(n,at,"decreaseZoom:factor");var i=this.h;null!==i&&i.Tm===we&&(n*=i.scale,n<i.Jg||n>i.Hg||(i.scale=n))};at.prototype.canDecreaseZoom=function(n){void 0===n&&(n=1/this.qu);t.q(n,at,"canDecreaseZoom:factor");var i=this.h;return null===i||i.Tm!==we?!1:(n*=i.scale,n<i.Jg||n>i.Hg?!1:i.bt)};at.prototype.increaseZoom=function(n){void 0===n&&(n=this.qu);t.q(n,at,"increaseZoom:factor");var i=this.h;null!==i&&i.Tm===we&&(n*=i.scale,n<i.Jg||n>i.Hg||(i.scale=n))};at.prototype.canIncreaseZoom=function(n){void 0===n&&(n=this.qu);t.q(n,at,"canIncreaseZoom:factor");var i=this.h;return null===i||i.Tm!==we?!1:(n*=i.scale,n<i.Jg||n>i.Hg?!1:i.bt)};at.prototype.resetZoom=function(n){void 0===n&&(n=this.mt);t.q(n,at,"resetZoom:newscale");var i=this.h;null===i||n<i.Jg||n>i.Hg||(i.scale=n)};at.prototype.canResetZoom=function(n){void 0===n&&(n=this.mt);t.q(n,at,"canResetZoom:newscale");var i=this.h;return null===i||n<i.Jg||n>i.Hg?!1:i.bt};at.prototype.zoomToFit=function(){var n=this.h,t,i;null!==n&&(t=n.scale,i=n.position,t!==this.cE||isNaN(this.qz)?(this.qz=t,this.YC=i.copy(),n.zoomToFit(),n.Ig(),this.cE=n.scale):(n.scale=this.qz,n.position=this.YC))};at.prototype.canZoomToFit=function(){var n=this.h;return null===n?!1:n.bt};at.prototype.collapseTree=function(n){var t,r,i;if(void 0===n&&(n=null),t=this.h,null===t)return!1;if(t.yc("Collapse Tree"),r=new b(y),n instanceof y&&n.Uc)n.collapseTree(),r.add(n);else for(n=t.selection.k;n.next();)i=n.value,i instanceof y&&i.Uc&&(i.collapseTree(),r.add(i));t.Ga("TreeCollapsed",r);t.Ie("Collapse Tree")};at.prototype.canCollapseTree=function(n){void 0===n&&(n=null);var t=this.h;if(null===t||t.hb)return!1;if(n instanceof y){if(!n.Uc)return!1;if(0<n.Tw().count)return!0}else for(n=t.selection.k;n.next();)if(t=n.value,t instanceof y&&t.Uc&&0<t.Tw().count)return!0;return!1};at.prototype.expandTree=function(n){var t,r,i;if(void 0===n&&(n=null),t=this.h,null===t)return!1;if(t.yc("Expand Tree"),r=new b(y),n instanceof y&&!n.Uc)n.expandTree(),r.add(n);else for(n=t.selection.k;n.next();)i=n.value,i instanceof y&&!i.Uc&&(i.expandTree(),r.add(i));t.Ga("TreeExpanded",r);t.Ie("Expand Tree")};at.prototype.canExpandTree=function(n){void 0===n&&(n=null);var t=this.h;if(null===t||t.hb)return!1;if(n instanceof y){if(n.Uc)return!1;if(0<n.Tw().count)return!0}else for(n=t.selection.k;n.next();)if(t=n.value,t instanceof y&&!t.Uc&&0<t.Tw().count)return!0;return!1};at.prototype.groupSelection=function(){var i=this.h,h,f,r,e,n,c,l,v,u,a;if(null!==i&&(h=i.ea,null!==h&&h instanceof k&&(f=this.aA,null!==f))){r=null;try{for(i.gc="wait",i.yc("Group"),i.Ga("ChangingSelection"),e=new b(s),n=i.selection.k;n.next();)c=n.value,c.Rd()&&c.canGroup()&&e.add(c);for(l=new b(s),v=e.k;v.next();){for(var o=v.value,c=!1,n=e.k;n.next();)if(o.Al(n.value)){c=!0;break}c||l.add(o)}if(0<l.count){if(n=l.k,n.next(),u=n.value.fb,null!==u)for(;null!==u;){for(n=l.k,n.next(),e=!1;n.next();)if(o=n.value,!o.Al(u)){e=!0;break}if(e)u=u.fb;else break}if(f instanceof g?(ce(f),r=f.copy(),r instanceof g&&i.add(r)):h.KA(f)&&(a=h.copyNodeData(f),t.xb(a)&&(h.Om(a),r=i.Sw(a))),r instanceof g){for(null!==u&&this.isValidMember(u,r)&&(r.fb=u),n=l.k;n.next();)o=n.value,this.isValidMember(r,o)&&(o.fb=r);i.select(r)}}i.Ga("ChangedSelection");i.Ga("SelectionGrouped",r)}finally{i.Ie("Group");i.gc=""}}};at.prototype.canGroupSelection=function(){var n=this.h,t;if(null===n||n.hb||n.ef||!n.Pm||!n.Zo||(t=n.ea,null===t||!(t instanceof k)||null===this.aA))return!1;for(n=n.selection.k;n.next();)if(t=n.value,t.Rd()&&t.canGroup())return!0;return!1};at.prototype.isValidMember=function(n,t){if(null===t||n===t||t instanceof c)return!1;if(null!==n){if(n===t||n.Al(t))return!1;var i=n.Lt;if(null!==i&&!i(n,t)||null===n.data&&null!==t.data||null!==n.data&&null===t.data)return!1}return i=this.Lt,null!==i?i(n,t):!0};at.prototype.ungroupSelection=function(n){var t,i,r,u,e,a,f,v;if(void 0===n&&(n=null),t=this.h,null!==t&&(i=t.ea,null!==i&&i instanceof k))try{if(t.gc="wait",t.yc("Ungroup"),t.Ga("ChangingSelection"),r=new b(g),n instanceof g)r.add(n);else for(u=t.selection.k;u.next();)e=u.value,e instanceof g&&e.canUngroup()&&r.add(e);if(0<r.count)for(t.xw(),u=r.k;u.next();){var o=u.value,y=o.data,h=o.fb,p=null!==h&&null!==h.data?i.Lb(h.data):void 0,l=new b(s);for(l.Ue(o.Vc),a=l.k;a.next();)f=a.value,f instanceof c||(v=f.data,null!==v?i.Ix(v,p):f.fb=h,f.ib=!0);null!==y?i.Bx(y):t.remove(o)}t.Ga("ChangedSelection");t.Ga("SelectionUngrouped",r,l)}finally{t.Ie("Ungroup");t.gc=""}};at.prototype.canUngroupSelection=function(n){var t,i;if((void 0===n&&(n=null),t=this.h,null===t||t.hb||t.ef||!t.ll||!t.dp)||(i=t.ea,null===i||!(i instanceof k)))return!1;if(n instanceof g){if(n.canUngroup())return!0}else for(n=t.selection.k;n.next();)if(t=n.value,t instanceof g&&t.canUngroup())return!0;return!1};at.prototype.addTopLevelParts=function(n,t){for(var i,r=!0,u=fd(n).k;u.next();)i=u.value,null!==i.fb&&(!t||this.isValidMember(null,i)?i.fb=null:r=!1);return r};at.prototype.collapseSubGraph=function(n){var t,r,i;if(void 0===n&&(n=null),t=this.h,null===t)return!1;if(t.yc("Collapse SubGraph"),r=new b(g),n instanceof g&&n.xe)n.collapseSubGraph(),r.add(n);else for(n=t.selection.k;n.next();)i=n.value,i instanceof g&&i.xe&&(i.collapseSubGraph(),r.add(i));t.Ga("SubGraphCollapsed",r);t.Ie("Collapse SubGraph")};at.prototype.canCollapseSubGraph=function(n){void 0===n&&(n=null);var t=this.h;if(null===t||t.hb)return!1;if(n instanceof g)return n.xe?!0:!1;for(n=t.selection.k;n.next();)if(t=n.value,t instanceof g&&t.xe)return!0;return!1};at.prototype.expandSubGraph=function(n){var t,r,i;if(void 0===n&&(n=null),t=this.h,null===t)return!1;if(t.yc("Expand SubGraph"),r=new b(g),n instanceof g&&!n.xe)n.expandSubGraph(),r.add(n);else for(n=t.selection.k;n.next();)i=n.value,i instanceof g&&!i.xe&&(i.expandSubGraph(),r.add(i));t.Ga("SubGraphExpanded",r);t.Ie("Expand SubGraph")};at.prototype.canExpandSubGraph=function(n){void 0===n&&(n=null);var t=this.h;if(null===t||t.hb)return!1;if(n instanceof g)return n.xe?!1:!0;for(n=t.selection.k;n.next();)if(t=n.value,t instanceof g&&!t.xe)return!0;return!1};at.prototype.editTextBlock=function(n){var t,i,r,u;if(void 0===n&&(n=null),t=this.h,null!==t&&(i=t.Cb.Ox,null!==i)){if(null===n){for(n=t.selection.k,r=null;n.next();)if(u=n.value,u.canEdit()){r=u;break}if(null===r)return;n=r.qt(function(n){return n instanceof ot&&n.Mw})}null!==n&&n instanceof ot&&(i.Ug=n,t.Ya=i)}};at.prototype.canEditTextBlock=function(n){void 0===n&&(n=null);var t=this.h;if(null===t||t.hb||t.ef||!t.cp||null===t.Cb.Ox)return!1;if(n instanceof ot){if(n=n.U,null!==n&&n.canEdit())return!0}else for(t=t.selection.k;t.next();)if(n=t.value,n.canEdit()&&(n=n.qt(function(n){return n instanceof ot&&n.Mw}),null!==n))return!0;return!1};at.prototype.showContextMenu=function(n){var i=this.h,r,u,t;null!==i&&(r=i.Cb.Dw,null!==r&&(void 0===n&&(n=0<i.selection.count?i.selection.gb():i),n=r.findObjectWithContextMenu(n),null!==n)&&(u=new kt,t=null,n instanceof f?t=n.wb(si):i.uo||(t=i.Ab,t=new h(t.x+t.width/2,t.y+t.height/2)),null!==t&&(u.Wd=i.JB(t),u.da=t,i.dc=u),i.Ya=r,oft(r,!1,n)))};at.prototype.canShowContextMenu=function(n){var t=this.h,i;return null===t?!1:(i=t.Cb.Dw,null===i)?!1:(void 0===n&&(n=0<t.selection.count?t.selection.gb():t),null===i.findObjectWithContextMenu(n)?!1:!0)};t.g(at,"copiesTree",at.prototype.DE);t.defineProperty(at,{DE:"copiesTree"},function(){return this.mC},function(n){t.i(n,"boolean",at,"copiesTree");this.mC=n});t.g(at,"deletesTree",at.prototype.QE);t.defineProperty(at,{QE:"deletesTree"},function(){return this.wC},function(n){t.i(n,"boolean",at,"deletesTree");this.wC=n});t.g(at,"copiesParentKey",at.prototype.kA);t.defineProperty(at,{kA:"copiesParentKey"},function(){return this.lC},function(n){t.i(n,"boolean",at,"copiesParentKey");this.lC=n});t.g(at,"copiesGroupKey",at.prototype.jA);t.defineProperty(at,{jA:"copiesGroupKey"},function(){return this.kC},function(n){t.i(n,"boolean",at,"copiesGroupKey");this.kC=n});t.g(at,"archetypeGroupData",at.prototype.aA);t.defineProperty(at,{aA:"archetypeGroupData"},function(){return this.xy},function(n){null!==n&&t.l(n,Object,at,"archetypeGroupData");var i=this.h;null!==i&&(i=i.ea,i instanceof k&&(n instanceof g||i.KA(n)||t.m("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+n)));this.xy=n});t.g(at,"memberValidation",at.prototype.Lt);t.defineProperty(at,{Lt:"memberValidation"},function(){return this.al},function(n){null!==n&&t.i(n,"function",at,"memberValidation");this.al=n});t.g(at,"defaultScale",at.prototype.mt);t.defineProperty(at,{mt:"defaultScale"},function(){return this.uC},function(n){t.q(n,at,"defaultScale");0<n||t.m("defaultScale must be larger than zero, not: "+n);this.uC=n});t.g(at,"zoomFactor",at.prototype.qu);t.defineProperty(at,{qu:"zoomFactor"},function(){return this.bE},function(n){t.q(n,at,"zoomFactor");1<n||t.m("zoomFactor must be larger than 1.0, not: "+n);this.bE=n});t.ka("Tool",wt);wt.prototype.Ed=function(n){r&&null!==n&&t.l(n,i,wt,"setDiagram");this.W=n};wt.prototype.toString=function(){return""!==this.name?this.name+" Tool":t.Dg(Object.getPrototypeOf(this))};wt.prototype.updateAdornments=function(){};wt.prototype.canStart=function(){return this.isEnabled};wt.prototype.doStart=function(){};wt.prototype.doActivate=function(){this.la=!0};wt.prototype.doDeactivate=function(){this.la=!1};wt.prototype.doStop=function(){};wt.prototype.doCancel=function(){this.stopTool()};wt.prototype.stopTool=function(){var n=this.h;null!==n&&n.Ya===this&&(n.Ya=null,n.gc="")};wt.prototype.doMouseDown=function(){!this.la&&this.canStart()&&this.doActivate()};wt.prototype.doMouseMove=function(){};wt.prototype.doMouseUp=function(){this.stopTool()};wt.prototype.doMouseWheel=function(){};wt.prototype.doKeyDown=function(){var n=this.h;null!==n&&"Esc"===n.T.key&&this.doCancel()};wt.prototype.doKeyUp=function(){};wt.prototype.startTransaction=wt.prototype.yc=function(n){this.mf=null;var t=this.h;return null===t?!1:t.yc(n)};wt.prototype.stopTransaction=wt.prototype.vk=function(){var n=this.h;return null===n?!1:null===this.mf?n.$p():n.Ie(this.mf)};wt.prototype.standardMouseSelect=function(){var i=this.h,n,r;if(null!==i&&i.Ve)if(n=i.T,r=i.st(n.da,!1),null!==r){if(t.ln?n.Op:n.control){for(i.Ga("ChangingSelection"),n=r;null!==n&&!n.canSelect();)n=n.fb;null!==n&&(n.ib=!n.ib);i.Ga("ChangedSelection")}else if(n.shift){if(!r.ib){for(i.Ga("ChangingSelection"),n=r;null!==n&&!n.canSelect();)n=n.fb;null!==n&&(n.ib=!0);i.Ga("ChangedSelection")}}else if(!r.ib){for(n=r;null!==n&&!n.canSelect();)n=n.fb;null!==n&&i.select(n)}}else!n.left||(t.ln?n.Op:n.control)||n.shift||i.xw()};wt.prototype.standardMouseClick=function(n,t){var i,r,u;void 0===n&&(n=null);void 0===t&&(t=function(n){return!n.layer.Dc});i=this.h;null!==i&&(r=i.T,u=i.de(r.da,n,t),r.ke=u,cut(u,r,i))};wt.prototype.standardMouseOver=function(){var r=this.h,u,e,t,f,n,o,i;if(null!==r&&(u=r.T,null!==u.h&&!0!==r.mc.zd)){if(e=r.ab,r.ab=!0,t=r.de(u.da,null,null),u.ke=t,f=!1,t!==r.Sn){for(n=r.Sn,o=n,r.Sn=t,this.doCurrentObjectChanged(n,t);null!==n;){if(i=n.VA,null!==i){if(t===n)break;if(null!==t&&t.rj(n))break;if(i(u,n,t),f=!0,u.Ke)break}n=n.ia}for(n=o;null!==t;){if(i=t.UA,null!==i){if(n===t)break;if(null!==n&&n.rj(t))break;if(i(u,t,n),f=!0,u.Ke)break}t=t.ia}t=r.Sn}if(null!==t){for(n=t,i="";null!==n;){if(i=n.cursor,""!==i)break;n=n.ia}for(r.gc=i,n=t;null!==n;){if(i=n.Pt,null!==i&&(i(u,n),f=!0,u.Ke))break;n=n.ia}}else r.gc="",i=r.Pt,null!==i&&(i(u),f=!0);f&&r.ie();r.ab=e}};wt.prototype.doCurrentObjectChanged=function(){};wt.prototype.standardMouseWheel=function(){var n=this.h,i,r,u,f,t;null!==n&&(i=n.T,r=i.mk,0!==r&&n.Lc.P()&&(u=n.Ye,t=n.Cb.un,(t===yl&&!i.shift||t===vl&&i.control)&&(0<r?u.canIncreaseZoom():u.canDecreaseZoom())?(t=n.eg,n.eg=i.Wd,0<r?u.increaseZoom():u.decreaseZoom(),n.eg=t,i.bubbles=!1):(t===yl&&i.shift||t===vl&&!i.control)&&(u=n.position.copy(),t=0<r?r:-r,!i.shift&&n.uf?(f=n.dq,t=t/40*f,0<r?n.scroll("pixel","up",t):n.scroll("pixel","down",t)):i.shift&&n.tf&&(f=n.cq,t=t/40*f,0<r?n.scroll("pixel","left",t):n.scroll("pixel","right",t)),n.position.O(u)||(i.bubbles=!1))))};wt.prototype.standardWaitAfter=function(i){t.i(i,"number",wt,"standardWaitAfter:delay");this.cancelWaitAfter();var r=this;this.lw=n.setTimeout(function(){r.doWaitAfter()},i)};wt.prototype.cancelWaitAfter=function(){-1!==this.lw&&n.clearTimeout(this.lw);this.lw=-1};wt.prototype.doWaitAfter=function(){};wt.prototype.findToolHandleAt=function(n,t){var i=this.h,r;return null===i?null:(i=i.de(n,null,function(n){return n=n.U,null===n?!1:null!==n.uc}),null===i)?null:(r=i.U,null===r||r.cd!==t?null:i)};wt.prototype.isBeyondDragSize=function(n,i){var r=this.h;if(null===r)return!1;void 0===n&&(n=r.Rc.Wd);void 0===i&&(i=r.T.Wd);var u=r.Cb.SE,r=u.width,u=u.height;return t.CB&&(r+=6,u+=6),Math.abs(i.x-n.x)>r||Math.abs(i.y-n.y)>u};t.A(wt,{h:"diagram"},function(){return this.W});t.g(wt,"name",wt.prototype.name);t.defineProperty(wt,{name:"name"},function(){return this.ec},function(n){t.i(n,"string",wt,"name");this.ec=n});t.g(wt,"isEnabled",wt.prototype.isEnabled);t.defineProperty(wt,{isEnabled:"isEnabled"},function(){return this.Re},function(n){t.i(n,"boolean",wt,"isEnabled");this.Re=n});t.g(wt,"isActive",wt.prototype.la);t.defineProperty(wt,{la:"isActive"},function(){return this.KC},function(n){t.i(n,"boolean",wt,"isActive");this.KC=n});t.g(wt,"transactionResult",wt.prototype.mf);t.defineProperty(wt,{mf:"transactionResult"},function(){return this.YD},function(n){null!==n&&t.i(n,"string",wt,"transactionResult");this.YD=n});t.ka("DraggingTool",ct);t.Qa(ct,wt);t.g(ct,"isCopyEnabled",ct.prototype.IA);t.defineProperty(ct,{IA:"isCopyEnabled"},function(){return this.OC},function(n){t.i(n,"boolean",ct,"isCopyEnabled");this.OC=n});t.g(ct,"copiesEffectiveCollection",ct.prototype.CE);t.defineProperty(ct,{CE:"copiesEffectiveCollection"},function(){return this.jC},function(n){t.i(n,"boolean",ct,"copiesEffectiveCollection");this.jC=n});t.g(ct,"dragsTree",ct.prototype.TE);t.defineProperty(ct,{TE:"dragsTree"},function(){return this.BC},function(n){t.i(n,"boolean",ct,"dragsTree");this.BC=n});t.g(ct,"isGridSnapEnabled",ct.prototype.Dp);t.defineProperty(ct,{Dp:"isGridSnapEnabled"},function(){return this.jr},function(n){t.i(n,"boolean",ct,"isGridSnapEnabled");this.jr=n});t.g(ct,"isComplexRoutingRealtime",ct.prototype.AF);t.defineProperty(ct,{AF:"isComplexRoutingRealtime"},function(){return this.NC},function(n){t.i(n,"boolean",ct,"isComplexRoutingRealtime");this.NC=n});t.g(ct,"isGridSnapRealtime",ct.prototype.CF);t.defineProperty(ct,{CF:"isGridSnapRealtime"},function(){return this.SC},function(n){t.i(n,"boolean",ct,"isGridSnapRealtime");this.SC=n});t.g(ct,"gridSnapCellSize",ct.prototype.CA);t.defineProperty(ct,{CA:"gridSnapCellSize"},function(){return this.fz},function(n){t.l(n,st,ct,"gridSnapCellSize");this.fz.O(n)||(this.fz=n=n.ba())});t.g(ct,"gridSnapCellSpot",ct.prototype.lF);t.defineProperty(ct,{lF:"gridSnapCellSpot"},function(){return this.gz},function(n){t.l(n,e,ct,"gridSnapCellSpot");this.gz.O(n)||(this.gz=n=n.ba())});t.g(ct,"gridSnapOrigin",ct.prototype.mF);t.defineProperty(ct,{mF:"gridSnapOrigin"},function(){return this.hz},function(n){t.l(n,h,ct,"gridSnapOrigin");this.hz.O(n)||(this.hz=n=n.ba())});t.g(ct,"dragsLink",ct.prototype.ki);t.defineProperty(ct,{ki:"dragsLink"},function(){return this.AC},function(n){t.i(n,"boolean",ct,"dragsLink");this.AC=n});t.g(ct,"currentPart",ct.prototype.jp);t.defineProperty(ct,{jp:"currentPart"},function(){return this.pC},function(n){null!==n&&t.l(n,s,ct,"currentPart");this.pC=n});t.g(ct,"copiedParts",ct.prototype.rd);t.defineProperty(ct,{rd:"copiedParts"},function(){return this.iC},function(n){this.iC=n});t.g(ct,"draggedParts",ct.prototype.Hc);t.defineProperty(ct,{Hc:"draggedParts"},function(){return this.zC},function(n){this.zC=n});t.g(ct,"draggedLink",ct.prototype.Qc);t.defineProperty(ct,{Qc:"draggedLink"},function(){return this.yC},function(n){null!==n&&t.l(n,c,ct,"draggedLink");this.yC=n});t.g(ct,"isDragOutStarted",ct.prototype.Dt);t.defineProperty(ct,{Dt:"isDragOutStarted"},function(){return this.QC},function(n){this.QC=n});t.g(ct,"startPoint",ct.prototype.wj);t.defineProperty(ct,{wj:"startPoint"},function(){return this.$v},function(n){t.l(n,h,ct,"startPoint");this.$v.O(n)||(this.$v=n=n.ba())});t.g(ct,"delay",ct.prototype.Jw);t.defineProperty(ct,{Jw:"delay"},function(){return this.bo},function(n){t.i(n,"number",ct,"delay");this.bo=n});ct.prototype.canStart=function(){var n,t;return this.isEnabled?(n=this.h,null===n||!n.fk&&!n.dj&&!n.at||!n.Ve)?!1:(t=n.T,!t.left||n.Ya!==this&&(!this.isBeyondDragSize()||t.lx&&t.timestamp-n.Rc.timestamp<this.bo)?!1:null!==this.findDraggablePart()):!1};ct.prototype.findDraggablePart=function(){var n=this.h;if(null===n||(n=n.st(n.Rc.da,!1),null===n))return null;for(;null!==n&&!n.canSelect();)n=n.fb;return null!==n&&(n.canMove()||n.canCopy())?n:null};ct.prototype.standardMouseSelect=function(){var i=this.h,n;if(null!==i&&i.Ve&&(n=i.st(i.Rc.da,!1),null!==n)){for(;null!==n&&!n.canSelect();)n=n.fb;this.jp=n;this.jp.ib||(i.Ga("ChangingSelection"),n=i.T,(t.ln?n.Op:n.control)||n.shift||cv(i),this.jp.ib=!0,i.Ga("ChangedSelection"))}};ct.prototype.doActivate=function(){var n=this.h,t;null!==n&&(this.standardMouseSelect(),t=this.jp,null!==t&&(t.canMove()||t.canCopy())&&(this.la=!0,this.Qo.set(n.position),ed(this,n.selection),this.Yl=this.Ov=null,this.Hc=this.computeEffectiveCollection(n.selection),n.Oo=!0,aut(this,this.Hc),this.yc("Drag"),this.wj=n.Rc.da,n.Qd=!0,n.at&&(this.Dt=!0,this.Wq=!1,lr=this,sl=this.h,this.doSimulatedDragOut())))};ct.prototype.computeEffectiveCollection=function(n){var i=null!==this.h&&this.h.Ya===this,t=new gt(s,Object),r,u;if(null===n)return t;for(r=n.k;r.next();)u=r.value,kh(this,t,u,i);if(null!==this.Qc&&this.ki)return t;for(r=n.k;r.next();)u=r.value,u instanceof c&&(n=u,i=n.ca,null===i||t.contains(i)?(i=n.fa,null===i||t.contains(i)||t.remove(n)):t.remove(n));return t};ct.prototype.doDeactivate=function(){var n,r,i,t;if(this.la=!1,n=this.h,null!==n&&fh(n),od(this),sd(this,this.Hc),this.Hc=null,this.Wq=this.Dt=!1,0<dh.count){for(r=dh.length,i=0;i<r;i++)t=dh.n[i],yut(t),rh(t),od(t),null!==t.h&&fh(t.h);dh.clear()}yut(this);this.Qo.eq(NaN,NaN);lr=sl=null;rh(this);n.Qd=!1;n.gc="";n.Oo=!1;this.vk()};ct.prototype.doCancel=function(){rh(this);cd(this);var n=this.h;null!==n&&this.Qo.P()&&(n.position=this.Qo);this.stopTool()};ct.prototype.doKeyDown=function(){var n=this.h;null!==n&&(n=n.T,null!==n&&this.la&&("Esc"===n.key?this.doCancel():this.doMouseMove()))};ct.prototype.doKeyUp=function(){var n=this.h;null!==n&&null!==n.T&&this.la&&this.doMouseMove()};ct.prototype.moveParts=function(n,i,r){var l,h,y,o,s,e,a;if(null!==n&&(t.l(n,gt,ct,"moveParts:parts"),0!==n.count)){l=t.N();h=t.N();h.assign(i);isNaN(h.x)&&(h.x=0);isNaN(h.y)&&(h.y=0);y=this.Is;y||aut(this,n);for(var f=new b,v=new b(fl),u=n.k;u.next();)o=u.key,o.Rd()?(s=put(this,o,n),null!==s?f.add({Jc:o,info:u.value,jJ:s}):(!r||o.canMove())&&(s=u.value.point,l.assign(s),e=t.N(),this.computeMove(o,l.add(h),n,e),o.location=e,t.B(e),u.value.Gz=e.ju(s))):u.key instanceof c&&v.add(u.Db);for(r=f.k;r.next();)f=r.value,s=f.info.point,l.assign(s),f.Jc.location=l.add(f.jJ.Gz);for(s=t.N(),r=t.N(),v=v.k;v.next();)(e=v.value,f=e.key,f instanceof c)&&(f.jq?(u=f.ca,o=f.fa,null!==this.Qc&&this.ki)?(e=e.value.point,n.add(f,uo(h)),u=i.x-e.x,o=i.y-e.y,f.Dl(u,o)):(null!==u&&(s.assign(u.location),a=n.Da(u),null!==a&&s.ju(a.point)),null!==o&&(r.assign(o.location),a=n.Da(o),null!==a&&r.ju(a.point)),null!==u&&null!==o?s.yf(r)?(e=e.value.point,u=l,u.assign(s),u.ju(e),n.add(f,uo(s)),f.Dl(u.x,u.y)):(f.jq=!1,f.hc()):(e=e.value.point,n.add(f,uo(null!==u?s:null!==o?r:i)),u=h.x-e.x,o=h.y-e.y,f.Dl(u,o))):(null===f.ca||null===f.fa)&&(e=e.value.point,n.add(f,uo(i)),u=h.x-e.x,o=h.y-e.y,f.Dl(u,o)));t.B(l);t.B(h);t.B(s);t.B(r);y||sd(this,n)}};ct.prototype.computeMove=function(n,i,r,f){var c,s,v;if(void 0===f&&(f=new h),f.assign(i),null===n)return f;if(void 0===r&&(r=null),c=i,this.Dp&&(this.CF||null===r||this.h.T.zj)&&(c=t.N(),r=c,r.assign(i),null!==n)&&(s=this.h,null!==s)){var e=s.xp,o=this.CA,s=o.width,o=o.height,a=this.mF,l=a.x,a=a.y,y=this.lF;null!==e&&(v=e.vt,isNaN(s)&&(s=v.width),isNaN(o)&&(o=v.height),e=e.BA,isNaN(l)&&(l=e.x),isNaN(a)&&(a=e.y));e=t.qc(0,0);e.fu(0,0,s,o,y);u.rt(i.x,i.y,l+e.x,a+e.y,s,o,r);t.B(e)}return r=null!==n.pA?n.pA(n,i,c):c,o=n.ZF,s=o.x,isNaN(s)&&(s=n.location.x),o=o.y,isNaN(o)&&(o=n.location.y),e=n.TF,l=e.x,isNaN(l)&&(l=n.location.x),e=e.y,isNaN(e)&&(e=n.location.y),f.p(Math.max(s,Math.min(r.x,l)),Math.max(o,Math.min(r.y,e))),c!==i&&t.B(c),f};ct.prototype.doDragOver=function(){};ct.prototype.doDropOnto=function(){};ct.prototype.doMouseMove=function(){var n,t,i;this.la&&(n=this.h,null!==n&&null!==this.jp&&null!==this.Hc&&(t=!1,i=!1,this.mayCopy()?(t=!0,n.gc="copy",hd(this,!1),cc(this,this.rd,!1)):this.mayMove()?(i=!0,n.gc="default",rh(this),cc(this,this.Hc,!0)):this.mayDragOut()?(n.gc="no-drop",hd(this,!1),cc(this,this.rd,!1)):rh(this),ld(this,n.T.da,i,t)))};ct.prototype.doMouseUp=function(){var t,i,r,n;if(this.la&&(this.Wq=!0,t=this.h,null!==t)){if(i=!1,r=this.mayCopy(),r&&null!==this.rd?(rh(this),hd(this,!0),cc(this,this.rd,!1),null!==this.rd&&t.zG(this.rd.Pl())):(i=!0,rh(this),this.mayMove()&&(cc(this,this.Hc,!0),this.Yv=!1,ld(this,t.T.da,!0,!1),this.Yv=!0)),dut(this,t.T.da),this.la){if(this.rd=null,i&&null!==this.Hc)for(i=this.Hc.k;i.next();)n=i.key,n instanceof y&&(n=n.fb,null===n||null===n.placeholder||this.Hc.contains(n)||n.hA&&n.ja());t.Sc();sd(this,this.Hc);this.mf=r?"Copy":"Move";t.Ga(r?"SelectionCopied":"SelectionMoved",t.selection)}this.stopTool()}};ct.prototype.mayCopy=function(){var n,i;if(!this.IA||(n=this.h,null===n||n.hb||n.ef||!n.Pm||!n.dj||(t.ln?!n.T.alt:!n.T.control)))return!1;for(n=n.selection.k;n.next();)if(i=n.value,i.Rd()&&i.canCopy())return!0;return null!==this.Qc&&this.ki&&this.Qc.canCopy()?!0:!1};ct.prototype.mayDragOut=function(){var n,t;if(!this.IA||(n=this.h,null===n||!n.at||!n.dj||n.fk))return!1;for(n=n.selection.k;n.next();)if(t=n.value,t.Rd()&&t.canCopy())return!0;return null!==this.Qc&&this.ki&&this.Qc.canCopy()?!0:!1};ct.prototype.mayMove=function(){var n=this.h,t;if(null===n||n.hb||!n.fk)return!1;for(n=n.selection.k;n.next();)if(t=n.value,t.Rd()&&t.canMove())return!0;return null!==this.Qc&&this.ki&&this.Qc.canMove()?!0:!1};var dh=new b(ct),lr=null,sl=null;ct.prototype.mayDragIn=function(){var n=this.h;return null===n||!n.Yz||n.hb||n.ef||!n.Pm||null===n.ea?!1:!0};ct.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var n=lr;null!==n&&(n.h.gc="copy")}};ct.prototype.doSimulatedDragLeave=function(){var n=lr;null!==n&&n.doSimulatedDragOut();this.doCancel()};ct.prototype.doSimulatedDragOver=function(){var t=this.h,n;null!==t&&(n=lr,null!==n&&null!==n.Hc&&this.mayDragIn()&&(t.gc="copy",gut(this,n.Hc.Pl(),!1),cc(this,this.rd,!1),ld(this,t.T.da,!1,!0)))};ct.prototype.doSimulatedDrop=function(){var n=this.h,t;null!==n&&(t=lr,null!==t&&(t.Wq=!0,rh(this),this.mayDragIn()&&(this.yc("Drop"),gut(this,t.Hc.Pl(),!0),cc(this,this.rd,!1),null!==this.rd&&n.zG(this.rd.Pl()),this.mf="ExternalCopy",dut(this,n.T.da),n.Sc(),this.rd=null,n.Ga("ExternalObjectsDropped",n.selection),this.vk())))};ct.prototype.doSimulatedDragOut=function(){var n=this.h;null!==n&&(n.gc=this.mayCopy()||this.mayMove()?"":"no-drop")};t.ka("LinkingBaseTool",bt);t.Qa(bt,wt);bt.prototype.doStop=function(){var n=this.h;null!==n&&fh(n);this.Rg=this.Qg=this.Pg=this.Og=this.vc=null;this.Px.clear();this.If=null};t.g(bt,"portGravity",bt.prototype.dB);t.defineProperty(bt,{dB:"portGravity"},function(){return this.vD},function(n){t.i(n,"number",bt,"portGravity");0<=n&&(this.vD=n)});t.g(bt,"isUnconnectedLinkValid",bt.prototype.mn);t.defineProperty(bt,{mn:"isUnconnectedLinkValid"},function(){return this.VC},function(n){t.i(n,"boolean",bt,"isUnconnectedLinkValid");this.VC=n});t.g(bt,"temporaryLink",bt.prototype.cg);t.defineProperty(bt,{cg:"temporaryLink"},function(){return this.RD},function(n){t.l(n,c,bt,"temporaryLink");this.RD=n});t.g(bt,"temporaryFromNode",bt.prototype.le);t.defineProperty(bt,{le:"temporaryFromNode"},function(){return this.PD},function(n){t.l(n,y,bt,"temporaryFromNode");this.PD=n});t.g(bt,"temporaryFromPort",bt.prototype.Nl);t.defineProperty(bt,{Nl:"temporaryFromPort"},function(){return this.QD},function(n){t.l(n,f,bt,"temporaryFromPort");this.QD=n});t.g(bt,"temporaryToNode",bt.prototype.me);t.defineProperty(bt,{me:"temporaryToNode"},function(){return this.SD},function(n){t.l(n,y,bt,"temporaryToNode");this.SD=n});t.g(bt,"temporaryToPort",bt.prototype.Ol);t.defineProperty(bt,{Ol:"temporaryToPort"},function(){return this.TD},function(n){t.l(n,f,bt,"temporaryToPort");this.TD=n});t.g(bt,"originalLink",bt.prototype.vc);t.defineProperty(bt,{vc:"originalLink"},function(){return this.pD},function(n){null!==n&&t.l(n,c,bt,"originalLink");this.pD=n});t.g(bt,"originalFromNode",bt.prototype.Og);t.defineProperty(bt,{Og:"originalFromNode"},function(){return this.nD},function(n){null!==n&&t.l(n,y,bt,"originalFromNode");this.nD=n});t.g(bt,"originalFromPort",bt.prototype.Pg);t.defineProperty(bt,{Pg:"originalFromPort"},function(){return this.oD},function(n){null!==n&&t.l(n,f,bt,"originalFromPort");this.oD=n});t.g(bt,"originalToNode",bt.prototype.Qg);t.defineProperty(bt,{Qg:"originalToNode"},function(){return this.sD},function(n){null!==n&&t.l(n,y,bt,"originalToNode");this.sD=n});t.g(bt,"originalToPort",bt.prototype.Rg);t.defineProperty(bt,{Rg:"originalToPort"},function(){return this.tD},function(n){null!==n&&t.l(n,f,bt,"originalToPort");this.tD=n});t.defineProperty(bt,{fe:"isForwards"},function(){return this.RC},function(n){t.i(n,"boolean",bt,"isForwards");this.RC=n});t.A(bt,{Px:"validPortsCache"},function(){return this.OH});t.g(bt,"targetPort",bt.prototype.If);t.defineProperty(bt,{If:"targetPort"},function(){return this.LD},function(n){null!==n&&t.l(n,f,bt,"targetPort");this.LD=n});bt.prototype.copyPortProperties=function(n,i,r,u,f){if(null!==n&&null!==i&&null!==r&&null!==u){u.Ea=i.pa.size;f?(u.zb=i.zb,u.xk=i.xk):(u.vb=i.vb,u.rk=i.rk);r.gf=si;var e=t.N();r.location=i.wb(si,e);t.B(e);u.angle=i.ul();null!==this.Wt&&this.Wt(n,i,r,u,f)}};bt.prototype.setNoTargetPortProperties=function(n,t,i){null!==t&&(t.Ea=u.jy,t.vb=pi,t.zb=pi);null!==n&&(n.location=this.h.T.da);null!==this.Wt&&this.Wt(null,null,n,t,i)};bt.prototype.doMouseDown=function(){this.la&&this.doMouseMove()};bt.prototype.doMouseMove=function(){var n,t;if(this.la&&(n=this.h,null!==n)){if(this.If=this.findTargetPort(this.fe),null!==this.If&&(t=this.If.U,t instanceof y)){this.fe?this.copyPortProperties(t,this.If,this.me,this.Ol,!0):this.copyPortProperties(t,this.If,this.le,this.Nl,!1);return}this.fe?this.setNoTargetPortProperties(this.me,this.Ol,!0):this.setNoTargetPortProperties(this.le,this.Nl,!1);(n.tf||n.uf)&&not(n,n.T.Wd)}};bt.prototype.findValidLinkablePort=function(n,t){var i,r;if(null===n||(i=n.U,!(i instanceof y)))return null;for(;null!==n;){if(r=t?n.GB:n.yA,!0===r&&(null!==n.Ud||n instanceof y)&&(t?this.isValidTo(i,n):this.isValidFrom(i,n)))return n;if(!1===r)break;n=n.ia}return null};bt.prototype.findTargetPort=function(n){var r=this.h,u=r.T.da,e=this.dB,i,s;0>=e&&(e=.1);for(var l=this,h=r.fn(u,e,function(t){return l.findValidLinkablePort(t,n)},null,!0),e=Infinity,r=null,h=h.k;h.next();)if(i=h.value,s=i.U,s instanceof y){var f=i.wb(si,t.N()),o=u.x-f.x,c=u.y-f.y;t.B(f);f=o*o+c*c;f<e&&(o=this.Px.Da(i),null!==o?o&&(r=i,e=f):n&&this.isValidLink(this.Og,this.Pg,s,i)||!n&&this.isValidLink(s,i,this.Qg,this.Rg)?(this.Px.add(i,!0),r=i,e=f):this.Px.add(i,!1))}return null!==r&&(u=r.U,u instanceof y&&(null===u.layer||u.layer.Qm))?r:null};bt.prototype.isValidFrom=function(n,t){var r,i;if(null===n||null===t)return this.mn;if(this.h.Ya===this&&(null!==n.layer&&!n.layer.Qm||!0!==t.yA))return!1;if(r=t.gF,Infinity>r){if(null!==this.vc&&n===this.Og&&t===this.Pg)return!0;if(i=t.Ud,null===i&&(i=""),n.Qw(i).count>=r)return!1}return!0};bt.prototype.isValidTo=function(n,t){var r,i;if(null===n||null===t)return this.mn;if(this.h.Ya===this&&(null!==n.layer&&!n.layer.Qm||!0!==t.GB))return!1;if(r=t.TG,Infinity>r){if(null!==this.vc&&n===this.Qg&&t===this.Rg)return!0;if(i=t.Ud,null===i&&(i=""),n.Cg(i).count>=r)return!1}return!0};bt.prototype.isInSameNode=function(n,t){if(null===n||null===t)return!1;if(n===t)return!0;var i=n.U,r=t.U;return null!==i&&i===r};bt.prototype.isLinked=function(n,t){var f,u,r,i;if(null===n||null===t||(f=n.U,!(f instanceof y))||(u=n.Ud,null===u&&(u=""),r=t.U,!(r instanceof y)))return!1;for(i=t.Ud,null===i&&(i=""),r=r.Cg(i);r.next();)if(i=r.value,i.ca===f&&i.Af===u)return!0;return!1};bt.prototype.isValidLink=function(n,t,i,r){if(!this.isValidFrom(n,t)||!this.isValidTo(i,r)||!(null===t||null===r||(t.fF&&r.SG||!this.isInSameNode(t,r))&&(t.eF&&r.RG||!this.isLinked(t,r)))||null!==this.vc&&(null!==n&&nft(this,n,this.vc)||null!==i&&nft(this,i,this.vc))||null!==n&&null!==i&&(null===n.data&&null!==i.data||null!==n.data&&null===i.data)||!fat(this,n,i,this.vc))return!1;if(null!==n){var u=n.Np;if(null!==u&&!u(n,t,i,r,this.vc))return!1}return null!==i&&(u=i.Np,null!==u&&!u(n,t,i,r,this.vc))?!1:(u=this.Np,null!==u?u(n,t,i,r,this.vc):!0)};t.g(bt,"linkValidation",bt.prototype.Np);t.defineProperty(bt,{Np:"linkValidation"},function(){return this.Yk},function(n){null!==n&&t.i(n,"function",bt,"linkValidation");this.Yk=n});t.g(bt,"portTargeted",bt.prototype.Wt);t.defineProperty(bt,{Wt:"portTargeted"},function(){return this.wD},function(n){null!==n&&t.i(n,"function",bt,"portTargeted");this.wD=n});t.ka("LinkingTool",ki);t.Qa(ki,bt);ki.Either=ep=t.w(ki,"Either",0);ki.ForwardsOnly=rft=t.w(ki,"ForwardsOnly",0);ki.BackwardsOnly=uft=t.w(ki,"BackwardsOnly",0);t.g(ki,"archetypeLinkData",ki.prototype.iE);t.defineProperty(ki,{iE:"archetypeLinkData"},function(){return this.zy},function(n){null!==n&&t.l(n,Object,ki,"archetypeLinkData");n instanceof f&&t.l(n,c,ki,"archetypeLinkData");this.zy=n});t.g(ki,"archetypeLabelNodeData",ki.prototype.bA);t.defineProperty(ki,{bA:"archetypeLabelNodeData"},function(){return this.yy},function(n){null!==n&&t.l(n,Object,ki,"archetypeLabelNodeData");n instanceof f&&t.l(n,y,ki,"archetypeLabelNodeData");this.yy=n});t.g(ki,"direction",ki.prototype.direction);t.defineProperty(ki,{direction:"direction"},function(){return this.ua},function(n){t.Fa(n,ki,ki,"direction");this.ua=n});t.g(ki,"startObject",ki.prototype.BB);t.defineProperty(ki,{BB:"startObject"},function(){return this.GD},function(n){null!==n&&t.l(n,f,ki,"startObject");this.GD=n});t.A(ki,{Lx:"startPort"},function(){return this.Hz});ki.prototype.canStart=function(){var n,t;return this.isEnabled?(n=this.h,null===n||n.hb||n.ef||!n.Qm)?!1:(t=n.ea,null!==t&&(t instanceof k||t instanceof ci)&&n.T.left&&(n.Ya===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1):!1};ki.prototype.findLinkablePort=function(){var n=this.h,t,i;return null===n?null:(t=this.BB,null===t&&(t=n.de(n.Rc.da,null,null)),null===t||!(t.U instanceof y))?null:(i=this.direction,(i===ep||i===rft)&&(n=this.findValidLinkablePort(t,!1),null!==n))?(this.fe=!0,n):(i===ep||i===uft)&&(n=this.findValidLinkablePort(t,!0),null!==n)?(this.fe=!1,n):null};ki.prototype.doActivate=function(){var n=this.h,t;null!==n&&(null===this.Lx&&(this.Hz=this.findLinkablePort()),null!==this.Lx)&&(this.yc(this.name),n.Qd=!0,n.gc="pointer",this.fe?(this.Pg=this.Lx,t=this.Pg.U,t instanceof y&&(this.Og=t),this.copyPortProperties(this.Og,this.Pg,this.le,this.Nl,!1)):(this.Rg=this.Lx,t=this.Rg.U,t instanceof y&&(this.Qg=t),this.copyPortProperties(this.Qg,this.Rg,this.me,this.Ol,!0)),n.add(this.le),n.add(this.me),null!==this.cg&&(null!==this.le&&(this.cg.ca=this.le),null!==this.me&&(this.cg.fa=this.me),this.cg.hc(),n.add(this.cg)),this.la=!0)};ki.prototype.doDeactivate=function(){this.la=!1;var n=this.h;null!==n&&(n.remove(this.cg),n.remove(this.le),n.remove(this.me),n.Qd=!1,n.gc="",this.vk())};ki.prototype.doStop=function(){bt.prototype.doStop.call(this);this.BB=this.Hz=null};ki.prototype.doMouseUp=function(){var t;if(this.la){if(t=this.h,null===t)return;var n=this.mf=null,u=null,i=null,f=null,r=this.If=this.findTargetPort(this.fe),e=null;null!==r?(e=r.U,e instanceof y&&(this.fe?(null!==this.Og&&(n=this.Og,u=this.Pg),i=e,f=r):(n=e,u=r,null!==this.Qg&&(i=this.Qg,f=this.Rg)))):this.fe?null!==this.Og&&this.mn&&(n=this.Og,u=this.Pg):null!==this.Qg&&this.mn&&(i=this.Qg,f=this.Rg);(null!==n||null!==i)&&(n=this.insertLink(n,u,i,f),null!==n?(null===r&&(this.fe?n.$n=t.T.da.copy():n.Wn=t.T.da.copy()),t.Ve&&t.select(n),this.mf=this.name,t.Ga("LinkDrawn",n)):t.ea.tE())}this.stopTool()};ki.prototype.insertLink=function(n,i,r,u){var o=this.h,f,e;if(null===o||(f=o.ea,null===f))return null;if(f instanceof ci){if(e=n,i=r,o.vd||(e=r,i=n),null!==e&&null!==i)return f.xh(i.data,f.Lb(e.data)),i.tt()}else if(f instanceof k)if(e="",null!==n&&(null===i&&(i=n),e=i.Ud,null===e&&(e="")),i="",null!==r&&(null===u&&(u=r),i=u.Ud,null===i&&(i="")),u=this.iE,u instanceof c){if(ce(u),f=u.copy(),f instanceof c)return f.ca=n,f.Af=e,f.fa=r,f.dg=i,o.add(f),n=this.bA,n instanceof y&&(ce(n),n=n.copy(),n instanceof y&&(n.Dd=f,o.add(n))),f}else if(null!==u&&(u=f.EE(u),t.xb(u)))return null!==n&&f.Hx(u,f.Lb(n.data)),f.vB(u,e),null!==r&&f.Jx(u,f.Lb(r.data)),f.yB(u,i),f.nw(u),n=this.bA,null===n||n instanceof y||(n=f.copyNodeData(n),t.xb(n)&&(f.Om(n),n=f.Lb(n),void 0!==n&&f.fE(u,n))),f=o.Vf(u);return null};t.ka("RelinkingTool",vu);t.Qa(vu,bt);vu.prototype.updateAdornments=function(n){var i,t,r;null!==n&&n instanceof c&&(i="RelinkFrom",t=null,n.ib&&!this.h.hb&&(r=n.An,null!==r&&n.canRelinkFrom()&&n.pa.P()&&n.Wa()&&r.pa.P()&&r.Cl()&&(t=n.np(i),null===t&&(t=this.makeAdornment(r,!1),t.cd=i,n.il(i,t)))),null===t&&n.Hl(i),i="RelinkTo",t=null,n.ib&&!this.h.hb&&(r=n.An,null!==r&&n.canRelinkTo()&&n.pa.P()&&n.Wa()&&r.pa.P()&&r.Cl()&&(t=n.np(i),null===t&&(t=this.makeAdornment(r,!0),t.cd=i,n.il(i,t)))),null===t&&n.Hl(i))};vu.prototype.makeAdornment=function(n,t){var i=new fi,r;return i.type=go,r=t?this.xK:this.eJ,null!==r&&i.add(r.copy()),i.uc=n,i};t.defineProperty(vu,{eJ:"fromHandleArchetype"},function(){return this.GC},function(n){null!==n&&t.l(n,f,vu,"fromHandleArchetype");this.GC=n});t.defineProperty(vu,{xK:"toHandleArchetype"},function(){return this.UD},function(n){null!==n&&t.l(n,f,vu,"toHandleArchetype");this.UD=n});t.A(vu,{handle:"handle"},function(){return this.kc});vu.prototype.canStart=function(){var n,t;return this.isEnabled?(n=this.h,null===n||n.hb||n.ef||!n.gk)?!1:(t=n.ea,null===t||!(t instanceof k||t instanceof ci)||!n.T.left)?!1:(t=this.findToolHandleAt(n.Rc.da,"RelinkFrom"),null===t&&(t=this.findToolHandleAt(n.Rc.da,"RelinkTo")),null!==t):!1};vu.prototype.doActivate=function(){var n=this.h,t,i;if(null!==n){if(null===this.vc){if(t=this.findToolHandleAt(n.Rc.da,"RelinkFrom"),null===t&&(t=this.findToolHandleAt(n.Rc.da,"RelinkTo")),null===t)return;if(i=t.U,!(i instanceof fi&&i.hi instanceof c))return;this.kc=t;this.fe=null===i||"RelinkTo"===i.cd;this.vc=i.hi}this.yc(this.name);n.Qd=!0;n.gc="pointer";this.Pg=this.vc.sd;this.Og=this.vc.ca;this.Rg=this.vc.Vd;this.Qg=this.vc.fa;this.qD.set(this.vc.pa);null!==this.vc&&0<this.vc.ra&&(null===this.vc.ca&&(null!==this.Nl&&(this.Nl.Ea=u.uq),null!==this.le&&(this.le.location=this.vc.o(0))),null===this.vc.fa&&(null!==this.Ol&&(this.Ol.Ea=u.uq),null!==this.me&&(this.me.location=this.vc.o(this.vc.ra-1))));this.copyPortProperties(this.Og,this.Pg,this.le,this.Nl,!1);this.copyPortProperties(this.Qg,this.Rg,this.me,this.Ol,!0);n.add(this.le);n.add(this.me);null!==this.cg&&(null!==this.le&&(this.cg.ca=this.le),null!==this.me&&(this.cg.fa=this.me),this.copyLinkProperties(this.vc,this.cg),this.cg.hc(),n.add(this.cg));this.la=!0}};vu.prototype.copyLinkProperties=function(n,t){if(null!==n&&null!==t){t.Yo=n.Yo;t.Gw=n.Gw;var i=n.Je;(i===oa||i===ys)&&(i=io);t.Je=i;t.kt=n.kt;t.au=n.au;t.En=n.En;t.vb=n.vb;t.rk=n.rk;t.tp=n.tp;t.up=n.up;t.zb=n.zb;t.xk=n.xk;t.kq=n.kq;t.lq=n.lq}};vu.prototype.doDeactivate=function(){this.la=!1;var n=this.h;null!==n&&(n.remove(this.cg),n.remove(this.le),n.remove(this.me),n.Qd=!1,n.gc="",this.vk())};vu.prototype.doStop=function(){bt.prototype.doStop.call(this);this.kc=null};vu.prototype.doMouseUp=function(){var t,i;if(this.la){if(t=this.h,null===t)return;this.mf=null;var r=this.Og,u=this.Pg,f=this.Qg,e=this.Rg,n=this.vc;this.If=this.findTargetPort(this.fe);null!==this.If?(i=this.If.U,i instanceof y&&(this.fe?(f=i,e=this.If):(r=i,u=this.If))):this.mn?this.fe?e=f=null:u=r=null:n=null;null!==n&&(this.reconnectLink(n,this.fe?f:r,this.fe?e:u,this.fe),null===this.If&&(this.fe?n.$n=t.T.da.copy():n.Wn=t.T.da.copy(),n.hc()),t.Ve&&(n.ib=!0),this.mf=this.name,t.Ga("LinkRelinked",n,this.fe?this.Rg:this.Pg));gw(this.vc,this.qD)}this.stopTool()};vu.prototype.reconnectLink=function(n,t,i,r){return null===this.h?!1:(i=null!==i&&null!==i.Ud?i.Ud:"",r?(n.fa=t,n.dg=i):(n.ca=t,n.Af=i),!0)};t.ka("LinkReshapingTool",wi);t.Qa(wi,wt);wi.None=op=t.w(wi,"None",0);wi.Horizontal=hl=t.w(wi,"Horizontal",1);wi.Vertical=cl=t.w(wi,"Vertical",2);wi.All=vd=t.w(wi,"All",3);wi.prototype.updateAdornments=function(n){var i,t;if(null!==n&&n instanceof c){if(n.ib&&!this.h.hb&&(i=n.path,null!==i&&n.canReshape()&&n.pa.P()&&n.Wa()&&i.pa.P()&&i.Cl()&&(t=n.np(this.name),(null===t||t.HH!==n.ra||t.QH!==n.Xp)&&(t=this.makeAdornment(i),t.HH=n.ra,t.QH=n.Xp,n.il(this.name,t)),null!==t))){t.location=n.position;return}n.Hl(this.name)}};wi.prototype.makeAdornment=function(n){var r=n.U,o=r.ra,c=r.pc,s=null,i,t,f,e;if(null!==r.points&&1<o){s=new fi;s.type=go;var o=r.ut,h=r.nx,f=c?1:0;if(r.Xp&&r.Je!==ae)for(i=o+f;i<h-f;i++)t=this.makeResegmentHandle(n,i),null!==t&&(t.Gf=i,t.bu=.5,s.add(t));for(i=o+1;i<h;i++)(t=this.makeHandle(n,i),null!==t)&&(t.Gf=i,i!==o&&(i===o+1&&c?(f=r.o(o),e=r.o(o+1),u.I(f.x,e.x)&&u.I(f.y,e.y)&&(e=r.o(o-1)),u.I(f.x,e.x)?(ov(t,cl),t.cursor="n-resize"):u.I(f.y,e.y)&&(ov(t,hl),t.cursor="w-resize")):i===h-1&&c?(f=r.o(h-1),e=r.o(h),u.I(f.x,e.x)&&u.I(f.y,e.y)&&(f=r.o(h+1)),u.I(f.x,e.x)?(ov(t,cl),t.cursor="n-resize"):u.I(f.y,e.y)&&(ov(t,hl),t.cursor="w-resize")):i!==h&&(ov(t,vd),t.cursor="move")),s.add(t));s.cd=this.name;s.uc=n}return s};wi.prototype.makeHandle=function(){var n=this.wt;return null===n?null:n.copy()};t.defineProperty(wi,{wt:"handleArchetype"},function(){return this.Sk},function(n){null!==n&&t.l(n,f,wi,"handleArchetype");this.Sk=n});wi.prototype.makeResegmentHandle=function(){var n=this.LJ;return null===n?null:n.copy()};t.defineProperty(wi,{LJ:"midHandleArchetype"},function(){return this.bD},function(n){null!==n&&t.l(n,f,wi,"midHandleArchetype");this.bD=n});t.A(wi,{handle:"handle"},function(){return this.kc});t.A(wi,{$s:"adornedLink"},function(){return this.wy});wi.prototype.canStart=function(){if(!this.isEnabled)return!1;var n=this.h;return null!==n&&!n.hb&&n.$o&&n.T.left?null!==this.findToolHandleAt(n.Rc.da,this.name):!1};wi.prototype.doActivate=function(){var t=this.h,n,i,r;null!==t&&(this.kc=this.findToolHandleAt(t.Rc.da,this.name),null!==this.kc)&&(n=this.kc.U.hi,n instanceof c&&(this.wy=n,t.Qd=!0,this.yc(this.name),n.Xp&&.5===this.kc.bu&&(i=n.points.copy(),r=this.kc.wb(si),i.Pd(this.kc.Gf+1,r),n.pc&&i.Pd(this.kc.Gf+1,r),n.points=i,n.Uf(),n.updateAdornments(),this.kc=this.findToolHandleAt(t.Rc.da,this.name)),this.rD=n.o(this.kc.Gf),this.zz=n.points.copy(),this.la=!0))};wi.prototype.doDeactivate=function(){this.vk();this.wy=this.kc=null;var n=this.h;null!==n&&(n.Qd=!1);this.la=!1};wi.prototype.doCancel=function(){var n=this.$s;null!==n&&(n.points=this.zz);this.stopTool()};wi.prototype.doMouseMove=function(){var n=this.h;this.la&&null!==n&&(n=this.computeReshape(n.T.da),this.reshape(n))};wi.prototype.doMouseUp=function(){var c=this.h,n,i,f;if(this.la&&null!==c){if(n=this.computeReshape(c.T.da),this.reshape(n),n=this.$s,null!==n&&n.Xp){var r=this.handle.Gf,e=n.o(r-1),s=n.o(r),o=n.o(r+1);n.pc?r>n.ut+1&&r<n.nx-1&&(i=n.o(r-2),Math.abs(e.x-s.x)<this.Sg&&Math.abs(e.y-s.y)<this.Sg&&(ll(this,i,e,s,o,!0)||ll(this,i,e,s,o,!1))?(f=n.points.copy(),ll(this,i,e,s,o,!0)?(f.Tg(r-2,new h(i.x,(o.y+i.y)/2)),f.Tg(r+1,new h(o.x,(o.y+i.y)/2))):(f.Tg(r-2,new h((o.x+i.x)/2,i.y)),f.Tg(r+1,new h((o.x+i.x)/2,o.y))),f.wd(r),f.wd(r-1),n.points=f,n.Uf(),n.updateAdornments()):(i=n.o(r+2),Math.abs(s.x-o.x)<this.Sg&&Math.abs(s.y-o.y)<this.Sg&&(ll(this,e,s,o,i,!0)||ll(this,e,s,o,i,!1))&&(f=n.points.copy(),ll(this,e,s,o,i,!0)?(f.Tg(r-1,new h(e.x,(e.y+i.y)/2)),f.Tg(r+2,new h(i.x,(e.y+i.y)/2))):(f.Tg(r-1,new h((e.x+i.x)/2,e.y)),f.Tg(r+2,new h((e.x+i.x)/2,i.y))),f.wd(r+1),f.wd(r),n.points=f,n.Uf(),n.updateAdornments()))):(i=t.N(),u.vn(e.x,e.y,o.x,o.y,s.x,s.y,i)&&i.nk(s)<this.Sg*this.Sg&&(f=n.points.copy(),f.wd(r),n.points=f,n.Uf(),n.updateAdornments()),t.B(i))}c.Sc();this.mf=this.name;c.Ga("LinkReshaped",this.$s)}this.stopTool()};t.g(wi,"resegmentingDistance",wi.prototype.Sg);t.defineProperty(wi,{Sg:"resegmentingDistance"},function(){return this.xD},function(n){t.i(n,"number",wi,"resegmentingDistance");this.xD=n});wi.prototype.reshape=function(n){var i=this.$s,f,r;if(i.Kl(),f=this.handle.Gf,r=this.handle&&this.handle.Pv?this.handle.Pv:op,i.pc)if(f===i.ut+1)f=i.ut+1,r===cl?(i.aa(f,i.o(f-1).x,n.y),i.aa(f+1,i.o(f+2).x,n.y)):r===hl&&(i.aa(f,n.x,i.o(f-1).y),i.aa(f+1,n.x,i.o(f+2).y));else if(f===i.nx-1)f=i.nx-1,r===cl?(i.aa(f-1,i.o(f-2).x,n.y),i.aa(f,i.o(f+1).x,n.y)):r===hl&&(i.aa(f-1,n.x,i.o(f-2).y),i.aa(f,n.x,i.o(f+1).y));else{var r=f,e=i.o(r),o=i.o(r-1),s=i.o(r+1);u.I(o.x,e.x)&&u.I(e.y,s.y)?(u.I(o.x,i.o(r-2).x)&&!u.I(o.y,i.o(r-2).y)?(i.C(r,n.x,o.y),f++,r++):i.aa(r-1,n.x,o.y),u.I(s.y,i.o(r+2).y)&&!u.I(s.x,i.o(r+2).x)?i.C(r+1,s.x,n.y):i.aa(r+1,s.x,n.y)):u.I(o.y,e.y)&&u.I(e.x,s.x)?(u.I(o.y,i.o(r-2).y)&&!u.I(o.x,i.o(r-2).x)?(i.C(r,o.x,n.y),f++,r++):i.aa(r-1,o.x,n.y),u.I(s.x,i.o(r+2).x)&&!u.I(s.y,i.o(r+2).y)?i.C(r+1,n.x,s.y):i.aa(r+1,n.x,s.y)):u.I(o.x,e.x)&&u.I(e.x,s.x)?(u.I(o.x,i.o(r-2).x)&&!u.I(o.y,i.o(r-2).y)?(i.C(r,n.x,o.y),f++,r++):i.aa(r-1,n.x,o.y),u.I(s.x,i.o(r+2).x)&&!u.I(s.y,i.o(r+2).y)?i.C(r+1,n.x,s.y):i.aa(r+1,n.x,s.y)):u.I(o.y,e.y)&&u.I(e.y,s.y)&&(u.I(o.y,i.o(r-2).y)&&!u.I(o.x,i.o(r-2).x)?(i.C(r,o.x,n.y),f++,r++):i.aa(r-1,o.x,n.y),u.I(s.y,i.o(r+2).y)&&!u.I(s.x,i.o(r+2).x)?i.C(r+1,s.x,n.y):i.aa(r+1,s.x,n.y));i.aa(f,n.x,n.y)}else i.aa(f,n.x,n.y),1===f&&i.computeSpot(!0).Me()&&(e=i.ca,o=i.sd,null===e||e.Wa()||(e=e.findVisibleNode(),e!==i.ca&&(o=e.tl(""))),r=o.wb(si,t.N()),e=i.getLinkPointFromPoint(e,o,r,n,!0,t.N()),i.aa(0,e.x,e.y),t.B(r),t.B(e)),f===i.ra-2&&i.computeSpot(!1).Me()&&(f=i.fa,e=i.Vd,null===f||f.Wa()||(f=f.findVisibleNode(),f!==i.fa&&(e=f.tl(""))),r=e.wb(si,t.N()),e=i.getLinkPointFromPoint(f,e,r,n,!1,t.N()),i.aa(i.ra-1,e.x,e.y),t.B(r),t.B(e));i.ij()};wi.prototype.computeReshape=function(n){var t=this.$s,i=this.handle.Gf;switch(this.handle&&this.handle.Pv?this.handle.Pv:op){case vd:return n;case cl:return t=t.o(i),new h(t.x,n.y);case hl:return t=t.o(i),new h(n.x,t.y);default:case op:return t.o(i)}};t.g(wi,"originalPoint",wi.prototype.VJ);t.A(wi,{VJ:"originalPoint"},function(){return this.rD});t.g(wi,"originalPoints",wi.prototype.WJ);t.A(wi,{WJ:"originalPoints"},function(){return this.zz});t.ka("ResizingTool",yi);t.Qa(yi,wt);yi.prototype.updateAdornments=function(n){var r,e,u,o,i,f;if(!(null===n||n instanceof c)){if(n.ib&&!this.h.hb&&(i=n.pG,null!==i&&n.canResize()&&n.pa.P()&&n.Wa()&&i.pa.P()&&i.Cl()&&(r=n.np(this.name),null===r&&(r=this.makeAdornment(i)),null!==r))){e=i.ul();r.angle=e;u=i.wb(r.gf,t.N());o=i.sk();r.location=u;t.B(u);u=r.placeholder;null!==u&&(i=i.Ja,f=t.Ml(),f.p(i.width*o,i.height*o),u.Ea=f,t.qk(f));eft(this,r,e);n.il(this.name,r);return}n.Hl(this.name)}};yi.prototype.makeAdornment=function(n){var t=null,t=n.U.nG,i;if(null===t)t=new fi,t.type=wc,t.gf=si,i=new or,i.oi=!0,t.add(i),t.add(this.makeHandle(n,hr)),t.add(this.makeHandle(n,tp)),t.add(this.makeHandle(n,cu)),t.add(this.makeHandle(n,ip)),t.add(this.makeHandle(n,pf)),t.add(this.makeHandle(n,lu)),t.add(this.makeHandle(n,bf)),t.add(this.makeHandle(n,wf));else if(ce(t),t=t.copy(),!(t instanceof fi))return null;return t.cd=this.name,t.uc=n,t};yi.prototype.makeHandle=function(n,t){var i=this.wt;return null===i?null:(i=i.copy(),i.alignment=t,i)};t.defineProperty(yi,{wt:"handleArchetype"},function(){return this.Sk},function(n){null!==n&&t.l(n,f,yi,"handleArchetype");this.Sk=n});t.A(yi,{handle:"handle"},function(){return this.kc});t.defineProperty(yi,{uc:"adornedObject"},function(){return this.ob},function(n){null!==n&&t.l(n,f,yi,"adornedObject");this.ob=n});yi.prototype.canStart=function(){if(!this.isEnabled)return!1;var n=this.h;return null!==n&&!n.hb&&n.ap&&n.T.left?null!==this.findToolHandleAt(n.Rc.da,this.name)?!0:!1:!1};yi.prototype.doActivate=function(){var n=this.h;null!==n&&(this.kc=this.findToolHandleAt(n.Rc.da,this.name),null!==this.kc&&(this.ob=this.kc.U.uc,this.yz.set(this.ob.U.location),this.Kv.set(this.ob.Ea),this.az=this.computeCellSize(),this.cz=this.computeMinSize(),this.bz=this.computeMaxSize(),n.Qd=!0,this.kD=n.mc.isEnabled,n.mc.isEnabled=!1,this.yc(this.name),this.la=!0))};yi.prototype.doDeactivate=function(){var n=this.h;null!==n&&(this.vk(),this.ob=this.kc=null,this.la=n.Qd=!1,n.mc.isEnabled=this.kD)};yi.prototype.doCancel=function(){this.ob.Ea=this.Kv;this.ob.U.location=this.yz;this.stopTool()};yi.prototype.doMouseMove=function(){var i=this.h;if(this.la&&null!==i){var r=this.cz,f=this.bz,e=this.az,u=this.ob.jF(i.T.da,t.N()),n=yr;this.ob instanceof w&&(n=this.ob.Ww,n===be&&(n=this.ob.Ta.Ac));r=this.computeResize(u,this.kc.alignment,r,f,e,!(n===ar||n===vv||i.T.shift));this.resize(r);i.Ig();t.B(u)}};yi.prototype.doMouseUp=function(){var n=this.h;if(this.la&&null!==n){var r=this.cz,f=this.bz,e=this.az,u=this.ob.jF(n.T.da,t.N()),i=yr;this.ob instanceof w&&(i=this.ob.Ww,i===be&&(i=this.ob.Ta.Ac));r=this.computeResize(u,this.kc.alignment,r,f,e,!(i===ar||i===vv||n.T.shift));this.resize(r);t.B(u);n.Sc();this.mf=this.name;n.Ga("PartResized",this.ob,this.Kv)}this.stopTool()};yi.prototype.resize=function(n){if(null!==this.h){var i=this.uc,u=i.U,t=i.ul(),e=i.sk(),r=Math.PI*t/180,o=Math.cos(r),r=Math.sin(r),l=0<t&&180>t?1:0,s=90<t&&270>t?1:0,t=180<t&&360>t?1:0,h=n.width-i.Ja.width,c=n.height-i.Ja.height,f=u.position.copy();f.x+=e*((n.x+h*s)*o-(n.y+c*l)*r);f.y+=e*((n.x+h*t)*r+(n.y+c*s)*o);i.Ea=n.size;u.xf();u.move(f)}};yi.prototype.computeResize=function(n,i,r,f,e,o){var s,h;i.Me()&&(i=si);var a=this.uc.Ja,v=a.x,y=a.y,c=a.x+a.width,l=a.y+a.height,s=1;return o||(s=a.width,h=a.height,0>=s&&(s=1),0>=h&&(h=1),s=h/s),h=t.N(),u.rt(n.x,n.y,v,y,e.width,e.height,h),n=a.copy(),0>=i.x?0>=i.y?(n.x=Math.max(h.x,c-f.width),n.x=Math.min(n.x,c-r.width),n.width=Math.max(c-n.x,r.width),n.y=Math.max(h.y,l-f.height),n.y=Math.min(n.y,l-r.height),n.height=Math.max(l-n.y,r.height),o||(i=n.height/n.width,s<i?(n.height=s*n.width,n.y=l-n.height):(n.width=n.height/s,n.x=c-n.width))):1<=i.y?(n.x=Math.max(h.x,c-f.width),n.x=Math.min(n.x,c-r.width),n.width=Math.max(c-n.x,r.width),n.height=Math.max(Math.min(h.y-y,f.height),r.height),o||(i=n.height/n.width,s<i?n.height=s*n.width:(n.width=n.height/s,n.x=c-n.width))):(n.x=Math.max(h.x,c-f.width),n.x=Math.min(n.x,c-r.width),n.width=c-n.x,o||(n.height=s*n.width,n.y=y+.5*(l-y-n.height))):1<=i.x?0>=i.y?(n.width=Math.max(Math.min(h.x-v,f.width),r.width),n.y=Math.max(h.y,l-f.height),n.y=Math.min(n.y,l-r.height),n.height=Math.max(l-n.y,r.height),o||(i=n.height/n.width,s<i?(n.height=s*n.width,n.y=l-n.height):n.width=n.height/s)):1<=i.y?(n.width=Math.max(Math.min(h.x-v,f.width),r.width),n.height=Math.max(Math.min(h.y-y,f.height),r.height),o||(i=n.height/n.width,s<i?n.height=s*n.width:n.width=n.height/s)):(n.width=Math.max(Math.min(h.x-v,f.width),r.width),o||(n.height=s*n.width,n.y=y+.5*(l-y-n.height))):0>=i.y?(n.y=Math.max(h.y,l-f.height),n.y=Math.min(n.y,l-r.height),n.height=l-n.y,o||(n.width=n.height/s,n.x=v+.5*(c-v-n.width))):1<=i.y&&(n.height=Math.max(Math.min(h.y-y,f.height),r.height),o||(n.width=n.height/s,n.x=v+.5*(c-v-n.width))),t.B(h),n};yi.prototype.computeMinSize=function(){var t=this.uc.Yf.copy(),n=this.Yf;return!isNaN(n.width)&&n.width>t.width&&(t.width=n.width),!isNaN(n.height)&&n.height>t.height&&(t.height=n.height),t};yi.prototype.computeMaxSize=function(){var t=this.uc.Oe.copy(),n=this.Oe;return!isNaN(n.width)&&n.width<t.width&&(t.width=n.width),!isNaN(n.height)&&n.height<t.height&&(t.height=n.height),t};yi.prototype.computeCellSize=function(){var t=new st(NaN,NaN),i=this.uc.U,n;return i&&(n=i.oG,!isNaN(n.width)&&0<n.width&&(t.width=n.width),!isNaN(n.height)&&0<n.height&&(t.height=n.height)),n=this.ml,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height),i=this.h,(isNaN(t.width)||isNaN(t.height))&&i&&(n=i.Cb.Od,null!==n&&n.Dp&&(n=n.CA,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height)),i=i.xp,null!==i&&i.visible&&this.Dp&&(n=i.vt,isNaN(t.width)&&!isNaN(n.width)&&0<n.width&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&0<n.height&&(t.height=n.height))),(isNaN(t.width)||0===t.width||Infinity===t.width)&&(t.width=1),(isNaN(t.height)||0===t.height||Infinity===t.height)&&(t.height=1),t};t.g(yi,"minSize",yi.prototype.Yf);t.defineProperty(yi,{Yf:"minSize"},function(){return this.Tj},function(n){if(t.l(n,st,yi,"minSize"),!this.Tj.O(n)){var i=n.width;isNaN(i)&&(i=0);n=n.height;isNaN(n)&&(n=0);this.Tj.p(i,n)}});t.g(yi,"maxSize",yi.prototype.Oe);t.defineProperty(yi,{Oe:"maxSize"},function(){return this.Sj},function(n){if(t.l(n,st,yi,"maxSize"),!this.Sj.O(n)){var i=n.width;isNaN(i)&&(i=Infinity);n=n.height;isNaN(n)&&(n=Infinity);this.Sj.p(i,n)}});t.g(yi,"cellSize",yi.prototype.ml);t.defineProperty(yi,{ml:"cellSize"},function(){return this.Dj},function(n){t.l(n,st,yi,"cellSize");this.Dj.O(n)||this.Dj.assign(n)});t.g(yi,"isGridSnapEnabled",yi.prototype.Dp);t.defineProperty(yi,{Dp:"isGridSnapEnabled"},function(){return this.jr},function(n){t.i(n,"boolean",yi,"isGridSnapEnabled");this.jr=n});t.g(yi,"originalDesiredSize",yi.prototype.TJ);t.A(yi,{TJ:"originalDesiredSize"},function(){return this.Kv});t.g(yi,"originalLocation",yi.prototype.UJ);t.A(yi,{UJ:"originalLocation"},function(){return this.yz});t.ka("RotatingTool",nr);t.Qa(nr,wt);nr.prototype.updateAdornments=function(n){var i,f,u,o,r;if(!(null===n||n instanceof c)){if(n.ib&&!this.h.hb&&(i=n.tG,null!==i&&n.canRotate()&&n.pa.P()&&n.Wa()&&i.pa.P()&&i.Cl()&&(f=n.np(this.name),null===f&&(f=this.makeAdornment(i)),null!==f))){for(f.angle=i.ul(),u=null,r=null,i===n||i===n.Zb?(u=n.Zb,r=n.gf):(u=i,r=si),o=u.Ja,r=t.qc(o.width*r.x+r.offsetX,o.height*r.y+r.offsetY);null!==u&&u!==i;)u.transform.Xa(r),u=u.ia;var u=r.y,o=Math.max(r.x-i.Ja.width,0),s=t.N();f.location=i.wb(new e(1,0,50+o,u),s);t.B(s);t.B(r);n.il(this.name,f);return}n.Hl(this.name)}};nr.prototype.makeAdornment=function(n){var t=null,t=n.U.sG,i;if(null===t)t=new fi,t.type=ta,t.gf=si,i=this.wt,null!==i&&t.add(i.copy());else if(ce(t),t=t.copy(),!(t instanceof fi))return null;return t.cd=this.name,t.uc=n,t};t.defineProperty(nr,{wt:"handleArchetype"},function(){return this.Sk},function(n){null!==n&&t.l(n,f,nr,"handleArchetype");this.Sk=n});t.A(nr,{handle:"handle"},function(){return this.kc});t.defineProperty(nr,{uc:"adornedObject"},function(){return this.ob},function(n){null!==n&&t.l(n,f,nr,"adornedObject");this.ob=n});nr.prototype.canStart=function(){if(!this.isEnabled)return!1;var n=this.h;return null!==n&&!n.hb&&n.bp&&n.T.left?null!==this.findToolHandleAt(n.Rc.da,this.name)?!0:!1:!1};nr.prototype.doActivate=function(){var n=this.h,t,i;null!==n&&(this.kc=this.findToolHandleAt(n.Rc.da,this.name),null!==this.kc)&&(this.ob=this.kc.U.uc,t=this.ob.U,i=t.Zb,this.yD=this.ob===t||this.ob===i?i.wb(t.gf):this.ob.wb(si),this.Jv=this.ob.angle,n.Qd=!0,n.Kw=!0,this.yc(this.name),this.la=!0)};nr.prototype.doDeactivate=function(){var n=this.h;null!==n&&(this.vk(),this.ob=this.kc=null,this.la=n.Qd=!1)};nr.prototype.doCancel=function(){var n=this.h;n&&(n.Kw=!1);this.rotate(this.Jv);this.stopTool()};nr.prototype.doMouseMove=function(){var n=this.h;this.la&&null!==n&&(n=this.computeRotate(n.T.da),this.rotate(n))};nr.prototype.doMouseUp=function(){var n=this.h,t;this.la&&null!==n&&(n.Kw=!1,t=this.computeRotate(n.T.da),this.rotate(t),n.Sc(),this.mf=this.name,n.Ga("PartRotated",this.ob,this.Jv));this.stopTool()};nr.prototype.rotate=function(n){r&&t.q(n,nr,"rotate:newangle");null!==this.ob&&(this.ob.angle=n)};nr.prototype.computeRotate=function(n){var t,i;return n=this.yD.mj(n),t=this.ob.ia,t&&(n-=t.ul(),360<=n?n-=360:0>n&&(n+=360)),t=Math.min(Math.abs(this.MG),180),i=Math.min(Math.abs(this.LG),t/2),!this.h.T.shift&&0<t&&0<i&&(n%t<i?n=Math.floor(n/t)*t:n%t>t-i&&(n=(Math.floor(n/t)+1)*t)),360<=n?n-=360:0>n&&(n+=360),n};t.g(nr,"snapAngleMultiple",nr.prototype.MG);t.defineProperty(nr,{MG:"snapAngleMultiple"},function(){return this.DD},function(n){t.i(n,"number",nr,"snapAngleMultiple");this.DD=n});t.g(nr,"snapAngleEpsilon",nr.prototype.LG);t.defineProperty(nr,{LG:"snapAngleEpsilon"},function(){return this.CD},function(n){t.i(n,"number",nr,"snapAngleEpsilon");this.CD=n});t.g(nr,"originalAngle",nr.prototype.SJ);t.A(nr,{SJ:"originalAngle"},function(){return this.Jv});t.ka("ClickSelectingTool",al);t.Qa(al,wt);al.prototype.canStart=function(){return!this.isEnabled||null===this.h||this.isBeyondDragSize()?!1:!0};al.prototype.doMouseUp=function(){this.la&&(this.standardMouseSelect(),this.standardMouseClick());this.stopTool()};t.ka("ActionTool",hs);t.Qa(hs,wt);hs.prototype.canStart=function(){var n,t,i;return this.isEnabled?(n=this.h,null===n)?!1:(t=n.T,i=n.de(t.da,function(n){for(;null!==n.ia&&!n.Bt;)n=n.ia;return n},function(n){return n.Bt}),null!==i?(this.Kn=i,n.Sn=n.de(t.da,null,null),!0):!1):!1};hs.prototype.doMouseDown=function(){if(this.la){var t=this.h.T,n=this.Kn;null!==n&&(t.ke=n,null!==n.Tz&&n.Tz(t,n))}else this.canStart()&&this.doActivate()};hs.prototype.doMouseMove=function(){if(this.la){var t=this.h.T,n=this.Kn;null!==n&&(t.ke=n,null!==n.Uz&&n.Uz(t,n))}};hs.prototype.doMouseUp=function(){if(this.la){var i=this.h,t=i.T,n=this.Kn;if(null===n)return;t.ke=n;null!==n.Vz&&n.Vz(t,n);this.isBeyondDragSize()||cut(n,t,i)}this.stopTool()};hs.prototype.doCancel=function(){var t=this.h,n;if(null!==t){if(t=t.T,n=this.Kn,null===n)return;t.ke=n;null!==n.Sz&&n.Sz(t,n)}this.stopTool()};hs.prototype.doStop=function(){this.Kn=null};t.ka("ClickCreatingTool",te);t.Qa(te,wt);te.prototype.canStart=function(){if(!this.isEnabled||null===this.ct)return!1;var n=this.h;if(null===n||n.hb||n.ef||!n.Pm||!n.T.left||this.isBeyondDragSize())return!1;if(this.BF){if(1===n.T.Ge&&(this.FC=n.T.Wd.copy()),2!==n.T.Ge||this.isBeyondDragSize(this.FC))return!1}else if(1!==n.T.Ge)return!1;return n.Ya!==this&&null!==n.st(n.T.da,!0)?!1:!0};te.prototype.doMouseUp=function(){var n=this.h;this.la&&null!==n&&this.insertPart(n.T.da);this.stopTool()};te.prototype.insertPart=function(n){var u=this.h,i,r;return null===u?null:(i=this.ct,null===i)?null:(this.yc(this.name),r=null,i instanceof s?i.Rd()&&(ce(i),r=i.copy(),r instanceof s&&u.add(r)):null!==i&&(i=u.ea.copyNodeData(i),t.xb(i)&&(u.ea.Om(i),r=u.qh(i))),r instanceof s&&(r.location=n,u.Ve&&u.select(r)),u.Sc(),this.mf=this.name,u.Ga("PartCreated",r),this.vk(),r instanceof s?r:null)};t.g(te,"archetypeNodeData",te.prototype.ct);t.defineProperty(te,{ct:"archetypeNodeData"},function(){return this.Kk},function(n){null!==n&&t.l(n,Object,te,"archetypeNodeData");this.Kk=n});t.g(te,"isDoubleClick",te.prototype.BF);t.defineProperty(te,{BF:"isDoubleClick"},function(){return this.PC},function(n){t.i(n,"boolean",te,"isDoubleClick");this.PC=n});t.ka("ContextMenuTool",er);t.Qa(er,wt);er.prototype.canStart=function(){if(!this.isEnabled)return!1;var n=this.h;return null===n||this.isBeyondDragSize()||!n.T.right?!1:(null===this.ao||n.T.event instanceof MouseEvent)&&null===this.findObjectWithContextMenu()?!1:!0};er.prototype.doStart=function(){var n=this.h;null!==n&&this.eD.set(n.Rc.da)};er.prototype.doStop=function(){this.hideDefaultContextMenu();this.hideContextMenu();this.Tn=null};er.prototype.findObjectWithContextMenu=function(n){var t=this.h;if(null===t)return null;var i=t.T,r=null,r=void 0!==n?n:t.de(i.da,null,function(n){return!n.layer.Dc});if(null!==r){for(n=r;null!==n;){if(i=n.contextMenu,null!==i)return n;n=n.ia}if(null!==this.ao&&!(t.T.event instanceof MouseEvent))return r.U}else if(i=t.contextMenu,null!==i)return t;return null};er.prototype.doActivate=function(){};er.prototype.doMouseDown=function(){var n,t;this.la&&(n=this.h,null!==n&&null!==this.wf&&(t=n.de(n.T.da,null,null),null!==t&&t.rj(this.wf)?(this.standardMouseClick(null,null),this.stopTool()):(this.stopTool(),n.Ya.doMouseDown())))};er.prototype.doMouseUp=function(){this.la||this.canStart()&&oft(this,!0)};er.prototype.doMouseMove=function(){this.la&&this.standardMouseOver()};er.prototype.showContextMenu=function(n,i){var r,u;t.l(n,fi,er,"showContextMenu:contextmenu");null!==i&&t.l(i,f,er,"showContextMenu:obj");r=this.h;null!==r&&(n!==this.wf&&this.hideContextMenu(),n.Ne="Tool",n.uk=!1,n.scale=1/r.scale,n.cd=this.name,r.add(n),null!==i?(r=null,u=i.qp(),null!==u&&(r=u.data),n.uc=i,n.data=r):n.data=r.ea,n.xf(),this.positionContextMenu(n,i),this.wf=n)};er.prototype.positionContextMenu=function(n){var u=this.h;if(null!==u){var t=u.T.da.copy(),r=n.Ha,i=u.Ab;u.T.lx&&(t.x-=r.width);t.x+r.width>i.right&&(t.x-=r.width+5);t.x<i.x&&(t.x=i.x);t.y+r.height>i.bottom&&(t.y-=r.height+5);t.y<i.y&&(t.y=i.y);n.position=t}};er.prototype.hideContextMenu=function(){var n=this.h;null!==n&&null!==this.wf&&(this.wf.data=null,this.wf.uc=null,n.remove(this.wf),this.wf=null,this.standardMouseOver())};er.prototype.initializeDefaultButtons=function(){if(null===this.h)return null;var t=new b,n=this.h.Ye;return t.add({text:"Copy",oh:function(){n.copySelection()},visible:function(){return n.canCopySelection()}}),t.add({text:"Cut",oh:function(){n.cutSelection()},visible:function(){return n.canCutSelection()}}),t.add({text:"Delete",oh:function(){n.deleteSelection()},visible:function(){return n.canDeleteSelection()}}),t.add({text:"Paste",oh:function(t){n.pasteSelection(t.T.da)},visible:function(){return n.canPasteSelection()}}),t.add({text:"Select All",oh:function(){n.selectAll()},visible:function(){return n.canSelectAll()}}),t.add({text:"Undo",oh:function(){n.undo()},visible:function(){return n.canUndo()}}),t.add({text:"Redo",oh:function(){n.redo()},visible:function(){return n.canRedo()}}),t.add({text:"Zoom To Fit",oh:function(){n.zoomToFit()},visible:function(){return n.canZoomToFit()}}),t.add({text:"Reset Zoom",oh:function(){n.resetZoom()},visible:function(){return n.canResetZoom()}}),t.add({text:"Group Selection",oh:function(){n.groupSelection()},visible:function(){return n.canGroupSelection()}}),t.add({text:"Ungroup Selection",oh:function(){n.ungroupSelection()},visible:function(){return n.canUngroupSelection()}}),t.add({text:"Edit Text",oh:function(){n.editTextBlock()},visible:function(){return n.canEditTextBlock()}}),t};er.prototype.showDefaultContextMenu=function(){var e=this.h,o,r,u,n;if(null!==e){for(null===this.Ry&&(this.Ry=this.initializeDefaultButtons()),this.ao!==this.wf&&this.hideContextMenu(),t.it.innerHTML="",t.ht.addEventListener("click",this.VD,!1),o=this,r=document.createElement("ul"),r.className="defaultCXul",t.it.appendChild(r),r.innerHTML="",u=this.Ry.k;u.next();){var f=u.value,s=f.text,i=f.visible;("function"!=typeof i||i())&&(i=document.createElement("li"),i.className="defaultCXli",n=document.createElement("a"),n.className="defaultCXa",n.href="#",n.AH=f.oh,n.addEventListener("click",function(n){return this.AH(e),o.stopTool(),n.preventDefault(),!1},!1),n.textContent=s,i.appendChild(n),r.appendChild(i))}t.it.style.display="block";t.ht.style.display="block";this.wf=this.ao}};er.prototype.hideDefaultContextMenu=function(){null!==this.wf&&this.wf===this.ao&&(t.it.style.display="none",t.ht.style.display="none",t.ht.removeEventListener("click",this.VD,!1),this.wf=null)};t.g(er,"currentContextMenu",er.prototype.wf);t.defineProperty(er,{wf:"currentContextMenu"},function(){return this.nC},function(n){null!==n&&t.l(n,fi,er,"currentContextMenu");this.nC=n});t.g(er,"currentObject",er.prototype.AI);t.defineProperty(er,{AI:"currentObject"},function(){return this.Tn},function(n){null!==n&&t.l(n,f,er,"currentObject");this.Tn=n});t.A(er,{RK:"mouseDownPoint"},function(){return this.eD});t.ka("DragSelectingTool",gr);t.Qa(gr,wt);gr.prototype.canStart=function(){var n,t;return this.isEnabled?(n=this.h,null===n||!n.Ve)?!1:(t=n.T,!t.left||n.Ya!==this&&(!this.isBeyondDragSize()||t.timestamp-n.Rc.timestamp<this.Jw||null!==n.st(t.da,!0))?!1:!0):!1};gr.prototype.doActivate=function(){var n=this.h;null!==n&&(this.la=!0,n.Qd=!0,n.ab=!0,n.add(this.Bg),this.doMouseMove())};gr.prototype.doDeactivate=function(){var n=this.h;null!==n&&(n.remove(this.Bg),n.ab=!1,this.la=n.Qd=!1)};gr.prototype.doMouseMove=function(){if(null!==this.h&&this.la&&null!==this.Bg){var t=this.computeBoxBounds(),n=this.Bg.ue("SHAPE");null===n&&(n=this.Bg.Rw());n.Ea=t.size;this.Bg.position=t.position}};gr.prototype.doMouseUp=function(){if(this.la){var n=this.h;n.remove(this.Bg);try{n.gc="wait";this.selectInRect(this.computeBoxBounds())}finally{n.gc=""}}this.stopTool()};gr.prototype.computeBoxBounds=function(){var n=this.h;return null===n?new p(0,0,0,0):new p(n.Rc.da,n.T.da)};gr.prototype.selectInRect=function(n){var r=this.h,i,u,f;if(null!==r){if(i=r.T,r.Ga("ChangingSelection"),n=r.pk(n,null,function(n){return n instanceof s&&n.canSelect()},this.GF),t.ln?i.Op:i.control)if(i.shift)for(n=n.k;n.next();)i=n.value,i.ib&&(i.ib=!1);else for(n=n.k;n.next();)i=n.value,i.ib=!i.ib;else{if(!i.shift){for(u=new b(s),f=r.selection.k;f.next();)i=f.value,n.contains(i)||u.add(i);for(u=u.k;u.next();)i=u.value,i.ib=!1}for(n=n.k;n.next();)i=n.value,i.ib||(i.ib=!0)}r.Ga("ChangedSelection")}};t.g(gr,"delay",gr.prototype.Jw);t.defineProperty(gr,{Jw:"delay"},function(){return this.bo},function(n){t.i(n,"number",gr,"delay");this.bo=n});t.g(gr,"isPartialInclusion",gr.prototype.GF);t.defineProperty(gr,{GF:"isPartialInclusion"},function(){return this.UC},function(n){t.i(n,"boolean",gr,"isPartialInclusion");this.UC=n});t.g(gr,"box",gr.prototype.Bg);t.defineProperty(gr,{Bg:"box"},function(){return this.Vl},function(n){null!==n&&t.l(n,s,gr,"box");this.Vl=n});t.ka("PanningTool",pu);t.Qa(pu,wt);pu.prototype.canStart=function(){if(!this.isEnabled)return!1;var n=this.h;return null===n||!n.tf&&!n.uf||!n.T.left||n.Ya!==this&&!this.isBeyondDragSize()?!1:!0};pu.prototype.doActivate=function(){var n=this.h;null!==n&&(this.Cj?(n.T.bubbles=!0,document.addEventListener("scroll",this.JD,!1)):(n.gc="move",n.Qd=!0,this.Az=n.position.copy()),this.la=!0)};pu.prototype.doDeactivate=function(){var n=this.h;null!==n&&(n.gc="",this.la=n.Qd=!1)};pu.prototype.doCancel=function(){var n=this.h;null!==n&&(n.position=this.Az,n.Qd=!1);this.stopTool()};pu.prototype.doMouseMove=function(){this.move()};pu.prototype.doMouseUp=function(){this.move();this.stopTool()};pu.prototype.move=function(){var n=this.h;if(this.la&&n)if(this.Cj)n.T.bubbles=!0;else{var t=n.position,i=n.Rc.da,r=n.T.da,u=t.x+i.x-r.x,i=t.y+i.y-r.y;n.tf||(u=t.x);n.uf||(i=t.y);n.position=new h(u,i)}};t.g(pu,"bubbles",pu.prototype.bubbles);t.defineProperty(pu,{bubbles:"bubbles"},function(){return this.Cj},function(n){t.i(n,"boolean",pu,"bubbles");this.Cj=n});t.g(pu,"originalPosition",pu.prototype.XJ);t.A(pu,{XJ:"originalPosition"},function(){return this.Az});t.ka("TextEditingTool",li);t.Qa(li,wt);li.LostFocus=sft=t.w(li,"LostFocus",0);li.MouseDown=yd=t.w(li,"MouseDown",1);li.Tab=pd=t.w(li,"Tab",2);li.Enter=sp=t.w(li,"Enter",3);li.SingleClick=t.w(li,"SingleClick",0);li.SingleClickSelected=wd=t.w(li,"SingleClickSelected",1);var hft=t.w(li,"StateNone",0),hp=t.w(li,"StateActive",1),sv=t.w(li,"StateEditing",2),bd=t.w(li,"StateEditing2",3),cft=t.w(li,"StateValidating",4),kd=t.w(li,"StateValidated",5);t.g(li,"textBlock",li.prototype.Ug);t.defineProperty(li,{Ug:"textBlock"},function(){return this.Nz},function(n){null!==n&&t.l(n,ot,li,"textBlock");this.Nz=n});t.g(li,"currentTextEditor",li.prototype.ph);t.defineProperty(li,{ph:"currentTextEditor"},function(){return this.qC},function(n){this.qC=n});t.g(li,"defaultTextEditor",li.prototype.ME);t.defineProperty(li,{ME:"defaultTextEditor"},function(){return this.vC},function(n){this.vC=n});t.g(li,"starting",li.prototype.NG);t.defineProperty(li,{NG:"starting"},function(){return this.HD},function(n){t.Fa(n,li,li,"starting");this.HD=n});li.prototype.canStart=function(){if(!this.isEnabled)return!1;var n=this.h;return null===n||n.hb||!n.T.left||this.isBeyondDragSize()?!1:(n=n.de(n.T.da,null,function(n){return n instanceof ot}),!(n instanceof ot&&n.Mw&&n.U.canEdit()))?!1:(n=n.U,null===n||this.NG===wd&&!n.ib?!1:!0)};li.prototype.doStart=function(){this.la||null===this.Ug||this.doActivate()};li.prototype.doActivate=function(){var i,t,n,f,h,r;if(!this.la&&(i=this.h,null!==i&&(t=this.Ug,null===t&&(t=i.de(i.T.da,function(n){return n instanceof ot?n:null}),t=t instanceof ot?t:null),null!==t&&(this.Ug=t,null!==t.U)))){if(this.la=!0,this.cb=hp,n=this.ME,f=!1,null!==t.EB&&(n=t.EB),null===n||n.aC||(f=!0),this.ND=this.Ug.copy(),n.aC){var r=t.wb(si),s=i.position,e=i.scale,o=t.sk()*e,u=t.Ja.width*o;gv(t);h=(r.x-s.x)*e;r=(r.y-s.y)*e;n.value=t.text;i.nj.style.font=t.font;n.style.font="inherit";n.style.fontSize=100*o+"%";n.style.lineHeight="normal";u=20+u;n.style.width=u+"px";n.style.height="";n.rows=t.NF;i.nj.appendChild(n);n.style.left=(h-u/2|0)+"px";n.style.top=(r-n.clientHeight/2|0)+"px";n.style.textAlign=t.textAlign}else i.nj.appendChild(n);n.style.position="absolute";n.style.zIndex=100;n.className="start";n.textEditingTool=this;n.wK=o;f&&void 0!==n.onActivate&&n.onActivate();this.ph=n;n.focus();n.select()}};li.prototype.doCancel=function(){null!==this.bl&&(this.ph.style.border=this.bl,this.bl=null);this.stopTool()};li.prototype.doMouseUp=function(){!this.la&&this.canStart()&&this.doActivate()};li.prototype.doMouseDown=function(){this.la&&this.acceptText(yd)};li.prototype.acceptText=function(n){switch(n){case yd:this.cb===kd||this.cb===bd?this.ph.focus():(this.cb===hp||this.cb===sv)&&(this.cb=cft,lft(this));break;case sft:case sp:case pd:if(sp===n&&!0===this.Nz.kx)break;(this.cb===hp||this.cb===sv)&&(this.cb=cft,lft(this))}};li.prototype.doDeactivate=function(){var t=this.h,n;null!==t&&(this.cb=hft,this.Ug=null,null!==this.ph&&(n=this.ph,void 0!==n.onDeactivate&&n.onDeactivate(),null!==n&&t.nj.removeChild(n)),this.la=!1)};li.prototype.isValidText=function(n,i,r){t.l(n,ot,li,"isValidText:textblock");var u=this.lu;return null!==u&&!u(n,i,r)?!1:(u=n.lu,null===u||u(n,i,r)?!0:!1)};t.g(li,"textValidation",li.prototype.lu);t.defineProperty(li,{lu:"textValidation"},function(){return this.fl},function(n){null!==n&&t.i(n,"function",li,"textValidation");this.fl=n});t.ka("ToolManager",lt);t.Qa(lt,wt);lt.WheelScroll=vl=t.w(lt,"WheelScroll",0);lt.WheelZoom=yl=t.w(lt,"WheelZoom",1);lt.WheelNone=t.w(lt,"WheelNone",2);t.g(lt,"mouseWheelBehavior",lt.prototype.un);t.defineProperty(lt,{un:"mouseWheelBehavior"},function(){return this.iD},function(n){t.Fa(n,lt,lt,"mouseWheelBehavior");this.iD=n});lt.prototype.initializeStandardTools=function(){this.dE=new hs;this.jB=new vu;this.QF=new wi;this.rG=new yi;this.vG=new nr;this.QA=new ki;this.Od=new ct;this.RE=new gr;this.gG=new pu;this.Dw=new er;this.Ox=new li;this.uE=new te;this.vE=new al};lt.prototype.doMouseDown=function(){var i=this.h,r,u,n;if(null!==i){for(r=i.ma,r.fA&&0!==r.Qe&&t.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero"),r=this.jf.length,u=0;u<r;u++)if(n=this.jf.wa(u),null===n.h&&n.Ed(this.h),n.canStart()){i.Ya=n;i.Ya===n&&(n.la||n.doActivate(),n.doMouseDown());return}1===i.T.button&&(this.un===vl?this.un=yl:this.un===yl&&(this.un=vl));this.doActivate();this.standardWaitAfter(this.EA)}};lt.prototype.doMouseMove=function(){var i=this.h,r,t,n;if(null!==i){if(this.la)for(r=this.Kg.length,t=0;t<r;t++)if(n=this.Kg.wa(t),null===n.h&&n.Ed(this.h),n.canStart()){i.Ya=n;i.Ya===n&&(n.la||n.doActivate(),n.doMouseMove());return}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.la?this.EA:this.sF)}};lt.prototype.doCurrentObjectChanged=function(n,t){var i=this.ql;null===i||null!==t&&(t===i||t.rj(i))||this.hideToolTip()};lt.prototype.doWaitAfter=function(){this.h&&this.h.Za&&(this.doMouseHover(),this.la||this.doToolTip())};lt.prototype.doMouseHover=function(){var n=this.h,t,i;if(null!==n)if(t=n.T,null===t.ke&&(t.ke=n.de(t.da,null,null)),i=t.ke,null!==i)for(;null!==i;){if(n=this.la?i.Nt:i.Ot,null!==n&&(n(t,i),t.Ke))break;i=i.ia}else n=this.la?n.Nt:n.Ot,null!==n&&n(t)};lt.prototype.doToolTip=function(){var t=this.h,n;if(null!==t)if(n=t.T,null===n.ke&&(n.ke=t.de(n.da,null,null)),n=n.ke,null!==n){if(n!==this.ql&&!n.rj(this.ql)){for(;null!==n;){if(t=n.mu,null!==t){this.showToolTip(t,n);return}n=n.ia}this.hideToolTip()}}else t=t.mu,null!==t?this.showToolTip(t,null):this.hideToolTip()};lt.prototype.showToolTip=function(n,i){var r,u;t.l(n,fi,lt,"showToolTip:tooltip");null!==i&&t.l(i,f,lt,"showToolTip:obj");r=this.h;null!==r&&(n!==this.ql&&this.hideToolTip(),n.Ne="Tool",n.uk=!1,n.scale=1/r.scale,r.add(n),null!==i&&i!==this.Pu?(r=null,u=i.qp(),null!==u&&(r=u.data),n.uc=i,n.data=r):null===i&&(n.data=r.ea),(null===i||i!==this.Pu)&&(n.xf(),this.positionToolTip(n,i)),this.Py=n,this.Pu=i)};lt.prototype.positionToolTip=function(n){var u=this.h;if(null!==u){var t=u.T.da.copy(),r=n.Ha,i=u.Ab;u.T.lx&&(t.x-=r.width);t.x+r.width>i.right&&(t.x-=r.width+5);t.x<i.x&&(t.x=i.x);t.y=t.y+20+r.height>i.bottom?t.y-(r.height+5):t.y+20;t.y<i.y&&(t.y=i.y);n.position=t}};lt.prototype.hideToolTip=function(){if(null!==this.ql){var n=this.h;null!==n&&(this.ql.data=null,this.ql.uc=null,n.remove(this.ql),this.Pu=this.Py=null)}};t.A(lt,{ql:"currentToolTip"},function(){return this.Py});lt.prototype.doMouseUp=function(){var t,r,i,n;if(this.cancelWaitAfter(),this.la){if(t=this.h,null===t)return;for(r=this.Lg.length,i=0;i<r;i++)if(n=this.Lg.wa(i),null===n.h&&n.Ed(this.h),n.canStart()){t.Ya=n;t.Ya===n&&(n.la||n.doActivate(),n.doMouseUp());return}}this.doDeactivate()};lt.prototype.doMouseWheel=function(){this.standardMouseWheel()};lt.prototype.doKeyDown=function(){var n=this.h;null!==n&&n.Ye.doKeyDown()};lt.prototype.doKeyUp=function(){var n=this.h;null!==n&&n.Ye.doKeyUp()};lt.prototype.doCancel=function(){null!==lr&&lr.doCancel();wt.prototype.doCancel.call(this)};lt.prototype.findTool=function(n){var u,i,r;for(t.i(n,"string",lt,"findTool:name"),u=this.jf.length,i=0;i<u;i++)if(r=this.jf.wa(i),r.name===n)return r;for(u=this.Kg.length,i=0;i<u;i++)if(r=this.Kg.wa(i),r.name===n)return r;for(u=this.Lg.length,i=0;i<u;i++)if(r=this.Lg.wa(i),r.name===n)return r;return null};lt.prototype.replaceTool=function(n,i){var f,r,u;for(t.i(n,"string",lt,"replaceTool:name"),null!==i&&(t.l(i,wt,lt,"replaceTool:newtool"),i.h&&i.h!==this.h&&t.m("Cannot share tools between Diagrams: "+i.toString()),i.Ed(this.h)),f=this.jf.length,r=0;r<f;r++)if(u=this.jf.wa(r),u.name===n)return null!==i?this.jf.Tg(r,i):this.jf.wd(r),u;for(f=this.Kg.length,r=0;r<f;r++)if(u=this.Kg.wa(r),u.name===n)return null!==i?this.Kg.Tg(r,i):this.Kg.wd(r),u;for(f=this.Lg.length,r=0;r<f;r++)if(u=this.Lg.wa(r),u.name===n)return null!==i?this.Lg.Tg(r,i):this.Lg.wd(r),u;return null};t.A(lt,{jf:"mouseDownTools"},function(){return this.fD});t.A(lt,{Kg:"mouseMoveTools"},function(){return this.gD});t.A(lt,{Lg:"mouseUpTools"},function(){return this.hD});t.g(lt,"hoverDelay",lt.prototype.sF);t.defineProperty(lt,{sF:"hoverDelay"},function(){return this.JC},function(n){t.i(n,"number",lt,"hoverDelay");this.JC=n});t.g(lt,"holdDelay",lt.prototype.EA);t.defineProperty(lt,{EA:"holdDelay"},function(){return this.IC},function(n){t.i(n,"number",lt,"holdDelay");this.IC=n});t.g(lt,"dragSize",lt.prototype.SE);t.defineProperty(lt,{SE:"dragSize"},function(){return this.xC},function(n){t.l(n,st,lt,"dragSize");this.xC=n.ba()});t.g(lt,"actionTool",lt.prototype.dE);t.defineProperty(lt,{dE:"actionTool"},function(){return this.findTool("Action")},function(n){no(this,"Action",n,this.jf)});t.g(lt,"relinkingTool",lt.prototype.jB);t.defineProperty(lt,{jB:"relinkingTool"},function(){return this.findTool("Relinking")},function(n){no(this,"Relinking",n,this.jf)});t.g(lt,"linkReshapingTool",lt.prototype.QF);t.defineProperty(lt,{QF:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(n){no(this,"LinkReshaping",n,this.jf)});t.g(lt,"resizingTool",lt.prototype.rG);t.defineProperty(lt,{rG:"resizingTool"},function(){return this.findTool("Resizing")},function(n){no(this,"Resizing",n,this.jf)});t.g(lt,"rotatingTool",lt.prototype.vG);t.defineProperty(lt,{vG:"rotatingTool"},function(){return this.findTool("Rotating")},function(n){no(this,"Rotating",n,this.jf)});t.g(lt,"linkingTool",lt.prototype.QA);t.defineProperty(lt,{QA:"linkingTool"},function(){return this.findTool("Linking")},function(n){no(this,"Linking",n,this.Kg)});t.g(lt,"draggingTool",lt.prototype.Od);t.defineProperty(lt,{Od:"draggingTool"},function(){return this.findTool("Dragging")},function(n){no(this,"Dragging",n,this.Kg)});t.g(lt,"dragSelectingTool",lt.prototype.RE);t.defineProperty(lt,{RE:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(n){no(this,"DragSelecting",n,this.Kg)});t.g(lt,"panningTool",lt.prototype.gG);t.defineProperty(lt,{gG:"panningTool"},function(){return this.findTool("Panning")},function(n){no(this,"Panning",n,this.Kg)});t.g(lt,"contextMenuTool",lt.prototype.Dw);t.defineProperty(lt,{Dw:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(n){no(this,"ContextMenu",n,this.Lg)});t.g(lt,"textEditingTool",lt.prototype.Ox);t.defineProperty(lt,{Ox:"textEditingTool"},function(){return this.findTool("TextEditing")},function(n){no(this,"TextEditing",n,this.Lg)});t.g(lt,"clickCreatingTool",lt.prototype.uE);t.defineProperty(lt,{uE:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(n){no(this,"ClickCreating",n,this.Lg)});t.g(lt,"clickSelectingTool",lt.prototype.vE);t.defineProperty(lt,{vE:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(n){no(this,"ClickSelecting",n,this.Lg)});ff.prototype.prepareAnimation=ff.prototype.Gl=function(){this.Re&&(this.Kj&&this.iq(),this.zd=!0,this.dC=!1)};dd={opacity:function(n,t,i,r,u,f){n.opacity=r(u,t,i-t,f)},position:function(n,t,i,r,u,f){u!==f?n.GG(r(u,t.x,i.x-t.x,f),r(u,t.y,i.y-t.y,f)):n.position=new h(r(u,t.x,i.x-t.x,f),r(u,t.y,i.y-t.y,f))},scale:function(n,t,i,r,u,f){n.scale=r(u,t,i-t,f)},visible:function(n,t,i,r,u,f){n.visible=u!==f?t:i}};ff.prototype.stopAnimation=ff.prototype.iq=function(){!0===this.zd&&(this.zd=!1,this.dC&&this.W.ie());this.Kj&&this.Re&&(ap(this),gd(this,this.W,this.BH,this.oC,this.Ny,this.Ny,null!==this.cm&&null!==this.bm),vp(this),aft(this))};t.g(ff,"isEnabled",ff.prototype.isEnabled);t.defineProperty(ff,{isEnabled:"isEnabled"},function(){return this.Re},function(n){t.i(n,"boolean",ff,"isEnabled");this.Re=n});t.g(ff,"duration",ff.prototype.duration);t.defineProperty(ff,{duration:"duration"},function(){return this.Yy},function(n){t.i(n,"number",ff,"duration");1>n&&t.ha(n,">= 1",ff,"duration");this.Yy=n});t.A(ff,{Eg:"isAnimating"},function(){return this.Kj});t.A(ff,{KK:"isTicking"},function(){return this.qr});t.ka("Layer",et);et.prototype.Ed=function(n){this.W=n};et.prototype.toString=function(n){var o,e;if(void 0===n&&(n=0),o='Layer "'+this.name+'"',0>=n)return o;for(var f=0,r=0,u=0,s=0,h=0,i=this.mb.k;i.next();)e=i.value,e instanceof g?u++:e instanceof y?r++:e instanceof c?s++:e instanceof fi?h++:f++;if(i="",0<f&&(i+=f+" Parts "),0<r&&(i+=r+" Nodes "),0<u&&(i+=u+" Groups "),0<s&&(i+=s+" Links "),0<h&&(i+=h+" Adornments "),1<n)for(f=this.mb.k;f.next();)r=f.value,i+="\n    "+r.toString(n-1),(u=r.data)&&t.ud(u)&&(i+=" #"+t.ud(u)),r instanceof y?i+=" "+ne(u):r instanceof c&&(i+=" "+ne(r.ca)+" "+ne(r.fa));return o+" "+this.mb.count+": "+i};et.prototype.findObjectAt=et.prototype.de=function(n,i,u){var o,s,e,h,f;if(void 0===i&&(i=null),void 0===u&&(u=null),!1===this.dl)return null;for(r&&!n.P()&&t.m("findObjectAt: Point must have a real value."),o=this.mb,s=!1,this.h.Ab.La(n)&&(s=!0),e=t.N(),h=o.length;h--;)if(f=o.wa(h),(!0!==s||!1!==ns(f))&&f.Wa()&&(e.assign(n),uu(e,f.se),f=f.de(e,i,u),null!==f&&(null!==i&&(f=i(f)),f&&(null===u||u(f)))))return t.B(e),f;return t.B(e),null};et.prototype.findObjectsAt=et.prototype.op=function(n,i,u,e){var h,c,s,l,o;if(void 0===i&&(i=null),void 0===u&&(u=null),e instanceof b||e instanceof it||(e=new it(f)),!1===this.dl)return e;for(r&&!n.P()&&t.m("findObjectsAt: Point must have a real value."),h=this.mb,c=!1,this.h.Ab.La(n)&&(c=!0),s=t.N(),l=h.length;l--;)o=h.wa(l),(!0!==c||!1!==ns(o))&&o.Wa()&&(s.assign(n),uu(s,o.se),o.op(s,i,u,e)&&(null!==i&&(o=i(o)),o&&(null===u||u(o))&&e.add(o)));return t.B(s),e};et.prototype.findObjectsIn=et.prototype.pk=function(n,i,u,e,o){var c,l,h,s;if(void 0===i&&(i=null),void 0===u&&(u=null),void 0===e&&(e=!1),o instanceof b||o instanceof it||(o=new it(f)),!1===this.dl)return o;for(r&&!n.P()&&t.m("findObjectsIn: Rect must have a real value."),h=this.mb,c=!1,this.h.Ab.kk(n)&&(c=!0),l=h.length,h=h.n;l--;)s=h[l],(!0!==c||!1!==ns(s))&&s.Wa()&&s.pk(n,i,u,e,o)&&(null!==i&&(s=i(s)),s&&(null===u||u(s))&&o.add(s));return o};et.prototype.tA=function(n,t,i,r,u,f,e){var o;if(!1===this.dl)return u;for(var s=this.mb,h=s.length,s=s.n;h--;)o=s[h],(!0!==e||!1!==ns(o))&&f(o)&&o.Wa()&&o.pk(n,t,i,r,u)&&(null!==t&&(o=t(o)),o&&(null===i||i(o))&&u.add(o));return u};et.prototype.findObjectsNear=et.prototype.fn=function(n,i,u,e,o,s){var a,v,h;if(void 0===u&&(u=null),void 0===e&&(e=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof b||o instanceof it)&&(s=o),o=!0),s instanceof b||s instanceof it||(s=new it(f)),!1===this.dl)return s;r&&!n.P()&&t.m("findObjectsNear: Point must have a real value.");a=this.mb;v=!1;this.h.Ab.La(n)&&(v=!0);for(var c=t.N(),l=t.N(),y=a.length;y--;)h=a.n[y],(!0!==v||!1!==ns(h))&&h.Wa()&&(c.assign(n),uu(c,h.se),l.p(n.x+i,n.y),uu(l,h.se),h.fn(c,l,u,e,o,s)&&(null!==u&&(h=u(h)),h&&(null===e||e(h))&&s.add(h)));return t.B(c),t.B(l),s};ft=et.prototype;ft.bg=function(n,t){var f,e,o,r,i,u;if(this.visible)for(f=this.mb,e=t?t:n.Ab,o=f.length,r=0;r<o;r++)if(i=f.n[r],i.$C=r,!(i instanceof c&&!1===i.xg||i instanceof fi&&null!==i.hi))if(art(i.pa,e))for(i.bg(!0),bst(i),i=i.pw;i.next();)u=i.value,bi(u,Infinity,Infinity),u.Pc(),u.bg(!0);else i.bg(!1),null!==i.pw&&0<i.pw.count&&bst(i)};ft.$e=function(n,t,i,r){var u,e;if(this.visible&&(void 0===r&&(r=!0),r||!this.Dc)){1!==this.Qf&&(n.globalAlpha=this.Qf);i=this.mb;r=this.Lv;r.length=0;for(var o=t.scale,s=i.length,f=0;f<s;f++)if(u=i.n[f],ns(u)){if(u instanceof c&&(u.pc&&r.push(u),!1===u.xg))continue;e=u.pa;1<e.width*o||1<e.height*o?u.$e(n,t):ny(u,n)}n.globalAlpha=1}};ft.j=function(n,t,i,r,u){var f=this.h;null!==f&&f.ed(di,n,this,t,i,r,u)};ft.zp=function(n,t,i){var r=this.mb;if(t.Co=this,n>=r.count)n=r.count;else if(r.wa(n)===t)return-1;return r.Pd(n,t),t.zt(i),r=this.h,null!==r&&(i?r.na():r.zp(t)),t instanceof g&&this.Kx(t),n};ft.cf=function(n,t,i){var r=this.mb;if(0>n||n>=r.length){if(n=r.indexOf(t),0>n)return-1}else if(r.wa(n)!==t&&(n=r.indexOf(t),0>n))return-1;return t.At(i),r.wd(n),r=this.h,null!==r&&(i?r.na():r.cf(t)),t.Co=null,n};ft.Kx=function(n){for(var i,e;null!==n;){if(n.layer===this&&(i=n,i.Vc.next())){for(var f=-1,t=-1,r=this.mb.n,o=r.length,u=0;u<o;u++){if(e=r[u],e===i&&(f=u,0<=t))break;if(0>t&&e.fb===i&&(t=u,0<=f))break}!(0>t)&&t<f&&(r=this.mb,r.wd(f),r.Pd(t,i))}n=n.fb}};ft.clear=function(){for(var t=this.mb.Pe(),i=t.length,n=0;n<i;n++)t[n].bg(!1),this.cf(-1,t[n],!1)};t.A(et,{vj:"parts"},function(){return this.mb.k});t.A(et,{XK:"partsBackwards"},function(){return this.mb.nn});t.A(et,{h:"diagram"},function(){return this.W});t.g(et,"name",et.prototype.name);t.defineProperty(et,{name:"name"},function(){return this.ec},function(n){var r,i;if(t.i(n,"string",et,"name"),r=this.ec,r!==n){if(i=this.h,null!==i)for(""===r&&t.m("Cannot rename default Layer to: "+n),i=i.pn;i.next();)i.value.name===n&&t.m("Layer.name is already present in this diagram: "+n);for(this.ec=n,this.j("name",r,n),n=this.mb.k;n.next();)n.value.Ne=this.ec}});t.g(et,"opacity",et.prototype.opacity);t.defineProperty(et,{opacity:"opacity"},function(){return this.Qf},function(n){var i=this.Qf;i!==n&&(t.i(n,"number",et,"opacity"),(0>n||1<n)&&t.ha(n,"0 <= val <= 1",et,"opacity"),this.Qf=n,this.j("opacity",i,n),n=this.h,null!==n&&n.na())});t.g(et,"isTemporary",et.prototype.Dc);t.defineProperty(et,{Dc:"isTemporary"},function(){return this.oz},function(n){var i=this.oz;i!==n&&(t.i(n,"boolean",et,"isTemporary"),this.oz=n,this.j("isTemporary",i,n))});t.g(et,"visible",et.prototype.visible);t.defineProperty(et,{visible:"visible"},function(){return this.Rz},function(n){var i=this.Rz;if(i!==n){for(t.i(n,"boolean",et,"visible"),this.Rz=n,this.j("visible",i,n),i=this.mb.k;i.next();)i.value.sh(n);n=this.h;null!==n&&n.na()}});t.g(et,"pickable",et.prototype.kf);t.defineProperty(et,{kf:"pickable"},function(){return this.dl},function(n){var i=this.dl;i!==n&&(t.i(n,"boolean",et,"pickable"),this.dl=n,this.j("pickable",i,n))});t.g(et,"isBoundsIncluded",et.prototype.HA);t.defineProperty(et,{HA:"isBoundsIncluded"},function(){return this.lz},function(n){this.lz!==n&&(this.lz=n,null!==this.h&&this.h.Sc())});t.g(et,"allowCopy",et.prototype.dj);t.defineProperty(et,{dj:"allowCopy"},function(){return this.yk},function(n){var i=this.yk;i!==n&&(t.i(n,"boolean",et,"allowCopy"),this.yk=n,this.j("allowCopy",i,n))});t.g(et,"allowDelete",et.prototype.ll);t.defineProperty(et,{ll:"allowDelete"},function(){return this.zk},function(n){var i=this.zk;i!==n&&(t.i(n,"boolean",et,"allowDelete"),this.zk=n,this.j("allowDelete",i,n))});t.g(et,"allowTextEdit",et.prototype.cp);t.defineProperty(et,{cp:"allowTextEdit"},function(){return this.Ik},function(n){var i=this.Ik;i!==n&&(t.i(n,"boolean",et,"allowTextEdit"),this.Ik=n,this.j("allowTextEdit",i,n))});t.g(et,"allowGroup",et.prototype.Zo);t.defineProperty(et,{Zo:"allowGroup"},function(){return this.Ak},function(n){var i=this.Ak;i!==n&&(t.i(n,"boolean",et,"allowGroup"),this.Ak=n,this.j("allowGroup",i,n))});t.g(et,"allowUngroup",et.prototype.dp);t.defineProperty(et,{dp:"allowUngroup"},function(){return this.Jk},function(n){var i=this.Jk;i!==n&&(t.i(n,"boolean",et,"allowUngroup"),this.Jk=n,this.j("allowUngroup",i,n))});t.g(et,"allowLink",et.prototype.Qm);t.defineProperty(et,{Qm:"allowLink"},function(){return this.Bk},function(n){var i=this.Bk;i!==n&&(t.i(n,"boolean",et,"allowLink"),this.Bk=n,this.j("allowLink",i,n))});t.g(et,"allowRelink",et.prototype.gk);t.defineProperty(et,{gk:"allowRelink"},function(){return this.Dk},function(n){var i=this.Dk;i!==n&&(t.i(n,"boolean",et,"allowRelink"),this.Dk=n,this.j("allowRelink",i,n))});t.g(et,"allowMove",et.prototype.fk);t.defineProperty(et,{fk:"allowMove"},function(){return this.Ck},function(n){var i=this.Ck;i!==n&&(t.i(n,"boolean",et,"allowMove"),this.Ck=n,this.j("allowMove",i,n))});t.g(et,"allowReshape",et.prototype.$o);t.defineProperty(et,{$o:"allowReshape"},function(){return this.Ek},function(n){var i=this.Ek;i!==n&&(t.i(n,"boolean",et,"allowReshape"),this.Ek=n,this.j("allowReshape",i,n))});t.g(et,"allowResize",et.prototype.ap);t.defineProperty(et,{ap:"allowResize"},function(){return this.Fk},function(n){var i=this.Fk;i!==n&&(t.i(n,"boolean",et,"allowResize"),this.Fk=n,this.j("allowResize",i,n))});t.g(et,"allowRotate",et.prototype.bp);t.defineProperty(et,{bp:"allowRotate"},function(){return this.Gk},function(n){var i=this.Gk;i!==n&&(t.i(n,"boolean",et,"allowRotate"),this.Gk=n,this.j("allowRotate",i,n))});t.g(et,"allowSelect",et.prototype.Ve);t.defineProperty(et,{Ve:"allowSelect"},function(){return this.Hk},function(n){var i=this.Hk;i!==n&&(t.i(n,"boolean",et,"allowSelect"),this.Hk=n,this.j("allowSelect",i,n))});t.ka("Diagram",i);i.prototype.toString=function(n){var t,i;if(void 0===n&&(n=0),t="",this.id&&(t=this.id),this.nj&&this.nj.id&&(t=this.nj.id),t='Diagram "'+t+'"',0>=n)return t;for(i=this.Wb.k;i.next();)t+="\n  "+i.value.toString(n-1);return t};i.prototype.checkProperties=function(){return t.rI(this)};i.fromDiv=function(n){var t=n;return"string"==typeof n&&(t=document.getElementById(n)),t instanceof HTMLDivElement&&t.W instanceof i?t.W:null};t.g(i,"div",i.prototype.nj);t.defineProperty(i,{nj:"div"},function(){return this.Rb},function(r){var u;if(null!==r&&t.l(r,HTMLDivElement,i,"div"),this.Rb!==r){if(t.oA=[],u=this.Rb,null!==u){if(u.W=void 0,u.innerHTML="",null!==this.Za&&(this.Za.W=null,this.Za.removeEventListener("touchstart",this.WG,!1),this.Za.removeEventListener("touchmove",this.VG,!1),this.Za.removeEventListener("touchend",this.UG,!1)),u=this.hw,null!==u){for(var e=u.fD.n,o=e.length,f=0;f<o;f++)e[f].cancelWaitAfter();for(e=u.gD.n,o=e.length,f=0;f<o;f++)e[f].cancelWaitAfter();for(e=u.hD.n,o=e.length,f=0;f<o;f++)e[f].cancelWaitAfter()}u.cancelWaitAfter();this.of=this.Za=null;n.removeEventListener("resize",this.oH,!1);n.removeEventListener("mousemove",this.Qp,!0);n.removeEventListener("mousedown",this.Pp,!0);n.removeEventListener("mouseup",this.Sp,!0);n.removeEventListener("mousewheel",this.th,!0);n.removeEventListener("DOMMouseScroll",this.th,!0);n.removeEventListener("mouseout",this.Rp,!0);null!==this.Go&&(this.Go=this.Go.target=null)}else this.rf=!1;this.Rb=null;null!==r&&((u=r.W)&&(u.nj=null),tg(this,r),this.Yt())}});ng.prototype.Ql=function(n){return n.of.setTransform(n.sg,0,0,n.sg,0,0),null===this.Kh&&kft(this,!0),0<this.Kh&&this!==this.LH?!0:!1};ng.prototype.t=function(){this.LH=null};i.prototype.computePixelRatio=function(){var t=this.of;return Math.round((n.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1))};i.prototype.doMouseMove=function(){this.Ya.doMouseMove()};i.prototype.doMouseDown=function(){this.Ya.doMouseDown()};i.prototype.doMouseUp=function(){this.Ya.doMouseUp()};i.prototype.doMouseWheel=function(){this.Ya.doMouseWheel()};i.prototype.doKeyDown=function(){this.Ya.doKeyDown()};i.prototype.doKeyUp=function(){this.Ya.doKeyUp()};i.prototype.focus=i.prototype.focus=function(){this.Za&&this.Za.focus()};i.prototype.lD=function(){var n,u;if(this.W.isEnabled){if(n=this.W,n.Dz&&null!==n.Za){n.Sv=!0;var i=n.Lc,r=n.Ab,v=i.width,y=r.width,p=i.height,w=r.height,o=i.right,s=r.right,c=i.bottom,l=r.bottom,f=i.x,a=r.x,i=i.y,r=r.y,e=n.scale;y<v||w<p?(u=t.N(),this.zD&&n.tf?(u.p(this.scrollLeft/e+f,n.position.y),n.position=u):this.AD&&n.uf&&(u.p(n.position.x,this.scrollTop/e+i),n.position=u),t.B(u),n.Sv=!1,n.Jj=!1):(u=t.N(),this.zD&&n.tf&&(f<a&&(n.position=new h(this.scrollLeft+f,n.position.y)),o>s&&(n.position=new h(-(n.Zj.scrollWidth-n.Jb)+this.scrollLeft-n.Jb/e+n.Lc.right,n.position.y))),this.AD&&n.uf&&(i<r&&(n.position=new h(n.position.x,this.scrollTop+i)),c>l&&(n.position=new h(n.position.x,-(n.$j.scrollHeight-n.Ib)+this.scrollTop-n.Ib/e+n.Lc.bottom))),t.B(u),uh(n),n.Sv=!1,n.Jj=!1,i=n.Lc,r=n.Ab,o=i.right,s=r.right,c=i.bottom,l=r.bottom,f=i.x,a=r.x,i=i.y,r=r.y,y>=v&&f>=a&&o<=s&&(n.Ez.style.width="1px"),w>=p&&i>=r&&c<=l&&(n.Fz.style.height="1px"))}}else nc(this.W)};i.prototype.mD=function(){this.W.isEnabled?this.W.Dz=!0:nc(this.W)};i.prototype.computeBounds=i.prototype.vf=function(){return 0<this.lg.count&&wu(this),tet(this)};i.prototype.computePartsBounds=function(n){var t=null,i;for(n=n.k;n.next();)i=n.value,i instanceof c||(i.xf(),null===t?t=i.pa.copy():t.yj(i.pa));return null===t?new p(NaN,NaN,0,0):t};i.prototype.zoomToFit=i.prototype.zoomToFit=function(){this.scale=yp(this,pl)};i.prototype.zoomToRect=function(n,t){var i,r,u;if(void 0===t&&(t=pl),i=n.width,r=n.height,!(0===i||0===r||isNaN(i)&&isNaN(r))){if(u=1,t===pl||t===dp)if(isNaN(i))u=this.Ab.height*this.scale/r;else if(isNaN(r))u=this.Ab.width*this.scale/i;else var u=this.Jb,f=this.Ib,u=t===dp?f/r>u/i?(f-(this.em?this.sf:0))/r:(u-(this.fm?this.sf:0))/i:Math.min(f/r,u/i);this.scale=u;this.position=new h(n.x,n.y)}};i.prototype.alignDocument=function(n,t){this.Ji&&vc(this,this.vf());var i=this.Lc,r=this.Ab,u=this.cc;this.cc=!0;this.position=new h(i.x+(n.x*i.width+n.offsetX)-(t.x*r.width-t.offsetX),i.y+(n.y*i.height+n.offsetY)-(t.y*r.height-t.offsetY));this.cc=u;this.na()};i.prototype.findPartAt=i.prototype.st=function(n,t){var i=t?pp(this,n,function(n){return n.U},function(n){return n.canSelect()}):pp(this,n,function(n){return n.U});return i instanceof s?i:null};i.prototype.findObjectAt=i.prototype.de=function(n,t,i){var u,r;for(void 0===t&&(t=null),void 0===i&&(i=null),u=this.Wb.nn,wu(this);u.next();)if(r=u.value,r.visible&&(r=r.de(n,t,i),null!==r))return r;return null};i.prototype.findObjectsAt=i.prototype.op=function(n,t,i,r){var u,e;for(void 0===t&&(t=null),void 0===i&&(i=null),r instanceof b||r instanceof it||(r=new it(f)),wu(this),u=this.Wb.nn;u.next();)e=u.value,e.visible&&e.op(n,t,i,r);return r};i.prototype.findObjectsIn=i.prototype.pk=function(n,t,i,r,u){var e,o;for(void 0===t&&(t=null),void 0===i&&(i=null),void 0===r&&(r=!1),u instanceof b||u instanceof it||(u=new it(f)),wu(this),e=this.Wb.nn;e.next();)o=e.value,o.visible&&o.pk(n,t,i,r,u);return u};i.prototype.tA=function(n,t,i,r,u,e){var h=new it(f),o,s;for(wu(this),o=this.Wb.nn;o.next();)s=o.value,s.visible&&s.tA(n,t,i,r,h,u,e);return h};i.prototype.findObjectsNear=i.prototype.fn=function(n,t,i,r,u,e){var o,s;for(void 0===i&&(i=null),void 0===r&&(r=null),void 0===u&&(u=!0),!1!==u&&!0!==u&&((u instanceof b||u instanceof it)&&(e=u),u=!0),e instanceof b||e instanceof it||(e=new it(f)),wu(this),o=this.Wb.nn;o.next();)s=o.value,s.visible&&s.fn(n,t,i,r,u,e);return e};i.prototype.acceptEvent=function(n){var t=this.Md;return this.Md=this.dc,this.dc=t,lc(this,this,n,t,n instanceof MouseEvent),t};i.prototype.DJ=function(n){if(this.W.isEnabled){var t=this.W.dc;lc(this.W,this.W,n,t,!1);t.key=String.fromCharCode(n.which);t.ok=!0;switch(n.which){case 33:t.key="PageUp";break;case 34:t.key="PageDown";break;case 35:t.key="End";break;case 36:t.key="Home";break;case 37:t.key="Left";break;case 38:t.key="Up";break;case 39:t.key="Right";break;case 40:t.key="Down";break;case 45:t.key="Insert";break;case 46:t.key="Del";break;case 48:t.key="0";break;case 187:case 61:case 107:t.key="Add";break;case 189:case 173:case 109:t.key="Subtract";break;case 27:t.key="Esc"}return this.W.doKeyDown(),187!==n.which&&189!==n.which&&48!==n.which&&107!==n.which&&109!==n.which&&61!==n.which&&173!==n.which||!0!==n.ctrlKey?gh(this.W,t,n):(n.cancelBubble=!0,n.preventDefault(),n.stopPropagation(),!1)}};i.prototype.EJ=function(n){if(this.W.isEnabled){var t=this.W.dc;lc(this.W,this.W,n,t,!1);t.key=String.fromCharCode(n.which);t.zj=!0;switch(n.which){case 33:t.key="PageUp";break;case 34:t.key="PageDown";break;case 35:t.key="End";break;case 36:t.key="Home";break;case 37:t.key="Left";break;case 38:t.key="Up";break;case 39:t.key="Right";break;case 40:t.key="Down";break;case 45:t.key="Insert";break;case 46:t.key="Del"}return this.W.doKeyUp(),gh(this.W,t,n)}};i.prototype.dm=function(n){var t=this.Za;if(null===t)return new h(0,0);var i=this.Jb,r=this.Ib,t=t.getBoundingClientRect(),i=n.clientX-i/t.width*t.left;return n=n.clientY-r/t.height*t.top,null!==this.Oc?(n=new h(i,n),uu(n,this.Oc),n):new h(i,n)};i.prototype.invalidateDocumentBounds=i.prototype.Sc=function(){this.Ji||(this.Ji=!0,this.ie())};i.prototype.redraw=i.prototype.Yt=function(){this.cc||this.Jd||(this.na(),ac(this),uh(this),this.Sc(),this.Ig())};i.prototype.isUpdateRequested=function(){return this.Sf};i.prototype.delayInitialization=function(n){var t=this.mc,i=t.isEnabled;t.isEnabled=!1;bp(this);this.rf=!1;t.isEnabled=i;n&&setTimeout(n,1)};i.prototype.requestUpdate=i.prototype.ie=function(n){if(void 0===n&&(n=!1),!0!==this.Sf&&!(this.cc||!1===n&&this.Jd)){this.Sf=!0;var t=this;requestAnimationFrame(function(){t.Sf&&t.Ig()})}};i.prototype.maybeUpdate=i.prototype.Ig=function(){(!this.jo||this.Sf)&&(this.jo&&(this.jo=!1),bp(this))};i.prototype.bg=function(n,t,i,r){var u=this.yi;if(this.Vk||u.Eg)for(u=0;u<t;u++)n[u].bg(i,r)};i.prototype.$e=function(n,i){var l,h,f;if(null===this.Rb&&t.m("No div specified"),l=this.Za,null===l&&t.m("No canvas specified"),this.yi.zd)0===this.ma.Qe&&this.ie(!0);else{n||(n=this.of);var p=n!==this.of,v=this.Wb.n,u=v.length,a=this;if(this.bg(v,u,a),p)ef(this,n),uh(this);else if(!this.Be&&void 0===i)return;var s=this.Pa,u=this.fc,o=Math.round(s.x*u)/u,y=Math.round(s.y*u)/u,e=this.Oc;if(e.reset(),1!==u&&e.scale(u),0===s.x&&0===s.y||e.translate(-o,-y),h=this.Hj,s=null!==h&&0<h.length&&!0===this.Cz){for(y=t.gx,n.save(),n.beginPath(),u=h.length,o=0;o<u;o++)f=h[o],(0!==f[2]||0!==f[3])&&(f=oet(this,f),n.rect(Math.floor(f[0])-1,Math.floor(f[1])-1,Math.ceil(f[2])+2,Math.ceil(f[3])+2),y&&n.clearRect(Math.floor(f[0])-1,Math.floor(f[1])-1,Math.ceil(f[2])+2,Math.ceil(f[3])+2));n.clip()}for(u=this.sg,t.kn?(l.width=l.width,s=!1,ef(this,n),n.scale(u,u)):(n.setTransform(1,0,0,1,0,0),n.scale(u,u),n.clearRect(0,0,this.Jb,this.Ib)),n.miterLimit=9,n.setTransform(1,0,0,1,0,0),n.scale(u,u),n.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),r&&r.gj&&r.WE(this,n),l=i?function(t){var u=n,f,r,o;if(t.visible){u.globalAlpha=t.Qf;f=t.mb;t=t.Lv;t.length=0;for(var s=a.scale,h=f.length,e=0;e<h;e++)if(r=f.n[e],ns(r)&&!i.contains(r)){if(r instanceof c&&(r.pc&&t.push(r),!1===r.xg))continue;o=r.pa;1<o.width*s||1<o.height*s?r.$e(u,a):ny(r,u)}u.globalAlpha=1}}:s?function(t){pft(t,n,a,h)}:function(t){t.$e(n,a)},rg(this,n),u=v.length,o=0;o<u;o++)l(v[o]);this.Hj=[];this.Tk?this.Tk.Ql(this)&&this.vy():this.dm=function(){};s&&(n.restore(),ef(this,n),r&&r.YI&&r.XI(h,n,this));r&&(r.rA||r.gj)&&r.qA(n,this,e);p?(ef(this),uh(this)):this.Be=this.Vk=!1}};i.prototype.getRenderingHint=function(n){return this.el[n]};i.prototype.setRenderingHint=i.prototype.lK=function(n,t){this.el[n]=t;this.Yt()};i.prototype.resetRenderingHints=i.prototype.mG=function(){this.el={drawShadows:!0}};i.prototype.na=function(n,t){if(this.Cz&&void 0!==n&&null!==this.Hj){var i=this.Ab;(n&&i.Xf(n)||t&&i.Xf(t))&&(null!==this.Hj&&(n&&n.P()&&ug(this,n.x-2,n.y-2,n.width+4,n.height+4),t&&t.P()&&ug(this,t.x-2,t.y-2,t.width+4,t.height+4)),this.Be=!0,this.ie())}else this.Hj=null,this.Be=!0,this.ie();for(i=this.xm.k;i.next();)i.value.na(n,t)};t.g(i,"viewportOptimizations",i.prototype.zK);t.defineProperty(i,{zK:null},function(){return this.Qz},function(n){t.i(n,"boolean",i,"viewportOptimizations");this.Hj=null;this.Qz=n});i.prototype.add=i.prototype.add=function(n){var u,r;t.l(n,s,i,"add:part");r=n.h;r!==this&&(null!==r&&t.m("Cannot add part "+n.toString()+" to "+this.toString()+". It is already a part of "+r.toString()),this.Ln&&(n.Xk="Tool"),u=n.Ne,r=this.sl(u),null===r&&(r=this.sl("")),null===r&&t.m('Cannot add a Part when unable find a Layer named "'+u+'" and there is no default Layer'),n.layer!==r&&(u=r.zp(99999999,n,n.h===this),0<=u&&this.ed(vr,"parts",r,null,n,null,u),r.Dc||this.Sc(),n.M(ra),u=n.Gp,null!==u&&u(n,null,r)))};i.prototype.zp=function(n){var t,i;n instanceof y?(this.Gv.add(n),n instanceof g)&&(t=n.fb,null===t?this.gl.add(n):t.um.add(n),t=n.ic,null!==t&&(t.h=this)):n instanceof c?this.pv.add(n):n instanceof fi||this.mb.add(n);n.Nb&&n.ja();(t=n.data)&&(n instanceof fi||(n instanceof c?this.Nk.add(t,n):this.Ei.add(t,n)),i=this,kv(n,function(n){eg(i,n)}));!0!==he(n)&&!0!==gc(n)||this.lg.add(n);gst(n,!0,this);iht(n)?(n.pa.P()&&this.na(sh(n,n.pa)),this.Sc()):n.Wa()&&n.pa.P()&&this.na(sh(n,n.pa));this.ie()};i.prototype.cf=function(n){var t,i;n.Uf();n instanceof y?(this.Gv.remove(n),n instanceof g)&&(t=n.fb,null===t?this.gl.remove(n):t.um.remove(n),t=n.ic,null!==t&&(t.h=null)):n instanceof c?this.pv.remove(n):n instanceof fi||this.mb.remove(n);(t=n.data)&&(n instanceof fi||(n instanceof c?this.Nk.remove(t):this.Ei.remove(t)),i=this,kv(n,function(n){og(i,n)}));this.lg.remove(n);iht(n)?(n.pa.P()&&this.na(sh(n,n.pa)),this.Sc()):n.Wa()&&n.pa.P()&&this.na(sh(n,n.pa));this.ie()};i.prototype.remove=i.prototype.remove=function(n){var r,u;t.l(n,s,i,"remove:part");n.ib=!1;n.Fg=!1;r=n.layer;null!==r&&r.h===this&&(n.M(ua),n.cn(),u=r.cf(-1,n,!1),0<=u&&this.ed(kr,"parts",r,n,null,u,null),u=n.Gp,null!==u&&u(n,r,null))};i.prototype.removeParts=i.prototype.mB=function(n,t){var i,r;for(n===this.selection&&(i=new it,i.Ue(n),n=i),i=n.k;i.next();)r=i.value,r.h===this&&(t&&!r.canDelete()||this.remove(r))};i.prototype.copyParts=i.prototype.Zm=function(n,t,i){return this.Ye.Zm(n,t,i)};i.prototype.moveParts=i.prototype.moveParts=function(n,r,u){var f,e;if(t.l(r,h,i,"moveParts:offset"),f=this.Cb,null!==f){if(f=f.Od,null===f&&(f=new ct,f.h=this),e=new gt(s,Object),n)n=n.k;else{for(n=this.vj;n.next();)kh(f,e,n.value,u);for(n=this.vh;n.next();)kh(f,e,n.value,u);n=this.links}for(;n.next();)kh(f,e,n.value,u);f.moveParts(e,r,u)}};i.prototype.addLayer=i.prototype.Ys=function(n){fg(this,n,null);n.Ed(this);var i=this.Wb,t=i.count-1;if(!n.Dc)for(;0<=t&&i.wa(t).Dc;)t--;i.Pd(t+1,n);null!==this.pe&&this.ed(vr,"layers",this,null,n,null,t+1);this.na();this.Sc()};i.prototype.addLayerBefore=i.prototype.UH=function(n,t){var i,u,f,r;for(fg(this,n,t),n.Ed(this),i=this.Wb,u=i.indexOf(n),0<=u&&(i.remove(n),null!==this.pe&&this.ed(kr,"layers",this,n,null,u,null)),f=i.count,r=0;r<f;r++)if(i.wa(r)===t){i.Pd(r,n);break}null!==this.pe&&this.ed(vr,"layers",this,null,n,null,r);this.na();0>u&&this.Sc()};i.prototype.addLayerAfter=function(n,t){var i,u,f,r;for(fg(this,n,t),n.Ed(this),i=this.Wb,u=i.indexOf(n),0<=u&&(i.remove(n),null!==this.pe&&this.ed(kr,"layers",this,n,null,u,null)),f=i.count,r=0;r<f;r++)if(i.wa(r)===t){i.Pd(r+1,n);break}null!==this.pe&&this.ed(vr,"layers",this,null,n,null,r+1);this.na();0>u&&this.Sc()};i.prototype.removeLayer=function(n){var r,e,u,f;if(t.l(n,et,i,"removeLayer:layer"),n.h!==this&&t.m("Cannot remove a Layer from another Diagram: "+n+" of "+n.h),""!==n.name&&(r=this.Wb,e=r.indexOf(n),r.remove(n))){for(r=n.mb.copy().k;r.next();)u=r.value,f=u.Ne,u.Ne=f!==n.name?f:"";null!==this.pe&&this.ed(kr,"layers",this,n,null,e,null);this.na();this.Sc()}};i.prototype.findLayer=i.prototype.sl=function(n){for(var i,t=this.pn;t.next();)if(i=t.value,i.name===n)return i;return null};i.prototype.addChangedListener=i.prototype.Wz=function(n){t.i(n,"function",i,"addChangedListener:listener");null===this.Ej&&(this.Ej=new b("function"));this.Ej.add(n)};i.prototype.removeChangedListener=i.prototype.kB=function(n){t.i(n,"function",i,"removeChangedListener:listener");null!==this.Ej&&(this.Ej.remove(n),0===this.Ej.count&&(this.Ej=null))};i.prototype.vw=function(n){var t,i,u,r;if(this.ab||this.ma.oF(n),n.Bd!==ro&&(this.rh=!0),null!==this.Ej)if(t=this.Ej,i=t.length,1===i)t=t.wa(0),t(n);else if(0!==i)for(u=t.Pe(),r=0;r<i;r++)t=u[r],t(n)};i.prototype.raiseChangedEvent=i.prototype.ed=function(n,t,i,r,u,f,e){void 0===f&&(f=null);void 0===e&&(e=null);var o=new ii;o.h=this;o.Bd=n;o.propertyName=t;o.object=i;o.oldValue=r;o.ag=f;o.newValue=u;o.Zf=e;this.vw(o)};i.prototype.raiseChanged=i.prototype.j=function(n,t,i,r,u){this.ed(di,n,this,t,i,r,u)};t.A(i,{mc:"animationManager"},function(){return this.yi});t.A(i,{ma:"undoManager"},function(){return this.pe.ma});t.g(i,"skipsUndoManager",i.prototype.ab);t.defineProperty(i,{ab:"skipsUndoManager"},function(){return this.Xi},function(n){t.i(n,"boolean",i,"skipsUndoManager");this.Xi=n;this.pe.Xi=n});t.g(i,"delaysLayout",i.prototype.Kw);t.defineProperty(i,{Kw:"delaysLayout"},function(){return this.Ty},function(n){this.Ty=n});i.prototype.changeState=function(n,r){var u,h;if(null!==n&&n.h===this)if(u=n.Bd,u===di){var u=n.object,e=n.propertyName,o=n.Da(r);t.Va(u,e,o);u instanceof f&&(u=u.U,null!==u&&u.Uf());this.rh=!0}else u===vr?(o=n.object,e=n.Zf,u=n.newValue,o instanceof a?"number"==typeof e&&u instanceof f&&(h=o,r?h.cf(e):h.Pd(e,u),u=o.U,null!==u&&u.Uf()):o instanceof et?(h=!0===n.ag,"number"==typeof e&&u instanceof s&&(r?(u.Uf(),h?o.cf(e,u,h):this.remove(u)):o.zp(e,u,h))):o instanceof i?"number"==typeof e&&u instanceof et&&(r?this.Wb.wd(e):(u.Ed(this),this.Wb.Pd(e,u))):t.m("unknown ChangedEvent.Insert object: "+n.toString()),this.rh=!0):u===kr?(o=n.object,e=n.ag,u=n.oldValue,o instanceof a?"number"==typeof e&&u instanceof f&&(h=o,r?h.Pd(e,u):h.cf(e)):o instanceof et?(h=!0===n.Zf,"number"==typeof e&&u instanceof s&&(r?o.zp(e,u,h):(u.Uf(),h?o.cf(e,u,h):this.remove(u)))):o instanceof i?"number"==typeof e&&u instanceof et&&(r?(u.Ed(this),this.Wb.Pd(e,u)):this.Wb.wd(e)):t.m("unknown ChangedEvent.Remove object: "+n.toString()),this.rh=!0):u!==ro&&t.m("unknown ChangedEvent: "+n.toString())};i.prototype.startTransaction=i.prototype.yc=function(n){return this.ma.yc(n)};i.prototype.commitTransaction=i.prototype.Ie=function(n){return this.ma.Ie(n)};i.prototype.rollbackTransaction=i.prototype.$p=function(){return this.ma.$p()};i.prototype.updateAllTargetBindings=function(n){void 0===n&&(n="");for(var t=this.vj;t.next();)t.value.Vb(n);for(t=this.vh;t.next();)t.value.Vb(n);for(t=this.links;t.next();)t.value.Vb(n)};i.prototype.updateAllModelDataReferences=function(){for(var n=this.vj;n.next();)n.value.updateModelDataReferences();for(n=this.vh;n.next();)n.value.updateModelDataReferences();for(n=this.links;n.next();)n.value.updateModelDataReferences()};i.prototype.Ut=function(n,t,i){ac(this);uh(this);var r=this.ic;null===r||!r.Gt||i||n.width===t.width&&n.height===t.height||r.M();this.cc||cs(this);ls(this);r=this.Ya;!0===this.uo&&r instanceof lt&&(this.T.da=this.$G(this.T.Wd),r.doMouseMove());eet(this,n,t);this.Ga("ViewportBoundsChanged",i?{}:null,n)};i.prototype.clearSelection=i.prototype.xw=function(){var n=0<this.selection.count;n&&this.Ga("ChangingSelection");cv(this);n&&this.Ga("ChangedSelection")};i.prototype.select=i.prototype.select=function(n){null!==n&&n.layer.h===this&&(t.l(n,s,i,"select:part"),!n.ib||1<this.selection.count)&&(this.Ga("ChangingSelection"),cv(this),n.ib=!0,this.Ga("ChangedSelection"))};i.prototype.selectCollection=i.prototype.zG=function(n){var u,r,i;if(this.Ga("ChangingSelection"),cv(this),t.isArray(n))for(u=t.ub(n),r=0;r<u;r++)i=t.rb(n,r),i instanceof s||t.m("Diagram.selectCollection given something that is not a Part: "+i),i.ib=!0;else for(n=n.k;n.next();)i=n.value,i instanceof s||t.m("Diagram.selectCollection given something that is not a Part: "+i),i.ib=!0;this.Ga("ChangedSelection")};i.prototype.clearHighlighteds=i.prototype.sE=function(){var n=this.Zw;if(0<n.count){for(var i=n.Pe(),r=i.length,t=0;t<r;t++)i[t].Fg=!1;n.Ra();n.clear();n.freeze()}};i.prototype.highlight=function(n){null!==n&&n.layer.h===this&&(t.l(n,s,i,"highlight:part"),!n.Fg||1<this.Zw.count)&&(this.sE(),n.Fg=!0)};i.prototype.highlightCollection=function(n){var u,r,i;if(this.sE(),t.isArray(n))for(u=t.ub(n),r=0;r<u;r++)i=t.rb(n,r),i instanceof s||t.m("Diagram.highlightCollection given something that is not a Part: "+i),i.Fg=!0;else for(n=n.k;n.next();)i=n.value,i instanceof s||t.m("Diagram.highlightCollection given something that is not a Part: "+i),i.Fg=!0};i.prototype.scroll=function(n,i,r){void 0===r&&(r=1);var f="up"===i||"down"===i,u;"pixel"===n?u=r:"line"===n?u=r*(f?this.dq:this.cq):"page"===n?(n=f?this.Ab.height:this.Ab.width,n*=this.scale,0!==n&&(u=Math.max(n-(f?this.dq:this.cq),0),u*=r)):t.m("scrolling unit must be 'pixel', 'line', or 'page', not: "+n);u/=this.scale;r=this.position.copy();"up"===i?r.y=this.position.y-u:"down"===i?r.y=this.position.y+u:"left"===i?r.x=this.position.x-u:"right"===i?r.x=this.position.x+u:t.m("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+i);this.position=r};i.prototype.scrollToRect=function(n){var t=this.Ab;t.kk(n)||(n=n.eA,n.x-=t.width/2,n.y-=t.height/2,this.position=n)};i.prototype.centerRect=function(n){var t=this.Ab;n=n.eA;n.x-=t.width/2;n.y-=t.height/2;this.position=n};i.prototype.transformDocToView=i.prototype.JB=function(n){var i=this.Oc,t;return i.reset(),1!==this.fc&&i.scale(this.fc),t=this.Pa,(0!==t.x||0!==t.y)&&isFinite(t.x)&&isFinite(t.y)&&i.translate(-t.x,-t.y),n.copy().transform(this.Oc)};i.prototype.transformViewToDoc=i.prototype.$G=function(n){var i=this.Oc,t;return i.reset(),1!==this.fc&&i.scale(this.fc),t=this.Pa,(0!==t.x||0!==t.y)&&isFinite(t.x)&&isFinite(t.y)&&i.translate(-t.x,-t.y),uu(n.copy(),this.Oc)};i.None=we=t.w(i,"None",0);i.Uniform=pl=t.w(i,"Uniform",1);i.UniformToFill=dp=t.w(i,"UniformToFill",2);i.CycleAll=gp=t.w(i,"CycleAll",10);i.CycleNotDirected=set=t.w(i,"CycleNotDirected",11);i.CycleNotDirectedFast=het=t.w(i,"CycleNotDirectedFast",12);i.CycleNotUndirected=cet=t.w(i,"CycleNotUndirected",13);i.CycleDestinationTree=aet=t.w(i,"CycleDestinationTree",14);i.CycleSourceTree=vet=t.w(i,"CycleSourceTree",15);t.g(i,"validCycle",i.prototype.fH);t.defineProperty(i,{fH:"validCycle"},function(){return this.jw},function(n){var r=this.jw;r!==n&&(t.Fa(n,i,i,"validCycle"),this.jw=n,this.j("validCycle",r,n))});t.g(i,"linkSpacing",i.prototype.Lp);t.defineProperty(i,{Lp:"linkSpacing"},function(){return this.Mj},function(n){var r=this.Mj;r!==n&&(t.q(n,i,"linkSpacing"),0>n&&t.ha(n,">= zero",i,"linkSpacing"),this.Mj=n,this.j("linkSpacing",r,n))});t.A(i,{pn:"layers"},function(){return this.Wb.k});t.g(i,"isModelReadOnly",i.prototype.ef);t.defineProperty(i,{ef:"isModelReadOnly"},function(){var n=this.pe;return null===n?!1:n.hb},function(n){var t=this.pe;null!==t&&(t.hb=n)});t.g(i,"isReadOnly",i.prototype.hb);t.defineProperty(i,{hb:"isReadOnly"},function(){return this.Wk},function(n){var r=this.Wk;r!==n&&(t.i(n,"boolean",i,"isReadOnly"),this.Wk=n,this.j("isReadOnly",r,n))});t.g(i,"isEnabled",i.prototype.isEnabled);t.defineProperty(i,{isEnabled:"isEnabled"},function(){return this.Re},function(n){var r=this.Re;r!==n&&(t.i(n,"boolean",i,"isEnabled"),this.Re=n,this.j("isEnabled",r,n))});t.g(i,"allowClipboard",i.prototype.rw);t.defineProperty(i,{rw:"allowClipboard"},function(){return this.tu},function(n){var r=this.tu;r!==n&&(t.i(n,"boolean",i,"allowClipboard"),this.tu=n,this.j("allowClipboard",r,n))});t.g(i,"allowCopy",i.prototype.dj);t.defineProperty(i,{dj:"allowCopy"},function(){return this.yk},function(n){var r=this.yk;r!==n&&(t.i(n,"boolean",i,"allowCopy"),this.yk=n,this.j("allowCopy",r,n))});t.g(i,"allowDelete",i.prototype.ll);t.defineProperty(i,{ll:"allowDelete"},function(){return this.zk},function(n){var r=this.zk;r!==n&&(t.i(n,"boolean",i,"allowDelete"),this.zk=n,this.j("allowDelete",r,n))});t.g(i,"allowDragOut",i.prototype.at);t.defineProperty(i,{at:"allowDragOut"},function(){return this.uu},function(n){var r=this.uu;r!==n&&(t.i(n,"boolean",i,"allowDragOut"),this.uu=n,this.j("allowDragOut",r,n))});t.g(i,"allowDrop",i.prototype.Yz);t.defineProperty(i,{Yz:"allowDrop"},function(){return this.vu},function(n){var r=this.vu;r!==n&&(t.i(n,"boolean",i,"allowDrop"),this.vu=n,this.j("allowDrop",r,n))});t.g(i,"allowTextEdit",i.prototype.cp);t.defineProperty(i,{cp:"allowTextEdit"},function(){return this.Ik},function(n){var r=this.Ik;r!==n&&(t.i(n,"boolean",i,"allowTextEdit"),this.Ik=n,this.j("allowTextEdit",r,n))});t.g(i,"allowGroup",i.prototype.Zo);t.defineProperty(i,{Zo:"allowGroup"},function(){return this.Ak},function(n){var r=this.Ak;r!==n&&(t.i(n,"boolean",i,"allowGroup"),this.Ak=n,this.j("allowGroup",r,n))});t.g(i,"allowUngroup",i.prototype.dp);t.defineProperty(i,{dp:"allowUngroup"},function(){return this.Jk},function(n){var r=this.Jk;r!==n&&(t.i(n,"boolean",i,"allowUngroup"),this.Jk=n,this.j("allowUngroup",r,n))});t.g(i,"allowInsert",i.prototype.Pm);t.defineProperty(i,{Pm:"allowInsert"},function(){return this.xu},function(n){var r=this.xu;r!==n&&(t.i(n,"boolean",i,"allowInsert"),this.xu=n,this.j("allowInsert",r,n))});t.g(i,"allowLink",i.prototype.Qm);t.defineProperty(i,{Qm:"allowLink"},function(){return this.Bk},function(n){var r=this.Bk;r!==n&&(t.i(n,"boolean",i,"allowLink"),this.Bk=n,this.j("allowLink",r,n))});t.g(i,"allowRelink",i.prototype.gk);t.defineProperty(i,{gk:"allowRelink"},function(){return this.Dk},function(n){var r=this.Dk;r!==n&&(t.i(n,"boolean",i,"allowRelink"),this.Dk=n,this.j("allowRelink",r,n))});t.g(i,"allowMove",i.prototype.fk);t.defineProperty(i,{fk:"allowMove"},function(){return this.Ck},function(n){var r=this.Ck;r!==n&&(t.i(n,"boolean",i,"allowMove"),this.Ck=n,this.j("allowMove",r,n))});t.g(i,"allowReshape",i.prototype.$o);t.defineProperty(i,{$o:"allowReshape"},function(){return this.Ek},function(n){var r=this.Ek;r!==n&&(t.i(n,"boolean",i,"allowReshape"),this.Ek=n,this.j("allowReshape",r,n))});t.g(i,"allowResize",i.prototype.ap);t.defineProperty(i,{ap:"allowResize"},function(){return this.Fk},function(n){var r=this.Fk;r!==n&&(t.i(n,"boolean",i,"allowResize"),this.Fk=n,this.j("allowResize",r,n))});t.g(i,"allowRotate",i.prototype.bp);t.defineProperty(i,{bp:"allowRotate"},function(){return this.Gk},function(n){var r=this.Gk;r!==n&&(t.i(n,"boolean",i,"allowRotate"),this.Gk=n,this.j("allowRotate",r,n))});t.g(i,"allowSelect",i.prototype.Ve);t.defineProperty(i,{Ve:"allowSelect"},function(){return this.Hk},function(n){var r=this.Hk;r!==n&&(t.i(n,"boolean",i,"allowSelect"),this.Hk=n,this.j("allowSelect",r,n))});t.g(i,"allowUndo",i.prototype.Zz);t.defineProperty(i,{Zz:"allowUndo"},function(){return this.yu},function(n){var r=this.yu;r!==n&&(t.i(n,"boolean",i,"allowUndo"),this.yu=n,this.j("allowUndo",r,n))});t.g(i,"allowZoom",i.prototype.bt);t.defineProperty(i,{bt:"allowZoom"},function(){return this.Au},function(n){var r=this.Au;r!==n&&(t.i(n,"boolean",i,"allowZoom"),this.Au=n,this.j("allowZoom",r,n))});t.g(i,"hasVerticalScrollbar",i.prototype.rF);t.defineProperty(i,{rF:"hasVerticalScrollbar"},function(){return this.dv},function(n){var r=this.dv;r!==n&&(t.i(n,"boolean",i,"hasVerticalScrollbar"),this.dv=n,ac(this),this.na(),this.j("hasVerticalScrollbar",r,n),cs(this))});t.g(i,"hasHorizontalScrollbar",i.prototype.qF);t.defineProperty(i,{qF:"hasHorizontalScrollbar"},function(){return this.cv},function(n){var r=this.cv;r!==n&&(t.i(n,"boolean",i,"hasHorizontalScrollbar"),this.cv=n,ac(this),this.na(),this.j("hasHorizontalScrollbar",r,n),cs(this))});t.g(i,"allowHorizontalScroll",i.prototype.tf);t.defineProperty(i,{tf:"allowHorizontalScroll"},function(){return this.wu},function(n){var r=this.wu;r!==n&&(t.i(n,"boolean",i,"allowHorizontalScroll"),this.wu=n,this.j("allowHorizontalScroll",r,n),cs(this))});t.g(i,"allowVerticalScroll",i.prototype.uf);t.defineProperty(i,{uf:"allowVerticalScroll"},function(){return this.zu},function(n){var r=this.zu;r!==n&&(t.i(n,"boolean",i,"allowVerticalScroll"),this.zu=n,this.j("allowVerticalScroll",r,n),cs(this))});t.g(i,"scrollHorizontalLineChange",i.prototype.cq);t.defineProperty(i,{cq:"scrollHorizontalLineChange"},function(){return this.Tv},function(n){var r=this.Tv;r!==n&&(t.i(n,"number",i,"scrollHorizontalLineChange"),0>n&&t.ha(n,">= 0",i,"scrollHorizontalLineChange"),this.Tv=n,this.j("scrollHorizontalLineChange",r,n))});t.g(i,"scrollVerticalLineChange",i.prototype.dq);t.defineProperty(i,{dq:"scrollVerticalLineChange"},function(){return this.Uv},function(n){var r=this.Uv;r!==n&&(t.i(n,"number",i,"scrollVerticalLineChange"),0>n&&t.ha(n,">= 0",i,"scrollVerticalLineChange"),this.Uv=n,this.j("scrollVerticalLineChange",r,n))});t.g(i,"lastInput",i.prototype.T);t.defineProperty(i,{T:"lastInput"},function(){return this.dc},function(n){r&&t.l(n,kt,i,"lastInput");this.dc=n});t.g(i,"firstInput",i.prototype.Rc);t.defineProperty(i,{Rc:"firstInput"},function(){return this.Qk},function(n){r&&t.l(n,kt,i,"firstInput");this.Qk=n});t.g(i,"currentCursor",i.prototype.gc);t.defineProperty(i,{gc:"currentCursor"},function(){return this.My},function(n){""===n&&(n=this.Uq);this.My!==n&&(t.i(n,"string",i,"currentCursor"),null!==this.Za&&(this.My=n,this.Za.style.cursor=n,this.Rb.style.cursor=n))});t.g(i,"defaultCursor",i.prototype.EI);t.defineProperty(i,{EI:"defaultCursor"},function(){return this.Uq},function(n){""===n&&(n="auto");var r=this.Uq;r!==n&&(t.i(n,"string",i,"defaultCursor"),this.Uq=n,this.j("defaultCursor",r,n))});t.g(i,"hasGestureZoom",i.prototype.lJ);t.defineProperty(i,{lJ:"hasGestureZoom"},function(){return this.Ii},function(n){var r=this.Ii;r!==n&&(t.i(n,"boolean",i,"hasGestureZoom"),this.Ii=n,this.j("hasGestureZoom",r,n))});t.g(i,"click",i.prototype.click);t.defineProperty(i,{click:"click"},function(){return this.Ai},function(n){var r=this.Ai;r!==n&&(null!==n&&t.i(n,"function",i,"click"),this.Ai=n,this.j("click",r,n))});t.g(i,"doubleClick",i.prototype.dn);t.defineProperty(i,{dn:"doubleClick"},function(){return this.Gi},function(n){var r=this.Gi;r!==n&&(null!==n&&t.i(n,"function",i,"doubleClick"),this.Gi=n,this.j("doubleClick",r,n))});t.g(i,"contextClick",i.prototype.jt);t.defineProperty(i,{jt:"contextClick"},function(){return this.Ci},function(n){var r=this.Ci;r!==n&&(null!==n&&t.i(n,"function",i,"contextClick"),this.Ci=n,this.j("contextClick",r,n))});t.g(i,"mouseOver",i.prototype.Pt);t.defineProperty(i,{Pt:"mouseOver"},function(){return this.Qi},function(n){var r=this.Qi;r!==n&&(null!==n&&t.i(n,"function",i,"mouseOver"),this.Qi=n,this.j("mouseOver",r,n))});t.g(i,"mouseHover",i.prototype.Ot);t.defineProperty(i,{Ot:"mouseHover"},function(){return this.Pi},function(n){var r=this.Pi;r!==n&&(null!==n&&t.i(n,"function",i,"mouseHover"),this.Pi=n,this.j("mouseHover",r,n))});t.g(i,"mouseHold",i.prototype.Nt);t.defineProperty(i,{Nt:"mouseHold"},function(){return this.Oi},function(n){var r=this.Oi;r!==n&&(null!==n&&t.i(n,"function",i,"mouseHold"),this.Oi=n,this.j("mouseHold",r,n))});t.g(i,"mouseDragOver",i.prototype.aG);t.defineProperty(i,{aG:"mouseDragOver"},function(){return this.zv},function(n){var r=this.zv;r!==n&&(null!==n&&t.i(n,"function",i,"mouseDragOver"),this.zv=n,this.j("mouseDragOver",r,n))});t.g(i,"mouseDrop",i.prototype.Mt);t.defineProperty(i,{Mt:"mouseDrop"},function(){return this.Ni},function(n){var r=this.Ni;r!==n&&(null!==n&&t.i(n,"function",i,"mouseDrop"),this.Ni=n,this.j("mouseDrop",r,n))});t.g(i,"toolTip",i.prototype.mu);t.defineProperty(i,{mu:"toolTip"},function(){return this.$i},function(n){var r=this.$i;r!==n&&(null!==n&&t.l(n,fi,i,"toolTip"),this.$i=n,this.j("toolTip",r,n))});t.g(i,"contextMenu",i.prototype.contextMenu);t.defineProperty(i,{contextMenu:"contextMenu"},function(){return this.Di},function(n){var r=this.Di;r!==n&&(null!==n&&t.l(n,fi,i,"contextMenu"),this.Di=n,this.j("contextMenu",r,n))});t.g(i,"commandHandler",i.prototype.Ye);t.defineProperty(i,{Ye:"commandHandler"},function(){return this.Dy},function(n){var r=this.Dy;r!==n&&(t.l(n,at,i,"commandHandler"),null!==n.h&&t.m("Cannot share CommandHandlers between Diagrams: "+n.toString()),null!==r&&r.Ed(null),this.Dy=n,n.Ed(this))});t.g(i,"toolManager",i.prototype.Cb);t.defineProperty(i,{Cb:"toolManager"},function(){return this.hw},function(n){var r=this.hw;r!==n&&(t.l(n,lt,i,"toolManager"),null!==n.h&&t.m("Cannot share ToolManagers between Diagrams: "+n.toString()),null!==r&&r.Ed(null),this.hw=n,n.Ed(this))});t.g(i,"defaultTool",i.prototype.Iw);t.defineProperty(i,{Iw:"defaultTool"},function(){return this.Sy},function(n){var r=this.Sy;r!==n&&(t.l(n,wt,i,"defaultTool"),this.Sy=n,this.Ya===r&&(this.Ya=n))});t.g(i,"currentTool",i.prototype.Ya);t.defineProperty(i,{Ya:"currentTool"},function(){return this.Oy},function(n){var r=this.Oy;if(null!==r)for(r.la&&r.doDeactivate(),r.cancelWaitAfter(),r.doStop(),r=this.xm.k;r.next();)r.value.na();null===n&&(n=this.Iw);null!==n&&(t.l(n,wt,i,"currentTool"),this.Oy=n,n.Ed(this),n.doStart())});t.A(i,{selection:"selection"},function(){return this.Xv});t.g(i,"maxSelectionCount",i.prototype.UF);t.defineProperty(i,{UF:"maxSelectionCount"},function(){return this.uv},function(n){var r=this.uv,u;if(r!==n)if(t.i(n,"number",i,"maxSelectionCount"),0<=n&&!isNaN(n)){if(this.uv=n,this.j("maxSelectionCount",r,n),!this.ma.yb&&(n=this.selection.count-n,0<n)){for(this.Ga("ChangingSelection"),r=this.selection.Pe(),u=0;u<n;u++)r[u].ib=!1;this.Ga("ChangedSelection")}}else t.ha(n,">= 0",i,"maxSelectionCount")});t.g(i,"nodeSelectionAdornmentTemplate",i.prototype.dG);t.defineProperty(i,{dG:"nodeSelectionAdornmentTemplate"},function(){return this.Fv},function(n){var r=this.Fv;r!==n&&(t.l(n,fi,i,"nodeSelectionAdornmentTemplate"),this.Fv=n,this.j("nodeSelectionAdornmentTemplate",r,n))});t.g(i,"groupSelectionAdornmentTemplate",i.prototype.nF);t.defineProperty(i,{nF:"groupSelectionAdornmentTemplate"},function(){return this.$u},function(n){var r=this.$u;r!==n&&(t.l(n,fi,i,"groupSelectionAdornmentTemplate"),this.$u=n,this.j("groupSelectionAdornmentTemplate",r,n))});t.g(i,"linkSelectionAdornmentTemplate",i.prototype.RF);t.defineProperty(i,{RF:"linkSelectionAdornmentTemplate"},function(){return this.ov},function(n){var r=this.ov;r!==n&&(t.l(n,fi,i,"linkSelectionAdornmentTemplate"),this.ov=n,this.j("linkSelectionAdornmentTemplate",r,n))});t.A(i,{Zw:"highlighteds"},function(){return this.ev});t.g(i,"isModified",i.prototype.rh);t.defineProperty(i,{rh:"isModified"},function(){var n=this.ma;return n.isEnabled?null!==n.kj?!0:this.mz&&this.ah!==n.pj:this.mz},function(n){if(this.mz!==n){t.i(n,"boolean",i,"isModified");this.mz=n;var r=this.ma;!n&&r.isEnabled&&(this.ah=r.pj);n||yet(this)}});t.g(i,"model",i.prototype.ea);t.defineProperty(i,{ea:"model"},function(){return this.pe},function(n){var r=this.pe,u;r!==n&&(t.l(n,d,i,"model"),this.Ya.doCancel(),null!==r&&r.ma!==n.ma&&r.ma.DF&&t.m("Do not replace a Diagram.model while a transaction is in progress."),this.mc.iq(),this.xw(),this.rf=!1,this.jo=!0,this.ah=-2,this.Sf=!1,u=this.Jd,this.Jd=!0,this.mc.Gl(),null!==r&&(r.kB(this.dD),r instanceof k&&wl(this,r.tj),wl(this,r.Ng)),this.pe=n,n.Wz(this.cD),sg(this,n.Ng),n instanceof k&&cg(this,n.tj),n.kB(this.cD),n.Wz(this.dD),this.Jd=u,this.cc||this.na(),null!==r&&(n.ma.isEnabled=r.ma.isEnabled))});t.defineProperty(i,{Sa:null},function(){return this.WC},function(n){this.WC=n});t.g(i,"skipsModelSourceBindings",i.prototype.hu);t.defineProperty(i,{hu:"skipsModelSourceBindings"},function(){return this.BD},function(n){this.BD=n});i.prototype.clear=i.prototype.clear=function(){var n=null,r,i;for(null!==this.md&&(n=this.md.U),this.ea.clear(),r=this.Wb.length,i=0;i<r;i++)this.Wb.n[i].clear();this.lg.clear();this.co.clear();this.Gv.clear();this.gl.clear();this.pv.clear();this.mb.clear();this.Ei.clear();this.Nk.clear();this.km.clear();this.Xv.Ra();this.Xv.clear();this.Xv.freeze();this.ev.Ra();this.ev.clear();this.ev.freeze();this.Sn=null;t.gt=null;this.Tu=new p(NaN,NaN,NaN,NaN).freeze();null!==n&&(this.add(n),this.mb.remove(n));this.na()};i.prototype.reset=i.prototype.reset=function(){this.cc=!0;this.clear();this.Wb=new b(et);this.el={};this.mG();this.Pa=new h(NaN,NaN).freeze();this.fc=1;this.gv=new h(NaN,NaN).freeze();this.hv=NaN;this.wv=.0001;this.tv=100;this.mw=new h(NaN,NaN).freeze();this.Yu=new p(NaN,NaN,NaN,NaN).freeze();this.Sl=we;this.Rn=pr;this.Uk=we;this.qo=pr;this.iv=this.fv=hr;this.Du=new ni(16,16,16,16).freeze();this.kv=!0;this.jw=gp;this.Uq="auto";this.Di=this.$i=this.Ni=this.zv=this.Oi=this.Pi=this.Qi=this.Ci=this.Gi=this.Ai=null;this.Wk=!1;this.zk=this.yk=this.tu=this.Re=!0;this.vu=this.uu=!1;this.zu=this.wu=this.dv=this.cv=this.Au=this.yu=this.Hk=this.Gk=this.Fk=this.Ek=this.Ck=this.Dk=this.Bk=this.xu=this.Jk=this.Ak=this.Ik=!0;this.Uv=this.Tv=16;this.Te=new ni(5).freeze();this.uv=999999999;this.Yd=null;gft(this);wft(this);this.md=null;this.ea=new k;this.Xi=!0;this.ic=new ti;this.rf=this.Xi=!1;this.jo=!0;this.cc=this.Sf=!1;this.na()};i.prototype.rebuildParts=i.prototype.zn=function(){for(var i,n,u,f,r=this.ux.k;r.next();)i=r.value,(!i.Rd()||i instanceof g)&&t.m('Invalid node template in Diagram.nodeTemplateMap: template for "'+r.key+'" must be a Node or a simple Part, not a Group or Link: '+i);for(r=this.Xw.k;r.next();)i=r.value,i instanceof g||t.m('Invalid group template in Diagram.groupTemplateMap: template for "'+r.key+'" must be a Group, not a normal Node or Link: '+i);for(r=this.qx.k;r.next();)i=r.value,i instanceof c||t.m('Invalid link template in Diagram.linkTemplateMap: template for "'+r.key+'" must be a Link, not a normal Node or simple Part: '+i);for(r=t.Hb(),i=this.selection.k;i.next();)u=i.value.data,u&&r.push(u);for(i=t.Hb(),n=this.Zw.k;n.next();)(u=n.value.data)&&i.push(u);for(u=t.Hb(),f=this.vh.k;f.next();)n=f.value,n.data&&(u.push(n.data),u.push(n.location));for(f=this.links.k;f.next();)n=f.value,n.data&&(u.push(n.data),u.push(n.location));for(f=this.vj.k;f.next();)n=f.value,n.data&&(u.push(n.data),u.push(n.location));for(n=this.ea,n instanceof k&&wl(this,n.tj),wl(this,n.Ng),sg(this,n.Ng),n instanceof k&&cg(this,n.tj),n=0;n<r.length;n++)(f=this.qh(r[n]))&&(f.ib=!0);for(n=0;n<i.length;n++)(f=this.qh(i[n]))&&(f.Fg=!0);for(n=0;n<u.length;n+=2)(f=this.qh(u[n]))&&(f.location=u[n+1]);t.Ca(r);t.Ca(i);t.Ca(u)};i.prototype.getCategoryForNodeData=function(n){var t=this.ea,i=t.getCategoryForNodeData(n),r=!1;return t instanceof k&&(r=t.tJ(n)),r&&""===i&&(i="LinkLabel"),i};i.prototype.findTemplateForNodeData=function(n,i){var r=!1,u=this.ea;return u instanceof k&&(r=u.KA(n)),r?(r=this.Xw.Da(i),null===r&&(r=this.Xw.Da(""),null===r&&(t.iH||(t.iH=!0,t.trace('No Group template found for category "'+i+'"'),t.trace("  Using default group template")),r=this.rC))):(r=this.ux.Da(i),null===r&&(r=this.ux.Da(""),null===r&&(t.lH||(t.lH=!0,t.trace('No Node template found for category "'+i+'"'),t.trace("  Using default node template")),r=this.tC))),r instanceof s?r:null};i.prototype.getCategoryForLinkData=function(n){var t=this.ea,i="";return t instanceof k?i=t.getCategoryForLinkData(n):t instanceof ci&&(i=t.hJ(n)),i};i.prototype.findTemplateForLinkData=function(n,i){var r=this.qx.Da(i);return null===r&&(r=this.qx.Da(""),null===r&&(t.kH||(t.kH=!0,t.trace('No Link template found for category "'+i+'"'),t.trace("  Using default link template")),r=this.sC)),r instanceof c?r:null};i.prototype.findPartForKey=i.prototype.dJ=function(n){return null===n||void 0===n?null:(n=this.ea.zf(n),null===n)?null:(n=this.Ei.Da(n),n instanceof s?n:null)};i.prototype.findNodeForKey=i.prototype.af=function(n){return null===n||void 0===n?null:(n=this.ea.zf(n),null===n)?null:(n=this.Ei.Da(n),n instanceof y?n:null)};i.prototype.findPartForData=i.prototype.qh=function(n){if(null===n)return null;var t=this.Ei.Da(n);return t instanceof s?t:(t=this.Nk.Da(n),t instanceof s?t:null)};i.prototype.findNodeForData=i.prototype.Sw=function(n){return null===n?null:(n=this.Ei.Da(n),n instanceof y?n:null)};i.prototype.findLinkForData=i.prototype.Vf=function(n){return null===n?null:(n=this.Nk.Da(n),n instanceof c?n:null)};t.g(i,"nodeTemplate",i.prototype.PJ);t.defineProperty(i,{PJ:"nodeTemplate"},function(){return this.Ri.Da("")},function(n){var r=this.Ri.Da("");r!==n&&(t.l(n,s,i,"nodeTemplate"),this.Ri.add("",n),this.j("nodeTemplate",r,n),this.ma.yb||this.zn())});t.g(i,"nodeTemplateMap",i.prototype.ux);t.defineProperty(i,{ux:"nodeTemplateMap"},function(){return this.Ri},function(n){var r=this.Ri;r!==n&&(t.l(n,gt,i,"nodeTemplateMap"),this.Ri=n,this.j("nodeTemplateMap",r,n),this.ma.yb||this.zn())});t.g(i,"groupTemplate",i.prototype.kJ);t.defineProperty(i,{kJ:"groupTemplate"},function(){return this.Rk.Da("")},function(n){var r=this.Rk.Da("");r!==n&&(t.l(n,g,i,"groupTemplate"),this.Rk.add("",n),this.j("groupTemplate",r,n),this.ma.yb||this.zn())});t.g(i,"groupTemplateMap",i.prototype.Xw);t.defineProperty(i,{Xw:"groupTemplateMap"},function(){return this.Rk},function(n){var r=this.Rk;r!==n&&(t.l(n,gt,i,"groupTemplateMap"),this.Rk=n,this.j("groupTemplateMap",r,n),this.ma.yb||this.zn())});t.g(i,"linkTemplate",i.prototype.GJ);t.defineProperty(i,{GJ:"linkTemplate"},function(){return this.Nj.Da("")},function(n){var r=this.Nj.Da("");r!==n&&(t.l(n,c,i,"linkTemplate"),this.Nj.add("",n),this.j("linkTemplate",r,n),this.ma.yb||this.zn())});t.g(i,"linkTemplateMap",i.prototype.qx);t.defineProperty(i,{qx:"linkTemplateMap"},function(){return this.Nj},function(n){var r=this.Nj;r!==n&&(t.l(n,gt,i,"linkTemplateMap"),this.Nj=n,this.j("linkTemplateMap",r,n),this.ma.yb||this.zn())});t.g(i,"isMouseCaptured",i.prototype.Qd);t.defineProperty(i,{Qd:"isMouseCaptured"},function(){return this.TC},function(t){var i=this.Za;null!==i&&(t?(this.T.bubbles=!1,i.removeEventListener("mousemove",this.Qp,!1),i.removeEventListener("mousedown",this.Pp,!1),i.removeEventListener("mouseup",this.Sp,!1),i.removeEventListener("mousewheel",this.th,!1),i.removeEventListener("DOMMouseScroll",this.th,!1),i.removeEventListener("mouseout",this.Rp,!1),n.addEventListener("mousemove",this.Qp,!0),n.addEventListener("mousedown",this.Pp,!0),n.addEventListener("mouseup",this.Sp,!0),n.addEventListener("mousewheel",this.th,!0),n.addEventListener("DOMMouseScroll",this.th,!0),n.addEventListener("mouseout",this.Rp,!0),n.addEventListener("selectstart",this.preventDefault,!1)):(n.removeEventListener("mousemove",this.Qp,!0),n.removeEventListener("mousedown",this.Pp,!0),n.removeEventListener("mouseup",this.Sp,!0),n.removeEventListener("mousewheel",this.th,!0),n.removeEventListener("DOMMouseScroll",this.th,!0),n.removeEventListener("mouseout",this.Rp,!0),n.removeEventListener("selectstart",this.preventDefault,!1),i.addEventListener("mousemove",this.Qp,!1),i.addEventListener("mousedown",this.Pp,!1),i.addEventListener("mouseup",this.Sp,!1),i.addEventListener("mousewheel",this.th,!1),i.addEventListener("DOMMouseScroll",this.th,!1),i.addEventListener("mouseout",this.Rp,!1)),this.TC=t)});t.g(i,"position",i.prototype.position);t.defineProperty(i,{position:"position"},function(){return this.Pa},function(n){var r=this.Pa,u,f;r.O(n)||(t.l(n,h,i,"position"),u=this.Ab.copy(),u.x=r.x,u.y=r.y,n=n.copy(),this.cc||null===this.Za||(this.cc=!0,f=this.scale,iet(this,n,this.Lc,this.Jb/f,this.Ib/f,this.Rn),this.cc=!1),this.Pa=n.ba(),n=this.mc,n.zd&&yft(n,r,this.Pa),this.cc||this.Ut(u,this.Ab))});t.g(i,"initialPosition",i.prototype.vF);t.defineProperty(i,{vF:"initialPosition"},function(){return this.gv},function(n){this.gv.O(n)||(t.l(n,h,i,"initialPosition"),this.gv=n.ba())});t.g(i,"initialScale",i.prototype.wF);t.defineProperty(i,{wF:"initialScale"},function(){return this.hv},function(n){this.hv!==n&&(t.i(n,"number",i,"initialScale"),this.hv=n)});t.g(i,"grid",i.prototype.xp);t.defineProperty(i,{xp:"grid"},function(){return null===this.md&&net(this),this.md},function(n){var r=this.md,u;r!==n&&(null===r&&(net(this),r=this.md),t.l(n,a,i,"grid"),n.type!==bc&&t.m("Diagram.grid must be a Panel of type Panel.Grid"),u=r.ia,null!==u&&u.remove(r),this.md=n,n.name="GRID",null!==u&&u.add(n),ls(this),this.na(),this.j("grid",r,n))});t.A(i,{Ab:"viewportBounds"},function(){var n=this.$D,t,i;return null===this.Za?n:(t=this.Pa,i=this.fc,n.p(t.x,t.y,Math.max(this.Jb,0)/i,Math.max(this.Ib,0)/i),n)});t.g(i,"fixedBounds",i.prototype.vA);t.defineProperty(i,{vA:"fixedBounds"},function(){return this.Yu},function(n){var r=this.Yu;r.O(n)||(t.l(n,p,i,"fixedBounds"),this.Yu=n=n.ba(),this.Sc(),this.j("fixedBounds",r,n))});t.A(i,{Lc:"documentBounds"},function(){return this.Tu});t.g(i,"scale",i.prototype.scale);t.defineProperty(i,{scale:"scale"},function(){return this.fc},function(n){var u=this.fc,r;if(t.q(n,i,"scale"),n<this.Jg&&(n=this.Jg),n>this.Hg&&(n=this.Hg),u!==n){if(this.fc=n,!this.cc&&!this.Jd&&(this.cc=!0,null!==this.Za)){var f=this.Ab.copy(),e=this.Jb/n,o=this.Ib/n;if(f.width=this.Jb/u,f.height=this.Ib/u,r=this.eg.copy(),isNaN(r.x))switch(this.Cw){case brt:r.x=0;break;case krt:r.x=e-1;break;case si:r.x=e/2;break;case pr:case kk:r.x=e/2}if(isNaN(r.y))switch(this.Cw){case wrt:r.y=0;break;case drt:r.y=o-1;break;case si:r.y=o/2;break;case pr:case kk:r.y=o/2}this.position=new h(this.Pa.x+r.x/u-r.x/n,this.Pa.y+r.y/u-r.y/n);this.cc=!1;this.Ut(f,this.Ab)}this.na();ac(this)}});t.g(i,"autoScale",i.prototype.Tm);t.defineProperty(i,{Tm:"autoScale"},function(){return this.Sl},function(n){var r=this.Sl;r!==n&&(t.Fa(n,i,i,"autoScale"),this.Sl=n,this.j("autoScale",r,n),n!==we&&cs(this))});t.g(i,"initialAutoScale",i.prototype.pJ);t.defineProperty(i,{pJ:"initialAutoScale"},function(){return this.Uk},function(n){var r=this.Uk;r!==n&&(t.Fa(n,i,i,"initialAutoScale"),this.Uk=n,this.j("initialAutoScale",r,n))});t.g(i,"initialViewportSpot",i.prototype.xF);t.defineProperty(i,{xF:"initialViewportSpot"},function(){return this.iv},function(n){var r=this.iv;r!==n&&(t.l(n,e,i,"initialViewportSpot"),n.Cd()||t.m("initialViewportSpot must be a real Spot: "+n),this.iv=n,this.j("initialViewportSpot",r,n))});t.g(i,"initialDocumentSpot",i.prototype.uF);t.defineProperty(i,{uF:"initialDocumentSpot"},function(){return this.fv},function(n){var r=this.fv;r!==n&&(t.l(n,e,i,"initialDocumentSpot"),n.Cd()||t.m("initialViewportSpot must be a real Spot: "+n),this.fv=n,this.j("initialDocumentSpot",r,n))});t.g(i,"minScale",i.prototype.Jg);t.defineProperty(i,{Jg:"minScale"},function(){return this.wv},function(n){t.q(n,i,"minScale");var r=this.wv;r!==n&&(0<n?(this.wv=n,this.j("minScale",r,n),n>this.scale&&(this.scale=n)):t.ha(n,"> 0",i,"minScale"))});t.g(i,"maxScale",i.prototype.Hg);t.defineProperty(i,{Hg:"maxScale"},function(){return this.tv},function(n){t.q(n,i,"maxScale");var r=this.tv;r!==n&&(0<n?(this.tv=n,this.j("maxScale",r,n),n<this.scale&&(this.scale=n)):t.ha(n,"> 0",i,"maxScale"))});t.g(i,"zoomPoint",i.prototype.eg);t.defineProperty(i,{eg:"zoomPoint"},function(){return this.mw},function(n){this.mw.O(n)||(t.l(n,h,i,"zoomPoint"),this.mw=n=n.ba())});t.g(i,"contentAlignment",i.prototype.Cw);t.defineProperty(i,{Cw:"contentAlignment"},function(){return this.Rn},function(n){var r=this.Rn;r.O(n)||(t.l(n,e,i,"contentAlignment"),this.Rn=n=n.ba(),this.j("contentAlignment",r,n),cs(this))});t.g(i,"initialContentAlignment",i.prototype.qJ);t.defineProperty(i,{qJ:"initialContentAlignment"},function(){return this.qo},function(n){var r=this.qo;r.O(n)||(t.l(n,e,i,"initialContentAlignment"),this.qo=n=n.ba(),this.j("initialContentAlignment",r,n))});t.g(i,"padding",i.prototype.padding);t.defineProperty(i,{padding:"padding"},function(){return this.Te},function(n){"number"==typeof n?n=new ni(n):t.l(n,ni,i,"padding");var r=this.Te;r.O(n)||(this.Te=n=n.ba(),this.Sc(),this.j("padding",r,n))});t.A(i,{vh:"nodes"},function(){return this.Gv.k});t.A(i,{links:"links"},function(){return this.pv.k});t.A(i,{vj:"parts"},function(){return this.mb.k});i.prototype.findTopLevelGroups=function(){return this.gl.k};t.g(i,"layout",i.prototype.ic);t.defineProperty(i,{ic:"layout"},function(){return this.Yd},function(n){var r=this.Yd;r!==n&&(t.l(n,ti,i,"layout"),null!==r&&(r.h=null,r.group=null),this.Yd=n,n.h=this,n.group=null,this.Bu=!0,this.j("layout",r,n),this.ie())});i.prototype.layoutDiagram=function(n){wu(this);n&&vg(this,!0);yg(this,!1)};t.g(i,"isTreePathToChildren",i.prototype.vd);t.defineProperty(i,{vd:"isTreePathToChildren"},function(){return this.kv},function(n){var r=this.kv;if(r!==n&&(t.i(n,"boolean",i,"isTreePathToChildren"),this.kv=n,this.j("isTreePathToChildren",r,n),!this.ma.yb))for(n=this.vh;n.next();)ry(n.value)});i.prototype.findTreeRoots=function(){for(var n,t=new b(y),i=this.vh.k;i.next();)n=i.value,n.Fp&&null===n.tt()&&t.add(n);return t.k};t.g(i,"isCollapsingExpanding",i.prototype.ee);t.defineProperty(i,{ee:null},function(){return this.LC},function(n){this.LC=n});i.prototype.addDiagramListener=i.prototype.Xz=function(n,r){t.i(n,"string",i,"addDiagramListener:name");t.i(r,"function",i,"addDiagramListener:listener");var u=pg(this,n);null!==u&&u.add(r)};i.prototype.removeDiagramListener=i.prototype.kG=function(n,r){t.i(n,"string",i,"removeDiagramListener:name");t.i(r,"function",i,"addDiagramListener:listener");var u=pg(this,n);null!==u&&u.remove(r)};i.prototype.raiseDiagramEvent=i.prototype.Ga=function(n,u,f){r&&t.i(n,"string",i,"raiseDiagramEvent:name");var e=pg(this,n),o=new fu;if(o.h=this,o.name=get(this,n),void 0!==u&&(o.Nx=u),void 0!==f&&(o.yx=f),n=e.length,1===n)e=e.wa(0),e(o);else if(0!==n)for(u=e.Pe(),f=0;f<n;f++)e=u[f],e(o);return o.cancel};i.prototype.simulatedMouseMove=i.prototype.zB=function(n,t,r){var f,u;return null!==lr?(f=lr.h,r instanceof i||(r=null),u=sl,r!==u&&(null!==u&&u!==f&&null!==u.Cb.Od&&(fh(u),lr.Dt=!1,u.Cb.Od.doSimulatedDragLeave()),sl=r,null!==r&&r!==f&&null!==r.Cb.Od&&(lut(),u=r.Cb.Od,dh.contains(u)||dh.add(u),r.Cb.Od.doSimulatedDragEnter())),null===r||r===f||!r.Yz||r.hb||!r.Pm)?!1:(f=r.Cb.Od,null!==f&&(null!==n?t=r.dm(n):null===t&&(t=new h),r.dc.da=t,r.dc.ok=!1,r.dc.zj=!1,f.doSimulatedDragOver()),!0):!1};i.prototype.simulatedMouseUp=i.prototype.JG=function(n,t,i,r){if(null!==lr){null===r&&(r=t);t=sl;var u=lr.h;if(r!==t){if(null!==t&&t!==u&&null!==t.Cb.Od)return fh(t),lr.Dt=!1,t.Cb.Od.doSimulatedDragLeave(),!1;sl=r;null!==r&&null!==r.Cb.Od&&(lut(),t=r.Cb.Od,dh.contains(t)||dh.add(t),r.Cb.Od.doSimulatedDragEnter())}if(null===r)return lr.doCancel(),!0;if(r!==this)return null!==n&&(i=r.dm(n)),r.dc.da=i,r.dc.ok=!1,r.dc.zj=!0,n=r.Cb.Od,null!==n&&n.doSimulatedDrop(),n=lr,null!==n&&(r=n.mayCopy(),n.mf=r?"Copy":"Move",n.stopTool()),!0}return!1};t.g(i,"autoScrollRegion",i.prototype.nE);t.defineProperty(i,{nE:"autoScrollRegion"},function(){return this.Du},function(n){"number"==typeof n?n=new ni(n):t.l(n,ni,i,"autoScrollRegion");var r=this.Du;r.O(n)||(this.Du=n=n.ba(),this.Sc(),this.j("autoScrollRegion",r,n))});i.prototype.makeSVG=i.prototype.makeSvg=function(n){return void 0===n&&(n={}),n.context="svg",n=rot(this,n),null!==n?n.Ll:null};i.prototype.makeImage=function(n){void 0===n&&(n={});var t=(n.document||document).createElement("img");return t.src=this.HJ(n),t instanceof HTMLImageElement?t:null};i.prototype.makeImageData=i.prototype.HJ=function(n){void 0===n&&(n={});var t=rot(this,n);return null!==t?t.toDataURL(n.type,n.details):""};i.inherit=function(n,r){t.i(n,"function",i,"inherit");t.i(r,"function",i,"inherit");r.KH&&t.m("Cannot inherit from "+t.Dg(r));t.Qa(n,r)};t.ka("Palette",uot);t.Qa(uot,i);t.ka("Overview",bu);t.Qa(bu,i);bu.prototype.computePixelRatio=function(){return 1};bu.prototype.$e=function(){var i,n,u,c,l;if(null===this.Rb&&t.m("No div specified"),null===this.Za&&t.m("No canvas specified"),this.Be&&(i=this.Si,!(null===i||i.mc.Eg||i.mc.zd||!this.EH&&i.Cb.Od.la))){n=i.xp;(n&&n.visible&&isNaN(n.width)||isNaN(n.height))&&ls(i);var e=this.Za,n=this.of,s=this.Lz,a=this.MH;s.width=e.width;s.height=e.height;n.su="";n.setTransform(1,0,0,1,0,0);n.clearRect(0,0,this.Za.width,this.Za.height);u=this.Oc;u.reset();1!==this.fc&&u.scale(this.scale);0===this.position.x&&0===this.position.y||u.translate(-this.Pa.x,-this.Pa.y);n.setTransform(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy);for(var p=this.Vu,w=this.Ab,b=i.Wb.length,f=0;f<b;f++){var h=i.Wb.n[f],y=n,k=w,o=p;if(void 0===o&&(o=!0),o||!h.Dc)for(var h=h.mb,o=this.scale,d=h.length,v=0;v<d;v++)c=h.n[v],l=c.pa,l.Xf(k)&&(1<l.width*o||1<l.height*o?c.$e(y,this):ny(c,y))}for(a.drawImage(e,0,0),r&&r.gj&&(a.fillStyle="red",a.fillRect(0,s.height/2,s.width,4)),i=this.Wb.n,e=this.Wb.length,f=0;f<e;f++)i[f].$e(n,this);r&&(r.rA||r.gj)&&r.qA(n,this,u);this.Be=this.Vk=!1}};t.g(bu,"observed",bu.prototype.RJ);t.defineProperty(bu,{RJ:"observed"},function(){return this.Si},function(n){var r=this.Si;null!==n&&t.l(n,i,bu,"observed");r===n||n instanceof bu||(null!==r&&(this.remove(this.Bg),r.kG("ViewportBoundsChanged",this.fG),r.kG("DocumentBoundsChanged",this.eG),r.xm.remove(this)),this.Si=n,null!==n&&(n.Xz("ViewportBoundsChanged",this.fG),n.Xz("DocumentBoundsChanged",this.eG),n.xm.add(this),this.add(this.Bg),lv(this)),this.Sc(),this.j("observed",r,n))});t.g(bu,"box",bu.prototype.Bg);t.defineProperty(bu,{Bg:"box"},function(){return this.Vl},function(n){var t=this.Vl;t!==n&&(this.Vl=n,this.remove(t),this.add(this.Vl),lv(this),this.j("box",t,n))});t.g(bu,"drawsTemporaryLayers",bu.prototype.ZI);t.defineProperty(bu,{ZI:"drawsTemporaryLayers"},function(){return this.Vu},function(n){this.Vu!==n&&(this.Vu=n,this.Yt())});bu.prototype.vf=function(){var n=this.Si;return null===n?u.xH:n.Lc};bu.prototype.Ut=function(n){this.cc||(uh(this),this.na(),ac(this),this.Sc(),lv(this),this.Ga("ViewportBoundsChanged",n))};t.Qa(bl,wt);bl.prototype.doStart=function(){this.la=this.h.Qd=!0};bl.prototype.doMouseMove=function(){var n,t,i,r;this.la&&(n=this.h,null!==n&&null!==n.Si&&(t=n.Si,null!==t&&(i=t.Ab,r=n.T.da,t.position=new h(r.x-i.width/2,r.y-i.height/2),n.ie())))};bl.prototype.doMouseUp=function(){this.la&&this.doMouseMove();this.stopTool()};bl.prototype.doStop=function(){this.la=!1;var n=this.h;null!==n&&(n.Qd=!1,lv(n))};t.ka("Brush",ht);ht.Solid=yc=t.w(ht,"Solid",0);ht.Linear=fo=t.w(ht,"Linear",1);ht.Radial=ku=t.w(ht,"Radial",2);ht.Pattern=av=t.w(ht,"Pattern",4);ht.isValidColor=fot=function(n){var i,u;return"black"===n?!0:""===n?!1:(r&&t.i(n,"string",ht,"isValidColor"),i=t.Dn,i.fillStyle="#000000",u=i.fillStyle,i.fillStyle=n,i.fillStyle!==u)?!0:(i.fillStyle="#FFFFFF",u=i.fillStyle,i.fillStyle=n,i.fillStyle!==u)};ht.prototype.copy=function(){var n=new ht;return n.ga=this.ga,n.Qn=this.Qn,n.Po=this.Po.ba(),n.ho=this.ho.ba(),n.aw=this.aw,n.Wu=this.Wu,null!==this.Yg&&(n.Yg=this.Yg.copy()),n.Nv=this.Nv,n};ht.prototype.Oa=function(){return this.freeze(),Object.freeze(this),this};ht.prototype.freeze=function(){return this.tb=!0,null!==this.Yg&&this.Yg.freeze(),this};ht.prototype.Ra=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.tb=!1,null!==this.Yg&&this.Yg.Ra(),this};ht.prototype.toString=function(){var n="Brush(",t;if(this.type===yc)n+=this.color;else if(n=this.type===fo?n+"Linear ":this.type===ku?n+"Radial ":this.type===av?n+"Pattern ":n+"(unknown) ",n+=this.start+" "+this.end,null!==this.hp)for(t=this.hp.k;t.next();)n+=" "+t.key+":"+t.value;return n+")"};ht.prototype.addColorStop=ht.prototype.addColorStop=function(n,i){t.J(this);("number"!=typeof n||!isFinite(n)||1<n||0>n)&&t.ha(n,"0 <= loc <= 1",ht,"addColorStop:loc");t.i(i,"string",ht,"addColorStop:color");null===this.Yg&&(this.Yg=new gt("number","string"));this.Yg.add(n,i);this.ga===yc&&(this.type=fo);this.Zg=null};t.g(ht,"type",ht.prototype.type);t.defineProperty(ht,{type:"type"},function(){return this.ga},function(n){t.J(this,n);t.Fa(n,ht,ht,"type");this.ga=n;this.start.Me()&&(n===fo?this.start=np:n===ku&&(this.start=si));this.end.Me()&&(n===fo?this.end=tv:n===ku&&(this.end=si));this.Zg=null});t.g(ht,"color",ht.prototype.color);t.defineProperty(ht,{color:"color"},function(){return this.Qn},function(n){t.J(this,n);t.i(n,"string",ht,"color");this.Qn=n;this.Zg=null});t.g(ht,"start",ht.prototype.start);t.defineProperty(ht,{start:"start"},function(){return this.Po},function(n){t.J(this,n);n instanceof e||t.jc(n,"Spot",ht,"start");this.Po=n.ba();this.Zg=null});t.g(ht,"end",ht.prototype.end);t.defineProperty(ht,{end:"end"},function(){return this.ho},function(n){t.J(this,n);n instanceof e||t.jc(n,"Spot",ht,"end");this.ho=n.ba();this.Zg=null});t.g(ht,"startRadius",ht.prototype.hq);t.defineProperty(ht,{hq:"startRadius"},function(){return this.aw},function(n){t.J(this,n);t.q(n,ht,"startRadius");0>n&&t.ha(n,">= zero",ht,"startRadius");this.aw=n;this.Zg=null});t.g(ht,"endRadius",ht.prototype.mp);t.defineProperty(ht,{mp:"endRadius"},function(){return this.Wu},function(n){t.J(this,n);t.q(n,ht,"endRadius");0>n&&t.ha(n,">= zero",ht,"endRadius");this.Wu=n;this.Zg=null});t.g(ht,"colorStops",ht.prototype.hp);t.defineProperty(ht,{hp:"colorStops"},function(){return this.Yg},function(n){t.J(this,n);r&&t.l(n,gt,ht,"colorStops");this.Yg=n;this.Zg=null});t.g(ht,"pattern",ht.prototype.pattern);t.defineProperty(ht,{pattern:"pattern"},function(){return this.Nv},function(n){t.J(this,n);this.Nv=n;this.Zg=null});ht.randomColor=function(n,i){void 0===n&&(n=128);r&&(t.q(n,ht,"randomColor:min"),(0>n||255<n)&&t.ha(n,"0 <= min <= 255",ht,"randomColor:min"));void 0===i&&(i=Math.max(n,255));r&&(t.q(i,ht,"randomColor:max"),(i<n||255<i)&&t.ha(i,"min <= max <= 255",ht,"randomColor:max"));var u=Math.abs(i-n),f=Math.floor(n+Math.random()*u).toString(16),e=Math.floor(n+Math.random()*u).toString(16),u=Math.floor(n+Math.random()*u).toString(16);return 2>f.length&&(f="0"+f),2>e.length&&(e="0"+e),2>u.length&&(u="0"+u),"#"+f+e+u};t.ka("GraphObject",f);t.ii(f);f.prototype.cloneProtected=function(n){var t,i;if(n.oa=this.oa|6144,n.Qf=this.Qf,n.ec=this.ec,n.Qb=this.Qb,n.zc=this.zc,n.Pa.assign(this.Pa),n.pf.assign(this.pf),n.Tj=this.Tj.ba(),n.Sj=this.Sj.ba(),n.Zk=this.Zk.copy(),n.fc=this.fc,n.Nn=this.Nn,n.$h=this.$h,n.Gr=this.Gr.ba(),n.$c.assign(this.$c),n.Pb.assign(this.Pb),n.nd.assign(this.nd),n.bs=this.bs,null!==this.R?(t=this.R,n.R={Ph:t.Ph.ba(),ei:t.ei.ba(),Mh:t.Mh,bi:t.bi,Lh:t.Lh,ai:t.ai,Oh:t.Oh,di:t.di}):n.R=null,n.ar=this.ar,n.br=this.br,n.Ns=this.Ns,n.Os=this.Os,n.Ae=this.Ae.ba(),n.Aq=this.Aq.ba(),n.os=this.os,n.Yj=this.Yj,n.Hq=this.Hq,n.Fj=this.Fj,n.ss=this.ss,n.rs=this.rs,n.ts=this.ts.ba(),n.us=this.us,n.Oq=this.Oq,null!==this.S?(t=this.S,n.S={Ai:t.Ai,Gi:t.Gi,Ci:t.Ci,Sr:t.Sr,Tr:t.Tr,Qi:t.Qi,Pi:t.Pi,Oi:t.Oi,Qr:t.Qr,Rr:t.Rr,Ni:t.Ni,wq:t.wq,xq:t.xq,yq:t.yq,vq:t.vq,$i:t.$i,Di:t.Di}):n.S=null,n.Nc=this.Nc,Array.isArray(this.Xl))for(n.Xl=this.Xl.slice(0),t=0;t<this.Xl.length;t++)i=this.Xl[t],n[i]=this[i];null!==this.Bi&&(n.Bi=this.Bi.copy())};f.prototype.ji=function(n){n.cs=null;n.zm=null;n.ja()};f.prototype.copy=function(){var n=new this.constructor;return this.cloneProtected(n),n};f.prototype.toString=function(){return t.Dg(Object.getPrototypeOf(this))+"#"+t.ud(this)};f.None=yr=t.w(f,"None",0);f.Default=be=t.w(f,"Default",0);f.Vertical=of=t.w(f,"Vertical",4);f.Horizontal=du=t.w(f,"Horizontal",5);f.Fill=cr=t.w(f,"Fill",3);f.Uniform=ar=t.w(f,"Uniform",1);f.UniformToFill=vv=t.w(f,"UniformToFill",2);ft=f.prototype;ft.Le=function(){this.R={Ph:pi,ei:pi,Mh:10,bi:10,Lh:ea,ai:ea,Oh:0,di:0}};ft.ed=function(n,t,i,r,u,f,e){var o=this.U;null!==o&&(o.yn(n,t,i,r,u,f,e),0!=(this.oa&1024)&&i===this&&n===di&&yv(this,o,t))};ft.j=function(n,t,i){this.ed(di,n,this,t,i)};ft.bF=function(n,t,i){var r,u;return!1===this.kf?!1:(r=this.Ja,t=n.nk(t),u=!1,i&&(u=ur(n.x,n.y,0,0,0,r.height)<t||ur(n.x,n.y,0,r.height,r.width,r.height)<t||ur(n.x,n.y,r.width,r.height,r.width,0)<t||ur(n.x,n.y,r.width,0,0,0)<t),i||(u=ur(n.x,n.y,0,0,0,r.height)<t&&ur(n.x,n.y,0,r.height,r.width,r.height)<t&&ur(n.x,n.y,r.width,r.height,r.width,0)<t&&ur(n.x,n.y,r.width,0,0,0)<t),u)};ft.Kf=function(){return!0};f.prototype.containsPoint=f.prototype.La=function(n){var i,u;if(r&&t.l(n,h,f,"containsPoint:p"),i=t.N(),i.assign(n),this.transform.Xa(i),u=this.pa,!u.P())return!1;if(t.CB){var s=this.Ja,o=this.sk()*(null!==this.h?this.h.scale:1),e=1/o;if(10>s.width*o&&10>s.height*o)return n=po(u.x-5*e,u.y-5*e,u.width+10*e,u.height+10*e,i.x,i.y),t.B(i),n}return(void 0!==this.uc||this instanceof w?po(u.x-5,u.y-5,u.width+10,u.height+10,i.x,i.y):u.La(i))?this.Bi&&!this.Bi.La(i)?!1:null!==this.zc&&u.La(i)||null!==this.Qb&&this.nd.La(n)?!0:(t.B(i),this.jk(n)):(t.B(i),!1)};f.prototype.jk=function(n){var t=this.Ja;return po(0,0,t.width,t.height,n.x,n.y)};f.prototype.containsRect=f.prototype.kk=function(n){if(r&&t.l(n,p,f,"containsRect:r"),0===this.angle)return this.pa.kk(n);var u=this.Ja,u=t.wk(0,0,u.width,u.height),e=this.transform,o=!1,i=t.qc(n.x,n.y);return u.La(e.mi(i))&&(i.p(n.x,n.bottom),u.La(e.mi(i))&&(i.p(n.right,n.bottom),u.La(e.mi(i))&&(i.p(n.right,n.y),u.La(e.mi(i))&&(o=!0)))),t.B(i),t.oc(u),o};f.prototype.containedInRect=f.prototype.Ym=function(n,i){if(r&&t.l(n,p,f,"containedInRect:r"),void 0===i)return n.kk(this.pa);var e=this.Ja,o=!1,u=t.qc(0,0);return n.La(i.Xa(u))&&(u.p(0,e.height),n.La(i.Xa(u))&&(u.p(e.width,e.height),n.La(i.Xa(u))&&(u.p(e.width,0),n.La(i.Xa(u))&&(o=!0)))),o};f.prototype.intersectsRect=f.prototype.Xf=function(n,i){var e,o;if(r&&t.l(n,p,f,"intersectsRect:r"),void 0===i&&(i=this.transform,0===this.angle))return n.Xf(this.pa);var e=this.Ja,s=i,c=t.qc(0,0),l=t.qc(0,e.height),a=t.qc(e.width,e.height),v=t.qc(e.width,0),h=!1;return n.La(s.Xa(c))||n.La(s.Xa(l))||n.La(s.Xa(a))||n.La(s.Xa(v))?h=!0:(e=t.wk(0,0,e.width,e.height),o=t.qc(n.x,n.y),e.La(s.mi(o))?h=!0:(o.p(n.x,n.bottom),e.La(s.mi(o))?h=!0:(o.p(n.right,n.bottom),e.La(s.mi(o))?h=!0:(o.p(n.right,n.y),e.La(s.mi(o))&&(h=!0)))),t.B(o),t.oc(e),!h&&(u.bx(n,c,l)||u.bx(n,l,a)||u.bx(n,a,v)||u.bx(n,v,c))&&(h=!0)),t.B(c),t.B(l),t.B(a),t.B(v),h};f.prototype.getDocumentPoint=f.prototype.wb=function(n,i){void 0===i&&(i=new h);n.Me()&&t.m("getDocumentPoint:s Spot must be real: "+n.toString());var r=this.Ja;return i.p(n.x*r.width+n.offsetX,n.y*r.height+n.offsetY),this.se.Xa(i),i};f.prototype.getDocumentAngle=f.prototype.ul=function(){var n=this.se,n=180/Math.PI*Math.atan2(n.m12,n.m11);return 0>n&&(n+=360),n};f.prototype.getDocumentScale=f.prototype.sk=function(){var n=this.fc;return null!==this.ia?n*this.ia.sk():n};f.prototype.getLocalPoint=f.prototype.jF=function(n,t){return void 0===t&&(t=new h),t.assign(n),this.se.mi(t),t};f.prototype.getNearestIntersectionPoint=f.prototype.yl=function(n,t,i){return this.wp(n.x,n.y,t.x,t.y,i)};ft=f.prototype;ft.wp=function(n,t,i,r,f){var e=this.transform,o=1/(e.m11*e.m22-e.m12*e.m21),s=e.m22*o,h=-e.m12*o,c=-e.m21*o,l=e.m11*o,a=o*(e.m21*e.dy-e.m22*e.dx),v=o*(e.m12*e.dx-e.m11*e.dy);return null!==this.hk?(e=this.pa,u.yl(e.left,e.top,e.right,e.bottom,n,t,i,r,f)):(o=n*s+t*c+a,n=n*h+t*l+v,t=i*s+r*c+a,i=i*h+r*l+v,f.p(0,0),r=this.Ja,i=u.yl(0,0,r.width,r.height,o,n,t,i,f),f.transform(e),i)};ft.Pc=function(n,i,r,u,f){var o,e;wo(this);o=t.Jf();o.assign(this.Pb);this.Pb.Ra();!1===he(this)?(e=this.Pb,e.x=n,e.y=i,e.width=r,e.height=u):this.ik(n,i,r,u);this.Pb.freeze();this.Bi=void 0===f?null:f;r=!1;void 0!==f?r=!0:this.ia&&(f=this.ia.nd,u=this.Ha,null!==this.hk&&(u=this.Pb),r=i+u.height,u=n+u.width,r=!(0<=n+.05&&u<=f.width+.05&&0<=i+.05&&r<=f.height+.05),this instanceof ot&&(n=this.nd,this.sv>n.height||this.Eo.Gg>n.width))&&(r=!0);this.oa=r?this.oa|256:this.oa&-257;this.Pb.P()||t.m("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Pb.toString());gg(this,o,this.Pb);t.oc(o)};ft.ik=function(){};ft.$e=function(n,i){var g,nt,b,y,u,f,c,e;if(this.visible){if(g=this.opacity,nt=1,1!==g){if(0===g)return;nt=n.globalAlpha;n.globalAlpha=nt*g}if(n instanceof el){n:{if(this.visible)if(b=null,y=n.mx,this instanceof a&&(this.type===eo||this.type===ko))sot(this,n,i);else if(u=this.Pb,0!==u.width&&0!==u.height&&!isNaN(u.x)&&!isNaN(u.y)){var h=this.transform,l=this.ia,f=this.Ch;if(f.reset(),null!==l&&(l.Kf()?f.multiply(l.se):null!==l.ia&&f.multiply(l.ia.se)),f.multiply(this.Oc),f=0!=(this.oa&256),c=!1,this instanceof ot&&lst(this,n),f){if(c=l.Kf()?l.Ja:l.pa,this.Bi)var k=this.Bi,p=k.x,o=k.y,v=k.width,k=k.height;else p=Math.max(u.x,c.x),o=Math.max(u.y,c.y),v=Math.min(u.right,c.right)-p,k=Math.min(u.bottom,c.bottom)-o;if(p>u.width+u.x||u.x>c.width+c.x||o>u.height+u.y||u.y>c.height+c.y)break n;c=!0;ol(n,1,0,0,1,0,0);n.save();n.beginPath();n.rect(p,o,v,k);n.clip()}if(p=!1,this instanceof s&&(p=!0,!this.Wa()))break n;if(o=!1,v=i.el,this.U&&v.drawShadows&&(o=this.U.qi),n.lj.hf=[1,0,0,1,0,0],null!==this.zc&&(gu(this,n,this.zc,!0,!0),this.zc instanceof ht&&this.zc.type===ku?(n.beginPath(),n.rect(u.x,u.y,u.width,u.height),ou(n,this.zc,!0)):n.fillRect(u.x,u.y,u.width,u.height)),p&&this.qi&&v.drawShadows&&(ol(n,1,0,0,1,0,0),u=this.Im,n.shadowOffsetX=u.x,n.shadowOffsetY=u.y,n.shadowColor=this.Hm,n.shadowBlur=this.Gm/i.scale,n.jb()),this instanceof a?ol(n,h.m11,h.m12,h.m21,h.m22,h.dx,h.dy):n.lj.hf=[h.m11,h.m12,h.m21,h.m22,h.dx,h.dy],null!==this.Qb){var k=this.Ja,u=h=0,v=k.width,k=k.height,d=0;this instanceof w&&(k=this.Ta.Tb,h=k.x,u=k.y,v=k.width,k=k.height,d=this.qe);gu(this,n,this.Qb,!0);this.Qb instanceof ht&&this.Qb.type===ku?(n.beginPath(),n.rect(h-d/2,u-d/2,v+d,k+d),ou(n,this.Qb,!0)):n.fillRect(h-d/2,u-d/2,v+d,k+d)}o&&(null!==this.Qb||null!==this.zc||null!==l&&0!=(l.oa&512)||null!==l&&l.type===bo&&l.Rw()!==this)?(nw(this,!0),e=[n.shadowOffsetX,n.shadowOffsetY,n.shadowBlur],n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0):nw(this,!1);this.rl(n,i);o&&0!=(this.oa&512)==!0&&(n.shadowOffsetX=e[0],n.shadowOffsetY=e[1],n.shadowBlur=e[2]);p&&o&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0);f?(n.restore(),c&&n.Bf.pop(),ef(i,n)):this instanceof a&&(b=n.Bf.pop());p&&o&&n.Bf.pop();null!==n.YE&&(null===b&&(y===n.mx?(ol(n,1,0,0,1,0,0),e=n.Bf.pop()):e=n.mx,b=e),n.YE(this,b))}}}else if(this instanceof a&&(this.type===eo||this.type===ko))sot(this,n,i);else if(f=this.Pb,0!==f.width&&0!==f.height&&!isNaN(f.x)&&!isNaN(f.y)){if(r&&r.gj&&r.SI(n,this),e=this.transform,y=this.ia,l=this.Ch,l.reset(),null!==y&&(y.Kf()?l.multiply(y.se):null!==y.ia&&l.multiply(y.ia.se)),l.multiply(this.Oc),l=0!=(this.oa&256),this instanceof ot&&lst(this,n),l){if(r&&r.XE&&t.trace("clip"+this.toString()),c=y.Kf()?y.Ja:y.pa,this.Bi?(o=this.Bi,h=o.x,u=o.y,p=o.width,o=o.height):(h=Math.max(f.x,c.x),u=Math.max(f.y,c.y),p=Math.min(f.right,c.right)-h,o=Math.min(f.bottom,c.bottom)-u),h>f.width+f.x||f.x>c.width+c.x||u>f.height+f.y||f.y>c.height+c.y){1!==g&&(n.globalAlpha=nt);return}r&&r.XE&&r.UI(n,h,u,p,o);n.save();n.beginPath();n.rect(h,u,p,o);n.clip()}if(u=i.el,c=!1,this instanceof s){if(c=!0,!this.Wa()){1!==g&&(n.globalAlpha=nt);return}this.qi&&u.drawShadows&&(h=this.Im,n.shadowOffsetX=h.x*i.scale,n.shadowOffsetY=h.y*i.scale,n.shadowColor=this.Hm,n.shadowBlur=this.Gm)}h=!1;this.U&&u.drawShadows&&(h=this.U.qi);null!==this.zc&&(gu(this,n,this.zc,!0,!0),this.zc instanceof ht&&this.zc.type===ku?(n.beginPath(),n.rect(f.x,f.y,f.width,f.height),ou(n,this.zc,!0)):n.fillRect(f.x,f.y,f.width,f.height));e.Et()||n.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);null!==this.Qb&&(o=this.Ja,u=f=0,p=o.width,o=o.height,v=0,this instanceof w&&(o=this.Ta.Tb,f=o.x,u=o.y,p=o.width,o=o.height,v=this.qe),gu(this,n,this.Qb,!0),this.Qb instanceof ht&&this.Qb.type===ku?(n.beginPath(),n.rect(f-v/2,u-v/2,p+v,o+v),ou(n,this.Qb,!0)):n.fillRect(f-v/2,u-v/2,p+v,o+v));r&&r.gj&&r.TI(n,this);h&&(null!==this.Qb||null!==this.zc||null!==y&&0!=(y.oa&512)||null!==y&&(y.type===bo||y.type===wc)&&y.Rw()!==this)?(nw(this,!0),b=[n.shadowOffsetX,n.shadowOffsetY,n.shadowBlur],n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0):nw(this,!1);this.rl(n,i);h&&0!=(this.oa&512)==!0&&(n.shadowOffsetX=b[0],n.shadowOffsetY=b[1],n.shadowBlur=b[2]);c&&h&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0);l?(n.restore(),this instanceof a?ef(i,n,!0):ef(i,n,!1)):e.Et()||(b=1/(e.m11*e.m22-e.m12*e.m21),n.transform(e.m22*b,-e.m12*b,-e.m21*b,e.m11*b,b*(e.m21*e.dy-e.m22*e.dx),b*(e.m12*e.dx-e.m11*e.dy)))}1!==g&&(n.globalAlpha=nt)}};ft.rl=function(){};f.prototype.isContainedBy=f.prototype.rj=function(n){if(n instanceof a)n:{if(this!==n&&null!==n)for(var t=this.ia;null!==t;){if(t===n){n=!0;break n}t=t.ia}n=!1}else n=!1;return n};f.prototype.isVisibleObject=f.prototype.Cl=function(){if(!this.visible)return!1;var n=this.ia;return null!==n?n.Cl():!0};f.prototype.ja=function(n){var r,i,t;if(!0!==pc(this)&&(hf(this,!0),gl(this,!0),r=this.ia,null!==r?n||r.ja():(n=this.h,null!==n&&(this.Wa()&&n.lg.add(this),this instanceof y&&(n.ma.yb||this.Cf(),null!==this.Dd&&dl(this.Dd)),n.ie())),this instanceof a))for(i=null,n=this.va,r=n.length,this.ga===bo&&(i=tc(this,n,r))&&i.ja(!0),n=n.n,i=0;i<r;i++)t=n[i],!0!==pc(t)&&(t.Ea.P()||(t instanceof or||t instanceof a||t instanceof ot||to(t)!==yr)&&t.ja(!0))};f.prototype.na=function(){if(this instanceof s){var n=this.h;null!==n&&!he(this)&&!gc(this)&&this.Wa()&&this.Pb.P()&&n.na(sh(this,this.Pb))}else null!==this.U&&this.U.na()};t.g(f,"segmentOrientation",f.prototype.cu);t.defineProperty(f,{cu:"segmentOrientation"},function(){return this.us},function(n){var i=this.us;i!==n&&(r&&t.Fa(n,c,f,"segmentOrientation"),this.us=n,this.ja(),this.j("segmentOrientation",i,n))});t.g(f,"segmentIndex",f.prototype.Gf);t.defineProperty(f,{Gf:"segmentIndex"},function(){return this.ss},function(n){r&&t.i(n,"number",f,"segmentIndex");n=Math.round(n);var i=this.ss;i!==n&&(this.ss=n,this.ja(),this.j("segmentIndex",i,n))});t.g(f,"segmentFraction",f.prototype.bu);t.defineProperty(f,{bu:"segmentFraction"},function(){return this.rs},function(n){r&&t.i(n,"number",f,"segmentFraction");isNaN(n)?n=0:0>n?n=0:1<n&&(n=1);var i=this.rs;i!==n&&(this.rs=n,this.ja(),this.j("segmentFraction",i,n))});t.g(f,"segmentOffset",f.prototype.sB);t.defineProperty(f,{sB:"segmentOffset"},function(){return this.ts},function(n){var i=this.ts;i.O(n)||(r&&t.l(n,h,f,"segmentOffset"),this.ts=n=n.ba(),this.ja(),this.j("segmentOffset",i,n))});t.g(f,"stretch",f.prototype.ui);t.defineProperty(f,{ui:"stretch"},function(){return this.$h},function(n){var i=this.$h;i!==n&&(r&&t.Fa(n,f,f,"stretch"),this.$h=n,this.ja(),this.j("stretch",i,n))});t.g(f,"name",f.prototype.name);t.defineProperty(f,{name:"name"},function(){return this.ec},function(n){var i=this.ec;i!==n&&(r&&t.i(n,"string",f,"name"),this.ec=n,this.U&&(this.U.Uj=null),this.j("name",i,n))});t.g(f,"opacity",f.prototype.opacity);t.defineProperty(f,{opacity:"opacity"},function(){return this.Qf},function(n){var i=this.Qf;i!==n&&(t.i(n,"number",f,"opacity"),(0>n||1<n)&&t.ha(n,"0 <= val <= 1",f,"opacity"),this.Qf=n,this.j("opacity",i,n),n=this.h,i=this.U,null!==n&&null!==i&&n.na(sh(i,i.pa)))});t.g(f,"visible",f.prototype.visible);t.defineProperty(f,{visible:"visible"},function(){return 0!=(this.oa&1)},function(n){var i=0!=(this.oa&1);i!==n&&(r&&t.i(n,"boolean",f,"visible"),this.oa^=1,this.j("visible",i,n),i=this.ia,null!==i?i.ja():this instanceof s&&(this.h&&this.h.na(),ty(this),this.sh(n)),this.na(),oh(this))});t.g(f,"pickable",f.prototype.kf);t.defineProperty(f,{kf:"pickable"},function(){return 0!=(this.oa&2)},function(n){var i=0!=(this.oa&2);i!==n&&(r&&t.i(n,"boolean",f,"pickable"),this.oa^=2,this.j("pickable",i,n))});t.g(f,"fromLinkableDuplicates",f.prototype.eF);t.defineProperty(f,{eF:"fromLinkableDuplicates"},function(){return 0!=(this.oa&4)},function(n){var i=0!=(this.oa&4);i!==n&&(r&&t.i(n,"boolean",f,"fromLinkableDuplicates"),this.oa^=4,this.j("fromLinkableDuplicates",i,n))});t.g(f,"fromLinkableSelfNode",f.prototype.fF);t.defineProperty(f,{fF:"fromLinkableSelfNode"},function(){return 0!=(this.oa&8)},function(n){var i=0!=(this.oa&8);i!==n&&(r&&t.i(n,"boolean",f,"fromLinkableSelfNode"),this.oa^=8,this.j("fromLinkableSelfNode",i,n))});t.g(f,"toLinkableDuplicates",f.prototype.RG);t.defineProperty(f,{RG:"toLinkableDuplicates"},function(){return 0!=(this.oa&16)},function(n){var i=0!=(this.oa&16);i!==n&&(r&&t.i(n,"boolean",f,"toLinkableDuplicates"),this.oa^=16,this.j("toLinkableDuplicates",i,n))});t.g(f,"toLinkableSelfNode",f.prototype.SG);t.defineProperty(f,{SG:"toLinkableSelfNode"},function(){return 0!=(this.oa&32)},function(n){var i=0!=(this.oa&32);i!==n&&(r&&t.i(n,"boolean",f,"toLinkableSelfNode"),this.oa^=32,this.j("toLinkableSelfNode",i,n))});t.g(f,"isPanelMain",f.prototype.oi);t.defineProperty(f,{oi:"isPanelMain"},function(){return 0!=(this.oa&64)},function(n){var i=0!=(this.oa&64);i!==n&&(r&&t.i(n,"boolean",f,"isPanelMain"),this.oa^=64,this.ja(),this.j("isPanelMain",i,n))});t.g(f,"isActionable",f.prototype.Bt);t.defineProperty(f,{Bt:"isActionable"},function(){return 0!=(this.oa&128)},function(n){var i=0!=(this.oa&128);i!==n&&(r&&t.i(n,"boolean",f,"isActionable"),this.oa^=128,this.j("isActionable",i,n))});t.g(f,"areaBackground",f.prototype.hk);t.defineProperty(f,{hk:"areaBackground"},function(){return this.zc},function(n){var i=this.zc;i!==n&&(r&&null!==n&&t.fp(n,"GraphObject.areaBackground"),n instanceof ht&&n.freeze(),this.zc=n,this.na(),this.j("areaBackground",i,n))});t.g(f,"background",f.prototype.background);t.defineProperty(f,{background:"background"},function(){return this.Qb},function(n){var i=this.Qb;i!==n&&(r&&null!==n&&t.fp(n,"GraphObject.background"),n instanceof ht&&n.freeze(),this.Qb=n,this.na(),this.j("background",i,n))});t.A(f,{U:"part"},function(){if(this instanceof s)return this;if(this.zm)return this.zm;for(var n=this.ia;n;){if(n instanceof s)return this.zm=n;n=n.ia}return null});f.prototype.Il=function(n){this.Ui=n};t.A(f,{ia:"panel"},function(){return this.Ui});t.A(f,{layer:"layer"},function(){var n=this.U;return null!==n?n.layer:null});t.A(f,{h:"diagram"},function(){var n=this.U;return null!==n?n.h:null},{configurable:!0});t.g(f,"position",f.prototype.position);t.defineProperty(f,{position:"position"},function(){return this.Pa},function(n){var i=this.Pa;i.O(n)||(r&&t.l(n,h,f,"position"),n=n.ba(),this.FG(n,i)&&this.j("position",i,n))});f.prototype.FG=function(n){return this.Pa=n,dl(this),wo(this),!0};f.prototype.GG=function(n,t){this.Pa.p(n,t);hw(this,!1);wo(this)};t.A(f,{pa:"actualBounds"},function(){return this.Pb});t.g(f,"scale",f.prototype.scale);t.defineProperty(f,{scale:"scale"},function(){return this.fc},function(n){var i=this.fc;i!==n&&(r&&t.q(n,f,"scale"),0>=n&&t.m("GraphObject.scale must be greater than zero"),this.fc=n,wo(this),this.ja(),this.j("scale",i,n))});t.g(f,"angle",f.prototype.angle);t.defineProperty(f,{angle:"angle"},function(){return this.Nn},function(n){var i=this.Nn;i!==n&&(r&&t.q(n,f,"angle"),n%=360,0>n&&(n+=360),i!==n&&(this.Nn=n,this.ja(),wo(this),this.j("angle",i,n)))});t.g(f,"desiredSize",f.prototype.Ea);t.defineProperty(f,{Ea:"desiredSize"},function(){return this.pf},function(n){var i=this.pf;i.O(n)||(r&&t.l(n,st,f,"desiredSize"),this.pf=n=n.ba(),this.ja(),this instanceof w&&this.df(),this.j("desiredSize",i,n),n=this.U,null!==n&&0!=(this.oa&1024)&&(yv(this,n,"width"),yv(this,n,"height")))});t.g(f,"width",f.prototype.width);t.defineProperty(f,{width:"width"},function(){return this.pf.width},function(n){if(this.pf.width!==n){r&&t.i(n,"number",f,"width");var i=this.pf;this.pf=n=new st(n,this.pf.height).freeze();this.ja();this instanceof w&&this.df();this.j("desiredSize",i,n);i=this.U;null!==i&&0!=(this.oa&1024)&&yv(this,i,"width")}});t.g(f,"height",f.prototype.height);t.defineProperty(f,{height:"height"},function(){return this.pf.height},function(n){if(this.pf.height!==n){r&&t.i(n,"number",f,"height");var i=this.pf;this.pf=n=new st(this.pf.width,n).freeze();this.ja();this instanceof w&&this.df();this.j("desiredSize",i,n);i=this.U;null!==i&&0!=(this.oa&1024)&&yv(this,i,"height")}});t.g(f,"minSize",f.prototype.Yf);t.defineProperty(f,{Yf:"minSize"},function(){return this.Tj},function(n){var i=this.Tj;i.O(n)||(r&&t.l(n,st,f,"minSize"),n=n.copy(),isNaN(n.width)&&(n.width=0),isNaN(n.height)&&(n.height=0),n.freeze(),this.Tj=n,this.ja(),this.j("minSize",i,n))});t.g(f,"maxSize",f.prototype.Oe);t.defineProperty(f,{Oe:"maxSize"},function(){return this.Sj},function(n){var i=this.Sj;i.O(n)||(r&&t.l(n,st,f,"maxSize"),n=n.copy(),isNaN(n.width)&&(n.width=Infinity),isNaN(n.height)&&(n.height=Infinity),n.freeze(),this.Sj=n,this.ja(),this.j("maxSize",i,n))});t.A(f,{Ha:"measuredBounds"},function(){return this.$c});t.A(f,{Ja:"naturalBounds"},function(){return this.nd},{configurable:!0});t.g(f,"margin",f.prototype.margin);t.defineProperty(f,{margin:"margin"},function(){return this.Gr},function(n){"number"==typeof n?n=new ni(n):r&&t.l(n,ni,f,"margin");var i=this.Gr;i.O(n)||(this.Gr=n=n.ba(),this.ja(),this.j("margin",i,n))});t.A(f,{transform:null},function(){return 0!=(this.oa&2048)==!0&&nn(this),this.Oc});t.A(f,{se:null},function(){return 0!=(this.oa&4096)==!0&&nn(this),this.Ch});t.g(f,"alignment",f.prototype.alignment);t.defineProperty(f,{alignment:"alignment"},function(){return this.Ae},function(n){var i=this.Ae;i.O(n)||(r?t.l(n,e,f,"alignment"):n.Me()&&!n.Tc()&&t.m("alignment must be a real Spot or Spot.Default"),this.Ae=n=n.ba(),dl(this),this.j("alignment",i,n))});t.g(f,"column",f.prototype.column);t.defineProperty(f,{column:"column"},function(){return this.Hq},function(n){r&&t.q(n,f,"column");n=Math.round(n);var i=this.Hq;i!==n&&(0>n&&t.ha(n,">= 0",f,"column"),this.Hq=n,this.ja(),this.j("column",i,n))});t.g(f,"columnSpan",f.prototype.yE);t.defineProperty(f,{yE:"columnSpan"},function(){return this.Fj},function(n){r&&t.q(n,f,"columnSpan");n=Math.round(n);var i=this.Fj;i!==n&&(1>n&&t.ha(n,">= 1",f,"columnSpan"),this.Fj=n,this.ja(),this.j("columnSpan",i,n))});t.g(f,"row",f.prototype.wc);t.defineProperty(f,{wc:"row"},function(){return this.os},function(n){r&&t.q(n,f,"row");n=Math.round(n);var i=this.os;i!==n&&(0>n&&t.ha(n,">= 0",f,"row"),this.os=n,this.ja(),this.j("row",i,n))});t.g(f,"rowSpan",f.prototype.rowSpan);t.defineProperty(f,{rowSpan:"rowSpan"},function(){return this.Yj},function(n){r&&t.q(n,f,"rowSpan");n=Math.round(n);var i=this.Yj;i!==n&&(1>n&&t.ha(n,">= 1",f,"rowSpan"),this.Yj=n,this.ja(),this.j("rowSpan",i,n))});t.g(f,"alignmentFocus",f.prototype.ek);t.defineProperty(f,{ek:"alignmentFocus"},function(){return this.Aq},function(n){var i=this.Aq;i.O(n)||(r?t.l(n,e,f,"alignmentFocus"):n.Me()&&!n.Tc()&&t.m("alignmentFocus must be a real Spot or Spot.Default"),this.Aq=n=n.ba(),this.ja(),this.j("alignmentFocus",i,n))});t.g(f,"portId",f.prototype.Ud);t.defineProperty(f,{Ud:"portId"},function(){return this.bs},function(n){var u=this.bs,i,e;u!==n&&(r&&null!==n&&t.i(n,"string",f,"portId"),i=this.U,null===i||i instanceof y||(t.m("portID being set on a Link: "+n),i=null),null!==u&&i&&fht(i,this),this.bs=n,null!==n&&i&&(i.Qh=!0,null===i.Ad&&ttt(i),e=this.Ud,null!==e&&i.Ad.add(e,this)),this.j("portId",u,n))});t.g(f,"toSpot",f.prototype.zb);t.defineProperty(f,{zb:"toSpot"},function(){return null!==this.R?this.R.ei:pi},function(n){null===this.R&&this.Le();var i=this.R.ei;i.O(n)||(r&&t.l(n,e,f,"toSpot"),n=n.ba(),this.R.ei=n,this.j("toSpot",i,n),oh(this))});t.g(f,"toEndSegmentLength",f.prototype.xk);t.defineProperty(f,{xk:"toEndSegmentLength"},function(){return null!==this.R?this.R.bi:10},function(n){null===this.R&&this.Le();var i=this.R.bi;i!==n&&(r&&t.i(n,"number",f,"toEndSegmentLength"),0>n&&t.ha(n,">= 0",f,"toEndSegmentLength"),this.R.bi=n,this.j("toEndSegmentLength",i,n),oh(this))});t.g(f,"toEndSegmentDirection",f.prototype.kq);t.defineProperty(f,{kq:"toEndSegmentDirection"},function(){return null!==this.R?this.R.ai:ea},function(n){null===this.R&&this.Le();var i=this.R.ai;i!==n&&(r&&t.Fa(n,y,f,"toEndSegmentDirection"),this.R.ai=n,this.j("toEndSegmentDirection",i,n),oh(this))});t.g(f,"toShortLength",f.prototype.lq);t.defineProperty(f,{lq:"toShortLength"},function(){return null!==this.R?this.R.di:0},function(n){null===this.R&&this.Le();var i=this.R.di;i!==n&&(r&&t.i(n,"number",f,"toShortLength"),this.R.di=n,this.j("toShortLength",i,n),oh(this))});t.g(f,"toLinkable",f.prototype.GB);t.defineProperty(f,{GB:"toLinkable"},function(){return this.Ns},function(n){var i=this.Ns;i!==n&&(r&&null!==n&&t.i(n,"boolean",f,"toLinkable"),this.Ns=n,this.j("toLinkable",i,n))});t.g(f,"toMaxLinks",f.prototype.TG);t.defineProperty(f,{TG:"toMaxLinks"},function(){return this.Os},function(n){var i=this.Os;i!==n&&(r&&t.q(n,f,"toMaxLinks"),0>n&&t.ha(n,">= 0",f,"toMaxLinks"),this.Os=n,this.j("toMaxLinks",i,n))});t.g(f,"fromSpot",f.prototype.vb);t.defineProperty(f,{vb:"fromSpot"},function(){return null!==this.R?this.R.Ph:pi},function(n){null===this.R&&this.Le();var i=this.R.Ph;i.O(n)||(r&&t.l(n,e,f,"fromSpot"),n=n.ba(),this.R.Ph=n,this.j("fromSpot",i,n),oh(this))});t.g(f,"fromEndSegmentLength",f.prototype.rk);t.defineProperty(f,{rk:"fromEndSegmentLength"},function(){return null!==this.R?this.R.Mh:10},function(n){null===this.R&&this.Le();var i=this.R.Mh;i!==n&&(r&&t.i(n,"number",f,"fromEndSegmentLength"),0>n&&t.ha(n,">= 0",f,"fromEndSegmentLength"),this.R.Mh=n,this.j("fromEndSegmentLength",i,n),oh(this))});t.g(f,"fromEndSegmentDirection",f.prototype.tp);t.defineProperty(f,{tp:"fromEndSegmentDirection"},function(){return null!==this.R?this.R.Lh:ea},function(n){null===this.R&&this.Le();var i=this.R.Lh;i!==n&&(r&&t.Fa(n,y,f,"fromEndSegmentDirection"),this.R.Lh=n,this.j("fromEndSegmentDirection",i,n),oh(this))});t.g(f,"fromShortLength",f.prototype.up);t.defineProperty(f,{up:"fromShortLength"},function(){return null!==this.R?this.R.Oh:0},function(n){null===this.R&&this.Le();var i=this.R.Oh;i!==n&&(r&&t.i(n,"number",f,"fromShortLength"),this.R.Oh=n,this.j("fromShortLength",i,n),oh(this))});t.g(f,"fromLinkable",f.prototype.yA);t.defineProperty(f,{yA:"fromLinkable"},function(){return this.ar},function(n){var i=this.ar;i!==n&&(r&&null!==n&&t.i(n,"boolean",f,"fromLinkable"),this.ar=n,this.j("fromLinkable",i,n))});t.g(f,"fromMaxLinks",f.prototype.gF);t.defineProperty(f,{gF:"fromMaxLinks"},function(){return this.br},function(n){var i=this.br;i!==n&&(r&&t.q(n,f,"fromMaxLinks"),0>n&&t.ha(n,">= 0",f,"fromMaxLinks"),this.br=n,this.j("fromMaxLinks",i,n))});t.g(f,"cursor",f.prototype.cursor);t.defineProperty(f,{cursor:"cursor"},function(){return this.Oq},function(n){var i=this.Oq;i!==n&&(t.i(n,"string",f,"cursor"),this.Oq=n,this.j("cursor",i,n))});t.g(f,"click",f.prototype.click);t.defineProperty(f,{click:"click"},function(){return null!==this.S?this.S.Ai:null},function(n){null===this.S&&sf(this);var i=this.S.Ai;i!==n&&(null!==n&&t.i(n,"function",f,"click"),this.S.Ai=n,this.j("click",i,n))});t.g(f,"doubleClick",f.prototype.dn);t.defineProperty(f,{dn:"doubleClick"},function(){return null!==this.S?this.S.Gi:null},function(n){null===this.S&&sf(this);var i=this.S.Gi;i!==n&&(null!==n&&t.i(n,"function",f,"doubleClick"),this.S.Gi=n,this.j("doubleClick",i,n))});t.g(f,"contextClick",f.prototype.jt);t.defineProperty(f,{jt:"contextClick"},function(){return null!==this.S?this.S.Ci:null},function(n){null===this.S&&sf(this);var i=this.S.Ci;i!==n&&(null!==n&&t.i(n,"function",f,"contextClick"),this.S.Ci=n,this.j("contextClick",i,n))});t.g(f,"mouseEnter",f.prototype.UA);t.defineProperty(f,{UA:"mouseEnter"},function(){return null!==this.S?this.S.Sr:null},function(n){null===this.S&&sf(this);var i=this.S.Sr;i!==n&&(null!==n&&t.i(n,"function",f,"mouseEnter"),this.S.Sr=n,this.j("mouseEnter",i,n))});t.g(f,"mouseLeave",f.prototype.VA);t.defineProperty(f,{VA:"mouseLeave"},function(){return null!==this.S?this.S.Tr:null},function(n){null===this.S&&sf(this);var i=this.S.Tr;i!==n&&(null!==n&&t.i(n,"function",f,"mouseLeave"),this.S.Tr=n,this.j("mouseLeave",i,n))});t.g(f,"mouseOver",f.prototype.Pt);t.defineProperty(f,{Pt:"mouseOver"},function(){return null!==this.S?this.S.Qi:null},function(n){null===this.S&&sf(this);var i=this.S.Qi;i!==n&&(null!==n&&t.i(n,"function",f,"mouseOver"),this.S.Qi=n,this.j("mouseOver",i,n))});t.g(f,"mouseHover",f.prototype.Ot);t.defineProperty(f,{Ot:"mouseHover"},function(){return null!==this.S?this.S.Pi:null},function(n){null===this.S&&sf(this);var i=this.S.Pi;i!==n&&(null!==n&&t.i(n,"function",f,"mouseHover"),this.S.Pi=n,this.j("mouseHover",i,n))});t.g(f,"mouseHold",f.prototype.Nt);t.defineProperty(f,{Nt:"mouseHold"},function(){return null!==this.S?this.S.Oi:null},function(n){null===this.S&&sf(this);var i=this.S.Oi;i!==n&&(null!==n&&t.i(n,"function",f,"mouseHold"),this.S.Oi=n,this.j("mouseHold",i,n))});t.g(f,"mouseDragEnter",f.prototype.$F);t.defineProperty(f,{$F:"mouseDragEnter"},function(){return null!==this.S?this.S.Qr:null},function(n){null===this.S&&sf(this);var i=this.S.Qr;i!==n&&(null!==n&&t.i(n,"function",f,"mouseDragEnter"),this.S.Qr=n,this.j("mouseDragEnter",i,n))});t.g(f,"mouseDragLeave",f.prototype.TA);t.defineProperty(f,{TA:"mouseDragLeave"},function(){return null!==this.S?this.S.Rr:null},function(n){null===this.S&&sf(this);var i=this.S.Rr;i!==n&&(null!==n&&t.i(n,"function",f,"mouseDragLeave"),this.S.Rr=n,this.j("mouseDragLeave",i,n))});t.g(f,"mouseDrop",f.prototype.Mt);t.defineProperty(f,{Mt:"mouseDrop"},function(){return null!==this.S?this.S.Ni:null},function(n){null===this.S&&sf(this);var i=this.S.Ni;i!==n&&(null!==n&&t.i(n,"function",f,"mouseDrop"),this.S.Ni=n,this.j("mouseDrop",i,n))});t.g(f,"actionDown",f.prototype.Tz);t.defineProperty(f,{Tz:"actionDown"},function(){return null!==this.S?this.S.wq:null},function(n){null===this.S&&sf(this);var i=this.S.wq;i!==n&&(null!==n&&t.i(n,"function",f,"actionDown"),this.S.wq=n,this.j("actionDown",i,n))});t.g(f,"actionUp",f.prototype.Vz);t.defineProperty(f,{Vz:"actionUp"},function(){return null!==this.S?this.S.yq:null},function(n){null===this.S&&sf(this);var i=this.S.yq;i!==n&&(null!==n&&t.i(n,"function",f,"actionUp"),this.S.yq=n,this.j("actionUp",i,n))});t.g(f,"actionMove",f.prototype.Uz);t.defineProperty(f,{Uz:"actionMove"},function(){return null!==this.S?this.S.xq:null},function(n){null===this.S&&sf(this);var i=this.S.xq;i!==n&&(null!==n&&t.i(n,"function",f,"actionMove"),this.S.xq=n,this.j("actionMove",i,n))});t.g(f,"actionCancel",f.prototype.Sz);t.defineProperty(f,{Sz:"actionCancel"},function(){return null!==this.S?this.S.vq:null},function(n){null===this.S&&sf(this);var i=this.S.vq;i!==n&&(null!==n&&t.i(n,"function",f,"actionCancel"),this.S.vq=n,this.j("actionCancel",i,n))});t.g(f,"toolTip",f.prototype.mu);t.defineProperty(f,{mu:"toolTip"},function(){return null!==this.S?this.S.$i:null},function(n){null===this.S&&sf(this);var i=this.S.$i;i!==n&&(null!==n&&t.l(n,fi,f,"toolTip"),this.S.$i=n,this.j("toolTip",i,n))});t.g(f,"contextMenu",f.prototype.contextMenu);t.defineProperty(f,{contextMenu:"contextMenu"},function(){return null!==this.S?this.S.Di:null},function(n){null===this.S&&sf(this);var i=this.S.Di;i!==n&&(null!==n&&t.l(n,fi,f,"contextMenu"),this.S.Di=n,this.j("contextMenu",i,n))});f.prototype.bind=f.prototype.bind=function(n){n.vg=this;var i=this.qp();null!==i&&nst(i)&&t.m("Cannot add a Binding to a template that has already been copied: "+n);null===this.Nc&&(this.Nc=new b(ri));this.Nc.add(n)};f.prototype.findTemplateBinder=f.prototype.qp=function(){for(var n=this instanceof a?this:this.ia;null!==n;){if(null!==n.Ul&&n instanceof a)return n;n=n.ia}return null};f.fromSvg=f.fromSVG=function(n){return pvt(n)};f.prototype.setProperties=function(n){t.Gx(this,n)};f.make=as=function(r){var o=arguments,f=null,u=null,e;for("function"==typeof r?u=r:"string"==typeof r&&(e=na.Da(r),"function"==typeof e?(o=Array.prototype.slice.call(arguments),f=e(o)):u=es[r]),null===f&&(void 0===u&&(f=n.$,void 0!==f&&void 0!==f.noop&&t.m("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),t.m("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==u&&u.constructor||t.m("GraphObject.make requires a class function or class name, not: "+r),f=new u),e=1,f instanceof i&&1<o.length&&(u=o[1],"string"==typeof u||u instanceof HTMLDivElement)&&(f.nj=null,tg(f,u),e++);e<o.length;e++)u=o[e],void 0===u?t.m("Undefined value at argument "+e+" for object being constructed by GraphObject.make: "+f):vot(f,u);return f};f.Builders=na=new gt("string","function");na.add("Button",function(){var n=new ht(fo),t,i;return n.addColorStop(0,"white"),n.addColorStop(1,"lightgray"),t=new ht(fo),t.addColorStop(0,"white"),t.addColorStop(1,"dodgerblue"),i=as(a,bo,{Bt:!0},as(w,{name:"ButtonBorder",Eb:"RoundedRectangle",fill:n,stroke:"gray"})),i.UA=function(n,i){var u=i.wa(0),r=i._buttonFillOver;void 0===r&&(r=t);i._buttonFillNormal=u.fill;u.fill=r;r=i._buttonStrokeOver;void 0===r&&(r="blue");i._buttonStrokeNormal=u.stroke;u.stroke=r},i.VA=function(t,i){var u=i.wa(0),r=i._buttonFillNormal;void 0===r&&(r=n);u.fill=r;r=i._buttonStrokeNormal;void 0===r&&(r="gray");u.stroke=r},i});na.add("TreeExpanderButton",function(){var n=as("Button",as(w,{name:"ButtonIcon",Eb:"MinusLine",Ea:u.rq},new ri("figure","isTreeExpanded",function(n,t){var i=null,r=t.ia;return r&&(i=n?r._treeExpandedFigure:r._treeCollapsedFigure),i||(i=n?"MinusLine":"PlusLine"),i}).bB("")),{visible:!1},new ri("visible","isTreeLeaf",function(n){return!n}).bB(""));return n.click=function(n,t){var i=t.U,r;if(i instanceof fi&&(i=i.hi),i instanceof y&&(r=i.h,null!==r)){if(r=r.Ye,i.Uc){if(!r.canCollapseTree(i))return}else if(!r.canExpandTree(i))return;n.Ke=!0;i.Uc?r.collapseTree(i):r.expandTree(i)}},n});na.add("SubGraphExpanderButton",function(){var n=as("Button",as(w,{name:"ButtonIcon",Eb:"MinusLine",Ea:u.rq},new ri("figure","isSubGraphExpanded",function(n,t){var i=null,r=t.ia;return r&&(i=n?r._subGraphExpandedFigure:r._subGraphCollapsedFigure),i||(i=n?"MinusLine":"PlusLine"),i}).bB("")));return n.click=function(n,t){var i=t.U,r;if(i instanceof fi&&(i=i.hi),i instanceof g&&(r=i.h,null!==r)){if(r=r.Ye,i.xe){if(!r.canCollapseSubGraph(i))return}else if(!r.canExpandSubGraph(i))return;n.Ke=!0;i.xe?r.collapseSubGraph(i):r.expandSubGraph(i)}},n});na.add("ContextMenuButton",function(){var t=as("Button"),n;return t.ui=du,n=t.ue("ButtonBorder"),n instanceof w&&(n.Eb="Rectangle",n.G=new e(0,0,2,2),n.H=new e(1,1,-2,-2)),t});f.defineBuilder=function(n,i){t.i(n,"string",f,"defineBuilder:name");t.i(i,"function",f,"defineBuilder:func");var r=n.toLowerCase();""!==n&&"none"!==r&&n!==r||t.m("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+n);f.Builders.add(n,i)};t.ka("Panel",a);t.ii(a);t.Qa(a,f);a.prototype.cloneProtected=function(n){var r,u;if(f.prototype.cloneProtected.call(this,n),n.ga=this.ga,n.Te=this.Te.ba(),n.bh=this.bh,n.Rq=this.Rq.ba(),n.Ac=this.Ac,n.ga===vs){if(n.Gj=this.Gj.ba(),n.Jh=this.Jh,n.Fi=this.Fi,n.am=this.am,n.Ih=this.Ih,n.Hh=this.Hh,n.$l=this.$l,r=[],0<this.pd.length)for(var i=this.pd,e=i.length,t=0;t<e;t++)void 0!==i[t]&&(u=i[t].copy(),u.Il(n),r[t]=u);if(n.pd=r,r=[],0<this.jd.length)for(i=this.jd,e=i.length,t=0;t<e;t++)void 0!==i[t]&&(u=i[t].copy(),u.Il(n),r[t]=u);n.jd=r;n.Em=this.Em;n.Wl=this.Wl;n.aj=this.aj;n.Mi=this.Mi}n.Vo=this.Vo;n.fr.assign(this.fr);n.gr=this.gr.ba();n.Zl=this.Zl;n.Ul=this.Ul;n.vr=this.vr;n.Li=this.Li;n.ng=this.ng;n.xo=this.xo;n.bj.assign(this.bj);n.Qh=this.Qh;this.ps&&(n.ps=this.ps);this._buttonFillNormal&&(n._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(n._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(n._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(n._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&(n._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(n._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(n._subGraphExpandedFigure=this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(n._subGraphCollapsedFigure=this._subGraphCollapsedFigure)};a.prototype.ji=function(n){f.prototype.ji.call(this,n);n.va=this.va;for(var t=n.va.k;t.next();)t.value.Ui=n};a.prototype.copy=function(){var e=f.prototype.copy.call(this),r,h,u,t,i,n,o,s;if(e instanceof a){if(r=this.va,0<r.length)for(h=r.length,u=0;u<h;u++)t=r.n[u].copy(),i=e,t.Il(i),t.zm=null,n=i.va,o=n.count,n.Pd(o,t),n=i.U,null!==n&&(n.Uj=null,null!==t.Ud&&n instanceof y&&(n.Qh=!0),s=i.h,null!==s&&s.ma.yb||n.ed(vr,"elements",i,null,t,null,o));return e}return null};a.prototype.toString=function(){return"Panel("+this.type+")#"+t.ud(this)};a.Position=ta=t.w(a,"Position",0);a.Horizontal=t.w(a,"Horizontal",1);a.Vertical=pot=t.w(a,"Vertical",2);a.Spot=wc=t.w(a,"Spot",3);a.Auto=bo=t.w(a,"Auto",4);a.Table=vs=t.w(a,"Table",5);a.Viewbox=t.w(a,"Viewbox",6);a.TableRow=eo=t.w(a,"TableRow",7);a.TableColumn=ko=t.w(a,"TableColumn",8);a.Link=go=t.w(a,"Link",9);a.Grid=bc=t.w(a,"Grid",10);t.g(a,"type",a.prototype.type);t.defineProperty(a,{type:"type"},function(){return this.ga},function(n){var i=this.ga;i!==n&&(r&&t.Fa(n,a,a,"type"),i!==eo&&i!==ko||t.m("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+n),this.ga=n,this.ga===bc?this.bh=!0:this.ga===vs&&yot(this),this.ja(),this.j("type",i,n))});t.A(a,{elements:"elements"},function(){return this.va.k});t.A(a,{Ja:"naturalBounds"},function(){return this.nd});t.g(a,"padding",a.prototype.padding);t.defineProperty(a,{padding:"padding"},function(){return this.Te},function(n){"number"==typeof n?(0>n&&t.ha(n,">= 0",a,"padding"),n=new ni(n)):(t.l(n,ni,a,"padding"),0>n.left&&t.ha(n.left,">= 0",a,"padding:val.left"),0>n.right&&t.ha(n.right,">= 0",a,"padding:val.right"),0>n.top&&t.ha(n.top,">= 0",a,"padding:val.top"),0>n.bottom&&t.ha(n.bottom,">= 0",a,"padding:val.bottom"));var i=this.Te;i.O(n)||(this.Te=n=n.ba(),this.ja(),this.j("padding",i,n))});t.g(a,"defaultAlignment",a.prototype.lk);t.defineProperty(a,{lk:"defaultAlignment"},function(){return this.Rq},function(n){var i=this.Rq;i.O(n)||(r&&t.l(n,e,a,"defaultAlignment"),this.Rq=n=n.ba(),this.ja(),this.j("defaultAlignment",i,n))});t.g(a,"defaultStretch",a.prototype.mA);t.defineProperty(a,{mA:"defaultStretch"},function(){return this.Ac},function(n){var i=this.Ac;i!==n&&(t.Fa(n,f,a,"defaultStretch"),this.Ac=n,this.ja(),this.j("defaultStretch",i,n))});t.g(a,"defaultSeparatorPadding",a.prototype.KI);t.defineProperty(a,{KI:"defaultSeparatorPadding"},function(){return void 0===this.Gj?u.tq:this.Gj},function(n){if(void 0!==this.Gj){"number"==typeof n?n=new ni(n):r&&t.l(n,ni,a,"defaultSeparatorPadding");var i=this.Gj;i.O(n)||(this.Gj=n=n.ba(),this.j("defaultSeparatorPadding",i,n))}});t.g(a,"defaultRowSeparatorStroke",a.prototype.II);t.defineProperty(a,{II:"defaultRowSeparatorStroke"},function(){return void 0===this.Fi?null:this.Fi},function(n){var t=this.Fi;t!==n&&(null===n||"string"==typeof n||n instanceof ht)&&(n instanceof ht&&n.freeze(),this.Fi=n,this.j("defaultRowSeparatorStroke",t,n))});t.g(a,"defaultRowSeparatorStrokeWidth",a.prototype.JI);t.defineProperty(a,{JI:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.Jh?1:this.Jh},function(n){if(void 0!==this.Jh){var t=this.Jh;t!==n&&(this.Jh=n,this.j("defaultRowSeparatorStrokeWidth",t,n))}});t.g(a,"defaultRowSeparatorDashArray",a.prototype.HI);t.defineProperty(a,{HI:"defaultRowSeparatorDashArray"},function(){return void 0===this.am?null:this.am},function(n){if(void 0!==this.am){var i=this.am;i!==n&&(Array.isArray(n)||t.jc(n,"Array",a,"defaultRowSeparatorDashArray:val"),this.am=n,this.j("defaultRowSeparatorDashArray",i,n))}});t.g(a,"defaultColumnSeparatorStroke",a.prototype.CI);t.defineProperty(a,{CI:"defaultColumnSeparatorStroke"},function(){return void 0===this.Hh?null:this.Hh},function(n){if(void 0!==this.Hh){var t=this.Hh;t!==n&&(null===n||"string"==typeof n||n instanceof ht)&&(n instanceof ht&&n.freeze(),this.Hh=n,this.j("defaultColumnSeparatorStroke",t,n))}});t.g(a,"defaultColumnSeparatorStrokeWidth",a.prototype.DI);t.defineProperty(a,{DI:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.Ih?1:this.Ih},function(n){if(void 0!==this.Ih){var t=this.Ih;t!==n&&(this.Ih=n,this.j("defaultColumnSeparatorStrokeWidth",t,n))}});t.g(a,"defaultColumnSeparatorDashArray",a.prototype.BI);t.defineProperty(a,{BI:"defaultColumnSeparatorDashArray"},function(){return void 0===this.$l?null:this.$l},function(n){if(void 0!==this.$l){var i=this.$l;i!==n&&(Array.isArray(n)||t.jc(n,"Array",a,"defaultColumnSeparatorDashArray:val"),this.$l=n,this.j("defaultColumnSeparatorDashArray",i,n))}});t.g(a,"viewboxStretch",a.prototype.yK);t.defineProperty(a,{yK:"viewboxStretch"},function(){return this.Vo},function(n){var i=this.Vo;i!==n&&(t.Fa(n,f,a,"viewboxStretch"),this.Vo=n,this.j("viewboxStretch",i,n))});t.g(a,"gridCellSize",a.prototype.vt);t.defineProperty(a,{vt:"gridCellSize"},function(){return this.fr},function(n){var i=this.fr;i.O(n)||(t.l(n,st,a,"gridCellSize"),n.P()&&0!==n.width&&0!==n.height||t.m("Invalid Panel.gridCellSize: "+n),this.fr=n.ba(),null!==this.h&&this===this.h.xp&&ls(this.h),this.na(),this.j("gridCellSize",i,n))});t.g(a,"gridOrigin",a.prototype.BA);t.defineProperty(a,{BA:"gridOrigin"},function(){return this.gr},function(n){var i=this.gr;i.O(n)||(t.l(n,h,a,"gridOrigin"),n.P()||t.m("Invalid Panel.gridOrigin: "+n),this.gr=n.ba(),this.h&&ls(this.h),this.na(),this.j("gridOrigin",i,n))});a.prototype.rl=function(n,i){var a,h,y,s,f,u,nt,e;if(this.ga===bc){a=this.sk()*i.scale;0>=a&&(a=1);var l=this.vt,o=l.width,l=l.height,v=this.Ja,b=v.width,v=v.height,tt=Math.ceil(b/o),it=Math.ceil(v/l),p=this.BA;n.save();n.beginPath();n.rect(0,0,b,v);n.clip();for(var rt=[],g=this.va.n,k=this.va.length,w=0;w<k;w++)if(h=[],rt.push(h),y=g[w],y.visible)for(y=un(y.Eb),s=w+1;s<k;s++)f=g[s],f.visible&&un(f.Eb)===y&&(f=f.interval,2<=f&&h.push(f));for(g=this.va.length,k=0;k<g;k++)if(u=this.va.n[k],u.visible){var w=rt[k],h=u.interval,y=!1,d=u.Mx;if(null!==d&&(nt=y=!0,void 0!==n.setLineDash?(n.setLineDash(d),n.lineDashOffset=u.qd):void 0!==n.webkitLineDash?(n.webkitLineDash=d,n.webkitLineDashOffset=u.qd):void 0!==n.mozDash?(n.mozDash=d,n.mozDashOffset=u.qd):nt=!1),"LineV"===u.Eb){for(n.lineWidth=u.lb,gu(this,n,u.stroke,!1),n.beginPath(),f=s=Math.floor(-p.x/o);f<=s+tt;f++)if(e=f*o+p.x,0<=e&&e<b&&iw(f,h,w)&&(y&&!nt?kl(n,e,0,e,v,d,u.qd):(n.moveTo(e,0),n.lineTo(e,v)),2>o*h*a))break;n.stroke()}else if("LineH"===u.Eb){for(n.lineWidth=u.lb,gu(this,n,u.stroke,!1),n.beginPath(),f=s=Math.floor(-p.y/l);f<=s+it&&!(e=f*l+p.y,0<=e&&e<=v&&iw(f,h,w)&&(y&&!nt?kl(n,0,e,b,e,d,u.qd):(n.moveTo(0,e),n.lineTo(b,e)),2>l*h*a));f++);n.stroke()}else if("BarV"===u.Eb)for(gu(this,n,u.fill,!0),u=u.width,isNaN(u)&&(u=o),f=s=Math.floor(-p.x/o);f<=s+tt&&!(e=f*o+p.x,0<=e&&e<b&&iw(f,h,w)&&(n.fillRect(e,0,u,v),2>o*h*a));f++);else if("BarH"===u.Eb)for(gu(this,n,u.fill,!0),u=u.height,isNaN(u)&&(u=l),f=s=Math.floor(-p.y/l);f<=s+it&&!(e=f*l+p.y,0<=e&&e<=v&&iw(f,h,w)&&(n.fillRect(0,e,b,u),2>l*h*a));f++);y&&(void 0!==n.setLineDash?(n.setLineDash(t.xi),n.lineDashOffset=0):void 0!==n.webkitLineDash?(n.webkitLineDash=t.xi,n.webkitLineDashOffset=0):void 0!==n.mozDash&&(n.mozDash=null,n.mozDashOffset=0))}n.restore();ef(i,n,!1)}else{for(this.ga===vs&&(n.lineCap="butt",tw(this,n,!0,this.pd,!0),tw(this,n,!1,this.jd,!0),wot(this,n,!0,this.pd),wot(this,n,!1,this.jd),tw(this,n,!0,this.pd,!1),tw(this,n,!1,this.jd,!1)),a=this.va.length,o=0;o<a;o++)this.va.n[o].$e(n,i);r&&r.WI&&this instanceof c&&r.VI(n,i,this)}};a.prototype.wp=function(n,i,r,f,e){var p=this.Kf(),o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),c=o.m22*s,a=-o.m12*s,h=-o.m21*s,v=o.m11*s,l=s*(o.m21*o.dy-o.m22*o.dx),y=s*(o.m12*o.dx-o.m11*o.dy);if(null!==this.hk)return o=this.pa,u.yl(o.left,o.top,o.right,o.bottom,n,i,r,f,e);if(null!==this.background)p=n*c+i*h+l,s=n*a+i*v+y,n=r*c+f*h+l,r=r*a+f*v+y,e.p(0,0),f=this.Ja,r=u.yl(0,0,f.width,f.height,p,s,n,r,e),e.transform(o);else{for(p||(c=1,h=a=0,v=1,y=l=0),s=n*c+i*h+l,n=n*a+i*v+y,c=r*c+f*h+l,f=r*a+f*v+y,e.p(c,f),a=(c-s)*(c-s)+(f-n)*(f-n),r=!1,v=this.va.n,y=v.length,h=t.N(),l=0;l<y;l++)i=v[l],i.visible&&i.wp(s,n,c,f,h)&&(r=!0,i=(s-h.x)*(s-h.x)+(n-h.y)*(n-h.y),i<a&&(a=i,e.set(h)));t.B(h);p&&e.transform(o)}return r};a.prototype.Kt=function(n,i,r,u){var s=this.bj,ei,ir,su,hu,vt,rt,go,wf,bt,ft,ns,fs,et,es,ls,yi,nt,st,se,li,le,or,sr,hr,ki,di,ae,ve,e,pe,f,uf,ke,de,ge,v,o,h,c,gi,nr,no,tr,ri,ro,it,ut,lt,cf,co,at,ru,uu,l,ih,eu,ui,ou,po,yf,wo,kr,lc,ac,rh,pf;if(s.width=0,s.height=0,ei=this.Ea,ir=this.Yf,void 0===r&&(r=ir.width,u=ir.height),r=Math.max(r,ir.width),u=Math.max(u,ir.height),su=this.Oe,isNaN(ei.width)||(n=Math.min(ei.width,su.width)),isNaN(ei.height)||(i=Math.min(ei.height,su.height)),n=Math.max(r,n),i=Math.max(u,i),hu=this.padding,n=Math.max(n-hu.left-hu.right,0),i=Math.max(i-hu.top-hu.bottom,0),vt=this.va,rt=vt.length,0!==rt){go=this.ga.ec;switch(go){case"Position":var vc=n,yc=i,pc=r,wc=u;for(s.x=0,s.y=0,s.width=0,wf=s.height=0;wf<rt;wf++)if(bt=vt.n[wf],bt.visible||bt===this.Zb){var bf=bt.margin,bc=bf.right+bf.left,dc=bf.top+bf.bottom;bi(bt,vc,yc,pc,wc);var uh=bt.Ha,gc=Math.max(uh.width+bc,0),nl=Math.max(uh.height+dc,0),kf=bt.position.x,df=bt.position.y;if(isFinite(kf)||(kf=0),isFinite(df)||(df=0),bt instanceof w&&bt.JA)var fh=bt.lb/2,kf=kf-fh,df=df-fh;tf(s,kf,df,gc,nl)}break;case"Vertical":for(var gf=n,oh=r,ne=t.Hb(),rr=0;rr<rt;rr++)if(ft=vt.n[rr],ft.visible||ft===this.Zb)if(ns=to(ft),ns!==yr&&ns!==of)ne.push(ft);else{var oi=ft.margin,ts=oi.right+oi.left,is=oi.top+oi.bottom;bi(ft,gf,Infinity,oh,0);var cu=ft.Ha,rs=Math.max(cu.width+ts,0),us=Math.max(cu.height+is,0);s.width=Math.max(s.width,rs);s.height+=us}if(fs=ne.length,0!==fs){for(this.Ea.width?gf=Math.min(this.Ea.width,this.Oe.width):0!==s.width&&(gf=Math.min(s.width,this.Oe.width)),rr=0;rr<fs;rr++)(ft=ne[rr],ft.visible||ft===this.Zb)&&(oi=ft.margin,ts=oi.right+oi.left,is=oi.top+oi.bottom,bi(ft,gf,Infinity,oh,0),cu=ft.Ha,rs=Math.max(cu.width+ts,0),us=Math.max(cu.height+is,0),s.width=Math.max(s.width,rs),s.height+=us);t.Ca(ne)}break;case"Horizontal":for(var te=i,sh=u,re=t.Hb(),ur=0;ur<rt;ur++)if(et=vt.n[ur],et.visible||et===this.Zb)if(es=to(et),es!==yr&&es!==du)re.push(et);else{var hi=et.margin,os=hi.right+hi.left,ss=hi.top+hi.bottom;bi(et,Infinity,te,0,sh);var lu=et.Ha,hs=Math.max(lu.width+os,0),cs=Math.max(lu.height+ss,0);s.width+=hs;s.height=Math.max(s.height,cs)}if(ls=re.length,0!==ls){for(this.Ea.height?te=Math.min(this.Ea.height,this.Oe.height):0!==s.height&&(te=Math.min(s.height,this.Oe.height)),ur=0;ur<ls;ur++)(et=re[ur],et.visible||et===this.Zb)&&(hi=et.margin,os=hi.right+hi.left,ss=hi.top+hi.bottom,bi(et,Infinity,te,0,sh),lu=et.Ha,hs=Math.max(lu.width+os,0),cs=Math.max(lu.height+ss,0),s.width+=hs,s.height=Math.max(s.height,cs));t.Ca(re)}break;case"Spot":n:{var ue=n,fe=i,tl=r,il=u,ci=tc(this,vt,rt),y=ci.margin,ee,oe,hh=y.right+y.left,ch=y.top+y.bottom;bi(ci,ue,fe,tl,il);var ot=ci.Ha,au=ot.width,vu=ot.height,dr=Math.max(au+hh,0),gr=Math.max(vu+ch,0);for(s.x=-y.left,s.y=-y.top,s.width=dr,s.height=gr,yi=0;yi<rt;yi++)if(nt=vt.n[yi],nt!==ci&&(nt.visible||nt===this.Zb)){y=nt.margin;ee=y.right+y.left;oe=y.top+y.bottom;bi(nt,ue,fe,0,0);var ot=nt.Ha,dr=Math.max(ot.width+ee,0),gr=Math.max(ot.height+oe,0),tt=nt.alignment;tt.Tc()&&(tt=this.lk);tt.Cd()||(tt=si);st=nt.ek;st.Tc()&&(st=si);tf(s,tt.x*au+tt.offsetX-(st.x*ot.width-st.offsetX)-y.left,tt.y*vu+tt.offsetY-(st.y*ot.height-st.offsetY)-y.top,dr,gr)}se=ci.ui;se===be&&(se=to(ci));switch(se){case yr:break n;case cr:if(!isFinite(ue)&&!isFinite(fe))break n;break;case du:if(!isFinite(ue))break n;break;case of:if(!isFinite(fe))break n}for(ot=ci.Ha,au=ot.width,vu=ot.height,dr=Math.max(au+hh,0),gr=Math.max(vu+ch,0),y=ci.margin,s.x=-y.left,s.y=-y.top,s.width=dr,s.height=gr,yi=0;yi<rt;yi++)nt=vt.n[yi],nt!==ci&&(nt.visible||nt===this.Zb)&&(y=nt.margin,ee=y.right+y.left,oe=y.top+y.bottom,ot=nt.Ha,dr=Math.max(ot.width+ee,0),gr=Math.max(ot.height+oe,0),tt=nt.alignment,tt.Tc()&&(tt=this.lk),tt.Cd()||(tt=si),st=nt.ek,st.Tc()&&(st=si),tf(s,tt.x*au+tt.offsetX-(st.x*ot.width-st.offsetX)-y.left,tt.y*vu+tt.offsetY-(st.y*ot.height-st.offsetY)-y.top,dr,gr))}break;case"Auto":var fr=n,er=i,he=r,ce=u,b=tc(this,vt,rt),pi=b.margin,lh=pi.right+pi.left,ah=pi.top+pi.bottom;bi(b,fr,er,he,ce);var yu=b.Ha,pu=Math.max(yu.width+lh,0),wu=Math.max(yu.height+ah,0),wi=en(b),rl=wi.x*pu+wi.offsetX,ul=wi.y*wu+wi.offsetY,wi=on(b),fl=wi.x*pu+wi.offsetX,el=wi.y*wu+wi.offsetY,vh=fr,yh=er;for(isFinite(fr)&&(vh=Math.abs(rl-fl)),isFinite(er)&&(yh=Math.abs(ul-el)),li=t.Ml(),li.p(0,0),le=0;le<rt;le++)if(or=vt.n[le],or!==b&&(or.visible||or===this.Zb)){var pi=or.margin,ol=pi.right+pi.left,sl=pi.top+pi.bottom;bi(or,vh,yh,0,0);yu=or.Ha;pu=Math.max(yu.width+ol,0);wu=Math.max(yu.height+sl,0);li.p(Math.max(pu,li.width),Math.max(wu,li.height))}if(1===rt)s.width=pu,s.height=wu,t.qk(li);else{sr=en(b);hr=on(b);hr.x!==sr.x&&hr.y!==sr.y&&(ki=li.width/Math.abs(hr.x-sr.x),di=li.height/Math.abs(hr.y-sr.y));t.qk(li);ae=0;b instanceof w&&(ae=b.lb*b.scale,est(b)===ar&&(ki=Math.max(ki,di),di=Math.max(ki,di)));ki+=Math.abs(sr.offsetX)+Math.abs(hr.offsetX)+ae;di+=Math.abs(sr.offsetY)+Math.abs(hr.offsetY)+ae;ve=b.ui;ve===be&&(ve=to(b));switch(ve){case yr:ce=he=0;break;case cr:isFinite(fr)&&(ki=fr);isFinite(er)&&(di=er);break;case du:isFinite(fr)&&(ki=fr);ce=0;break;case of:he=0;isFinite(er)&&(di=er)}b instanceof w&&!b.Ea.P()&&(b.lh?b.Lk=null:b.Ta=null);pv(b);bi(b,ki,di,he,ce);s.width=b.Ha.width+lh;s.height=b.Ha.height+ah}break;case"Table":for(var bu=n,ku=i,d=rt,hl=r,cl=u,gu=t.Hb(),ye=t.Hb(),o=0;o<d;o++)if(e=vt.n[o],e instanceof a&&(e.type===eo||e.type===ko)&&e.visible){ye.push(e);for(var ph=e.va,ll=ph.length,ht=0;ht<ll;ht++)pe=ph.n[ht],e.type===eo?pe.wc=e.wc:e.type===ko&&(pe.column=e.column),gu.push(pe)}else gu.push(e);for(var d=gu.length,k=[],o=0;o<d;o++)e=gu[o],hf(e,!0),gl(e,!0),k[e.wc]||(k[e.wc]=[]),k[e.wc][e.column]||(k[e.wc][e.column]=[]),k[e.wc][e.column].push(e);t.Ca(gu);for(var as=t.Hb(),we=t.Hb(),nf=t.Hb(),ti={count:0},ii={count:0},yt=bu,pt=ku,rf=this.pd,d=rf.length,o=0;o<d;o++)f=rf[o],void 0!==f&&ie(f,0);for(rf=this.jd,d=rf.length,o=0;o<d;o++)f=rf[o],void 0!==f&&ie(f,0);for(var vs=k.length,uf=0,o=0;o<vs;o++)k[o]&&(uf=Math.max(uf,k[o].length));for(var al=Math.min(this.aj,vs-1),vl=Math.min(this.Mi,uf-1),ct,vs=k.length,o=al;o<vs;o++)if(k[o])for(uf=k[o].length,h=this.we(o),ie(h,0),ht=vl;ht<uf;ht++)if(k[o][ht]){c=this.ve(ht);void 0===as[ht]&&(ie(c,0),as[ht]=!0);for(var wh=k[o][ht],yl=wh.length,ys=0;ys<yl;ys++)if(e=wh[ys],e.visible||e===this.Zb){ke=1<e.Yj||1<e.Fj;ke&&we.push(e);var g=e.margin,nu=g.right+g.left,tu=g.top+g.bottom,kt=wv(e,h,c),bh=e.Ea,kh=!isNaN(bh.width),dh=!isNaN(bh.height),pl=kh&&dh;ke||kt===yr||pl||(void 0===ti[ht]&&(ti[ht]=-1,ti.count++),void 0===ii[o]&&(ii[o]=-1,ii.count++),nf.push(e));bi(e,Infinity,Infinity,0,0);var lr=e.Ha,vr=Math.max(lr.width+nu,0),pr=Math.max(lr.height+tu,0);1===e.Yj&&(dh||kt===yr||kt===du)&&(f=this.we(o),ct=Math.max(pr-f.lc,0),ct>pt&&(ct=pt),ie(f,f.lc+ct),pt=Math.max(pt-ct,0));1===e.Fj&&(kh||kt===yr||kt===of)&&(f=this.ve(ht),ct=Math.max(vr-f.lc,0),ct>yt&&(ct=yt),ie(f,f.lc+ct),yt=Math.max(yt-ct,0));ke&&pv(e)}}t.Ca(as);for(var wr=0,br=0,d=this.Aw,o=0;o<d;o++)void 0!==this.jd[o]&&(wr+=this.ve(o).Ob);for(d=this.Dx,o=0;o<d;o++)void 0!==this.pd[o]&&(br+=this.we(o).Ob);for(var yt=Math.max(bu-wr,0),wl=pt=Math.max(ku-br,0),bl=yt,d=nf.length,o=0;o<d;o++){var e=nf[o],h=this.we(e.wc),c=this.ve(e.column),gh=e.Ha,g=e.margin,nu=g.right+g.left,tu=g.top+g.bottom;ti[e.column]=0===c.lc?Math.max(gh.width+nu,ti[e.column]):null;ii[e.wc]=0===h.lc?Math.max(gh.height+tu,ii[e.wc]):null}de=0;ge=0;for(o in ii)"count"!==o&&(de+=ii[o]);for(o in ti)"count"!==o&&(ge+=ti[o]);for(v=t.Ml(),o=0;o<d;o++)if(e=nf[o],e.visible||e===this.Zb){h=this.we(e.wc);c=this.ve(e.column);isFinite(c.width)?gi=c.width:(gi=isFinite(yt)&&null!==ti[e.column]?0===ge?c.lc+yt:ti[e.column]/ge*bl:null!==ti[e.column]?yt:c.lc||yt,gi=Math.max(0,gi-oo(c)));isFinite(h.height)?nr=h.height:(nr=isFinite(pt)&&null!==ii[e.wc]?0===de?h.lc+pt:ii[e.wc]/de*wl:null!==ii[e.wc]?pt:h.lc||pt,nr=Math.max(0,nr-oo(h)));v.p(Math.max(c.si,Math.min(gi,c.Ef)),Math.max(h.si,Math.min(nr,h.Ef)));kt=wv(e,h,c);switch(kt){case du:v.height=Infinity;break;case of:v.width=Infinity}g=e.margin;nu=g.right+g.left;tu=g.top+g.bottom;pv(e);bi(e,v.width,v.height,c.si,h.si);lr=e.Ha;vr=Math.max(lr.width+nu,0);pr=Math.max(lr.height+tu,0);isFinite(yt)&&(vr=Math.min(vr,v.width));isFinite(pt)&&(pr=Math.min(pr,v.height));no=h.lc;ie(h,Math.max(h.lc,pr));ct=h.lc-no;pt=Math.max(pt-ct,0);no=c.lc;ie(c,Math.max(c.lc,vr));ct=c.lc-no;yt=Math.max(yt-ct,0)}t.Ca(nf);for(var iu=t.Ml(),d=we.length,o=0;o<d;o++)if(e=we[o],e.visible||e===this.Zb){h=this.we(e.wc);c=this.ve(e.column);v.p(Math.max(c.si,Math.min(bu,c.Ef)),Math.max(h.si,Math.min(ku,h.Ef)));kt=wv(e,h,c);switch(kt){case cr:0!==c.lc&&(v.width=Math.min(v.width,c.lc));0!==h.lc&&(v.height=Math.min(v.height,h.lc));break;case du:0!==c.lc&&(v.width=Math.min(v.width,c.lc));break;case of:0!==h.lc&&(v.height=Math.min(v.height,h.lc))}for(isFinite(c.width)&&(v.width=c.width),isFinite(h.height)&&(v.height=h.height),iu.p(0,0),it=1;it<e.Yj&&!(e.wc+it>=this.Dx);it++)f=this.we(e.wc+it),iu.height+=Math.max(f.si,isNaN(f.Rf)?f.Ef:Math.min(f.Rf,f.Ef));for(it=1;it<e.Fj&&!(e.column+it>=this.Aw);it++)f=this.ve(e.column+it),iu.width+=Math.max(f.si,isNaN(f.Rf)?f.Ef:Math.min(f.Rf,f.Ef));v.width+=iu.width;v.height+=iu.height;g=e.margin;nu=g.right+g.left;tu=g.top+g.bottom;bi(e,v.width,v.height,hl,cl);for(var lr=e.Ha,vr=Math.max(lr.width+nu,0),pr=Math.max(lr.height+tu,0),ps=0,it=0;it<e.Yj;it++)f=this.we(e.wc+it),ps+=f.total||0;if(ps<pr)for(tr=pr-ps;0<tr;){if(ri=f.Ob||0,isNaN(f.height)&&f.Ef>ri&&(ie(f,Math.min(f.Ef,ri+tr)),f.Ob!==ri&&(tr-=f.Ob-ri)),-1==f.index-1)break;f=this.we(f.index-1)}for(ro=0,it=0;it<e.Fj;it++)f=this.ve(e.column+it),ro+=f.total||0;if(ro<vr)for(tr=vr-ro;0<tr;){if(ri=f.Ob||0,isNaN(f.width)&&f.Ef>ri&&(ie(f,Math.min(f.Ef,ri+tr)),f.Ob!==ri&&(tr-=f.Ob-ri)),-1==f.index-1)break;f=this.ve(f.index-1)}}t.Ca(we);t.qk(iu);t.qk(v);for(var ws=0,bs=0,kt=to(this),uo=this.Ea,nc=this.Oe,ff=br=wr=0,ef=0,d=this.Aw,o=0;o<d;o++)void 0!==this.jd[o]&&(f=this.ve(o),isFinite(f.width)?(ff+=f.width,ff+=oo(f)):uw(f)===kc?(ff+=f.Ob,ff+=oo(f)):0!==f.Ob&&(wr+=f.Ob,wr+=oo(f)));var ws=isFinite(uo.width)?Math.min(uo.width,nc.width):kt!==yr&&isFinite(bu)?bu:wr,ws=Math.max(ws,this.Yf.width),ws=Math.max(ws-ff,0),ks=Math.max(ws/wr,1);for(isFinite(ks)||(ks=1),o=0;o<d;o++)void 0!==this.jd[o]&&(f=this.ve(o),isFinite(f.width)||uw(f)===kc||ie(f,f.Ob*ks),f.Pa=s.width,0!==f.Ob&&(s.width+=f.Ob,s.width+=oo(f)));for(d=this.Dx,o=0;o<d;o++)void 0!==this.pd[o]&&(f=this.we(o),isFinite(f.height)?(ef+=f.height,ef+=oo(f)):uw(f)===kc?(ef+=f.Ob,ef+=oo(f)):0!==f.Ob&&(br+=f.Ob,br+=oo(f)));var bs=isFinite(uo.height)?Math.min(uo.height,nc.height):kt!==yr&&isFinite(ku)?ku:br,bs=Math.max(bs,this.Yf.height),bs=Math.max(bs-ef,0),ds=Math.max(bs/br,1);for(isFinite(ds)||(ds=1),o=0;o<d;o++)void 0!==this.pd[o]&&(f=this.we(o),isFinite(f.height)||uw(f)===kc||ie(f,f.Ob*ds),f.Pa=s.height,0!==f.Ob&&(s.height+=f.Ob,s.height+=oo(f)));for(d=ye.length,o=0;o<d;o++)ut=ye[o],ut.type===eo?(gi=s.width,f=this.we(ut.wc),nr=f.lc):(f=this.ve(ut.column),gi=f.lc,nr=s.height),ut.$c.p(0,0,gi,nr),hf(ut,!1),k[ut.wc]||(k[ut.wc]=[]),k[ut.wc][ut.column]||(k[ut.wc][ut.column]=[]),k[ut.wc][ut.column].push(ut);t.Ca(ye);this.ps=k;break;case"Viewbox":var fo=n,so=i,ic=r,rc=u;1<rt&&t.m("Viewbox Panel cannot contain more than one GraphObject.");lt=vt.n[0];lt.fc=1;pv(lt);bi(lt,Infinity,Infinity,ic,rc);var sf=lt.Ha,ho=lt.margin,uc=ho.right+ho.left,fc=ho.top+ho.bottom;if(isFinite(fo)||isFinite(so)){var kl=lt.scale,ec=sf.width,oc=sf.height,sc=Math.max(fo-uc,0),hc=Math.max(so-fc,0);lt.fc=this.Vo===ar?lt.fc*Math.min(sc/ec,hc/oc):lt.fc*Math.max(sc/ec,hc/oc);kl!==lt.scale&&(hf(lt,!0),bi(lt,Infinity,Infinity,ic,rc))}sf=lt.Ha;s.width=isFinite(fo)?fo:Math.max(sf.width+uc,0);s.height=isFinite(so)?so:Math.max(sf.height+fc,0);break;case"Link":if(cf=this instanceof fi?this.hi:this,0===rt)co=this.nd,th(co,0,0),at=this.Ha,at.p(0,0,0,0);else{var lo=this.er(),dt=this.Ij(),wt=this.bj;wt.assign(dt);wt.x=0;wt.y=0;uu=this.ez();ru=void 0!==this.ra?this.ra:uu.count;this.hh.p(dt.x,dt.y);this.zi.clear();null!==lo&&(fst(lo,dt.width,dt.height),at=lo.Ha,wt.yj(at),this.zi.add(at));for(var fu=t.Ah(),lf=t.N(),ai=t.N(),gs=0;gs<rt;gs++)if(l=vt.n[gs],l!==lo)if(l.oi&&l instanceof w)fst(l,dt.width,dt.height),at=l.Ha,wt.yj(at),this.zi.add(at);else if(2>ru)bi(l,Infinity,Infinity),at=l.Ha,wt.yj(at),this.zi.add(at);else{var vi=l.Gf,cc=l.bu,nh=l.ek;nh.Me()&&(nh=si);var af=l.cu,dl=l.sB,ao,vo,yo=0;vi<-ru||vi>=ru?(ih=cf.YF,eu=cf.XF,af!==io&&(yo=cf.computeAngle(l,af,eu),l.angle=yo),ao=ih.x-dt.x,vo=ih.y-dt.y):(0<=vi?(ui=uu.n[vi],ou=vi<ru-1?uu.n[vi+1]:ui):(po=ru+vi,ui=uu.n[po],ou=0<po?uu.n[po-1]:ui),eu=0<=vi?ui.mj(ou):ou.mj(ui),af!==io&&(yo=cf.computeAngle(l,af,eu),l.Nn=yo),ao=ui.x+(ou.x-ui.x)*cc-dt.x,vo=ui.y+(ou.y-ui.y)*cc-dt.y);bi(l,Infinity,Infinity);var at=l.Ha,co=l.Ja,vf=0;l instanceof w&&(vf=l.lb);yf=co.width+vf;wo=co.height+vf;fu.reset();fu.translate(-at.x,-at.y);fu.scale(l.scale,l.scale);fu.rotate(af===io?l.angle:eu,yf/2,wo/2);kr=new p(0,0,yf,wo);lf.eu(kr,nh);fu.Xa(lf);lc=-lf.x+vf/2;ac=-lf.y+vf/2;ai.assign(dl);isNaN(ai.x)&&(ai.x=0<=vi?yf/2+3:-(yf/2+3));isNaN(ai.y)&&(ai.y=-(wo/2+3));ai.rotate(eu);ao+=ai.x;vo+=ai.y;kr.set(at);kr.x=ao+lc;kr.y=vo+ac;this.zi.add(kr);wt.yj(kr)}if(this.Ce)for(rh=this.sj;rh.next();)bi(rh.value,Infinity,Infinity);this.bj=wt;pf=this.hh;pf&&pf.p(pf.x+wt.x,pf.y+wt.y);th(s,wt.width||0,wt.height||0);t.bf(fu);t.B(lf);t.B(ai)}break;case"Grid":break;case"TableRow":case"TableColumn":t.m(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:t.m("Unknown panel type: "+go)}}var gt=s.width,ni=s.height,bo=this.padding,na=bo.top+bo.bottom,gt=gt+(bo.left+bo.right),ni=ni+na;isFinite(ei.width)&&(gt=ei.width);isFinite(ei.height)&&(ni=ei.height);gt=Math.min(su.width,gt);ni=Math.min(su.height,ni);gt=Math.max(ir.width,gt);ni=Math.max(ir.height,ni);gt=Math.max(r,gt);ni=Math.max(u,ni);s.width=gt;s.height=ni;th(this.nd,gt,ni);eh(this,0,0,gt,ni)};a.prototype.findMainElement=a.prototype.Rw=function(){return null===this.To&&tc(this,this.va,this.va.length),this.To};a.prototype.ik=function(n,i,r,u){var h=this.bj,v=this.va,y=v.length,f=t.wk(0,0,0,0),b,lu,vu,ue,et,se,rt,le,ot,pe,ut,lr,pt,wt,pr,ct,dt,kt,yi,at,pi,e,gt,vt,d,go,ns,rr,ur,l,ni,ti,fr,er,wr,br,tu,ii,nt,iu,ef,sf,cf,lf,vf,or,tt,gi,ri;if(0===y)b=this.pa,b.x=n,b.y=i,b.width=r,b.height=u;else{if(!this.Ea.P()){var pf=to(this),wf=this.$c,nr=wf.width,tr=wf.height,hr=this.margin,hu=hr.left+hr.right,cu=hr.top+hr.bottom;nr===r&&tr===u&&(pf=yr);switch(pf){case yr:(nr>r||tr>u)&&(this.ja(),bi(this,nr>r?r:nr,tr>u?u:tr));break;case cr:hf(this,!0);bi(this,r+hu,u+cu,0,0);break;case du:hf(this,!0);bi(this,r+hu,tr+cu,0,0);break;case of:hf(this,!0);bi(this,nr+hu,u+cu,0,0)}}b=this.pa;b.x=n;b.y=i;b.width=r;b.height=u;lu=this.ga.ec;switch(lu){case"Position":for(var bf=h.x-this.padding.left,kf=h.y-this.padding.top,au=0;au<y;au++){var it=v.n[au],df=it.Ha,gf=it.margin,ne=it.position.x,te=it.position.y;f.x=isNaN(ne)?-bf:ne-bf;f.y=isNaN(te)?-kf:te-kf;it instanceof w&&it.JA&&(vu=it.lb/2,f.x-=vu,f.y-=vu);f.x+=gf.left;f.y+=gf.top;f.width=df.width;f.height=df.height;it.visible&&it.Pc(f.x,f.y,f.width,f.height)}break;case"Vertical":for(var ie=this.padding.left,re=this.padding.top,yu=0;yu<y;yu++)if(ue=ie,et=v.n[yu],et.visible){var pu=et.Ha,fi=et.margin,fe=fi.left+fi.right,ee=ie+this.padding.right,wu=pu.width,oe=to(et);(isNaN(et.Ea.width)&&oe===cr||oe===du)&&(wu=Math.max(h.width-fe-ee,0));se=wu+fe+ee;rt=et.alignment;rt.Tc()&&(rt=this.lk);rt.Cd()||(rt=si);et.Pc(ue+rt.offsetX+fi.left+(h.width*rt.x-se*rt.x),re+rt.offsetY+fi.top,wu,pu.height);re+=pu.height+fi.bottom+fi.top}break;case"Horizontal":for(var he=this.padding.top,ce=this.padding.left,bu=0;bu<y;bu++)if(le=he,ot=v.n[bu],ot.visible){var ku=ot.Ha,ei=ot.margin,ae=ei.top+ei.bottom,ve=he+this.padding.bottom,gu=ku.height,ye=to(ot);(isNaN(ot.Ea.height)&&ye===cr||ye===of)&&(gu=Math.max(h.height-ae-ve,0));pe=gu+ae+ve;ut=ot.alignment;ut.Tc()&&(ut=this.lk);ut.Cd()||(ut=si);ot.Pc(ce+ut.offsetX+ei.left,le+ut.offsetY+ei.top+(h.height*ut.y-pe*ut.y),ku.width,gu);ce+=ku.width+ei.left+ei.right}break;case"Spot":var nf=tc(this,v,y),we=nf.Ha,be=we.width,ke=we.height,de=this.padding,ge=de.left,no=de.top;for(f.x=ge-h.x,f.y=no-h.y,nf.Pc(f.x,f.y,be,ke),lr=0;lr<y;lr++)if(pt=v.n[lr],pt!==nf){var ro=pt.Ha,uo=ro.width,fo=ro.height,st=pt.alignment;st.Tc()&&(st=this.lk);st.Cd()||(st=si);wt=pt.ek;wt.Tc()&&(wt=si);f.x=st.x*be+st.offsetX-(wt.x*uo-wt.offsetX);f.y=st.y*ke+st.offsetY-(wt.y*fo-wt.offsetY);f.x-=h.x;f.y-=h.y;pt.visible&&pt.Pc(ge+f.x,no+f.y,uo,fo)}break;case"Auto":var oi=tc(this,v,y),hi=oi.Ha,o=t.Jf();o.p(0,0,1,1);var ht=oi.margin,oo=ht.left,so=ht.top,ho=this.padding,co=ho.left,lo=ho.top;f.x=oo;f.y=so;f.width=hi.width;f.height=hi.height;oi.Pc(co+f.x,lo+f.y,f.width,f.height);var ar=en(oi),vr=on(oi),as=0+ar.y*hi.height+ar.offsetY,vs=0+vr.x*hi.width+vr.offsetX,ys=0+vr.y*hi.height+vr.offsetY;for(o.x=0+ar.x*hi.width+ar.offsetX,o.y=as,tf(o,vs,ys,0,0),o.x+=oo+co,o.y+=so+lo,pr=0;pr<y;pr++)if(ct=v.n[pr],ct!==oi){var lt=ct.Ha,ht=ct.margin,ps=Math.max(lt.width+ht.right+ht.left,0),ws=Math.max(lt.height+ht.top+ht.bottom,0),k=ct.alignment;k.Tc()&&(k=this.lk);k.Cd()||(k=si);f.x=o.width*k.x+k.offsetX-ps*k.x+ht.left+o.x;f.y=o.height*k.y+k.offsetY-ws*k.y+ht.top+o.y;f.width=o.width;f.height=o.height;ct.visible&&(po(o.x,o.y,o.width,o.height,f.x,f.y,lt.width,lt.height)?ct.Pc(f.x,f.y,lt.width,lt.height):ct.Pc(f.x,f.y,lt.width,lt.height,new p(o.x,o.y,o.width,o.height)))}t.oc(o);break;case"Table":for(var ao=this.padding,vo=ao.left,yo=ao.top,bt=this.ps,ci,li,ir=bt.length,kt=0,s=0;s<ir;s++)bt[s]&&(kt=Math.max(kt,bt[s].length));for(dt=Math.min(this.aj,ir-1);dt!==ir&&(void 0===this.pd[dt]||0===this.pd[dt].Ob);)dt++;for(var dt=Math.min(dt,ir-1),bs=-this.pd[dt].Pa,ai=Math.min(this.Mi,kt-1);ai!==kt&&(void 0===this.jd[ai]||0===this.jd[ai].Ob);)ai++;for(var ai=Math.min(ai,kt-1),ks=-this.jd[ai].Pa,vi=t.Ml(),s=0;s<ir;s++)if(bt[s])for(kt=bt[s].length,yi=this.we(s),li=yi.Pa+bs+yo+ust(yi),at=0;at<kt;at++)if(bt[s][at]){pi=this.ve(at);ci=pi.Pa+ks+vo+ust(pi);for(var bo=bt[s][at],ds=bo.length,rf=0;rf<ds;rf++)if(e=bo[rf],gt=e.Ha,e instanceof a&&(e.type===eo||e.type===ko))wo(e),e.Pb.Ra(),vt=e.Pb,vt.x=e.type===eo?vo:ci,vt.y=e.type===ko?yo:li,vt.width=gt.width,vt.height=gt.height,e.Pb.freeze(),gl(e,!1);else{for(vi.p(0,0),d=1;d<e.rowSpan&&!(s+d>=this.Dx);d++)go=this.we(s+d),vi.height+=go.total;for(d=1;d<e.yE&&!(at+d>=this.Aw);d++)ns=this.ve(at+d),vi.width+=ns.total;rr=pi.Ob+vi.width;ur=yi.Ob+vi.height;f.x=ci;f.y=li;f.width=rr;f.height=ur;var ts=ci,is=li,uf=rr,ff=ur;ci+rr>h.width&&(uf=Math.max(h.width-ci,0));li+ur>h.height&&(ff=Math.max(h.height-li,0));l=e.alignment;l.Tc()?(l=this.lk,l.Cd()||(l=si),ni=l.x,ti=l.y,fr=l.offsetX,er=l.offsetY,wr=pi.alignment,br=yi.alignment,wr.Cd()&&(ni=wr.x,fr=wr.offsetX),br.Cd()&&(ti=br.y,er=br.offsetY)):(ni=l.x,ti=l.y,fr=l.offsetX,er=l.offsetY);(isNaN(ni)||isNaN(ti))&&(ti=ni=.5,er=fr=0);var wi=gt.width,ki=gt.height,di=e.margin,rs=di.left+di.right,us=di.top+di.bottom,kr=wv(e,yi,pi);isNaN(e.Ea.width)&&(kr===cr||kr===du)&&(wi=Math.max(rr-rs,0));isNaN(e.Ea.height)&&(kr===cr||kr===of)&&(ki=Math.max(ur-us,0));var fs=e.Oe,es=e.Yf,wi=Math.min(fs.width,wi),ki=Math.min(fs.height,ki),wi=Math.max(es.width,wi),ki=Math.max(es.height,ki),gs=ki+us;f.x+=f.width*ni-(wi+rs)*ni+fr+di.left;f.y+=f.height*ti-gs*ti+er+di.top;e.visible&&(po(ts,is,uf,ff,f.x,f.y,gt.width,gt.height)?e.Pc(f.x,f.y,wi,ki):e.Pc(f.x,f.y,wi,ki,new p(ts,is,uf,ff)))}}for(t.qk(vi),s=0;s<y;s++)e=v.n[s],e instanceof a&&(e.type===eo||e.type===ko)&&(vt=e.Pb,e.nd.Ra(),e.nd.eq(0,0,vt.width,vt.height),e.nd.freeze());break;case"Viewbox":var dr=v.n[0],gr=dr.Ha,nu=dr.margin,nh=nu.top+nu.bottom,th=Math.max(gr.width+(nu.right+nu.left),0),ih=Math.max(gr.height+nh,0),g=dr.alignment;g.Tc()&&(g=this.lk);g.Cd()||(g=si);f.x=h.width*g.x-th*g.x+g.offsetX;f.y=h.height*g.y-ih*g.y+g.offsetY;f.width=gr.width;f.height=gr.height;dr.Pc(f.x,f.y,f.width,f.height);break;case"Link":for(tu=this.er(),ii=0,null!==tu&&ii<this.zi.count&&(nt=this.zi.n[ii],ii++,tu.Pc(nt.x-this.bj.x,nt.y-this.bj.y,nt.width,nt.height)),iu=0;iu<y;iu++)ef=v.n[iu],ef!==tu&&ii<this.zi.count&&(nt=this.zi.n[ii],ii++,ef.Pc(nt.x-this.bj.x,nt.y-this.bj.y,nt.width,nt.height));if(sf=this.ez(),cf=sf.count,2<=cf&&this.Ce)for(lf=this.sj;lf.next();){var c=lf.value,ru=cf,uu=sf,ft=c.Gf,os=c.bu,af=c.ek;af.Me()&&(af=si);var fu=c.cu,rh=c.sB,eu=void 0,ou=void 0,su=0;if(ft<-ru||ft>=ru)vf=this.YF,or=this.XF,fu!==io&&(su=this.computeAngle(c,fu,or),c.angle=su),eu=vf.x,ou=vf.y;else{if(tt=void 0,gi=void 0,0<=ft)tt=uu.n[ft],gi=ft<ru-1?uu.n[ft+1]:tt;else var yf=ru+ft,tt=uu.n[yf],gi=0<yf?uu.n[yf-1]:tt;or=0<=ft?tt.mj(gi):gi.mj(tt);fu!==io&&(su=this.computeAngle(c,fu,or),c.angle=su);eu=tt.x+(gi.x-tt.x)*os;ou=tt.y+(gi.y-tt.y)*os}ri=t.Ah();ri.reset();ri.scale(c.scale,c.scale);ri.rotate(c.angle,0,0);var ss=c.Ja,sr=t.wk(0,0,ss.width,ss.height),yt=t.N();yt.eu(sr,af);ri.Xa(yt);var hs=-yt.x,cs=-yt.y,ui=rh.copy();isNaN(ui.x)&&(ui.x=0<=ft?yt.x+3:-(yt.x+3));isNaN(ui.y)&&(ui.y=-(yt.y+3));ui.rotate(or);eu+=ui.x;ou+=ui.y;ri.ZG(sr);var hs=hs+sr.x,cs=cs+sr.y,ls=t.qc(eu+hs,ou+cs);c.move(ls);t.B(ls);t.B(yt);t.oc(sr);t.bf(ri)}this.sx();break;case"Grid":break;case"TableRow":case"TableColumn":t.m(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:t.m("Unknown panel type: "+lu)}t.oc(f)}};a.prototype.jk=function(n){var i=this.Ja,u,r;if(po(0,0,i.width,i.height,n.x,n.y)){for(u=this.va.length,i=t.qc(0,0);u--;)if(r=this.va.n[0],(r.visible||r===this.Zb)&&(uu(i.set(n),r.transform),r.La(i)))return t.B(i),!0;return t.B(i),null===this.Qb&&null===this.zc?!1:!0}return!1};a.prototype.walkVisualTree=function(n){kot(this,this,n)};a.prototype.findInVisualTree=a.prototype.qt=function(n){return dot(this,this,n)};a.prototype.findObject=a.prototype.ue=function(n){var t;if(this.name===n)return this;for(var r=this.va.n,u=r.length,i=0;i<u;i++){if(t=r[i],t.name===n)return t;if(t instanceof a)if(null===t.Li&&null===t.ng){if(t=t.ue(n),null!==t)return t}else if(sn(t)&&(t=t.va.gb(),null!==t&&(t=t.ue(n),null!==t)))return t}return null};ft=a.prototype;ft.Kf=function(){return!(this.type===eo||this.type===ko)};ft.de=function(n,i,r){var c,u,f,e;if(!1===this.kf||(void 0===i&&(i=null),void 0===r&&(r=null),he(this)))return null;var h=this.Ja,u=1/this.sk(),s=this.Kf(),o=s?n:uu(t.qc(n.x,n.y),this.transform);if(po(-(5*u),-(5*u),h.width+10*u,h.height+10*u,o.x,o.y)){if(!this.bh){for(c=this.va.length,u=t.N();c--;)if(f=this.va.n[c],(f.visible||f===this.Zb)&&(f.Kf()?uu(u.set(n),f.transform):u.set(n),e=null,f instanceof a?e=f.de(u,i,r):!0===f.kf&&f.La(u)&&(e=f),null!==e&&(null!==i&&(e=i(e)),e&&(null===r||r(e)))))return t.B(u),s||t.B(o),e;t.B(u)}return null===this.background&&null===this.hk?(s||t.B(o),null):(n=po(0,0,h.width,h.height,o.x,o.y)?this:null,s||t.B(o),n)}return s||t.B(o),null};ft.op=function(n,i,r,u){var c,o,e;if(!1===this.kf)return!1;void 0===i&&(i=null);void 0===r&&(r=null);u instanceof b||u instanceof it||(u=new b(f));var o=this.Ja,h=this.Kf(),s=h?n:uu(t.qc(n.x,n.y),this.transform);if(po(0,0,o.width,o.height,s.x,s.y)){if(!this.bh){for(c=this.va.length,o=t.N();c--;)e=this.va.n[c],(e.visible||e===this.Zb)&&(e.Kf()?uu(o.set(n),e.transform):o.set(n),(e instanceof a?e.op(o,i,r,u):e.La(o))&&!1!==e.kf&&(null!==i&&(e=i(e)),e&&(null===r||r(e))&&u.add(e)));t.B(o)}return h||t.B(s),null!==this.background||null!==this.hk}return h||t.B(s),!1};ft.pk=function(n,i,r,u,f,e){var h,c,o,s,l;if(!1===this.kf)return!1;if(void 0===i&&(i=null),void 0===r&&(r=null),h=e,void 0===e&&(h=t.Ah(),h.reset()),h.multiply(this.transform),this.Ym(n,h))return fn(this,i,r,f),void 0===e&&t.bf(h),!0;if(this.Xf(n,h)){if(!this.bh)for(c=this.va.length;c--;)o=this.va.n[c],(o.visible||o===this.Zb)&&(s=o.pa,l=this.Ja,s.x>l.width||s.y>l.height||0>s.x+s.width||0>s.y+s.height||(s=t.Ah(),s.set(h),(o instanceof a?o.pk(n,i,r,u,f,s):eot(o,n,u,s))&&(null!==i&&(o=i(o)),o&&(null===r||r(o))&&f.add(o)),t.bf(s)));return void 0===e&&t.bf(h),u}return void 0===e&&t.bf(h),!1};ft.fn=function(n,i,r,u,f,e){var c,y;if(!1===this.kf)return!1;void 0===r&&(r=null);void 0===u&&(u=null);var h=this.Ja,l=this.Kf(),o=l?n:uu(t.qc(n.x,n.y),this.transform),v=l?i:uu(t.qc(i.x,i.y),this.transform),s=o.nk(v),p=0<o.x&&o.x<h.width&&0<o.y&&o.y<h.height||ur(o.x,o.y,0,0,0,h.height)<s||ur(o.x,o.y,0,h.height,h.width,h.height)<s||ur(o.x,o.y,h.width,h.height,h.width,0)<s||ur(o.x,o.y,h.width,0,0,0)<s,h=0<o.x&&o.x<h.width&&0<o.y&&o.y<h.height&&ur(o.x,o.y,0,0,0,h.height)<s&&ur(o.x,o.y,0,h.height,h.width,h.height)<s&&ur(o.x,o.y,h.width,h.height,h.width,0)<s&&ur(o.x,o.y,h.width,0,0,0)<s;if(l||(t.B(o),t.B(v)),p){if(!this.bh){for(l=t.N(),o=t.N(),v=this.va.length;v--;)(s=this.va.n[v],s.visible||s===this.Zb)&&(c=s.pa,y=this.Ja,c.x>y.width||c.y>y.height||0>c.x+c.width||0>c.y+c.height||(s.Kf()?(c=s.transform,uu(l.set(n),c),uu(o.set(i),c)):(l.set(n),o.set(i)),s instanceof a?!s.fn(l,o,r,u,f,e):!s.bF(l,o,f))||(null!==r&&(s=r(s)),s&&(null===u||u(s))&&e.add(s)));t.B(l);t.B(o)}return f?p:h}return!1};a.prototype.add=a.prototype.add=function(n){t.l(n,f,a,"add:element");this.Pd(this.va.count,n)};a.prototype.elt=a.prototype.wa=function(n){return this.va.wa(n)};a.prototype.insertAt=a.prototype.Pd=function(n,i){var r,u,f;if(i instanceof s&&t.m("Cannot add a Part to a Panel: "+i),(this===i||this.rj(i))&&(this===i&&t.m("Cannot make a Panel contain itself: "+this.toString()),t.m("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+i.toString())),r=i.ia,null!==r&&r!==this&&t.m("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+i.toString()+", already contained by "+r.toString()+", cannot be shared by this Panel: "+this.toString()),this.ga!==bc||i instanceof w||t.m("Can only add Shapes to a Grid Panel, not: "+i),i.Il(this),i.zm=null,null!==this.Ht&&(f=i.data,null!==f&&"object"==typeof f&&(null===this.mg&&(this.mg=new gt(Object,a)),this.mg.add(f,i))),u=this.va,f=-1,r===this){for(var e=-1,h=u.count,o=0;o<h;o++)if(u.n[o]===i){e=o;break}if(-1!==e){if(e===n||e+1>=u.count&&n>=u.count)return;u.wd(e);f=e}else t.m("element "+i.toString()+" has panel "+r.toString()+" but is not contained by it.")}(0>n||n>u.count)&&(n=u.count);u.Pd(n,i);this.ja();i.ja();null!==i.Ud?this.Qh=!0:i instanceof a&&!0===i.Qh&&(this.Qh=!0);r=this.U;null!==r&&(r.Uj=null,r.Rj=NaN,this.Qh&&r instanceof y&&(r.Qh=!0),r.Qh&&(r.Ad=null),u=this.h,null!==u&&u.ma.yb||(-1!==f&&r.ed(kr,"elements",this,i,null,f,null),r.ed(vr,"elements",this,null,i,null,n)))};a.prototype.remove=a.prototype.remove=function(n){t.l(n,f,a,"remove:element");for(var u=this.va,e=u.count,r=-1,i=0;i<e;i++)if(u.n[i]===n){r=i;break}-1!==r&&this.cf(r)};a.prototype.removeAt=a.prototype.wd=function(n){r&&t.q(n,a,"removeAt:idx");0<=n&&this.cf(n)};a.prototype.cf=function(n){var t=this.va,r=t.wa(n),i;r.zm=null;r.Il(null);null!==this.mg&&(i=r.data,"object"==typeof i&&this.mg.remove(i));t.wd(n);hf(this,!1);this.ja();t=this.U;null!==t&&(t.Uj=null,t.Rj=NaN,i=this.h,null!==i&&i.ma.yb||t.ed(kr,"elements",this,r,null,n,null))};t.A(a,{Dx:"rowCount"},function(){return void 0===this.pd?0:this.pd.length});a.prototype.getRowDefinition=a.prototype.we=function(n){var u,i;return void 0===this.pd?null:(r&&t.q(n,a,"getRowDefinition:idx"),0>n&&t.ha(n,">= 0",a,"getRowDefinition:idx"),n=Math.round(n),u=this.pd,void 0===u[n]&&(i=new dt,i.Il(this),i.hm=!0,i.Zc=n,u[n]=i),u[n])};a.prototype.removeRowDefinition=function(n){if(void 0!==this.pd){r&&t.q(n,a,"removeRowDefinition:idx");0>n&&t.ha(n,">= 0",a,"removeRowDefinition:idx");n=Math.round(n);var i=this.pd;i[n]&&(i[n]=void 0)}};t.A(a,{Aw:"columnCount"},function(){return void 0===this.jd?0:this.jd.length});a.prototype.getColumnDefinition=a.prototype.ve=function(n){var u,i;return void 0===this.jd?null:(r&&t.q(n,a,"getColumnDefinition:idx"),0>n&&t.ha(n,">= 0",a,"getColumnDefinition:idx"),n=Math.round(n),u=this.jd,void 0===u[n]&&(i=new dt,i.Il(this),i.hm=!1,i.Zc=n,u[n]=i),u[n])};a.prototype.removeColumnDefinition=function(n){if(void 0!==this.jd){r&&t.q(n,a,"removeColumnDefinition:idx");0>n&&t.ha(n,">= 0",a,"removeColumnDefinition:idx");n=Math.round(n);var i=this.jd;i[n]&&(i[n]=void 0)}};t.g(a,"rowSizing",a.prototype.wG);t.defineProperty(a,{wG:"rowSizing"},function(){return void 0===this.Em?dc:this.Em},function(n){if(void 0!==this.Em){var i=this.Em;i!==n&&(n!==dc&&n!==kc&&t.m("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Em=n,this.ja(),this.j("rowSizing",i,n))}});t.g(a,"columnSizing",a.prototype.xE);t.defineProperty(a,{xE:"columnSizing"},function(){return void 0===this.Wl?dc:this.Wl},function(n){if(void 0!==this.Wl){var i=this.Wl;i!==n&&(n!==dc&&n!==kc&&t.m("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Wl=n,this.ja(),this.j("columnSizing",i,n))}});t.g(a,"topIndex",a.prototype.IB);t.defineProperty(a,{IB:"topIndex"},function(){return void 0===this.aj?0:this.aj},function(n){if(void 0!==this.aj){var i=this.aj;i!==n&&((!isFinite(n)||0>n)&&t.m("topIndex must be greater than zero and a real number. Was "+n),this.aj=n,this.ja(),this.j("topIndex",i,n))}});t.g(a,"leftIndex",a.prototype.OA);t.defineProperty(a,{OA:"leftIndex"},function(){return void 0===this.Mi?0:this.Mi},function(n){if(void 0!==this.Mi){var i=this.Mi;i!==n&&((!isFinite(n)||0>n)&&t.m("leftIndex must be greater than zero and a real number. Was "+n),this.Mi=n,this.ja(),this.j("leftIndex",i,n))}});a.prototype.findRowForLocalY=function(n){var i;if(0>n)return-1;if(this.type!==vs)return NaN;for(var r=0,u=this.pd,f=u.length,t=this.aj;t<f;t++)if(i=u[t],void 0!==i&&(r+=i.total,n<r))return t;return-1};a.prototype.findColumnForLocalX=function(n){var i;if(0>n)return-1;if(this.type!==vs)return NaN;for(var r=0,u=this.jd,f=u.length,t=this.Mi;t<f;t++)if(i=u[t],void 0!==i&&(r+=i.total,n<r))return t;return-1};t.g(a,"data",a.prototype.data);t.defineProperty(a,{data:"data"},function(){return this.Zl},function(n){var i=this.Zl,r,u;i!==n&&(r=this instanceof s&&!(this instanceof fi),r&&t.i(n,"object",a,"data"),ce(this),this.Zl=n,u=this.h,null!==u&&(r?this instanceof c?(null!==i&&u.Nk.remove(i),null!==n&&u.Nk.add(n,this)):(null!==i&&u.Ei.remove(i),null!==n&&u.Ei.add(n,this)):(r=this.ia,null!==r&&null!==r.mg&&(null!==i&&r.mg.remove(i),null!==n&&r.mg.add(n,this)))),this.j("data",i,n),null!==u&&u.ma.yb||null!==n&&this.Vb())});t.g(a,"itemIndex",a.prototype.HF);t.defineProperty(a,{HF:"itemIndex"},function(){return this.vr},function(n){var t=this.vr;t!==n&&(this.vr=n,this.j("itemIndex",t,n))});a.prototype.updateTargetBindings=a.prototype.Vb=function(n){var o=this.Ul,u,f,i,e;if(null!==o)for(void 0===n&&(n=""),o=o.k;o.next();)if(u=o.value,f=u.AB,(""===n||""===f||f===n)&&(f=u.ku,null!==u.BE||""!==f))if(f=this.data,i=u.iu,null!==i&&(f=this.ue(i)),null===f)r&&t.trace("Binding error: missing GraphObject named "+i+" in "+this.toString());else{if(i=this,e=u.Fn,""!==e){if(i=this.ue(e),null===i)continue}else null!==u.vg&&(i=u.vg);if(e=u.Kz,0!==e){if(!(i instanceof a))continue;1===e?i=i.ve(u.dw):2===e&&(i=i.we(u.dw))}void 0!==i&&u.eH(i,f)}};t.g(a,"itemArray",a.prototype.Ht);t.defineProperty(a,{Ht:"itemArray"},function(){return this.Li},function(n){var u=this.Li,i;u!==n&&(r&&null!==n&&!t.isArray(n)&&t.m("Panel.itemArray must be an Array-like object or null, not: "+n),i=this.h,null!==i&&null!==u&&og(i,this),this.Li=n,null!==i&&null!==n&&eg(i,this),this.j("itemArray",u,n),null!==i&&i.ma.yb||this.iB())});a.prototype.rebuildItemElements=a.prototype.iB=function(){var n=0,r,i;for(sn(this)&&(n=1);this.va.length>n;)this.cf(n);if(n=this.Ht,null!==n)for(r=t.ub(n),i=0;i<r;i++)tst(this,t.rb(n,i),i)};t.g(a,"itemTemplate",a.prototype.BJ);t.defineProperty(a,{BJ:"itemTemplate"},function(){return null===this.ng?null:this.ng.Da("")},function(n){if(null===this.ng){if(null===n)return;this.ng=new gt("string",a)}var i=this.ng.Da("");i!==n&&(t.l(n,a,a,"itemTemplate"),n instanceof s&&t.m("itemTemplate must not be a Part: "+n),this.ng.add("",n),this.j("itemTemplate",i,n),n=this.h,null!==n&&n.ma.yb||this.iB())});t.g(a,"itemTemplateMap",a.prototype.IF);t.defineProperty(a,{IF:"itemTemplateMap"},function(){return this.ng},function(n){var u=this.ng,i,r;if(u!==n){for(t.l(n,gt,a,"itemTemplateMap"),i=n.k;i.next();)r=i.value,r instanceof s&&t.m("Template in itemTemplateMap must not be a Part: "+r);this.ng=n;this.j("itemTemplateMap",u,n);n=this.h;null!==n&&n.ma.yb||this.iB()}});t.g(a,"itemCategoryProperty",a.prototype.AJ);t.defineProperty(a,{AJ:"itemCategoryProperty"},function(){return this.xo},function(n){var i=this.xo;i!==n&&("string"!=typeof n&&"function"!=typeof n&&t.jc(n,"string or function",a,"itemCategoryProperty"),this.xo=n,this.j("itemCategoryProperty",i,n))});a.prototype.getCategoryForItemData=function(n){if(null===n)return"";var i=this.xo;if("function"==typeof i)i=i(n);else if("string"==typeof i&&"object"==typeof n){if(""===i)return"";i=t.nb(n,i)}else return"";return void 0===i?"":"string"==typeof i?i:(t.m("Panel.getCategoryForItemData found a non-string category for "+n+": "+i),"")};a.prototype.findTemplateForItemData=function(n,i,r){return n=this.IF,i=null,null!==n&&(i=n.Da(r)),null===i&&(t.jH||(t.jH=!0,t.trace('No item template Panel found for category "'+r+'" on '+this),t.trace("  Using default item template."),r=new a,n=new ot,n.bind(new ri("text","",ne)),r.add(n),t.LE=r),i=t.LE),i instanceof a?i:null};t.g(a,"isAtomic",a.prototype.sJ);t.defineProperty(a,{sJ:"isAtomic"},function(){return this.bh},function(n){var i=this.bh;i!==n&&(t.i(n,"boolean",a,"isAtomic"),this.bh=n,this.j("isAtomic",i,n))});t.ka("RowColumnDefinition",dt);dt.prototype.copy=function(){var n=new dt;return n.hm=this.hm,n.Zc=this.Zc,n.Rf=this.Rf,n.sm=this.sm,n.rm=this.rm,n.Ae=this.Ae,n.Ob=this.Ob,n.Pa=this.Pa,n.$h=this.$h,n.Cs=this.Cs,n.ak=null===this.ak?null:this.ak.ba(),n.zs=this.zs,n.As=this.As,n.Wh=null,this.Wh&&(n.Wh=this.Wh.slice(0)),n.Qb=this.Qb,n.Nq=this.Nq,n.Nc=this.Nc,n};dt.prototype.toString=function(){return"RowColumnDefinition "+(this.pi?"(Row ":"(Column ")+this.index+") #"+t.ud(this)};dt.Default=hn=t.w(dt,"Default",0);dt.None=kc=t.w(dt,"None",1);dt.ProportionalExtra=dc=t.w(dt,"ProportionalExtra",2);dt.prototype.Il=function(n){this.Ui=n};dt.prototype.ad=function(n,t,i,r,u){var f=this.Ui,e;if(null!==f){f.ja();for(var h=this.pi,s=f.va,c=s.length,o=0;o<c;o++)e=s.n[o],(h?e.wc:e.column)===this.index&&e.ja();if(f.ed(di,n,this,t,i,r,u),null!==this.Nc&&(t=f.qp(),null!==t&&(t=t.data,null!==t)))for(i=this.Nc.k;i.next();)i.value.MB(this,t,n,null)}};t.A(dt,{ia:"panel"},function(){return this.Ui});t.A(dt,{pi:"isRow"},function(){return this.hm});t.A(dt,{index:"index"},function(){return this.Zc});t.g(dt,"height",dt.prototype.height);t.defineProperty(dt,{height:"height"},function(){return this.Rf},function(n){var i=this.Rf;i!==n&&(r&&t.i(n,"number",dt,"height"),0>n&&t.ha(n,">= 0",dt,"height"),this.Rf=n,ie(this,this.Ob),this.ad("size",i,n))});t.g(dt,"width",dt.prototype.width);t.defineProperty(dt,{width:"width"},function(){return this.Rf},function(n){var i=this.Rf;i!==n&&(r&&t.i(n,"number",dt,"width"),0>n&&t.ha(n,">= 0",dt,"width"),this.Rf=n,ie(this,this.Ob),this.ad("size",i,n))});t.g(dt,"minimum",dt.prototype.si);t.defineProperty(dt,{si:"minimum"},function(){return this.sm},function(n){var i=this.sm;i!==n&&(r&&t.i(n,"number",dt,"minimum"),(0>n||!isFinite(n))&&t.ha(n,">= 0",dt,"minimum"),this.sm=n,ie(this,this.Ob),this.ad("minimum",i,n))});t.g(dt,"maximum",dt.prototype.Ef);t.defineProperty(dt,{Ef:"maximum"},function(){return this.rm},function(n){var i=this.rm;i!==n&&(r&&t.i(n,"number",dt,"maximum"),0>n&&t.ha(n,">= 0",dt,"maximum"),this.rm=n,ie(this,this.Ob),this.ad("maximum",i,n))});t.g(dt,"alignment",dt.prototype.alignment);t.defineProperty(dt,{alignment:"alignment"},function(){return this.Ae},function(n){var i=this.Ae;i.O(n)||(r&&t.l(n,e,dt,"alignment"),this.Ae=n.ba(),this.ad("alignment",i,n))});t.g(dt,"stretch",dt.prototype.ui);t.defineProperty(dt,{ui:"stretch"},function(){return this.$h},function(n){var i=this.$h;i!==n&&(r&&t.Fa(n,f,dt,"stretch"),this.$h=n,this.ad("stretch",i,n))});t.g(dt,"separatorPadding",dt.prototype.uB);t.defineProperty(dt,{uB:"separatorPadding"},function(){return this.ak},function(n){"number"==typeof n?n=new ni(n):null!==n&&r&&t.l(n,ni,dt,"separatorPadding");var i=this.ak;null!==n&&null!==i&&i.O(n)||(null!==n&&(n=n.ba()),this.ak=n,this.ad("separatorPadding",i,n))});t.g(dt,"separatorStroke",dt.prototype.Bn);t.defineProperty(dt,{Bn:"separatorStroke"},function(){return this.zs},function(n){var t=this.zs;t!==n&&(null===n||"string"==typeof n||n instanceof ht)&&(n instanceof ht&&n.freeze(),this.zs=n,this.ia&&this.ia.na(),this.ad("separatorStroke",t,n))});t.g(dt,"separatorStrokeWidth",dt.prototype.Cn);t.defineProperty(dt,{Cn:"separatorStrokeWidth"},function(){return this.As},function(n){var t=this.As;t!==n&&(this.As=n,this.ia&&this.ia.na(),this.ad("separatorStrokeWidth",t,n))});t.g(dt,"separatorDashArray",dt.prototype.CG);t.defineProperty(dt,{CG:"separatorDashArray"},function(){return this.Wh},function(n){var i=this.Wh;i!==n&&(Array.isArray(n)||t.jc(n,"Array",dt,"separatorDashArray:val"),this.Wh=n,this.ia&&this.ia.na(),this.ad("separatorDashArray",i,n))});t.g(dt,"background",dt.prototype.background);t.defineProperty(dt,{background:"background"},function(){return this.Qb},function(n){var t=this.Qb;t!==n&&(null===n||"string"==typeof n||n instanceof ht)&&(n instanceof ht&&n.freeze(),this.Qb=n,this.ia&&this.ia.na(),this.ad("background",t,n))});t.g(dt,"coversSeparators",dt.prototype.Hw);t.defineProperty(dt,{Hw:"coversSeparators"},function(){return this.Nq},function(n){var i=this.Nq;i!==n&&(t.i(n,"boolean",dt,"coversSeparators"),this.Nq=n,this.ad("coversSeparators",i,n))});t.g(dt,"sizing",dt.prototype.gu);t.defineProperty(dt,{gu:"sizing"},function(){return this.Cs},function(n){var i=this.Cs;i!==n&&(r&&t.Fa(n,dt,dt,"sizing"),this.Cs=n,this.ad("sizing",i,n))});t.A(dt,{lc:"actual"},function(){return this.Ob});t.A(dt,{total:"total"},function(){return this.Ob+oo(this)});t.A(dt,{position:"position"},function(){return this.Pa});dt.prototype.bind=dt.prototype.bind=function(n){n.vg=this;var i=this.ia;null!==i&&(i=i.qp(),null!==i&&nst(i)&&t.m("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+n));null===this.Nc&&(this.Nc=new b(ri));this.Nc.add(n)};t.ka("Shape",w);t.Qa(w,f);w.prototype.cloneProtected=function(n){f.prototype.cloneProtected.call(this,n);n.Ta=this.Ta;n.io=this.io;n.lh=this.lh;n.dr=this.dr;n.Lk=this.Lk;n.Yc=this.Yc;n.Kb=this.Kb;n.qe=this.qe;n.Ro=this.Ro;n.So=this.So;n.Km=this.Km;n.Jm=null;this.Jm&&(n.Jm=this.Jm.slice(0));n.qd=this.qd;n.Yi=this.Yi.ba();n.Zi=this.Zi.ba();n.Yr=this.Yr;n.Zr=this.Zr;n.ir=this.ir;n.or=this.or;n.as=this.as;n.Uo=this.Uo;n.mo=this.mo;n.hr=this.hr};w.prototype.toString=function(){return"Shape("+("None"!==this.Eb?this.Eb:"None"!==this.Gn?this.Gn:this.Vw)+")#"+t.ud(this)};w.prototype.rl=function(n,i){var v,k,tt,d,g,b,h,nt,l,c,it;if((null!==this.Kb||null!==this.Yc)&&(null!==this.Yc&&gu(this,n,this.Yc,!0),null!==this.Kb&&gu(this,n,this.Kb,!1),v=this.qe,0===v&&(d=this.U,d instanceof fi&&d.type===go&&d.uc instanceof w&&(v=d.uc.lb)),n.lineWidth=v,n.lineJoin=this.So,n.lineCap=this.Ro,n.miterLimit=this.Km,k=!1,this.U&&i.el.drawShadows&&(k=this.U.qi),tt=!0,null!==this.Kb&&null===this.Yc&&(tt=!1),d=!1,g=this.Mx,null!==g&&(b=d=!0,void 0!==n.setLineDash?(n.setLineDash(g),n.lineDashOffset=this.qd):void 0!==n.webkitLineDash?(n.webkitLineDash=g,n.webkitLineDashOffset=this.qd):void 0!==n.mozDash?(n.mozDash=g,n.mozDashOffset=this.qd):b=!1),h=this.Ta,null!==h)){if(h.ga===nu)n.beginPath(),d&&!b?kl(n,h.tc,h.Cc,h.pb,h.Bb,g,this.qd):(n.moveTo(h.tc,h.Cc),n.lineTo(h.pb,h.Bb)),null!==this.Yc&&ou(n,this.Yc,!0),0!==v&&null!==this.Kb&&ou(n,this.Kb,!1);else if(h.ga===kf){var r=h.tc,f=h.Cc,o=h.pb,h=h.Bb,e=Math.min(r,o),s=Math.min(f,h),r=Math.abs(o-r),f=Math.abs(h-f);null!==this.Yc&&(this.Yc instanceof ht&&this.Yc.type===ku?(n.beginPath(),n.rect(e,s,r,f),ou(n,this.Yc,!0)):n.fillRect(e,s,r,f));null!==this.Kb&&(tt&&k&&(nt=[n.shadowOffsetX,n.shadowOffsetY,n.shadowBlur],n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0),d&&!b?(b=[[e,s],[e+r,s],[e+r,s+f],[e,s+f],[e,s]],n.beginPath(),dv(n,b,g,this.qd),ou(n,this.Kb,!1)):0!==v&&(this.Kb instanceof ht&&this.Kb.type===ku?(n.beginPath(),n.rect(e,s,r,f),ou(n,this.Kb,!1)):n.strokeRect(e,s,r,f)),tt&&k&&(n.shadowOffsetX=nt[0],n.shadowOffsetY=nt[1],n.shadowBlur=nt[2]))}else if(h.ga===uf)r=h.tc,f=h.Cc,o=h.pb,h=h.Bb,e=Math.abs(o-r)/2,s=Math.abs(h-f)/2,r=Math.min(r,o)+e,f=Math.min(f,h)+s,n.beginPath(),n.moveTo(r,f-s),n.bezierCurveTo(r+u.za*e,f-s,r+e,f-u.za*s,r+e,f),n.bezierCurveTo(r+e,f+u.za*s,r+u.za*e,f+s,r,f+s),n.bezierCurveTo(r-u.za*e,f+s,r-e,f+u.za*s,r-e,f),n.bezierCurveTo(r-e,f-u.za*s,r-u.za*e,f-s,r,f-s),n.closePath(),null!==this.Yc&&ou(n,this.Yc,!0),d&&!b&&(b=t.Hb(),u.Fe(r,f-s,r+u.za*e,f-s,r+e,f-u.za*s,r+e,f,.5,b),u.Fe(r+e,f,r+e,f+u.za*s,r+u.za*e,f+s,r,f+s,.5,b),u.Fe(r,f+s,r-u.za*e,f+s,r-e,f+u.za*s,r-e,f,.5,b),u.Fe(r-e,f,r-e,f-u.za*s,r-u.za*e,f-s,r,f-s,.5,b),n.beginPath(),dv(n,b,g,this.qd),t.Ca(b)),0!==v&&null!==this.Kb&&(tt&&k&&(nt=[n.shadowOffsetX,n.shadowOffsetY,n.shadowBlur],n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0),ou(n,this.Kb,!1),tt&&k&&(n.shadowOffsetX=nt[0],n.shadowOffsetY=nt[1],n.shadowBlur=nt[2]));else if(h.ga===wr){for(var e=h.Pk,s=e.length,rt=0;rt<s;rt++){l=e.n[rt];n.beginPath();n.moveTo(l.sa,l.ta);for(var et=l.Ka.n,ft=et.length,y=null,a=0;a<ft;a++){c=et[a];switch(c.ga){case df:n.moveTo(c.D,c.F);break;case fr:n.lineTo(c.D,c.F);break;case au:n.bezierCurveTo(c.od,c.Ee,c.tg,c.ug,c.pb,c.Bb);break;case ee:n.quadraticCurveTo(c.od,c.Ee,c.pb,c.Bb);break;case br:if(c.radiusX===c.radiusY)y=Math.PI/180,n.arc(c.od,c.Ee,c.radiusX,c.yh*y,(c.yh+c.vi)*y,0>c.vi);else for(var y=os(c,l),ut=y.length,p=0;p<ut;p++)it=y[p],0===p&&n.lineTo(it.x1,it.y1),n.bezierCurveTo(it.x2,it.y2,it.ne,it.oe,it.$b,it.ac);break;case gf:for(y&&y.type===br?(y=os(y,l),y=y[y.length-1]||null,null!==y&&(r=y.$b,o=y.ac)):(r=y?y.D:l.sa,o=y?y.F:l.ta),y=ih(c,l,r,o),ut=y.length,p=0;p<ut;p++)it=y[p],n.bezierCurveTo(it.x2,it.y2,it.ne,it.oe,it.$b,it.ac);break;default:t.m("Segment not of valid type")}c.Sh&&n.closePath();y=c}k?l.vo?(!0===l.gm&&null!==this.Yc?(ou(n,this.Yc,!0),tt=!0):tt=!1,0!==v&&null!==this.Kb&&(tt&&(nt=[n.shadowOffsetX,n.shadowOffsetY,n.shadowBlur],n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0),d&&!b||ou(n,this.Kb,!1),tt&&(n.shadowOffsetX=nt[0],n.shadowOffsetY=nt[1],n.shadowBlur=nt[2]))):(tt&&(nt=[n.shadowOffsetX,n.shadowOffsetY,n.shadowBlur],n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0),!0===l.gm&&null!==this.Yc&&ou(n,this.Yc,!0),0!==v&&null!==this.Kb&&(d&&!b||ou(n,this.Kb,!1)),tt&&(n.shadowOffsetX=nt[0],n.shadowOffsetY=nt[1],n.shadowBlur=nt[2])):(!0===l.gm&&null!==this.Yc&&ou(n,this.Yc,!0),0===v||null===this.Kb||d&&!b||ou(n,this.Kb,!1))}if(d&&!b)for(v=tt,nt=h.Pk,tt=nt.length,b=0;b<tt;b++){for(h=nt.n[b],n.beginPath(),r=t.Hb(),r.push([h.sa,h.ta]),o=h.sa,e=h.ta,s=o,rt=e,l=h.Ka.n,et=l.length,ft=0;ft<et;ft++){a=l[ft];switch(a.ga){case df:dv(n,r,g,this.qd);r.length=0;r.push([a.D,a.F]);o=a.D;e=a.F;s=o;rt=e;break;case fr:r.push([a.D,a.F]);o=a.D;e=a.F;break;case au:u.Fe(o,e,a.od,a.Ee,a.tg,a.ug,a.pb,a.Bb,.5,r);o=a.D;e=a.F;break;case ee:u.Wp(o,e,a.od,a.Ee,a.pb,a.Bb,.5,r);o=a.D;e=a.F;break;case br:for(c=os(a,h),y=c.length,ut=0;ut<y;ut++)p=c[ut],u.Fe(o,e,p.x2,p.y2,p.ne,p.oe,p.$b,p.ac,.5,r),o=p.$b,e=p.ac;break;case gf:for(c=ih(a,h,o,e),y=c.length,ut=0;ut<y;ut++)p=c[ut],u.Fe(o,e,p.x2,p.y2,p.ne,p.oe,p.$b,p.ac,.5,r),o=p.$b,e=p.ac;break;default:t.m("Segment not of valid type")}a.Sh&&(r.push([s,rt]),dv(n,r,g,this.qd))}dv(n,r,g,this.qd);t.Ca(r);null!==this.Kb&&(v&&k&&(f=[n.shadowOffsetX,n.shadowOffsetY,n.shadowBlur],n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0),ou(n,this.Kb,!1),v&&k&&(n.shadowOffsetX=f[0],n.shadowOffsetY=f[1],n.shadowBlur=f[2]))}}if(d&&(void 0!==n.setLineDash?(n.setLineDash(t.xi),n.lineDashOffset=0):void 0!==n.webkitLineDash?(n.webkitLineDash=t.xi,n.webkitLineDashOffset=0):void 0!==n.mozDash&&(n.mozDash=null,n.mozDashOffset=0)),this.cB){for(d=this.cB,bi(d,Infinity,Infinity),g=d.Ha,d.Pc(0,0,g.width,g.height),n.save(),g=this.td.Fb.gb(),n.beginPath(),f=t.Hb(),f.push([g.sa,g.ta]),v=g.sa,k=g.ta,nt=v,tt=k,b=g.Ka.n,h=b.length,r=0;r<h;r++){o=b[r];switch(o.ga){case df:cn(n,i,f,d);f.length=0;f.push([o.D,o.F]);v=o.D;k=o.F;nt=v;tt=k;break;case fr:f.push([o.D,o.F]);v=o.D;k=o.F;break;case au:u.Fe(v,k,o.od,o.Ee,o.tg,o.ug,o.pb,o.Bb,.5,f);v=o.D;k=o.F;break;case ee:u.Wp(v,k,o.od,o.Ee,o.pb,o.Bb,.5,f);v=o.D;k=o.F;break;case br:for(e=os(o,g),s=e.length,rt=0;rt<s;rt++)l=e[rt],u.Fe(v,k,l.x2,l.y2,l.ne,l.oe,l.$b,l.ac,.5,f),v=l.$b,k=l.ac;break;case gf:for(e=ih(o,g,v,k),s=e.length,rt=0;rt<s;rt++)l=e[rt],u.Fe(v,k,l.x2,l.y2,l.ne,l.oe,l.$b,l.ac,.5,f),v=l.$b,k=l.ac;break;default:t.m("Segment not of valid type")}o.Sh&&(f.push([nt,tt]),cn(n,i,f,d))}cn(n,i,f,d);t.Ca(f);n.restore()}}};w.prototype.getDocumentPoint=w.prototype.wb=function(n,i){void 0===i&&(i=new h);n.Me()&&t.m("getDocumentPoint:s Spot must be real: "+n.toString());var r=this.Ja,u=this.lb;return i.p(n.x*(r.width+u)-u/2+r.x+n.offsetX,n.y*(r.height+u)-u/2+r.y+n.offsetY),this.se.Xa(i),i};w.prototype.jk=function(n,i){var r=this.Ta,h,s,f;if(null===r||null===this.fill&&null===this.stroke)return!1;if(h=r.Tb,s=this.lb/2,r.type!==nu||i||(s+=2),f=t.Jf(),f.assign(h),f.Wf(s+2,s+2),!f.La(n))return t.oc(f),!1;if(h=s+.0001,r.type===nu)return null===this.stroke?!1:(h=(r.D-r.sa)*(n.x-r.sa)+(r.F-r.ta)*(n.y-r.ta),0>(r.sa-r.D)*(n.x-r.D)+(r.ta-r.F)*(n.y-r.F)||0>h)?!1:(t.oc(f),u.Sd(r.sa,r.ta,r.D,r.F,s,n.x,n.y));if(r.type===kf){var e=r.sa,o=r.ta,l=r.D,a=r.F,r=Math.min(e,l),c=Math.min(o,a),e=Math.abs(l-e),o=Math.abs(a-o);if(f.x=r,f.y=c,f.width=e,f.height=o,null===this.fill){if(f.Wf(-h,-h),f.La(n))return t.oc(f),!1;f.Wf(h,h)}return null!==this.stroke&&f.Wf(s,s),s=f.La(n),t.oc(f),s}if(r.type===uf){if(e=r.sa,o=r.ta,l=r.D,a=r.F,r=Math.min(e,l),c=Math.min(o,a),e=Math.abs(l-e),o=Math.abs(a-o),e/=2,o/=2,r=n.x-(r+e),c=n.y-(c+o),null===this.fill){if(e-=h,o-=h,0>=e||0>=o||1>=r*r/(e*e)+c*c/(o*o))return t.oc(f),!1;e+=h;o+=h}return null!==this.stroke&&(e+=s,o+=s),t.oc(f),0>=e||0>=o?!1:1>=r*r/(e*e)+c*c/(o*o)}return r.type===wr?(t.oc(f),null===this.fill?fut(r,n.x,n.y,s):r.La(n,s,1<this.lb,i)):(t.m("Unknown Geometry type"),!1)};w.prototype.Kt=function(n,i,r,f){var e=this.Ea,c=this.qe,s,l,a,h,b,p,y,o;n=Math.max(n,0);i=Math.max(i,0);this.lh?s=this.Ta.Tb:(l=this.Eb,a=u.eB[l],void 0===a&&(h=u.oj[l],"string"==typeof h&&(h=u.oj[h]),"function"==typeof h?(a=h(null,100,100),u.eB[l]=a):t.m("Unsupported Figure:"+l)),s=a.Tb);var l=s.width,a=s.height,h=s.width,v=s.height;switch(to(this)){case yr:f=r=0;break;case cr:h=Math.max(n-c,0);v=Math.max(i-c,0);break;case du:h=Math.max(n-c,0);f=0;break;case of:r=0;v=Math.max(i-c,0)}isFinite(e.width)&&(h=e.width);isFinite(e.height)&&(v=e.height);e=this.Oe;s=this.Yf;r=Math.max(r,s.width)-c;f=Math.max(f,s.height)-c;h=Math.min(e.width,h);v=Math.min(e.height,v);h=isFinite(h)?Math.max(r,h):Math.max(l,r);v=isFinite(v)?Math.max(f,v):Math.max(a,f);r=est(this);switch(r){case yr:break;case cr:l=h;a=v;break;case ar:r=Math.min(h/l,v/a);isFinite(r)||(r=1);l*=r;a*=r;break;default:t.m(r+" is not a valid geometryStretch.")}if(this.lh){if(s=this.td,f=l,e=a,r=s.copy(),s=s.Tb,f/=s.width,e/=s.height,isFinite(f)||(f=1),isFinite(e)||(e=1),1!==f||1!==e)switch(r.type){case nu:case kf:case uf:r.sa*=f;r.ta*=e;r.D*=f;r.F*=e;break;case wr:for(s=r.Fb,b=s.length,p=0;p<b;p++){y=s.n[p];y.sa*=f;y.ta*=e;for(var y=y.Ka,k=y.length,w=0;w<k;w++){o=y.n[w];switch(o.type){case fr:case df:o.D*=f;o.F*=e;break;case au:o.Gb*=f;o.Xb*=e;o.ye*=f;o.ze*=e;o.D*=f;o.F*=e;break;case ee:o.Gb*=f;o.Xb*=e;o.D*=f;o.F*=e;break;case br:o.Ia*=f;o.Ua*=e;o.radiusX*=f;void 0!==o.radiusY&&(o.radiusY*=e);break;case gf:o.D*=f;o.F*=e;o.radiusX*=f;o.radiusY*=e;break;default:t.m("Unknown Segment type: "+o.type)}}}}this.Ta=r}else(null===this.Ta||this.Ta.to!==n-c||this.Ta.so!==i-c)&&(this.Ta=u.makeGeometry(this,l,a));s=this.Ta.Tb;Infinity===n||Infinity===i?eh(this,s.x-c/2,s.y-c/2,0===n&&0===l?0:s.width+c,0===i&&0===a?0:s.height+c):eh(this,-(c/2),-(c/2),h+c,v+c)};w.prototype.ik=function(n,t,i,r){dg(this,n,t,i,r)};w.prototype.getNearestIntersectionPoint=w.prototype.yl=function(n,t,i){return this.wp(n.x,n.y,t.x,t.y,i)};w.prototype.wp=function(n,i,r,f,e){var o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),c=o.m22*s,v=-o.m12*s,d=-o.m21*s,w=o.m11*s,l=s*(o.m21*o.dy-o.m22*o.dx),b=s*(o.m12*o.dx-o.m11*o.dy),o=n*c+i*d+l,s=n*v+i*w+b,c=r*c+f*d+l,v=r*v+f*w+b,d=this.lb/2,l=this.Ta,k,a,p,y,tt,it,nt,et,ot,ut;if(null===l&&(bi(this,Infinity,Infinity),l=this.Ta),b=l.Tb,w=!1,l.type===nu)if(1.5>=this.lb)w=u.uh(l.tc,l.Cc,l.pb,l.Bb,o,s,c,v,e);else{if(l.tc===l.pb?(k=d,a=0):(i=(l.Bb-l.Cc)/(l.pb-l.tc),a=d/Math.sqrt(1+i*i),k=a*i),f=t.Hb(),i=new h,u.uh(l.tc+k,l.Cc+a,l.pb+k,l.Bb+a,o,s,c,v,i)&&f.push(i),i=new h,u.uh(l.tc-k,l.Cc-a,l.pb-k,l.Bb-a,o,s,c,v,i)&&f.push(i),i=new h,u.uh(l.tc+k,l.Cc+a,l.tc-k,l.Cc-a,o,s,c,v,i)&&f.push(i),i=new h,u.uh(l.pb+k,l.Bb+a,l.pb-k,l.Bb-a,o,s,c,v,i)&&f.push(i),i=f.length,0===i)return t.Ca(f),!1;for(w=!0,a=Infinity,k=0;k<i;k++)c=f[k],p=(c.x-o)*(c.x-o)+(c.y-s)*(c.y-s),p<a&&(a=p,e.x=c.x,e.y=c.y);t.Ca(f)}else if(l.type===kf)i=b.x-d,w=u.yl(i,b.y-d,b.x+b.width+d,b.y+b.height+d,o,s,c,v,e);else if(l.type===uf)n:if(i=b.copy().Wf(d,d),0===i.width)w=u.uh(i.x,i.y,i.x,i.y+i.height,o,s,c,v,e);else if(0===i.height)w=u.uh(i.x,i.y,i.x+i.width,i.y,o,s,c,v,e);else{if(n=i.width/2,y=i.height/2,f=i.x+n,i=i.y+y,r=9999,o!==c&&(r=(s-v)/(o-c)),9999>Math.abs(r)){if(w=s-i-r*(o-f),0>n*n*r*r+y*y-w*w){e.x=NaN;e.y=NaN;w=!1;break n}d=Math.sqrt(n*n*r*r+y*y-w*w);c=(-(n*n*r*w)+n*y*d)/(y*y+n*n*r*r)+f;n=(-(n*n*r*w)-n*y*d)/(y*y+n*n*r*r)+f;v=r*(c-f)+w+i;i=r*(n-f)+w+i;f=Math.abs((o-c)*(o-c))+Math.abs((s-v)*(s-v));s=Math.abs((o-n)*(o-n))+Math.abs((s-i)*(s-i));f<s?(e.x=c,e.y=v):(e.x=n,e.y=i)}else{if(c=y*y,v=o-f,c-=c/(n*n)*v*v,0>c){e.x=NaN;e.y=NaN;w=!1;break n}d=Math.sqrt(c);v=i+d;i-=d;f=Math.abs(v-s);s=Math.abs(i-s);f<s?(e.x=o,e.y=v):(e.x=o,e.y=i)}w=!0}else if(l.type===wr){for(b=t.N(),k=c-o,a=v-s,a=k*k+a*a,e.x=c,e.y=v,k=0;k<l.Fb.count;k++){et=l.Fb.n[k];ot=et.Ka;tt=et.sa;it=et.ta;for(var ct=tt,lt=it,g,rt,st=0;st<ot.count;st++){g=ot.n[st];rt=g.type;p=g.D;nt=g.F;ut=!1;switch(rt){case df:ct=p;lt=nt;break;case fr:ut=ln(tt,it,p,nt,o,s,c,v,b);break;case au:ut=g.Gb;rt=g.Xb;var ft=g.ye,ht=g.ze,ut=u.dt(tt,it,ut,rt,ft,ht,p,nt,o,s,c,v,.5,b);break;case ee:ut=(tt+2*g.Gb)/3;rt=(it+2*g.Xb)/3;ft=(2*g.Gb+p)/3;ht=(2*g.Gb+p)/3;ut=u.dt(tt,it,ut,rt,ft,ht,p,nt,o,s,c,v,.5,b);break;case br:case gf:for(nt=g.type===br?os(g,et):ih(g,et,tt,it),rt=nt.length,ft=0;ft<rt;ft++)y=nt[ft],0===ft&&ln(tt,it,y.x1,y.y1,o,s,c,v,b)&&(p=fw(o,s,b,a,e),p<a&&(a=p,w=!0)),u.dt(y.x1,y.y1,y.x2,y.y2,y.ne,y.oe,y.$b,y.ac,o,s,c,v,.5,b)&&(p=fw(o,s,b,a,e),p<a&&(a=p,w=!0));p=y.$b;nt=y.ac;break;default:t.m("Unknown Segment type: "+g.type)}tt=p;it=nt;ut&&(p=fw(o,s,b,a,e),p<a&&(a=p,w=!0));g.Ct&&(p=ct,nt=lt,ln(tt,it,p,nt,o,s,c,v,b)&&(p=fw(o,s,b,a,e),p<a&&(a=p,w=!0)))}}o=r-n;s=f-i;i=Math.sqrt(o*o+s*s);0!==i&&(o/=i,s/=i);e.x-=o*d;e.y-=s*d;t.B(b)}else t.m("Invalid Geometry type");return w?(this.transform.Xa(e),!0):!1};w.prototype.containedInRect=w.prototype.Ym=function(n,i){var r;if(void 0===i)return n.kk(this.pa);r=this.Ta;null===r&&(bi(this,Infinity,Infinity),r=this.Ta);var r=r.Tb,f=this.lb/2,e=!1,u=t.N();return u.p(r.x-f,r.y-f),n.La(i.Xa(u))&&(u.p(r.x-f,r.bottom+f),n.La(i.Xa(u))&&(u.p(r.right+f,r.bottom+f),n.La(i.Xa(u))&&(u.p(r.right+f,r.y-f),n.La(i.Xa(u))&&(e=!0)))),t.B(u),e};w.prototype.intersectsRect=w.prototype.Xf=function(n,i){var u,f,e,o;if(this.Ym(n,i)||void 0===i&&(i=this.transform,n.kk(this.pa)))return!0;u=t.Ah();u.set(i);u.FA();var s=n.left,c=n.right,h=n.top,l=n.bottom,r=t.N();return(r.p(s,h),u.Xa(r),this.jk(r,!0))?(t.B(r),!0):(r.p(c,h),u.Xa(r),this.jk(r,!0))?(t.B(r),!0):(r.p(s,l),u.Xa(r),this.jk(r,!0))?(t.B(r),!0):(r.p(c,l),u.Xa(r),this.jk(r,!0))?(t.B(r),!0):(f=t.N(),e=t.N(),u.set(i),u.XA(this.transform),u.FA(),f.x=c,f.y=h,f.transform(u),r.x=s,r.y=h,r.transform(u),o=!1,ic(this,r,f,e)?o=!0:(r.x=c,r.y=l,r.transform(u),ic(this,r,f,e)?o=!0:(f.x=s,f.y=l,f.transform(u),ic(this,r,f,e)?o=!0:(r.x=s,r.y=h,r.transform(u),ic(this,r,f,e)&&(o=!0)))),t.B(r),t.bf(u),t.B(f),t.B(e),o)};w.prototype.bF=function(n,i,r){function p(n,t){for(var r,u=n.length,i=0;i<u;i++)if(r=n[i],t.nt(r[0],r[1])>o)return!0;return!1}var o,e,h;if(r&&null!==this.fill&&this.jk(n,!0))return!0;if(o=n.nk(i),i=o,1.5<this.lb&&(o=this.lb/2+Math.sqrt(o),o*=o),e=this.Ta,null===e&&(bi(this,Infinity,Infinity),e=this.Ta),!r){var f=e.Tb,s=f.x,c=f.y,l=f.x+f.width,f=f.y+f.height;if(yo(n.x,n.y,s,c)<=o&&yo(n.x,n.y,l,c)<=o&&yo(n.x,n.y,s,f)<=o&&yo(n.x,n.y,l,f)<=o)return!0}if(s=e.tc,c=e.Cc,l=e.pb,f=e.Bb,e.type===nu){if(r=ur(n.x,n.y,s,c,l,f),e=(s-l)*(n.x-l)+(c-f)*(n.y-f),r<=(0<=(l-s)*(n.x-s)+(f-c)*(n.y-c)&&0<=e?o:i))return!0}else{if(e.type===kf)return i=!1,r&&(i=ur(n.x,n.y,s,c,s,f)<=o||ur(n.x,n.y,s,c,l,c)<=o||ur(n.x,n.y,l,c,l,f)<=o||ur(n.x,n.y,s,f,l,f)<=o),i;if(e.type===uf){i=n.x-(s+l)/2;var e=n.y-(c+f)/2,a=Math.abs(l-s)/2,v=Math.abs(f-c)/2;if(0===a||0===v)return r=ur(n.x,n.y,s,c,l,f),r<=o?!0:!1;if(r){if(n=u.OI(a,v,i,e),n*n<=o)return!0}else return yo(i,e,-a,0)>=o||yo(i,e,0,-v)>=o||yo(i,e,0,v)>=o||yo(i,e,a,0)>=o?!1:!0}else if(e.type===wr){if(f=e.Tb,s=f.x,c=f.y,l=f.x+f.width,f=f.y+f.height,n.x>l&&n.x<s&&n.y>f&&n.y<c&&ur(n.x,n.y,s,c,s,f)>o&&ur(n.x,n.y,s,c,l,c)>o&&ur(n.x,n.y,l,f,s,f)>o&&ur(n.x,n.y,l,f,l,c)>o)return!1;if(i=Math.sqrt(o),r){if(null===this.fill?fut(e,n.x,n.y,i):e.La(n,i,!0))return!0}else{for(r=e.Fb,i=0;i<r.count;i++){if(s=r.n[i],a=s.sa,v=s.ta,n.nt(a,v)>o)return!1;for(c=s.Ka.n,l=c.length,f=0;f<l;f++){h=c[f];switch(h.type){case df:case fr:if(a=h.D,v=h.F,n.nt(a,v)>o)return!1;break;case au:if((e=t.Hb(),u.Fe(a,v,h.Gb,h.Xb,h.ye,h.ze,h.D,h.F,.8,e),a=p(e,n),t.Ca(e),a)||(a=h.D,v=h.F,n.nt(a,v)>o))return!1;break;case ee:if((e=t.Hb(),u.Wp(a,v,h.Gb,h.Xb,h.D,h.F,.8,e),a=p(e,n),t.Ca(e),a)||(a=h.D,v=h.F,n.nt(a,v)>o))return!1;break;case br:case gf:var h=h.type===br?os(h,s):ih(h,s,a,v),w=h.length,y=null,e=t.Hb();for(i=0;i<w;i++)if(y=h[i],e.length=0,u.Fe(y.x1,y.y1,y.x2,y.y2,y.ne,y.oe,y.$b,y.ac,.8,e),p(e,n))return t.Ca(e),!1;t.Ca(e);null!==y&&(a=y.$b,v=y.ac);break;default:t.m("Unknown Segment type: "+h.type)}}}return!0}}}return!1};t.g(w,"geometry",w.prototype.td);t.defineProperty(w,{td:"geometry"},function(){return this.Lk?this.Lk:this.Ta},function(n){var u=this.Ta,i;u!==n&&(null!==n?(r&&t.l(n,rt,w,"geometry"),this.Lk=this.Ta=n.freeze()):this.Lk=this.Ta=null,i=this.U,i&&(i.Rj=NaN),this.lh=!0,this.ja(),this.j("geometry",u,n))});t.g(w,"geometryString",w.prototype.iF);t.defineProperty(w,{iF:"geometryString"},function(){return this.td.toString()},function(n){var i=rp(n),r;n=i.normalize();this.td=i;i=t.N();r=this.position;r.P()?i.p(r.x-n.x,r.y-n.y):i.p(-n.x,-n.y);this.position=i;t.B(i)});t.defineProperty(w,{JA:"isGeometryPositioned"},function(){return this.ir},function(n){r&&t.i(n,"boolean",w,"isGeometryPositioned");var i=this.ir;i!==n&&(this.ir=n,this.ja(),this.j("isGeometryPositioned",i,n))});w.prototype.df=function(){this.lh?this.Lk=null:this.Ta=null;this.ja()};t.g(w,"fill",w.prototype.fill);t.defineProperty(w,{fill:"fill"},function(){return this.Yc},function(n){var i=this.Yc;i!==n&&(r&&null!==n&&t.fp(n,"Shape.fill"),n instanceof ht&&n.freeze(),this.Yc=n,this.na(),this.j("fill",i,n))});t.g(w,"stroke",w.prototype.stroke);t.defineProperty(w,{stroke:"stroke"},function(){return this.Kb},function(n){var i=this.Kb;i!==n&&(r&&null!==n&&t.fp(n,"Shape.stroke"),n instanceof ht&&n.freeze(),this.Kb=n,this.na(),this.j("stroke",i,n))});t.g(w,"strokeWidth",w.prototype.lb);t.defineProperty(w,{lb:"strokeWidth"},function(){return this.qe},function(n){var u=this.qe,i;u!==n&&((r&&t.q(n,w,"strokeWidth"),0<=n)?(this.qe=n,this.ja(),i=this.U,i&&(i.Rj=NaN),this.j("strokeWidth",u,n)):t.ha(n,"val >= 0",w,"strokeWidth:val"))});t.g(w,"strokeCap",w.prototype.OG);t.defineProperty(w,{OG:"strokeCap"},function(){return this.Ro},function(n){var i=this.Ro;i!==n&&("string"!=typeof n||"butt"!==n&&"round"!==n&&"square"!==n?t.ha(n,'"butt", "round", or "square"',w,"strokeCap"):(this.Ro=n,this.na(),this.j("strokeCap",i,n)))});t.g(w,"strokeJoin",w.prototype.rK);t.defineProperty(w,{rK:"strokeJoin"},function(){return this.So},function(n){var i=this.So;i!==n&&("string"!=typeof n||"miter"!==n&&"bevel"!==n&&"round"!==n?t.ha(n,'"miter", "bevel", or "round"',w,"strokeJoin"):(this.So=n,this.na(),this.j("strokeJoin",i,n)))});t.g(w,"strokeMiterLimit",w.prototype.sK);t.defineProperty(w,{sK:"strokeMiterLimit"},function(){return this.Km},function(n){var u=this.Km,i;u!==n&&((r&&t.q(n,w,"strokeMiterLimit"),0<n)?(this.Km=n,this.na(),i=this.U,i&&(i.Rj=NaN),this.j("strokeMiterLimit",u,n)):t.ha(n,"val > 0",w,"strokeWidth:val"))});t.g(w,"strokeDashArray",w.prototype.Mx);t.defineProperty(w,{Mx:"strokeDashArray"},function(){return this.Jm},function(n){var u=this.Jm,f,r,i;if(u!==n){if(null===n||Array.isArray(n)||t.jc(n,"Array",w,"strokeDashArray:val"),null!==n)for(f=n.length,r=0;r<f;r++)i=n[r],("number"!=typeof i||isNaN(i)||0>i||!isFinite(i))&&t.m("strokeDashArray:val "+i+" is a negative number or not a real number.");this.Jm=n;this.na();this.j("strokeDashArray",u,n)}});t.g(w,"strokeDashOffset",w.prototype.PG);t.defineProperty(w,{PG:"strokeDashOffset"},function(){return this.qd},function(n){var i=this.qd;i!==n&&(r&&t.q(n,w,"strokeDashOffset"),0<=n&&(this.qd=n,this.na(),this.j("strokeDashOffset",i,n)))});t.g(w,"figure",w.prototype.Eb);t.defineProperty(w,{Eb:"figure"},function(){return this.io},function(n){var f=this.io,i;f!==n&&(r&&t.i(n,"string",w,"figure"),i=u.oj[n],"function"==typeof i?i=n:(i=u.oj[n.toLowerCase()])||t.m("Unknown Shape.figure: "+n),f!==i&&((n=this.U)&&(n.Rj=NaN),this.io=i,this.lh=!1,this.df(),this.j("figure",f,i)))});t.g(w,"toArrow",w.prototype.Gn);t.defineProperty(w,{Gn:"toArrow"},function(){return this.Uo},function(n){var f=this.Uo,i;!0===n?n="Standard":!1===n&&(n="");f!==n&&(r&&t.i(n,"string",w,"toArrow"),i=u.qE(n),null===i?t.m("Unknown Shape.toArrow: "+n):f!==i&&(this.Uo=i,this.lh=!1,this.df(),ost(this),this.j("toArrow",f,i)))});t.g(w,"fromArrow",w.prototype.Vw);t.defineProperty(w,{Vw:"fromArrow"},function(){return this.mo},function(n){var f=this.mo,i;!0===n?n="Standard":!1===n&&(n="");f!==n&&(r&&t.i(n,"string",w,"fromArrow"),i=u.qE(n),null===i?t.m("Unknown Shape.fromArrow: "+n):f!==i&&(this.mo=i,this.lh=!1,this.df(),ost(this),this.j("fromArrow",f,i)))});t.defineProperty(w,{G:"spot1"},function(){return this.Yi},function(n){t.l(n,e,w,"spot1");var i=this.Yi;i.O(n)||(this.Yi=n=n.ba(),this.ja(),this.j("spot1",i,n))});t.defineProperty(w,{H:"spot2"},function(){return this.Zi},function(n){t.l(n,e,w,"spot2");var i=this.Zi;i.O(n)||(this.Zi=n=n.ba(),this.ja(),this.j("spot2",i,n))});t.defineProperty(w,{Kc:"parameter1"},function(){return this.Yr},function(n){var t=this.Yr;t!==n&&(this.Yr=n,this.ja(),this.j("parameter1",t,n))});t.defineProperty(w,{Vt:"parameter2"},function(){return this.Zr},function(n){var t=this.Zr;t!==n&&(this.Zr=n,this.ja(),this.j("parameter2",t,n))});t.A(w,{Ja:"naturalBounds"},function(){if(null!==this.Ta)return this.nd.assign(this.Ta.Tb),this.nd;var n=this.Ea;return new p(0,0,n.width,n.height)});t.g(w,"isRectangular",w.prototype.vJ);t.defineProperty(w,{vJ:"isRectangular"},function(){return this.or},function(n){var i=this.or;i!==n&&(r&&t.i(n,"boolean",w,"isRectangular"),this.or=n,this.ja(),this.j("isRectangular",i,n))});t.g(w,"pathObject",w.prototype.cB);t.defineProperty(w,{cB:"pathObject"},function(){return this.as},function(n){var i=this.as;i!==n&&(r&&t.l(n,f,w,"pathObject"),this.as=n,this.na(),this.j("pathObject",i,n))});t.g(w,"geometryStretch",w.prototype.Ww);t.defineProperty(w,{Ww:"geometryStretch"},function(){return this.dr},function(n){var i=this.dr;i!==n&&(t.Fa(n,f,w,"geometryStretch"),this.dr=n,this.j("geometryStretch",i,n))});t.g(w,"interval",w.prototype.interval);t.defineProperty(w,{interval:"interval"},function(){return this.hr},function(n){var i=this.hr;r&&t.q(n,w,"interval");n=Math.floor(n);i!==n&&0<=n&&(this.hr=n,this.h&&ls(this.h),this.ja(),this.j("interval",i,n))});w.defineFigureGenerator=function(n,i){var r,u;t.i(n,"string",w,"defineFigureGenerator:name");t.i(i,"function",w,"defineFigureGenerator:func");r=n.toLowerCase();""!==n&&"none"!==r&&n!==r||t.m("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+n);u=w.FigureGenerators;u[n]=i;u[r]=n};w.defineArrowheadGeometry=function(n,i){var r,u;t.i(n,"string",w,"defineArrowheadGeometry:name");t.i(i,"string",w,"defineArrowheadGeometry:pathstr");r=n.toLowerCase();""!==n&&"none"!==r&&n!==r||t.m("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+n);u=w.ArrowheadGeometries;u[n]=i;u[r]=n};t.ka("TextBlock",ot);t.Qa(ot,f);ot.getEllipsis=function(){return t.ot};ot.setEllipsis=function(n){t.ot=n;t.Uw={};t.wA=0};ot.prototype.cloneProtected=function(n){f.prototype.cloneProtected.call(this,n);n.re=this.re;n.Kb=this.Kb;n.$g=this.$g;n.ae=this.ae;n.lr=this.lr;n.jm=this.jm;n.im=this.im;n.Nm=this.Nm;n.cl=this.cl;n.fh=this.fh;n.sv=this.sv;n.sz=this.sz;n.rz=this.rz;n.lo=this.lo;n.Eo=this.Eo;n.Yq=this.Yq;n.Ms=this.Ms;n.fl=this.fl;n.qf=this.qf;n.ck=this.ck;n.dk=this.dk;n.Qj=this.Qj};ot.prototype.toString=function(){return 22<this.re.length?'TextBlock("'+this.re.substring(0,20)+'"...)':'TextBlock("'+this.re+'")'};ot.None=an=t.w(ot,"None",0);ot.WrapFit=sst=t.w(ot,"WrapFit",1);ot.WrapDesiredSize=hst=t.w(ot,"WrapDesiredSize",2);ot.OverflowClip=cst=t.w(ot,"OverflowClip",0);ot.OverflowEllipsis=ew=t.w(ot,"OverflowEllipsis",1);ot.prototype.ja=function(){f.prototype.ja.call(this);this.rz=this.sz=null};t.g(ot,"font",ot.prototype.font);t.defineProperty(ot,{font:"font"},function(){return this.$g},function(n){var i=this.$g;i!==n&&(r&&t.i(n,"string",ot,"font"),this.$g=n,this.lo=null,this.ja(),this.j("font",i,n))});t.g(ot,"text",ot.prototype.text);t.defineProperty(ot,{text:"text"},function(){return this.re},function(n){var t=this.re;n=null!==n&&void 0!==n?n.toString():"";t!==n&&(this.re=n,this.ja(),this.j("text",t,n))});t.g(ot,"textAlign",ot.prototype.textAlign);t.defineProperty(ot,{textAlign:"textAlign"},function(){return this.ae},function(n){var i=this.ae;i!==n&&(r&&t.i(n,"string",ot,"textAlign"),"start"===n||"end"===n||"left"===n||"right"===n||"center"===n?(this.ae=n,this.na(),this.j("textAlign",i,n)):t.ha(n,'"start", "end", "left", "right", or "center"',ot,"textAlign"))});t.A(ot,{Ja:"naturalBounds"},function(){if(!this.nd.P()){var t=vn(this,this.re,{},999999).width,i=vst(this,t,{}),n=this.Ea;isNaN(n.width)||(t=n.width);isNaN(n.height)||(i=n.height);th(this.nd,t,i)}return this.nd});t.g(ot,"isMultiline",ot.prototype.kx);t.defineProperty(ot,{kx:"isMultiline"},function(){return this.lr},function(n){var i=this.lr;i!==n&&(r&&t.i(n,"boolean",ot,"isMultiline"),this.lr=n,this.ja(),this.j("isMultiline",i,n))});t.g(ot,"isUnderline",ot.prototype.yJ);t.defineProperty(ot,{yJ:"isUnderline"},function(){return this.jm},function(n){var i=this.jm;i!==n&&(r&&t.i(n,"boolean",ot,"isUnderline"),this.jm=n,this.na(),this.j("isUnderline",i,n))});t.g(ot,"isStrikethrough",ot.prototype.wJ);t.defineProperty(ot,{wJ:"isStrikethrough"},function(){return this.im},function(n){var i=this.im;i!==n&&(r&&t.i(n,"boolean",ot,"isStrikethrough"),this.im=n,this.na(),this.j("isStrikethrough",i,n))});t.g(ot,"wrap",ot.prototype.OB);t.defineProperty(ot,{OB:"wrap"},function(){return this.Nm},function(n){var i=this.Nm;i!==n&&(r&&t.Fa(n,ot,ot,"wrap"),this.Nm=n,this.ja(),this.j("wrap",i,n))});t.g(ot,"overflow",ot.prototype.overflow);t.defineProperty(ot,{overflow:"overflow"},function(){return this.cl},function(n){var i=this.cl;i!==n&&(r&&t.Fa(n,ot,ot,"overflow"),this.cl=n,this.ja(),this.j("overflow",i,n))});t.g(ot,"stroke",ot.prototype.stroke);t.defineProperty(ot,{stroke:"stroke"},function(){return this.Kb},function(n){var i=this.Kb;i!==n&&(r&&null!==n&&t.fp(n,"TextBlock.stroke"),n instanceof ht&&n.freeze(),this.Kb=n,this.na(),this.j("stroke",i,n))});t.A(ot,{NF:"lineCount"},function(){return this.fh});t.g(ot,"editable",ot.prototype.Mw);t.defineProperty(ot,{Mw:"editable"},function(){return this.Yq},function(n){var i=this.Yq;i!==n&&(r&&t.i(n,"boolean",ot,"editable"),this.Yq=n,this.j("editable",i,n))});t.g(ot,"textEditor",ot.prototype.EB);t.defineProperty(ot,{EB:"textEditor"},function(){return this.Ms},function(n){var i=this.Ms;i!==n&&(n instanceof HTMLElement||t.m("textEditor must be an HTMLElement"),this.Ms=n,this.j("textEditor",i,n))});t.g(ot,"errorFunction",ot.prototype.pt);t.defineProperty(ot,{pt:"errorFunction"},function(){return this.qf},function(n){var i=this.qf;i!==n&&(null!==n&&t.i(n,"function",ot,"errorFunction"),this.qf=n,this.j("errorFunction",i,n))});ot.prototype.rl=function(n,i){var l,a,h,b,f,r;if(null!==this.Kb&&0!==this.re.length&&null!==this.$g){l=this.Ja.width;a=gv(this);n.textAlign=this.ae;gu(this,n,this.Kb,!0);(this.jm||this.im)&&gu(this,n,this.Kb,!1);var p=this.Eo,w=0,k=!1,s=t.qc(0,0);this.se.Xa(s);h=t.qc(0,a);this.se.Xa(h);b=s.nk(h);t.B(s);t.B(h);s=i.scale;8>b*s*s&&(k=!0);for(var b=this.ck,s=this.dk,h=p.Ag.length,v=0;v<h;v++){f=p.Ag[v];r=p.Tf[v];f>l&&(f=l);var w=w+b,c=r,r=n,o=w,y=l,e=a,u=0;k?("start"===this.ae||"left"===this.ae?u=0:"end"===this.ae||"right"===this.ae?u=y-f:"center"===this.ae?u=(y-f)/2:t.m("textAlign must be start, end, left, right, or center"),r.fillRect(0+u,o+.25*e,f,1)):("start"===this.ae||"left"===this.ae?u=0:"end"===this.ae||"right"===this.ae?u=y:"center"===this.ae?u=y/2:t.m("textAlign must be start, end, left, right, or center"),r.fillText(c,0+u,o+e-.25*e),c=e/20|0,this.jm&&("end"===this.ae||"right"===this.ae?u-=f:"center"===this.ae&&(u-=f/2),r.beginPath(),r.lineWidth=c,r.moveTo(0+u,o+e-.2*e),r.lineTo(0+u+f,o+e-.2*e),r.stroke()),this.im&&(r.beginPath(),r.lineWidth=c,o=o+e-e/2.2|0,0!=c%2&&(o+=.5),r.moveTo(0,o),r.lineTo(0+f,o),r.stroke()));w+=a+s}}};ot.prototype.Kt=function(n,i,r,u){var o={},f=0,s=0,l;if(isNaN(this.Ea.width)){if(f=this.re,0===f.length)f=0;else if(this.kx){for(var e=s=0,c=!1,h={Bh:0};!c;)l=ow(f,e,h),-1===l&&(l=f.length,c=!0),e=le(f.substr(e,l-e).replace(/^\s+|\s+$/g,""),this.$g),e>s&&(s=e),e=h.Bh;f=s}else s=ow(f,0,{}),0<=s&&(f=f.substr(0,s)),f=e=le(f,this.$g);f=Math.min(f,n/this.scale);f=Math.max(8,f)}else f=this.Ea.width;if(this.ia&&(f=Math.min(f,this.ia.Oe.width),f=Math.max(f,this.ia.Yf.width)),s=vst(this,f,o),h=s=isNaN(this.Ea.height)?Math.min(s,i/this.scale):this.Ea.height,0!==o.Gg&&1!==o.Tf.length&&this.cl===ew&&(i=this.$g,c=this.cl===ew?ast(i):0,e=this.ck+this.dk,e=Math.max(0,gv(this)+e),h=Math.max(Math.floor(h/e)-1,0),!(h+1>=o.Tf.length))){for(e=o.Tf[h],n=Math.max(1,n-c);le(e,i)>n&&1<e.length;)e=e.substr(0,e.length-1);e+=t.ot;n=le(e,i);o.Tf[h]=e;o.Tf=o.Tf.slice(0,h+1);o.Ag[h]=n;o.Ag=o.Ag.slice(0,h+1);o.Bh=o.Tf.length;o.Gg=Math.max(o.Gg,n)}(this.OB===sst||isNaN(this.Ea.width))&&(f=o.Gg,isNaN(this.Ea.width)&&(f=Math.max(8,f)));f=Math.max(r,f);s=Math.max(u,s);th(this.nd,f,s);eh(this,0,0,f,s);this.Eo=o};ot.prototype.ik=function(n,t,i,r){dg(this,n,t,i,r)};t.g(ot,"textValidation",ot.prototype.lu);t.defineProperty(ot,{lu:"textValidation"},function(){return this.fl},function(n){var i=this.fl;i!==n&&(null!==n&&t.i(n,"function",ot,"textValidation"),this.fl=n,this.j("textValidation",i,n))});t.g(ot,"spacingAbove",ot.prototype.oK);t.defineProperty(ot,{oK:"spacingAbove"},function(){return this.ck},function(n){var t=this.ck;t!==n&&(this.ck=n,this.j("spacingAbove",t,n))});t.g(ot,"spacingBelow",ot.prototype.pK);t.defineProperty(ot,{pK:"spacingBelow"},function(){return this.dk},function(n){var t=this.dk;t!==n&&(this.dk=n,this.j("spacingBelow",t,n))});t.g(ot,"maxLines",ot.prototype.KJ);t.defineProperty(ot,{KJ:"maxLines"},function(){return this.Qj},function(n){var t=this.Qj;t!==n&&(this.Qj=n,this.j("maxLines",t,n))});t.ka("Picture",ir);t.Qa(ir,f);ir.clearCache=yst=function(n){void 0===n&&(n="");t.i(n,"string",ir,"clearCache:url");""!==n?t.yt[n]&&(delete t.yt[n],t.$w--):(t.yt={},t.$w=0)};ir.prototype.cloneProtected=function(n){f.prototype.cloneProtected.call(this,n);n.element=this.jg;n.Es=this.Es;n.bk.assign(this.bk);n.po=this.po;n.qf=this.qf};ir.prototype.toString=function(){return"Picture("+this.source+")#"+t.ud(this)};t.g(ir,"element",ir.prototype.element);t.defineProperty(ir,{element:"element"},function(){return this.jg},function(n){var r=this.jg,i;r!==n&&(n instanceof HTMLImageElement||n instanceof HTMLVideoElement||n instanceof HTMLCanvasElement||t.m("Picture.element must be an instance of Image, Canvas, or Video."),this.av=!1,i=this,n instanceof HTMLCanvasElement?this.jv=!0:(this.jv=!1,n.onerror=function(n){i.av=!0;null!==i.qf&&i.qf(i,n)}),this.jg=n,!0===n.complete||void 0===n.complete?(this.qm=!0,this.Ea.P()||(hf(this,!1),this.ja())):(t.KB.push(this),null===t.zx&&(t.zx=setInterval(function(){for(var o,n,i,r,u,f=[],s=t.KB,h=s.length,e=0;e<h;e++){if(o=s[e],n=o,i=n.jg,i)if(i.complete){if(n.qm=!0,n.Ea.P()||(hf(n,!1),n.ja()),n.h)n.Ea.P()||n.h.Sc(),n.h.na();else{if(n=t.oA,r=n.length,0===r)for(var r=document.getElementsByTagName("canvas"),c=r.length,i=0;i<c;i++)u=r[i],u.parentElement&&u.parentElement.W&&n.push(u.parentElement.W);for(r=n.length,i=0;i<r;i++)n[i].na()}n=!0}else n=!1;else n=!0;n||f.push(o)}0===f.length&&(clearInterval(t.zx),t.zx=null);t.KB=f},200))),this.j("element",r,n),this.na())});t.g(ir,"source",ir.prototype.source);t.defineProperty(ir,{source:"source"},function(){return this.Es},function(n){var u=this.Es,i,r;u!==n&&(t.i(n,"string",ir,"source"),this.Es=n,this.av=!1,i=t.yt,void 0!==i[n]?this.element=i[n]:(10<t.$w&&(yst(),i=t.yt),r=document.createElement("img"),r.src=n,i[n]=r,t.$w++,r instanceof HTMLImageElement&&(this.element=r)),this.na(),this.j("source",u,n))});t.g(ir,"sourceRect",ir.prototype.ti);t.defineProperty(ir,{ti:"sourceRect"},function(){return this.bk},function(n){var i=this.bk;i.O(n)||(t.l(n,p,ir,"sourceRect"),this.bk=n=n.ba(),this.na(),this.j("sourceRect",i,n))});t.g(ir,"imageStretch",ir.prototype.nJ);t.defineProperty(ir,{nJ:"imageStretch"},function(){return this.po},function(n){var i=this.po;i!==n&&(t.Fa(n,f,ir,"imageStretch"),this.po=n,this.na(),this.j("imageStretch",i,n))});t.g(ir,"errorFunction",ir.prototype.pt);t.defineProperty(ir,{pt:"errorFunction"},function(){return this.qf},function(n){var r=this.qf,i;r!==n&&(null!==n&&t.i(n,"function",ir,"errorFunction"),this.qf=n,this.jg&&(i=this,this.jg.onerror=function(n){null!==i.qf&&i.qf(i,n)}),this.j("errorFunction",r,n))});ir.prototype.rl=function(n,i){var u,r;if(!i.eo){if(null===this.Ks)if(null===this.jg)this.Ks=!1;else{u=document.createElement("canvas").getContext("2d");0!==this.jg.width&&0!==this.jg.height&&u.drawImage(this.jg,0,0);try{u.getImageData(0,0,1,1);this.Ks=!1}catch(a){this.Ks=!0}}if(this.Ks)return}if(this.qm&&!this.av&&(u=this.jg,null!==u)){r=u.src;null!==r&&""!==r||t.m("Element has no source attribute: "+u);var r=this.Ja,c=0,l=0,f=this.jv,s=f?+u.width:u.naturalWidth,f=f?+u.height:u.naturalHeight;if(void 0===s&&u.videoWidth&&(s=u.videoWidth),void 0===f&&u.videoHeight&&(f=u.videoHeight),s=s||r.width,f=f||r.height,0!==s&&0!==f){this.ti.P()&&(c=this.bk.x,l=this.bk.y,s=this.bk.width,f=this.bk.height);var e=s,o=f,h=this.po;switch(h){case yr:if(this.ti.P())break;c+=Math.max((e-r.width)/2,0);l+=Math.max((o-r.height)/2,0);s=Math.min(r.width,e);f=Math.min(r.height,o);break;case cr:e=r.width;o=r.height;break;case ar:case vv:h===ar?(h=Math.min(r.height/o,r.width/e),e*=h,o*=h):h===vv&&(h=Math.max(r.height/o,r.width/e),e*=h,o*=h,c+=(e-r.width)/2,l+=(o-r.height)/2,s*=1/(e/r.width),f*=1/(o/r.height),e=r.width,o=r.height)}try{n.drawImage(u,c,l,s,f,Math.max((r.width-e)/2,0),Math.max((r.height-o)/2,0),Math.min(r.width,e),Math.min(r.height,o))}catch(v){}}}};t.A(ir,{Ja:"naturalBounds"},function(){return this.nd});ir.prototype.Kt=function(n,t,i,r){var f=this.Ea,e=to(this),u=this.jg,o=this.jv;(o||!this.qm&&u&&u.complete)&&(this.qm=!0);null===u&&(isFinite(n)||(n=0),isFinite(t)||(t=0));isFinite(f.width)||e===cr||e===du?(isFinite(n)||(n=this.ti.P()?this.ti.width:o?+u.width:u.naturalWidth),i=0):null!==u&&!1!==this.qm&&(n=this.ti.P()?this.ti.width:o?+u.width:u.naturalWidth);isFinite(f.height)||e===cr||e===of?(isFinite(t)||(t=this.ti.P()?this.ti.height:o?+u.height:u.naturalHeight),r=0):null!==u&&!1!==this.qm&&(t=this.ti.P()?this.ti.height:o?+u.height:u.naturalHeight);isFinite(f.width)&&(n=f.width);isFinite(f.height)&&(t=f.height);f=this.Oe;e=this.Yf;i=Math.max(i,e.width);r=Math.max(r,e.height);n=Math.min(f.width,n);t=Math.min(f.height,t);n=Math.max(i,n);t=Math.max(r,t);null===u||u.complete||(isFinite(n)||(n=0),isFinite(t)||(t=0));th(this.nd,n,t);eh(this,0,0,n,t)};ir.prototype.ik=function(n,t,i,r){dg(this,n,t,i,r)};ft=pst.prototype;ft.reset=function(){this.s=new rt;this.bc=null};ft.jb=function(n){null===this.s&&t.m("StreamGeometryContext has been closed");null===this.bc&&t.m("Need to call beginFigure first");this.bc.qi=n};ft.moveTo=function(n,i,r){null===this.s&&t.m("StreamGeometryContext has been closed");null===this.bc&&t.m("Need to call beginFigure first");var u=new ut(df);u.D=n;u.F=i;r&&u.close();this.bc.Ka.add(u)};ft.lineTo=function(n,i,r){null===this.s&&t.m("StreamGeometryContext has been closed");null===this.bc&&t.m("Need to call beginFigure first");var u=new ut(fr);u.D=n;u.F=i;r&&u.close();this.bc.Ka.add(u)};ft.arcTo=function(n,i,r,u,f,e,o){null===this.s&&t.m("StreamGeometryContext has been closed");null===this.bc&&t.m("Need to call beginFigure first");var s=new ut(br);s.yh=n;s.vi=i;s.Ia=r;s.Ua=u;s.radiusX=f;s.radiusY=e?e:f;o&&s.close();this.bc.Ka.add(s)};u.makeGeometry=function(n,i,r){var f=n.Ea,e=f.width,f=f.height;return void 0!==i&&!isNaN(i)&&isFinite(i)&&(e=i),void 0!==r&&!isNaN(r)&&isFinite(r)&&(f=r),isFinite(e)||(e=100),isFinite(f)||(f=100),i=void 0,"None"!==n.Gn?i=u.Rm[n.Gn]:"None"!==n.Vw?i=u.Rm[n.Vw]:(r=u.oj[n.Eb],"string"==typeof r&&(r=u.oj[r]),void 0===r&&t.m("Unknown Shape.figure: "+n.Eb),i=r(n,e,f),i.to=e,i.so=f),void 0===i&&(r=u.oj.Rectangle)&&(i=r(n,e,f)),i};u.hj=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){var y=1-s;n=n*y+i*s;t=t*y+r*s;i=i*y+u*s;r=r*y+f*s;u=u*y+e*s;f=f*y+o*s;o=n*y+i*s;e=t*y+r*s;i=i*y+u*s;r=r*y+f*s;h.x=n;h.y=t;c.x=o;c.y=e;l.x=o*y+i*s;l.y=e*y+r*s;a.x=i;a.y=r;v.x=u;v.y=f};u.ip=function(n){var i,r,f;for(n=u.an(n),i=t.Hb(),i[0]=n[0],r=1,f=1;r<n.length;r+=2,f+=3)i[f]=n[r],i[f+1]=n[r],i[f+2]=n[r+1];return t.Ca(n),i};u.an=function(n){var r=u.pl(n),f=t.Hb(),s=Math.floor(r.length/2),e=r.length-1,i;for(n=0==n%2?2:1,i=0;i<e;i++){var o=r[i],c=r[i+1],l=r[(s+i-1)%e],a=r[(s+i+n)%e];f[2*i]=o;f[2*i+1]=u.wl(o.x,o.y,l.x,l.y,c.x,c.y,a.x,a.y,new h)}return f[f.length]=f[0],t.Ca(r),f};u.wl=function(n,t,i,r,u,f,e,o,s){return i=n-i,e=u-e,0===i||0===e?0===i?(e=(f-o)/e,o=n,u=e*o+(f-e*u)):(r=(t-r)/i,o=u,u=r*o+(t-r*n)):(r=(t-r)/i,e=(f-o)/e,n=t-r*n,o=(f-e*u-n)/(r-e),u=r*o+n),s.p(o,u),s};u.pl=function(n){for(var i=t.Hb(),f=1.5*Math.PI,u=0,r=0;r<n;r++)u=2*Math.PI/n*r+f,i[r]=new h(.5+.5*Math.cos(u),.5+.5*Math.sin(u));return i.push(i[0]),i};u.RB=new e(.156,.156).Oa();u.SB=new e(.844,.844).Oa();u.oj={None:"Rectangle",Rectangle:function(n,t,i){return n=new rt,n.type=kf,n.sa=0,n.ta=0,n.D=t,n.F=i,n},Square:function(n,t,i){return n=new rt,n.Ac=ar,n.type=kf,n.sa=0,n.ta=0,n.D=t,n.F=i,n},Ellipse:function(n,t,i){return n=new rt,n.type=uf,n.sa=0,n.ta=0,n.D=t,n.F=i,n.G=u.RB,n.H=u.SB,n},Circle:function(n,t,i){return n=new rt,n.Ac=ar,n.type=uf,n.sa=0,n.ta=0,n.D=t,n.F=i,n.G=u.RB,n.H=u.SB,n},Connector:"Ellipse",TriangleRight:function(n,t,i){n=new rt;var r=new ai,u=new ut;return u.D=t,u.F=.5*i,r.Ka.add(u),t=new ut,t.D=0,t.F=i,r.Ka.add(t.close()),n.Fb.add(r),n.G=new e(0,.25),n.H=new e(.5,.75),n},TriangleDown:function(n,t,i){n=new rt;var u=new ai,r=new ut;return r.D=t,r.F=0,u.Ka.add(r),r=new ut,r.D=.5*t,r.F=i,u.Ka.add(r.close()),n.Fb.add(u),n.G=new e(.25,0),n.H=new e(.75,.5),n},TriangleLeft:function(n,t,i){var r,u;return n=new rt,r=new ai,r.sa=t,r.ta=i,u=new ut,u.D=0,u.F=.5*i,r.Ka.add(u),i=new ut,i.D=t,i.F=0,r.Ka.add(i.close()),n.Fb.add(r),n.G=new e(.5,.25),n.H=new e(1,.75),n},TriangleUp:function(n,t,i){var r,u;return n=new rt,r=new ai,r.sa=t,r.ta=i,u=new ut,u.D=0,u.F=i,r.Ka.add(u),i=new ut,i.D=.5*t,i.F=0,r.Ka.add(i.close()),n.Fb.add(r),n.G=new e(.25,.5),n.H=new e(.75,1),n},Line1:function(n,t,i){return n=new rt,n.type=nu,n.sa=0,n.ta=0,n.D=t,n.F=i,n},Line2:function(n,t,i){return n=new rt,n.type=nu,n.sa=t,n.ta=0,n.D=0,n.F=i,n},MinusLine:"LineH",LineH:function(n,t,i){return n=new rt,n.type=nu,n.sa=0,n.ta=i/2,n.D=t,n.F=i/2,n},LineV:function(n,t,i){return n=new rt,n.type=nu,n.sa=t/2,n.ta=0,n.D=t/2,n.F=i,n},Curve1:function(n,i,r){var f=u.za;return n=t.u(),v(n,0,0,!1),o(n,f*i,0,1*i,(1-f)*r,i,r),i=n.s,t.v(n),i},Curve2:function(n,i,r){var f=u.za;return n=t.u(),v(n,0,0,!1),o(n,0,f*r,(1-f)*i,r,i,r),i=n.s,t.v(n),i},Curve3:function(n,i,r){var f=u.za;return n=t.u(),v(n,1*i,0,!1),o(n,1*i,f*r,f*i,1*r,0,1*r),i=n.s,t.v(n),i},Curve4:function(n,i,r){var f=u.za;return n=t.u(),v(n,1*i,0,!1),o(n,(1-f)*i,0,0,(1-f)*r,0,1*r),i=n.s,t.v(n),i},Alternative:"Triangle",Merge:"Triangle",Triangle:function(n,i,r){return n=t.u(),v(n,.5*i,0*r,!0),n.lineTo(0*i,1*r),n.lineTo(1*i,1*r,!0),i=n.s,i.G=new e(.25,.5),i.H=new e(.75,1),t.v(n),i},Decision:"Diamond",Diamond:function(n,i,r){return n=t.u(),v(n,.5*i,0,!0),n.lineTo(0,.5*r),n.lineTo(.5*i,1*r),n.lineTo(1*i,.5*r,!0),i=n.s,i.G=new e(.25,.25),i.H=new e(.75,.75),t.v(n),i},Pentagon:function(n,i,r){var f=u.pl(5),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;5>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.2,.22),i.H=new e(.8,.9),t.v(n),i},DataTransmission:"Hexagon",Hexagon:function(n,i,r){var f=u.pl(6),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;6>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.07,.25),i.H=new e(.93,.75),t.v(n),i},Heptagon:function(n,i,r){var f=u.pl(7),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;7>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.2,.15),i.H=new e(.8,.85),t.v(n),i},Octagon:function(n,i,r){var f=u.pl(8),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;8>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.15,.15),i.H=new e(.85,.85),t.v(n),i},Nonagon:function(n,i,r){var f=u.pl(9),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;9>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.17,.13),i.H=new e(.82,.82),t.v(n),i},Decagon:function(n,i,r){var f=u.pl(10),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;10>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.16,.16),i.H=new e(.84,.84),t.v(n),i},Dodecagon:function(n,i,r){var f=u.pl(12),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;12>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.16,.16),i.H=new e(.84,.84),t.v(n),i},FivePointedStar:function(n,i,r){var f=u.an(5),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;10>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.312,.383),i.H=new e(.693,.765),t.v(n),i},SixPointedStar:function(n,i,r){var f=u.an(6),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;12>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.17,.251),i.H=new e(.833,.755),t.v(n),i},SevenPointedStar:function(n,i,r){var f=u.an(7),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;14>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.363,.361),i.H=new e(.641,.709),t.v(n),i},EightPointedStar:function(n,i,r){var f=u.an(8),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;16>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.252,.255),i.H=new e(.75,.75),t.v(n),i},NinePointedStar:function(n,i,r){var f=u.an(9),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;18>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.355,.361),i.H=new e(.645,.651),t.v(n),i},TenPointedStar:function(n,i,r){var f=u.an(10),o;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),o=1;20>o;o++)n.lineTo(f[o].x*i,f[o].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.281,.261),i.H=new e(.723,.748),t.v(n),i},FivePointedBurst:function(n,i,r){var f=u.ip(5),s;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),s=1;s<f.length;s+=3)o(n,f[s].x*i,f[s].y*r,f[s+1].x*i,f[s+1].y*r,f[s+2].x*i,f[s+2].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.312,.383),i.H=new e(.693,.765),t.v(n),i},SixPointedBurst:function(n,i,r){var f=u.ip(6),s;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),s=1;s<f.length;s+=3)o(n,f[s].x*i,f[s].y*r,f[s+1].x*i,f[s+1].y*r,f[s+2].x*i,f[s+2].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.17,.251),i.H=new e(.833,.755),t.v(n),i},SevenPointedBurst:function(n,i,r){var f=u.ip(7),s;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),s=1;s<f.length;s+=3)o(n,f[s].x*i,f[s].y*r,f[s+1].x*i,f[s+1].y*r,f[s+2].x*i,f[s+2].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.363,.361),i.H=new e(.641,.709),t.v(n),i},EightPointedBurst:function(n,i,r){var f=u.ip(8),s;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),s=1;s<f.length;s+=3)o(n,f[s].x*i,f[s].y*r,f[s+1].x*i,f[s+1].y*r,f[s+2].x*i,f[s+2].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.252,.255),i.H=new e(.75,.75),t.v(n),i},NinePointedBurst:function(n,i,r){var f=u.ip(9),s;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),s=1;s<f.length;s+=3)o(n,f[s].x*i,f[s].y*r,f[s+1].x*i,f[s+1].y*r,f[s+2].x*i,f[s+2].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.355,.361),i.H=new e(.645,.651),t.v(n),i},TenPointedBurst:function(n,i,r){var f=u.ip(10),s;for(n=t.u(),v(n,f[0].x*i,f[0].y*r,!0),s=1;s<f.length;s+=3)o(n,f[s].x*i,f[s].y*r,f[s+1].x*i,f[s+1].y*r,f[s+2].x*i,f[s+2].y*r);return t.Ca(f),tt(n),i=n.s,i.G=new e(.281,.261),i.H=new e(.723,.748),t.v(n),i},Cloud:function(n,i,r){return n=t.u(),v(n,.08034461*i,.1944299*r,!0),o(n,-.09239631*i,.07836421*r,.1406031*i,-.0542823*r,.2008615*i,.05349299*r),o(n,.2450511*i,-.00697547*r,.3776197*i,-.01112067*r,.4338609*i,.074219*r),o(n,.4539471*i,0,.6066018*i,-.02526587*r,.6558228*i,.07004196*r),o(n,.6914277*i,-.01904177*r,.8921095*i,-.01220843*r,.8921095*i,.08370865*r),o(n,1.036446*i,.04105738*r,1.020377*i,.3022052*r,.9147671*i,.3194596*r),o(n,1.04448*i,.360238*r,.992256*i,.5219009*r,.9082935*i,.562044*r),o(n,1.032337*i,.5771781*r,1.018411*i,.8120651*r,.9212406*i,.8217117*r),o(n,1.028411*i,.9571472*r,.8556702*i,1.052487*r,.7592566*i,.9156953*r),o(n,.7431877*i,1.009325*r,.5624123*i,1.021761*r,.5101666*i,.9310455*r),o(n,.4820677*i,1.031761*r,.3030112*i,1.002796*r,.2609328*i,.9344623*r),o(n,.2329994*i,1.01518*r,.03213784*i,1.01518*r,.08034461*i,.870098*r),o(n,-.02812061*i,.9032597*r,-.01205169*i,.6835638*r,.06829292*i,.6545475*r),o(n,-.01812061*i,.6089503*r,-.00606892*i,.4555777*r,.06427569*i,.4265613*r),o(n,-.01606892*i,.3892545*r,-.01205169*i,.1944299*r,.08034461*i,.1944299*r),tt(n),i=n.s,i.G=new e(.1,.1),i.H=new e(.9,.9),t.v(n),i},Gate:"Crescent",Crescent:function(n,i,r){return n=t.u(),v(n,0,0,!0),o(n,1*i,0,1*i,1*r,0,1*r),o(n,.5*i,.75*r,.5*i,.25*r,0,0),tt(n),i=n.s,i.G=new e(.511,.19),i.H=new e(.776,.76),t.v(n),i},FramedRectangle:function(n,i,r){var u=t.u(),f=n?n.Kc:0;return n=n?n.Vt:0,0===f&&(f=.1),0===n&&(n=.1),v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo(1*i,1*r),u.lineTo(0,1*r,!0),v(u,f*i,n*r,!1,!0),u.lineTo(f*i,(1-n)*r),u.lineTo((1-f)*i,(1-n)*r),u.lineTo((1-f)*i,n*r,!0),i=u.s,i.G=new e(f,n),i.H=new e(1-f,1-n),t.v(u),i},Delay:"HalfEllipse",HalfEllipse:function(n,i,r){var f=u.za;return n=t.u(),v(n,0,0,!0),o(n,f*i,0,1*i,(.5-f/2)*r,1*i,.5*r),o(n,1*i,(.5+f/2)*r,f*i,1*r,0,1*r),tt(n),i=n.s,i.G=new e(0,.2),i.H=new e(.75,.8),t.v(n),i},Heart:function(n,i,r){return n=t.u(),v(n,.5*i,1*r,!0),o(n,.1*i,.8*r,0,.5*r,0*i,.3*r),o(n,0*i,0,.45*i,0,.5*i,.3*r),o(n,.55*i,0,1*i,0,1*i,.3*r),o(n,i,.5*r,.9*i,.8*r,.5*i,1*r),tt(n),i=n.s,i.G=new e(.15,.29),i.H=new e(.86,.68),t.v(n),i},Spade:function(n,i,r){return n=t.u(),v(n,.5*i,0,!0),n.lineTo(.51*i,.01*r),o(n,.6*i,.2*r,i,.25*r,i,.5*r),o(n,i,.8*r,.6*i,.8*r,.55*i,.7*r),o(n,.5*i,.75*r,.55*i,.95*r,.75*i,r),n.lineTo(.25*i,r),o(n,.45*i,.95*r,.5*i,.75*r,.45*i,.7*r),o(n,.4*i,.8*r,0,.8*r,0,.5*r),o(n,0,.25*r,.4*i,.2*r,.49*i,.01*r),tt(n),i=n.s,i.G=new e(.19,.26),i.H=new e(.8,.68),t.v(n),i},Club:function(n,i,r){n=t.u();v(n,.4*i,.6*r,!0);o(n,.5*i,.75*r,.45*i,.95*r,.15*i,1*r);n.lineTo(.85*i,r);o(n,.55*i,.95*r,.5*i,.75*r,.6*i,.6*r);var u=.2,f=.3,s=0,h=4*(Math.SQRT2-1)/3*u;return o(n,(.5-u+f)*i,(.5+h+s)*r,(.5-h+f)*i,(.5+u+s)*r,(.5+f)*i,(.5+u+s)*r),o(n,(.5+h+f)*i,(.5+u+s)*r,(.5+u+f)*i,(.5+h+s)*r,(.5+u+f)*i,(.5+s)*r),o(n,(.5+u+f)*i,(.5-h+s)*r,(.5+h+f)*i,(.5-u+s)*r,(.5+f)*i,(.5-u+s)*r),o(n,(.5-h+f)*i,(.5-u+s)*r,(.5-u+f+.05)*i,(.5-h+s-.02)*r,.65*i,.36771243*r),u=.2,f=0,s=-.3,h=4*(Math.SQRT2-1)/3*u,o(n,(.5+h+f)*i,(.5+u+s)*r,(.5+u+f)*i,(.5+h+s)*r,(.5+u+f)*i,(.5+s)*r),o(n,(.5+u+f)*i,(.5-h+s)*r,(.5+h+f)*i,(.5-u+s)*r,(.5+f)*i,(.5-u+s)*r),o(n,(.5-h+f)*i,(.5-u+s)*r,(.5-u+f)*i,(.5-h+s)*r,(.5-u+f)*i,(.5+s)*r),o(n,(.5-u+f)*i,(.5+h+s)*r,(.5-h+f)*i,(.5+u+s)*r,.35*i,.36771243*r),u=.2,f=-.3,s=0,h=4*(Math.SQRT2-1)/3*u,o(n,(.5+u+f-.05)*i,(.5-h+s-.02)*r,(.5+h+f)*i,(.5-u+s)*r,(.5+f)*i,(.5-u+s)*r),o(n,(.5-h+f)*i,(.5-u+s)*r,(.5-u+f)*i,(.5-h+s)*r,(.5-u+f)*i,(.5+s)*r),o(n,(.5-u+f)*i,(.5+h+s)*r,(.5-h+f)*i,(.5+u+s)*r,(.5+f)*i,(.5+u+s)*r),o(n,(.5+h+f)*i,(.5+u+s)*r,(.5+u+f)*i,(.5+h+s)*r,.4*i,.6*r),tt(n),i=n.s,i.G=new e(.06,.39),i.H=new e(.93,.58),t.v(n),i},Ring:function(n,i,r){n=t.u();var u=4*(Math.SQRT2-1)/3*.5;return v(n,i,.5*r,!0),o(n,i,(.5-u)*r,(.5+u)*i,0,.5*i,0),o(n,(.5-u)*i,0,0,(.5-u)*r,0,.5*r),o(n,0,(.5+u)*r,(.5-u)*i,r,.5*i,r),o(n,(.5+u)*i,r,i,(.5+u)*r,i,.5*r),u=4*(Math.SQRT2-1)/3*.4,v(n,.5*i,.1*r,!0,!0),o(n,(.5+u)*i,.1*r,.9*i,(.5-u)*r,.9*i,.5*r),o(n,.9*i,(.5+u)*r,(.5+u)*i,.9*r,.5*i,.9*r),o(n,(.5-u)*i,.9*r,.1*i,(.5+u)*r,.1*i,.5*r),o(n,.1*i,(.5-u)*r,(.5-u)*i,.1*r,.5*i,.1*r),i=n.s,i.G=new e(.146,.146),i.H=new e(.853,.853),i.Ac=ar,t.v(n),i},YinYang:function(n,i,r){var u=.5,f;return n=t.u(),u=.5,v(n,.5*i,0,!0),n.arcTo(270,180,.5*i,.5*i,.5*i),o(n,1*i,u*r,0,u*r,u*i,0,!0),u=.1,f=.25,v(n,(.5+u)*i,f*r,!0,!0),n.arcTo(0,-360,.5*i,r*f,u*i),tt(n),v(n,.5*i,0,!1),n.arcTo(270,-180,.5*i,.5*i,.5*i),n.jb(!1),f=.75,v(n,(.5+u)*i,f*r,!0),n.arcTo(0,360,.5*i,r*f,u*i),tt(n),i=n.s,i.Ac=ar,t.v(n),i},Peace:function(n,i,r){var u;n=t.u();u=4*(Math.SQRT2-1)/3*.5;v(n,i,.5*r,!0);o(n,i,(.5-u)*r,(.5+u)*i,0,.5*i,0);o(n,(.5-u)*i,0,0,(.5-u)*r,0,.5*r);o(n,0,(.5+u)*r,(.5-u)*i,r,.5*i,r);o(n,(.5+u)*i,r,i,(.5+u)*r,i,.5*r);u=4*(Math.SQRT2-1)/3*.4;v(n,.5*i,.1*r,!0,!0);o(n,(.5+u)*i,.1*r,.9*i,(.5-u)*r,.9*i,.5*r);o(n,.9*i,(.5+u)*r,(.5+u)*i,.9*r,.5*i,.9*r);o(n,(.5-u)*i,.9*r,.1*i,(.5+u)*r,.1*i,.5*r);o(n,.1*i,(.5-u)*r,(.5-u)*i,.1*r,.5*i,.1*r);var u=.07,f=0,s=-.707*.11,h=4*(Math.SQRT2-1)/3*u;return v(n,(.5+u+f)*i,(.5+s)*r,!0),o(n,(.5+u+f)*i,(.5-h+s)*r,(.5+h+f)*i,(.5-u+s)*r,(.5+f)*i,(.5-u+s)*r),o(n,(.5-h+f)*i,(.5-u+s)*r,(.5-u+f)*i,(.5-h+s)*r,(.5-u+f)*i,(.5+s)*r),o(n,(.5-u+f)*i,(.5+h+s)*r,(.5-h+f)*i,(.5+u+s)*r,(.5+f)*i,(.5+u+s)*r),o(n,(.5+h+f)*i,(.5+u+s)*r,(.5+u+f)*i,(.5+h+s)*r,(.5+u+f)*i,(.5+s)*r),u=.07,f=-.707*.11,s=.707*.11,h=4*(Math.SQRT2-1)/3*u,v(n,(.5+u+f)*i,(.5+s)*r,!0),o(n,(.5+u+f)*i,(.5-h+s)*r,(.5+h+f)*i,(.5-u+s)*r,(.5+f)*i,(.5-u+s)*r),o(n,(.5-h+f)*i,(.5-u+s)*r,(.5-u+f)*i,(.5-h+s)*r,(.5-u+f)*i,(.5+s)*r),o(n,(.5-u+f)*i,(.5+h+s)*r,(.5-h+f)*i,(.5+u+s)*r,(.5+f)*i,(.5+u+s)*r),o(n,(.5+h+f)*i,(.5+u+s)*r,(.5+u+f)*i,(.5+h+s)*r,(.5+u+f)*i,(.5+s)*r),u=.07,f=.707*.11,s=.707*.11,h=4*(Math.SQRT2-1)/3*u,v(n,(.5+u+f)*i,(.5+s)*r,!0),o(n,(.5+u+f)*i,(.5-h+s)*r,(.5+h+f)*i,(.5-u+s)*r,(.5+f)*i,(.5-u+s)*r),o(n,(.5-h+f)*i,(.5-u+s)*r,(.5-u+f)*i,(.5-h+s)*r,(.5-u+f)*i,(.5+s)*r),o(n,(.5-u+f)*i,(.5+h+s)*r,(.5-h+f)*i,(.5+u+s)*r,(.5+f)*i,(.5+u+s)*r),o(n,(.5+h+f)*i,(.5+u+s)*r,(.5+u+f)*i,(.5+h+s)*r,(.5+u+f)*i,(.5+s)*r),i=n.s,i.G=new e(.146,.146),i.H=new e(.853,.853),i.Ac=ar,t.v(n),i},NotAllowed:function(n,i,r){var h=u.za,e=.5*h,f=.5;n=t.u();v(n,.5*i,(.5-f)*r,!0);o(n,(.5-e)*i,(.5-f)*r,(.5-f)*i,(.5-e)*r,(.5-f)*i,.5*r);o(n,(.5-f)*i,(.5+e)*r,(.5-e)*i,(.5+f)*r,.5*i,(.5+f)*r);o(n,(.5+e)*i,(.5+f)*r,(.5+f)*i,(.5+e)*r,(.5+f)*i,.5*r);o(n,(.5+f)*i,(.5-e)*r,(.5+e)*i,(.5-f)*r,.5*i,(.5-f)*r);var f=.4,e=.4*h,h=t.N(),a=t.N(),y=t.N(),s=t.N();u.hj(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.42,h,a,y,s,s);var p=t.N(),w=t.N(),b=t.N();u.hj(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.58,s,s,b,p,w);var k=t.N(),d=t.N(),c=t.N();u.hj(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.42,k,d,c,s,s);var g=t.N(),nt=t.N(),l=t.N();return u.hj(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.58,s,s,l,g,nt),v(n,l.x*i,l.y*r,!0,!0),o(n,g.x*i,g.y*r,nt.x*i,nt.y*r,(.5-f)*i,.5*r),o(n,(.5-f)*i,(.5-e)*r,(.5-e)*i,(.5-f)*r,.5*i,(.5-f)*r),o(n,h.x*i,h.y*r,a.x*i,a.y*r,y.x*i,y.y*r),n.lineTo(l.x*i,l.y*r),tt(n),v(n,c.x*i,c.y*r,!0,!0),n.lineTo(b.x*i,b.y*r),o(n,p.x*i,p.y*r,w.x*i,w.y*r,(.5+f)*i,.5*r),o(n,(.5+f)*i,(.5+e)*r,(.5+e)*i,(.5+f)*r,.5*i,(.5+f)*r),o(n,k.x*i,k.y*r,d.x*i,d.y*r,c.x*i,c.y*r),tt(n),t.B(h),t.B(a),t.B(y),t.B(s),t.B(p),t.B(w),t.B(b),t.B(k),t.B(d),t.B(c),t.B(g),t.B(nt),t.B(l),i=n.s,t.v(n),i.Ac=ar,i},Fragile:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(.25*i,0),n.lineTo(.2*i,.15*r),n.lineTo(.3*i,.25*r),n.lineTo(.29*i,.33*r),n.lineTo(.35*i,.25*r),n.lineTo(.3*i,.15*r),n.lineTo(.4*i,0),n.lineTo(1*i,0),o(n,1*i,.25*r,.75*i,.5*r,.55*i,.5*r),n.lineTo(.55*i,.9*r),n.lineTo(.7*i,.9*r),n.lineTo(.7*i,1*r),n.lineTo(.3*i,1*r),n.lineTo(.3*i,.9*r),n.lineTo(.45*i,.9*r),n.lineTo(.45*i,.5*r),o(n,.25*i,.5*r,0,.25*r,0,0),tt(n),i=n.s,i.G=new e(.25,0),i.H=new e(.75,.4),t.v(n),i},HourGlass:function(n,i,r){return n=t.u(),v(n,.65*i,.5*r,!0),n.lineTo(1*i,1*r),n.lineTo(0,1*r),n.lineTo(.35*i,.5*r),n.lineTo(0,0),n.lineTo(1*i,0),tt(n),i=n.s,t.v(n),i},Lightning:function(n,i,r){return n=t.u(),v(n,0*i,.55*r,!0),n.lineTo(.75*i,0),n.lineTo(.25*i,.45*r),n.lineTo(.9*i,.48*r),n.lineTo(.4*i,1*r),n.lineTo(.65*i,.55*r),tt(n),i=n.s,t.v(n),i},Parallelogram1:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.1);var u=t.u();return v(u,n*i,0,!0),u.lineTo(1*i,0),u.lineTo((1-n)*i,1*r),u.lineTo(0,1*r),tt(u),i=u.s,i.G=new e(n,0),i.H=new e(1-n,1),t.v(u),i},Input:"Output",Output:function(n,i,r){return n=t.u(),v(n,0,1*r,!0),n.lineTo(.1*i,0),n.lineTo(1*i,0),n.lineTo(.9*i,1*r),tt(n),i=n.s,i.G=new e(.1,0),i.H=new e(.9,1),t.v(n),i},Parallelogram2:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.25);var u=t.u();return v(u,n*i,0,!0),u.lineTo(1*i,0),u.lineTo((1-n)*i,1*r),u.lineTo(0,1*r),tt(u),i=u.s,i.G=new e(n,0),i.H=new e(1-n,1),t.v(u),i},ThickCross:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.25);var u=t.u();return v(u,(.5-n/2)*i,0,!0),u.lineTo((.5+n/2)*i,0),u.lineTo((.5+n/2)*i,(.5-n/2)*r),u.lineTo(1*i,(.5-n/2)*r),u.lineTo(1*i,(.5+n/2)*r),u.lineTo((.5+n/2)*i,(.5+n/2)*r),u.lineTo((.5+n/2)*i,1*r),u.lineTo((.5-n/2)*i,1*r),u.lineTo((.5-n/2)*i,(.5+n/2)*r),u.lineTo(0,(.5+n/2)*r),u.lineTo(0,(.5-n/2)*r),u.lineTo((.5-n/2)*i,(.5-n/2)*r),tt(u),i=u.s,i.G=new e(.5-n/2,.5-n/2),i.H=new e(.5+n/2,.5+n/2),t.v(u),i},ThickX:function(n,i,r){n=.25/Math.SQRT2;var u=t.u();return v(u,.3*i,0,!0),u.lineTo(.5*i,.2*r),u.lineTo(.7*i,0),u.lineTo(1*i,.3*r),u.lineTo(.8*i,.5*r),u.lineTo(1*i,.7*r),u.lineTo(.7*i,1*r),u.lineTo(.5*i,.8*r),u.lineTo(.3*i,1*r),u.lineTo(0,.7*r),u.lineTo(.2*i,.5*r),u.lineTo(0,.3*r),tt(u),i=u.s,i.G=new e(.5-n,.5-n),i.H=new e(.5+n,.5+n),t.v(u),i},ThinCross:function(n,i,r){var u=n?n.Kc:0;return 0===u&&(u=.1),n=t.u(),v(n,(.5-u/2)*i,0,!0),n.lineTo((.5+u/2)*i,0),n.lineTo((.5+u/2)*i,(.5-u/2)*r),n.lineTo(1*i,(.5-u/2)*r),n.lineTo(1*i,(.5+u/2)*r),n.lineTo((.5+u/2)*i,(.5+u/2)*r),n.lineTo((.5+u/2)*i,1*r),n.lineTo((.5-u/2)*i,1*r),n.lineTo((.5-u/2)*i,(.5+u/2)*r),n.lineTo(0,(.5+u/2)*r),n.lineTo(0,(.5-u/2)*r),n.lineTo((.5-u/2)*i,(.5-u/2)*r),tt(n),i=n.s,t.v(n),i},ThinX:function(n,i,r){return n=t.u(),v(n,.1*i,0,!0),n.lineTo(.5*i,.4*r),n.lineTo(.9*i,0),n.lineTo(1*i,.1*r),n.lineTo(.6*i,.5*r),n.lineTo(1*i,.9*r),n.lineTo(.9*i,1*r),n.lineTo(.5*i,.6*r),n.lineTo(.1*i,1*r),n.lineTo(0,.9*r),n.lineTo(.4*i,.5*r),n.lineTo(0,.1*r),tt(n),n.s},RightTriangle:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(1*i,1*r),n.lineTo(0,1*r),tt(n),i=n.s,i.G=new e(0,.5),i.H=new e(.5,1),t.v(n),i},RoundedIBeam:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(1*i,0),o(n,.5*i,.25*r,.5*i,.75*r,1*i,1*r),n.lineTo(0,1*r),o(n,.5*i,.75*r,.5*i,.25*r,0,0),tt(n),i=n.s,t.v(n),i},RoundedRectangle:function(n,i,r){var f=n?n.Kc:0,s;return 0>=f&&(f=5),f=Math.min(f,i/3),f=Math.min(f,r/3),n=f*u.za,s=t.u(),v(s,f,0,!0),s.lineTo(i-f,0),o(s,i-n,0,i,n,i,f),s.lineTo(i,r-f),o(s,i,r-n,i-n,r,i-f,r),s.lineTo(f,r),o(s,n,r,0,r-n,0,r-f),s.lineTo(0,f),o(s,0,n,n,0,f,0),tt(s),i=s.s,1<n?(i.G=new e(0,0,n,n),i.H=new e(1,1,-n,-n)):(i.G=hr,i.H=cu),t.v(s),i},Border:function(n,i,r){var u=n?n.Kc:0;return 0>=u&&(u=5),u=Math.min(u,i/3),u=Math.min(u,r/3),n=t.u(),v(n,u,0,!0),n.lineTo(i-u,0),o(n,+i,0,i,0,i,u),n.lineTo(i,r-u),o(n,i,+r,+i,r,i-u,r),n.lineTo(u,r),o(n,0,r,0,+r,0,r-u),n.lineTo(0,u),o(n,0,0,0,0,u,0),tt(n),i=n.s,i.G=hr,i.H=cu,t.v(n),i},SquareIBeam:function(n,i,r){var u=n?n.Kc:0;return 0===u&&(u=.2),n=t.u(),v(n,0,0,!0),n.lineTo(1*i,0),n.lineTo(1*i,u*r),n.lineTo((.5+u/2)*i,u*r),n.lineTo((.5+u/2)*i,(1-u)*r),n.lineTo(1*i,(1-u)*r),n.lineTo(1*i,1*r),n.lineTo(0,1*r),n.lineTo(0,(1-u)*r),n.lineTo((.5-u/2)*i,(1-u)*r),n.lineTo((.5-u/2)*i,u*r),n.lineTo(0,u*r),tt(n),i=n.s,t.v(n),i},Trapezoid:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.2);var u=t.u();return v(u,n*i,0,!0),u.lineTo((1-n)*i,0),u.lineTo(1*i,1*r),u.lineTo(0,1*r),tt(u),i=u.s,i.G=new e(n,0),i.H=new e(1-n,1),t.v(u),i},ManualLoop:"ManualOperation",ManualOperation:function(n,i,r){var u=n?n.Kc:0;return n=t.u(),v(n,u,0,!0),n.lineTo(0,0),n.lineTo(1*i,0),n.lineTo(.9*i,1*r),n.lineTo(.1*i,1*r),tt(n),i=n.s,i.G=new e(.1,0),i.H=new e(.9,1),t.v(n),i},GenderMale:function(n,i,r){var p,a;n=t.u();var w=u.za,s=.4*w,f=.4,y=t.N(),h=t.N(),c=t.N(),l=t.N();return v(n,(.5-f)*i,.5*r,!0),o(n,(.5-f)*i,(.5-s)*r,(.5-s)*i,(.5-f)*r,.5*i,(.5-f)*r),u.hj(.5,.5-f,.5+s,.5-f,.5+f,.5-s,.5+f,.5,.44,c,l,h,y,y),o(n,c.x*i,c.y*r,l.x*i,l.y*r,h.x*i,h.y*r),p=t.qc(h.x,h.y),u.hj(.5,.5-f,.5+s,.5-f,.5+f,.5-s,.5+f,.5,.56,y,y,h,c,l),a=t.qc(h.x,h.y),n.lineTo((.1*p.x+.855)*i,.1*p.y*r),n.lineTo(.85*i,.1*p.y*r),n.lineTo(.85*i,0),n.lineTo(1*i,0),n.lineTo(1*i,.15*r),n.lineTo((.1*a.x+.9)*i,.15*r),n.lineTo((.1*a.x+.9)*i,(.1*a.y+.05*.9)*r),n.lineTo(a.x*i,a.y*r),o(n,c.x*i,c.y*r,l.x*i,l.y*r,(.5+f)*i,.5*r),o(n,(.5+f)*i,(.5+s)*r,(.5+s)*i,(.5+f)*r,.5*i,(.5+f)*r),o(n,(.5-s)*i,(.5+f)*r,(.5-f)*i,(.5+s)*r,(.5-f)*i,.5*r),f=.35,s=.35*w,v(n,.5*i,(.5-f)*r,!0,!0),o(n,(.5-s)*i,(.5-f)*r,(.5-f)*i,(.5-s)*r,(.5-f)*i,.5*r),o(n,(.5-f)*i,(.5+s)*r,(.5-s)*i,(.5+f)*r,.5*i,(.5+f)*r),o(n,(.5+s)*i,(.5+f)*r,(.5+f)*i,(.5+s)*r,(.5+f)*i,.5*r),o(n,(.5+f)*i,(.5-s)*r,(.5+s)*i,(.5-f)*r,.5*i,(.5-f)*r),v(n,(.5-f)*i,.5*r,!0),t.B(y),t.B(h),t.B(c),t.B(l),t.B(p),t.B(a),i=n.s,i.G=new e(.202,.257),i.H=new e(.692,.839),i.Ac=ar,t.v(n),i},GenderFemale:function(n,i,r){n=t.u();var u=.375,f=0,s=-.125,h=4*(Math.SQRT2-1)/3*u;return v(n,(.525+f)*i,(.5+u+s)*r,!0),o(n,(.5+h+f)*i,(.5+u+s)*r,(.5+u+f)*i,(.5+h+s)*r,(.5+u+f)*i,(.5+s)*r),o(n,(.5+u+f)*i,(.5-h+s)*r,(.5+h+f)*i,(.5-u+s)*r,(.5+f)*i,(.5-u+s)*r),o(n,(.5-h+f)*i,(.5-u+s)*r,(.5-u+f)*i,(.5-h+s)*r,(.5-u+f)*i,(.5+s)*r),o(n,(.5-u+f)*i,(.5+h+s)*r,(.5-h+f)*i,(.5+u+s)*r,(.475+f)*i,(.5+u+s)*r),n.lineTo(.475*i,.85*r),n.lineTo(.425*i,.85*r),n.lineTo(.425*i,.9*r),n.lineTo(.475*i,.9*r),n.lineTo(.475*i,1*r),n.lineTo(.525*i,1*r),n.lineTo(.525*i,.9*r),n.lineTo(.575*i,.9*r),n.lineTo(.575*i,.85*r),n.lineTo(.525*i,.85*r),tt(n),u=.325,f=0,s=-.125,h=4*(Math.SQRT2-1)/3*u,v(n,(.5+u+f)*i,(.5+s)*r,!0,!0),o(n,(.5+u+f)*i,(.5+h+s)*r,(.5+h+f)*i,(.5+u+s)*r,(.5+f)*i,(.5+u+s)*r),o(n,(.5-h+f)*i,(.5+u+s)*r,(.5-u+f)*i,(.5+h+s)*r,(.5-u+f)*i,(.5+s)*r),o(n,(.5-u+f)*i,(.5-h+s)*r,(.5-h+f)*i,(.5-u+s)*r,(.5+f)*i,(.5-u+s)*r),o(n,(.5+h+f)*i,(.5-u+s)*r,(.5+u+f)*i,(.5-h+s)*r,(.5+u+f)*i,(.5+s)*r),v(n,(.525+f)*i,(.5+u+s)*r,!0),i=n.s,i.G=new e(.232,.136),i.H=new e(.782,.611),i.Ac=ar,t.v(n),i},PlusLine:function(n,i,r){return n=t.u(),v(n,0,.5*r,!1),n.lineTo(1*i,.5*r),n.moveTo(.5*i,0),n.lineTo(.5*i,1*r),i=n.s,t.v(n),i},XLine:function(n,i,r){return n=t.u(),v(n,0,1*r,!1),n.lineTo(1*i,0),n.moveTo(0,0),n.lineTo(1*i,1*r),i=n.s,t.v(n),i},AsteriskLine:function(n,i,r){n=t.u();var u=.2/Math.SQRT2;return v(n,u*i,(1-u)*r,!1),n.lineTo((1-u)*i,u*r),n.moveTo(u*i,u*r),n.lineTo((1-u)*i,(1-u)*r),n.moveTo(0*i,.5*r),n.lineTo(1*i,.5*r),n.moveTo(.5*i,0*r),n.lineTo(.5*i,1*r),i=n.s,t.v(n),i},CircleLine:function(n,i,r){var f=.5*u.za;return n=t.u(),v(n,1*i,.5*r,!1),o(n,1*i,(.5+f)*r,(.5+f)*i,1*r,.5*i,1*r),o(n,(.5-f)*i,1*r,0,(.5+f)*r,0,.5*r),o(n,0,(.5-f)*r,(.5-f)*i,0,.5*i,0),o(n,(.5+f)*i,0,1*i,(.5-f)*r,1*i,.5*r),i=n.s,i.G=new e(.146,.146),i.H=new e(.853,.853),i.Ac=ar,t.v(n),i},Pie:function(n,i,r){n=t.u();var u=4*(Math.SQRT2-1)/3*.5;return v(n,(.5*Math.SQRT2/2+.5)*i,(.5-.5*Math.SQRT2/2)*r,!0),o(n,.7*i,0*r,.5*i,0*r,.5*i,0*r),o(n,(.5-u+0)*i,0*r,0*i,(.5-u+0)*r,0*i,.5*r),o(n,0*i,(.5+u+0)*r,(.5-u+0)*i,1*r,.5*i,1*r),o(n,(.5+u+0)*i,1*r,1*i,(.5+u+0)*r,1*i,.5*r),n.lineTo(.5*i,.5*r),tt(n),i=n.s,t.v(n),i},PiePiece:function(n,i,r){var f=u.za/Math.SQRT2*.5,e=Math.SQRT2/2,s=1-Math.SQRT2/2;return n=t.u(),v(n,i,r,!0),o(n,i,(1-f)*r,(e+f)*i,(s+f)*r,e*i,s*r),n.lineTo(0,r),tt(n),i=n.s,t.v(n),i},StopSign:function(n,i,r){n=1/(Math.SQRT2+2);var u=t.u();return v(u,n*i,0,!0),u.lineTo((1-n)*i,0),u.lineTo(1*i,n*r),u.lineTo(1*i,(1-n)*r),u.lineTo((1-n)*i,1*r),u.lineTo(n*i,1*r),u.lineTo(0,(1-n)*r),u.lineTo(0,n*r),tt(u),i=u.s,i.G=new e(n/2,n/2),i.H=new e(1-n/2,1-n/2),t.v(u),i},LogicImplies:function(n,i,r){var u=n?n.Kc:0;return 0===u&&(u=.2),n=t.u(),v(n,(1-u)*i,0*r,!1),n.lineTo(1*i,.5*r),n.lineTo((1-u)*i,r),n.moveTo(0,.5*r),n.lineTo(i,.5*r),i=n.s,i.G=hr,i.H=new e(.8,.5),t.v(n),i},LogicIff:function(n,i,r){var u=n?n.Kc:0;return 0===u&&(u=.2),n=t.u(),v(n,(1-u)*i,0*r,!1),n.lineTo(1*i,.5*r),n.lineTo((1-u)*i,r),n.moveTo(0,.5*r),n.lineTo(i,.5*r),n.moveTo(u*i,0),n.lineTo(0,.5*r),n.lineTo(u*i,r),i=n.s,i.G=new e(.2,0),i.H=new e(.8,.5),t.v(n),i},LogicNot:function(n,i,r){return n=t.u(),v(n,0,0,!1),n.lineTo(1*i,0),n.lineTo(1*i,1*r),i=n.s,t.v(n),i},LogicAnd:function(n,i,r){return n=t.u(),v(n,0,1*r,!1),n.lineTo(.5*i,0),n.lineTo(1*i,1*r),i=n.s,i.G=new e(.25,.5),i.H=new e(.75,1),t.v(n),i},LogicOr:function(n,i,r){return n=t.u(),v(n,0,0,!1),n.lineTo(.5*i,1*r),n.lineTo(1*i,0),i=n.s,i.G=new e(.219,0),i.H=new e(.78,.409),t.v(n),i},LogicXor:function(n,i,r){n=t.u();v(n,.5*i,0,!1);n.lineTo(.5*i,1*r);n.moveTo(0,.5*r);n.lineTo(1*i,.5*r);var f=.5*u.za;return o(n,1*i,(.5+f)*r,(.5+f)*i,1*r,.5*i,1*r),o(n,(.5-f)*i,1*r,0,(.5+f)*r,0,.5*r),o(n,0,(.5-f)*r,(.5-f)*i,0,.5*i,0),o(n,(.5+f)*i,0,1*i,(.5-f)*r,1*i,.5*r),i=n.s,i.Ac=ar,t.v(n),i},LogicTruth:function(n,i,r){return n=t.u(),v(n,0,0,!1),n.lineTo(1*i,0),n.moveTo(.5*i,0),n.lineTo(.5*i,1*r),i=n.s,t.v(n),i},LogicFalsity:function(n,i,r){return n=t.u(),v(n,0,1*r,!1),n.lineTo(1*i,1*r),n.moveTo(.5*i,1*r),n.lineTo(.5*i,0),i=n.s,t.v(n),i},LogicThereExists:function(n,i,r){return n=t.u(),v(n,0,0,!1),n.lineTo(1*i,0),n.lineTo(1*i,.5*r),n.lineTo(0,.5*r),n.moveTo(1*i,.5*r),n.lineTo(1*i,1*r),n.lineTo(0,1*r),i=n.s,t.v(n),i},LogicForAll:function(n,i,r){return n=t.u(),v(n,0,0,!1),n.lineTo(.5*i,1*r),n.lineTo(1*i,0),n.moveTo(.25*i,.5*r),n.lineTo(.75*i,.5*r),i=n.s,i.G=new e(.25,0),i.H=new e(.75,.5),t.v(n),i},LogicIsDefinedAs:function(n,i,r){return n=t.u(),v(n,0,0,!1),n.lineTo(i,0),n.moveTo(0,.5*r),n.lineTo(i,.5*r),n.moveTo(0,r),n.lineTo(i,r),i=n.s,i.G=new e(.01,.01),i.H=new e(.99,.49),t.v(n),i},LogicIntersect:function(n,i,r){var f=.5*u.za;return n=t.u(),v(n,0,1*r,!1),n.lineTo(0,.5*r),o(n,0,(.5-f)*r,(.5-f)*i,0,.5*i,0),o(n,(.5+f)*i,0,1*i,(.5-f)*r,1*i,.5*r),n.lineTo(1*i,1*r),i=n.s,i.G=new e(0,.5),i.H=cu,t.v(n),i},LogicUnion:function(n,i,r){var f=.5*u.za;return n=t.u(),v(n,1*i,0,!1),n.lineTo(1*i,.5*r),o(n,1*i,(.5+f)*r,(.5+f)*i,1*r,.5*i,1*r),o(n,(.5-f)*i,1*r,0,(.5+f)*r,0,.5*r),n.lineTo(0,0),i=n.s,i.G=hr,i.H=new e(1,.5),t.v(n),i},Arrow:function(n,i,r){var f=n?n.Kc:0,o=n?n.Vt:0;return 0===f&&(f=.3),0===o&&(o=.3),n=t.u(),v(n,0,(.5-o/2)*r,!0),n.lineTo((1-f)*i,(.5-o/2)*r),n.lineTo((1-f)*i,0),n.lineTo(1*i,.5*r),n.lineTo((1-f)*i,1*r),n.lineTo((1-f)*i,(.5+o/2)*r),n.lineTo(0,(.5+o/2)*r),tt(n),i=n.s,i.G=new e(0,.5-o/2),f=u.wl(0,.5+o/2,1,.5+o/2,1-f,1,1,.5,t.N()),i.H=new e(f.x,f.y),t.B(f),t.v(n),i},ISOProcess:"Chevron",Chevron:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(.5*i,0),n.lineTo(1*i,.5*r),n.lineTo(.5*i,1*r),n.lineTo(0,1*r),n.lineTo(.5*i,.5*r),tt(n),i=n.s,t.v(n),i},DoubleArrow:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(.3*i,.214*r),n.lineTo(.3*i,0),n.lineTo(1*i,.5*r),n.lineTo(.3*i,1*r),n.lineTo(.3*i,.786*r),n.lineTo(0,1*r),tt(n),v(n,.3*i,.214*r,!1),n.lineTo(.3*i,.786*r),n.jb(!1),i=n.s,t.v(n),i},DoubleEndArrow:function(n,i,r){return n=t.u(),v(n,1*i,.5*r,!0),n.lineTo(.7*i,1*r),n.lineTo(.7*i,.7*r),n.lineTo(.3*i,.7*r),n.lineTo(.3*i,1*r),n.lineTo(0,.5*r),n.lineTo(.3*i,0),n.lineTo(.3*i,.3*r),n.lineTo(.7*i,.3*r),n.lineTo(.7*i,0),tt(n),i=n.s,r=u.wl(0,.5,.3,0,0,.3,.3,.3,t.N()),i.G=new e(r.x,r.y),r=u.wl(.7,1,1,.5,.7,.7,1,.7,r),i.H=new e(r.x,r.y),t.B(r),t.v(n),i},IBeamArrow:function(n,i,r){return n=t.u(),v(n,1*i,.5*r,!0),n.lineTo(.7*i,1*r),n.lineTo(.7*i,.7*r),n.lineTo(.2*i,.7*r),n.lineTo(.2*i,1*r),n.lineTo(0,1*r),n.lineTo(0,0),n.lineTo(.2*i,0),n.lineTo(.2*i,.3*r),n.lineTo(.7*i,.3*r),n.lineTo(.7*i,0),tt(n),i=n.s,i.G=new e(0,.3),r=u.wl(.7,1,1,.5,.7,.7,1,.7,t.N()),i.H=new e(r.x,r.y),t.B(r),t.v(n),i},Pointer:function(n,i,r){return n=t.u(),v(n,1*i,.5*r,!0),n.lineTo(0,1*r),n.lineTo(.2*i,.5*r),n.lineTo(0,0),tt(n),i=n.s,i.G=new e(.2,.35),r=u.wl(.2,.65,1,.65,0,1,1,.5,t.N()),i.H=new e(r.x,r.y),t.B(r),t.v(n),i},RoundedPointer:function(n,i,r){return n=t.u(),v(n,1*i,.5*r,!0),n.lineTo(0,1*r),o(n,.5*i,.75*r,.5*i,.25*r,0,0),tt(n),i=n.s,i.G=new e(.4,.35),r=u.wl(.2,.65,1,.65,0,1,1,.5,t.N()),i.H=new e(r.x,r.y),t.B(r),t.v(n),i},SplitEndArrow:function(n,i,r){return n=t.u(),v(n,1*i,.5*r,!0),n.lineTo(.7*i,1*r),n.lineTo(.7*i,.7*r),n.lineTo(0,.7*r),n.lineTo(.2*i,.5*r),n.lineTo(0,.3*r),n.lineTo(.7*i,.3*r),n.lineTo(.7*i,0),tt(n),i=n.s,i.G=new e(.2,.3),r=u.wl(.7,1,1,.5,.7,.7,1,.7,t.N()),i.H=new e(r.x,r.y),t.B(r),t.v(n),i},MessageToUser:"SquareArrow",SquareArrow:function(n,i,r){return n=t.u(),v(n,1*i,.5*r,!0),n.lineTo(.7*i,1*r),n.lineTo(0,1*r),n.lineTo(0,0),n.lineTo(.7*i,0),tt(n),i=n.s,i.G=hr,i.H=new e(.7,1),t.v(n),i},Cone1:function(n,i,r){var f=u.za,s;return n=.5*f,s=.1*f,f=t.u(),v(f,0,.9*r,!0),f.lineTo(.5*i,0),f.lineTo(1*i,.9*r),o(f,1*i,(.9+s)*r,(.5+n)*i,1*r,.5*i,1*r),o(f,(.5-n)*i,1*r,0,(.9+s)*r,0,.9*r),tt(f),i=f.s,i.G=new e(.25,.5),i.H=new e(.75,.97),t.v(f),i},Cone2:function(n,i,r){return n=t.u(),v(n,0,.9*r,!0),o(n,(1-.85/.9)*i,1*r,.85/.9*i,1*r,1*i,.9*r),n.lineTo(.5*i,0),n.lineTo(0,.9*r),tt(n),v(n,0,.9*r,!1),o(n,(1-.85/.9)*i,.8*r,.85/.9*i,.8*r,1*i,.9*r),n.jb(!1),i=n.s,i.G=new e(.25,.5),i.H=new e(.75,.82),t.v(n),i},Cube1:function(n,i,r){return n=t.u(),v(n,.5*i,1*r,!0),n.lineTo(1*i,.85*r),n.lineTo(1*i,.15*r),n.lineTo(.5*i,0*r),n.lineTo(0*i,.15*r),n.lineTo(0*i,.85*r),tt(n),v(n,.5*i,1*r,!1),n.lineTo(.5*i,.3*r),n.lineTo(0,.15*r),n.moveTo(.5*i,.3*r),n.lineTo(1*i,.15*r),n.jb(!1),i=n.s,i.G=new e(0,.3),i.H=new e(.5,.85),t.v(n),i},Cube2:function(n,i,r){return n=t.u(),v(n,0,.3*r,!0),n.lineTo(0*i,1*r),n.lineTo(.7*i,r),n.lineTo(1*i,.7*r),n.lineTo(1*i,0*r),n.lineTo(.3*i,0*r),tt(n),v(n,0,.3*r,!1),n.lineTo(.7*i,.3*r),n.lineTo(1*i,0*r),n.moveTo(.7*i,.3*r),n.lineTo(.7*i,1*r),n.jb(!1),i=n.s,i.G=new e(0,.3),i.H=new e(.7,1),t.v(n),i},MagneticData:"Cylinder1",Cylinder1:function(n,i,r){var f=u.za,s;return n=.5*f,s=.1*f,f=t.u(),v(f,0,.1*r,!0),o(f,0,(.1-s)*r,(.5-n)*i,0,.5*i,0),o(f,(.5+n)*i,0,1*i,(.1-s)*r,1*i,.1*r),f.lineTo(i,.9*r),o(f,1*i,(.9+s)*r,(.5+n)*i,1*r,.5*i,1*r),o(f,(.5-n)*i,1*r,0,(.9+s)*r,0,.9*r),f.lineTo(0,.1*r),v(f,0,.1*r,!1),o(f,0,(.1+s)*r,(.5-n)*i,.2*r,.5*i,.2*r),o(f,(.5+n)*i,.2*r,1*i,(.1+s)*r,1*i,.1*r),f.jb(!1),i=f.s,i.G=new e(0,.2),i.H=new e(1,.9),t.v(f),i},Cylinder2:function(n,i,r){var f=u.za,s;return n=.5*f,s=.1*f,f=t.u(),v(f,0,.9*r,!0),f.lineTo(0,.1*r),o(f,0,(.1-s)*r,(.5-n)*i,0,.5*i,0),o(f,(.5+n)*i,0,1*i,(.1-s)*r,1*i,.1*r),f.lineTo(1*i,.9*r),o(f,1*i,(.9+s)*r,(.5+n)*i,1*r,.5*i,1*r),o(f,(.5-n)*i,1*r,0,(.9+s)*r,0,.9*r),v(f,0,.9*r,!1),o(f,0,(.9-s)*r,(.5-n)*i,.8*r,.5*i,.8*r),o(f,(.5+n)*i,.8*r,1*i,(.9-s)*r,1*i,.9*r),f.jb(!1),i=f.s,i.G=new e(0,.1),i.H=new e(1,.8),t.v(f),i},Cylinder3:function(n,i,r){var f=u.za,s;return n=.1*f,s=.5*f,f=t.u(),v(f,.1*i,0,!0),f.lineTo(.9*i,0),o(f,(.9+n)*i,0,1*i,(.5-s)*r,1*i,.5*r),o(f,1*i,(.5+s)*r,(.9+n)*i,1*r,.9*i,1*r),f.lineTo(.1*i,1*r),o(f,(.1-n)*i,1*r,0,(.5+s)*r,0,.5*r),o(f,0,(.5-s)*r,(.1-n)*i,0,.1*i,0),v(f,.1*i,0,!1),o(f,(.1+n)*i,0,.2*i,(.5-s)*r,.2*i,.5*r),o(f,.2*i,(.5+s)*r,(.1+n)*i,1*r,.1*i,1*r),f.jb(!1),i=f.s,i.G=new e(.2,0),i.H=new e(.9,1),t.v(f),i},DirectData:"Cylinder4",Cylinder4:function(n,i,r){var f=u.za,s;return n=.1*f,s=.5*f,f=t.u(),v(f,.9*i,0,!0),o(f,(.9+n)*i,0,1*i,(.5-s)*r,1*i,.5*r),o(f,1*i,(.5+s)*r,(.9+n)*i,1*r,.9*i,1*r),f.lineTo(.1*i,1*r),o(f,(.1-n)*i,1*r,0,(.5+s)*r,0,.5*r),o(f,0,(.5-s)*r,(.1-n)*i,0,.1*i,0),f.lineTo(.9*i,0),v(f,.9*i,0,!1),o(f,(.9-n)*i,0,.8*i,(.5-s)*r,.8*i,.5*r),o(f,.8*i,(.5+s)*r,(.9-n)*i,1*r,.9*i,1*r),f.jb(!1),i=f.s,i.G=new e(.1,0),i.H=new e(.8,1),t.v(f),i},Prism1:function(n,i,r){return n=t.u(),v(n,.25*i,.25*r,!0),n.lineTo(.75*i,0),n.lineTo(i,.5*r),n.lineTo(.5*i,r),n.lineTo(0,r),tt(n),v(n,.25*i,.25*r,!1),n.lineTo(.5*i,r),n.jb(!1),i=n.s,i.G=new e(.408,.172),i.H=new e(.833,.662),t.v(n),i},Prism2:function(n,i,r){return n=t.u(),v(n,0,.25*r,!0),n.lineTo(.75*i,0),n.lineTo(1*i,.25*r),n.lineTo(.75*i,.75*r),n.lineTo(0,1*r),tt(n),v(n,0,r,!1),n.lineTo(.25*i,.5*r),n.lineTo(i,.25*r),n.moveTo(0,.25*r),n.lineTo(.25*i,.5*r),n.jb(!1),i=n.s,i.G=new e(.25,.5),i.H=new e(.75,.75),t.v(n),i},Pyramid1:function(n,i,r){return n=t.u(),v(n,.5*i,0,!0),n.lineTo(i,.75*r),n.lineTo(.5*i,1*r),n.lineTo(0,.75*r),tt(n),v(n,.5*i,0,!1),n.lineTo(.5*i,1*r),n.jb(!1),i=n.s,i.G=new e(.25,.367),i.H=new e(.75,.875),t.v(n),i},Pyramid2:function(n,i,r){return n=t.u(),v(n,.5*i,0,!0),n.lineTo(i,.85*r),n.lineTo(.5*i,1*r),n.lineTo(0,.85*r),tt(n),v(n,.5*i,0,!1),n.lineTo(.5*i,.7*r),n.lineTo(0,.85*r),n.moveTo(.5*i,.7*r),n.lineTo(1*i,.85*r),n.jb(!1),i=n.s,i.G=new e(.25,.367),i.H=new e(.75,.875),t.v(n),i},Actor:function(n,i,r){var l=u.za,h=.2*l,c=.1*l,f=.5,s=.1;return n=t.u(),v(n,f*i,(s+.1)*r,!0),o(n,(f-h)*i,(s+.1)*r,(f-.2)*i,(s+c)*r,(f-.2)*i,s*r),o(n,(f-.2)*i,(s-c)*r,(f-h)*i,(s-.1)*r,f*i,(s-.1)*r),o(n,(f+h)*i,(s-.1)*r,(f+.2)*i,(s-c)*r,(f+.2)*i,s*r),o(n,(f+.2)*i,(s+c)*r,(f+h)*i,(s+.1)*r,f*i,(s+.1)*r),h=.05,c=l*h,v(n,.5*i,.2*r,!0),n.lineTo(.95*i,.2*r),f=.95,s=.25,o(n,(f+c)*i,(s-h)*r,(f+h)*i,(s-c)*r,(f+h)*i,s*r),n.lineTo(1*i,.6*r),n.lineTo(.85*i,.6*r),n.lineTo(.85*i,.35*r),h=.025,c=l*h,f=.825,s=.35,o(n,(f+h)*i,(s-c)*r,(f+c)*i,(s-h)*r,f*i,(s-h)*r),o(n,(f-c)*i,(s-h)*r,(f-h)*i,(s-c)*r,(f-h)*i,s*r),n.lineTo(.8*i,1*r),n.lineTo(.55*i,1*r),n.lineTo(.55*i,.7*r),h=.05,c=l*h,f=.5,s=.7,o(n,(f+h)*i,(s-c)*r,(f+c)*i,(s-h)*r,f*i,(s-h)*r),o(n,(f-c)*i,(s-h)*r,(f-h)*i,(s-c)*r,(f-h)*i,s*r),n.lineTo(.45*i,1*r),n.lineTo(.2*i,1*r),n.lineTo(.2*i,.35*r),h=.025,c=l*h,f=.175,s=.35,o(n,(f+h)*i,(s-c)*r,(f+c)*i,(s-h)*r,f*i,(s-h)*r),o(n,(f-c)*i,(s-h)*r,(f-h)*i,(s-c)*r,(f-h)*i,s*r),n.lineTo(.15*i,.6*r),n.lineTo(0*i,.6*r),n.lineTo(0*i,.25*r),h=.05,c=l*h,f=.05,s=.25,o(n,(f-h)*i,(s-c)*r,(f-c)*i,(s-h)*r,f*i,(s-h)*r),n.lineTo(.5*i,.2*r),i=n.s,i.G=new e(.2,.2),i.H=new e(.8,.65),t.v(n),i},Card:function(n,i,r){return n=t.u(),v(n,1*i,0*r,!0),n.lineTo(1*i,1*r),n.lineTo(0*i,1*r),n.lineTo(0*i,.2*r),n.lineTo(.2*i,0*r),tt(n),i=n.s,i.G=new e(0,.2),i.H=cu,t.v(n),i},Collate:function(n,i,r){return n=t.u(),v(n,.5*i,.5*r,!0),n.lineTo(0,0),n.lineTo(1*i,0),n.lineTo(.5*i,.5*r),v(n,.5*i,.5*r,!0),n.lineTo(1*i,1*r),n.lineTo(0,1*r),n.lineTo(.5*i,.5*r),i=n.s,i.G=new e(.25,0),i.H=new e(.75,.25),t.v(n),i},CreateRequest:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.1);var u=t.u();return v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo(1*i,1*r),u.lineTo(0,1*r),tt(u),v(u,0,n*r,!1),u.lineTo(1*i,n*r),u.moveTo(0,(1-n)*r),u.lineTo(1*i,(1-n)*r),u.jb(!1),i=u.s,i.G=new e(0,n),i.H=new e(1,1-n),t.v(u),i},Database:function(n,i,r){n=t.u();var f=u.za,s=.5*f,f=.1*f;return v(n,1*i,.1*r,!0),n.lineTo(1*i,.9*r),o(n,1*i,(.9+f)*r,(.5+s)*i,1*r,.5*i,1*r),o(n,(.5-s)*i,1*r,0,(.9+f)*r,0,.9*r),n.lineTo(0,.1*r),o(n,0,(.1-f)*r,(.5-s)*i,0,.5*i,0),o(n,(.5+s)*i,0,1*i,(.1-f)*r,1*i,.1*r),v(n,1*i,.1*r,!1),o(n,1*i,(.1+f)*r,(.5+s)*i,.2*r,.5*i,.2*r),o(n,(.5-s)*i,.2*r,0,(.1+f)*r,0,.1*r),n.moveTo(1*i,.2*r),o(n,1*i,(.2+f)*r,(.5+s)*i,.3*r,.5*i,.3*r),o(n,(.5-s)*i,.3*r,0,(.2+f)*r,0,.2*r),n.moveTo(1*i,.3*r),o(n,1*i,(.3+f)*r,(.5+s)*i,.4*r,.5*i,.4*r),o(n,(.5-s)*i,.4*r,0,(.3+f)*r,0,.3*r),n.jb(!1),i=n.s,i.G=new e(0,.4),i.H=new e(1,.9),t.v(n),i},StoredData:"DataStorage",DataStorage:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(.75*i,0),o(n,1*i,0,1*i,1*r,.75*i,1*r),n.lineTo(0,1*r),o(n,.25*i,.9*r,.25*i,.1*r,0,0),tt(n),i=n.s,i.G=new e(.226,0),i.H=new e(.81,1),t.v(n),i},DiskStorage:function(n,i,r){n=t.u();var f=u.za,s=.5*f,f=.1*f;return v(n,1*i,.1*r,!0),n.lineTo(1*i,.9*r),o(n,1*i,(.9+f)*r,(.5+s)*i,1*r,.5*i,1*r),o(n,(.5-s)*i,1*r,0,(.9+f)*r,0,.9*r),n.lineTo(0,.1*r),o(n,0,(.1-f)*r,(.5-s)*i,0,.5*i,0),o(n,(.5+s)*i,0,1*i,(.1-f)*r,1*i,.1*r),v(n,1*i,.1*r,!1),o(n,1*i,(.1+f)*r,(.5+s)*i,.2*r,.5*i,.2*r),o(n,(.5-s)*i,.2*r,0,(.1+f)*r,0,.1*r),n.moveTo(1*i,.2*r),o(n,1*i,(.2+f)*r,(.5+s)*i,.3*r,.5*i,.3*r),o(n,(.5-s)*i,.3*r,0,(.2+f)*r,0,.2*r),n.jb(!1),i=n.s,i.G=new e(0,.3),i.H=new e(1,.9),t.v(n),i},Display:function(n,i,r){return n=t.u(),v(n,.25*i,0,!0),n.lineTo(.75*i,0),o(n,1*i,0,1*i,1*r,.75*i,1*r),n.lineTo(.25*i,1*r),n.lineTo(0,.5*r),tt(n),i=n.s,i.G=new e(.25,0),i.H=new e(.75,1),t.v(n),i},DividedEvent:function(n,i,r){n=n?n.Kc:0;0===n?n=.2:.15>n&&(n=.15);var f=t.u(),s=.2*u.za;return v(f,0,.2*r,!0),o(f,0,(.2-s)*r,(.2-s)*i,0,.2*i,0),f.lineTo(.8*i,0),o(f,(.8+s)*i,0,1*i,(.2-s)*r,1*i,.2*r),f.lineTo(1*i,.8*r),o(f,1*i,(.8+s)*r,(.8+s)*i,1*r,.8*i,1*r),f.lineTo(.2*i,1*r),o(f,(.2-s)*i,1*r,0,(.8+s)*r,0,.8*r),f.lineTo(0,.2*r),v(f,0,n*r,!1),f.lineTo(1*i,n*r),f.jb(!1),i=f.s,i.G=new e(0,n),i.H=new e(1,1-n),t.v(f),i},DividedProcess:function(n,i,r){n=n?n.Kc:0;.1>n&&(n=.1);var u=t.u();return v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo(1*i,1*r),u.lineTo(0,1*r),tt(u),v(u,0,n*r,!1),u.lineTo(1*i,n*r),u.jb(!1),i=u.s,i.G=new e(0,n),i.H=cu,t.v(u),i},Document:function(n,i,r){return r/=.8,n=t.u(),v(n,0,.7*r,!0),n.lineTo(0,0),n.lineTo(1*i,0),n.lineTo(1*i,.7*r),o(n,.5*i,.4*r,.5*i,1*r,0,.7*r),tt(n),i=n.s,i.G=hr,i.H=new e(1,.6),t.v(n),i},ExternalOrganization:function(n,i,r){n=n?n.Kc:0;.2>n&&(n=.2);var u=t.u();return v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo(1*i,1*r),u.lineTo(0,1*r),tt(u),v(u,n*i,0,!1),u.lineTo(0,n*r),u.moveTo(1*i,n*r),u.lineTo((1-n)*i,0),u.moveTo(0,(1-n)*r),u.lineTo(n*i,1*r),u.moveTo((1-n)*i,1*r),u.lineTo(1*i,(1-n)*r),u.jb(!1),i=u.s,i.G=new e(n/2,n/2),i.H=new e(1-n/2,1-n/2),t.v(u),i},ExternalProcess:function(n,i,r){return n=t.u(),v(n,.5*i,0,!0),n.lineTo(1*i,.5*r),n.lineTo(.5*i,1*r),n.lineTo(0,.5*r),tt(n),v(n,.1*i,.4*r,!1),n.lineTo(.1*i,.6*r),n.moveTo(.9*i,.6*r),n.lineTo(.9*i,.4*r),n.moveTo(.6*i,.1*r),n.lineTo(.4*i,.1*r),n.moveTo(.4*i,.9*r),n.lineTo(.6*i,.9*r),n.jb(!1),i=n.s,i.G=new e(.25,.25),i.H=new e(.75,.75),t.v(n),i},File:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(.75*i,0),n.lineTo(1*i,.25*r),n.lineTo(1*i,1*r),n.lineTo(0,1*r),tt(n),v(n,.75*i,0,!1),n.lineTo(.75*i,.25*r),n.lineTo(1*i,.25*r),n.jb(!1),i=n.s,i.G=new e(0,.25),i.H=cu,t.v(n),i},Interrupt:function(n,i,r){return n=t.u(),v(n,1*i,.5*r,!0),n.lineTo(0,1*r),n.lineTo(0,0),n.lineTo(1*i,.5*r),v(n,1*i,.5*r,!1),n.lineTo(1*i,1*r),v(n,1*i,.5*r,!1),n.lineTo(1*i,0),i=n.s,i.G=new e(0,.25),i.H=new e(.5,.75),t.v(n),i},InternalStorage:function(n,i,r){var f=n?n.Kc:0,u;return n=n?n.Vt:0,0===f&&(f=.1),0===n&&(n=.1),u=t.u(),v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo(1*i,1*r),u.lineTo(0,1*r),tt(u),v(u,f*i,0,!1),u.lineTo(f*i,1*r),u.moveTo(0,n*r),u.lineTo(1*i,n*r),u.jb(!1),i=u.s,i.G=new e(f,n),i.H=cu,t.v(u),i},Junction:function(n,i,r){n=t.u();var s=1/Math.SQRT2,f=(1-1/Math.SQRT2)/2,e=.5*u.za;return v(n,1*i,.5*r,!0),o(n,1*i,(.5+e)*r,(.5+e)*i,1*r,.5*i,1*r),o(n,(.5-e)*i,1*r,0,(.5+e)*r,0,.5*r),o(n,0,(.5-e)*r,(.5-e)*i,0,.5*i,0),o(n,(.5+e)*i,0,1*i,(.5-e)*r,1*i,.5*r),v(n,(f+s)*i,(f+s)*r,!1),n.lineTo(f*i,f*r),n.moveTo(f*i,(f+s)*r),n.lineTo((f+s)*i,f*r),n.jb(!1),i=n.s,i.Ac=ar,t.v(n),i},LinedDocument:function(n,i,r){return r/=.8,n=t.u(),v(n,0,.7*r,!0),n.lineTo(0,0),n.lineTo(1*i,0),n.lineTo(1*i,.7*r),o(n,.5*i,.4*r,.5*i,1*r,0,.7*r),tt(n),v(n,.1*i,0,!1),n.lineTo(.1*i,.75*r),n.jb(!1),i=n.s,i.G=new e(.1,0),i.H=new e(1,.6),t.v(n),i},LoopLimit:function(n,i,r){return n=t.u(),v(n,0,1*r,!0),n.lineTo(0,.25*r),n.lineTo(.25*i,0),n.lineTo(.75*i,0),n.lineTo(1*i,.25*r),n.lineTo(1*i,1*r),tt(n),i=n.s,i.G=new e(0,.25),i.H=cu,t.v(n),i},SequentialData:"MagneticTape",MagneticTape:function(n,i,r){n=t.u();var f=.5*u.za;return v(n,.5*i,1*r,!0),o(n,(.5-f)*i,1*r,0,(.5+f)*r,0,.5*r),o(n,0,(.5-f)*r,(.5-f)*i,0,.5*i,0),o(n,(.5+f)*i,0,1*i,(.5-f)*r,1*i,.5*r),o(n,1*i,(.5+f)*r,(.5+f)*i,.9*r,.6*i,.9*r),n.lineTo(1*i,.9*r),n.lineTo(1*i,1*r),n.lineTo(.5*i,1*r),i=n.s,i.G=new e(.15,.15),i.H=new e(.85,.8),t.v(n),i},ManualInput:function(n,i,r){return n=t.u(),v(n,1*i,0,!0),n.lineTo(1*i,1*r),n.lineTo(0,1*r),n.lineTo(0,.25*r),tt(n),i=n.s,i.G=new e(0,.25),i.H=cu,t.v(n),i},MessageFromUser:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.7);var u=t.u();return v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo(n*i,.5*r),u.lineTo(1*i,1*r),u.lineTo(0,1*r),tt(u),i=u.s,i.G=hr,i.H=new e(n,1),t.v(u),i},MicroformProcessing:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.25);var u=t.u();return v(u,0,0,!0),u.lineTo(.5*i,n*r),u.lineTo(1*i,0),u.lineTo(1*i,1*r),u.lineTo(.5*i,(1-n)*r),u.lineTo(0,1*r),tt(u),i=u.s,i.G=new e(0,n),i.H=new e(1,1-n),t.v(u),i},MicroformRecording:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(.75*i,.25*r),n.lineTo(1*i,.15*r),n.lineTo(1*i,.85*r),n.lineTo(.75*i,.75*r),n.lineTo(0,1*r),tt(n),i=n.s,i.G=new e(0,.25),i.H=new e(1,.75),t.v(n),i},MultiDocument:function(n,i,r){return r/=.8,n=t.u(),v(n,i,0,!0),n.lineTo(i,.5*r),o(n,.96*i,.47*r,.93*i,.45*r,.9*i,.44*r),n.lineTo(.9*i,.6*r),o(n,.86*i,.57*r,.83*i,.55*r,.8*i,.54*r),n.lineTo(.8*i,.7*r),o(n,.4*i,.4*r,.4*i,1*r,0,.7*r),n.lineTo(0,.2*r),n.lineTo(.1*i,.2*r),n.lineTo(.1*i,.1*r),n.lineTo(.2*i,.1*r),n.lineTo(.2*i,0),tt(n),v(n,.1*i,.2*r,!1),n.lineTo(.8*i,.2*r),n.lineTo(.8*i,.54*r),n.moveTo(.2*i,.1*r),n.lineTo(.9*i,.1*r),n.lineTo(.9*i,.44*r),n.jb(!1),i=n.s,i.G=new e(0,.25),i.H=new e(.8,.77),t.v(n),i},MultiProcess:function(n,i,r){return n=t.u(),v(n,.1*i,.1*r,!0),n.lineTo(.2*i,.1*r),n.lineTo(.2*i,0),n.lineTo(1*i,0),n.lineTo(1*i,.8*r),n.lineTo(.9*i,.8*r),n.lineTo(.9*i,.9*r),n.lineTo(.8*i,.9*r),n.lineTo(.8*i,1*r),n.lineTo(0,1*r),n.lineTo(0,.2*r),n.lineTo(.1*i,.2*r),tt(n),v(n,.2*i,.1*r,!1),n.lineTo(.9*i,.1*r),n.lineTo(.9*i,.8*r),n.moveTo(.1*i,.2*r),n.lineTo(.8*i,.2*r),n.lineTo(.8*i,.9*r),n.jb(!1),i=n.s,i.G=new e(0,.2),i.H=new e(.8,1),t.v(n),i},OfflineStorage:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.1);var f=1-n,u=t.u();return v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo(.5*i,1*r),tt(u),v(u,.5*n*i,n*r,!1),u.lineTo((1-.5*n)*i,n*r),u.jb(!1),i=u.s,i.G=new e(f/4+.5*n,n),i.H=new e(3*f/4+.5*n,n+.5*f),t.v(u),i},OffPageConnector:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(.75*i,0),n.lineTo(1*i,.5*r),n.lineTo(.75*i,1*r),n.lineTo(0,1*r),tt(n),i=n.s,i.G=hr,i.H=new e(.75,1),t.v(n),i},Or:function(n,i,r){n=t.u();var f=.5*u.za;return v(n,1*i,.5*r,!0),o(n,1*i,(.5+f)*r,(.5+f)*i,1*r,.5*i,1*r),o(n,(.5-f)*i,1*r,0,(.5+f)*r,0,.5*r),o(n,0,(.5-f)*r,(.5-f)*i,0,.5*i,0),o(n,(.5+f)*i,0,1*i,(.5-f)*r,1*i,.5*r),v(n,1*i,.5*r,!1),n.lineTo(0,.5*r),n.moveTo(.5*i,1*r),n.lineTo(.5*i,0),n.jb(!1),i=n.s,i.Ac=ar,t.v(n),i},PaperTape:function(n,i,r){return r/=.8,n=t.u(),v(n,0,.7*r,!0),n.lineTo(0,.3*r),o(n,.5*i,.6*r,.5*i,0,1*i,.3),n.lineTo(1*i,.7*r),o(n,.5*i,.4*r,.5*i,1*r,0,.7*r),tt(n),i=n.s,i.G=new e(0,.49),i.H=new e(1,.75),t.v(n),i},PrimitiveFromCall:function(n,i,r){var f=n?n.Kc:0,u;return n=n?n.Vt:0,0===f&&(f=.1),0===n&&(n=.3),u=t.u(),v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo((1-n)*i,.5*r),u.lineTo(1*i,1*r),u.lineTo(0,1*r),tt(u),i=u.s,i.G=new e(f,0),i.H=new e(1-n,1),t.v(u),i},PrimitiveToCall:function(n,i,r){var f=n?n.Kc:0,u;return n=n?n.Vt:0,0===f&&(f=.1),0===n&&(n=.3),u=t.u(),v(u,0,0,!0),u.lineTo((1-n)*i,0),u.lineTo(1*i,.5*r),u.lineTo((1-n)*i,1*r),u.lineTo(0,1*r),tt(u),i=u.s,i.G=new e(f,0),i.H=new e(1-n,1),t.v(u),i},Subroutine:"Procedure",Procedure:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.1);var u=t.u();return v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo(1*i,1*r),u.lineTo(0,1*r),tt(u),v(u,(1-n)*i,0,!1),u.lineTo((1-n)*i,1*r),u.moveTo(n*i,0),u.lineTo(n*i,1*r),u.jb(!1),i=u.s,i.G=new e(n,0),i.H=new e(1-n,1),t.v(u),i},Process:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.1);var u=t.u();return v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo(1*i,1*r),u.lineTo(0,1*r),tt(u),v(u,n*i,0,!1),u.lineTo(n*i,1*r),u.jb(!1),i=u.s,i.G=new e(n,0),i.H=cu,t.v(u),i},Sort:function(n,i,r){return n=t.u(),v(n,.5*i,0,!0),n.lineTo(1*i,.5*r),n.lineTo(.5*i,1*r),n.lineTo(0,.5*r),tt(n),v(n,0,.5*r,!1),n.lineTo(1*i,.5*r),n.jb(!1),i=n.s,i.G=new e(.25,.25),i.H=new e(.75,.5),t.v(n),i},Start:function(n,i,r){return n=t.u(),v(n,.25*i,0,!0),v(n,.25*i,0,!0),n.arcTo(270,180,.75*i,.5*r,.25*i,.5*r),n.arcTo(90,180,.25*i,.5*r,.25*i,.5*r),v(n,.25*i,0,!1),n.lineTo(.25*i,1*r),n.moveTo(.75*i,0),n.lineTo(.75*i,1*r),n.jb(!1),i=n.s,i.G=new e(.25,0),i.H=new e(.75,1),t.v(n),i},Terminator:function(n,i,r){return n=t.u(),v(n,.25*i,0,!0),n.arcTo(270,180,.75*i,.5*r,.25*i,.5*r),n.arcTo(90,180,.25*i,.5*r,.25*i,.5*r),i=n.s,i.G=new e(.23,0),i.H=new e(.77,1),t.v(n),i},TransmittalTape:function(n,i,r){n=n?n.Kc:0;0===n&&(n=.1);var u=t.u();return v(u,0,0,!0),u.lineTo(1*i,0),u.lineTo(1*i,1*r),u.lineTo(.75*i,(1-n)*r),u.lineTo(0,(1-n)*r),tt(u),i=u.s,i.G=hr,i.H=new e(1,1-n),t.v(u),i},AndGate:function(n,i,r){n=t.u();var f=.5*u.za;return v(n,0,0,!0),n.lineTo(.5*i,0),o(n,(.5+f)*i,0,1*i,(.5-f)*r,1*i,.5*r),o(n,1*i,(.5+f)*r,(.5+f)*i,1*r,.5*i,1*r),n.lineTo(0,1*r),tt(n),i=n.s,i.G=hr,i.H=new e(.55,1),t.v(n),i},Buffer:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(1*i,.5*r),n.lineTo(0,1*r),tt(n),i=n.s,i.G=new e(0,.25),i.H=new e(.5,.75),t.v(n),i},Clock:function(n,i,r){n=t.u();var f=.5*u.za;return v(n,1*i,.5*r,!0),o(n,1*i,(.5+f)*r,(.5+f)*i,1*r,.5*i,1*r),o(n,(.5-f)*i,1*r,0,(.5+f)*r,0,.5*r),o(n,0,(.5-f)*r,(.5-f)*i,0,.5*i,0),o(n,(.5+f)*i,0,1*i,(.5-f)*r,1*i,.5*r),v(n,1*i,.5*r,!1),n.lineTo(1*i,.5*r),v(n,.8*i,.75*r,!1),n.lineTo(.8*i,.25*r),n.lineTo(.6*i,.25*r),n.lineTo(.6*i,.75*r),n.lineTo(.4*i,.75*r),n.lineTo(.4*i,.25*r),n.lineTo(.2*i,.25*r),n.lineTo(.2*i,.75*r),n.jb(!1),i=n.s,i.Ac=ar,t.v(n),i},Ground:function(n,i,r){return n=t.u(),v(n,.5*i,0,!1),n.lineTo(.5*i,.4*r),n.moveTo(.2*i,.6*r),n.lineTo(.8*i,.6*r),n.moveTo(.3*i,.8*r),n.lineTo(.7*i,.8*r),n.moveTo(.4*i,1*r),n.lineTo(.6*i,1*r),i=n.s,t.v(n),i},Inverter:function(n,i,r){n=t.u();var f=.1*u.za;return v(n,.8*i,.5*r,!0),n.lineTo(0,1*r),n.lineTo(0,0),n.lineTo(.8*i,.5*r),v(n,1*i,.5*r,!0),o(n,1*i,(.5+f)*r,(.9+f)*i,.6*r,.9*i,.6*r),o(n,(.9-f)*i,.6*r,.8*i,(.5+f)*r,.8*i,.5*r),o(n,.8*i,(.5-f)*r,(.9-f)*i,.4*r,.9*i,.4*r),o(n,(.9+f)*i,.4*r,1*i,(.5-f)*r,1*i,.5*r),i=n.s,i.G=new e(0,.25),i.H=new e(.4,.75),t.v(n),i},NandGate:function(n,i,r){n=t.u();var f=u.za,s=.5*f,h=.4*f,f=.1*f;return v(n,.8*i,.5*r,!0),o(n,.8*i,(.5+h)*r,(.4+s)*i,1*r,.4*i,1*r),n.lineTo(0,1*r),n.lineTo(0,0),n.lineTo(.4*i,0),o(n,(.4+s)*i,0,.8*i,(.5-h)*r,.8*i,.5*r),v(n,1*i,.5*r,!0),o(n,1*i,(.5+f)*r,(.9+f)*i,.6*r,.9*i,.6*r),o(n,(.9-f)*i,.6*r,.8*i,(.5+f)*r,.8*i,.5*r),o(n,.8*i,(.5-f)*r,(.9-f)*i,.4*r,.9*i,.4*r),o(n,(.9+f)*i,.4*r,1*i,(.5-f)*r,1*i,.5*r),i=n.s,i.G=new e(0,.05),i.H=new e(.55,.95),t.v(n),i},NorGate:function(n,i,r){n=t.u();var l=u.za,s=.5,c=l*s,h=0,f=.5;return v(n,.8*i,.5*r,!0),o(n,.7*i,(f+c)*r,(h+c)*i,(f+s)*r,0,1*r),o(n,.25*i,.75*r,.25*i,.25*r,0,0),o(n,(h+c)*i,(f-s)*r,.7*i,(f-c)*r,.8*i,.5*r),s=.1,c=.1*l,h=.9,f=.5,v(n,(h-s)*i,f*r,!0),o(n,(h-s)*i,(f-c)*r,(h-c)*i,(f-s)*r,h*i,(f-s)*r),o(n,(h+c)*i,(f-s)*r,(h+s)*i,(f-c)*r,(h+s)*i,f*r),o(n,(h+s)*i,(f+c)*r,(h+c)*i,(f+s)*r,h*i,(f+s)*r),o(n,(h-c)*i,(f+s)*r,(h-s)*i,(f+c)*r,(h-s)*i,f*r),i=n.s,i.G=new e(.2,.25),i.H=new e(.6,.75),t.v(n),i},OrGate:function(n,i,r){n=t.u();var f=.5*u.za;return v(n,0,0,!0),o(n,(0+f+f)*i,0*r,.8*i,(.5-f)*r,1*i,.5*r),o(n,.8*i,(.5+f)*r,(0+f+f)*i,1*r,0,1*r),o(n,.25*i,.75*r,.25*i,.25*r,0,0),tt(n),i=n.s,i.G=new e(.2,.25),i.H=new e(.75,.75),t.v(n),i},XnorGate:function(n,i,r){n=t.u();var l=u.za,s=.5,c=l*s,h=.2,f=.5;return v(n,.1*i,0,!1),o(n,.35*i,.25*r,.35*i,.75*r,.1*i,1*r),v(n,.8*i,.5*r,!0),o(n,.7*i,(f+c)*r,(h+c)*i,(f+s)*r,.2*i,1*r),o(n,.45*i,.75*r,.45*i,.25*r,.2*i,0),o(n,(h+c)*i,(f-s)*r,.7*i,(f-c)*r,.8*i,.5*r),s=.1,c=.1*l,h=.9,f=.5,v(n,(h-s)*i,f*r,!0),o(n,(h-s)*i,(f-c)*r,(h-c)*i,(f-s)*r,h*i,(f-s)*r),o(n,(h+c)*i,(f-s)*r,(h+s)*i,(f-c)*r,(h+s)*i,f*r),o(n,(h+s)*i,(f+c)*r,(h+c)*i,(f+s)*r,h*i,(f+s)*r),o(n,(h-c)*i,(f+s)*r,(h-s)*i,(f+c)*r,(h-s)*i,f*r),i=n.s,i.G=new e(.4,.25),i.H=new e(.65,.75),t.v(n),i},XorGate:function(n,i,r){n=t.u();var f=.5*u.za;return v(n,.1*i,0,!1),o(n,.35*i,.25*r,.35*i,.75*r,.1*i,1*r),v(n,.2*i,0,!0),o(n,(.2+f)*i,0*r,.9*i,(.5-f)*r,1*i,.5*r),o(n,.9*i,(.5+f)*r,(.2+f)*i,1*r,.2*i,1*r),o(n,.45*i,.75*r,.45*i,.25*r,.2*i,0),tt(n),i=n.s,i.G=new e(.4,.25),i.H=new e(.8,.75),t.v(n),i},Capacitor:function(n,i,r){return n=t.u(),v(n,0,0,!1),n.lineTo(0,1*r),n.moveTo(1*i,0),n.lineTo(1*i,1*r),i=n.s,t.v(n),i},Resistor:function(n,i,r){return n=t.u(),v(n,0,.5*r,!1),n.lineTo(.1*i,0),n.lineTo(.2*i,1*r),n.lineTo(.3*i,0),n.lineTo(.4*i,1*r),n.lineTo(.5*i,0),n.lineTo(.6*i,1*r),n.lineTo(.7*i,.5*r),i=n.s,t.v(n),i},Inductor:function(n,i,r){n=t.u();var s=.1*u.za,f=.1,e=.5;return v(n,(f-.5*s)*i,(e+.1)*r,!1),o(n,(f-s)*i,(e+.1)*r,(f-.1)*i,(e+s)*r,(f+.1)*i,(e+s)*r),f=.3,e=.5,o(n,(f+.1)*i,(e+s)*r,(f+s)*i,(e+.1)*r,f*i,(e+.1)*r),o(n,(f-s)*i,(e+.1)*r,(f-.1)*i,(e+s)*r,(f+.1)*i,(e+s)*r),e=f=.5,o(n,(f+.1)*i,(e+s)*r,(f+s)*i,(e+.1)*r,f*i,(e+.1)*r),o(n,(f-s)*i,(e+.1)*r,(f-.1)*i,(e+s)*r,(f+.1)*i,(e+s)*r),f=.7,e=.5,o(n,(f+.1)*i,(e+s)*r,(f+s)*i,(e+.1)*r,f*i,(e+.1)*r),o(n,(f-s)*i,(e+.1)*r,(f-.1)*i,(e+s)*r,(f+.1)*i,(e+s)*r),f=.9,e=.5,o(n,(f+.1)*i,(e+s)*r,(f+s)*i,(e+.1)*r,(f+.5*s)*i,(e+.1)*r),i=n.s,t.v(n),i},ACvoltageSource:function(n,i,r){n=t.u();var f=.5*u.za;return v(n,0*i,.5*r,!1),o(n,0*i,(.5-f)*r,(.5-f)*i,0*r,.5*i,0*r),o(n,(.5+f)*i,0*r,1*i,(.5-f)*r,1*i,.5*r),o(n,1*i,(.5+f)*r,(.5+f)*i,1*r,.5*i,1*r),o(n,(.5-f)*i,1*r,0*i,(.5+f)*r,0*i,.5*r),n.moveTo(.1*i,.5*r),o(n,.5*i,0*r,.5*i,1*r,.9*i,.5*r),i=n.s,i.Ac=ar,t.v(n),i},DCvoltageSource:function(n,i,r){return n=t.u(),v(n,0,.75*r,!1),n.lineTo(0,.25*r),n.moveTo(1*i,0),n.lineTo(1*i,1*r),i=n.s,t.v(n),i},Diode:function(n,i,r){return n=t.u(),v(n,1*i,0,!1),n.lineTo(1*i,.5*r),n.lineTo(0,1*r),n.lineTo(0,0),n.lineTo(1*i,.5*r),n.lineTo(1*i,1*r),i=n.s,i.G=new e(0,.25),i.H=new e(.5,.75),t.v(n),i},Wifi:function(n,i,r){var h=i,c=r;i*=.38;r*=.6;n=t.u();var a=u.za,l=.8*a,f=.8,e=0,s=.5,h=(h-i)/2,c=(c-r)/2;return v(n,e*i+h,(s+f)*r+c,!0),o(n,(e-l)*i+h,(s+f)*r+c,(e-f)*i+h,(s+l)*r+c,(e-f)*i+h,s*r+c),o(n,(e-f)*i+h,(s-l)*r+c,(e-l)*i+h,(s-f)*r+c,e*i+h,(s-f)*r+c),o(n,e*i+h,(s-f)*r+c,(e-f+.5*l)*i+h,(s-l)*r+c,(e-f+.5*l)*i+h,s*r+c),o(n,(e-f+.5*l)*i+h,(s+l)*r+c,e*i+h,(s+f)*r+c,e*i+h,(s+f)*r+c),tt(n),l=.4*a,f=.4,e=.2,s=.5,v(n,e*i+h,(s+f)*r+c,!0),o(n,(e-l)*i+h,(s+f)*r+c,(e-f)*i+h,(s+l)*r+c,(e-f)*i+h,s*r+c),o(n,(e-f)*i+h,(s-l)*r+c,(e-l)*i+h,(s-f)*r+c,e*i+h,(s-f)*r+c),o(n,e*i+h,(s-f)*r+c,(e-f+.5*l)*i+h,(s-l)*r+c,(e-f+.5*l)*i+h,s*r+c),o(n,(e-f+.5*l)*i+h,(s+l)*r+c,e*i+h,(s+f)*r+c,e*i+h,(s+f)*r+c),tt(n),l=.2*a,f=.2,s=e=.5,v(n,(e-f)*i+h,s*r+c,!0),o(n,(e-f)*i+h,(s-l)*r+c,(e-l)*i+h,(s-f)*r+c,e*i+h,(s-f)*r+c),o(n,(e+l)*i+h,(s-f)*r+c,(e+f)*i+h,(s-l)*r+c,(e+f)*i+h,s*r+c),o(n,(e+f)*i+h,(s+l)*r+c,(e+l)*i+h,(s+f)*r+c,e*i+h,(s+f)*r+c),o(n,(e-l)*i+h,(s+f)*r+c,(e-f)*i+h,(s+l)*r+c,(e-f)*i+h,s*r+c),l=.4*a,f=.4,e=.8,s=.5,v(n,e*i+h,(s-f)*r+c,!0),o(n,(e+l)*i+h,(s-f)*r+c,(e+f)*i+h,(s-l)*r+c,(e+f)*i+h,s*r+c),o(n,(e+f)*i+h,(s+l)*r+c,(e+l)*i+h,(s+f)*r+c,e*i+h,(s+f)*r+c),o(n,e*i+h,(s+f)*r+c,(e+f-.5*l)*i+h,(s+l)*r+c,(e+f-.5*l)*i+h,s*r+c),o(n,(e+f-.5*l)*i+h,(s-l)*r+c,e*i+h,(s-f)*r+c,e*i+h,(s-f)*r+c),tt(n),l=.8*a,f=.8,e=1,s=.5,v(n,e*i+h,(s-f)*r+c,!0),o(n,(e+l)*i+h,(s-f)*r+c,(e+f)*i+h,(s-l)*r+c,(e+f)*i+h,s*r+c),o(n,(e+f)*i+h,(s+l)*r+c,(e+l)*i+h,(s+f)*r+c,e*i+h,(s+f)*r+c),o(n,e*i+h,(s+f)*r+c,(e+f-.5*l)*i+h,(s+l)*r+c,(e+f-.5*l)*i+h,s*r+c),o(n,(e+f-.5*l)*i+h,(s-l)*r+c,e*i+h,(s-f)*r+c,e*i+h,(s-f)*r+c),tt(n),i=n.s,t.v(n),i},Email:function(n,i,r){return n=t.u(),v(n,0,0,!0),n.lineTo(1*i,0),n.lineTo(1*i,1*r),n.lineTo(0,1*r),n.lineTo(0,0),tt(n),v(n,0,0,!1),n.lineTo(.5*i,.6*r),n.lineTo(1*i,0),n.moveTo(0,1*r),n.lineTo(.45*i,.54*r),n.moveTo(1*i,1*r),n.lineTo(.55*i,.54*r),n.jb(!1),i=n.s,t.v(n),i},Ethernet:function(n,i,r){return n=t.u(),v(n,.35*i,0,!0),n.lineTo(.65*i,0),n.lineTo(.65*i,.4*r),n.lineTo(.35*i,.4*r),n.lineTo(.35*i,0),tt(n),v(n,.1*i,1*r,!0,!0),n.lineTo(.4*i,1*r),n.lineTo(.4*i,.6*r),n.lineTo(.1*i,.6*r),n.lineTo(.1*i,1*r),tt(n),v(n,.6*i,1*r,!0,!0),n.lineTo(.9*i,1*r),n.lineTo(.9*i,.6*r),n.lineTo(.6*i,.6*r),n.lineTo(.6*i,1*r),tt(n),v(n,0,.5*r,!1),n.lineTo(1*i,.5*r),n.moveTo(.5*i,.5*r),n.lineTo(.5*i,.4*r),n.moveTo(.75*i,.5*r),n.lineTo(.75*i,.6*r),n.moveTo(.25*i,.5*r),n.lineTo(.25*i,.6*r),n.jb(!1),i=n.s,t.v(n),i},Power:function(n,i,r){var p;n=t.u();var y=u.za,s=.4*y,f=.4,a=t.N(),h=t.N(),c=t.N(),l=t.N();return u.hj(.5,.5-f,.5+s,.5-f,.5+f,.5-s,.5+f,.5,.5,a,a,h,c,l),p=t.qc(h.x,h.y),v(n,h.x*i,h.y*r,!0),o(n,c.x*i,c.y*r,l.x*i,l.y*r,(.5+f)*i,.5*r),o(n,(.5+f)*i,(.5+s)*r,(.5+s)*i,(.5+f)*r,.5*i,(.5+f)*r),o(n,(.5-s)*i,(.5+f)*r,(.5-f)*i,(.5+s)*r,(.5-f)*i,.5*r),u.hj(.5-f,.5,.5-f,.5-s,.5-s,.5-f,.5,.5-f,.5,c,l,h,a,a),o(n,c.x*i,c.y*r,l.x*i,l.y*r,h.x*i,h.y*r),s=.3*y,f=.3,u.hj(.5-f,.5,.5-f,.5-s,.5-s,.5-f,.5,.5-f,.5,c,l,h,a,a),n.lineTo(h.x*i,h.y*r),o(n,l.x*i,l.y*r,c.x*i,c.y*r,(.5-f)*i,.5*r),o(n,(.5-f)*i,(.5+s)*r,(.5-s)*i,(.5+f)*r,.5*i,(.5+f)*r),o(n,(.5+s)*i,(.5+f)*r,(.5+f)*i,(.5+s)*r,(.5+f)*i,.5*r),u.hj(.5,.5-f,.5+s,.5-f,.5+f,.5-s,.5+f,.5,.5,a,a,h,c,l),o(n,l.x*i,l.y*r,c.x*i,c.y*r,h.x*i,h.y*r),tt(n),v(n,.45*i,0,!0),n.lineTo(.45*i,.5*r),n.lineTo(.55*i,.5*r),n.lineTo(.55*i,0),tt(n),t.B(a),t.B(h),t.B(c),t.B(l),t.B(p),i=n.s,i.G=new e(.25,.55),i.H=new e(.75,.8),t.v(n),i},Fallout:function(n,i,r){var f,e;return n=t.u(),f=.5*u.za,v(n,0*i,.5*r,!0),o(n,0*i,(.5-f)*r,(.5-f)*i,0*r,.5*i,0*r),o(n,(.5+f)*i,0*r,1*i,(.5-f)*r,1*i,.5*r),o(n,1*i,(.5+f)*r,(.5+f)*i,1*r,.5*i,1*r),o(n,(.5-f)*i,1*r,0*i,(.5+f)*r,0*i,.5*r),e=f=0,v(n,(.3+f)*i,(.8+e)*r,!0,!0),n.lineTo((.5+f)*i,(.5+e)*r),n.lineTo((.1+f)*i,(.5+e)*r),n.lineTo((.3+f)*i,(.8+e)*r),f=.4,e=0,tt(n),v(n,(.3+f)*i,(.8+e)*r,!0,!0),n.lineTo((.5+f)*i,(.5+e)*r),n.lineTo((.1+f)*i,(.5+e)*r),n.lineTo((.3+f)*i,(.8+e)*r),f=.2,e=-.3,tt(n),v(n,(.3+f)*i,(.8+e)*r,!0,!0),n.lineTo((.5+f)*i,(.5+e)*r),n.lineTo((.1+f)*i,(.5+e)*r),n.lineTo((.3+f)*i,(.8+e)*r),tt(n),i=n.s,i.Ac=ar,t.v(n),i},IrritationHazard:function(n,i,r){return n=t.u(),v(n,.2*i,0*r,!0),n.lineTo(.5*i,.3*r),n.lineTo(.8*i,0*r),n.lineTo(1*i,.2*r),n.lineTo(.7*i,.5*r),n.lineTo(1*i,.8*r),n.lineTo(.8*i,1*r),n.lineTo(.5*i,.7*r),n.lineTo(.2*i,1*r),n.lineTo(0*i,.8*r),n.lineTo(.3*i,.5*r),n.lineTo(0*i,.2*r),tt(n),i=n.s,i.G=new e(.3,.3),i.H=new e(.7,.7),t.v(n),i},ElectricalHazard:function(n,i,r){return n=t.u(),v(n,.37,0*r,!0),n.lineTo(.5*i,.11*r),n.lineTo(.77*i,.04*r),n.lineTo(.33*i,.49*r),n.lineTo(1*i,.37*r),n.lineTo(.63*i,.86*r),n.lineTo(.77*i,.91*r),n.lineTo(.34*i,1*r),n.lineTo(.34*i,.78*r),n.lineTo(.44*i,.8*r),n.lineTo(.65*i,.56*r),n.lineTo(0*i,.68*r),tt(n),i=n.s,t.v(n),i},FireHazard:function(n,i,r){return n=t.u(),v(n,.1*i,1*r,!0),o(n,-.25*i,.63*r,.45*i,.44*r,.29*i,0*r),o(n,.48*i,.17*r,.54*i,.35*r,.51*i,.42*r),o(n,.59*i,.29*r,.58*i,.28*r,.59*i,.18*r),o(n,.8*i,.34*r,.88*i,.43*r,.75*i,.6*r),o(n,.87*i,.48*r,.88*i,.43*r,.88*i,.31*r),o(n,1.17*i,.76*r,.82*i,.8*r,.9*i,1*r),tt(n),i=n.s,i.G=new e(.05,.645),i.H=new e(.884,.908),t.v(n),i},BpmnActivityLoop:function(n,i,r){n=t.u();var u=4*(Math.SQRT2-1)/3*.5;return v(n,(.5*Math.SQRT2/2+.5)*i,(1-(.5-.5*Math.SQRT2/2))*r,!1),o(n,1*i,.7*r,1*i,.5*r,1*i,.5*r),o(n,1*i,(.5-u+0)*r,(.5+u+0)*i,0*r,.5*i,0*r),o(n,(.5-u+0)*i,0*r,0*i,(.5-u+0)*r,0*i,.5*r),o(n,0*i,(.5+u+0)*r,(.5-u+0)*i,1*r,.35*i,.98*r),n.moveTo(.35*i,.8*r),n.lineTo(.35*i,1*r),n.lineTo(.15*i,1*r),i=n.s,t.v(n),i},BpmnActivityParallel:function(n,i,r){return n=t.u(),v(n,0,0,!1),n.lineTo(0,1*r),n.moveTo(.5*i,0),n.lineTo(.5*i,1*r),n.moveTo(1*i,0),n.lineTo(1*i,1*r),i=n.s,t.v(n),i},BpmnActivitySequential:function(n,i,r){return n=t.u(),v(n,0,0,!1),n.lineTo(1*i,0),n.moveTo(0,.5*r),n.lineTo(1*i,.5*r),n.moveTo(0,1*r),n.lineTo(1*i,1*r),i=n.s,t.v(n),i},BpmnActivityAdHoc:function(n,i,r){return n=t.u(),v(n,0,0,!1),v(n,1*i,1*r,!1),v(n,0,.5*r,!1),o(n,.2*i,.35*r,.3*i,.35*r,.5*i,.5*r),o(n,.7*i,.65*r,.8*i,.65*r,1*i,.5*r),i=n.s,t.v(n),i},BpmnActivityCompensation:function(n,i,r){return n=t.u(),v(n,0,.5*r,!0),n.lineTo(.5*i,0),n.lineTo(.5*i,.5*r),n.lineTo(1*i,1*r),n.lineTo(1*i,0),n.lineTo(.5*i,.5*r),n.lineTo(.5*i,1*r),tt(n),i=n.s,t.v(n),i},BpmnTaskMessage:function(n,i,r){return n=t.u(),v(n,0,.2*r,!0),n.lineTo(1*i,.2*r),n.lineTo(1*i,.8*r),n.lineTo(0,.8*r),n.lineTo(0,.8*r),tt(n),v(n,0,.2*r,!1),n.lineTo(.5*i,.5*r),n.lineTo(1*i,.2*r),n.jb(!1),i=n.s,t.v(n),i},BpmnTaskScript:function(n,i,r){return n=t.u(),v(n,.7*i,1*r,!0),n.lineTo(.3*i,1*r),o(n,.6*i,.5*r,0,.5*r,.3*i,0),n.lineTo(.7*i,0),o(n,.4*i,.5*r,1*i,.5*r,.7*i,1*r),tt(n),v(n,.45*i,.73*r,!1),n.lineTo(.7*i,.73*r),n.moveTo(.38*i,.5*r),n.lineTo(.63*i,.5*r),n.moveTo(.31*i,.27*r),n.lineTo(.56*i,.27*r),n.jb(!1),i=n.s,t.v(n),i},BpmnTaskUser:function(n,i,r){n=t.u();v(n,0,0,!1);v(n,.335*i,(1-.555)*r,!0);n.lineTo(.335*i,.595*r);n.lineTo(.665*i,.595*r);n.lineTo(.665*i,(1-.555)*r);o(n,.88*i,.46*r,.98*i,.54*r,1*i,.68*r);n.lineTo(1*i,1*r);n.lineTo(0,1*r);n.lineTo(0,.68*r);o(n,.02*i,.54*r,.12*i,.46*r,.335*i,(1-.555)*r);n.lineTo(.365*i,.405*r);var u=.5-.285,e=Math.PI/4,f=4*(1-Math.cos(e))/(3*Math.sin(e)),e=f*u,f=f*u;return o(n,(.5-(e+u)/2)*i,(u+(u+f)/2)*r,(.5-u)*i,(u+f)*r,(.5-u)*i,u*r),o(n,(.5-u)*i,(u-f)*r,(.5-e)*i,(u-u)*r,.5*i,(u-u)*r),o(n,(.5+e)*i,(u-u)*r,(.5+u)*i,(u-f)*r,(.5+u)*i,u*r),o(n,(.5+u)*i,(u+f)*r,(.5+(e+u)/2)*i,(u+(u+f)/2)*r,.635*i,.405*r),n.lineTo(.635*i,.405*r),n.lineTo(.665*i,(1-.555)*r),n.lineTo(.665*i,.595*r),n.lineTo(.335*i,.595*r),v(n,.2*i,1*r,!1),n.lineTo(.2*i,.8*r),v(n,.8*i,1*r,!1),n.lineTo(.8*i,.8*r),i=n.s,t.v(n),i},BpmnEventConditional:function(n,i,r){return n=t.u(),v(n,.1*i,0,!0),n.lineTo(.9*i,0),n.lineTo(.9*i,1*r),n.lineTo(.1*i,1*r),tt(n),v(n,.2*i,.2*r,!1),n.lineTo(.8*i,.2*r),n.moveTo(.2*i,.4*r),n.lineTo(.8*i,.4*r),n.moveTo(.2*i,.6*r),n.lineTo(.8*i,.6*r),n.moveTo(.2*i,.8*r),n.lineTo(.8*i,.8*r),n.jb(!1),i=n.s,t.v(n),i},BpmnEventError:function(n,i,r){return n=t.u(),v(n,0,1*r,!0),n.lineTo(.33*i,0),n.lineTo(.66*i,.5*r),n.lineTo(1*i,0),n.lineTo(.66*i,1*r),n.lineTo(.33*i,.5*r),tt(n),i=n.s,t.v(n),i},BpmnEventEscalation:function(n,i,r){return n=t.u(),v(n,0,0,!1),v(n,1*i,1*r,!1),v(n,.1*i,1*r,!0),n.lineTo(.5*i,0),n.lineTo(.9*i,1*r),n.lineTo(.5*i,.5*r),tt(n),i=n.s,t.v(n),i},BpmnEventTimer:function(n,i,r){n=t.u();var f=.5*u.za;return v(n,1*i,.5*r,!0),o(n,1*i,(.5+f)*r,(.5+f)*i,1*r,.5*i,1*r),o(n,(.5-f)*i,1*r,0,(.5+f)*r,0,.5*r),o(n,0,(.5-f)*r,(.5-f)*i,0,.5*i,0),o(n,(.5+f)*i,0,1*i,(.5-f)*r,1*i,.5*r),v(n,.5*i,0,!1),n.lineTo(.5*i,.15*r),n.moveTo(.5*i,1*r),n.lineTo(.5*i,.85*r),n.moveTo(0,.5*r),n.lineTo(.15*i,.5*r),n.moveTo(1*i,.5*r),n.lineTo(.85*i,.5*r),n.moveTo(.5*i,.5*r),n.lineTo(.58*i,.1*r),n.moveTo(.5*i,.5*r),n.lineTo(.78*i,.54*r),n.jb(!1),i=n.s,i.Ac=ar,t.v(n),i}};u.eB={};for(yn in u.oj)u.oj[yn.toLowerCase()]=yn;u.tw={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};u.Rm={};u.mK=function(){var n,t;if(u.tw){for(n in u.tw)t=rp(u.tw[n],!1),u.Rm[n]=t,n.toLowerCase()!==n&&(u.Rm[n.toLowerCase()]=n);u.tw=void 0}};u.qE=function(n){u.mK();var t=u.Rm[n];if(void 0===t){if(t=n.toLowerCase(),"none"===t)return"None";t=u.Rm[t]}return"string"==typeof t?t:t instanceof rt?n:null};w.FigureGenerators=u.oj;w.ArrowheadGeometries=u.Rm;t.ka("Part",s);t.Qa(s,a);s.prototype.cloneProtected=function(n){a.prototype.cloneProtected.call(this,n);n.Z=this.Z&-4097|49152;n.Eh=this.Eh;n.Xk=this.Xk;n.xr=this.xr;n.ws=this.ws;n.js=this.js;n.ms=this.ms;n.ys=this.ys;n.xs=this.xs;n.Vg=null;n.ls=this.ls;n.ks.assign(this.ks);n.ns=this.ns;n.re=this.re;n.Lq=this.Lq;n.hh.assign(this.hh);n.Er=this.Er;n.Fr=this.Fr.ba();n.Pr=this.Pr.ba();n.Hr=this.Hr.ba();n.Vq=this.Vq;n.yr=this.yr;n.Im.assign(this.Im);n.Hm=this.Hm;n.Gm=this.Gm};s.prototype.ji=function(n){a.prototype.ji.call(this,n);ty(n);n.Fm=null;n.Lo=null;n.Mo=null;n.$k=null;n.Uj=null};s.prototype.toString=function(){var n=t.Dg(Object.getPrototypeOf(this))+"#"+t.ud(this);return this.data&&(n+="("+ne(this.data)+")"),n};s.LayoutNone=0;s.LayoutAdded=ra=1;s.LayoutRemoved=ua=2;s.LayoutShown=4;s.LayoutHidden=8;s.LayoutNodeSized=16;s.LayoutGroupLayout=pn=32;s.LayoutNodeReplaced=64;s.LayoutStandard=wst=ra|ua|28|pn|64;s.prototype.yn=function(n,t,i,r,u,f,e){var o=this.h;null!==o&&(n===vr&&"elements"===t?u instanceof a&&kv(u,function(n){eg(o,n)}):n===kr&&"elements"===t&&u instanceof a&&kv(u,function(n){og(o,n)}),o.ed(n,t,i,r,u,f,e))};s.prototype.updateTargetBindings=s.prototype.Vb=function(n){var r,t,i;if(a.prototype.Vb.call(this,n),null!==this.data)for(n=this.va.n,r=n.length,t=0;t<r;t++)i=n[t],i instanceof a&&kv(i,function(n){null!==n.data&&n.Vb()})};s.prototype.updateModelDataReferences=function(){var r=this.data,n,i;if(null!==r&&!(this instanceof fi)&&(n=this.h,null!==n&&(i=n.ea,i instanceof k))){var u=i.hn(r),n=n.dJ(u),t=this.fb;n!==t&&(n=null!==t?i.Lb(t.data):void 0,t=i.wn,"function"==typeof t?t(r,n):r[t]=n,i.Ix(r,u))}};t.A(s,{pw:"adornments"},function(){return null===this.Vg?t.fg:this.Vg.JF});s.prototype.findAdornment=s.prototype.np=function(n){r&&t.i(n,"string",s,"findAdornment:category");var i=this.Vg;return null===i?null:i.Da(n)};s.prototype.addAdornment=s.prototype.il=function(n,i){var u,f,e;null!==i&&(r&&(t.i(n,"string",s,"addAdornment:category"),t.l(i,fi,s,"addAdornment:ad")),u=null,f=this.Vg,null!==f&&(u=f.Da(n)),u!==i&&(null!==u&&(e=u.h,null!==e&&e.remove(u)),null===f&&(this.Vg=f=new gt("string",fi)),i.Eh!==n&&(i.cd=n),f.add(n,i),u=this.h,null!==u&&(u.add(i),i.data=this.data)))};s.prototype.removeAdornment=s.prototype.Hl=function(n){var i,u,f;r&&t.i(n,"string",s,"removeAdornment:category");i=this.Vg;null!==i&&(u=i.Da(n),null!==u&&(f=u.h,null!==f&&f.remove(u)),i.remove(n),0===i.count&&(this.Vg=null))};s.prototype.clearAdornments=s.prototype.Uf=function(){var n=this.Vg,i,r;if(null!==n){for(i=t.Hb(),n=n.k;n.next();)i.push(n.key);for(n=i.length,r=0;r<n;r++)this.Hl(i[r]);t.Ca(i)}};s.prototype.updateAdornments=function(){var n=this.h,i;if(null!==n){dat(this,n);for(var n=n.Cb.jf.n,r=n.length,t=0;t<r;t++)i=n[t],i.isEnabled&&i.updateAdornments(this);for(n=this.pw;n.next();)n.value.ja()}};t.A(s,{layer:"layer"},function(){return this.Co});t.A(s,{h:"diagram"},function(){var n=this.Co;return null!==n?n.h:null});t.g(s,"layerName",s.prototype.Ne);t.defineProperty(s,{Ne:"layerName"},function(){return this.Xk},function(n){var r=this.Xk,i,u,f;r!==n&&(t.i(n,"string",s,"layerName"),i=this.h,null!==i&&(null===i.sl(n)||i.Ln)||(this.Xk=n,this.j("layerName",r,n),r=this.layer,null!==r&&r.name!==n&&(i=r.h,null!==i&&(n=i.sl(n),null!==n&&n!==r)))&&(u=r.cf(-1,this,!0),0<=u&&i.ed(kr,"parts",r,this,null,u,!0),u=n.zp(99999999,this,!0),0<=u&&i.ed(vr,"parts",n,null,this,!0,u),u=this.Gp,null!==u&&(f=i.Sa,i.Sa=!0,u(this,r,n),i.Sa=f)))});t.g(s,"layerChanged",s.prototype.Gp);t.defineProperty(s,{Gp:"layerChanged"},function(){return this.xr},function(n){var i=this.xr;i!==n&&(null!==n&&t.i(n,"function",s,"layerChanged"),this.xr=n,this.j("layerChanged",i,n))});t.A(s,{Dc:"isTemporary"},function(){return null!==this.Co?this.Co.Dc:!1});t.g(s,"location",s.prototype.location);t.defineProperty(s,{location:"location"},function(){return this.hh},function(n){var i=this.hh,e;if(!(i.O(n)||this instanceof c)){if(r&&t.l(n,h,s,"location"),n=n.ba(),e=this.h,this.hh=n,!1===he(this)){var u=this.Pa,o=n.x-i.x,l=n.y-i.y,f=u.copy();u.p(f.x+o,f.y+l);hw(this,!0);!u.O(f)&&e&&this.j("position",f,u)}this.j("location",i,n)}});t.A(s,{Zb:"locationObject"},function(){if(null===this.$k){var n=this.Jt;void 0!==n&&null!==n&&""!==n?(n=this.ue(n),this.$k=null!==n?n:this):this.$k=this instanceof fi&&this.ga!==go&&null!==this.Nb?this.Nb:this}return this.$k.visible?this.$k:this});t.g(s,"minLocation",s.prototype.ZF);t.defineProperty(s,{ZF:"minLocation"},function(){return this.Pr},function(n){var i=this.Pr;i.O(n)||(r&&t.l(n,h,s,"minLocation"),this.Pr=n=n.ba(),this.j("minLocation",i,n))});t.g(s,"maxLocation",s.prototype.TF);t.defineProperty(s,{TF:"maxLocation"},function(){return this.Hr},function(n){var i=this.Hr;i.O(n)||(r&&t.l(n,h,s,"maxLocation"),this.Hr=n=n.ba(),this.j("maxLocation",i,n))});t.g(s,"locationObjectName",s.prototype.Jt);t.defineProperty(s,{Jt:"locationObjectName"},function(){return this.Er},function(n){var i=this.Er;i!==n&&(r&&t.i(n,"string",s,"locationObjectName"),this.Er=n,this.$k=null,dl(this),this.j("locationObjectName",i,n))});t.g(s,"locationSpot",s.prototype.gf);t.defineProperty(s,{gf:"locationSpot"},function(){return this.Fr},function(n){var i=this.Fr;i.O(n)||(r&&(t.l(n,e,s,"locationSpot"),n.Cd()||t.m("Part.locationSpot must be a specific Spot value, not: "+n)),this.Fr=n=n.ba(),dl(this),this.j("locationSpot",i,n))});s.prototype.move=s.prototype.move=function(n){this.position=n};s.prototype.moveTo=s.prototype.moveTo=function(n,i){var r=t.qc(n,i);this.move(r);t.B(r)};s.prototype.isVisible=s.prototype.Wa=function(){var n,i,t;if(!this.visible||(n=this.layer,null!==n&&!n.visible)||(n=this.fb,!(null===n||n.xe&&n.Wa())))return!1;if(this instanceof y){if(n=this.uA(),null!==n&&!n.Uc)return!1;if(n=this.Dd,null!==n)return n.Wa()}else if(this instanceof c&&((i=!0,t=this.h,null!==t&&(i=t.vd),t=this.ca,null!==t&&(this.Ic&&i&&!t.Uc||(t=t.findVisibleNode(),null===t||t===n)))||(t=this.fa,null!==t&&(this.Ic&&!i&&!t.Uc||(i=t.findVisibleNode(),null===i||i===n)))))return!1;return!0};s.prototype.sh=function(n){n?(this.M(4),wn(this),this.na(),n=this.h,null!==n&&n.lg.add(this)):(this.M(8),this.Uf())};s.prototype.findObject=s.prototype.ue=function(n){var i,t;if(this.name===n)return this;if(null===this.Uj&&(this.Uj={}),i=this.Uj,void 0!==i[n])return i[n];for(var u=this.va.n,f=u.length,r=0;r<f;r++){if(t=u[r],t.name===n)return i[n]=t;if(t instanceof a)if(null===t.Li&&null===t.ng){if(t=t.ue(n),null!==t)return i[n]=t}else if(sn(t)&&(t=t.va.gb(),null!==t&&t.name===n))return i[n]=t}return i[n]=null};s.prototype.ensureBounds=s.prototype.xf=function(){bi(this,Infinity,Infinity);this.Pc()};ft=s.prototype;ft.Pc=function(){var i,f,r,n;wo(this);!1===he(this)?kst(this):(i=t.Jf(),i.assign(this.Pb),nn(this),this.Pb.Ra(),f=ns(this),this.ik(0,0,this.$c.width,this.$c.height),r=this.position,dst(this,r,this.location),n=this.Pb,n.x=r.x,n.y=r.y,n.freeze(),wo(this),gg(this,i,n),i.O(n)?this.bg(f):!this.Rd()||u.I(i.width,n.width)&&u.I(i.height,n.height)||0<=this.$C&&this.M(16),t.oc(i),bn(this,!1))};ft.FG=function(n,t){var i,r;return!n.P()||this instanceof c?!1:(!this.h||this instanceof fi||(i=this.h.yi,i.zd&&cp(i,this,t.copy(),n.copy())),i=this.hh,r=i.copy(),!1===he(this)?(i.p(i.x+(n.x-this.Pa.x),i.y+(n.y-this.Pa.y)),this.Pa=n,hw(this,!0),wo(this),kst(this),i.O(r)||this.j("location",r,i)):(this.Pa=n,i.p(NaN,NaN)),!0)};ft.GG=function(n,t){var i=this.hh;!1===he(this)?(this.hh.p(i.x+n-this.Pa.x,i.y+t-this.Pa.y),this.Pa.p(n,t),hw(this,!1),wo(this)):(i.p(NaN,NaN),this.Pa.p(n,t))};ft.Bl=function(){return!0};ft.Rd=function(){return!0};t.g(s,"category",s.prototype.cd);t.defineProperty(s,{cd:"category"},function(){return this.Eh},function(n){var f=this.Eh,i,r,u;f!==n&&(t.i(n,"string",s,"category"),this.Eh=n,this.j("category",f,n),i=this.h,r=this.data,null!==i&&null!==r&&(u=i.ea,this instanceof c?(u instanceof k?u.DG(r,n):u instanceof ci&&u.kK(r,n),i=i.findTemplateForLinkData(r,n),i instanceof c&&(ce(i),i=i.copy(),i instanceof c&&nht(this,i,f,n))):this instanceof fi||(null!==u&&u.Fx(r,n),i=i.findTemplateForNodeData(r,n),i instanceof s&&(ce(i),i=i.copy(),i instanceof s&&!(i instanceof c)&&(i.location=this.location,nht(this,i,f,n))))),this instanceof fi&&(n=this.hi,null!==n&&(i=n.Vg,null!==i&&i.remove(f),n.il(this.Eh,this))))});s.prototype.canCopy=function(){if(!this.lA)return!1;var n=this.layer;return null===n?!0:n.dj?(n=n.h,null===n?!0:n.dj?!0:!1):!1};s.prototype.canDelete=function(){if(!this.nA)return!1;var n=this.layer;return null===n?!0:n.ll?(n=n.h,null===n?!0:n.ll?!0:!1):!1};s.prototype.canEdit=function(){if(!this.DB)return!1;var n=this.layer;return null===n?!0:n.cp?(n=n.h,null===n?!0:n.cp?!0:!1):!1};s.prototype.canGroup=function(){if(!this.DA)return!1;var n=this.layer;return null===n?!0:n.Zo?(n=n.h,null===n?!0:n.Zo?!0:!1):!1};s.prototype.canMove=function(){if(!this.WA)return!1;var n=this.layer;return null===n?!0:n.fk?(n=n.h,null===n?!0:n.fk?!0:!1):!1};s.prototype.canReshape=function(){if(!this.oB)return!1;var n=this.layer;return null===n?!0:n.$o?(n=n.h,null===n?!0:n.$o?!0:!1):!1};s.prototype.canResize=function(){if(!this.pB)return!1;var n=this.layer;return null===n?!0:n.ap?(n=n.h,null===n?!0:n.ap?!0:!1):!1};s.prototype.canRotate=function(){if(!this.qB)return!1;var n=this.layer;return null===n?!0:n.bp?(n=n.h,null===n?!0:n.bp?!0:!1):!1};s.prototype.canSelect=function(){if(!this.uk)return!1;var n=this.layer;return null===n?!0:n.Ve?(n=n.h,null===n?!0:n.Ve?!0:!1):!1};t.g(s,"copyable",s.prototype.lA);t.defineProperty(s,{lA:"copyable"},function(){return 0!=(this.Z&1)},function(n){var i=0!=(this.Z&1);i!==n&&(r&&t.i(n,"boolean",s,"copyable"),this.Z^=1,this.j("copyable",i,n))});t.g(s,"deletable",s.prototype.nA);t.defineProperty(s,{nA:"deletable"},function(){return 0!=(this.Z&2)},function(n){var i=0!=(this.Z&2);i!==n&&(r&&t.i(n,"boolean",s,"deletable"),this.Z^=2,this.j("deletable",i,n))});t.g(s,"textEditable",s.prototype.DB);t.defineProperty(s,{DB:"textEditable"},function(){return 0!=(this.Z&4)},function(n){var i=0!=(this.Z&4);i!==n&&(r&&t.i(n,"boolean",s,"textEditable"),this.Z^=4,this.j("textEditable",i,n),this.updateAdornments())});t.g(s,"groupable",s.prototype.DA);t.defineProperty(s,{DA:"groupable"},function(){return 0!=(this.Z&8)},function(n){var i=0!=(this.Z&8);i!==n&&(r&&t.i(n,"boolean",s,"groupable"),this.Z^=8,this.j("groupable",i,n))});t.g(s,"movable",s.prototype.WA);t.defineProperty(s,{WA:"movable"},function(){return 0!=(this.Z&16)},function(n){var i=0!=(this.Z&16);i!==n&&(r&&t.i(n,"boolean",s,"movable"),this.Z^=16,this.j("movable",i,n))});t.g(s,"selectionAdorned",s.prototype.tB);t.defineProperty(s,{tB:"selectionAdorned"},function(){return 0!=(this.Z&32)},function(n){var i=0!=(this.Z&32);i!==n&&(r&&t.i(n,"boolean",s,"selectionAdorned"),this.Z^=32,this.j("selectionAdorned",i,n),this.updateAdornments())});t.g(s,"isInDocumentBounds",s.prototype.hx);t.defineProperty(s,{hx:"isInDocumentBounds"},function(){return 0!=(this.Z&64)},function(n){var i=0!=(this.Z&64);i!==n&&(r&&t.i(n,"boolean",s,"isInDocumentBounds"),this.Z^=64,this.j("isInDocumentBounds",i,n))});t.g(s,"isLayoutPositioned",s.prototype.jx);t.defineProperty(s,{jx:"isLayoutPositioned"},function(){return 0!=(this.Z&128)},function(n){var i=0!=(this.Z&128);i!==n&&(r&&t.i(n,"boolean",s,"isLayoutPositioned"),this.Z^=128,this.j("isLayoutPositioned",i,n),this.M(n?4:8))});t.g(s,"selectable",s.prototype.uk);t.defineProperty(s,{uk:"selectable"},function(){return 0!=(this.Z&256)},function(n){var i=0!=(this.Z&256);i!==n&&(r&&t.i(n,"boolean",s,"selectable"),this.Z^=256,this.j("selectable",i,n),this.updateAdornments())});t.g(s,"reshapable",s.prototype.oB);t.defineProperty(s,{oB:"reshapable"},function(){return 0!=(this.Z&512)},function(n){var i=0!=(this.Z&512);i!==n&&(r&&t.i(n,"boolean",s,"reshapable"),this.Z^=512,this.j("reshapable",i,n),this.updateAdornments())});t.g(s,"resizable",s.prototype.pB);t.defineProperty(s,{pB:"resizable"},function(){return 0!=(this.Z&1024)},function(n){var i=0!=(this.Z&1024);i!==n&&(r&&t.i(n,"boolean",s,"resizable"),this.Z^=1024,this.j("resizable",i,n),this.updateAdornments())});t.g(s,"rotatable",s.prototype.qB);t.defineProperty(s,{qB:"rotatable"},function(){return 0!=(this.Z&2048)},function(n){var i=0!=(this.Z&2048);i!==n&&(r&&t.i(n,"boolean",s,"rotatable"),this.Z^=2048,this.j("rotatable",i,n),this.updateAdornments())});t.g(s,"isSelected",s.prototype.ib);t.defineProperty(s,{ib:"isSelected"},function(){return 0!=(this.Z&4096)},function(n){var e=0!=(this.Z&4096),i,f,u;e!==n&&(r&&t.i(n,"boolean",s,"isSelected"),i=this.h,n&&(!this.canSelect()||null!==i&&i.selection.count>=i.UF)||(this.Z^=4096,f=!1,null!==i&&(f=i.ab,i.ab=!0,u=i.selection,u.Ra(),n?u.add(this):u.remove(this),u.freeze()),this.j("isSelected",e,n),wn(this),n=this.BG,null!==n&&n(this),null!==i&&(i.ie(),i.ab=f)))});t.g(s,"isHighlighted",s.prototype.Fg);t.defineProperty(s,{Fg:"isHighlighted"},function(){return 0!=(this.Z&524288)},function(n){var u=0!=(this.Z&524288),i;u!==n&&(r&&t.i(n,"boolean",s,"isHighlighted"),this.Z^=524288,i=this.h,null!==i&&(i=i.Zw,i.Ra(),n?i.add(this):i.remove(this),i.freeze()),this.j("isHighlighted",u,n),this.na())});t.g(s,"isShadowed",s.prototype.qi);t.defineProperty(s,{qi:"isShadowed"},function(){return 0!=(this.Z&8192)},function(n){var i=0!=(this.Z&8192);i!==n&&(r&&t.i(n,"boolean",s,"isShadowed"),this.Z^=8192,this.j("isShadowed",i,n),this.na())});s.prototype.bg=function(n){this.Z=n?this.Z|131072:this.Z&-131073};t.g(s,"isAnimated",s.prototype.GA);t.defineProperty(s,{GA:"isAnimated"},function(){return 0!=(this.Z&262144)},function(n){var i=0!=(this.Z&262144);i!==n&&(r&&t.i(n,"boolean",s,"isAnimated"),this.Z^=262144,this.j("isAnimated",i,n))});t.g(s,"selectionObjectName",s.prototype.du);t.defineProperty(s,{du:"selectionObjectName"},function(){return this.ys},function(n){var i=this.ys;i!==n&&(r&&t.i(n,"string",s,"selectionObjectName"),this.ys=n,this.Fm=null,this.j("selectionObjectName",i,n))});t.g(s,"selectionAdornmentTemplate",s.prototype.AG);t.defineProperty(s,{AG:"selectionAdornmentTemplate"},function(){return this.ws},function(n){var i=this.ws;i!==n&&(r&&t.l(n,fi,s,"selectionAdornmentTemplate"),this instanceof c&&(n.type=go),this.ws=n,this.j("selectionAdornmentTemplate",i,n))});t.A(s,{An:"selectionObject"},function(){if(null===this.Fm){var n=this.du;null!==n&&""!==n?(n=this.ue(n),this.Fm=null!==n?n:this):this instanceof c?(n=this.path,this.Fm=null!==n?n:this):this.Fm=this}return this.Fm});t.g(s,"selectionChanged",s.prototype.BG);t.defineProperty(s,{BG:"selectionChanged"},function(){return this.xs},function(n){var i=this.xs;i!==n&&(null!==n&&t.i(n,"function",s,"selectionChanged"),this.xs=n,this.j("selectionChanged",i,n))});t.g(s,"resizeAdornmentTemplate",s.prototype.nG);t.defineProperty(s,{nG:"resizeAdornmentTemplate"},function(){return this.js},function(n){var i=this.js;i!==n&&(r&&t.l(n,fi,s,"resizeAdornmentTemplate"),this.js=n,this.j("resizeAdornmentTemplate",i,n))});t.g(s,"resizeObjectName",s.prototype.qG);t.defineProperty(s,{qG:"resizeObjectName"},function(){return this.ls},function(n){var i=this.ls;i!==n&&(r&&t.i(n,"string",s,"resizeObjectName"),this.ls=n,this.Lo=null,this.j("resizeObjectName",i,n))});t.A(s,{pG:"resizeObject"},function(){if(null===this.Lo){var n=this.qG;null!==n&&""!==n?(n=this.ue(n),this.Lo=null!==n?n:this):this.Lo=this}return this.Lo});t.g(s,"resizeCellSize",s.prototype.oG);t.defineProperty(s,{oG:"resizeCellSize"},function(){return this.ks},function(n){var i=this.ks;i.O(n)||(r&&t.l(n,st,s,"resizeCellSize"),this.ks=n=n.ba(),this.j("resizeCellSize",i,n))});t.g(s,"rotateAdornmentTemplate",s.prototype.sG);t.defineProperty(s,{sG:"rotateAdornmentTemplate"},function(){return this.ms},function(n){var i=this.ms;i!==n&&(r&&t.l(n,fi,s,"rotateAdornmentTemplate"),this.ms=n,this.j("rotateAdornmentTemplate",i,n))});t.g(s,"rotateObjectName",s.prototype.uG);t.defineProperty(s,{uG:"rotateObjectName"},function(){return this.ns},function(n){var i=this.ns;i!==n&&(r&&t.i(n,"string",s,"rotateObjectName"),this.ns=n,this.Mo=null,this.j("rotateObjectName",i,n))});t.A(s,{tG:"rotateObject"},function(){if(null===this.Mo){var n=this.uG;null!==n&&""!==n?(n=this.ue(n),this.Mo=null!==n?n:this):this.Mo=this}return this.Mo});t.g(s,"text",s.prototype.text);t.defineProperty(s,{text:"text"},function(){return this.re},function(n){var i=this.re;i!==n&&(r&&t.i(n,"string",s,"text"),this.re=n,this.j("text",i,n))});t.g(s,"containingGroup",s.prototype.fb);t.defineProperty(s,{fb:"containingGroup"},function(){return this.Mk},function(n){var e,i,u,f;if(this.Rd()){if(e=this.Mk,e!==n){if(r&&null!==n&&t.l(n,g,s,"containingGroup"),null!==n&&(this===n||n.Al(this))&&(this===n&&t.m("Cannot make a Group a member of itself: "+this.toString()),t.m("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+n.toString())),this.M(ua),i=this.h,null!==e?ptt(e,this):this instanceof g&&null!==i&&i.gl.remove(this),this.Mk=n,null!==n?ytt(n,this):this instanceof g&&null!==i&&i.gl.add(this),this.M(ra),null!==i&&(u=this.data,f=i.ea,null!==u&&f instanceof k&&f.Ix(u,f.Lb(null!==n?n.data:null))),u=this.iA,null!==u&&(f=!0,null!==i&&(f=i.Sa,i.Sa=!0),u(this,e,n),null!==i&&(i.Sa=f)),this instanceof g)for(i=new it(s),ss(i,this,!0,0),i=i.k;i.next();)if(u=i.value,u instanceof y)for(u=u.Td;u.next();)f=u.value,uy(f);if(this instanceof y)for(u=this.Td;u.next();)f=u.value,uy(f);this.j("containingGroup",e,n);null!==n&&n.Kx()}}else t.m("cannot set the Part.containingGroup of a Link or Adornment")});s.prototype.zt=function(n){var t=this.Mk;null===t||n||ytt(t,this)};s.prototype.At=function(n){var t=this.Mk;null===t||n||ptt(t,this)};s.prototype.cn=function(){var t=this.data,n;null!==t&&(n=this.h,null!==n&&(n=n.ea,null!==n&&n.Bx(t)))};t.g(s,"containingGroupChanged",s.prototype.iA);t.defineProperty(s,{iA:"containingGroupChanged"},function(){return this.Lq},function(n){var i=this.Lq;i!==n&&(null!==n&&t.i(n,"function",s,"containingGroupChanged"),this.Lq=n,this.j("containingGroupChanged",i,n))});s.prototype.findTopLevelPart=function(){return dn(this,this)};t.A(s,{Fp:"isTopLevel"},function(){return null!==this.fb||this instanceof y&&this.ni?!1:!0});s.prototype.isMemberOf=s.prototype.Al=function(n){return n instanceof g?iy(this,this,n):!1};s.prototype.findCommonContainingGroup=s.prototype.cJ=function(n){return tht(this,this,n)};t.g(s,"layoutConditions",s.prototype.MF);t.defineProperty(s,{MF:"layoutConditions"},function(){return this.yr},function(n){var i=this.yr;i!==n&&(r&&t.i(n,"number",s,"layoutConditions"),this.yr=n,this.j("layoutConditions",i,n))});s.prototype.canLayout=function(){if(!this.jx||!this.Wa())return!1;var n=this.layer;return null!==n&&n.Dc||this instanceof y&&this.ni?!1:!0};s.prototype.invalidateLayout=s.prototype.M=function(n){var t,i;void 0===n&&(n=16777215);this.jx&&0!=(n&this.MF)?(t=this.layer,null!==t&&t.Dc||this instanceof y&&this.ni?t=!1:(t=this.h,t=null!==t&&t.ma.yb?!1:!0)):t=!1;t&&((t=this.Mk,null!==t)?(i=t.ic,null!==i?i.M():t.M(n)):(n=this.h,null!==n&&(i=n.ic,null!==i&&i.M())))};t.g(s,"dragComputation",s.prototype.pA);t.defineProperty(s,{pA:"dragComputation"},function(){return this.Vq},function(n){var i=this.Vq;i!==n&&(null!==n&&t.i(n,"function",s,"dragComputation"),this.Vq=n,this.j("dragComputation",i,n))});t.g(s,"shadowOffset",s.prototype.HG);t.defineProperty(s,{HG:"shadowOffset"},function(){return this.Im},function(n){var i=this.Im;i.O(n)||(r&&t.l(n,h,s,"shadowOffset"),this.Im=n=n.ba(),this.na(),this.j("shadowOffset",i,n))});t.g(s,"shadowColor",s.prototype.shadowColor);t.defineProperty(s,{shadowColor:"shadowColor"},function(){return this.Hm},function(n){var i=this.Hm;i!==n&&(r&&t.i(n,"string",s,"shadowColor"),this.Hm=n,this.na(),this.j("shadowColor",i,n))});t.g(s,"shadowBlur",s.prototype.shadowBlur);t.defineProperty(s,{shadowBlur:"shadowBlur"},function(){return this.Gm},function(n){var i=this.Gm;i!==n&&(r&&t.i(n,"number",s,"shadowBlur"),this.Gm=n,this.na(),this.j("shadowBlur",i,n))});t.ka("Adornment",fi);t.Qa(fi,s);ft=fi.prototype;ft.toString=function(){var n=this.hi;return"Adornment("+this.cd+")"+(null!==n?n.toString():"")};ft.Ij=function(){return this.ob&&this.ob.U instanceof c?this.ob.U.Ij():null};ft.er=function(){return null};ft.sx=function(){var n=this.uc.U,r=this.uc,t,i;if(n instanceof c&&r instanceof w){t=n.path;r=t.Ta;n.sx();for(var r=t.Ta,n=this.va,t=n.length,u=0;u<t;u++)i=n.n[u],i.oi&&i instanceof w&&(i.Ta=r)}};ft.ez=function(){var n=this.hi;return n instanceof c?n.Bc:null};t.A(fi,{placeholder:"placeholder"},function(){return this.Nb});t.g(fi,"adornedObject",fi.prototype.uc);t.defineProperty(fi,{uc:"adornedObject"},function(){return this.ob},function(n){r&&null!==n&&t.l(n,f,s,"adornedObject:val");var u=this.hi,i=null;null!==n&&(i=n.U);null===u||null!==n&&u===i||u.Hl(this.cd);this.ob=n;i&&i.il(this.cd,this)});t.A(fi,{hi:"adornedPart"},function(){var n=this.ob;return null!==n?n.U:null});fi.prototype.Bl=function(){var n=this.ob;return null===n?!0:(n=n.U,null===n||!he(n))};fi.prototype.Rd=function(){return!1};t.A(fi,{fb:"containingGroup"},function(){return null});fi.prototype.yn=function(n,i,r,u,f,e,o){if(n===vr&&"elements"===i){if(f instanceof or)null===this.Nb?this.Nb=f:this.Nb!==f&&t.m("Cannot insert a second Placeholder into the visual tree of an Adornment.");else if(f instanceof a){var h=f.qt(function(n){return n instanceof or});h instanceof or&&(null===this.Nb?this.Nb=h:this.Nb!==h&&t.m("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else n===kr&&"elements"===i&&null!==this.Nb&&(u===this.Nb?this.Nb=null:u instanceof a&&this.Nb.rj(u)&&(this.Nb=null));s.prototype.yn.call(this,n,i,r,u,f,e,o)};fi.prototype.updateAdornments=function(){};fi.prototype.cn=function(){};t.ka("Node",y);t.Qa(y,s);y.prototype.cloneProtected=function(n){s.prototype.cloneProtected.call(this,n);n.Ar=this.Ar;n.Br=this.Br;n.Yk=this.Yk;n.rr=this.rr;n.Vs=this.Vs;n.Qs=this.Qs;n.sr=this.sr;n.Eq=this.Eq;n.Fq=this.Fq.ba();n.ds=this.ds};y.prototype.ji=function(n){s.prototype.ji.call(this,n);n.Cf();n.Dh=this.Dh;n.Ad=null};y.DirectionDefault=rc=t.w(y,"DirectionDefault",0);y.DirectionAbsolute=t.w(y,"DirectionAbsolute",1);y.DirectionRotatedNode=rht=t.w(y,"DirectionRotatedNode",2);y.DirectionRotatedNodeOrthogonal=ea=t.w(y,"DirectionRotatedNodeOrthogonal",3);y.SpreadingNone=t.w(y,"SpreadingNone",10);y.SpreadingEvenly=gn=t.w(y,"SpreadingEvenly",11);y.SpreadingPacked=ntt=t.w(y,"SpreadingPacked",12);y.prototype.yn=function(n,t,i,r,u,e,o){n===vr&&"elements"===t?this.Ad=null:n===kr&&"elements"===t&&(null===this.h?this.Ad=null:r instanceof f&&rw(this,r,function(n,t){fht(n,t,!0)}));s.prototype.yn.call(this,n,t,i,r,u,e,o)};y.prototype.invalidateConnectedLinks=y.prototype.Cf=function(n){var i,t;for(void 0===n&&(n=null),i=this.Td;i.next();)t=i.value,null!==n&&n.contains(t)||(hh(this,t.sd),hh(this,t.Vd),t.hc())};y.prototype.Bl=function(){return!0};t.defineProperty(y,{$J:"portSpreading"},function(){return this.ds},function(n){var i=this.ds;i!==n&&(r&&t.Fa(n,y,y,"portSpreading"),this.ds=n,this.j("portSpreading",i,n),n=this.h,null!==n&&n.ma.yb||this.Cf())});t.g(y,"avoidable",y.prototype.dA);t.defineProperty(y,{dA:"avoidable"},function(){return this.Eq},function(n){var u=this.Eq,i;u!==n&&(r&&t.i(n,"boolean",y,"avoidable"),this.Eq=n,i=this.h,null!==i&&kg(i,this),this.j("avoidable",u,n))});t.g(y,"avoidableMargin",y.prototype.oE);t.defineProperty(y,{oE:"avoidableMargin"},function(){return this.Fq},function(n){var i,r;"number"==typeof n?n=new ni(n):t.l(n,ni,y,"avoidableMargin");i=this.Fq;i.O(n)||(this.Fq=n=n.ba(),r=this.h,null!==r&&kg(r,this),this.j("avoidableMargin",i,n))});y.prototype.canAvoid=function(){return this.dA&&!this.ni};y.prototype.getAvoidableRect=function(n){return n.set(this.pa),n.ow(this.oE),n};y.prototype.findVisibleNode=function(){for(var n=this;null!==n&&!n.Wa();)n=n.fb;return n};y.prototype.sh=function(n){s.prototype.sh.call(this,n);for(var t=this.Td;t.next();)t.value.sh(n)};t.A(y,{Td:"linksConnected"},function(){return this.sc.k});y.prototype.findLinksConnected=y.prototype.$E=function(n){if(void 0===n&&(n=null),null===n)return this.sc.k;r&&t.i(n,"string",y,"findLinksConnected:pid");var i=new sr(this.sc),u=this;return i.Fl=function(t){return t.ca===u&&t.Af===n||t.fa===u&&t.dg===n},i};y.prototype.findLinksOutOf=y.prototype.Qw=function(n){void 0===n&&(n=null);r&&null!==n&&t.i(n,"string",y,"findLinksOutOf:pid");var i=new sr(this.sc),u=this;return i.Fl=function(t){return t.ca!==u?!1:null===n?!0:t.Af===n},i};y.prototype.findLinksInto=y.prototype.Cg=function(n){void 0===n&&(n=null);r&&null!==n&&t.i(n,"string",y,"findLinksInto:pid");var i=new sr(this.sc),u=this;return i.Fl=function(t){return t.fa!==u?!1:null===n?!0:t.dg===n},i};y.prototype.findNodesConnected=y.prototype.aF=function(n){var i;void 0===n&&(n=null);r&&null!==n&&t.i(n,"string",y,"findNodesConnected:pid");for(var u=null,f=null,e=this.sc.k;e.next();)i=e.value,i.ca===this?(null===n||i.Af===n)&&(i=i.fa,null!==u?u.add(i):null!==f&&f!==i?(u=new it(y),u.add(f),u.add(i)):f=i):i.fa!==this||null!==n&&i.dg!==n||(i=i.ca,null!==u?u.add(i):null!==f&&f!==i?(u=new it(y),u.add(f),u.add(i)):f=i);return null!==u?u.k:null!==f?new hu(f):t.fg};y.prototype.findNodesOutOf=function(n){var i;void 0===n&&(n=null);r&&null!==n&&t.i(n,"string",y,"findNodesOutOf:pid");for(var u=null,f=null,e=this.sc.k;e.next();)i=e.value,i.ca!==this||null!==n&&i.Af!==n||(i=i.fa,null!==u?u.add(i):null!==f&&f!==i?(u=new it(y),u.add(f),u.add(i)):f=i);return null!==u?u.k:null!==f?new hu(f):t.fg};y.prototype.findNodesInto=function(n){var i;void 0===n&&(n=null);r&&null!==n&&t.i(n,"string",y,"findNodesInto:pid");for(var u=null,f=null,e=this.sc.k;e.next();)i=e.value,i.fa!==this||null!==n&&i.dg!==n||(i=i.ca,null!==u?u.add(i):null!==f&&f!==i?(u=new it(y),u.add(f),u.add(i)):f=i);return null!==u?u.k:null!==f?new hu(f):t.fg};y.prototype.findLinksBetween=function(n,i,u){void 0===i&&(i=null);void 0===u&&(u=null);r&&(t.l(n,y,y,"findLinksBetween:othernode"),null!==i&&t.i(i,"string",y,"findLinksBetween:pid"),null!==u&&t.i(u,"string",y,"findLinksBetween:otherpid"));var f=new sr(this.sc),e=this;return f.Fl=function(t){return(t.ca!==e||t.fa!==n||null!==i&&t.Af!==i||null!==u&&t.dg!==u)&&(t.ca!==n||t.fa!==e||null!==u&&t.Af!==u||null!==i&&t.dg!==i)?!1:!0},f};y.prototype.findLinksTo=function(n,i,u){void 0===i&&(i=null);void 0===u&&(u=null);r&&(t.l(n,y,y,"findLinksTo:othernode"),null!==i&&t.i(i,"string",y,"findLinksTo:pid"),null!==u&&t.i(u,"string",y,"findLinksTo:otherpid"));var f=new sr(this.sc),e=this;return f.Fl=function(t){return t.ca!==e||t.fa!==n||null!==i&&t.Af!==i||null!==u&&t.dg===u?!1:!0},f};t.g(y,"linkConnected",y.prototype.OF);t.defineProperty(y,{OF:"linkConnected"},function(){return this.Ar},function(n){var i=this.Ar;i!==n&&(null!==n&&t.i(n,"function",y,"linkConnected"),this.Ar=n,this.j("linkConnected",i,n))});t.g(y,"linkDisconnected",y.prototype.PF);t.defineProperty(y,{PF:"linkDisconnected"},function(){return this.Br},function(n){var i=this.Br;i!==n&&(null!==n&&t.i(n,"function",y,"linkDisconnected"),this.Br=n,this.j("linkDisconnected",i,n))});t.g(y,"linkValidation",y.prototype.Np);t.defineProperty(y,{Np:"linkValidation"},function(){return this.Yk},function(n){var i=this.Yk;i!==n&&(null!==n&&t.i(n,"function",y,"linkValidation"),this.Yk=n,this.j("linkValidation",i,n))});y.prototype.updateModelDataReferences=function(){var i,n,r;if(s.prototype.updateModelDataReferences.call(this),i=this.data,null!==i&&(n=this.h,null!==n&&(r=n.ea,r instanceof ci))){var u=r.jn(i),n=n.af(u),t=this.uA();n!==t&&(n=null!==t?r.Lb(t.data):void 0,t=r.xn,"function"==typeof t?t(i,n):i[t]=n,r.xh(i,u))}};y.prototype.zt=function(n){s.prototype.zt.call(this,n);n||ry(this);var t=this.Ao;null===t||n||wht(t,this)};y.prototype.At=function(n){s.prototype.At.call(this,n);var t=this.Ao;null===t||n||null===t.Ce||(t.Ce.remove(this),t.ja())};y.prototype.cn=function(){var n,t;if(0<this.sc.count){if(n=this.h,null===n)return;for(t=this.sc.copy().k;t.next();)n.remove(t.value)}this.Dd=null;s.prototype.cn.call(this)};t.A(y,{ni:"isLinkLabel"},function(){return null!==this.Ao});t.g(y,"labeledLink",y.prototype.Dd);t.defineProperty(y,{Dd:"labeledLink"},function(){return this.Ao},function(n){var u=this.Ao,f,s,e,i,o;u!==n&&(r&&null!==n&&t.l(n,c,y,"labeledLink"),f=this.h,s=this.data,null===u||(null!==u.Ce&&(u.Ce.remove(this),u.ja()),null===f||null===s||f.ma.yb)||(e=u.data,i=f.ea,null!==e&&i instanceof k&&(o=i.Lb(s),void 0!==o&&i.eK(e,o))),this.Ao=n,null!==n&&(wht(n,this),null===f||null===s||f.ma.yb||(e=n.data,i=f.ea,null!==e&&i instanceof k&&(o=i.Lb(s),void 0!==o&&i.fE(e,o)))),dl(this),this.j("labeledLink",u,n))});y.prototype.findPort=y.prototype.tl=function(n){if(r&&t.i(n,"string",y,"findPort:pid"),null===this.Ad){if(""===n&&!1===this.Qh)return this;ttt(this)}var i=this.Ad.Da(n);return null!==i||""!==n&&(i=this.Ad.Da(""),null!==i)?i:this};t.A(y,{port:"port"},function(){return this.tl("")});t.A(y,{ports:"ports"},function(){return null===this.Ad&&ttt(this),this.Ad.JF});y.prototype.isInTreeOf=function(n){var i,t,r,u;if(null===n||n===this)return!1;if(t=!0,i=this.h,null!==i&&(t=i.vd),i=this,t)for(;i!==n;){for(t=null,r=i.sc.k;r.next();)if(u=r.value,u.Ic&&(t=u.ca,t!==i&&t!==this))break;if(t===this||null===t||t===i)return!1;i=t}else for(;i!==n;){for(t=null,r=i.sc.k;r.next()&&(u=r.value,!u.Ic||(t=u.fa,t===i||t===this)););if(t===this||null===t||t===i)return!1;i=t}return!0};y.prototype.findTreeRoot=function(){var n=!0,t=this.h,i,r;if(null!==t&&(n=t.vd),t=this,n)for(;;){for(n=null,i=t.sc.k;i.next();)if(r=i.value,r.Ic&&(n=r.ca,n!==t&&n!==this))break;if(n===this)return this;if(null===n||n===t)return t;t=n}else for(;;){for(n=null,i=t.sc.k;i.next()&&(r=i.value,!r.Ic||(n=r.fa,n===t||n===this)););if(n===this)return this;if(null===n||n===t)return t;t=n}};y.prototype.findTreeParentLink=y.prototype.tt=function(){var n=!0,t=this.h;if(null!==t&&(n=t.vd),t=this.sc.k,n){for(;t.next();)if(n=t.value,n.Ic&&n.ca!==this)return n}else for(;t.next();)if(n=t.value,n.Ic&&n.fa!==this)return n;return null};y.prototype.findTreeParentNode=y.prototype.uA=function(){var t,i,r,n;if(null===this.fi||this.fi instanceof y)return this.fi;if(t=!0,i=this.h,null!==i&&(t=i.vd),i=this.sc.n,r=i.length,t){for(t=0;t<r;t++)if(n=i[t],n.Ic&&(n=n.ca,n!==this))return this.fi=n}else for(t=0;t<r;t++)if(n=i[t],n.Ic&&(n=n.fa,n!==this))return this.fi=n;return this.fi=null};y.prototype.findTreeChildrenLinks=y.prototype.Tw=function(){var n=!0,i=this.h,t;return null!==i&&(n=i.vd),n?(n=new sr(this.sc),t=this,n.Fl=function(n){return n.Ic&&n.ca===t?!0:!1}):(n=new sr(this.sc),t=this,n.Fl=function(n){return n.Ic&&n.fa===t?!0:!1}),n};y.prototype.findTreeChildrenNodes=y.prototype.cF=function(){var n=!0,i=this.h,r,u;if(null!==i&&(n=i.vd),r=i=null,u=this.sc.k,n)for(;u.next();)n=u.value,n.Ic&&n.ca===this&&(n=n.fa,null!==i?i.add(n):null!==r&&r!==n?(i=new b(y),i.add(r),i.add(n)):r=n);else for(;u.next();)n=u.value,n.Ic&&n.fa===this&&(n=n.ca,null!==i?i.add(n):null!==r&&r!==n?(i=new b(y),i.add(r),i.add(n)):r=n);return null!==i?i.k:null!==r?new hu(r):t.fg};y.prototype.findTreeParts=function(n){void 0===n&&(n=Infinity);t.i(n,"number",y,"collapseTree:level");var i=new it(s);return ss(i,this,!1,n),i};y.prototype.collapseTree=y.prototype.collapseTree=function(n){var i,r,u;void 0===n&&(n=1);t.q(n,y,"collapseTree:level");1>n&&(n=1);i=this.h;null===i||i.ee||(r=i.mc,0!==i.ma.Qe&&r.Gl(),i.ee=!0,r=i.vd,u=new it(y),u.add(this),itt(this,u,r,n,this.Uc),i.ee=!1,i.na())};y.prototype.expandTree=y.prototype.expandTree=function(n){var i,r,f,u;void 0===n&&(n=2);t.q(n,y,"collapseTree:level");2>n&&(n=2);i=this.h;null===i||i.ee||(r=i.mc,0!==i.ma.Qe&&r.Gl(),i.ee=!0,f=i.vd,u=new it(y),u.add(this),rtt(this,u,f,n,this.Uc,r,this),i.ee=!1)};t.g(y,"isTreeExpanded",y.prototype.Uc);t.defineProperty(y,{Uc:"isTreeExpanded"},function(){return this.rr},function(n){var u=this.rr,i,f;u!==n&&(r&&t.i(n,"boolean",y,"isTreeExpanded"),this.rr=n,i=this.h,this.j("isTreeExpanded",u,n),u=this.aH,null!==u&&(f=!0,null!==i&&(f=i.Sa,i.Sa=!0),u(this),null!==i&&(i.Sa=f)),null!==i&&i.ma.yb||(n?(n=2,2>n&&(n=2),null===i||i.ee||(0!==i.ma.Qe&&i.mc.Gl(),i.ee=!0,u=i.vd,f=new it(y),f.add(this),rtt(this,f,u,n,!1,i.mc,this),i.ee=!1)):(n=1,1>n&&(n=1),null===i||i.ee||(0!==i.ma.Qe&&i.mc.Gl(),i.ee=!0,u=i.vd,f=new it(y),f.add(this),itt(this,f,u,n,!0),i.ee=!1))))});t.g(y,"wasTreeExpanded",y.prototype.Hn);t.defineProperty(y,{Hn:"wasTreeExpanded"},function(){return this.Vs},function(n){var i=this.Vs;i!==n&&(r&&t.i(n,"boolean",y,"wasTreeExpanded"),this.Vs=n,this.j("wasTreeExpanded",i,n))});t.g(y,"treeExpandedChanged",y.prototype.aH);t.defineProperty(y,{aH:"treeExpandedChanged"},function(){return this.Qs},function(n){var i=this.Qs;i!==n&&(null!==n&&t.i(n,"function",y,"treeExpandedChanged"),this.Qs=n,this.j("treeExpandedChanged",i,n))});t.g(y,"isTreeLeaf",y.prototype.ri);t.defineProperty(y,{ri:"isTreeLeaf"},function(){return this.sr},function(n){var i=this.sr;i!==n&&(r&&t.i(n,"boolean",y,"isTreeLeaf"),this.sr=n,this.j("isTreeLeaf",i,n))});t.ka("Link",c);t.Qa(c,s);c.prototype.cloneProtected=function(n){if(s.prototype.cloneProtected.call(this,n),n.Nh=this.Nh,n.cr=this.cr,n.ci=this.ci,n.Ps=this.Ps,n.gs=this.gs,n.hs=this.hs,n.is=this.is,n.tr=this.tr,n.zq=this.zq,n.Mq=this.Mq,n.Pq=this.Pq,n.Qq=this.Qq,n.Bm=this.Bm,n.Ds=this.Ds,null!==this.R){var t=this.R;n.R={Ph:t.Ph.ba(),ei:t.ei.ba(),Mh:t.Mh,bi:t.bi,Lh:t.Lh,ai:t.ai,Oh:t.Oh,di:t.di}}else n.R=null};c.prototype.ji=function(n){s.prototype.ji.call(this,n);this.Nh=n.Nh;this.ci=n.ci;n.Vi=null;n.De=null;n.hc();n.On=this.On;n.nf=this.nf};c.Normal=utt=t.w(c,"Normal",1);c.Orthogonal=t.w(c,"Orthogonal",2);c.AvoidsNodes=t.w(c,"AvoidsNodes",6);c.AvoidsNodesStraight=oht=t.w(c,"AvoidsNodesStraight",7);c.None=io=t.w(c,"None",0);c.Bezier=ae=t.w(c,"Bezier",9);c.JumpGap=ys=t.w(c,"JumpGap",10);c.JumpOver=oa=t.w(c,"JumpOver",11);c.End=aw=t.w(c,"End",17);c.Scale=vw=t.w(c,"Scale",18);c.Stretch=yw=t.w(c,"Stretch",19);c.OrientAlong=ftt=t.w(c,"OrientAlong",21);c.OrientPlus90=sht=t.w(c,"OrientPlus90",22);c.OrientMinus90=hht=t.w(c,"OrientMinus90",23);c.OrientOpposite=cht=t.w(c,"OrientOpposite",24);c.OrientUpright=lht=t.w(c,"OrientUpright",25);c.OrientPlus90Upright=aht=t.w(c,"OrientPlus90Upright",26);c.OrientMinus90Upright=vht=t.w(c,"OrientMinus90Upright",27);c.OrientUpright45=yht=t.w(c,"OrientUpright45",28);c.prototype.Le=function(){this.R={Ph:pr,ei:pr,Mh:NaN,bi:NaN,Lh:rc,ai:rc,Oh:NaN,di:NaN}};c.prototype.Bl=function(){var n=this.ca,t;return null!==n&&(t=n.findVisibleNode(),null!==t&&(n=t),he(n)||gc(n))?!1:(n=this.fa,null!==n&&(t=n.findVisibleNode(),null!==t&&(n=t),he(n)||gc(n))?!1:!0)};c.prototype.Rd=function(){return!1};c.prototype.computeAngle=function(n,t,i){switch(t){default:case io:n=0;break;case ftt:n=i;break;case sht:n=i+90;break;case hht:n=i-90;break;case cht:n=i+180;break;case lht:n=u.Tt(i);90<n&&270>n&&(n-=180);break;case aht:n=u.Tt(i+90);90<n&&270>n&&(n-=180);break;case vht:n=u.Tt(i-90);90<n&&270>n&&(n-=180);break;case yht:if(n=u.Tt(i),45<n&&135>n||225<n&&315>n)return 0;90<n&&270>n&&(n-=180)}return u.Tt(n)};t.g(c,"fromNode",c.prototype.ca);t.defineProperty(c,{ca:"fromNode"},function(){return this.kg},function(n){var e=this.kg,s,u,o,i,f;e!==n&&(r&&null!==n&&t.l(n,y,c,"fromNode"),s=this.sd,null!==e&&(this.wg!==e&&lw(e,this,s),aa(this),this.M(ua)),this.kg=n,this.Hi=null,this.hc(),u=this.h,null!==u&&(o=this.data,i=u.ea,null!==o&&(i instanceof k?(f=null!==n?n.data:null,i.Hx(o,i.Lb(f))):i instanceof ci&&(f=null!==n?n.data:null,u.vd?i.xh(o,i.Lb(f)):(null!==e&&i.xh(e.data,void 0),i.xh(f,i.Lb(null!==this.wg?this.wg.data:null)))))),o=this.sd,i=this.zA,null!==i&&(f=!0,null!==u&&(f=u.Sa,u.Sa=!0),i(this,s,o),null!==u&&(u.Sa=f)),null!==n&&(this.wg!==n&&cw(n,this,o),la(this),this.M(ra)),this.j("fromNode",e,n),uy(this))});t.g(c,"fromPortId",c.prototype.Af);t.defineProperty(c,{Af:"fromPortId"},function(){return this.Nh},function(n){var s=this.Nh,e,o,i,u,f;s!==n&&(r&&t.i(n,"string",c,"fromPortId"),e=this.sd,null!==e&&hh(this.ca,e),aa(this),this.Nh=n,o=this.sd,null!==o&&hh(this.ca,o),i=this.h,null!==i&&(u=this.data,f=i.ea,null!==u&&f instanceof k&&f.vB(u,n)),e!==o&&(this.Hi=null,this.hc(),u=this.zA,null!==u&&(f=!0,null!==i&&(f=i.Sa,i.Sa=!0),u(this,e,o),null!==i&&(i.Sa=f))),la(this),this.j("fromPortId",s,n))});t.A(c,{sd:"fromPort"},function(){var n=this.kg;return null===n?null:n.tl(this.Nh)});t.g(c,"fromPortChanged",c.prototype.zA);t.defineProperty(c,{zA:"fromPortChanged"},function(){return this.cr},function(n){var i=this.cr;i!==n&&(null!==n&&t.i(n,"function",c,"fromPortChanged"),this.cr=n,this.j("fromPortChanged",i,n))});t.g(c,"toNode",c.prototype.fa);t.defineProperty(c,{fa:"toNode"},function(){return this.wg},function(n){var e=this.wg,s,u,o,i,f;e!==n&&(r&&null!==n&&t.l(n,y,c,"toNode"),s=this.Vd,null!==e&&(this.kg!==e&&lw(e,this,s),aa(this),this.M(ua)),this.wg=n,this.Hi=null,this.hc(),u=this.h,null!==u&&(o=this.data,i=u.ea,null!==o&&(i instanceof k?(f=null!==n?n.data:null,i.Jx(o,i.Lb(f))):i instanceof ci&&(f=null!==n?n.data:null,u.vd?(null!==e&&i.xh(e.data,void 0),i.xh(f,i.Lb(null!==this.kg?this.kg.data:null))):i.xh(o,i.Lb(f))))),o=this.Vd,i=this.HB,null!==i&&(f=!0,null!==u&&(f=u.Sa,u.Sa=!0),i(this,s,o),null!==u&&(u.Sa=f)),null!==n&&(this.kg!==n&&cw(n,this,o),la(this),this.M(ra)),this.j("toNode",e,n),uy(this))});t.g(c,"toPortId",c.prototype.dg);t.defineProperty(c,{dg:"toPortId"},function(){return this.ci},function(n){var s=this.ci,e,o,i,u,f;s!==n&&(r&&t.i(n,"string",c,"toPortId"),e=this.Vd,null!==e&&hh(this.fa,e),aa(this),this.ci=n,o=this.Vd,null!==o&&hh(this.fa,o),i=this.h,null!==i&&(u=this.data,f=i.ea,null!==u&&f instanceof k&&f.yB(u,n)),e!==o&&(this.Hi=null,this.hc(),u=this.HB,null!==u&&(f=!0,null!==i&&(f=i.Sa,i.Sa=!0),u(this,e,o),null!==i&&(i.Sa=f))),la(this),this.j("toPortId",s,n))});t.A(c,{Vd:"toPort"},function(){var n=this.wg;return null===n?null:n.tl(this.ci)});t.g(c,"toPortChanged",c.prototype.HB);t.defineProperty(c,{HB:"toPortChanged"},function(){return this.Ps},function(n){var i=this.Ps;i!==n&&(null!==n&&t.i(n,"function",c,"toPortChanged"),this.Ps=n,this.j("toPortChanged",i,n))});t.defineProperty(c,{vb:"fromSpot"},function(){return null!==this.R?this.R.Ph:pr},function(n){null===this.R&&this.Le();var i=this.R.Ph;i.O(n)||(r&&t.l(n,e,c,"fromSpot"),n=n.ba(),this.R.Ph=n,this.j("fromSpot",i,n),this.hc())});t.defineProperty(c,{rk:"fromEndSegmentLength"},function(){return null!==this.R?this.R.Mh:NaN},function(n){null===this.R&&this.Le();var i=this.R.Mh;i!==n&&(r&&t.i(n,"number",c,"fromEndSegmentLength"),0>n&&t.ha(n,">= 0",c,"fromEndSegmentLength"),this.R.Mh=n,this.j("fromEndSegmentLength",i,n),this.hc())});t.defineProperty(c,{tp:"fromEndSegmentDirection"},function(){return null!==this.R?this.R.Lh:rc},function(n){null===this.R&&this.Le();var i=this.R.Lh;i!==n&&(r&&t.Fa(n,y,c,"fromEndSegmentDirection"),this.R.Lh=n,this.j("fromEndSegmentDirection",i,n),this.hc())});t.defineProperty(c,{up:"fromShortLength"},function(){return null!==this.R?this.R.Oh:NaN},function(n){null===this.R&&this.Le();var i=this.R.Oh;i!==n&&(r&&t.i(n,"number",c,"fromShortLength"),this.R.Oh=n,this.j("fromShortLength",i,n),this.hc())});t.defineProperty(c,{zb:"toSpot"},function(){return null!==this.R?this.R.ei:pr},function(n){null===this.R&&this.Le();var i=this.R.ei;i.O(n)||(r&&t.l(n,e,c,"toSpot"),n=n.ba(),this.R.ei=n,this.j("toSpot",i,n),this.hc())});t.defineProperty(c,{xk:"toEndSegmentLength"},function(){return null!==this.R?this.R.bi:NaN},function(n){null===this.R&&this.Le();var i=this.R.bi;i!==n&&(r&&t.i(n,"number",c,"toEndSegmentLength"),0>n&&t.ha(n,">= 0",c,"toEndSegmentLength"),this.R.bi=n,this.j("toEndSegmentLength",i,n),this.hc())});t.defineProperty(c,{kq:"toEndSegmentDirection"},function(){return null!==this.R?this.R.ai:rc},function(n){null===this.R&&this.Le();var i=this.R.ai;i!==n&&(r&&t.Fa(n,y,c,"toEndSegmentDirection"),this.R.ai=n,this.j("toEndSegmentDirection",i,n),this.hc())});t.defineProperty(c,{lq:"toShortLength"},function(){return null!==this.R?this.R.di:NaN},function(n){null===this.R&&this.Le();var i=this.R.di;i!==n&&(r&&t.i(n,"number",c,"toShortLength"),this.R.di=n,this.j("toShortLength",i,n),this.hc())});c.prototype.getOtherNode=c.prototype.AA=function(n){r&&t.l(n,y,c,"getOtherNode:node");var i=this.ca;return n===i?this.fa:i};c.prototype.getOtherPort=function(n){r&&t.l(n,f,c,"getOtherPort:port");var i=this.sd;return n===i?this.Vd:i};t.A(c,{JK:"isLabeledLink"},function(){return null===this.Ce?!1:0<this.Ce.count});t.A(c,{sj:"labelNodes"},function(){return null===this.Ce?t.fg:this.Ce.k});c.prototype.zt=function(n){if(s.prototype.zt.call(this,n),nl(this)&&gw(this,this.pa),!n){n=this.kg;var t=this.wg;null!==n&&(cw(n,this,this.sd),la(this));null!==t&&(cw(t,this,this.Vd),la(this))}};c.prototype.At=function(n){if(s.prototype.At.call(this,n),nl(this)&&gw(this,this.pa),!n){n=this.kg;var t=this.wg;null!==n&&(lw(n,this,this.sd),aa(this));null!==t&&(lw(t,this,this.Vd),aa(this))}};c.prototype.cn=function(){var n,t;if(this.xg=!0,null!==this.Ce){if(n=this.h,null===n)return;for(t=this.Ce.copy().k;t.next();)n.remove(t.value)}t=this.data;null!==t&&(n=this.h,null!==n&&(n=n.ea,n instanceof k?n.lB(t):n instanceof ci&&n.xh(t,void 0)))};c.prototype.updateModelDataReferences=function(){var i=this.data,u,t;if(null!==i&&(u=this.h,null!==u&&(t=u.ea,t instanceof k))){var f=t.vl(i),r=u.af(f),n=this.ca;r!==n&&(r=null!==n?t.Lb(n.data):void 0,n=t.qn,"function"==typeof n?n(i,r):i[n]=r,t.Hx(i,f));f=t.zl(i);r=u.af(f);n=this.fa;r!==n&&(r=null!==n?t.Lb(n.data):void 0,n=t.rn,"function"==typeof n?n(i,r):i[n]=r,t.Jx(i,f))}};c.prototype.move=c.prototype.move=function(n){var t=this.position,i=t.x,r,u;for(isNaN(i)&&(i=0),t=t.y,isNaN(t)&&(t=0),i=n.x-i,t=n.y-t,s.prototype.move.call(this,n),this.Dl(i,t),n=this.sj;n.next();)r=n.value,u=r.position,r.moveTo(u.x+i,u.y+t)};t.g(c,"relinkableFrom",c.prototype.iG);t.defineProperty(c,{iG:"relinkableFrom"},function(){return this.gs},function(n){var i=this.gs;i!==n&&(r&&t.i(n,"boolean",c,"relinkableFrom"),this.gs=n,this.j("relinkableFrom",i,n),this.updateAdornments())});t.g(c,"relinkableTo",c.prototype.jG);t.defineProperty(c,{jG:"relinkableTo"},function(){return this.hs},function(n){var i=this.hs;i!==n&&(r&&t.i(n,"boolean",c,"relinkableTo"),this.hs=n,this.j("relinkableTo",i,n),this.updateAdornments())});c.prototype.canRelinkFrom=function(){if(!this.iG)return!1;var n=this.layer;return null===n?!0:n.gk?(n=n.h,null===n||n.gk?!0:!1):!1};c.prototype.canRelinkTo=function(){if(!this.jG)return!1;var n=this.layer;return null===n?!0:n.gk?(n=n.h,null===n||n.gk?!0:!1):!1};t.g(c,"resegmentable",c.prototype.Xp);t.defineProperty(c,{Xp:"resegmentable"},function(){return this.is},function(n){var i=this.is;i!==n&&(r&&t.i(n,"boolean",c,"resegmentable"),this.is=n,this.j("resegmentable",i,n),this.updateAdornments())});t.g(c,"isTreeLink",c.prototype.Ic);t.defineProperty(c,{Ic:"isTreeLink"},function(){return this.tr},function(n){var i=this.tr;i!==n&&(r&&t.i(n,"boolean",c,"isTreeLink"),this.tr=n,this.j("isTreeLink",i,n),null!==this.ca&&ry(this.ca),null!==this.fa&&ry(this.fa))});t.A(c,{path:"path"},function(){var n=this.Vi;return null!==n?n:(n=this.va,n=tc(this,n,n.length),n instanceof w?this.Vi=n:null)});c.prototype.er=function(){return this.path};c.prototype.ez=function(){return this.Bc};c.prototype.Ij=function(){this.updateRoute();var n=new p;return this.vf(n),this.Bz=n};c.prototype.vf=function(n){var f=Infinity,e=Infinity,t=this.ra,s,h,o;if(0===t)return n.p(NaN,NaN,0,0),n;if(1===t)t=this.o(0),f=Math.min(t.x,f),e=Math.min(t.y,e),n.p(t.x,t.y,0,0);else if(2===t){var i=this.o(0),r=this.o(1),f=Math.min(i.x,r.x),e=Math.min(i.y,r.y);n.p(i.x,i.y,0,0);n.xj(r)}else if(this.computeCurve()===ae&&3<=t&&!this.pc)if(i=this.o(0),f=i.x,e=i.y,n.p(f,e,0,0),3===t)t=this.o(1),f=Math.min(t.x,f),e=Math.min(t.y,e),r=this.o(2),f=Math.min(r.x,f),e=Math.min(r.y,e),u.ep(i.x,i.y,t.x,t.y,t.x,t.y,r.x,r.y,.5,n);else for(o=3;o<t;o+=3)s=this.o(o-2),o+3>=t&&(o=t-1),h=this.o(o-1),r=this.o(o),u.ep(i.x,i.y,s.x,s.y,h.x,h.y,r.x,r.y,.5,n),f=Math.min(r.x,f),e=Math.min(r.y,e),i=r;else for(i=this.o(0),r=this.o(1),f=Math.min(i.x,r.x),e=Math.min(i.y,r.y),n.p(i.x,i.y,0,0),n.xj(r),o=2;o<t;o++)i=this.o(o),f=Math.min(i.x,f),e=Math.min(i.y,e),n.xj(i);return this.Mz.p(f-n.x,e-n.y),n};t.A(c,{YF:"midPoint"},function(){return this.updateRoute(),this.computeMidPoint(new h)});c.prototype.computeMidPoint=function(n){var r=this.ra,i,e,f;if(0===r)return n.assign(u.uH),n;if(1===r)return n.assign(this.o(0)),n;if(2===r)return i=this.o(0),e=this.o(1),n.p((i.x+e.x)/2,(i.y+e.y)/2),n;if(this.computeCurve()===ae&&3<=r&&!this.pc)return 3===r?this.o(1):(r=(r-1)/3|0,f=3*(r/2|0),1==r%2?(i=this.o(f),e=this.o(f+1),r=this.o(f+2),f=this.o(f+3),u.qI(i.x,i.y,e.x,e.y,r.x,r.y,f.x,f.y,n)):n.assign(this.o(f)),n);for(var f=0,o=t.Hb(),s=0;s<r-1;s++)i=this.o(s),e=this.o(s+1),u.sb(i.x,e.x)?(i=e.y-i.y,0>i&&(i=-i)):u.sb(i.y,e.y)?(i=e.x-i.x,0>i&&(i=-i)):i=Math.sqrt(i.nk(e)),o.push(i),f+=i;for(e=s=i=0;i<f/2&&s<r;){if(e=o[s],i+e>f/2)break;i+=e;s++}return t.Ca(o),r=this.o(s),o=this.o(s+1),r.x===o.x?r.y>o.y?n.p(r.x,r.y-(f/2-i)):n.p(r.x,r.y+(f/2-i)):r.y===o.y?r.x>o.x?n.p(r.x-(f/2-i),r.y):n.p(r.x+(f/2-i),r.y):(f=(f/2-i)/e,n.p(r.x+f*(o.x-r.x),r.y+f*(o.y-r.y))),n};t.A(c,{XF:"midAngle"},function(){return this.updateRoute(),this.computeMidAngle()});c.prototype.computeMidAngle=function(){var n=this.ra,t,i;if(2>n)return NaN;if(this.computeCurve()===ae&&4<=n&&!this.pc){if(t=(n-1)/3|0,i=3*(t/2|0),1==t%2){var i=Math.floor(i),n=this.o(i),t=this.o(i+1),r=this.o(i+2),i=this.o(i+3);return u.pI(n.x,n.y,t.x,t.y,r.x,r.y,i.x,i.y)}if(0<i&&i+1<n)return n=this.o(i-1),t=this.o(i+1),n.mj(t)}if(r=n/2|0,0==n%2)return n=this.o(r-1),t=this.o(r),n.mj(t);var n=this.o(r-1),t=this.o(r),r=this.o(r+1),i=n.nk(t),f=t.nk(r);return i>f?n.mj(t):t.mj(r)};t.g(c,"points",c.prototype.points);t.defineProperty(c,{points:"points"},function(){return this.Bc},function(n){var e=this.Bc,i,u,f;if(e!==n){if(r&&(Array.isArray(n)||n instanceof b||t.m("Link.points value is not an instance of List or Array")),i=n,Array.isArray(n)){if(u=0==n.length%2,u)for(f=0;f<n.length;f++)if("number"!=typeof n[f]){u=!1;break}if(u)for(i=new b(h),u=0;u<n.length/2;u++)f=new h(n[2*u],n[2*u+1]).freeze(),i.add(f);else t.m("Link.points array must contain only numbers")}else for(i=n.copy(),n=i.k;n.next();)n.value.freeze();i.freeze();this.Bc=i;this.df();ett(this);this.h&&this.h.mc.zd&&(this.No=i);this.j("points",e,i)}});t.A(c,{ra:"pointsCount"},function(){return this.Bc.count});c.prototype.getPoint=c.prototype.o=function(n){return this.Bc.n[n]};c.prototype.setPoint=c.prototype.Hf=function(n,i){r&&(t.l(i,h,c,"setPoint"),i.P()||t.m("Link.setPoint called with a Point that does not have real numbers: "+i.toString()));null===this.De&&t.m("Call Link.startRoute before modifying the points of the route.");this.Bc.Tg(n,i)};c.prototype.setPointAt=c.prototype.aa=function(n,i,u){r&&(t.q(i,c,"setPointAt:x"),t.q(u,c,"setPointAt:y"));null===this.De&&t.m("Call Link.startRoute before modifying the points of the route.");this.Bc.Tg(n,new h(i,u))};c.prototype.insertPoint=function(n,i){r&&(t.l(i,h,c,"insertPoint"),i.P()||t.m("Link.insertPoint called with a Point that does not have real numbers: "+i.toString()));null===this.De&&t.m("Call Link.startRoute before modifying the points of the route.");this.Bc.Pd(n,i)};c.prototype.insertPointAt=c.prototype.C=function(n,i,u){r&&(t.q(i,c,"insertPointAt:x"),t.q(u,c,"insertPointAt:y"));null===this.De&&t.m("Call Link.startRoute before modifying the points of the route.");this.Bc.Pd(n,new h(i,u))};c.prototype.addPoint=c.prototype.gi=function(n){r&&(t.l(n,h,c,"addPoint"),n.P()||t.m("Link.addPoint called with a Point that does not have real numbers: "+n.toString()));null===this.De&&t.m("Call Link.startRoute before modifying the points of the route.");this.Bc.add(n)};c.prototype.addPointAt=c.prototype.jl=function(n,i){r&&(t.q(n,c,"insertPointAt:x"),t.q(i,c,"insertPointAt:y"));null===this.De&&t.m("Call Link.startRoute before modifying the points of the route.");this.Bc.add(new h(n,i))};c.prototype.removePoint=c.prototype.lG=function(n){null===this.De&&t.m("Call Link.startRoute before modifying the points of the route.");this.Bc.wd(n)};c.prototype.clearPoints=c.prototype.gp=function(){null===this.De&&t.m("Call Link.startRoute before modifying the points of the route.");this.Bc.clear()};c.prototype.movePoints=c.prototype.Dl=function(n,t){for(var u,i=new b(h),r=this.Bc.k;r.next();)u=r.value,i.add(new h(u.x+n,u.y+t).freeze());i.freeze();r=this.Bc;this.Bc=i;this.df();ett(this);this.h&&this.h.mc.zd&&(this.No=i);this.j("points",r,i)};c.prototype.startRoute=c.prototype.Kl=function(){null===this.De&&(this.De=this.Bc,this.Bc=this.Bc.copy())};c.prototype.commitRoute=c.prototype.ij=function(){if(null!==this.De){for(var u=this.De,i=this.Bc,s=Infinity,h=Infinity,r=u.count,n=0;n<r;n++)var t=u.n[n],s=Math.min(t.x,s),h=Math.min(t.y,h);for(var f=Infinity,e=Infinity,o=i.count,n=0;n<o;n++)t=i.n[n],f=Math.min(t.x,f),e=Math.min(t.y,e),t.freeze();if(i.freeze(),o===r){for(n=0;n<o;n++)if(r=u.n[n],t=i.n[n],r.x-s!=t.x-f||r.y-h!=t.y-e){this.df();break}}else this.df();this.De=null;this.h&&this.h.mc.zd&&(this.No=i);ett(this);this.j("points",u,i)}};c.prototype.rollbackRoute=c.prototype.gK=function(){null!==this.De&&(this.Bc=this.De,this.De=null)};c.prototype.invalidateRoute=c.prototype.hc=function(){if(!(this.Iz||this.h&&this.h.ma.yb)){var n=this.er();null!==n&&(this.xg=!1,this.df(),n.ja())}};t.defineProperty(c,{jq:null},function(){return this.Iz},function(n){this.Iz=n});c.prototype.updateRoute=function(){if(!this.xg&&!this.Ey){var n=!0;try{this.Ey=!0;this.Kl();n=this.computePoints()}finally{this.Ey=!1;n?this.ij():this.gK()}}};c.prototype.computePoints=function(){var n=this.h,e,r,i,f,k,a,v,b,rt;if(null===n||(e=this.ca,r=null,null===e?(n.Cm||(n.Qv=new w,n.Qv.Ea=u.uq,n.Qv.lb=0,n.Cm=new y,n.Cm.add(n.Qv),n.Cm.xf()),this.Wn&&(n.Cm.position=n.Cm.location=this.Wn,n.Cm.xf(),e=n.Cm,r=n.Qv)):r=this.sd,null!==r&&(i=lot(r),i!==e&&e.Wa()?r=i:(i=e.findVisibleNode(),null!==i&&i!==e?(e=i,r=i.tl("")):e=i)),this.MD=e,null===e||null===r||!e.location.P())||(i=this.fa,f=null,null===i?(n.Dm||(n.Rv=new w,n.Rv.Ea=u.uq,n.Rv.lb=0,n.Dm=new y,n.Dm.add(n.Rv),n.Dm.xf()),this.$n&&(n.Dm.position=n.Dm.location=this.$n,n.Dm.xf(),i=n.Dm,f=n.Rv)):f=this.Vd,null!==f&&(n=lot(f),n!==i&&i.Wa()?f=n:(n=i.findVisibleNode(),null!==n&&n!==i?(i=n,f=n.tl("")):i=n)),this.OD=i,null===i||null===f||!i.location.P()))return!1;var n=this.ra,s=ww(this,r),l=bw(this,f),o=r===f&&null!==r,c=this.pc,g=this.Je===ae;if(this.Hi=o&&!c?g=!0:!1,k=this.Yo===io||o,c||s!==pi||l!==pi||o){g=this.qj;k&&(c&&g||o)&&this.gp();var ft=o?this.computeCurviness():0,p=this.getLinkPoint(e,r,s,!0,c,i,f),it=0,nt=0,v=0;(c||s!==pi||o)&&(a=this.computeEndSegmentLength(e,r,s,!0),v=this.getLinkDirection(e,r,p,s,!0,c,i,f),o&&(v-=c?90:30,0>ft&&(v-=180)),0>v?v+=360:360<=v&&(v-=360),o&&(a+=Math.abs(ft)),0===v?it=a:90===v?nt=a:180===v?it=-a:270===v?nt=-a:(it=a*Math.cos(v*Math.PI/180),nt=a*Math.sin(v*Math.PI/180)),s.Me()&&o&&(b=r.wb(si,t.N()),rt=t.qc(b.x+1e3*it,b.y+1e3*nt),this.getLinkPointFromPoint(e,r,b,rt,!0,p),t.B(b),t.B(rt)));var a=this.getLinkPoint(i,f,l,!1,c,e,r),tt=0,ut=0,d=0;(c||l!==pi||o)&&(b=this.computeEndSegmentLength(i,f,l,!1),d=this.getLinkDirection(i,f,a,l,!1,c,e,r),o&&(d+=c?0:30,0>ft&&(d+=180)),0>d?d+=360:360<=d&&(d-=360),o&&(b+=Math.abs(ft)),0===d?tt=b:90===d?ut=b:180===d?tt=-b:270===d?ut=-b:(tt=b*Math.cos(d*Math.PI/180),ut=b*Math.sin(d*Math.PI/180)),l.Me()&&o&&(b=f.wb(si,t.N()),rt=t.qc(b.x+1e3*tt,b.y+1e3*ut),this.getLinkPointFromPoint(i,f,b,rt,!1,a),t.B(b),t.B(rt)));f=p;(c||s!==pi||o)&&(f=new h(p.x+it,p.y+nt));r=a;(c||l!==pi||o)&&(r=new h(a.x+tt,a.y+ut));!k&&!c&&s===pi&&3<n&&this.adjustPoints(0,p,n-2,r)?this.Hf(n-1,a):!k&&!c&&l===pi&&3<n&&this.adjustPoints(1,f,n-1,a)?this.Hf(0,p):!k&&!c&&4<n&&this.adjustPoints(1,f,n-2,r)?(this.Hf(0,p),this.Hf(n-1,a)):!k&&c&&6<=n&&!g&&this.adjustPoints(1,f,n-2,r)?(this.Hf(0,p),this.Hf(n-1,a)):(this.gp(),this.gi(p),(c||s!==pi||o)&&this.gi(f),c&&this.addOrthoPoints(f,v,r,d,e,i),(c||l!==pi||o)&&this.gi(r),this.gi(a))}else s=!1,!k&&3<=n&&(k=this.getLinkPoint(e,r,pi,!0,!1,i,f),s=this.getLinkPoint(i,f,pi,!1,!1,e,r),s=this.adjustPoints(0,k,n-1,s)),s||(this.gp(),g?(n=this.getLinkPoint(e,r,pi,!0,!1,i,f),k=this.getLinkPoint(i,f,pi,!1,!1,e,r),s=k.x-n.x,l=k.y-n.y,o=this.computeCurviness(),g=c=0,p=n.x+s/3,v=n.y+l/3,it=p,nt=v,u.I(l,0)?nt=0<s?nt-o:nt+o:(c=-s/l,g=Math.sqrt(o*o/(c*c+1)),0>o&&(g=-g),it=(0>l?-1:1)*g+p,nt=c*(it-p)+v),p=n.x+2*s/3,v=n.y+2*l/3,a=p,tt=v,u.I(l,0)?tt=0<s?tt-o:tt+o:(a=(0>l?-1:1)*g+p,tt=c*(a-p)+v),this.gp(),this.gi(n),this.jl(it,nt),this.jl(a,tt),this.gi(k),this.Hf(0,this.getLinkPoint(e,r,pi,!0,!1,i,f)),this.Hf(3,this.getLinkPoint(i,f,pi,!1,!1,e,r))):(n=i,i=this.getLinkPoint(e,r,pi,!0,!1,n,f),f=this.getLinkPoint(n,f,pi,!1,!1,e,r),this.hasCurviness()?(l=f.x-i.x,e=f.y-i.y,r=this.computeCurviness(),n=i.x+l/2,k=i.y+e/2,s=n,o=k,u.I(e,0)?o=0<l?o-r:o+r:(l=-l/e,s=Math.sqrt(r*r/(l*l+1)),0>r&&(s=-s),s=(0>e?-1:1)*s+n,o=l*(s-n)+k),this.gi(i),this.jl(s,o)):this.gi(i),this.gi(f)));return!0};c.prototype.getLinkPointFromPoint=function(n,t,i,r,u,f){var e;if(void 0===f&&(f=new h),null===n||null===t)return f.assign(i),f;if(n.Wa()||(u=n.findVisibleNode(),null!==u&&u!==n&&(t=u.port)),n=null,u=t.ia,null===u||u.Kf()||(u=u.ia),null===u)u=r.x,r=r.y,e=i.x,i=i.y;else{n=u.se;u=1/(n.m11*n.m22-n.m12*n.m21);e=n.m22*u;var o=-n.m12*u,s=-n.m21*u,c=n.m11*u,l=u*(n.m21*n.dy-n.m22*n.dx),a=u*(n.m12*n.dx-n.m11*n.dy);u=r.x*e+r.y*s+l;r=r.x*o+r.y*c+a;e=i.x*e+i.y*s+l;i=i.x*o+i.y*c+a}return t.wp(u,r,e,i,f),n&&f.transform(n),f};c.prototype.getLinkPoint=function(n,i,r,u,f,e,o,s){var l;if(void 0===s&&(s=new h),r.Cd())return i.wb(r,s),s;if(r.Ep()&&(r=pw(this,i),null!==r)){if(s.assign(r.Kp),f&&this.au===oht&&(l=pw(this,o),r.$m<l.$m)){r=t.N();var l=t.N(),c=new p(i.wb(hr,r),i.wb(cu,l)),a=this.computeSpot(!u);n=this.getLinkPoint(e,o,a,!u,f,n,i,l);n.x>=c.x&&n.x<=c.x+c.width?s.x=n.x:n.y>=c.y&&n.y<=c.y+c.height&&(s.y=n.y);t.B(r);t.B(l)}return s}return e=i.wb(si,t.N()),r=null,this.ra>(f?6:2)?(o=u?this.o(1):this.o(this.ra-2),f&&(o=ott(e,o.copy()))):(r=t.N(),o=o.wb(si,r),f&&(o=ott(e,o))),this.getLinkPointFromPoint(n,i,e,o,u,s),t.B(e),null!==r&&t.B(r),s};c.prototype.getLinkDirection=function(n,i,r,u,f,e,o,s){n:if(u.Cd())r=u.x>u.y?u.x>1-u.y?0:u.x<1-u.y?270:315:u.x<u.y?u.x>1-u.y?90:u.x<1-u.y?180:135:.5>u.x?225:.5<u.x?45:0;else{if(u.Ep()&&(n=pw(this,i),null!==n))switch(n.je){case t.gd:r=270;break n;case t.Mc:r=180;break n;default:case t.Xc:r=0;break n;case t.Wc:r=90;break n}n=i.wb(si,t.N());u=null;this.ra>(e?6:2)?(s=f?this.o(1):this.o(this.ra-2),s=e?ott(n,s.copy()):r):(u=t.N(),s=s.wb(si,u));r=Math.abs(s.x-n.x)>Math.abs(s.y-n.y)?s.x>=n.x?0:180:s.y>=n.y?90:270;t.B(n);null!==u&&t.B(u)}e=rc;e=f?this.tp:this.kq;e===rc&&(e=f?i.tp:i.kq);switch(e){case rht:i=i.ul();r+=i;360<=r&&(r-=360);break;case rc:case ea:if(i=i.ul(),0===i)break;45<=i&&135>i?r+=90:135<=i&&225>i?r+=180:225<=i&&315>i&&(r+=270);360<=r&&(r-=360)}return r};c.prototype.computeEndSegmentLength=function(n,t,i,r){return null!==t&&i.Ep()&&(n=pw(this,t),null!==n)?n.Ow:(n=NaN,n=r?this.rk:this.xk,null!==t&&isNaN(n)&&(n=r?t.rk:t.xk),isNaN(n)&&(n=10),n)};c.prototype.computeSpot=function(n){return n?ww(this,this.sd):bw(this,this.Vd)};c.prototype.computeOtherPoint=function(n,t){var r=t.wb(si),i;return i=t.cs,i=null!==i?dht(i,this):null,null!==i&&(r=i.Kp),r};c.prototype.computeShortLength=function(n){return n?kw(this):sa(this)};c.prototype.pk=function(n,i,r,u,f,e){var y,o,nt,s,c,p,w,l;if(!1===this.kf)return!1;if(void 0===i&&(i=null),void 0===r&&(r=null),y=e,void 0===e&&(y=t.Ah(),y.reset()),y.multiply(this.transform),this.Ym(n,y))return fn(this,i,r,f),void 0===e&&t.bf(y),!0;if(this.Xf(n,y)){if(o=!1,!this.bh)for(nt=this.va.length;nt--;)if(s=this.va.n[nt],(s.visible||s===this.Zb)&&(c=s.pa,p=this.Ja,!(c.x>p.width||c.y>p.height||0>c.x+c.width||0>c.y+c.height))){if(c=t.Ah(),c.set(y),s instanceof a)o=s.pk(n,i,r,u,f,c);else if(this.path===s){var o=s,d=n,g=u,p=c;if(!1===o.kf)o=!1;else if(p.multiply(o.transform),g)n:{if(w=d,l=p,o.Ym(w,l))o=!0;else{if(void 0===l&&(l=o.transform,w.kk(o.pa))){o=!0;break n}var p=w.left,d=w.right,g=w.top,w=w.bottom,h=t.N(),v=t.N(),k=t.N(),b=t.Ah();b.set(l);b.XA(o.transform);b.FA();v.x=d;v.y=g;v.transform(b);h.x=p;h.y=g;h.transform(b);l=!1;ic(o,h,v,k)?l=!0:(h.x=d,h.y=w,h.transform(b),ic(o,h,v,k)?l=!0:(v.x=p,v.y=w,v.transform(b),ic(o,h,v,k)?l=!0:(h.x=p,h.y=g,h.transform(b),ic(o,h,v,k)&&(l=!0))));t.bf(b);t.B(h);t.B(v);t.B(k);o=l}}else o=o.Ym(d,p)}else o=eot(s,n,u,c);o&&(null!==i&&(s=i(s)),s&&(null===r||r(s))&&f.add(s));t.bf(c)}return void 0===e&&t.bf(y),o||null!==this.background||null!==this.hk}return void 0===e&&t.bf(y),!1};t.A(c,{pc:"isOrthogonal"},function(){return 2==(this.Bm.value&2)});t.A(c,{qj:"isAvoiding"},function(){return 4==(this.Bm.value&4)});c.prototype.computeCurve=function(){if(null===this.Hi){var n=this.sd,t=this.pc;this.Hi=null!==n&&n===this.Vd&&!t}return this.Hi?ae:this.Je};c.prototype.computeCorner=function(){if(this.Je===ae)return 0;var n=this.Gw;return(isNaN(n)||0>n)&&(n=10),n};c.prototype.computeCurviness=function(){var n=this.kt,i,t;return isNaN(n)&&(i=this.nf,0!==i?(n=10,t=this.h,null!==t&&(n=t.Lp),t=Math.abs(i),n=n/2+((t-1)/2|0)*n,0==t%2&&(n=-n),0>i&&(n=-n)):n=10),n};c.prototype.computeThickness=function(){var n=this.path;return null!==n?Math.max(n.lb,1):1};c.prototype.hasCurviness=function(){return!isNaN(this.kt)||0!==this.nf&&!this.pc};c.prototype.adjustPoints=function(n,t,i,r){var s=this.Yo,f,o,c,k,d;if(this.pc){if(s===vw)return!1;s===yw&&(s=aw)}switch(s){case vw:if(f=this.o(n),o=this.o(i),!f.O(t)||!o.O(r)){var s=f.x,f=f.y,e=o.x-s,h=o.y-f,p=Math.sqrt(e*e+h*h);if(!u.I(p,0)){u.I(e,0)?c=0>h?-Math.PI/2:Math.PI/2:(c=Math.atan(h/Math.abs(e)),0>e&&(c=Math.PI-c));var o=t.x,l=t.y,e=r.x-o,a=r.y-l,h=Math.sqrt(e*e+a*a);for(u.I(e,0)?a=0>a?-Math.PI/2:Math.PI/2:(a=Math.atan(a/Math.abs(e)),0>e&&(a=Math.PI-a)),p=h/p,c=a-c,this.Hf(n,t),n+=1;n<i;n++)t=this.o(n),e=t.x-s,h=t.y-f,t=Math.sqrt(e*e+h*h),u.I(t,0)||(u.I(e,0)?h=0>h?-Math.PI/2:Math.PI/2:(h=Math.atan(h/Math.abs(e)),0>e&&(h=Math.PI-h)),e=h+c,t*=p,this.aa(n,o+t*Math.cos(e),l+t*Math.sin(e)));this.Hf(i,r)}}return!0;case yw:if(f=this.o(n),l=this.o(i),!f.O(t)||!l.O(r)){s=f.x;f=f.y;o=l.x;l=l.y;p=(o-s)*(o-s)+(l-f)*(l-f);e=t.x;c=t.y;var h=r.x,a=r.y,w=0,g=1,w=0!=h-e?(a-c)/(h-e):9e9;for(0!==w&&(g=Math.sqrt(1+1/(w*w))),this.Hf(n,t),n+=1;n<i;n++){t=this.o(n);var v=t.x,b=t.y,y=.5;0!==p&&(y=((s-v)*(s-o)+(f-b)*(f-l))/p);k=s+y*(o-s);d=f+y*(l-f);t=Math.sqrt((v-k)*(v-k)+(b-d)*(b-d));b<w*(v-k)+d&&(t=-t);0<w&&(t=-t);v=e+y*(h-e);y=c+y*(a-c);0!==w?(t=v+t/g,this.aa(n,t,y-(t-v)/w)):this.aa(n,v,y+t)}this.Hf(i,r)}return!0;case aw:return this.pc&&(s=this.o(n),f=this.o(n+1),o=this.o(n+2),u.I(s.y,f.y)?u.I(f.x,o.x)?this.aa(n+1,f.x,t.y):u.I(f.y,o.y)&&this.aa(n+1,t.x,f.y):u.I(s.x,f.x)&&(u.I(f.y,o.y)?this.aa(n+1,t.x,f.y):u.I(f.x,o.x)&&this.aa(n+1,f.x,t.y)),s=this.o(i),f=this.o(i-1),o=this.o(i-2),u.I(s.y,f.y)?u.I(f.x,o.x)?this.aa(i-1,f.x,r.y):u.I(f.y,o.y)&&this.aa(i-1,r.x,f.y):u.I(s.x,f.x)&&(u.I(f.y,o.y)?this.aa(i-1,r.x,f.y):u.I(f.x,o.x)&&this.aa(i-1,f.x,r.y))),this.Hf(n,t),this.Hf(i,r),!0;default:return!1}};c.prototype.addOrthoPoints=function(n,t,i,r,f,e){var c,o,s,l,v,y,p,a;t=-45<=t&&45>t?0:45<=t&&135>t?90:135<=t&&225>t?180:270;r=-45<=r&&45>r?0:45<=r&&135>r?90:135<=r&&225>r?180:270;c=f.pa.copy();o=e.pa.copy();c.P()&&o.P()&&(c.Wf(8,8),o.Wf(8,8),c.xj(n),o.xj(i),0===t?i.x>n.x||270===r&&i.y<n.y&&o.right>n.x||90===r&&i.y>n.y&&o.right>n.x?(s=new h(i.x,n.y),l=new h(i.x,(n.y+i.y)/2),180===r?(s.x=this.computeMidOrthoPosition(n.x,i.x,!1),l.x=s.x,l.y=i.y):270===r&&i.y<n.y||90===r&&i.y>n.y?(s.x=n.x<o.left?this.computeMidOrthoPosition(n.x,o.left,!1):n.x<o.right&&(270===r&&n.y<o.top||90===r&&n.y>o.bottom)?this.computeMidOrthoPosition(n.x,i.x,!1):o.right,l.x=s.x,l.y=i.y):0===r&&n.x<o.left&&n.y>o.top&&n.y<o.bottom&&(s.x=n.x,s.y=n.y<i.y?Math.min(i.y,o.top):Math.max(i.y,o.bottom),l.y=s.y)):(s=new h(n.x,i.y),l=new h((n.x+i.x)/2,i.y),(180===r||90===r&&i.y<c.top||270===r&&i.y>c.bottom)&&(180===r&&(o.La(n)||c.La(i))?s.y=this.computeMidOrthoPosition(n.y,i.y,!0):i.y<n.y&&(180===r||90===r)?s.y=this.computeMidOrthoPosition(c.top,Math.max(i.y,o.bottom),!0):i.y>n.y&&(180===r||270===r)&&(s.y=this.computeMidOrthoPosition(c.bottom,Math.min(i.y,o.top),!0)),l.x=i.x,l.y=s.y),s.y>c.top&&s.y<c.bottom&&(i.x>=c.left&&i.x<=n.x||n.x<=o.right&&n.x>=i.x?(90===r||270===r)&&(s=new h(Math.max((n.x+i.x)/2,n.x),n.y),l=new h(s.x,i.y)):(s.y=270===r||(0===r||180===r)&&i.y<n.y?Math.min(i.y,0===r?c.top:Math.min(c.top,o.top)):Math.max(i.y,0===r?c.bottom:Math.max(c.bottom,o.bottom)),l.x=i.x,l.y=s.y))):180===t?i.x<n.x||270===r&&i.y<n.y&&o.left<n.x||90===r&&i.y>n.y&&o.left<n.x?(s=new h(i.x,n.y),l=new h(i.x,(n.y+i.y)/2),0===r?(s.x=this.computeMidOrthoPosition(n.x,i.x,!1),l.x=s.x,l.y=i.y):270===r&&i.y<n.y||90===r&&i.y>n.y?(s.x=n.x>o.right?this.computeMidOrthoPosition(n.x,o.right,!1):n.x>o.left&&(270===r&&n.y<o.top||90===r&&n.y>o.bottom)?this.computeMidOrthoPosition(n.x,i.x,!1):o.left,l.x=s.x,l.y=i.y):180===r&&n.x>o.right&&n.y>o.top&&n.y<o.bottom&&(s.x=n.x,s.y=n.y<i.y?Math.min(i.y,o.top):Math.max(i.y,o.bottom),l.y=s.y)):(s=new h(n.x,i.y),l=new h((n.x+i.x)/2,i.y),(0===r||90===r&&i.y<c.top||270===r&&i.y>c.bottom)&&(0===r&&(o.La(n)||c.La(i))?s.y=this.computeMidOrthoPosition(n.y,i.y,!0):i.y<n.y&&(0===r||90===r)?s.y=this.computeMidOrthoPosition(c.top,Math.max(i.y,o.bottom),!0):i.y>n.y&&(0===r||270===r)&&(s.y=this.computeMidOrthoPosition(c.bottom,Math.min(i.y,o.top),!0)),l.x=i.x,l.y=s.y),s.y>c.top&&s.y<c.bottom&&(i.x<=c.right&&i.x>=n.x||n.x>=o.left&&n.x<=i.x?(90===r||270===r)&&(s=new h(Math.min((n.x+i.x)/2,n.x),n.y),l=new h(s.x,i.y)):(s.y=270===r||(0===r||180===r)&&i.y<n.y?Math.min(i.y,180===r?c.top:Math.min(c.top,o.top)):Math.max(i.y,180===r?c.bottom:Math.max(c.bottom,o.bottom)),l.x=i.x,l.y=s.y))):90===t?i.y>n.y||180===r&&i.x<n.x&&o.bottom>n.y||0===r&&i.x>n.x&&o.bottom>n.y?(s=new h(n.x,i.y),l=new h((n.x+i.x)/2,i.y),270===r?(s.y=this.computeMidOrthoPosition(n.y,i.y,!0),l.x=i.x,l.y=s.y):180===r&&i.x<n.x||0===r&&i.x>n.x?(s.y=n.y<o.top?this.computeMidOrthoPosition(n.y,o.top,!0):n.y<o.bottom&&(180===r&&n.x<o.left||0===r&&n.x>o.right)?this.computeMidOrthoPosition(n.y,i.y,!0):o.bottom,l.x=i.x,l.y=s.y):90===r&&n.y<o.top&&n.x>o.left&&n.x<o.right&&(s.x=n.x<i.x?Math.min(i.x,o.left):Math.max(i.x,o.right),s.y=n.y,l.x=s.x)):(s=new h(i.x,n.y),l=new h(i.x,(n.y+i.y)/2),(270===r||0===r&&i.x<c.left||180===r&&i.x>c.right)&&(270===r&&(o.La(n)||c.La(i))?s.x=this.computeMidOrthoPosition(n.x,i.x,!1):i.x<n.x&&(270===r||0===r)?s.x=this.computeMidOrthoPosition(c.left,Math.max(i.x,o.right),!1):i.x>n.x&&(270===r||180===r)&&(s.x=this.computeMidOrthoPosition(c.right,Math.min(i.x,o.left),!1)),l.x=s.x,l.y=i.y),s.x>c.left&&s.x<c.right&&(i.y>=c.top&&i.y<=n.y||n.y<=o.bottom&&n.y>=i.y?(0===r||180===r)&&(s=new h(n.x,Math.max((n.y+i.y)/2,n.y)),l=new h(i.x,s.y)):(s.x=180===r||(90===r||270===r)&&i.x<n.x?Math.min(i.x,90===r?c.left:Math.min(c.left,o.left)):Math.max(i.x,90===r?c.right:Math.max(c.right,o.right)),l.x=s.x,l.y=i.y))):i.y<n.y||180===r&&i.x<n.x&&o.top<n.y||0===r&&i.x>n.x&&o.top<n.y?(s=new h(n.x,i.y),l=new h((n.x+i.x)/2,i.y),90===r?(s.y=this.computeMidOrthoPosition(n.y,i.y,!0),l.x=i.x,l.y=s.y):180===r&&i.x<n.x||0===r&&i.x>=n.x?(s.y=n.y>o.bottom?this.computeMidOrthoPosition(n.y,o.bottom,!0):n.y>o.top&&(180===r&&n.x<o.left||0===r&&n.x>o.right)?this.computeMidOrthoPosition(n.y,i.y,!0):o.top,l.x=i.x,l.y=s.y):270===r&&n.y>o.bottom&&n.x>o.left&&n.x<o.right&&(s.x=n.x<i.x?Math.min(i.x,o.left):Math.max(i.x,o.right),s.y=n.y,l.x=s.x)):(s=new h(i.x,n.y),l=new h(i.x,(n.y+i.y)/2),(90===r||0===r&&i.x<c.left||180===r&&i.x>c.right)&&(90===r&&(o.La(n)||c.La(i))?s.x=this.computeMidOrthoPosition(n.x,i.x,!1):i.x<n.x&&(90===r||0===r)?s.x=this.computeMidOrthoPosition(c.left,Math.max(i.x,o.right),!1):i.x>n.x&&(90===r||180===r)&&(s.x=this.computeMidOrthoPosition(c.right,Math.min(i.x,o.left),!1)),l.x=s.x,l.y=i.y),s.x>c.left&&s.x<c.right&&(i.y<=c.bottom&&i.y>=n.y||n.y>=o.top&&n.y<=i.y?(0===r||180===r)&&(s=new h(n.x,Math.min((n.y+i.y)/2,n.y)),l=new h(i.x,s.y)):(s.x=180===r||(90===r||270===r)&&i.x<n.x?Math.min(i.x,270===r?c.left:Math.min(c.left,o.left)):Math.max(i.x,270===r?c.right:Math.max(c.right,o.right)),l.x=s.x,l.y=i.y))),v=s,y=l,this.qj?(p=this.h,(a=null===p)||(p.mc.Eg?a=!1:(a=p.Ya,a=a instanceof ct?!a.Is||a.AF:!0),a=!a),a||c.La(i)||o.La(n)||f===e||this.layer.Dc?n=!1:(f=wg(p,!0,this),ub(f,Math.min(n.x,v.x),Math.min(n.y,v.y),Math.abs(n.x-v.x),Math.abs(n.y-v.y))&&ub(f,Math.min(v.x,y.x),Math.min(v.y,y.y),Math.abs(v.x-y.x),Math.abs(v.y-y.y))&&ub(f,Math.min(y.x,i.x),Math.min(y.y,i.y),Math.abs(y.x-i.x),Math.abs(y.y-i.y)))?n=!1:(c=c.copy().yj(o),c.Wf(2*f.Vm,2*f.Um),fb(f,n,t,i,r,c),o=ch(f,i.x,i.y),f.abort||o!==uc||(rb(f),o=f.KG,c.Wf(f.Vm*o,f.Um*o),fb(f,n,t,i,r,c),o=ch(f,i.x,i.y)),f.abort||o!==uc||(rb(f),o=f.KF,c.Wf(f.Vm*o,f.Um*o),fb(f,n,t,i,r,c),o=ch(f,i.x,i.y)),!f.abort&&o===uc&&f.nH&&(rb(f),fb(f,n,t,i,r,f.Tb),o=ch(f,i.x,i.y)),!f.abort&&o<uc&&ch(f,i.x,i.y)!==nb)?(stt(this,f,i.x,i.y,r,!0),r=this.o(2),4>this.ra?(0===t||180===t?(r.x=n.x,r.y=i.y):(r.x=i.x,r.y=n.y),this.aa(2,r.x,r.y),this.C(3,r.x,r.y)):(i=this.o(3),0===t||180===t)?u.I(r.x,i.x)?(t=0===t?Math.max(r.x,n.x):Math.min(r.x,n.x),this.aa(2,t,n.y),this.aa(3,t,i.y)):u.I(r.y,i.y)?(Math.abs(n.y-r.y)<=f.Um/2&&(this.aa(2,r.x,n.y),this.aa(3,i.x,n.y)),this.C(2,r.x,n.y)):this.aa(2,n.x,r.y):(90===t||270===t)&&(u.I(r.y,i.y)?(t=90===t?Math.max(r.y,n.y):Math.min(r.y,n.y),this.aa(2,n.x,t),this.aa(3,i.x,t)):u.I(r.x,i.x)?(Math.abs(n.x-r.x)<=f.Vm/2&&(this.aa(2,n.x,r.y),this.aa(3,n.x,i.y)),this.C(2,n.x,r.y)):this.aa(2,r.x,n.y)),n=!0):n=!1):n=!1,n||(this.gi(s),this.gi(l)))};c.prototype.computeMidOrthoPosition=function(n,t){if(this.hasCurviness()){var i=this.computeCurviness();return(n+t)/2+i}return(n+t)/2};c.prototype.findClosestSegment=function(n){var e;r&&t.l(n,h,c,"findClosestSegment:p");e=n.x;n=n.y;for(var i=this.o(0),u=this.o(1),o=ur(e,n,i.x,i.y,u.x,u.y),s=0,f=1;f<this.ra-1;f++){var i=this.o(f+1),l=ur(e,n,u.x,u.y,i.x,i.y),u=i;l<o&&(s=f,o=l)}return s};c.prototype.invalidateGeometry=c.prototype.df=function(){this.Vi=this.Ta=null;this.ja()};t.A(c,{td:"geometry"},function(){return null===this.Ta&&(this.updateRoute(),this.Ta=this.makeGeometry()),this.Ta});c.prototype.sx=function(){var t,n;if(null===this.Ta&&!1!==this.xg&&(this.Ta=this.makeGeometry(),t=this.er(),null!==t)){t.Ta=this.Ta;for(var r=this.va,u=r.length,i=0;i<u;i++)n=r.n[i],n!==t&&n.oi&&n instanceof w&&(n.Ta=this.Ta)}};c.prototype.makeGeometry=function(){var y=this.ra,w,p,r,l,nt,it,i;if(2>y)return r=new rt(wr),w=new ai(0,0),r.Fb.add(w),r;p=!1;r=this.h;null!==r&&0!==r.ma.Qe&&nl(this)&&(p=!0);var a=this.o(0).copy(),f=a.copy(),g=this.computeCurve();if(g===ae&&3<=y&&!u.sb(this.En,0))if(3===y)var i=this.o(1),r=Math.min(a.x,i.x),w=Math.min(a.y,i.y),i=this.o(2),r=Math.min(r,i.x),w=Math.min(w,i.y);else{if(this.pc)for(i=0;i<y;i++)r=this.Bc.n[i],f.x=Math.min(r.x,f.x),f.y=Math.min(r.y,f.y);else for(i=3;i<y;i+=3)i+3>=y&&(i=y-1),l=this.o(i),f.x=Math.min(l.x,f.x),f.y=Math.min(l.y,f.y);r=f.x;w=f.y}else{for(i=0;i<y;i++)r=this.Bc.n[i],f.x=Math.min(r.x,f.x),f.y=Math.min(r.y,f.y);r=f.x;w=f.y}if(r-=this.Mz.x,w-=this.Mz.y,a.x-=r,a.y-=w,2===y)nt=this.o(1).copy(),nt.x-=r,nt.y-=w,0!==kw(this)&&ha(this,a,!0,f),0!==sa(this)&&ha(this,nt,!1,f),r=new rt(nu),r.sa=a.x,r.ta=a.y,r.D=nt.x,r.F=nt.y;else{if(nt=t.u(),0!==kw(this)&&ha(this,a,!0,f),v(nt,a.x,a.y,!1,!1),g===ae&&3<=y&&!u.sb(this.En,0))if(3===y)i=this.o(1),y=i.x-r,p=i.y-w,i=this.o(2).copy(),i.x-=r,i.y-=w,0!==sa(this)&&ha(this,i,!1,f),o(nt,y,p,y,p,i.x,i.y);else if(this.pc){for(f=new h(r,w),a=this.o(1).copy(),g=new h(r,w),y=new h(r,w),p=this.o(0),l=null,it=this.En/3,i=1;i<this.ra-1;i++){l=this.o(i);var d=p,e=l,tt=this.o(htt(this,l,i,!1));if((!u.sb(d.x,e.x)||!u.sb(e.x,tt.x))&&(!u.sb(d.y,e.y)||!u.sb(e.y,tt.y))){var c=it,n=g,b=y;isNaN(c)&&(c=this.En/3);var ut=d.x,d=d.y,s=e.x,e=e.y,ft=tt.x,tt=tt.y,k=c*dw(ut,d,s,e),c=c*dw(s,e,ft,tt);u.sb(d,e)&&u.sb(s,ft)&&(s>ut?tt>e?(n.x=s-k,n.y=e-k,b.x=s+c,b.y=e+c):(n.x=s-k,n.y=e+k,b.x=s+c,b.y=e-c):tt>e?(n.x=s+k,n.y=e-k,b.x=s-c,b.y=e+c):(n.x=s+k,n.y=e+k,b.x=s-c,b.y=e-c));u.sb(ut,s)&&u.sb(e,tt)&&(e>d?(ft>s?(n.x=s-k,n.y=e-k,b.x=s+c):(n.x=s+k,n.y=e-k,b.x=s-c),b.y=e+c):(ft>s?(n.x=s-k,n.y=e+k,b.x=s+c):(n.x=s+k,n.y=e+k,b.x=s-c),b.y=e-c));(u.sb(ut,s)&&u.sb(s,ft)||u.sb(d,e)&&u.sb(e,tt))&&(ut=.5*(ut+ft),d=.5*(d+tt),n.x=ut,n.y=d,b.x=ut,b.y=d);1===i?(a.x=.5*(p.x+l.x),a.y=.5*(p.y+l.y)):2===i&&u.sb(p.x,this.o(0).x)&&u.sb(p.y,this.o(0).y)&&(a.x=.5*(p.x+l.x),a.y=.5*(p.y+l.y));o(nt,a.x-r,a.y-w,g.x-r,g.y-w,l.x-r,l.y-w);f.set(g);a.set(y);p=l}}i=p.x;p=p.y;f=this.o(this.ra-1);i=.5*(i+f.x);p=.5*(p+f.y);o(nt,y.x-r,y.y-w,i-r,p-w,f.x-r,f.y-w)}else for(i=3;i<y;i+=3)p=this.o(i-2),i+3>=y&&(i=y-1),f=this.o(i-1),l=this.o(i),i===y-1&&0!==sa(this)&&(l=l.copy(),ha(this,l,!1,u.Aj)),o(nt,p.x-r,p.y-w,f.x-r,f.y-w,l.x-r,l.y-w);else{for(f=t.N(),f.assign(this.o(0)),i=1;i<y;){if(i=htt(this,f,i,1<i),n=this.o(i),i>=y-1){f!==n&&(0!==sa(this)&&(n=n.copy(),ha(this,n,!1,u.Aj)),ca(this,nt,-r,-w,f,n,p));break}i=htt(this,n,i+1,i<y-3);a=nt;g=-r;l=-w;it=f;b=this.o(i);ut=f;d=p;u.I(it.y,n.y)&&u.I(n.x,b.x)?(c=this.computeCorner(),c=Math.min(c,Math.abs(n.x-it.x)/2),c=s=Math.min(c,Math.abs(b.y-n.y)/2),u.I(c,0)?(ca(this,a,g,l,it,n,d),ut.assign(n)):(e=n.x,ft=n.y,tt=e,k=ft,e=n.x>it.x?n.x-c:n.x+c,k=b.y>n.y?n.y+s:n.y-s,ca(this,a,g,l,it,new h(e,ft),d),sw(a,n.x+g,n.y+l,tt+g,k+l),ut.p(tt,k))):u.I(it.x,n.x)&&u.I(n.y,b.y)?(c=this.computeCorner(),s=Math.min(c,Math.abs(n.y-it.y)/2),s=c=Math.min(s,Math.abs(b.x-n.x)/2),u.I(c,0)?(ca(this,a,g,l,it,n,d),ut.assign(n)):(e=n.x,k=ft=n.y,ft=n.y>it.y?n.y-s:n.y+s,tt=b.x>n.x?n.x+c:n.x-c,ca(this,a,g,l,it,new h(e,ft),d),sw(a,n.x+g,n.y+l,tt+g,k+l),ut.p(tt,k))):(ca(this,a,g,l,it,n,d),ut.assign(n))}t.B(f)}r=nt.s;t.v(nt)}return r};t.A(c,{ut:"firstPickIndex"},function(){return 2>=this.ra?0:this.pc||ww(this)!==pi?1:0});t.A(c,{nx:"lastPickIndex"},function(){var n=this.ra;return 0===n?0:2>=n?n-1:this.pc||bw(this)!==pi?n-2:n-1});c.prototype.usesSamePort=function(n){var t=this.ra,i=n.ra;if(0<t&&0<i){if(this.o(0).yf(n.o(0))||this.o(t-1).yf(n.o(i-1)))return!0}else if(this.ca===n.ca||this.fa===n.fa)return!0;return!1};c.prototype.sh=function(n){if(s.prototype.sh.call(this,n),n&&this.updateRoute(),null!==this.Ce)for(var t=this.Ce.k;t.next();)t.value.sh(n)};t.g(c,"adjusting",c.prototype.Yo);t.defineProperty(c,{Yo:"adjusting"},function(){return this.zq},function(n){var i=this.zq;i!==n&&(r&&t.Fa(n,c,c,"adjusting"),this.zq=n,this.j("adjusting",i,n))});t.g(c,"corner",c.prototype.Gw);t.defineProperty(c,{Gw:"corner"},function(){return this.Mq},function(n){var i=this.Mq;i!==n&&(r&&t.i(n,"number",c,"corner"),this.Mq=n,this.df(),this.j("corner",i,n))});t.g(c,"curve",c.prototype.Je);t.defineProperty(c,{Je:"curve"},function(){return this.Pq},function(n){var i=this.Pq;i!==n&&(r&&t.Fa(n,c,c,"curve"),this.Pq=n,this.hc(),ctt(this,i===ys||i===oa||n===ys||n===oa),this.j("curve",i,n))});t.g(c,"curviness",c.prototype.kt);t.defineProperty(c,{kt:"curviness"},function(){return this.Qq},function(n){var i=this.Qq;i!==n&&(r&&t.i(n,"number",c,"curviness"),this.Qq=n,this.hc(),this.j("curviness",i,n))});t.g(c,"routing",c.prototype.au);t.defineProperty(c,{au:"routing"},function(){return this.Bm},function(n){var i=this.Bm;i!==n&&(r&&t.Fa(n,c,c,"routing"),this.Bm=n,this.Hi=null,this.hc(),ctt(this,2==(i.value&2)||2==(n.value&2)),this.j("routing",i,n))});t.g(c,"smoothness",c.prototype.En);t.defineProperty(c,{En:"smoothness"},function(){return this.Ds},function(n){var i=this.Ds;i!==n&&(r&&t.i(n,"number",c,"smoothness"),this.Ds=n,this.df(),this.j("smoothness",i,n))});t.ce(ltt,{Up:!0,wx:!0,Qt:!0,xx:!0,links:!0,spacing:!0});t.ce(ps,{group:!0,Ap:!0,abort:!0,nH:!0,KG:!0,KF:!0});var nb=0,va=1,tl=1,uc=999999999,att=uc;ps.prototype.initialize=function(n){var f,u;if(!(0>=n.width||0>=n.height)){var t=n.y,r=n.x+n.width,i=n.y+n.height;if(this.Of=Math.floor((n.x-this.Fd)/this.Fd)*this.Fd,this.Pf=Math.floor((t-this.xd)/this.xd)*this.xd,this.Ir=Math.ceil((r+2*this.Fd)/this.Fd)*this.Fd,this.Jr=Math.ceil((i+2*this.xd)/this.xd)*this.xd,n=1+(Math.ceil((this.Ir-this.Of)/this.Fd)|0),t=1+(Math.ceil((this.Jr-this.Pf)/this.xd)|0),null===this.rc||this.Lm<n-1||this.Mm<t-1){for(r=[],i=0;i<=n;i++){for(f=[],u=0;u<=t;u++)f[u]=0;r[i]=f}this.rc=r;this.Lm=n-1;this.Mm=t-1}if(null!==this.rc)for(n=0;n<=this.Lm;n++)for(t=0;t<=this.Mm;t++)this.rc[n][t]=att}};t.A(ps,{Tb:null},function(){return new p(this.Of,this.Pf,this.Ir-this.Of,this.Jr-this.Pf)});t.g(ps,"cellWidth",ps.prototype.Vm);t.defineProperty(ps,{Vm:null},function(){return this.Fd},function(n){0<n&&n!==this.Fd&&(this.Fd=n,this.initialize(this.Tb))});t.g(ps,"cellHeight",ps.prototype.Um);t.defineProperty(ps,{Um:null},function(){return this.xd},function(n){0<n&&n!==this.xd&&(this.xd=n,this.initialize(this.Tb))});t.ce(ya,{Jc:!0,port:!0,Mg:!0,Tp:!0});ya.prototype.toString=function(){for(var i,n=this.Mg,r=this.Jc.toString()+" "+n.length.toString()+":",t=0;t<n.length;t++)i=n[t],null!==i&&(r+="\n  "+i.toString());return r};ya.prototype.OJ=function(n,t){return n===t?0:null===n?-1:null===t?1:n.je<t.je?-1:n.je>t.je?1:n.angle<t.angle?-1:n.angle>t.angle?1:0};ya.prototype.computeEndSegmentLength=function(n){var i=n.link,r=i.computeEndSegmentLength(this.Jc,this.port,pi,i.sd===this.port),u=n.yp,e,f;return 0>u?r:(e=n.$m,1>=e||!i.pc)?r:(i=n.vx,f=n.Kp,(n.je===t.Mc||n.je===t.Wc)&&(u=e-1-u),((n=n.je===t.Mc||n.je===t.Xc)?i.y<f.y:i.x<f.x)?r+8*u:(n?i.y===f.y:i.x===f.x)?r:r+8*(e-1-u))};t.ce(vtt,{link:!0,angle:!0,je:!0,vx:!0,yp:!0,$m:!0,Kp:!0,Ow:!0});vtt.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.je.toString()+":"+this.yp.toString()+"/"+this.$m.toString()+" "+this.Kp.toString()+" "+this.Ow.toString()+" "+this.vx.toString()};t.ka("Group",g);t.Qa(g,y);g.prototype.cloneProtected=function(n){y.prototype.cloneProtected.call(this,n);n.Kr=this.Kr;n.Mr=this.Mr;n.al=this.al;n.Ts=this.Ts;n.pr=this.pr;n.Us=this.Us;n.Hs=this.Hs;var t=n.qt(function(n){return n instanceof or});n.Nb=t instanceof or?t:null;n.Iq=this.Iq;n.Jq=this.Jq;n.Kq=this.Kq;null!==this.Yd?(n.Yd=this.Yd.copy(),n instanceof g&&(n.Yd.group=n)):(null!==n.Yd&&(n.Yd.group=null),n.Yd=null)};g.prototype.ji=function(n){var i,t;for(y.prototype.ji.call(this,n),i=n.pp(),n=n.Vc;n.next();)if(t=n.value,t.ja(),t.M(8),t.Uf(),t instanceof g&&(t.Qx=t.xe,wtt(t,i)),t instanceof y)t.Cf(i);else if(t instanceof c)for(t=t.sj;t.next();)t.value.Cf(i)};g.prototype.yn=function(n,i,r,u,f,e,o){if(n===vr&&"elements"===i){if(f instanceof or)null===this.Nb?this.Nb=f:this.Nb!==f&&t.m("Cannot insert a second Placeholder into the visual tree of a Group.");else if(f instanceof a){var s=f.qt(function(n){return n instanceof or});s instanceof or&&(null===this.Nb?this.Nb=s:this.Nb!==s&&t.m("Cannot insert a second Placeholder into the visual tree of a Group."))}}else n===kr&&"elements"===i&&null!==this.Nb&&(u===this.Nb?this.Nb=null:u instanceof a&&this.Nb.rj(u)&&(this.Nb=null));y.prototype.yn.call(this,n,i,r,u,f,e,o)};g.prototype.ik=function(n,t,i,r){this.$k=this.Nb;a.prototype.ik.call(this,n,t,i,r)};g.prototype.Bl=function(){var t,n;if(!y.prototype.Bl.call(this))return!1;for(t=this.Vc;t.next();)if(n=t.value,n instanceof y){if(n.Wa()&&he(n))return!1}else if(n instanceof c&&n.Wa()&&he(n)&&n.ca!==this&&n.fa!==this)return!1;return!0};t.A(g,{placeholder:"placeholder"},function(){return this.Nb});t.g(g,"computesBoundsAfterDrag",g.prototype.hA);t.defineProperty(g,{hA:"computesBoundsAfterDrag"},function(){return this.Iq},function(n){var i=this.Iq;i!==n&&(t.i(n,"boolean",g,"computesBoundsAfterDrag"),this.Iq=n,this.j("computesBoundsAfterDrag",i,n))});t.g(g,"computesBoundsIncludingLinks",g.prototype.zE);t.defineProperty(g,{zE:"computesBoundsIncludingLinks"},function(){return this.Jq},function(n){t.i(n,"boolean",g,"computesBoundsIncludingLinks");var i=this.Jq;i!==n&&(this.Jq=n,this.j("computesBoundsIncludingLinks",i,n))});t.g(g,"computesBoundsIncludingLocation",g.prototype.AE);t.defineProperty(g,{AE:"computesBoundsIncludingLocation"},function(){return this.Kq},function(n){t.i(n,"boolean",g,"computesBoundsIncludingLocation");var i=this.Kq;i!==n&&(this.Kq=n,this.j("computesBoundsIncludingLocation",i,n))});t.A(g,{Vc:"memberParts"},function(){return this.Lr.k});g.prototype.cn=function(){var n,t;if(0<this.Lr.count){if(n=this.h,null===n)return;for(t=this.Lr.copy().k;t.next();)n.remove(t.value)}y.prototype.cn.call(this)};g.prototype.Kx=function(){var n=this.layer;null!==n&&n.Kx(this)};t.g(g,"layout",g.prototype.ic);t.defineProperty(g,{ic:"layout"},function(){return this.Yd},function(n){var i=this.Yd;i!==n&&(null!==n&&t.l(n,ti,g,"layout"),null!==i&&(i.h=null,i.group=null),this.Yd=n,null!==n&&(n.h=this.h,n.group=this),this.j("layout",i,n))});t.g(g,"memberAdded",g.prototype.VF);t.defineProperty(g,{VF:"memberAdded"},function(){return this.Kr},function(n){var i=this.Kr;i!==n&&(null!==n&&t.i(n,"function",g,"memberAdded"),this.Kr=n,this.j("memberAdded",i,n))});t.g(g,"memberRemoved",g.prototype.WF);t.defineProperty(g,{WF:"memberRemoved"},function(){return this.Mr},function(n){var i=this.Mr;i!==n&&(null!==n&&t.i(n,"function",g,"memberRemoved"),this.Mr=n,this.j("memberRemoved",i,n))});t.g(g,"memberValidation",g.prototype.Lt);t.defineProperty(g,{Lt:"memberValidation"},function(){return this.al},function(n){var i=this.al;i!==n&&(null!==n&&t.i(n,"function",g,"memberValidation"),this.al=n,this.j("memberValidation",i,n))});g.prototype.canAddMembers=function(n){var t=this.h;if(null===t)return!1;for(t=t.Ye,n=fd(n).k;n.next();)if(!t.isValidMember(this,n.value))return!1;return!0};g.prototype.addMembers=function(n,t){var i=this.h,r;if(null===i)return!1;for(var i=i.Ye,u=!0,f=fd(n).k;f.next();)r=f.value,!t||i.isValidMember(this,r)?r.fb=this:u=!1;return u};t.g(g,"ungroupable",g.prototype.cH);t.defineProperty(g,{cH:"ungroupable"},function(){return this.Ts},function(n){var i=this.Ts;i!==n&&(t.i(n,"boolean",g,"ungroupable"),this.Ts=n,this.j("ungroupable",i,n))});g.prototype.canUngroup=function(){if(!this.cH)return!1;var n=this.layer;return null!==n&&!n.dp?!1:(n=n.h,null===n||n.dp?!0:!1)};g.prototype.invalidateConnectedLinks=g.prototype.Cf=function(n){var r,i,t;for(void 0===n&&(n=null),y.prototype.Cf.call(this,n),r=this.ZE();r.next();)i=r.value,null!==n&&n.contains(i)||(t=i.ca,null!==t&&t.Al(this)&&!t.Wa()?i.hc():(t=i.fa,null!==t&&t.Al(this)&&!t.Wa()&&i.hc()))};g.prototype.findExternalLinksConnected=g.prototype.ZE=function(){var t=this.pp(),i,r,n,u;for(t.add(this),i=new it(c),r=t.k;r.next();)if(n=r.value,n instanceof y)for(n=n.Td;n.next();)u=n.value,t.contains(u)||i.add(u);return i.k};g.prototype.findExternalNodesConnected=function(){var i=this.pp(),r,f,t,n,u;for(i.add(this),r=new it(y),f=i.k;f.next();)if(t=f.value,t instanceof y)for(t=t.Td;t.next();)n=t.value,u=n.ca,i.contains(u)&&u!==this||r.add(u),n=n.fa,i.contains(n)&&n!==this||r.add(n);return r.k};g.prototype.findSubGraphParts=g.prototype.pp=function(){var n=new it(s);return ss(n,this,!0,0),n.remove(this),n};g.prototype.collapseSubGraph=g.prototype.collapseSubGraph=function(){var n=this.h,t;null===n||n.ee||(n.ee=!0,t=this.pp(),wtt(this,t),n.ee=!1)};g.prototype.expandSubGraph=g.prototype.expandSubGraph=function(){var n=this.h,t,i;null===n||n.ee||(t=n.mc,0!==n.ma.Qe&&t.Gl(),n.ee=!0,i=this.pp(),ght(this,i,t,this),n.ee=!1)};t.g(g,"isSubGraphExpanded",g.prototype.xe);t.defineProperty(g,{xe:"isSubGraphExpanded"},function(){return this.pr},function(n){var r=this.pr,i,u;r!==n&&(t.i(n,"boolean",g,"isSubGraphExpanded"),this.pr=n,i=this.h,this.j("isSubGraphExpanded",r,n),r=this.QG,null!==r&&(u=!0,null!==i&&(u=i.Sa,i.Sa=!0),r(this),null!==i&&(i.Sa=u)),null!==i&&i.ma.yb||(n?this.expandSubGraph():this.collapseSubGraph()))});t.g(g,"wasSubGraphExpanded",g.prototype.Qx);t.defineProperty(g,{Qx:"wasSubGraphExpanded"},function(){return this.Us},function(n){var i=this.Us;i!==n&&(t.i(n,"boolean",g,"wasSubGraphExpanded"),this.Us=n,this.j("wasSubGraphExpanded",i,n))});t.g(g,"subGraphExpandedChanged",g.prototype.QG);t.defineProperty(g,{QG:"subGraphExpandedChanged"},function(){return this.Hs},function(n){var i=this.Hs;i!==n&&(null!==n&&t.i(n,"function",g,"subGraphExpandedChanged"),this.Hs=n,this.j("subGraphExpandedChanged",i,n))});g.prototype.move=g.prototype.move=function(n){var i=this.position,f=i.x,r,e;isNaN(f)&&(f=0);i=i.y;isNaN(i)&&(i=0);var f=n.x-f,i=n.y-i,u=t.qc(f,i);for(y.prototype.move.call(this,n),n=this.pp().k;n.next();)r=n.value,r instanceof c||r.ni||(e=r.position,u.x=e.x+f,u.y=e.y+i,y.prototype.move.call(r,u));for(n.reset();n.next();)r=n.value,r instanceof c&&(e=r.position,u.x=e.x+f,u.y=e.y+i,r.move(u));t.B(u)};t.ka("Placeholder",or);t.Qa(or,f);or.prototype.cloneProtected=function(n){f.prototype.cloneProtected.call(this,n);n.Te=this.Te.ba();n.qs=this.qs.copy()};or.prototype.jk=function(n){if(null===this.background&&null===this.hk)return!1;var t=this.Ja;return po(0,0,t.width,t.height,n.x,n.y)};or.prototype.Kt=function(){var r=this.U,n,i,f;if(null!==r&&(r instanceof g||r instanceof fi)||t.m("Placeholder is not inside a Group or Adornment."),r instanceof g){for(n=this.computeBorder(this.qs),i=this.nd,th(i,n.width||0,n.height||0),eh(this,0,0,i.width,i.height),i=r.Vc,f=!1;i.next();)if(i.value.Wa()){f=!0;break}!f||isNaN(n.x)||isNaN(n.y)||(i=new h,i.eu(n,r.gf),r.location=new h(i.x,i.y))}else{var n=this.Ea,i=this.nd,r=this.padding,f=r.left+r.right,o=r.top+r.bottom;if(n.P())th(i,n.width+f||0,n.height+o||0),eh(this,-r.left,-r.top,i.width,i.height);else{var s=this.U,e=s.uc,u=e.wb(hr,t.N()),n=t.wk(u.x,u.y,0,0);n.xj(e.wb(cu,u));n.xj(e.wb(tp,u));n.xj(e.wb(ip,u));s.hh.p(n.x,n.y);th(i,n.width+f||0,n.height+o||0);eh(this,-r.left,-r.top,i.width,i.height);t.B(u);t.oc(n)}}};or.prototype.ik=function(n,t,i,r){var u=this.pa;u.x=n;u.y=t;u.width=i;u.height=r};or.prototype.computeBorder=function(n){var r=this.U,i;if(r instanceof g&&r.hA&&this.qs.P()&&(i=r.h,null!==i&&(i=i.Ya,i instanceof ct&&!i.Wq&&null!==i.Hc&&!i.Hc.contains(r))))return n.assign(this.qs),n;var i=t.Jf(),f=this.computeMemberBounds(i),u=this.padding;return n.p(f.x-u.left,f.y-u.top,f.width+u.left+u.right,f.height+u.top+u.bottom),t.oc(i),r instanceof g&&r.AE&&r.location.P()&&n.xj(r.location),n};or.prototype.computeMemberBounds=function(n){var i=this.U,t;if(!(i instanceof g))return n.p(0,0,0,0),n;for(var r=Infinity,u=Infinity,f=-Infinity,e=-Infinity,o=i.Vc;o.next();)if(t=o.value,t.Wa()){if(t instanceof c){if(!i.zE)continue;if(pc(t))continue;if(t.ca===i||t.fa===i)continue}t=t.pa;t.left<r&&(r=t.left);t.top<u&&(u=t.top);t.right>f&&(f=t.right);t.bottom>e&&(e=t.bottom)}return isFinite(r)&&isFinite(u)?n.p(r,u,f-r,e-u):(i=i.location,r=this.padding,n.p(i.x+r.left,i.y+r.top,0,0)),n};t.g(or,"padding",or.prototype.padding);t.defineProperty(or,{padding:"padding"},function(){return this.Te},function(n){"number"==typeof n?(0>n&&t.ha(n,">= 0",or,"padding"),n=new ni(n)):(t.l(n,ni,or,"padding"),0>n.left&&t.ha(n.left,">= 0",or,"padding:val.left"),0>n.right&&t.ha(n.right,">= 0",or,"padding:val.right"),0>n.top&&t.ha(n.top,">= 0",or,"padding:val.top"),0>n.bottom&&t.ha(n.bottom,">= 0",or,"padding:val.bottom"));var i=this.Te;i.O(n)||(this.Te=n=n.ba(),this.j("padding",i,n))});t.ka("Layout",ti);ti.prototype.cloneProtected=function(n){n.mr=this.mr;n.kr=this.kr;this.kr||(n.wo=!0);n.ur=this.ur;n.Bq.assign(this.Bq);n.nr=this.nr};ti.prototype.copy=function(){var n=new this.constructor;return this.cloneProtected(n),n};ti.prototype.toString=function(){var n=t.Dg(Object.getPrototypeOf(this)),n=n+"(";return null!==this.group&&(n+=" in "+this.group),null!==this.h&&(n+=" for "+this.h),n+")"};t.g(ti,"diagram",ti.prototype.h);t.defineProperty(ti,{h:"diagram"},function(){return this.W},function(n){this.W!==n&&(null!==n&&t.l(n,i,ti,"diagram"),this.W=n)});t.g(ti,"group",ti.prototype.group);t.defineProperty(ti,{group:"group"},function(){return this.iz},function(n){this.iz!==n&&(null!==n&&t.l(n,g,ti,"group"),this.iz=n,null!==n&&(this.W=n.h))});t.g(ti,"isOngoing",ti.prototype.FF);t.defineProperty(ti,{FF:"isOngoing"},function(){return this.mr},function(n){this.mr!==n&&(t.i(n,"boolean",ti,"isOngoing"),this.mr=n)});t.g(ti,"isInitial",ti.prototype.EF);t.defineProperty(ti,{EF:"isInitial"},function(){return this.kr},function(n){t.i(n,"boolean",ti,"isInitial");this.kr=n;n||(this.wo=!0)});t.g(ti,"isValidLayout",ti.prototype.ff);t.defineProperty(ti,{ff:"isValidLayout"},function(){return this.wo},function(n){this.wo!==n&&(t.i(n,"boolean",ti,"isValidLayout"),this.wo=n,n||(n=this.h,null!==n&&(n.Bu=!0)))});ti.prototype.invalidateLayout=ti.prototype.M=function(){var n,t;this.wo&&(n=this.h,null===n||n.ma.yb||(t=n.mc,!t.qr&&(t.Eg&&t.iq(),this.FF&&n.rf||this.EF&&!n.rf)&&(this.ff=!1,n.ie())))};t.g(ti,"isRealtime",ti.prototype.NA);t.defineProperty(ti,{NA:"isRealtime"},function(){return this.nr},function(n){this.nr!==n&&(t.i(n,"boolean",ti,"isRealtime"),this.nr=n)});t.g(ti,"isViewportSized",ti.prototype.Gt);t.defineProperty(ti,{Gt:"isViewportSized"},function(){return this.ur},function(n){this.ur!==n&&(t.i(n,"boolean",ti,"isViewportSized"),(this.ur=n)&&this.M())});t.g(ti,"isRouting",ti.prototype.Ft);t.defineProperty(ti,{Ft:"isRouting"},function(){return this.nz},function(n){this.nz!==n&&(t.i(n,"boolean",ti,"isRouting"),this.nz=n)});t.g(ti,"network",ti.prototype.network);t.defineProperty(ti,{network:"network"},function(){return this.xz},function(n){var i=this.xz;i!==n&&(null!==n&&t.l(n,ei,ti,"network"),null!==i&&il(i,null),this.xz=n,null!==n&&il(n,this))});ti.prototype.createNetwork=function(){var n=new ei;return il(n,this),n};ti.prototype.makeNetwork=function(n){var t=this.createNetwork();return n instanceof i?(t.Zs(n.vh,!0),t.Zs(n.links,!0)):n instanceof g?t.Zs(n.Vc):t.Zs(n.k),t};ti.prototype.updateParts=function(){var n=this.h,t,i;if(null===n&&null!==this.network)for(t=this.network.vertexes.k;t.next();)if(i=t.value.Jc,null!==i&&(n=i.h,null!==n))break;this.ff=!0;null!==n&&n.yc("Layout");this.commitLayout();null!==n&&n.Ie("Layout")};ti.prototype.commitLayout=function(){};ti.prototype.doLayout=function(n){var i,u,r;if(n||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),i=new it(s),n===this.h?(fc(this,i,n.vh,!0,this.YA,!0,!1,!0),fc(this,i,n.vj,!0,this.YA,!0,!1,!0)):n===this.group?fc(this,i,n.Vc,!1,this.YA,!0,!1,!0):i.Ue(n.k),u=i.count,0<u){n=this.h;null!==n&&n.yc("Layout");for(var u=Math.ceil(Math.sqrt(u)),c=this.Nd.x,e=c,l=this.Nd.y,o=0,f=0,i=i.k;i.next();){r=i.value;r.xf();var h=r.Ha,a=h.width,h=h.height;r.moveTo(e,l);delete r.jD;e+=Math.max(a,50)+20;f=Math.max(f,Math.max(h,50));o>=u-1?(o=0,e=c,l+=f+20,f=0):o++}null!==n&&n.Ie("Layout")}this.ff=!0};ti.prototype.YA=function(n){return!n.location.P()||n instanceof g&&n.jD?!0:!1};t.g(ti,"arrangementOrigin",ti.prototype.Nd);t.defineProperty(ti,{Nd:"arrangementOrigin"},function(){return this.Bq},function(n){t.l(n,h,ti,"arrangementOrigin");this.Bq.O(n)||(this.Bq.assign(n),this.M())});ti.prototype.initialOrigin=function(n){var i=this.group,t;return null!==i?(t=i.location,isNaN(t.x)||isNaN(t.y))?n:(n=i.placeholder,null!==n?(t=n.wb(hr),t.x+=n.padding.left,t.y+=n.padding.top):t=i.position.copy(),t):n};t.ka("LayoutNetwork",ei);ei.prototype.clear=function(){var n,t;if(this.vertexes)for(n=this.vertexes.k;n.next();)t=n.value,t.clear(),t.network=null;if(this.edges)for(n=this.edges.k;n.next();)t=n.value,t.clear(),t.network=null;this.vertexes=new it(vt);this.edges=new it(rr);this.aB=new gt(y,vt);this.PA=new gt(c,rr)};ei.prototype.toString=function(){return"LayoutNetwork"+(null!==this.ic?"("+this.ic.toString()+")":"")};t.A(ei,{ic:"layout"},function(){return this.Yd});ei.prototype.createVertex=function(){return new vt};ei.prototype.createEdge=function(){return new rr};ei.prototype.addParts=ei.prototype.Zs=function(n,i){var f,r,e,u;if(null!==n){for(void 0===i&&(i=!1),t.i(i,"boolean",ei,"addParts:toplevelonly"),f=n.k;f.next();)r=f.value,r instanceof y&&(!i||r.Fp)&&r.canLayout()&&!r.ni&&(r instanceof g&&null===r.ic?this.Zs(r.Vc,!1):null===this.gn(r)&&(u=this.createVertex(),u.Jc=r,this.kl(u)));for(f.reset();f.next();)(r=f.value,r instanceof c&&(!i||r.Fp)&&r.canLayout()&&null===this.Pw(r))&&(e=r.ca,u=r.fa,e!==u&&(e=this.findGroupVertex(e),u=this.findGroupVertex(u),null!==e&&null!==u&&this.sn(e,u,r)))}};ei.prototype.findGroupVertex=function(n){if(null===n)return null;var t=n.findVisibleNode();if(null===t)return null;if(n=this.gn(t),null!==n)return n;for(t=t.fb;null!==t;){if(n=this.gn(t),null!==n)return n;t=t.fb}return null};ei.prototype.addVertex=ei.prototype.kl=function(n){if(null!==n){r&&t.l(n,vt,ei,"addVertex:vertex");this.vertexes.add(n);var i=n.Jc;null!==i&&this.aB.add(i,n);n.network=this}};ei.prototype.addNode=ei.prototype.Xo=function(n){if(null===n)return null;r&&t.l(n,y,ei,"addNode:node");var i=this.gn(n);return null===i&&(i=this.createVertex(),i.Jc=n,this.kl(i)),i};ei.prototype.deleteVertex=ei.prototype.PE=function(n){var u,i,f;if(null!==n&&(r&&t.l(n,vt,ei,"deleteVertex:vertex"),nct(this,n))){for(u=n.lf,i=u.count-1;0<=i;i--)f=u.wa(i),this.kp(f);for(u=n.Ze,i=u.count-1;0<=i;i--)f=u.wa(i),this.kp(f)}};ei.prototype.deleteNode=function(n){null!==n&&(r&&t.l(n,y,ei,"deleteNode:node"),n=this.gn(n),null!==n&&this.PE(n))};ei.prototype.findVertex=ei.prototype.gn=function(n){return null===n?null:(r&&t.l(n,y,ei,"findVertex:node"),this.aB.Da(n))};ei.prototype.addEdge=ei.prototype.Wo=function(n){if(null!==n){r&&t.l(n,rr,ei,"addEdge:edge");this.edges.add(n);var i=n.link;null!==i&&null===this.Pw(i)&&this.PA.add(i,n);i=n.toVertex;null!==i&&i.gE(n);i=n.fromVertex;null!==i&&i.eE(n);n.network=this}};ei.prototype.addLink=function(n){if(null===n)return null;r&&t.l(n,c,ei,"addLink:link");var u=n.ca,f=n.fa,i=this.Pw(n);return null===i?(i=this.createEdge(),i.link=n,null!==u&&(i.fromVertex=this.Xo(u)),null!==f&&(i.toVertex=this.Xo(f)),this.Wo(i)):(i.fromVertex=null!==u?this.Xo(u):null,i.toVertex=null!==f?this.Xo(f):null),i};ei.prototype.deleteEdge=ei.prototype.kp=function(n){if(null!==n){r&&t.l(n,rr,ei,"deleteEdge:edge");var i=n.toVertex;null!==i&&i.OE(n);i=n.fromVertex;null!==i&&i.NE(n);btt(this,n)}};ei.prototype.deleteLink=function(n){null!==n&&(r&&t.l(n,c,ei,"deleteLink:link"),n=this.Pw(n),null!==n&&this.kp(n))};ei.prototype.findEdge=ei.prototype.Pw=function(n){return null===n?null:(r&&t.l(n,c,ei,"findEdge:link"),this.PA.Da(n))};ei.prototype.linkVertexes=ei.prototype.sn=function(n,i,u){if(null===n||null===i)return null;if(r&&(t.l(n,vt,ei,"linkVertexes:fromVertex"),t.l(i,vt,ei,"linkVertexes:toVertex"),null!==u&&t.l(u,c,ei,"linkVertexes:link")),n.network===this&&i.network===this){var f=this.createEdge();return f.link=u,f.fromVertex=n,f.toVertex=i,this.Wo(f),f}return null};ei.prototype.reverseEdge=ei.prototype.Cx=function(n){if(null!==n){r&&t.l(n,rr,ei,"reverseEdge:edge");var i=n.fromVertex,u=n.toVertex;null!==i&&null!==u&&(i.NE(n),u.OE(n),n.Cx(),i.gE(n),u.eE(n))}};ei.prototype.deleteSelfEdges=ei.prototype.Lw=function(){for(var n,i=t.Hb(),r=this.edges.k;r.next();)n=r.value,n.fromVertex===n.toVertex&&i.push(n);for(r=i.length,n=0;n<r;n++)this.kp(i[n]);t.Ca(i)};ei.prototype.deleteArtificialVertexes=function(){for(var i,u,r=t.Hb(),n=this.vertexes.k;n.next();)i=n.value,null===i.Jc&&r.push(i);for(i=r.length,n=0;n<i;n++)this.PE(r[n]);for(i=t.Hb(),n=this.edges.k;n.next();)u=n.value,null===u.link&&i.push(u);for(u=i.length,n=0;n<u;n++)this.kp(i[n]);t.Ca(r);t.Ca(i)};ei.prototype.splitIntoSubNetworks=ei.prototype.qK=function(){var t,n,r,i;for(this.deleteArtificialVertexes(),rvt(this),this.Lw(),t=new b(ei),n=!0;n;)for(n=!1,r=this.vertexes.k;r.next();)if(i=r.value,0<i.lf.count||0<i.Ze.count){n=this.ic.createNetwork();t.add(n);ktt(this,n,i);n=!0;break}return t.sort(function(n,t){return null===n||null===t||n===t?0:t.vertexes.count-n.vertexes.count}),t};ei.prototype.findAllParts=function(){for(var t=new it(s),n=this.vertexes.k;n.next();)t.add(n.value.Jc);for(n=this.edges.k;n.next();)t.add(n.value.link);return t};t.ka("LayoutVertex",vt);vt.prototype.clear=function(){this.yd=null;this.lf=new b(rr);this.Ze=new b(rr)};vt.prototype.toString=function(){return"LayoutVertex#"+t.ud(this)+(null!==this.Jc?"("+this.Jc.toString()+")":"")};t.g(vt,"node",vt.prototype.Jc);t.defineProperty(vt,{Jc:"node"},function(){return this.yd},function(n){if(this.yd!==n){r&&null!==n&&t.l(n,y,vt,"node");this.yd=n;n.xf();var i=n.pa,u=i.x,f=i.y,e=i.width,i=i.height;if(isNaN(u)&&(u=0),isNaN(f)&&(f=0),this.V.p(u,f,e,i),!(n instanceof g)&&(n=n.Zb.wb(si),n.P())){this.Q.p(n.x-u,n.y-f);return}this.Q.p(e/2,i/2)}});t.g(vt,"bounds",vt.prototype.Tb);t.defineProperty(vt,{Tb:"bounds"},function(){return this.V},function(n){this.V.O(n)||(r&&t.l(n,p,vt,"bounds"),this.V.assign(n))});t.g(vt,"focus",vt.prototype.focus);t.defineProperty(vt,{focus:"focus"},function(){return this.Q},function(n){this.Q.O(n)||(r&&t.l(n,h,vt,"focus"),this.Q.assign(n))});t.g(vt,"centerX",vt.prototype.Ia);t.defineProperty(vt,{Ia:"centerX"},function(){return this.V.x+this.Q.x},function(n){var i=this.V;i.x+this.Q.x!==n&&(r&&t.q(n,vt,"centerX"),i.Ra(),i.x=n-this.Q.x,i.freeze())});t.g(vt,"centerY",vt.prototype.Ua);t.defineProperty(vt,{Ua:"centerY"},function(){return this.V.y+this.Q.y},function(n){var i=this.V;i.y+this.Q.y!==n&&(r&&t.q(n,vt,"centerY"),i.Ra(),i.y=n-this.Q.y,i.freeze())});t.g(vt,"focusX",vt.prototype.rp);t.defineProperty(vt,{rp:"focusX"},function(){return this.Q.x},function(n){var t=this.Q;t.x!==n&&(t.Ra(),t.x=n,t.freeze())});t.g(vt,"focusY",vt.prototype.sp);t.defineProperty(vt,{sp:"focusY"},function(){return this.Q.y},function(n){var t=this.Q;t.y!==n&&(t.Ra(),t.y=n,t.freeze())});t.g(vt,"x",vt.prototype.x);t.defineProperty(vt,{x:"x"},function(){return this.V.x},function(n){var t=this.V;t.x!==n&&(t.Ra(),t.x=n,t.freeze())});t.g(vt,"y",vt.prototype.y);t.defineProperty(vt,{y:"y"},function(){return this.V.y},function(n){var t=this.V;t.y!==n&&(t.Ra(),t.y=n,t.freeze())});t.g(vt,"width",vt.prototype.width);t.defineProperty(vt,{width:"width"},function(){return this.V.width},function(n){var t=this.V;t.width!==n&&(t.Ra(),t.width=n,t.freeze())});t.g(vt,"height",vt.prototype.height);t.defineProperty(vt,{height:"height"},function(){return this.V.height},function(n){var t=this.V;t.height!==n&&(t.Ra(),t.height=n,t.freeze())});vt.prototype.commit=function(){var n=this.Jc,t,i,r;if(null!==n){if(t=this.Tb,!(n instanceof g)&&(i=n.pa,r=n.Zb.wb(si),i.P()&&r.P())){n.moveTo(t.x+this.rp-(r.x-i.x),t.y+this.sp-(r.y-i.y));return}n.moveTo(t.x,t.y)}};vt.prototype.addSourceEdge=vt.prototype.gE=function(n){null!==n&&(r&&t.l(n,rr,vt,"addSourceEdge:edge"),this.lf.contains(n)||this.lf.add(n))};vt.prototype.deleteSourceEdge=vt.prototype.OE=function(n){null!==n&&(r&&t.l(n,rr,vt,"deleteSourceEdge:edge"),this.lf.remove(n))};vt.prototype.addDestinationEdge=vt.prototype.eE=function(n){null!==n&&(r&&t.l(n,rr,vt,"addDestinationEdge:edge"),this.Ze.contains(n)||this.Ze.add(n))};vt.prototype.deleteDestinationEdge=vt.prototype.NE=function(n){null!==n&&(r&&t.l(n,rr,vt,"deleteDestinationEdge:edge"),this.Ze.remove(n))};t.A(vt,{nK:"sourceVertexes"},function(){for(var t,n=new it(vt),i=this.xc;i.next();)t=i.value.fromVertex,null===t||n.contains(t)||n.add(t);return n.k});t.A(vt,{NI:"destinationVertexes"},function(){for(var t,n=new it(vt),i=this.nc;i.next();)t=i.value.toVertex,null===t||n.contains(t)||n.add(t);return n.k});t.A(vt,{vertexes:"vertexes"},function(){for(var n,t=new it(vt),i=this.xc;i.next();)n=i.value,n=n.fromVertex,null===n||t.contains(n)||t.add(n);for(i=this.nc;i.next();)n=i.value,n=n.toVertex,null===n||t.contains(n)||t.add(n);return t.k});t.A(vt,{xc:"sourceEdges"},function(){return this.lf.k});t.A(vt,{nc:"destinationEdges"},function(){return this.Ze.k});t.A(vt,{edges:"edges"},function(){for(var i,t=new b(rr),n=this.xc;n.next();)i=n.value,t.add(i);for(n=this.nc;n.next();)i=n.value,t.add(i);return t.k});t.A(vt,{bJ:"edgesCount"},function(){return this.lf.count+this.Ze.count});vt.standardComparer=dtt=function(n,i){r&&t.l(n,vt,vt,"standardComparer:m");r&&t.l(i,vt,vt,"standardComparer:n");var f=n.yd,u=i.yd;return f?u?(f=f.text,u=u.text,f<u?-1:f>u?1:0):1:null!==u?-1:0};vt.smartComparer=function(n,i){var e,f,u,s,o;if(r&&t.l(n,vt,vt,"smartComparer:m"),r&&t.l(i,vt,vt,"smartComparer:n"),null!==n){if(null!==i){if(e=n.yd,f=i.yd,null!==e){if(null!==f){for(e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),f=f.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),u=0;u<e.length;u++)if(""!==f[u]&&void 0!==f[u])if(s=parseFloat(e[u]),o=parseFloat(f[u]),isNaN(s)){if(!isNaN(o))return 1;if(0!==e[u].localeCompare(f[u]))return e[u].localeCompare(f[u])}else{if(isNaN(o))return-1;if(0!=s-o)return s-o}else if(""!==e[u])return 1;return""!==f[u]&&void 0!==f[u]?-1:0}return 1}return null!==f?-1:0}return 1}return null!==i?-1:0};t.ka("LayoutEdge",rr);rr.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=null};rr.prototype.toString=function(){return"LayoutEdge#"+t.ud(this)+(null!==this.link?"("+this.link.toString()+")":"")};rr.prototype.Cx=function(){var n=this.fromVertex;this.fromVertex=this.toVertex;this.toVertex=n};rr.prototype.commit=function(){};rr.prototype.getOtherVertex=rr.prototype.gJ=function(n){return r&&t.l(n,vt,rr,"getOtherVertex:v"),this.toVertex===n?this.fromVertex:this.fromVertex===n?this.toVertex:null};t.ka("GridLayout",ui);t.Qa(ui,ti);ui.prototype.cloneProtected=function(n){ti.prototype.cloneProtected.call(this,n);n.Xs=this.Xs;n.Ws=this.Ws;n.Dj.assign(this.Dj);n.Zh.assign(this.Zh);n.Ae=this.Ae;n.hd=this.hd;n.Yh=this.Yh;n.Gh=this.Gh};ui.prototype.doLayout=function(n){var et,i,l,ft,b,ht,u,k,o,a,at;for(n||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),et=this.h,null===et&&null===this.group&&t.m("The diagram for this layout is not set."),this.Nd=this.initialOrigin(this.Nd),i=new it(s),n===et?(fc(this,i,n.vh,!0,null,!0,!0,!0),fc(this,i,n.links,!0,null,!0,!0,!0),fc(this,i,n.vj,!0,null,!0,!0,!0)):n===this.group?fc(this,i,n.Vc,!1,null,!0,!0,!0):i.Ue(n.k),n=i.copy().k;n.next();)if(l=n.value,l instanceof c&&(null!==l.ca||null!==l.fa))i.remove(l);else if(l.xf(),l instanceof g)for(l=l.Vc;l.next();)i.remove(l.value);if(i=i.Pe(),0!==i.length){switch(this.sorting){case sb:i.reverse();break;case ey:i.sort(this.comparer);break;case hb:i.sort(this.comparer);i.reverse()}ft=this.pH;isNaN(ft)&&(ft=0);b=this.PB;b=isNaN(b)?Math.max(et.Ab.width-et.padding.left-et.padding.right,0):Math.max(this.PB,0);0>=ft&&0>=b&&(ft=1);n=this.spacing.width;isFinite(n)||(n=0);l=this.spacing.height;isFinite(l)||(l=0);et.yc("Layout");ht=[];switch(this.alignment){case eb:var ot=n,st=l,k=Math.max(this.ml.width,1);if(!isFinite(k))for(u=k=0;u<i.length;u++)var rt=i[u],f=rt.Ha,k=Math.max(k,f.width);if(k=Math.max(k+ot,1),o=Math.max(this.ml.height,1),!isFinite(o))for(u=o=0;u<i.length;u++)rt=i[u],f=rt.Ha,o=Math.max(o,f.height);for(var o=Math.max(o+st,1),y=this.We,tt=this.Nd.x,r=tt,ut=this.Nd.y,w=0,d=0,u=0;u<i.length;u++){var rt=i[u],f=rt.Ha,nt=Math.ceil((f.width+ot)/k)*k,lt=Math.ceil((f.height+st)/o)*o,v;switch(y){case ts:v=Math.abs(r-f.width);break;default:v=r+f.width}(0<ft&&w>ft-1||0<b&&0<w&&v>b)&&(ht.push(new p(0,ut,b,d+st)),w=0,r=tt,ut+=d,d=0);d=Math.max(d,lt);switch(y){case ts:f=-f.width;break;default:f=0}rt.moveTo(r+f,ut);switch(y){case ts:r-=nt;break;default:r+=nt}w++}ht.push(new p(0,ut,b,d+st));break;case fy:for(ot=n,st=l,k=Math.max(this.ml.width,1),u=w=f=0,rt=t.N(),o=0;o<i.length;o++)y=i[o],tt=y.Ha,r=fa(y,y.Zb,y.gf,rt),f=Math.max(f,r.x),w=Math.max(w,tt.width-r.x),u=Math.max(u,r.y);ut=this.We;switch(ut){case ts:f+=ot;break;default:w+=ot}var k=isFinite(k)?Math.max(k+ot,1):Math.max(f+w,1),e=w=this.Nd.x,d=this.Nd.y,nt=0;b>=f&&(b-=f);f=0;lt=Math.max(this.ml.height,1);v=u=0;for(var ct=!0,vt=t.N(),o=0;o<i.length;o++){if(y=i[o],tt=y.Ha,r=fa(y,y.Zb,y.gf,rt),0<nt)switch(ut){case ts:e=Math.floor((e-w-(tt.width-r.x))/k)*k+w;break;default:e=Math.ceil((e-w+r.x)/k)*k+w}else switch(ut){case ts:f=e+r.x+tt.width;break;default:f=e-r.x}switch(ut){case ts:a=-(e+r.x)+f;break;default:a=e+tt.width-r.x-f}if(0<ft&&nt>ft-1||0<b&&0<nt&&a>b){for(ht.push(new p(0,d,b,(ct?v:v+u)+st)),e=0;e<nt&&o!==nt;e++)a=i[o-nt+e],at=fa(a,a.Zb,a.gf,vt),a.moveTo(a.position.x,a.position.y+u-at.y);v+=st;d=ct?d+v:d+(v+u);nt=v=u=0;e=w;ct=!1}u=Math.max(u,r.y);v=Math.max(v,tt.height-r.y);isFinite(lt)&&(v=Math.max(v,Math.max(tt.height,lt)-r.y));ct?y.moveTo(e-r.x,d-r.y):y.moveTo(e-r.x,d);switch(ut){case ts:e-=r.x+ot;break;default:e+=tt.width-r.x+ot}nt++}for(ht.push(new p(0,d,b,(ct?v:v+u)+st)),e=0;e<nt&&o!==nt;e++)a=i[o-nt+e],at=fa(a,a.Zb,a.gf,rt),a.moveTo(a.position.x,a.position.y+u-at.y);t.B(rt);t.B(vt)}this.commitLayers(ht,new h(-n/2,-l/2));et.Ie("Layout");this.ff=!0}};ui.prototype.commitLayers=function(){};t.g(ui,"wrappingWidth",ui.prototype.PB);t.defineProperty(ui,{PB:"wrappingWidth"},function(){return this.Xs},function(n){this.Xs!==n&&(t.i(n,"number",ui,"wrappingWidth"),0<n||isNaN(n))&&(this.Xs=n,this.Gt=isNaN(n),this.M())});t.g(ui,"wrappingColumn",ui.prototype.pH);t.defineProperty(ui,{pH:"wrappingColumn"},function(){return this.Ws},function(n){this.Ws!==n&&(t.i(n,"number",ui,"wrappingColumn"),0<n||isNaN(n))&&(this.Ws=n,this.M())});t.g(ui,"cellSize",ui.prototype.ml);t.defineProperty(ui,{ml:"cellSize"},function(){return this.Dj},function(n){t.l(n,st,ui,"cellSize");this.Dj.O(n)||(this.Dj.assign(n),this.M())});t.g(ui,"spacing",ui.prototype.spacing);t.defineProperty(ui,{spacing:"spacing"},function(){return this.Zh},function(n){t.l(n,st,ui,"spacing");this.Zh.O(n)||(this.Zh.assign(n),this.M())});t.g(ui,"alignment",ui.prototype.alignment);t.defineProperty(ui,{alignment:"alignment"},function(){return this.Ae},function(n){this.Ae!==n&&(t.Fa(n,ui,ui,"alignment"),n===fy||n===eb)&&(this.Ae=n,this.M())});t.g(ui,"arrangement",ui.prototype.We);t.defineProperty(ui,{We:"arrangement"},function(){return this.hd},function(n){this.hd!==n&&(t.Fa(n,ui,ui,"arrangement"),n===ob||n===ts)&&(this.hd=n,this.M())});t.g(ui,"sorting",ui.prototype.sorting);t.defineProperty(ui,{sorting:"sorting"},function(){return this.Yh},function(n){this.Yh!==n&&(t.Fa(n,ui,ui,"sorting"),n===gtt||n===sb||n===ey||n===hb)&&(this.Yh=n,this.M())});t.g(ui,"comparer",ui.prototype.comparer);t.defineProperty(ui,{comparer:"comparer"},function(){return this.Gh},function(n){this.Gh!==n&&(t.i(n,"function",ui,"comparer"),this.Gh=n,this.M())});ui.standardComparer=tct=function(n,i){r&&t.l(n,s,ui,"standardComparer:a");r&&t.l(i,s,ui,"standardComparer:b");var u=n.text,f=i.text;return u<f?-1:u>f?1:0};ui.smartComparer=function(n,i){var e,f,u,h,o;if(r&&t.l(n,s,ui,"standardComparer:a"),r&&t.l(i,s,ui,"standardComparer:b"),null!==n){if(null!==i){for(e=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),f=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),u=0;u<e.length;u++)if(""!==f[u]&&void 0!==f[u])if(h=parseFloat(e[u]),o=parseFloat(f[u]),isNaN(h)){if(!isNaN(o))return 1;if(0!==e[u].localeCompare(f[u]))return e[u].localeCompare(f[u])}else{if(isNaN(o))return-1;if(0!=h-o)return h-o}else if(""!==e[u])return 1;return""!==f[u]&&void 0!==f[u]?-1:0}return 1}return null!==i?-1:0};ui.Position=eb=t.w(ui,"Position",0);ui.Location=fy=t.w(ui,"Location",1);ui.LeftToRight=ob=t.w(ui,"LeftToRight",2);ui.RightToLeft=ts=t.w(ui,"RightToLeft",3);ui.Forward=gtt=t.w(ui,"Forward",4);ui.Reverse=sb=t.w(ui,"Reverse",5);ui.Ascending=ey=t.w(ui,"Ascending",6);ui.Descending=hb=t.w(ui,"Descending",7);t.ka("CircularLayout",pt);t.Qa(pt,ti);pt.prototype.cloneProtected=function(n){ti.prototype.cloneProtected.call(this,n);n.es=this.es;n.Dq=this.Dq;n.Gs=this.Gs;n.Js=this.Js;n.hd=this.hd;n.ua=this.ua;n.Yh=this.Yh;n.Gh=this.Gh;n.Zh=this.Zh;n.Xr=this.Xr};pt.prototype.createNetwork=function(){var n=new cy;return il(n,this),n};pt.prototype.doLayout=function(n){var l,i,f,p,v,a,w;if(n||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(n)),n=this.network.vertexes,1>=n.count)1===n.count&&(n=n.gb(),n.Ia=0,n.Ua=0);else{i=new b(ho);i.Ue(n.k);n=new b(ho);l=new b(ho);i=this.sort(i);n=new b(ho);var l=new b(ho),e=this.Zy,k=this.EC,u=this.Hd,r=this.fo,s=this.$y,o=this.Xq,c=this.Ok,y=this.WD,p=this.zg,a=this.Ju,e=this.We,k=this.Rt,u=this.hG;if((!isFinite(u)||0>=u)&&(u=NaN),r=this.lE,(!isFinite(r)||0>=r)&&(r=1),s=this.yh,isFinite(s)||(s=0),o=this.vi,(!isFinite(o)||360<o||1>o)&&(o=360),c=this.spacing,isFinite(c)||(c=NaN),e===ve&&k===oc?e=re:e===ve&&k!==oc&&(k=oc,e=this.We),(this.direction===ec||this.direction===pa)&&this.sorting!==wa){for(f=0;!(f>=i.length);f+=2){if(n.add(i.wa(f)),f+1>=i.length)break;l.add(i.wa(f+1))}this.direction===ec?(this.We===ve&&n.reverse(),i=new b(ho),i.Ue(n),i.Ue(l)):(this.We===ve&&l.reverse(),i=new b(ho),i.Ue(l),i.Ue(n))}for(var h=i.length,d=y=0,f=0;f<i.length;f++)p=s+o*d*(this.direction===ru?1:-1)/h,v=i.wa(f).diameter,isNaN(v)&&(v=vh(i.wa(f),p)),360>o&&(0===f||f===i.length-1)&&(v/=2),y+=v,d++;if(isNaN(u)||e===ve){if(isNaN(c)&&(c=6),e!==re&&e!==ve){for(v=-Infinity,f=0;f<h;f++)a=i.wa(f),w=i.wa(f===h-1?0:f+1),isNaN(a.diameter)&&vh(a,0),isNaN(w.diameter)&&vh(w,0),v=Math.max(v,(a.diameter+w.diameter)/2);a=v+c;e===ws?(p=2*Math.PI/h,u=(v+c)/p):u=cb(this,a*(360<=o?h:h-1),r,s*Math.PI/180,o*Math.PI/180)}else u=cb(this,y+(360<=o?h:h-1)*(e!==ve?c:1.6*c),r,s*Math.PI/180,o*Math.PI/180);p=u*r}else if(p=u*r,d=tit(this,u,p,s*Math.PI/180,o*Math.PI/180),isNaN(c))(e===re||e===ve)&&(c=(d-y)/(360<=o?h:h-1));else if(e===re||e===ve)f=(d-y)/(360<=o?h:h-1),f<c?(u=cb(this,y+c*(360<=o?h:h-1),r,s*Math.PI/180,o*Math.PI/180),p=u*r):c=f;else{for(v=-Infinity,f=0;f<h;f++)a=i.wa(f),w=i.wa(f===h-1?0:f+1),isNaN(a.diameter)&&vh(a,0),isNaN(w.diameter)&&vh(w,0),v=Math.max(v,(a.diameter+w.diameter)/2);a=v+c;f=cb(this,a*(360<=o?h:h-1),r,s*Math.PI/180,o*Math.PI/180);f>u?(u=f,p=u*r):a=d/(360<=o?h:h-1)}if(this.Zy=e,this.EC=k,this.Hd=u,this.fo=r,this.$y=s,this.Xq=o,this.Ok=c,this.WD=y,this.zg=p,this.Ju=a,l=[i,n,l],i=l[0],n=l[1],l=l[2],e=this.Zy,k=this.Hd,r=this.$y,s=this.Xq,o=this.Ok,c=this.zg,y=this.Ju,this.direction!==ec&&this.direction!==pa||e!==ve)if(this.direction===ec||this.direction===pa){u=0;switch(e){case lh:u=180*lb(this,k,c,r,y)/Math.PI;break;case re:y=i=0;u=n.gb();null!==u&&(i=vh(u,Math.PI/2));u=l.gb();null!==u&&(y=vh(u,Math.PI/2));u=180*lb(this,k,c,r,o+(i+y)/2)/Math.PI;break;case ws:u=s/i.length}if(this.direction===ec){switch(e){case lh:hy(this,n,r,ah);break;case re:sy(this,n,r,ah);break;case ws:oy(this,n,s/2,r,ah)}switch(e){case lh:hy(this,l,r+u,ru);break;case re:sy(this,l,r+u,ru);break;case ws:oy(this,l,s/2,r+u,ru)}}else{switch(e){case lh:hy(this,l,r,ah);break;case re:sy(this,l,r,ah);break;case ws:oy(this,l,s/2,r,ah)}switch(e){case lh:hy(this,n,r+u,ru);break;case re:sy(this,n,r+u,ru);break;case ws:oy(this,n,s/2,r+u,ru)}}}else switch(e){case lh:hy(this,i,r,this.direction);break;case re:sy(this,i,r,this.direction);break;case ws:oy(this,i,s,r,this.direction);break;case ve:ict(this,i,s,r,this.direction)}else ict(this,i,s,r-s/2,ru)}this.updateParts();this.network=null;this.ff=!0};nit.prototype.commit=function(n){var t,i;if(null!==this.In&&null!==this.nq)for(t=0;t<this.In.length;t++)i=n.wa(t),i.x=this.In[t],i.y=this.nq[t]};pt.prototype.commitLayout=function(){this.commitNodes();this.Ft&&this.commitLinks()};pt.prototype.commitNodes=function(){for(var t=this.RH,i=this.network.vertexes.k,n;i.next();)n=i.value,n.x+=t.x,n.y+=t.y,n.commit()};pt.prototype.commitLinks=function(){for(var n=this.network.edges.k;n.next();)n.value.commit()};pt.prototype.sort=function(n){var i,k,c,f,o,u,s,h,r,e,w,tt;switch(this.sorting){case ab:break;case vb:n.reverse();break;case yb:n.sort(this.comparer);break;case pb:n.sort(this.comparer);n.reverse();break;case wa:for(i=[],u=0;u<n.length;u++)i.push(0);for(k=new b(ho),u=0;u<n.length;u++){if(s=-1,c=-1,0===u)for(f=0;f<n.length;f++)o=n.wa(f).bJ,o>s&&(s=o,c=f);else for(f=0;f<n.length;f++)o=i[f],o>s&&(s=o,c=f);for(k.add(n.wa(c)),i[c]=-1,c=n.wa(c),s=c.xc,c=c.nc;s.next();)f=s.value,f=f.fromVertex,f=n.indexOf(f),0>f||0<=i[f]&&i[f]++;for(;c.next();)f=c.value,f=f.toVertex,f=n.indexOf(f),0>f||0<=i[f]&&i[f]++}for(n=[],i=0;i<k.length;i++){for(o=k.wa(i),n[i]=[],u=o.nc,s=o.xc;u.next();)h=u.value,r=k.indexOf(h.toVertex),r!==i&&0>n[i].indexOf(r)&&n[i].push(r);for(;s.next();)h=s.value,r=k.indexOf(h.fromVertex),r!==i&&0>n[i].indexOf(r)&&n[i].push(r)}for(o=[],i=0;i<n.length;i++)o[i]=0;for(var u=[],d=[],it=[],s=[],c=new b(ho),f=i=0;i<n.length;i++)if(e=n[i].length,1===e)s.push(i);else if(0===e)c.add(k.wa(i));else{if(0===f)u.push(i);else{for(var l=Infinity,rt=Infinity,ut=-1,ft=[],e=0;e<u.length;e++)0>n[u[e]].indexOf(u[e===u.length-1?0:e+1])&&ft.push(e===u.length-1?0:e+1);if(0===ft.length)for(e=0;e<u.length;e++)ft.push(e);for(e=0;e<ft.length;e++){w=ft[e];r=n[i];h=d;tt=it;for(var a=o,p=w,et=u,st=0,ot=0;ot<h.length;ot++){var y=a[h[ot]],v=a[tt[ot]],g=0,nt=0;if(y<v?(g=y,nt=v):(g=v,nt=y),g<p&&p<=nt)for(y=0;y<r.length;y++)v=r[y],0>et.indexOf(v)||g<a[v]&&a[v]<nt||g===a[v]||nt===a[v]||st++;else for(y=0;y<r.length;y++)v=r[y],0>et.indexOf(v)||g<a[v]&&a[v]<nt&&g!==a[v]&&nt!==a[v]&&st++}for(tt=st,h=a=0;h<n[i].length;h++)r=u.indexOf(n[i][h]),0<=r&&(r=Math.abs(w-(r>=w?r+1:r)),a+=r<u.length+1-r?r:u.length+1-r);for(h=0;h<d.length;h++)r=o[d[h]],p=o[it[h]],r>=w&&r++,p>=w&&p++,r>p&&(et=p,p=r,r=et),p-r<(u.length+2)/2==(r<w&&w<=p)&&a++;(tt<l||tt===l&&a<rt)&&(l=tt,rt=a,ut=w)}for(u.splice(ut,0,i),e=0;e<u.length;e++)o[u[e]]=e;for(e=0;e<n[i].length;e++)l=n[i][e],0<=u.indexOf(l)&&(d.push(i),it.push(l))}f++}for(d=!1,it=u.length;;){for(d=!0,o=0;o<s.length;o++)if(i=s[o],e=n[i][0],r=u.indexOf(e),0<=r){for(f=rt=0;f<n[e].length;f++)l=n[e][f],l=u.indexOf(l),0>l||l===r||(ut=l>r?l-r:r-l,rt+=l<r!=ut>it-ut?1:-1);u.splice(0>rt?r:r+1,0,i);s.splice(o,1);o--}else d=!1;if(d)break;else u.push(s[0]),s.splice(0,1)}for(i=0;i<u.length;i++)r=u[i],c.add(k.wa(r));return c;default:t.m("Invalid sorting type.")}return n};t.g(pt,"radius",pt.prototype.hG);t.defineProperty(pt,{hG:"radius"},function(){return this.es},function(n){this.es!==n&&(t.i(n,"number",pt,"radius"),0<n||isNaN(n))&&(this.es=n,this.M())});t.g(pt,"aspectRatio",pt.prototype.lE);t.defineProperty(pt,{lE:"aspectRatio"},function(){return this.Dq},function(n){this.Dq!==n&&(t.i(n,"number",pt,"aspectRatio"),0<n&&(this.Dq=n,this.M()))});t.g(pt,"startAngle",pt.prototype.yh);t.defineProperty(pt,{yh:"startAngle"},function(){return this.Gs},function(n){this.Gs!==n&&(t.i(n,"number",pt,"startAngle"),this.Gs=n,this.M())});t.g(pt,"sweepAngle",pt.prototype.vi);t.defineProperty(pt,{vi:"sweepAngle"},function(){return this.Js},function(n){this.Js!==n&&(t.i(n,"number",pt,"sweepAngle"),this.Js=0<n&&360>=n?n:360,this.M())});t.g(pt,"arrangement",pt.prototype.We);t.defineProperty(pt,{We:"arrangement"},function(){return this.hd},function(n){this.hd!==n&&(t.Fa(n,pt,pt,"arrangement"),n===ve||n===re||n===lh||n===ws)&&(this.hd=n,this.M())});t.g(pt,"direction",pt.prototype.direction);t.defineProperty(pt,{direction:"direction"},function(){return this.ua},function(n){this.ua!==n&&(t.Fa(n,pt,pt,"direction"),n===ru||n===ah||n===ec||n===pa)&&(this.ua=n,this.M())});t.g(pt,"sorting",pt.prototype.sorting);t.defineProperty(pt,{sorting:"sorting"},function(){return this.Yh},function(n){this.Yh!==n&&(t.Fa(n,pt,pt,"sorting"),n===ab||n===vb||n===yb||pb||n===wa)&&(this.Yh=n,this.M())});t.g(pt,"comparer",pt.prototype.comparer);t.defineProperty(pt,{comparer:"comparer"},function(){return this.Gh},function(n){this.Gh!==n&&(t.i(n,"function",pt,"comparer"),this.Gh=n,this.M())});t.g(pt,"spacing",pt.prototype.spacing);t.defineProperty(pt,{spacing:"spacing"},function(){return this.Zh},function(n){this.Zh!==n&&(t.i(n,"number",pt,"spacing"),this.Zh=n,this.M())});t.g(pt,"nodeDiameterFormula",pt.prototype.Rt);t.defineProperty(pt,{Rt:"nodeDiameterFormula"},function(){return this.Xr},function(n){this.Xr!==n&&(t.Fa(n,pt,pt,"nodeDiameterFormula"),n===wb||n===oc)&&(this.Xr=n,this.M())});t.A(pt,{SH:"actualXRadius"},function(){return this.Hd});t.A(pt,{TH:"actualYRadius"},function(){return this.zg});t.A(pt,{AK:"actualSpacing"},function(){return this.Ok});t.A(pt,{RH:"actualCenter"},function(){return isNaN(this.Nd.x)||isNaN(this.Nd.y)?new h(0,0):new h(this.Nd.x+this.SH,this.Nd.y+this.TH)});pt.ConstantSpacing=re=t.w(pt,"ConstantSpacing",0);pt.ConstantDistance=lh=t.w(pt,"ConstantDistance",1);pt.ConstantAngle=ws=t.w(pt,"ConstantAngle",2);pt.Packed=ve=t.w(pt,"Packed",3);pt.Clockwise=ru=t.w(pt,"Clockwise",4);pt.Counterclockwise=ah=t.w(pt,"Counterclockwise",5);pt.BidirectionalLeft=ec=t.w(pt,"BidirectionalLeft",6);pt.BidirectionalRight=pa=t.w(pt,"BidirectionalRight",7);pt.Forwards=ab=t.w(pt,"Forwards",8);pt.Reverse=vb=t.w(pt,"Reverse",9);pt.Ascending=yb=t.w(pt,"Ascending",10);pt.Descending=pb=t.w(pt,"Descending",11);pt.Optimized=wa=t.w(pt,"Optimized",12);pt.Pythagorean=wb=t.w(pt,"Pythagorean",13);pt.Circular=oc=t.w(pt,"Circular",14);t.ka("CircularNetwork",cy);t.Qa(cy,ei);cy.prototype.createVertex=function(){return new ho};cy.prototype.createEdge=function(){return new iit};t.ka("CircularVertex",ho);t.Qa(ho,vt);t.ka("CircularEdge",iit);t.Qa(iit,rr);t.ka("ForceDirectedLayout",yt);t.Qa(yt,ti);yt.prototype.cloneProtected=function(n){ti.prototype.cloneProtected.call(this,n);n.gg.assign(this.gg);n.Cq=this.Cq;n.Xh=this.Xh;n.Fh=this.Fh;n.Fo=this.Fo;n.Zq=this.Zq;n.Rh=this.Rh;n.Zn=this.Zn;n.Yn=this.Yn;n.Vn=this.Vn;n.Xn=this.Xn;n.Tq=this.Tq;n.Sq=this.Sq};yt.prototype.createNetwork=function(){var n=new sc;return il(n,this),n};yt.prototype.doLayout=function(n){var i,c,a,f,p,w;if(n||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(n)),n=this.tx,0<this.network.vertexes.count){for(this.network.Lw(),c=this.network.vertexes.k;c.next();)i=c.value,i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i);for(c=this.network.edges.k;c.next();)i=c.value,i.stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.$z(),this.wr=0,this.needsClusterLayout()){for(c=this.network,a=c.qK().k;a.next();){for(f=a.value,this.network=f,i=this.network.vertexes.k;i.next();){for(var f=i.value,y=0,e=f.vertexes;e.next();)y++;f.$f=y;f.tk=1;f.Xm=null;f.wh=null}oct(this,0,n)}this.network=c;a.reset();r&&t.l(c,sc,yt,"arrangeConnectedGraphs:singletons");for(var i=this.sw,v=a.count,o=!0,y=f=0,e=t.Hb(),u=0;u<v+c.vertexes.count+2;u++)e[u]=null;for(v=0,a.reset(),u=t.Jf();a.next();)if(p=a.value,this.vf(p,u),o)o=!1,f=u.x+u.width/2,y=u.y+u.height/2,e[0]=new h(u.x+u.width+i.width,u.y),e[1]=new h(u.x,u.y+u.height+i.height),v=2;else{var l=sct(e,v,f,y,u.width,u.height,i),s=e[l],b=new h(s.x+u.width+i.width,s.y),k=new h(s.x,s.y+u.height+i.height);for(l+1<v&&e.splice(l+1,0,null),e[l]=b,e[l+1]=k,v++,l=s.x-u.x,s=s.y-u.y,p=p.vertexes.k;p.next();)w=p.value,w.Ia+=l,w.Ua+=s}for(t.oc(u),p=c.vertexes.k;p.next();)w=p.value,o=w.V,2>v?(f=o.x+o.width/2,y=o.y+o.height/2,e[0]=new h(o.x+o.width+i.width,o.y),e[1]=new h(o.x,o.y+o.height+i.height),v=2):(l=sct(e,v,f,y,o.width,o.height,i),s=e[l],b=new h(s.x+o.width+i.width,s.y),k=new h(s.x,s.y+o.height+i.height),l+1<v&&e.splice(l+1,0,null),e[l]=b,e[l+1]=k,v++,w.Ia=s.x+w.width/2,w.Ua=s.y+w.height/2);for(t.Ca(e),a.reset();a.next();){for(f=a.value,y=f.vertexes.k;y.next();)i=y.value,c.kl(i);for(f=f.edges.k;f.next();)i=f.value,c.Wo(i)}}cct(this,n);this.updateParts()}this.Fo=n;this.network=null;this.ff=!0};yt.prototype.needsClusterLayout=function(){var r;if(3>this.network.vertexes.count)return!1;var t=0,i=0,n=this.network.vertexes.k;for(n.next(),r=n.value.V;n.next();){if(n.value.V.Xf(r)&&(t++,1<t))return!0;if(10<i)break;i++}return!1};yt.prototype.vf=function(n,t){for(var u,i=!0,r=n.vertexes.k;r.next();)u=r.value,i?(i=!1,t.set(u.V)):t.yj(u.V);return t};yt.prototype.$z=function(){if(this.comments)for(var n=this.network.vertexes.k;n.next();)this.addComments(n.value)};yt.prototype.addComments=function(n){var u=n.Jc,r,t,i;if(null!==u)for(u=u.aF();u.next();)if(t=u.value,"Comment"===t.cd&&t.Wa()){for(r=this.network.gn(t),null===r&&(r=this.network.Xo(t)),r.charge=this.IE,t=null,i=r.nc;i.next();)if(i.value.toVertex===n){t=i.value;break}if(null===t)for(i=r.xc;i.next();)if(i.value.fromVertex===n){t=i.value;break}null===t&&(t=this.network.sn(n,r,null));t.length=this.JE}};yt.prototype.moveFixedVertex=function(){};yt.prototype.commitLayout=function(){this.xB();this.commitNodes();this.Ft&&this.commitLinks()};yt.prototype.xB=function(){var t,n;if(this.Jl)for(t=this.network.edges.k;t.next();)n=t.value.link,null!==n&&(n.vb=pr,n.zb=pr)};yt.prototype.commitNodes=function(){var u=0,i=0,n,f,r;for(this.jE&&(n=t.Jf(),this.vf(this.network,n),i=this.Nd,u=i.x-n.x,i=i.y-n.y,t.oc(n)),n=t.Jf(),f=this.network.vertexes.k;f.next();)r=f.value,(0!==u||0!==i)&&(n.assign(r.V),n.x+=u,n.y+=i,r.Tb=n),r.commit();t.oc(n)};yt.prototype.commitLinks=function(){for(var n=this.network.edges.k;n.next();)n.value.commit()};yt.prototype.springStiffness=function(n){return n=n.stiffness,isNaN(n)?this.Zn:n};yt.prototype.springLength=function(n){return n=n.length,isNaN(n)?this.Yn:n};yt.prototype.electricalCharge=function(n){return n=n.charge,isNaN(n)?this.Vn:n};yt.prototype.electricalFieldX=function(){return 0};yt.prototype.electricalFieldY=function(){return 0};yt.prototype.gravitationalMass=function(n){return n=n.mass,isNaN(n)?this.Xn:n};yt.prototype.gravitationalFieldX=function(){return 0};yt.prototype.gravitationalFieldY=function(){return 0};yt.prototype.isFixed=function(n){return n.isFixed};t.A(yt,{CK:"currentIteration"},function(){return this.wr});t.g(yt,"arrangementSpacing",yt.prototype.sw);t.defineProperty(yt,{sw:"arrangementSpacing"},function(){return this.gg},function(n){t.l(n,st,yt,"arrangementSpacing");this.gg.O(n)||(this.gg.assign(n),this.M())});t.g(yt,"arrangesToOrigin",yt.prototype.jE);t.defineProperty(yt,{jE:"arrangesToOrigin"},function(){return this.Cq},function(n){this.Cq!==n&&(t.i(n,"boolean",yt,"arrangesToOrigin"),this.Cq=n,this.M())});t.g(yt,"setsPortSpots",yt.prototype.Jl);t.defineProperty(yt,{Jl:"setsPortSpots"},function(){return this.Xh},function(n){this.Xh!==n&&(t.i(n,"boolean",yt,"setsPortSpots"),this.Xh=n,this.M())});t.g(yt,"comments",yt.prototype.comments);t.defineProperty(yt,{comments:"comments"},function(){return this.Fh},function(n){this.Fh!==n&&(t.i(n,"boolean",yt,"comments"),this.Fh=n,this.M())});t.g(yt,"maxIterations",yt.prototype.tx);t.defineProperty(yt,{tx:"maxIterations"},function(){return this.Fo},function(n){this.Fo!==n&&(t.i(n,"number",yt,"maxIterations"),0<=n&&(this.Fo=n,this.M()))});t.g(yt,"epsilonDistance",yt.prototype.sA);t.defineProperty(yt,{sA:"epsilonDistance"},function(){return this.Zq},function(n){this.Zq!==n&&(t.i(n,"number",yt,"epsilonDistance"),0<n&&(this.Zq=n,this.M()))});t.g(yt,"infinityDistance",yt.prototype.oJ);t.defineProperty(yt,{oJ:"infinityDistance"},function(){return this.Rh},function(n){this.Rh!==n&&(t.i(n,"number",yt,"infinityDistance"),1<n&&(this.Rh=n,this.M()))});t.g(yt,"defaultSpringStiffness",yt.prototype.MI);t.defineProperty(yt,{MI:"defaultSpringStiffness"},function(){return this.Zn},function(n){this.Zn!==n&&(t.i(n,"number",yt,"defaultSpringStiffness"),this.Zn=n,this.M())});t.g(yt,"defaultSpringLength",yt.prototype.LI);t.defineProperty(yt,{LI:"defaultSpringLength"},function(){return this.Yn},function(n){this.Yn!==n&&(t.i(n,"number",yt,"defaultSpringLength"),this.Yn=n,this.M())});t.g(yt,"defaultElectricalCharge",yt.prototype.FI);t.defineProperty(yt,{FI:"defaultElectricalCharge"},function(){return this.Vn},function(n){this.Vn!==n&&(t.i(n,"number",yt,"defaultElectricalCharge"),this.Vn=n,this.M())});t.g(yt,"defaultGravitationalMass",yt.prototype.GI);t.defineProperty(yt,{GI:"defaultGravitationalMass"},function(){return this.Xn},function(n){this.Xn!==n&&(t.i(n,"number",yt,"defaultGravitationalMass"),this.Xn=n,this.M())});t.g(yt,"defaultCommentSpringLength",yt.prototype.JE);t.defineProperty(yt,{JE:"defaultCommentSpringLength"},function(){return this.Tq},function(n){this.Tq!==n&&(t.i(n,"number",yt,"defaultCommentSpringLength"),this.Tq=n,this.M())});t.g(yt,"defaultCommentElectricalCharge",yt.prototype.IE);t.defineProperty(yt,{IE:"defaultCommentElectricalCharge"},function(){return this.Sq},function(n){this.Sq!==n&&(t.i(n,"number",yt,"defaultCommentElectricalCharge"),this.Sq=n,this.M())});t.ka("ForceDirectedNetwork",sc);t.Qa(sc,ei);sc.prototype.createVertex=function(){return new is};sc.prototype.createEdge=function(){return new rit};t.ka("ForceDirectedVertex",is);t.Qa(is,vt);t.ka("ForceDirectedEdge",rit);t.Qa(rit,rr);t.ka("LayeredDigraphLayout",nt);t.Qa(nt,ti);nt.prototype.cloneProtected=function(n){ti.prototype.cloneProtected.call(this,n);n.om=this.om;n.Gd=this.Gd;n.ua=this.ua;n.Un=this.Un;n.Do=this.Do;n.ro=this.ro;n.lm=this.lm;n.Mn=this.Mn;n.Ti=this.Ti;n.Xh=this.Xh;n.Mj=this.Mj};nt.prototype.createNetwork=function(){var n=new ka;return il(n,this),n};nt.prototype.doLayout=function(n){var i,u,e,v,a,y,h,o,l,b,k,p,f,w,d;for(n||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(n)),this.Nd=this.initialOrigin(this.Nd),this.rv=-1,this.Nf=this.Nr=0,this.Vr=this.Av=this.tm=null,n=0;n<this.ih.length;n++)this.ih[n]=null;if(0<this.network.vertexes.count){for(this.network.Lw(),n=this.network.edges.k;n.next();)n.value.rev=!1;switch(this.Un){default:case hit:for(i=0,u=this.network.vertexes.count-1,n=[],n.length=u+1,e=this.network.vertexes.k;e.next();)e.value.valid=!0;for(;null!==cvt(this.network);){for(e=vct(this.network);null!==e;)n[u]=e,u--,e.valid=!1,e=vct(this.network);for(e=yct(this.network);null!==e;)n[i]=e,i++,e.valid=!1,e=yct(this.network);for(var e=null,r=0,l=this.network.vertexes.k;l.next();)if(v=l.value,v.valid){for(a=0,y=v.nc;y.next();)y.value.toVertex.valid&&a++;for(y=0,h=v.xc;h.next();)h.value.fromVertex.valid&&y++;(null===e||r<a-y)&&(e=v,r=a-y)}null!==e&&(n[i]=e,i++,e.valid=!1)}for(i=0;i<this.network.vertexes.count;i++)n[i].index=i;for(n=this.network.edges.k;n.next();)i=n.value,i.fromVertex.index>i.toVertex.index&&(this.network.Cx(i),i.rev=!0);break;case gb:for(i=this.network.vertexes.k;i.next();)i.value.lp=-1,i.value.finish=-1;for(n=this.network.edges.k;n.next();)n.value.forest=!1;for(this.Ur=0,i.reset();i.next();)0===i.value.xc.count&&oit(this,i.value);for(i.reset();i.next();)-1===i.value.lp&&oit(this,i.value);for(n.reset();n.next();)i=n.value,i.forest||(u=i.fromVertex,e=u.finish,r=i.toVertex,l=r.finish,r.lp<u.lp&&e<l&&(this.network.Cx(i),i.rev=!0))}for(n=this.network.vertexes.k;n.next();)i=n.value,i.layer=-1;for(this.qb=-1,this.assignLayers(),n.reset();n.next();)this.qb=Math.max(this.qb,n.value.layer);for(u=this.network.edges.k,i=[];u.next();)n=u.value,n.valid=!1,i.push(n);for(u=0;u<i.length;u++)if(n=i[u],!n.valid&&(null!==n.fromVertex.yd&&null!==n.toVertex.yd||n.fromVertex.layer!==n.toVertex.layer)){if(l=a=v=y=0,r=n.fromVertex,e=n.toVertex,null!==n.link){if(a=n.link,null===a)continue;if(o=r.yd,l=e.yd,null===o||null===l)continue;var c=a.ca,v=a.fa,f=a.sd,y=a.Vd;n.rev&&(a=c,h=f,c=v,f=y,v=a,y=h);var g=r.Q,a=n.toVertex.Q,s=n.rev?e.V:r.V,h=t.N();isNaN(s.x)?h.assign(g):fa(c,f,si,h);o!==c&&!isNaN(s.x)&&c.Wa()&&(o=r.V,isNaN(o.x)||(h.x+=s.x-o.x,h.y+=s.y-o.y));c=n.rev?r.V:e.V;o=t.N();isNaN(c.x)?o.assign(a):fa(v,y,si,o);l!==v&&!isNaN(c.x)&&v.Wa()&&(l=e.V,isNaN(l.x)||(o.x+=c.x-l.x,o.y+=c.y-l.y));90===this.ua||270===this.ua?(l=Math.round((h.x-g.x)/this.Gd),v=h.x,a=Math.round((o.x-a.x)/this.Gd),y=o.x):(l=Math.round((h.y-g.y)/this.Gd),v=h.y,a=Math.round((o.y-a.y)/this.Gd),y=o.y);t.B(h);t.B(o);n.portFromColOffset=l;n.portFromPos=v;n.portToColOffset=a;n.portToPos=y}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;if(h=r.layer,g=e.layer,o=n,c=0,s=o.link,null!==s&&(b=s.sd,k=s.Vd,null!==b&&null!==k&&(p=s.ca,f=s.fa,null!==p&&null!==f))){w=b.vb;d=k.zb;this.Jl||(s.vb.Tc()||(w=s.vb),s.zb.Tc()||(d=s.zb));(w.Tc()||w===pi)&&(w=db(this,!0));(d.Tc()||d===pi)&&(d=db(this,!1));var tt=s.pc,nt=s.getLinkPoint(p,b,w,!0,tt,f,k,t.N()),w=s.getLinkDirection(p,b,nt,w,!0,tt,f,k);t.B(nt);w===dct(this,o,!0)?c+=1:this.Jl&&null!==p&&1===p.ports.count&&o.rev&&(c+=1);nt=s.getLinkPoint(f,k,d,!1,tt,p,b,t.N());s=s.getLinkDirection(f,k,nt,d,!1,tt,p,b);t.B(nt);s===dct(this,o,!1)?c+=2:this.Jl&&null!==f&&1===f.ports.count&&o.rev&&(c+=2)}if(o=1===c||3===c?!0:!1,(c=2===c||3===c?!0:!1)&&(f=this.network.createVertex(),f.yd=null,f.Sm=1,f.layer=h,f.near=r,this.network.kl(f),r=this.network.sn(r,f,n.link),r.valid=!1,r.rev=n.rev,r.portFromColOffset=l,r.portToColOffset=0,r.portFromPos=v,r.portToPos=0,r=f),s=1,o&&s--,h-g>s&&0<h){for(n.valid=!1,f=this.network.createVertex(),f.yd=null,f.Sm=2,f.layer=h-1,this.network.kl(f),r=this.network.sn(r,f,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=c?0:l,r.portToColOffset=0,r.portFromPos=c?0:v,r.portToPos=0,r=f,h--;h-g>s&&0<h;)f=this.network.createVertex(),f.yd=null,f.Sm=3,f.layer=h-1,this.network.kl(f),r=this.network.sn(r,f,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=f,h--;r=this.network.sn(f,e,n.link);r.valid=!o;o&&(f.near=e);r.rev=n.rev;r.portFromColOffset=0;r.portToColOffset=a;r.portFromPos=0;r.portToPos=y}else n.valid=!0}for(i=this.Xd=[],u=0;u<=this.qb;u++)i[u]=0;for(n=this.network.vertexes.k;n.next();)n.value.index=-1;for(this.initializeIndices(),this.rv=-1,u=this.Nf=this.Nr=0;u<=this.qb;u++)i[u]>i[this.Nf]&&(this.rv=i[u]-1,this.Nf=u),i[u]<i[this.Nr]&&(this.Nr=u);for(this.Vr=[],u=0;u<i.length;u++)this.Vr[u]=[];for(n.reset();n.next();)u=n.value,i=u.layer,this.Vr[i][u.index]=u;for(this.Mb=-1,n=0;n<=this.qb;n++){for(i=yh(this,n),u=0,e=this.Xd[n],r=0;r<e;r++)l=i[r],u+=this.nodeMinColumnSpace(l,!0),l.column=u,u+=1,u+=this.nodeMinColumnSpace(l,!1);this.Mb=Math.max(this.Mb,u-1);ph(this,n,i)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.network=null;this.ff=!0};nt.prototype.linkMinLength=function(n){var i=n.toVertex,t=0;for(n=n.fromVertex.nc;n.next();)n.value.toVertex===i&&t++;return 1<t?2:1};nt.prototype.nodeMinLayerSpace=function(n,t){return null===n.yd?0:90===this.ua||270===this.ua?t?n.Q.y+10:n.V.height-n.Q.y+10:t?n.Q.x+10:n.V.width-n.Q.x+10};nt.prototype.nodeMinColumnSpace=function(n,t){if(null===n.yd)return 0;var i=t?n.$A:n.ZA;return void 0!==i?i:(i=this.ua,90===i||270===i?t?n.$A=n.Q.x/this.Gd+1|0:n.ZA=(n.V.width-n.Q.x)/this.Gd+1|0:t?n.$A=n.Q.y/this.Gd+1|0:n.ZA=(n.V.height-n.Q.y)/this.Gd+1|0)};nt.prototype.countCrossings=function(){for(var u=0,f,i,t,r,n=0;n<=this.qb;n++)for(f=lct(this,n,1),i=this.Xd[n],t=0;t<i;t++)for(r=t;r<i;r++)u+=f[t*i+r];return u};nt.prototype.normalize=function(){var i=Infinity,n,t;for(this.Mb=-1,n=this.network.vertexes.k;n.next();)t=n.value,i=Math.min(i,t.column-this.nodeMinColumnSpace(t,!0)),this.Mb=Math.max(this.Mb,t.column+this.nodeMinColumnSpace(t,!1));for(n.reset();n.next();)n.value.column-=i;this.Mb-=i};nt.prototype.assignLayers=function(){switch(this.Do){case cit:pct(this);break;case lit:for(var t,n=this.network.vertexes.k;n.next();)t=bct(this,n.value),this.qb=Math.max(t,this.qb);for(n.reset();n.next();)t=n.value,t.layer=this.qb-t.layer;break;default:case nk:for(pct(this),n=this.network.vertexes.k;n.next();)n.value.valid=!1;for(n.reset();n.next();)0===n.value.xc.count&&kct(this,n.value);for(t=Infinity,n.reset();n.next();)t=Math.min(t,n.value.layer);for(this.qb=-1,n.reset();n.next();)n.value.layer-=t,this.qb=Math.max(this.qb,n.value.layer)}};nt.prototype.initializeIndices=function(){var t,n,i;switch(this.ro){default:case vit:for(n=this.network.vertexes.k;n.next();)i=n.value,t=i.layer,i.index=this.Xd[t],this.Xd[t]++;break;case tk:for(n=this.network.vertexes.k,t=this.qb;0<=t;t--){for(;n.next();)n.value.layer===t&&-1===n.value.index&&gct(this,n.value);n.reset()}break;case ait:for(n=this.network.vertexes.k,t=0;t<=this.qb;t++){for(;n.next();)n.value.layer===t&&-1===n.value.index&&nlt(this,n.value);n.reset()}}};nt.prototype.reduceCrossings=function(){for(var r=this.countCrossings(),u=eu(this),n,i,t,e,o,f=0;f<this.lm;f++){for(n=0;n<=this.qb;n++)kb(this,n,1),ue(this,n,1);for(i=this.countCrossings(),i<r&&(r=i,u=eu(this)),n=this.qb;0<=n;n--)kb(this,n,-1),ue(this,n,-1);i=this.countCrossings();i<r&&(r=i,u=eu(this))}for(cf(this,u),f=0;f<this.lm;f++){for(n=0;n<=this.qb;n++)kb(this,n,0),ue(this,n,0);for(i=this.countCrossings(),i<r&&(r=i,u=eu(this)),n=this.qb;0<=n;n--)kb(this,n,0),ue(this,n,0);i=this.countCrossings();i<r&&(r=i,u=eu(this))}cf(this,u);switch(this.Mn){case yit:break;case pit:for(o=r+1;(n=this.countCrossings())<o;)for(o=n,f=this.qb;0<=f;f--)for(e=0;e<=f;e++){for(t=!0;t;)for(t=!1,n=f;n>=e;n--)t=ue(this,n,-1)||t;for(i=this.countCrossings(),i>=r?cf(this,u):(r=i,u=eu(this)),t=!0;t;)for(t=!1,n=f;n>=e;n--)t=ue(this,n,1)||t;for(i=this.countCrossings(),i>=r?cf(this,u):(r=i,u=eu(this)),t=!0;t;)for(t=!1,n=e;n<=f;n++)t=ue(this,n,1)||t;for(i>=r?cf(this,u):(r=i,u=eu(this)),t=!0;t;)for(t=!1,n=e;n<=f;n++)t=ue(this,n,-1)||t;for(i>=r?cf(this,u):(r=i,u=eu(this)),t=!0;t;)for(t=!1,n=f;n>=e;n--)t=ue(this,n,0)||t;for(i>=r?cf(this,u):(r=i,u=eu(this)),t=!0;t;)for(t=!1,n=e;n<=f;n++)t=ue(this,n,0)||t;i>=r?cf(this,u):(r=i,u=eu(this))}break;default:case ik:for(f=this.qb,e=0,o=r+1;(n=this.countCrossings())<o;){for(o=n,t=!0;t;)for(t=!1,n=f;n>=e;n--)t=ue(this,n,-1)||t;for(i=this.countCrossings(),i>=r?cf(this,u):(r=i,u=eu(this)),t=!0;t;)for(t=!1,n=f;n>=e;n--)t=ue(this,n,1)||t;for(i=this.countCrossings(),i>=r?cf(this,u):(r=i,u=eu(this)),t=!0;t;)for(t=!1,n=e;n<=f;n++)t=ue(this,n,1)||t;for(i>=r?cf(this,u):(r=i,u=eu(this)),t=!0;t;)for(t=!1,n=e;n<=f;n++)t=ue(this,n,-1)||t;for(i>=r?cf(this,u):(r=i,u=eu(this)),t=!0;t;)for(t=!1,n=f;n>=e;n--)t=ue(this,n,0)||t;for(i>=r?cf(this,u):(r=i,u=eu(this)),t=!0;t;)for(t=!1,n=e;n<=f;n++)t=ue(this,n,0)||t;i>=r?cf(this,u):(r=i,u=eu(this))}}cf(this,u)};nt.prototype.straightenAndPack=function(){var n,t,f=0!=(this.Ti&ult),r,i,u;if(n=this.Ti===bit,1e3<this.network.edges.count&&!n&&(f=!1),f){for(t=[],n=0;n<=this.qb;n++)t[n]=0;for(r=this.network.vertexes.k;r.next();)i=r.value,n=i.layer,u=i.column,i=this.nodeMinColumnSpace(i,!1),t[n]=Math.max(t[n],u+i);for(r.reset();r.next();)i=r.value,n=i.layer,u=i.column,i.column=(8*(this.Mb-t[n])>>1)+8*u;this.Mb*=8}if(0!=(this.Ti&wit))for(t=!0;t;){for(t=!1,n=this.Nf+1;n<=this.qb;n++)t=ba(this,n,1)||t;for(n=this.Nf-1;0<=n;n--)t=ba(this,n,-1)||t;t=ba(this,this.Nf,0)||t}if(0!=(this.Ti&flt)){for(n=this.Nf+1;n<=this.qb;n++)sit(this,n,1);for(n=this.Nf-1;0<=n;n--)sit(this,n,-1);sit(this,this.Nf,0)}if(f&&(tlt(this,-1),tlt(this,1)),0!=(this.Ti&wit))for(t=!0;t;){for(t=!1,t=ba(this,this.Nf,0)||t,n=this.Nf+1;n<=this.qb;n++)t=ba(this,n,0)||t;for(n=this.Nf-1;0<=n;n--)t=ba(this,n,0)||t}};nt.prototype.commitLayout=function(){if(this.Jl)for(var i=db(this,!0),r=db(this,!1),t=this.network.edges.k,n;t.next();)n=t.value.link,null!==n&&(n.vb=i,n.zb=r);this.commitNodes();this.gA();this.Ft&&this.commitLinks()};nt.prototype.commitNodes=function(){var r,n,i,t,u,f;for(this.dh=[],this.og=[],this.Mf=[],this.Sb=[],r=0;r<=this.qb;r++)this.dh[r]=0,this.og[r]=0,this.Mf[r]=0,this.Sb[r]=0;for(r=this.network.vertexes.k;r.next();)n=r.value,i=n.layer,this.dh[i]=Math.max(this.dh[i],this.nodeMinLayerSpace(n,!0)),this.og[i]=Math.max(this.og[i],this.nodeMinLayerSpace(n,!1));for(t=0,u=this.om,n=0;n<=this.qb;n++)i=u,0>=this.dh[n]+this.og[n]&&(i=0),0<n&&(t+=i/2),90===this.ua||0===this.ua?(t+=this.og[n],this.Mf[n]=t,t+=this.dh[n]):(t+=this.dh[n],this.Mf[n]=t,t+=this.og[n]),n<this.qb&&(t+=i/2),this.Sb[n]=t;for(u=t,t=this.Nd,n=0;n<=this.qb;n++)270===this.ua?this.Mf[n]=t.y+this.Mf[n]:90===this.ua?(this.Mf[n]=t.y+u-this.Mf[n],this.Sb[n]=u-this.Sb[n]):180===this.ua?this.Mf[n]=t.x+this.Mf[n]:(this.Mf[n]=t.x+u-this.Mf[n],this.Sb[n]=u-this.Sb[n]);for(r.reset();r.next();)n=r.value,i=n.layer,f=n.column|0,270===this.ua||90===this.ua?(u=t.x+this.Gd*f,i=this.Mf[i]):(u=this.Mf[i],i=t.y+this.Gd*f),n.Ia=u,n.Ua=i,n.commit()};nt.prototype.gA=function(){for(var r=0,i=this.om,t=0;t<=this.qb;t++)r+=this.dh[t],r+=this.og[t];for(var r=r+this.qb*i,i=[],t=this.Gd*this.Mb,n=this.JJ;0<=n;n--)270===this.ua?0===n?i.push(new p(0,0,t,Math.abs(this.Sb[0]))):i.push(new p(0,this.Sb[n-1],t,Math.abs(this.Sb[n-1]-this.Sb[n]))):90===this.ua?0===n?i.push(new p(0,this.Sb[0],t,Math.abs(this.Sb[0]-r))):i.push(new p(0,this.Sb[n],t,Math.abs(this.Sb[n-1]-this.Sb[n]))):180===this.ua?0===n?i.push(new p(0,0,Math.abs(this.Sb[0]),t)):i.push(new p(this.Sb[n-1],0,Math.abs(this.Sb[n-1]-this.Sb[n]),t)):0===n?i.push(new p(this.Sb[0],0,Math.abs(this.Sb[0]-r),t)):i.push(new p(this.Sb[n],0,Math.abs(this.Sb[n-1]-this.Sb[n]),t));this.commitLayers(i,u.Aj)};nt.prototype.commitLayers=function(){};nt.prototype.commitLinks=function(){for(var st,n,li,ai,rr,ur,lt,bi,ki,f,p,h,ht,u,iu,ru,ct,uu,ni,e,o,i,r,s,d,g,fr,er,ti,ii,vi,fu,di,pt,or,sr,ri,du,ui,nt,hr,wt,gi,cr,hu,cu,w,nr,bt,lr,ar,ei,rf,oi,tt,vr,kt,tr,yr,yu,pu,k,ir,dt=this.network.edges.k;dt.next();)n=dt.value.link,"undefined"!=typeof n&&null!==n&&(n.Kl(),n.gp(),n.ij());for(dt.reset();dt.next();)n=dt.value.link,"undefined"!=typeof n&&null!==n&&n.updateRoute();for(dt.reset();dt.next();)if(st=dt.value,n=st.link){n.Kl();var yi=n,hi=yi.ca,ci=yi.fa,gt=yi.sd,yt=yi.Vd;if(st.valid){if(n.Je===ae&&4===n.ra){if(st.rev)var uf=hi,hi=ci,ci=uf,ff=gt,gt=yt,yt=ff;if(st.fromVertex.column===st.toVertex.column)li=n.getLinkPoint(hi,gt,n.computeSpot(!0),!0,!1,ci,yt),ai=n.getLinkPoint(ci,yt,n.computeSpot(!1),!1,!1,hi,gt),n.gp(),n.jl(li.x,li.y),n.jl((2*li.x+ai.x)/3,(2*li.y+ai.y)/3),n.jl((li.x+2*ai.x)/3,(li.y+2*ai.y)/3),n.jl(ai.x,ai.y);else if(rr=!1,ur=!1,null!==gt&&n.computeSpot(!0)===pi&&(rr=!0),null!==yt&&n.computeSpot(!1)===pi&&(ur=!0),rr||ur){var pr=n.o(0).x,wr=n.o(0).y,br=n.o(1).x,kr=n.o(1).y,dr=n.o(2).x,gr=n.o(2).y,nu=n.o(3).x,tu=n.o(3).y;rr&&(90===this.ua||270===this.ua?(br=pr,kr=(wr+tu)/2):(br=(pr+nu)/2,kr=wr),n.aa(1,br,kr),lt=n.getLinkPoint(hi,gt,n.computeSpot(!0),!0,!1,ci,yt),n.aa(0,lt.x,lt.y));ur&&(90===this.ua||270===this.ua?(dr=nu,gr=(wr+tu)/2):(dr=(pr+nu)/2,gr=tu),n.aa(2,dr,gr),lt=n.getLinkPoint(ci,yt,n.computeSpot(!1),!1,!1,hi,gt),n.aa(3,lt.x,lt.y))}}n.ij()}else if(st.fromVertex.layer===st.toVertex.layer)n.ij();else{var ut=!1,wi=!1,ot,t=n.ut+1;if(n.pc?(wi=!0,ot=n.ra,4<ot&&n.points.removeRange(2,ot-3)):n.Je===ae?(ut=!0,ot=n.ra,4<ot&&n.points.removeRange(2,ot-3),t=2):(ot=n.ra,bi=n.computeSpot(!0)===pi,ki=n.computeSpot(!1)===pi,2<ot&&bi&&ki?n.points.removeRange(1,ot-2):3<ot&&bi&&!ki?n.points.removeRange(1,ot-3):3<ot&&!bi&&ki?n.points.removeRange(2,ot-2):4<ot&&!bi&&!ki&&n.points.removeRange(2,ot-3)),f=st.fromVertex,p=st.toVertex,st.rev){for(;null!==p&&f!==p;){for(ht=h=null,iu=p.xc.k;iu.next()&&(ni=iu.value,ni.link!==st.link||(h=ni.fromVertex,ht=ni.toVertex,null!==h.yd)););h!==f&&(e=n.o(t-1).x,o=n.o(t-1).y,i=h.Ia,r=h.Ua,wi?180===this.ua||0===this.ua?2===t?(n.C(t++,e,o),n.C(t++,e,r)):(fr=null!==ht?ht.Ua:o,fr!==r&&(s=this.Sb[h.layer-1],n.C(t++,s,o),n.C(t++,s,r))):2===t?(n.C(t++,e,o),n.C(t++,i,o)):(er=null!==ht?ht.Ia:e,er!==i&&(s=this.Sb[h.layer-1],n.C(t++,e,s),n.C(t++,i,s))):2===t?ut?(d=Math.max(10,this.dh[p.layer]),g=Math.max(10,this.og[p.layer]),180===this.ua?(u=p.V.x,n.C(t++,u-d,r),n.C(t++,u,r),n.C(t++,u+g,r)):90===this.ua?(u=p.V.y+p.V.height,n.C(t++,i,u+g),n.C(t++,i,u),n.C(t++,i,u-d)):270===this.ua?(u=p.V.y,n.C(t++,i,u-d),n.C(t++,i,u),n.C(t++,i,u+g)):(u=p.V.x+p.V.width,n.C(t++,u+g,r),n.C(t++,u,r),n.C(t++,u-d,r))):(n.C(t++,e,o),180===this.ua||0===this.ua?n.C(t++,e,r):n.C(t++,i,o),n.C(t++,i,r)):(d=Math.max(10,this.dh[h.layer]),g=Math.max(10,this.og[h.layer]),180===this.ua?(ut&&n.C(t++,i-d,r),n.C(t++,i,r),ut&&n.C(t++,i+g,r)):90===this.ua?(ut&&n.C(t++,i,r+g),n.C(t++,i,r),ut&&n.C(t++,i,r-d)):270===this.ua?(ut&&n.C(t++,i,r-d),n.C(t++,i,r),ut&&n.C(t++,i,r+g)):(ut&&n.C(t++,i+g,r),n.C(t++,i,r),ut&&n.C(t++,i-d,r))));p=h}(null===yt||n.computeSpot(!1)!==pi)&&((e=n.o(t-1).x,o=n.o(t-1).y,i=n.o(t).x,r=n.o(t).y,wi)?(ru=this.og[f.layer],180===this.ua||0===this.ua?(ct=o,ct>=f.V.y&&ct<=f.V.bottom&&(u=f.Ia+ru,ct=ct<f.V.y+f.V.height/2?f.V.y-this.Gd/2:f.V.bottom+this.Gd/2,n.C(t++,u,o),n.C(t++,u,ct)),n.C(t++,i,ct)):(ct=e,ct>=f.V.x&&ct<=f.V.right&&(u=f.Ua+ru,ct=ct<f.V.x+f.V.width/2?f.V.x-this.Gd/2:f.V.right+this.Gd/2,n.C(t++,e,u),n.C(t++,ct,u)),n.C(t++,ct,r)),n.C(t++,i,r)):ut?(d=Math.max(10,this.dh[f.layer]),g=Math.max(10,this.og[f.layer]),180===this.ua?(u=f.V.x+f.V.width,n.aa(t-2,u,o),n.aa(t-1,u+g,o)):90===this.ua?(u=f.V.y,n.aa(t-2,e,u),n.aa(t-1,e,u-d)):270===this.ua?(u=f.V.y+f.V.height,n.aa(t-2,e,u),n.aa(t-1,e,u+g)):(u=f.V.x,n.aa(t-2,u,o),n.aa(t-1,u-d,o))):(180===this.ua||0===this.ua?n.C(t++,i,o):n.C(t++,e,r),n.C(t++,i,r)))}else{for(;null!==f&&f!==p;){for(ht=h=null,uu=f.nc.k;uu.next()&&(ni=uu.value,ni.link!==st.link||(h=ni.toVertex,ht=ni.fromVertex,null!==ht.yd&&(ht=null),null!==h.yd)););h!==p&&((e=n.o(t-1).x,o=n.o(t-1).y,i=h.Ia,r=h.Ua,wi)?180===this.ua||0===this.ua?(fr=null!==ht?ht.Ua:o,fr!==r&&(s=this.Sb[h.layer],2===t&&(s=0===this.ua?Math.max(s,e):Math.min(s,e)),n.C(t++,s,o),n.C(t++,s,r))):(er=null!==ht?ht.Ia:e,er!==i&&(s=this.Sb[h.layer],2===t&&(s=90===this.ua?Math.max(s,o):Math.min(s,o)),n.C(t++,e,s),n.C(t++,i,s))):(d=Math.max(10,this.dh[h.layer]),g=Math.max(10,this.og[h.layer]),180===this.ua?(n.C(t++,i+g,r),ut&&n.C(t++,i,r),n.C(t++,i-d,r)):90===this.ua?(n.C(t++,i,r-d),ut&&n.C(t++,i,r),n.C(t++,i,r+g)):270===this.ua?(n.C(t++,i,r+g),ut&&n.C(t++,i,r),n.C(t++,i,r-d)):(n.C(t++,i-d,r),ut&&n.C(t++,i,r),n.C(t++,i+g,r))));f=h}wi&&(e=n.o(t-1).x,o=n.o(t-1).y,i=n.o(t).x,r=n.o(t).y,180===this.ua||0===this.ua?o!==r&&(s=0===this.ua?Math.min(Math.max((i+e)/2,this.Sb[p.layer]),i):Math.max(Math.min((i+e)/2,this.Sb[p.layer]),i),n.C(t++,s,o),n.C(t++,s,r)):e!==i&&(s=90===this.ua?Math.min(Math.max((r+o)/2,this.Sb[p.layer]),r):Math.max(Math.min((r+o)/2,this.Sb[p.layer]),r),n.C(t++,e,s),n.C(t++,i,s)))}null!==yi&&ut&&(null!==gt&&(n.computeSpot(!0)===pi&&(ti=n.o(0),ii=n.o(2),ti.O(ii)||n.aa(1,(ti.x+ii.x)/2,(ti.y+ii.y)/2)),lt=n.getLinkPoint(hi,gt,pi,!0,!1,ci,yt),n.aa(0,lt.x,lt.y)),null!==yt&&(n.computeSpot(!1)===pi&&(ti=n.o(n.ra-1),ii=n.o(n.ra-3),ti.O(ii)||n.aa(n.ra-2,(ti.x+ii.x)/2,(ti.y+ii.y)/2)),lt=n.getLinkPoint(ci,yt,pi,!1,!1,hi,gt),n.aa(n.ra-1,lt.x,lt.y)));n.ij();st.commit()}}for(vi=new b(c),fu=this.network.edges.k;fu.next();)di=fu.value.link,null!==di&&di.pc&&!vi.contains(di)&&vi.add(di);if(0<vi.count)if(90===this.ua||270===this.ua){for(var ef=0,v=new b(rs),wu=vi.k,l,it,at;wu.next();)if(l=wu.value,null!==l&&l.pc)for(w=2;w<l.ra-3;w++)if(it=l.o(w),at=l.o(w+1),this.I(it.y,at.y)&&!this.I(it.x,at.x)){if(pt=new rs,pt.layer=Math.floor(it.y/2),or=l.o(0),sr=l.o(l.ra-1),pt.gb=or.x*or.x+or.y,pt.he=sr.x*sr.x+sr.y,pt.He=Math.min(it.x,at.x),pt.be=Math.max(it.x,at.x),pt.index=w,pt.link=l,w+2<l.ra){var bu=l.o(w-1),ku=l.o(w+2),eu=0;bu.y<it.y?eu=ku.y<it.y?3:it.x<at.x?2:1:bu.y>it.y&&(eu=ku.y>it.y?0:at.x<it.x?2:1);pt.wi=eu}v.add(pt)}if(1<v.count)for(v.sort(this.yG),ri=0;ri<v.count;){for(du=v.n[ri].layer,ui=ri+1;ui<v.count&&v.n[ui].layer===du;)ui++;if(1<ui-ri)for(nt=ri;nt<ui;){for(hr=v.n[nt].be,wt=ri+1;wt<ui&&v.n[wt].He<hr;)hr=Math.max(hr,v.n[wt].be),wt++;if(gi=wt-nt,1<gi){v.gq(this.Ex,nt,nt+gi);for(var ou=1,fi=v.n[nt].he,ft,w=nt;w<wt;w++)ft=v.n[w],ft.he!==fi&&(ou++,fi=ft.he);v.gq(this.xG,nt,nt+gi);for(var su=1,fi=v.n[nt].gb,w=nt;w<wt;w++)ft=v.n[w],ft.gb!==fi&&(su++,fi=ft.gb);for(ou<su?(cr=!1,hu=ou,fi=v.n[nt].he,v.gq(this.Ex,nt,nt+gi)):(cr=!0,hu=su,fi=v.n[nt].gb),cu=0,w=nt;w<wt;w++)ft=v.n[w],(cr?ft.gb:ft.he)!==fi&&(cu++,fi=cr?ft.gb:ft.he),l=ft.link,it=l.o(ft.index),at=l.o(ft.index+1),nr=this.Lp*(cu-(hu-1)/2),(!l.qj||rlt(it.x,it.y+nr,at.x,at.y+nr))&&(ef++,l.Kl(),l.aa(ft.index,it.x,it.y+nr),l.aa(ft.index+1,at.x,at.y+nr),l.ij())}nt=wt}ri=ui}}else{for(var of=0,y=new b(rs),gu=vi.k,a,rt,vt;gu.next();)if(a=gu.value,null!==a&&a.pc)for(k=2;k<a.ra-3;k++)if(rt=a.o(k),vt=a.o(k+1),this.I(rt.x,vt.x)&&!this.I(rt.y,vt.y)){if(bt=new rs,bt.layer=Math.floor(rt.x/2),lr=a.o(0),ar=a.o(a.ra-1),bt.gb=lr.x+lr.y*lr.y,bt.he=ar.x+ar.y*ar.y,bt.He=Math.min(rt.y,vt.y),bt.be=Math.max(rt.y,vt.y),bt.index=k,bt.link=a,k+2<a.ra){var nf=a.o(k-1),tf=a.o(k+2),lu=0;nf.x<rt.x?lu=tf.x<rt.x?3:rt.y<vt.y?2:1:nf.x>rt.x&&(lu=tf.x>rt.x?0:vt.y<rt.y?2:1);bt.wi=lu}y.add(bt)}if(1<y.count)for(y.sort(this.yG),ei=0;ei<y.count;){for(rf=y.n[ei].layer,oi=ei+1;oi<y.count&&y.n[oi].layer===rf;)oi++;if(1<oi-ei)for(tt=ei;tt<oi;){for(vr=y.n[tt].be,kt=ei+1;kt<oi&&y.n[kt].He<vr;)vr=Math.max(vr,y.n[kt].be),kt++;if(tr=kt-tt,1<tr){y.gq(this.Ex,tt,tt+tr);for(var au=1,si=y.n[tt].he,et,k=tt;k<kt;k++)et=y.n[k],et.he!==si&&(au++,si=et.he);y.gq(this.xG,tt,tt+tr);for(var vu=1,si=y.n[tt].gb,k=tt;k<kt;k++)et=y.n[k],et.gb!==si&&(vu++,si=et.gb);for(au<vu?(yr=!1,yu=au,si=y.n[tt].he,y.gq(this.Ex,tt,tt+tr)):(yr=!0,yu=vu,si=y.n[tt].gb),pu=0,k=tt;k<kt;k++)et=y.n[k],(yr?et.gb:et.he)!==si&&(pu++,si=yr?et.gb:et.he),a=et.link,rt=a.o(et.index),vt=a.o(et.index+1),ir=this.Lp*(pu-(yu-1)/2),(!a.qj||rlt(rt.x+ir,rt.y,vt.x+ir,vt.y))&&(of++,a.Kl(),a.aa(et.index,rt.x+ir,rt.y),a.aa(et.index+1,vt.x+ir,vt.y),a.ij())}tt=kt}ei=oi}}};t.ce(rs,{layer:!0,gb:!0,he:!0,He:!0,be:!0,index:!0,link:!0,wi:!0});nt.prototype.yG=function(n,t){return n instanceof rs&&t instanceof rs&&n!==t?n.layer<t.layer?-1:n.layer>t.layer?1:n.He<t.He?-1:n.He>t.He?1:n.be<t.be?-1:n.be>t.be?1:0:0};nt.prototype.xG=function(n,t){return n instanceof rs&&t instanceof rs&&n!==t?n.gb<t.gb?-1:n.gb>t.gb||n.wi<t.wi?1:n.wi>t.wi||n.He<t.He?-1:n.He>t.He?1:n.be<t.be?-1:n.be>t.be?1:0:0};nt.prototype.Ex=function(n,t){return n instanceof rs&&t instanceof rs&&n!==t?n.he<t.he?-1:n.he>t.he||n.wi<t.wi?1:n.wi>t.wi||n.He<t.He?-1:n.He>t.He?1:n.be<t.be?-1:n.be>t.be?1:0:0};nt.prototype.I=function(n,i){r&&(t.q(n,nt,"isApprox:a"),t.q(i,nt,"isApprox:b"));var u=n-i;return-1<u&&1>u};t.g(nt,"layerSpacing",nt.prototype.layerSpacing);t.defineProperty(nt,{layerSpacing:"layerSpacing"},function(){return this.om},function(n){this.om!==n&&(t.i(n,"number",nt,"layerSpacing"),0<=n&&(this.om=n,this.M()))});t.g(nt,"columnSpacing",nt.prototype.uI);t.defineProperty(nt,{uI:"columnSpacing"},function(){return this.Gd},function(n){this.Gd!==n&&(t.i(n,"number",nt,"columnSpacing"),0<=n&&(this.Gd=n,this.M()))});t.g(nt,"direction",nt.prototype.direction);t.defineProperty(nt,{direction:"direction"},function(){return this.ua},function(n){this.ua!==n&&(t.i(n,"number",nt,"direction"),this.ua=n,this.M())});t.g(nt,"cycleRemoveOption",nt.prototype.GE);t.defineProperty(nt,{GE:"cycleRemoveOption"},function(){return this.Un},function(n){this.Un!==n&&(t.Fa(n,nt,nt,"cycleRemoveOption"),n===hit||n===gb)&&(this.Un=n,this.M())});t.g(nt,"layeringOption",nt.prototype.LF);t.defineProperty(nt,{LF:"layeringOption"},function(){return this.Do},function(n){this.Do!==n&&(t.Fa(n,nt,nt,"layeringOption"),n===nk||n===cit||n===lit)&&(this.Do=n,this.M())});t.g(nt,"initializeOption",nt.prototype.yF);t.defineProperty(nt,{yF:"initializeOption"},function(){return this.ro},function(n){this.ro!==n&&(t.Fa(n,nt,nt,"initializeOption"),n===tk||n===ait||n===vit)&&(this.ro=n,this.M())});t.g(nt,"iterations",nt.prototype.CJ);t.defineProperty(nt,{CJ:"iterations"},function(){return this.lm},function(n){this.lm!==n&&(t.q(n,ka,"iterations"),0<=n&&(this.lm=n,this.M()))});t.g(nt,"aggressiveOption",nt.prototype.hE);t.defineProperty(nt,{hE:"aggressiveOption"},function(){return this.Mn},function(n){this.Mn!==n&&(t.Fa(n,nt,nt,"aggressiveOption"),n===yit||n===ik||n===pit)&&(this.Mn=n,this.M())});t.g(nt,"packOption",nt.prototype.YJ);t.defineProperty(nt,{YJ:"packOption"},function(){return this.Ti},function(n){this.Ti!==n&&(t.i(n,"number",nt,"packOption"),0<=n&&8>n&&(this.Ti=n,this.M()))});t.g(nt,"setsPortSpots",nt.prototype.Jl);t.defineProperty(nt,{Jl:"setsPortSpots"},function(){return this.Xh},function(n){this.Xh!==n&&(t.i(n,"boolean",nt,"setsPortSpots"),this.Xh=n,this.M())});t.g(nt,"linkSpacing",nt.prototype.Lp);t.defineProperty(nt,{Lp:"linkSpacing"},function(){return this.Mj},function(n){this.Mj!==n&&(t.i(n,"number",nt,"linkSpacing"),0<=n&&(this.Mj=n,this.M()))});t.A(nt,{JJ:"maxLayer"},function(){return this.qb});t.A(nt,{OK:"maxIndex"},function(){return this.rv});t.A(nt,{NK:"maxColumn"},function(){return this.Mb});t.A(nt,{QK:"minIndexLayer"},function(){return this.Nr});t.A(nt,{PK:"maxIndexLayer"},function(){return this.Nf});nt.CycleDepthFirst=gb=t.w(nt,"CycleDepthFirst",0);nt.CycleGreedy=hit=t.w(nt,"CycleGreedy",1);nt.LayerOptimalLinkLength=nk=t.w(nt,"LayerOptimalLinkLength",0);nt.LayerLongestPathSink=cit=t.w(nt,"LayerLongestPathSink",1);nt.LayerLongestPathSource=lit=t.w(nt,"LayerLongestPathSource",2);nt.InitDepthFirstOut=tk=t.w(nt,"InitDepthFirstOut",0);nt.InitDepthFirstIn=ait=t.w(nt,"InitDepthFirstIn",1);nt.InitNaive=vit=t.w(nt,"InitNaive",2);nt.AggressiveNone=yit=t.w(nt,"AggressiveNone",0);nt.AggressiveLess=ik=t.w(nt,"AggressiveLess",1);nt.AggressiveMore=pit=t.w(nt,"AggressiveMore",2);nt.PackNone=0;nt.PackExpand=ult=1;nt.PackStraighten=wit=2;nt.PackMedian=flt=4;nt.PackAll=bit=7;t.ka("LayeredDigraphNetwork",ka);t.Qa(ka,ei);ka.prototype.createVertex=function(){return new rk};ka.prototype.createEdge=function(){return new kit};t.ka("LayeredDigraphVertex",rk);t.Qa(rk,vt);t.ka("LayeredDigraphEdge",kit);t.Qa(kit,rr);t.ka("TreeLayout",l);t.Qa(l,ti);l.prototype.cloneProtected=function(n){ti.prototype.cloneProtected.call(this,n);n.Vi=this.Vi;n.Rs=this.Rs;n.nv=this.nv;n.Fh=this.Fh;n.hd=this.hd;n.gg.assign(this.gg);n.ya.copyInheritedPropertiesFrom(this.ya);n.xa.copyInheritedPropertiesFrom(this.xa)};l.prototype.createNetwork=function(){var n=new wy;return il(n,this),n};l.prototype.makeNetwork=function(n){var t=this.createNetwork();return n instanceof i?(ay(this,t,n.vh,!0),ay(this,t,n.links,!0)):n instanceof g?ay(this,t,n.Vc,!1):ay(this,t,n.k,!1),t};l.prototype.doLayout=function(n){var r,f,e,o,u;if(n||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(n)),this.We!==yk&&(this.Nd=this.initialOrigin(this.Nd)),r=this.h,null===r&&n instanceof i&&(r=n),this.Lf=this.path===ok&&null!==r?r.vd?co:ul:this.path===ok?co:this.path,0<this.network.vertexes.count){for(this.network.Lw(),r=this.network.vertexes.k;r.next();)n=r.value,n.initialized=!1,n.level=0,n.parent=null,n.children=[];if(0<this.bd.count)for(r=this.bd.k,this.bd=new it(oi);r.next();)n=r.value,n instanceof y?(n=this.network.gn(n),null!==n&&this.bd.add(n)):n instanceof oi&&this.bd.add(n);if(0===this.bd.count){for(n=this.network.vertexes.k;n.next();)switch(r=n.value,this.Lf){case co:0===r.xc.count&&this.bd.add(r);break;case ul:0===r.nc.count&&this.bd.add(r);break;default:t.m("Unhandled path value "+this.Lf.toString())}if(0===this.bd.count){for(n=999999,r=null,f=this.network.vertexes.k;f.next();){u=f.value;switch(this.Lf){case co:u.xc.count<n&&(n=u.xc.count,r=u);break;case ul:u.nc.count<n&&(n=u.nc.count,r=u);break;default:t.m("Unhandled path value "+this.Lf.toString())}}null!==r&&this.bd.add(r)}}for(r=this.bd.k;r.next();)n=r.value,n.initialized||(n.initialized=!0,elt(this,n));for(n=this.bd.k;n.next();)slt(this,n.value);for(n=this.bd.k;n.next();)hlt(this,n.value);for(n=this.bd.k;n.next();)clt(this,n.value);if(this.$z(),this.ox===pk){for(u=[],n=this.network.vertexes.k;n.next();)r=n.value,(f=r.parent)||(f=r),f=0===f.angle||180===f.angle,e=u[r.level],void 0===e&&(e=0),u[r.level]=Math.max(e,f?r.width:r.height);for(e=0;e<u.length;e++)void 0===u[e]&&(u[e]=0);for(this.cC=u,n=this.network.vertexes.k;n.next();)r=n.value,(f=r.parent)||(f=r),0===f.angle||180===f.angle?(180===f.angle&&(r.rp+=u[r.level]-r.width),r.width=u[r.level]):(270===f.angle&&(r.sp+=u[r.level]-r.height),r.height=u[r.level])}else if(this.ox===srt)for(n=this.network.vertexes.k;n.next();){for(r=n.value,f=0===r.angle||180===r.angle,u=-1,e=0;e<r.children.length;e++)o=r.children[e],u=Math.max(u,f?o.width:o.height);if(0<=u)for(e=0;e<r.children.length;e++)o=r.children[e],f?(180===r.angle&&(o.rp+=u-o.width),o.width=u):(270===r.angle&&(o.sp+=u-o.height),o.height=u)}for(n=this.bd.k;n.next();)this.layoutTree(n.value);this.arrangeTrees();this.updateParts()}this.network=null;this.bd=new it(Object);this.ff=!0};l.prototype.removeChild=function(n,i){if(r&&t.l(n,oi,l,"removeChild:p"),r&&t.l(i,oi,l,"removeChild:c"),null!==n&&null!==i){for(var f=n.children,e=0,u=0;u<f.length;u++)f[u]===i&&e++;if(0<e){for(var e=Array(f.length-e),o=0,u=0;u<f.length;u++)f[u]!==i&&(e[o++]=f[u]);n.children=e}}};l.prototype.initializeTreeVertexValues=function(n){var i;if(r&&t.l(n,oi,l,"initializeTreeVertexValues:v"),i=yvt(this,n),n.copyInheritedPropertiesFrom(i),null!==n.parent&&n.parent.alignment===vo){for(var i=n.angle,f=n.parent.children,u=0;u<f.length&&n!==f[u];)u++;0==u%2?u!==f.length-1&&(i=90===i?180:180===i?270:270===i?180:270):i=90===i?0:180===i?90:270===i?0:90;n.angle=i}n.initialized=!0};l.prototype.assignTreeVertexValues=function(){};l.prototype.sortTreeVertexChildren=function(n){r&&t.l(n,oi,l,"sortTreeVertexChildren:v");switch(n.sorting){case yy:break;case sk:n.children.reverse();break;case hk:n.children.sort(n.comparer);break;case ck:n.children.sort(n.comparer);n.children.reverse();break;default:t.m("Unhandled sorting value "+n.sorting.toString())}};l.prototype.$z=function(){if(this.comments)for(var n=this.network.vertexes.k;n.next();)this.addComments(n.value)};l.prototype.addComments=function(n){var a,i;r&&t.l(n,oi,l,"addComments:v");var h=n.angle,f=n.parent,e=0,u=us,u=!1;null!==f&&(e=f.angle,u=f.alignment,u=wh(u));var h=90===h||270===h,e=90===e||270===e,f=0===n.Wm,o=0,s=0,c=0,v=n.commentSpacing;if(null!==n.Jc)for(a=n.Jc.aF();a.next();)i=a.value,"Comment"===i.cd&&i.Wa()&&(null===n.comments&&(n.comments=[]),n.comments.push(i),i.xf(),i=i.Ha,h&&!f||!u&&!e&&f||u&&e&&f?(o=Math.max(o,i.width),s+=i.height+Math.abs(c)):(o+=i.width+Math.abs(c),s=Math.max(s,i.height)),c=v);null!==n.comments&&(h&&!f||!u&&!e&&f||u&&e&&f?(o+=Math.abs(n.commentMargin),s=Math.max(0,s-n.height)):(s+=Math.abs(n.commentMargin),o=Math.max(0,o-n.width)),u=t.wk(0,0,n.V.width+o,n.V.height+s),n.Tb=u,t.oc(u))};l.prototype.layoutComments=function(n){var i,s,u;if(r&&t.l(n,oi,l,"layoutComments:v"),null!==n.comments){var h=n.Jc.Ha,i=n.parent,a=n.angle,o=0,c=us,c=!1;null!==i&&(o=i.angle,c=i.alignment,c=wh(c));for(var a=90===a||270===a,v=90===o||270===o,y=0===n.Wm,w=dit(n),e=0,b=n.comments,k=b.length,f=t.N(),p=0;p<k;p++)if(i=b[p],s=i.Ha,a&&!y||!c&&!v&&y||c&&v&&y){if(135<o&&!c||v&&w)if(0<=n.commentMargin)for(f.p(n.V.x-n.commentMargin-s.width,n.V.y+e),i.move(f),u=i.Cg();u.next();)i=u.value,i.vb=wf,i.zb=lu;else for(f.p(n.V.x+2*n.Q.x-n.commentMargin,n.V.y+e),i.move(f),u=i.Cg();u.next();)i=u.value,i.vb=lu,i.zb=wf;else if(0<=n.commentMargin)for(f.p(n.V.x+2*n.Q.x+n.commentMargin,n.V.y+e),i.move(f),u=i.Cg();u.next();)i=u.value,i.vb=lu,i.zb=wf;else for(f.p(n.V.x+n.commentMargin-s.width,n.V.y+e),i.move(f),u=i.Cg();u.next();)i=u.value,i.vb=wf,i.zb=lu;e=0<=n.commentSpacing?e+(s.height+n.commentSpacing):e+(n.commentSpacing-s.height)}else{if(135<o&&!c||!v&&w)if(0<=n.commentMargin)for(f.p(n.V.x+e,n.V.y-n.commentMargin-s.height),i.move(f),u=i.Cg();u.next();)i=u.value,i.vb=pf,i.zb=bf;else for(f.p(n.V.x+e,n.V.y+2*n.Q.y-n.commentMargin),i.move(f),u=i.Cg();u.next();)i=u.value,i.vb=bf,i.zb=pf;else if(0<=n.commentMargin)for(f.p(n.V.x+e,n.V.y+2*n.Q.y+n.commentMargin),i.move(f),u=i.Cg();u.next();)i=u.value,i.vb=bf,i.zb=pf;else for(f.p(n.V.x+e,n.V.y+n.commentMargin-s.height),i.move(f),u=i.Cg();u.next();)i=u.value,i.vb=pf,i.zb=bf;e=0<=n.commentSpacing?e+(s.width+n.commentSpacing):e+(n.commentSpacing-s.width)}if(t.B(f),h=e-n.commentSpacing-(a?h.height:h.width),this.Lf===co)for(n=n.nc;n.next();)o=n.value,(i=o.link)&&!i.qj&&(i.rk=0<h?h:NaN);else for(n=n.xc;n.next();)o=n.value,(i=o.link)&&!i.qj&&(i.xk=0<h?h:NaN)}};l.prototype.layoutTree=function(n){var s,a,it;if(r&&t.l(n,oi,l,"layoutTree:v"),null!==n){for(var b=n.children,v=b.length,g=0;g<v;g++)this.layoutTree(b[g]);switch(n.compaction){case lk:llt(this,n);break;case py:if(n.alignment===vo)llt(this,n);else if(r&&t.l(n,oi,l,"layoutTreeBlock:v"),0===n.Wm){var g=n.parent,b=!1,v=0,rt=us;null!==g&&(v=g.angle,rt=g.alignment,b=wh(rt));g=dit(n);n.qa.p(0,0);n.eb.p(n.width,n.height);null===n.parent||null===n.comments||(180!==v&&270!==v||b)&&!g?n.Na.p(0,0):180===v&&!b||(90===v||270===v)&&g?n.Na.p(n.width-2*n.Q.x,0):n.Na.p(0,n.height-2*n.Q.y);n.It=null;n.$t=null}else{for(var u=ye(n),b=90===u||270===u,a=0,h=n.children,y=h.length,f=0;f<y;f++)s=h[f],a=Math.max(a,b?s.eb.width:s.eb.height);var i=n.alignment,g=i===lo,w=i===ao,ot=wh(i),yt=Math.max(0,n.breadthLimit),v=da(n),ht=n.nodeSpacing,ut=ds(n),ct=n.rowSpacing,at=0;(g||w||n.aq||n.bq&&1===n.maxGenerationCount)&&(at=Math.max(0,n.rowIndent));var g=n.width,rt=n.height,e=0,o=0,pt=0,c=null,d=null,ft=0,p=0,nt=0,tt=0,vt=0,st=0,lt=0,et=0,s=0;if(ot&&!vy(i)&&135<u&&h.reverse(),vy(i))if(1<y)for(f=0;f<y;f++)0==f%2&&f!==y-1?et=Math.max(et,b?h[f].eb.width:h[f].eb.height):0!=f%2&&(s=Math.max(s,b?h[f].eb.width:h[f].eb.height));else 1===y&&(et=b?h[0].eb.width:h[0].eb.height);if(ot){switch(i){case gs:p=135>u?alt(n,h,et,e,o):vlt(n,h,et,e,o);et=p[0];e=p[1];o=p[2];break;case nh:for(f=0;f<y;f++){var s=h[f],k=s.eb,c=0===st?0:ct;b?(s.qa.p(a-k.width,tt+c),e=Math.max(e,k.width),o=Math.max(o,tt+c+k.height),tt+=c+k.height):(s.qa.p(nt+c,a-k.height),e=Math.max(e,nt+c+k.width),o=Math.max(o,k.height),nt+=c+k.width);st++}break;case fs:for(f=0;f<y;f++)s=h[f],k=s.eb,c=0===st?0:ct,b?(s.qa.p(ht/2+n.Q.x,tt+c),e=Math.max(e,k.width),o=Math.max(o,tt+c+k.height),tt+=c+k.height):(s.qa.p(nt+c,ht/2+n.Q.y),e=Math.max(e,nt+c+k.width),o=Math.max(o,k.height),nt+=c+k.width),st++}c=su(this,2);d=su(this,2);b?(c[0].p(0,0),c[1].p(0,o),d[0].p(e,0)):(c[0].p(0,0),c[1].p(e,0),d[0].p(0,o));d[1].p(e,o)}else for(f=0;f<y;f++)s=h[f],k=s.eb,b?(0<yt&&0<st&&nt+ht+k.width>yt&&(nt<a&&hc(n,i,a-nt,0,lt,f-1),vt++,st=0,lt=f,pt=o,nt=0,tt=135<u?-o-ct:o+ct),fk(this,s,0,tt),it=0,0===st?(c=s.It,d=s.$t,ft=k.width,p=k.height,null===c||null===d||u!==ye(s))&&(c=su(this,2),d=su(this,2),c[0].p(0,0),c[1].p(0,p),d[0].p(ft,0),d[1].p(ft,p)):(p=plt(this,n,s,c,d,ft,p),it=p[0],c=p[1],d=p[2],ft=p[3],p=p[4],nt<k.width&&0>it&&(rl(n,-it,0,lt,f-1),ek(c,-it,0),ek(d,-it,0),it=0)),s.qa.p(it,tt),e=Math.max(e,ft),o=Math.max(o,pt+(0===vt?0:ct)+k.height),nt=ft):(0<yt&&0<st&&tt+ht+k.height>yt&&(tt<a&&hc(n,i,0,a-tt,lt,f-1),vt++,st=0,lt=f,pt=e,tt=0,nt=135<u?-e-ct:e+ct),fk(this,s,nt,0),it=0,0===st?(c=s.It,d=s.$t,ft=k.width,p=k.height,null===c||null===d||u!==ye(s))&&(c=su(this,2),d=su(this,2),c[0].p(0,0),c[1].p(ft,0),d[0].p(0,p),d[1].p(ft,p)):(p=plt(this,n,s,c,d,ft,p),it=p[0],c=p[1],d=p[2],ft=p[3],p=p[4],tt<k.height&&0>it&&(rl(n,0,-it,lt,f-1),ek(c,0,-it),ek(d,0,-it),it=0)),s.qa.p(nt,it),o=Math.max(o,p),e=Math.max(e,pt+(0===vt?0:ct)+k.width),tt=p),st++;0<vt&&(b?(o+=Math.max(0,v),nt<e&&hc(n,i,e-nt,0,lt,y-1),0<at&&(w||rl(n,at,0,0,y-1),e+=at)):(e+=Math.max(0,v),tt<o&&hc(n,i,0,o-tt,lt,y-1),0<at&&(w||rl(n,0,at,0,y-1),o+=at)));w=a=0;switch(i){case ga:b?a+=e/2-n.Q.x-ut/2:w+=o/2-n.Q.y-ut/2;break;case us:0<vt?b?a+=e/2-n.Q.x-ut/2:w+=o/2-n.Q.y-ut/2:b?(f=h[0].qa.x+h[0].Na.x,et=h[y-1].qa.x+h[y-1].Na.x+2*h[y-1].Q.x,a+=f+(et-f)/2-n.Q.x-ut/2):(f=h[0].qa.y+h[0].Na.y,et=h[y-1].qa.y+h[y-1].Na.y+2*h[y-1].Q.y,w+=f+(et-f)/2-n.Q.y-ut/2);break;case lo:b?(a-=ut,e+=ut):(w-=ut,o+=ut);break;case ao:b?(a+=e-n.width+ut,e+=ut):(w+=o-n.height+ut,o+=ut);break;case gs:b?a=1<y?a+(et+ht/2-n.Q.x):a+(h[0].Q.x-n.Q.x+h[0].Na.x):w=1<y?w+(et+ht/2-n.Q.y):w+(h[0].Q.y-n.Q.y+h[0].Na.y);break;case nh:b?a+=e+ht/2-n.Q.x:w+=o+ht/2-n.Q.y;break;case fs:break;default:t.m("Unhandled alignment value "+i.toString())}for(f=0;f<y;f++)s=h[f],b?s.qa.p(s.qa.x+s.Na.x-a,s.qa.y+(135<u?(ot?-o:-s.eb.height)+s.Na.y-v:rt+v+s.Na.y)):s.qa.p(s.qa.x+(135<u?(ot?-e:-s.eb.width)+s.Na.x-v:g+v+s.Na.x),s.qa.y+s.Na.y-w);if(y=h=0,ot?b?(e=git(n,e,a),0>a&&(a=0),135<u&&(w+=o+v),o+=rt+v,i===fs&&(h+=ht/2+n.Q.x),y+=rt+v):(135<u&&(a+=e+v),e+=g+v,o=nrt(n,o,w),0>w&&(w=0),i===fs&&(y+=ht/2+n.Q.y),h+=g+v):b?(null===n.comments?g>e&&(i=trt(i,g-e,0),h=i[0],y=i[1],e=g,a=0):e=git(n,e,a),0>a&&(h-=a,a=0),135<u&&(w+=o+v),o=Math.max(Math.max(o,rt),o+rt+v),y+=rt+v):(135<u&&(a+=e+v),e=Math.max(Math.max(e,g),e+g+v),null===n.comments?rt>o&&(i=trt(i,0,rt-o),h=i[0],y=i[1],o=rt,w=0):o=nrt(n,o,w),0>w&&(y-=w,w=0),h+=g+v),0<vt)u=su(this,4),i=su(this,4),b?(u[2].p(0,rt+v),u[3].p(u[2].x,o),i[2].p(e,u[2].y),i[3].p(i[2].x,u[3].y)):(u[2].p(g+v,0),u[3].p(e,u[2].y),i[2].p(u[2].x,o),i[3].p(u[3].x,i[2].y));else{for(u=su(this,c.length+2),i=su(this,d.length+2),f=0;f<c.length;f++)ot=c[f],u[f+2].p(ot.x+h,ot.y+y);for(f=0;f<d.length;f++)ot=d[f],i[f+2].p(ot.x+h,ot.y+y)}b?(u[0].p(a,0),u[1].p(u[0].x,rt),u[2].y<u[1].y&&(u[2].x>u[0].x?u[2].assign(u[1]):u[1].assign(u[2])),u[3].y<u[2].y&&(u[3].x>u[0].x?u[3].assign(u[2]):u[2].assign(u[3])),i[0].p(a+g,0),i[1].p(i[0].x,rt),i[2].y<i[1].y&&(i[2].x<i[0].x?i[2].assign(i[1]):i[1].assign(i[2])),i[3].y<i[2].y&&(i[3].x<i[0].x?i[3].assign(i[2]):i[2].assign(i[3])),u[2].y-=v/2,i[2].y-=v/2):(u[0].p(0,w),u[1].p(g,u[0].y),u[2].x<u[1].x&&(u[2].y>u[0].y?u[2].assign(u[1]):u[1].assign(u[2])),u[3].x<u[2].x&&(u[3].y>u[0].y?u[3].assign(u[2]):u[2].assign(u[3])),i[0].p(0,w+rt),i[1].p(g,i[0].y),i[2].x<i[1].x&&(i[2].y<i[0].y?i[2].assign(i[1]):i[1].assign(i[2])),i[3].x<i[2].x&&(i[3].y<i[0].y?i[3].assign(i[2]):i[2].assign(i[3])),u[2].x-=v/2,i[2].x-=v/2);ks(this,c);ks(this,d);n.It=u;n.$t=i;n.Na.p(a,w);n.eb.p(e,o)}break;default:t.m("Unhandled compaction value "+n.compaction.toString())}}};l.prototype.arrangeTrees=function(){var n,i,r;if(this.hd===yk){for(n=this.bd.k;n.next();)if(i=n.value,r=i.Jc,null!==r){var u=r.position,r=u.x,u=u.y;isFinite(r)||(r=0);isFinite(u)||(u=0);irt(this,i,r,u)}}else for(n=this.Nd,r=n.x,u=n.y,n=this.bd.k;n.next();)switch(i=n.value,irt(this,i,r+i.Na.x,u+i.Na.y),this.hd){case vk:u+=i.eb.height+this.gg.height;break;case ert:r+=i.eb.width+this.gg.width;break;default:t.m("Unhandled arrangement value "+this.hd.toString())}};l.prototype.commitLayout=function(){this.xB();this.commitNodes();this.gA();this.Ft&&this.commitLinks()};l.prototype.commitNodes=function(){for(var n=this.network.vertexes.k,t;n.next();)t=n.value,t.commit();for(n.reset();n.next();)t=n.value,this.layoutComments(t)};l.prototype.gA=function(){var i,r,f;if(this.ox===pk){for(var o=this.cC,e=[],t=null,n=this.network.vertexes.k;n.next();)i=n.value,null===t?t=i.Tb.copy():t.yj(i.Tb),r=e[i.level],r=void 0===r?da(i):Math.max(r,da(i)),e[i.level]=r;for(n=0;n<e.length;n++)void 0===e[n]&&(e[n]=0);90===this.angle||270===this.angle?(t.Wf(this.nodeSpacing/2,this.layerSpacing),i=new h(-this.nodeSpacing/2,-this.layerSpacing/2)):(t.Wf(this.layerSpacing,this.nodeSpacing/2),i=new h(-this.layerSpacing/2,-this.nodeSpacing/2));var r=[],t=90===this.angle||270===this.angle?t.width:t.height,u=0;if(180===this.angle||270===this.angle)for(n=0;n<o.length;n++)u+=o[n]+e[n];for(n=0;n<o.length;n++)f=o[n]+e[n],270===this.angle?(u-=f,r.push(new p(0,u,t,f))):90===this.angle?(r.push(new p(0,u,t,f)),u+=f):180===this.angle?(u-=f,r.push(new p(u,0,f,t))):(r.push(new p(u,0,f,t)),u+=f);this.commitLayers(r,i)}};l.prototype.commitLayers=function(){};l.prototype.commitLinks=function(){for(var n=this.network.edges.k;n.next();)n.value.commit()};l.prototype.xB=function(){for(var n=this.bd.k;n.next();)wlt(this,n.value)};l.prototype.setPortSpots=function(n){var h,o,f,i,a,c,s,u,e;if(r&&t.l(n,oi,l,"setPortSpots:v"),h=n.alignment,wh(h)){r&&t.l(n,oi,l,"setPortSpotsBus:v");r&&t.l(h,de,l,"setPortSpots:align");o=this.Lf===co;f=ye(n);switch(f){case 0:i=lu;break;case 90:i=bf;break;case 180:i=wf;break;default:i=pf}a=n.children;c=a.length;switch(h){case gs:case vo:for(h=0;h<c;h++)if(s=a[h],s=o?s.xc:s.nc,s.next()&&(u=s.value,u=u.link,null!==u)){if(e=90===f||270===f?wf:pf,1===c||h===c-1&&1==c%2)switch(f){case 0:e=wf;break;case 90:e=pf;break;case 180:e=lu;break;default:e=bf}else 0==h%2&&(e=90===f||270===f?lu:bf);o?(n.setsPortSpot&&(u.vb=i),n.setsChildPortSpot&&(u.zb=e)):(n.setsPortSpot&&(u.vb=e),n.setsChildPortSpot&&(u.zb=i))}break;case nh:for(e=90===f||270===f?lu:bf,s=o?n.nc:n.xc;s.next();)u=s.value,u=u.link,null!==u&&(o?(n.setsPortSpot&&(u.vb=i),n.setsChildPortSpot&&(u.zb=e)):(n.setsPortSpot&&(u.vb=e),n.setsChildPortSpot&&(u.zb=i)));break;case fs:for(e=90===f||270===f?wf:pf,s=o?n.nc:n.xc;s.next();)u=s.value,u=u.link,null!==u&&(o?(n.setsPortSpot&&(u.vb=i),n.setsChildPortSpot&&(u.zb=e)):(n.setsPortSpot&&(u.vb=e),n.setsChildPortSpot&&(u.zb=i)))}}else if(o=ye(n),this.Lf===co){for(f=n.nc;f.next();)if(i=f.value,i=i.link,null!==i){if(n.setsPortSpot)if(n.portSpot.Tc())switch(o){case 0:i.vb=lu;break;case 90:i.vb=bf;break;case 180:i.vb=wf;break;default:i.vb=pf}else i.vb=n.portSpot;if(n.setsChildPortSpot)if(n.childPortSpot.Tc())switch(o){case 0:i.zb=wf;break;case 90:i.zb=pf;break;case 180:i.zb=lu;break;default:i.zb=bf}else i.zb=n.childPortSpot}}else for(f=n.xc;f.next();)if(i=f.value,i=i.link,null!==i){if(n.setsPortSpot)if(n.portSpot.Tc())switch(o){case 0:i.zb=lu;break;case 90:i.zb=bf;break;case 180:i.zb=wf;break;default:i.zb=pf}else i.zb=n.portSpot;if(n.setsChildPortSpot)if(n.childPortSpot.Tc())switch(o){case 0:i.vb=wf;break;case 90:i.vb=pf;break;case 180:i.vb=lu;break;default:i.vb=bf}else i.vb=n.childPortSpot}};t.g(l,"roots",l.prototype.iK);t.defineProperty(l,{iK:"roots"},function(){return this.bd},function(n){this.bd!==n&&(t.l(n,it,l,"roots"),this.bd=n,this.M())});t.g(l,"path",l.prototype.path);t.defineProperty(l,{path:"path"},function(){return this.Vi},function(n){this.Vi!==n&&(t.Fa(n,l,l,"path"),this.Vi=n,this.M())});t.g(l,"treeStyle",l.prototype.bH);t.defineProperty(l,{bH:"treeStyle"},function(){return this.Rs},function(n){this.hd!==n&&(t.Fa(n,l,l,"treeStyle"),n===ak||n===urt||n===rrt||n===frt)&&(this.Rs=n,this.M())});t.g(l,"layerStyle",l.prototype.ox);t.defineProperty(l,{ox:"layerStyle"},function(){return this.nv},function(n){this.hd!==n&&(t.Fa(n,l,l,"layerStyle"),n===ort||n===srt||n===pk)&&(this.nv=n,this.M())});t.g(l,"comments",l.prototype.comments);t.defineProperty(l,{comments:"comments"},function(){return this.Fh},function(n){this.Fh!==n&&(t.i(n,"boolean",l,"comments"),this.Fh=n,this.M())});t.g(l,"arrangement",l.prototype.We);t.defineProperty(l,{We:"arrangement"},function(){return this.hd},function(n){this.hd!==n&&(t.Fa(n,l,l,"arrangement"),n===vk||n===ert||n===yk)&&(this.hd=n,this.M())});t.g(l,"arrangementSpacing",l.prototype.sw);t.defineProperty(l,{sw:"arrangementSpacing"},function(){return this.gg},function(n){t.l(n,st,l,"arrangementSpacing");this.gg.O(n)||(this.gg.assign(n),this.M())});t.g(l,"rootDefaults",l.prototype.hK);t.defineProperty(l,{hK:"rootDefaults"},function(){return this.ya},function(n){this.ya!==n&&(t.l(n,oi,l,"rootDefaults"),this.ya=n,this.M())});t.g(l,"alternateDefaults",l.prototype.dI);t.defineProperty(l,{dI:"alternateDefaults"},function(){return this.xa},function(n){this.xa!==n&&(t.l(n,oi,l,"alternateDefaults"),this.xa=n,this.M())});t.g(l,"sorting",l.prototype.sorting);t.defineProperty(l,{sorting:"sorting"},function(){return this.ya.sorting},function(n){this.ya.sorting!==n&&(t.Fa(n,l,l,"sorting"),n===yy||n===sk||n===hk||ck)&&(this.ya.sorting=n,this.M())});t.g(l,"comparer",l.prototype.comparer);t.defineProperty(l,{comparer:"comparer"},function(){return this.ya.comparer},function(n){this.ya.comparer!==n&&(t.i(n,"function",l,"comparer"),this.ya.comparer=n,this.M())});t.g(l,"angle",l.prototype.angle);t.defineProperty(l,{angle:"angle"},function(){return this.ya.angle},function(n){this.ya.angle!==n&&(t.i(n,"number",l,"angle"),0===n||90===n||180===n||270===n)&&(this.ya.angle=n,this.M())});t.g(l,"alignment",l.prototype.alignment);t.defineProperty(l,{alignment:"alignment"},function(){return this.ya.alignment},function(n){this.ya.alignment!==n&&(t.Fa(n,l,l,"alignment"),this.ya.alignment=n,this.M())});t.g(l,"nodeIndent",l.prototype.nodeIndent);t.defineProperty(l,{nodeIndent:"nodeIndent"},function(){return this.ya.nodeIndent},function(n){this.ya.nodeIndent!==n&&(t.i(n,"number",l,"nodeIndent"),0<=n&&(this.ya.nodeIndent=n,this.M()))});t.g(l,"nodeIndentPastParent",l.prototype.nodeIndentPastParent);t.defineProperty(l,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.ya.nodeIndentPastParent},function(n){this.ya.nodeIndentPastParent!==n&&(t.i(n,"number",l,"nodeIndentPastParent"),0<=n&&1>=n&&(this.ya.nodeIndentPastParent=n,this.M()))});t.g(l,"nodeSpacing",l.prototype.nodeSpacing);t.defineProperty(l,{nodeSpacing:"nodeSpacing"},function(){return this.ya.nodeSpacing},function(n){this.ya.nodeSpacing!==n&&(t.i(n,"number",l,"nodeSpacing"),this.ya.nodeSpacing=n,this.M())});t.g(l,"layerSpacing",l.prototype.layerSpacing);t.defineProperty(l,{layerSpacing:"layerSpacing"},function(){return this.ya.layerSpacing},function(n){this.ya.layerSpacing!==n&&(t.i(n,"number",l,"layerSpacing"),this.ya.layerSpacing=n,this.M())});t.g(l,"layerSpacingParentOverlap",l.prototype.layerSpacingParentOverlap);t.defineProperty(l,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.ya.layerSpacingParentOverlap},function(n){this.ya.layerSpacingParentOverlap!==n&&(t.i(n,"number",l,"layerSpacingParentOverlap"),0<=n&&1>=n&&(this.ya.layerSpacingParentOverlap=n,this.M()))});t.g(l,"compaction",l.prototype.compaction);t.defineProperty(l,{compaction:"compaction"},function(){return this.ya.compaction},function(n){this.ya.compaction!==n&&(t.Fa(n,l,l,"compaction"),n===lk||n===py)&&(this.ya.compaction=n,this.M())});t.g(l,"breadthLimit",l.prototype.breadthLimit);t.defineProperty(l,{breadthLimit:"breadthLimit"},function(){return this.ya.breadthLimit},function(n){this.ya.breadthLimit!==n&&(t.i(n,"number",l,"breadthLimit"),0<=n&&(this.ya.breadthLimit=n,this.M()))});t.g(l,"rowSpacing",l.prototype.rowSpacing);t.defineProperty(l,{rowSpacing:"rowSpacing"},function(){return this.ya.rowSpacing},function(n){this.ya.rowSpacing!==n&&(t.i(n,"number",l,"rowSpacing"),this.ya.rowSpacing=n,this.M())});t.g(l,"rowIndent",l.prototype.rowIndent);t.defineProperty(l,{rowIndent:"rowIndent"},function(){return this.ya.rowIndent},function(n){this.ya.rowIndent!==n&&(t.i(n,"number",l,"rowIndent"),0<=n&&(this.ya.rowIndent=n,this.M()))});t.g(l,"commentSpacing",l.prototype.commentSpacing);t.defineProperty(l,{commentSpacing:"commentSpacing"},function(){return this.ya.commentSpacing},function(n){this.ya.commentSpacing!==n&&(t.i(n,"number",l,"commentSpacing"),this.ya.commentSpacing=n,this.M())});t.g(l,"commentMargin",l.prototype.commentMargin);t.defineProperty(l,{commentMargin:"commentMargin"},function(){return this.ya.commentMargin},function(n){this.ya.commentMargin!==n&&(t.i(n,"number",l,"commentMargin"),this.ya.commentMargin=n,this.M())});t.g(l,"setsPortSpot",l.prototype.setsPortSpot);t.defineProperty(l,{setsPortSpot:"setsPortSpot"},function(){return this.ya.setsPortSpot},function(n){this.ya.setsPortSpot!==n&&(t.i(n,"boolean",l,"setsPortSpot"),this.ya.setsPortSpot=n,this.M())});t.g(l,"portSpot",l.prototype.portSpot);t.defineProperty(l,{portSpot:"portSpot"},function(){return this.ya.portSpot},function(n){t.l(n,e,l,"portSpot");this.ya.portSpot.O(n)||(this.ya.portSpot=n,this.M())});t.g(l,"setsChildPortSpot",l.prototype.setsChildPortSpot);t.defineProperty(l,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.ya.setsChildPortSpot},function(n){this.ya.setsChildPortSpot!==n&&(t.i(n,"boolean",l,"setsChildPortSpot"),this.ya.setsChildPortSpot=n,this.M())});t.g(l,"childPortSpot",l.prototype.childPortSpot);t.defineProperty(l,{childPortSpot:"childPortSpot"},function(){return this.ya.childPortSpot},function(n){t.l(n,e,l,"childPortSpot");this.ya.childPortSpot.O(n)||(this.ya.childPortSpot=n,this.M())});t.g(l,"alternateSorting",l.prototype.oI);t.defineProperty(l,{oI:"alternateSorting"},function(){return this.xa.sorting},function(n){this.xa.sorting!==n&&(t.Fa(n,l,l,"alternateSorting"),n===yy||n===sk||n===hk||ck)&&(this.xa.sorting=n,this.M())});t.g(l,"alternateComparer",l.prototype.cI);t.defineProperty(l,{cI:"alternateComparer"},function(){return this.xa.comparer},function(n){this.xa.comparer!==n&&(t.i(n,"function",l,"alternateComparer"),this.xa.comparer=n,this.M())});t.g(l,"alternateAngle",l.prototype.XH);t.defineProperty(l,{XH:"alternateAngle"},function(){return this.xa.angle},function(n){this.xa.angle!==n&&(t.i(n,"number",l,"alternateAngle"),0===n||90===n||180===n||270===n)&&(this.xa.angle=n,this.M())});t.g(l,"alternateAlignment",l.prototype.WH);t.defineProperty(l,{WH:"alternateAlignment"},function(){return this.xa.alignment},function(n){this.xa.alignment!==n&&(t.Fa(n,l,l,"alternateAlignment"),this.xa.alignment=n,this.M())});t.g(l,"alternateNodeIndent",l.prototype.gI);t.defineProperty(l,{gI:"alternateNodeIndent"},function(){return this.xa.nodeIndent},function(n){this.xa.nodeIndent!==n&&(t.i(n,"number",l,"alternateNodeIndent"),0<=n&&(this.xa.nodeIndent=n,this.M()))});t.g(l,"alternateNodeIndentPastParent",l.prototype.hI);t.defineProperty(l,{hI:"alternateNodeIndentPastParent"},function(){return this.xa.nodeIndentPastParent},function(n){this.xa.nodeIndentPastParent!==n&&(t.i(n,"number",l,"alternateNodeIndentPastParent"),0<=n&&1>=n&&(this.xa.nodeIndentPastParent=n,this.M()))});t.g(l,"alternateNodeSpacing",l.prototype.iI);t.defineProperty(l,{iI:"alternateNodeSpacing"},function(){return this.xa.nodeSpacing},function(n){this.xa.nodeSpacing!==n&&(t.i(n,"number",l,"alternateNodeSpacing"),this.xa.nodeSpacing=n,this.M())});t.g(l,"alternateLayerSpacing",l.prototype.eI);t.defineProperty(l,{eI:"alternateLayerSpacing"},function(){return this.xa.layerSpacing},function(n){this.xa.layerSpacing!==n&&(t.i(n,"number",l,"alternateLayerSpacing"),this.xa.layerSpacing=n,this.M())});t.g(l,"alternateLayerSpacingParentOverlap",l.prototype.fI);t.defineProperty(l,{fI:"alternateLayerSpacingParentOverlap"},function(){return this.xa.layerSpacingParentOverlap},function(n){this.xa.layerSpacingParentOverlap!==n&&(t.i(n,"number",l,"alternateLayerSpacingParentOverlap"),0<=n&&1>=n&&(this.xa.layerSpacingParentOverlap=n,this.M()))});t.g(l,"alternateCompaction",l.prototype.bI);t.defineProperty(l,{bI:"alternateCompaction"},function(){return this.xa.compaction},function(n){this.xa.compaction!==n&&(t.Fa(n,l,l,"alternateCompaction"),n===lk||n===py)&&(this.xa.compaction=n,this.M())});t.g(l,"alternateBreadthLimit",l.prototype.YH);t.defineProperty(l,{YH:"alternateBreadthLimit"},function(){return this.xa.breadthLimit},function(n){this.xa.breadthLimit!==n&&(t.i(n,"number",l,"alternateBreadthLimit"),0<=n&&(this.xa.breadthLimit=n,this.M()))});t.g(l,"alternateRowSpacing",l.prototype.lI);t.defineProperty(l,{lI:"alternateRowSpacing"},function(){return this.xa.rowSpacing},function(n){this.xa.rowSpacing!==n&&(t.i(n,"number",l,"alternateRowSpacing"),this.xa.rowSpacing=n,this.M())});t.g(l,"alternateRowIndent",l.prototype.kI);t.defineProperty(l,{kI:"alternateRowIndent"},function(){return this.xa.rowIndent},function(n){this.xa.rowIndent!==n&&(t.i(n,"number",l,"alternateRowIndent"),0<=n&&(this.xa.rowIndent=n,this.M()))});t.g(l,"alternateCommentSpacing",l.prototype.aI);t.defineProperty(l,{aI:"alternateCommentSpacing"},function(){return this.xa.commentSpacing},function(n){this.xa.commentSpacing!==n&&(t.i(n,"number",l,"alternateCommentSpacing"),this.xa.commentSpacing=n,this.M())});t.g(l,"alternateCommentMargin",l.prototype.$H);t.defineProperty(l,{$H:"alternateCommentMargin"},function(){return this.xa.commentMargin},function(n){this.xa.commentMargin!==n&&(t.i(n,"number",l,"alternateCommentMargin"),this.xa.commentMargin=n,this.M())});t.g(l,"alternateSetsPortSpot",l.prototype.nI);t.defineProperty(l,{nI:"alternateSetsPortSpot"},function(){return this.xa.setsPortSpot},function(n){this.xa.setsPortSpot!==n&&(t.i(n,"boolean",l,"alternateSetsPortSpot"),this.xa.setsPortSpot=n,this.M())});t.g(l,"alternatePortSpot",l.prototype.jI);t.defineProperty(l,{jI:"alternatePortSpot"},function(){return this.xa.portSpot},function(n){t.l(n,e,l,"alternatePortSpot");this.xa.portSpot.O(n)||(this.xa.portSpot=n,this.M())});t.g(l,"alternateSetsChildPortSpot",l.prototype.mI);t.defineProperty(l,{mI:"alternateSetsChildPortSpot"},function(){return this.xa.setsChildPortSpot},function(n){this.xa.setsChildPortSpot!==n&&(t.i(n,"boolean",l,"alternateSetsChildPortSpot"),this.xa.setsChildPortSpot=n,this.M())});t.g(l,"alternateChildPortSpot",l.prototype.ZH);t.defineProperty(l,{ZH:"alternateChildPortSpot"},function(){return this.xa.childPortSpot},function(n){t.l(n,e,l,"alternateChildPortSpot");this.xa.childPortSpot.O(n)||(this.xa.childPortSpot=n,this.M())});l.PathDefault=ok=t.w(l,"PathDefault",-1);l.PathDestination=co=t.w(l,"PathDestination",0);l.PathSource=ul=t.w(l,"PathSource",1);l.SortingForwards=yy=t.w(l,"SortingForwards",10);l.SortingReverse=sk=t.w(l,"SortingReverse",11);l.SortingAscending=hk=t.w(l,"SortingAscending",12);l.SortingDescending=ck=t.w(l,"SortingDescending",13);l.AlignmentCenterSubtrees=ga=t.w(l,"AlignmentCenterSubtrees",20);l.AlignmentCenterChildren=us=t.w(l,"AlignmentCenterChildren",21);l.AlignmentStart=lo=t.w(l,"AlignmentStart",22);l.AlignmentEnd=ao=t.w(l,"AlignmentEnd",23);l.AlignmentBus=gs=t.w(l,"AlignmentBus",24);l.AlignmentBusBranching=vo=t.w(l,"AlignmentBusBranching",25);l.AlignmentTopLeftBus=nh=t.w(l,"AlignmentTopLeftBus",26);l.AlignmentBottomRightBus=fs=t.w(l,"AlignmentBottomRightBus",27);l.CompactionNone=lk=t.w(l,"CompactionNone",30);l.CompactionBlock=py=t.w(l,"CompactionBlock",31);l.StyleLayered=ak=t.w(l,"StyleLayered",40);l.StyleLastParents=rrt=t.w(l,"StyleLastParents",41);l.StyleAlternating=urt=t.w(l,"StyleAlternating",42);l.StyleRootOnly=frt=t.w(l,"StyleRootOnly",43);l.ArrangementVertical=vk=t.w(l,"ArrangementVertical",50);l.ArrangementHorizontal=ert=t.w(l,"ArrangementHorizontal",51);l.ArrangementFixedRoots=yk=t.w(l,"ArrangementFixedRoots",52);l.LayerIndividual=ort=t.w(l,"LayerIndividual",60);l.LayerSiblings=srt=t.w(l,"LayerSiblings",61);l.LayerUniform=pk=t.w(l,"LayerUniform",62);t.ka("TreeNetwork",wy);t.Qa(wy,ei);wy.prototype.createVertex=function(){return new oi};wy.prototype.createEdge=function(){return new bh};t.ka("TreeVertex",oi);t.Qa(oi,vt);oi.prototype.copyInheritedPropertiesFrom=function(n){null!==n&&(this.sorting=n.sorting,this.comparer=n.comparer,this.angle=n.angle,this.alignment=n.alignment,this.nodeIndent=n.nodeIndent,this.nodeIndentPastParent=n.nodeIndentPastParent,this.nodeSpacing=n.nodeSpacing,this.layerSpacing=n.layerSpacing,this.layerSpacingParentOverlap=n.layerSpacingParentOverlap,this.compaction=n.compaction,this.breadthLimit=n.breadthLimit,this.rowSpacing=n.rowSpacing,this.rowIndent=n.rowIndent,this.commentSpacing=n.commentSpacing,this.commentMargin=n.commentMargin,this.setsPortSpot=n.setsPortSpot,this.portSpot=n.portSpot,this.setsChildPortSpot=n.setsChildPortSpot,this.childPortSpot=n.childPortSpot)};t.A(oi,{Wm:"childrenCount"},function(){return this.children.length});t.g(oi,"relativePosition",oi.prototype.dK);t.defineProperty(oi,{dK:"relativePosition"},function(){return this.qa},function(n){this.qa.set(n)});t.g(oi,"subtreeSize",oi.prototype.vK);t.defineProperty(oi,{vK:"subtreeSize"},function(){return this.eb},function(n){this.eb.set(n)});t.g(oi,"subtreeOffset",oi.prototype.uK);t.defineProperty(oi,{uK:"subtreeOffset"},function(){return this.Na},function(n){this.Na.set(n)});t.ka("TreeEdge",bh);t.Qa(bh,rr);bh.prototype.commit=function(){var n=this.link,a,l,f,c,v,y;if(null!==n&&!n.qj){var u=this.network.ic,i=null,o=null;switch(u.Lf){case co:i=this.fromVertex;o=this.toVertex;break;case ul:i=this.toVertex;o=this.fromVertex;break;default:t.m("Unhandled path value "+u.Lf.toString())}if(null!==i&&null!==o)if(u=this.fs,0!==u.x||0!==u.y||i.jK){var o=i.Tb,e=ye(i),s=da(i),h=i.rowSpacing;if(n.updateRoute(),a=n.Je===ae,l=n.pc,n.Kl(),l||a){for(f=2;4<n.ra;)n.lG(2);c=n.o(1);v=n.o(2)}else{for(f=1;3<n.ra;)n.lG(1);c=n.o(0);v=n.o(n.ra-1)}y=n.o(n.ra-1);0===e?(i.alignment===ao?(e=o.bottom+u.y,0===u.y&&c.y>y.y+i.rowIndent&&(e=Math.min(e,Math.max(c.y,e-ds(i))))):i.alignment===lo?(e=o.top+u.y,0===u.y&&c.y<y.y-i.rowIndent&&(e=Math.max(e,Math.min(c.y,e+ds(i))))):e=i.aq||i.bq&&1===i.maxGenerationCount?o.top-i.Na.y+u.y:o.y+o.height/2+u.y,a?(n.C(f,c.x,e),f++,n.C(f,o.right+s,e),f++,n.C(f,o.right+s+(u.x-h)/3,e),f++,n.C(f,o.right+s+2*(u.x-h)/3,e),f++,n.C(f,o.right+s+(u.x-h),e),f++,n.C(f,v.x,e)):(l&&(n.C(f,o.right+s/2,c.y),f++),n.C(f,o.right+s/2,e),f++,n.C(f,o.right+s+u.x-(l?h/2:h),e),f++,l&&n.C(f,n.o(f-1).x,v.y))):90===e?(i.alignment===ao?(e=o.right+u.x,0===u.x&&c.x>y.x+i.rowIndent&&(e=Math.min(e,Math.max(c.x,e-ds(i))))):i.alignment===lo?(e=o.left+u.x,0===u.x&&c.x<y.x-i.rowIndent&&(e=Math.max(e,Math.min(c.x,e+ds(i))))):e=i.aq||i.bq&&1===i.maxGenerationCount?o.left-i.Na.x+u.x:o.x+o.width/2+u.x,a?(n.C(f,e,c.y),f++,n.C(f,e,o.bottom+s),f++,n.C(f,e,o.bottom+s+(u.y-h)/3),f++,n.C(f,e,o.bottom+s+2*(u.y-h)/3),f++,n.C(f,e,o.bottom+s+(u.y-h)),f++,n.C(f,e,v.y)):(l&&(n.C(f,c.x,o.bottom+s/2),f++),n.C(f,e,o.bottom+s/2),f++,n.C(f,e,o.bottom+s+u.y-(l?h/2:h)),f++,l&&n.C(f,v.x,n.o(f-1).y))):180===e?(i.alignment===ao?(e=o.bottom+u.y,0===u.y&&c.y>y.y+i.rowIndent&&(e=Math.min(e,Math.max(c.y,e-ds(i))))):i.alignment===lo?(e=o.top+u.y,0===u.y&&c.y<y.y-i.rowIndent&&(e=Math.max(e,Math.min(c.y,e+ds(i))))):e=i.aq||i.bq&&1===i.maxGenerationCount?o.top-i.Na.y+u.y:o.y+o.height/2+u.y,a?(n.C(f,c.x,e),f++,n.C(f,o.left-s,e),f++,n.C(f,o.left-s+(u.x+h)/3,e),f++,n.C(f,o.left-s+2*(u.x+h)/3,e),f++,n.C(f,o.left-s+(u.x+h),e),f++,n.C(f,v.x,e)):(l&&(n.C(f,o.left-s/2,c.y),f++),n.C(f,o.left-s/2,e),f++,n.C(f,o.left-s+u.x+(l?h/2:h),e),f++,l&&n.C(f,n.o(f-1).x,v.y))):270===e?(i.alignment===ao?(e=o.right+u.x,0===u.x&&c.x>y.x+i.rowIndent&&(e=Math.min(e,Math.max(c.x,e-ds(i))))):i.alignment===lo?(e=o.left+u.x,0===u.x&&c.x<y.x-i.rowIndent&&(e=Math.max(e,Math.min(c.x,e+ds(i))))):e=i.aq||i.bq&&1===i.maxGenerationCount?o.left-i.Na.x+u.x:o.x+o.width/2+u.x,a?(n.C(f,e,c.y),f++,n.C(f,e,o.top-s),f++,n.C(f,e,o.top-s+(u.y+h)/3),f++,n.C(f,e,o.top-s+2*(u.y+h)/3),f++,n.C(f,e,o.top-s+(u.y+h)),f++,n.C(f,e,v.y)):(l&&(n.C(f,c.x,o.top-s/2),f++),n.C(f,e,o.top-s/2),f++,n.C(f,e,o.top-s+u.y+(l?h/2:h)),f++,l&&n.C(f,v.x,n.o(f-1).y))):t.m("Invalid angle "+e);n.ij()}else s=i,h=o,r&&t.l(s,oi,bh,"adjustRouteForAngleChange:parent"),r&&t.l(h,oi,bh,"adjustRouteForAngleChange:child"),n=this.link,i=ye(s),i!==ye(h)&&(u=da(s),o=s.Tb,s=h.Tb,0===i&&s.left-o.right<u+1||90===i&&s.top-o.bottom<u+1||180===i&&o.left-s.right<u+1||270===i&&o.top-s.bottom<u+1||(n.updateRoute(),s=n.Je===ae,h=n.pc,a=wh(this.fromVertex.alignment),n.Kl(),0===i?(i=o.right+u/2,s?4===n.ra&&(u=n.o(3).y,n.aa(1,i-20,n.o(1).y),n.C(2,i-20,u),n.C(3,i,u),n.C(4,i+20,u),n.aa(5,n.o(5).x,u)):h?a?n.aa(3,n.o(2).x,n.o(4).y):6===n.ra&&(n.aa(2,i,n.o(2).y),n.aa(3,i,n.o(3).y)):4===n.ra?n.C(2,i,n.o(2).y):3===n.ra?n.aa(1,i,n.o(2).y):2===n.ra&&n.C(1,i,n.o(1).y)):90===i?(u=o.bottom+u/2,s?4===n.ra&&(i=n.o(3).x,n.aa(1,n.o(1).x,u-20),n.C(2,i,u-20),n.C(3,i,u),n.C(4,i,u+20),n.aa(5,i,n.o(5).y)):h?a?n.aa(3,n.o(2).x,n.o(4).y):6===n.ra&&(n.aa(2,n.o(2).x,u),n.aa(3,n.o(3).x,u)):4===n.ra?n.C(2,n.o(2).x,u):3===n.ra?n.aa(1,n.o(2).x,u):2===n.ra&&n.C(1,n.o(1).x,u)):180===i?(i=o.left-u/2,s?4===n.ra&&(u=n.o(3).y,n.aa(1,i+20,n.o(1).y),n.C(2,i+20,u),n.C(3,i,u),n.C(4,i-20,u),n.aa(5,n.o(5).x,u)):h?a?n.aa(3,n.o(2).x,n.o(4).y):6===n.ra&&(n.aa(2,i,n.o(2).y),n.aa(3,i,n.o(3).y)):4===n.ra?n.C(2,i,n.o(2).y):3===n.ra?n.aa(1,i,n.o(2).y):2===n.ra&&n.C(1,i,n.o(1).y)):270===i&&(u=o.top-u/2,s?4===n.ra&&(i=n.o(3).x,n.aa(1,n.o(1).x,u+20),n.C(2,i,u+20),n.C(3,i,u),n.C(4,i,u-20),n.aa(5,i,n.o(5).y)):h?a?n.aa(3,n.o(2).x,n.o(4).y):6===n.ra&&(n.aa(2,n.o(2).x,u),n.aa(3,n.o(3).x,u)):4===n.ra?n.C(2,n.o(2).x,u):3===n.ra?n.aa(1,n.o(2).x,u):2===n.ra&&n.C(1,n.o(1).x,u)),n.ij()))}};t.g(bh,"relativePoint",bh.prototype.cK);t.defineProperty(bh,{cK:"relativePoint"},function(){return this.fs},function(n){this.fs.set(n)});blt.prototype.Ss=function(n){var i=n.sa,r=n.ta,e=n.D,t=n.F,u=Math.min(i,e),f=Math.min(r,t),i=Math.abs(e-i),r=Math.abs(t-r),t=new ai(u,f);return t.Ka.add(new ut(fr,u+i,f)),t.Ka.add(new ut(fr,u+i,f+r)),t.Ka.add(new ut(fr,u,f+r).close()),n.type=wr,n.Fb.add(t),n};es.version="1.4.13";n&&(n.module&&"object"==typeof n.module&&"object"==typeof n.module.exports?n.module.exports=es:n.define&&"function"==typeof n.define&&n.define.amd?(n.go=es,n.define(es)):n.go=es)}(window),function(n,t){function s(){var n=r.elements;return"string"==typeof n?n.split(" "):n}function u(n){var t=a[n[l]];return t||(t={},o++,n[l]=o,a[o]=t),t}function h(n,r,f){return(r||(r=t),i)?r.createElement(n):(f||(f=u(r)),r=f.cache[n]?f.cache[n].cloneNode():p.test(n)?(f.cache[n]=f.createElem(n)).cloneNode():f.createElem(n),r.canHaveChildren&&!y.test(n)?f.frag.appendChild(r):r)}function v(n,t){t.cache||(t.cache={},t.createElem=n.createElement,t.createFrag=n.createDocumentFragment,t.frag=t.createFrag());n.createElement=function(i){return r.shivMethods?h(i,n,t):t.createElem(i)};n.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+s().join().replace(/\w+/g,function(n){return t.createElem(n),t.frag.createElement(n),'c("'+n+'")'})+");return n}")(r,t.frag)}function c(n){var s,o,f;return n||(n=t),s=u(n),!r.shivCSS||e||s.hasCSS||(f=n,o=f.createElement("p"),f=f.getElementsByTagName("head")[0]||f.documentElement,o.innerHTML="x<style>article,aside,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}<\/style>",o=f.insertBefore(o.lastChild,f.firstChild),s.hasCSS=!!o),i||v(n,s),n}var f=n.html5||{},y=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,e,l="_html5shiv",o=0,a={},i,r;(function(){var n,u,r;try{n=t.createElement("a");n.innerHTML="<xyz><\/xyz>";e="hidden"in n;(u=1==n.childNodes.length)||(t.createElement("a"),r=t.createDocumentFragment(),u="undefined"==typeof r.cloneNode||"undefined"==typeof r.createDocumentFragment||"undefined"==typeof r.createElement);i=u}catch(f){i=e=!0}})();r={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video",version:"3.6.2",shivCSS:!1!==f.shivCSS,supportsUnknownElements:i,shivMethods:!1!==f.shivMethods,type:"default",shivDocument:c,createElement:h,createDocumentFragment:function(n,r){if(n||(n=t),i)return n.createDocumentFragment();for(var r=r||u(n),e=r.frag.cloneNode(),f=0,o=s(),h=o.length;f<h;f++)e.createElement(o[f]);return e}};n.html5=r;c(t)}(this,document);AmCharts||(AmCharts={themes:{},maps:{},inheriting:{},charts:[],onReadyArray:[],useUTC:!1,updateRate:40,uid:0,lang:{},translations:{},mapTranslations:{},windows:{},initHandlers:[]});AmCharts.Class=function(n){var t=function(){arguments[0]!==AmCharts.inheriting&&(this.events={},this.construct.apply(this,arguments))},i;n.inherits?(t.prototype=new n.inherits(AmCharts.inheriting),t.base=n.inherits.prototype,delete n.inherits):(t.prototype.createEvents=function(){for(var n=0,t=arguments.length;n<t;n++)this.events[arguments[n]]=[]},t.prototype.listenTo=function(n,t,i){this.removeListener(n,t,i);n.events[t].push({handler:i,scope:this})},t.prototype.addListener=function(n,t,i){this.removeListener(this,n,t);this.events[n].push({handler:t,scope:i})},t.prototype.removeListener=function(n,t,i){if(n&&n.events)for(n=n.events[t],t=n.length-1;0<=t;t--)n[t].handler===i&&n.splice(t,1)},t.prototype.fire=function(n,t){for(var r,u=this.events[n],i=0,f=u.length;i<f;i++)r=u[i],r.handler.call(r.scope,t)});for(i in n)t.prototype[i]=n[i];return t};AmCharts.addChart=function(n){AmCharts.charts.push(n)};AmCharts.removeChart=function(n){for(var i=AmCharts.charts,t=i.length-1;0<=t;t--)i[t]==n&&i.splice(t,1)};AmCharts.isModern=!0;AmCharts.getIEVersion=function(){var i=0,n,t;return"Microsoft Internet Explorer"==navigator.appName?(n=navigator.userAgent,t=/MSIE ([0-9]{1,}[.0-9]{0,})/,null!=t.exec(n)&&(i=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(n=navigator.userAgent,t=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=t.exec(n)&&(i=parseFloat(RegExp.$1))),i};AmCharts.applyLang=function(n,t){var i=AmCharts.translations;t.dayNames=AmCharts.dayNames;t.shortDayNames=AmCharts.shortDayNames;t.monthNames=AmCharts.monthNames;t.shortMonthNames=AmCharts.shortMonthNames;i&&(i=i[n])&&(AmCharts.lang=i,i.monthNames&&(t.dayNames=i.dayNames,t.shortDayNames=i.shortDayNames,t.monthNames=i.monthNames,t.shortMonthNames=i.shortMonthNames))};AmCharts.IEversion=AmCharts.getIEVersion();9>AmCharts.IEversion&&0<AmCharts.IEversion&&(AmCharts.isModern=!1,AmCharts.isIE=!0);AmCharts.dx=0;AmCharts.dy=0;(document.addEventListener||window.opera)&&(AmCharts.isNN=!0,AmCharts.isIE=!1,AmCharts.dx=.5,AmCharts.dy=.5);document.attachEvent&&(AmCharts.isNN=!1,AmCharts.isIE=!0,AmCharts.isModern||(AmCharts.dx=0,AmCharts.dy=0));window.chrome&&(AmCharts.chrome=!0);AmCharts.handleResize=function(){for(var t,i=AmCharts.charts,n=0;n<i.length;n++)t=i[n],t&&t.div&&t.handleResize()};AmCharts.handleMouseUp=function(n){for(var r,i=AmCharts.charts,t=0;t<i.length;t++)r=i[t],r&&r.handleReleaseOutside(n)};AmCharts.handleMouseMove=function(n){for(var r,i=AmCharts.charts,t=0;t<i.length;t++)r=i[t],r&&r.handleMouseMove(n)};AmCharts.resetMouseOver=function(){for(var i,t=AmCharts.charts,n=0;n<t.length;n++)i=t[n],i&&(i.mouseIsOver=!1)};AmCharts.ready=function(n){AmCharts.onReadyArray.push(n)};AmCharts.handleLoad=function(){var t,n,i;for(AmCharts.isReady=!0,t=AmCharts.onReadyArray,n=0;n<t.length;n++)i=t[n],isNaN(AmCharts.processDelay)?i():setTimeout(i,AmCharts.processDelay*n)};AmCharts.addInitHandler=function(n,t){AmCharts.initHandlers.push({method:n,types:t})};AmCharts.callInitHandler=function(n){var r=AmCharts.initHandlers,t,i;if(AmCharts.initHandlers)for(t=0;t<r.length;t++)i=r[t],i.types&&-1!=i.types.indexOf(n.type)&&i.method(n)};AmCharts.getUniqueId=function(){return AmCharts.uid++,"AmChartsEl-"+AmCharts.uid};AmCharts.isNN&&(document.addEventListener("mousemove",AmCharts.handleMouseMove,!0),window.addEventListener("resize",AmCharts.handleResize,!0),document.addEventListener("mouseup",AmCharts.handleMouseUp,!0),window.addEventListener("load",AmCharts.handleLoad,!0));AmCharts.isIE&&(document.attachEvent("onmousemove",AmCharts.handleMouseMove),window.attachEvent("onresize",AmCharts.handleResize),document.attachEvent("onmouseup",AmCharts.handleMouseUp),window.attachEvent("onload",AmCharts.handleLoad));AmCharts.clear=function(){var t=AmCharts.charts,n;if(t)for(n=0;n<t.length;n++)t[n].clear();AmCharts.charts=null;AmCharts.isNN&&(document.removeEventListener("mousemove",AmCharts.handleMouseMove,!0),window.removeEventListener("resize",AmCharts.handleResize,!0),document.removeEventListener("mouseup",AmCharts.handleMouseUp,!0),window.removeEventListener("load",AmCharts.handleLoad,!0));AmCharts.isIE&&(document.detachEvent("onmousemove",AmCharts.handleMouseMove),window.detachEvent("onresize",AmCharts.handleResize),document.detachEvent("onmouseup",AmCharts.handleMouseUp),window.detachEvent("onload",AmCharts.handleLoad))};AmCharts.makeChart=function(n,t,i){var f=t.type,u=t.theme,r;AmCharts.isString(u)&&(u=AmCharts.themes[u],t.theme=u);switch(f){case"serial":r=new AmCharts.AmSerialChart(u);break;case"xy":r=new AmCharts.AmXYChart(u);break;case"pie":r=new AmCharts.AmPieChart(u);break;case"radar":r=new AmCharts.AmRadarChart(u);break;case"gauge":r=new AmCharts.AmAngularGauge(u);break;case"funnel":r=new AmCharts.AmFunnelChart(u);break;case"map":r=new AmCharts.AmMap(u);break;case"stock":r=new AmCharts.AmStockChart(u)}return AmCharts.extend(r,t),AmCharts.isReady?isNaN(i)?r.write(n):setTimeout(function(){AmCharts.realWrite(r,n)},i):AmCharts.ready(function(){isNaN(i)?r.write(n):setTimeout(function(){AmCharts.realWrite(r,n)},i)}),r};AmCharts.realWrite=function(n,t){n.write(t)};AmCharts.toBoolean=function(n,t){if(void 0===n)return t;switch(String(n).toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(n)}};AmCharts.removeFromArray=function(n,t){for(var i=n.length-1;0<=i;i--)n[i]==t&&n.splice(i,1)};AmCharts.getDecimals=function(n){var t=0;return isNaN(n)||(n=String(n),-1!=n.indexOf("e-")?t=Number(n.split("-")[1]):-1!=n.indexOf(".")&&(t=n.split(".")[1].length)),t};AmCharts.wrappedText=function(n,t,i,r,u,f,e,o,s){var c=AmCharts.text(n,t,i,r,u,f,e),a="\n",v,h,y;if(AmCharts.isModern||(a="<br>"),10<s)return c;if(c){if(v=c.getBBox(),v.width>o){for(c.remove(),c=[],h=0;-1<(index=t.indexOf(" ",h));)c.push(index),h=index+1;for(var w=Math.round(t.length/2),p=1e3,l,h=0;h<c.length;h++)y=Math.abs(c[h]-w),y<p&&(l=c[h],p=y);if(isNaN(l)){if(o=Math.ceil(v.width/o),0==s)for(h=1;h<o;h++)l=Math.round(t.length/o*h),t=t.substr(0,l)+a+t.substr(l);return AmCharts.text(n,t,i,r,u,f,e)}return t=t.substr(0,l)+a+t.substr(l+1),AmCharts.wrappedText(n,t,i,r,u,f,e,o,s+1)}return c}};AmCharts.getStyle=function(n,t){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(n,"").getPropertyValue(t):n.currentStyle&&(t=t.replace(/\-(\w)/g,function(n,t){return t.toUpperCase()}),i=n.currentStyle[t]),i};AmCharts.removePx=function(n){if(void 0!=n)return Number(n.substring(0,n.length-2))};AmCharts.getURL=function(n,t){if(n)if("_self"!=t&&t)if("_top"==t&&window.top)window.top.location.href=n;else if("_parent"==t&&window.parent)window.parent.location.href=n;else if("_blank"==t)window.open(n);else{var i=document.getElementsByName(t)[0];i?i.src=n:(i=AmCharts.windows[t])?i.opener&&!i.opener.closed?i.location.href=n:AmCharts.windows[t]=window.open(n):AmCharts.windows[t]=window.open(n)}else window.location.href=n};AmCharts.ifArray=function(n){return n&&0<n.length?!0:!1};AmCharts.callMethod=function(n,t){for(var i,e,u,f,r=0;r<t.length;r++)if(i=t[r],i&&(i[n]&&i[n](),e=i.length,0<e))for(u=0;u<e;u++)f=i[u],f&&f[n]&&f[n]()};AmCharts.toNumber=function(n){return"number"==typeof n?n:Number(String(n).replace(/[^0-9\-.]+/g,""))};AmCharts.toColor=function(n){var t,i;if(""!==n&&void 0!==n)if(-1!=n.indexOf(","))for(n=n.split(","),t=0;t<n.length;t++)i=n[t].substring(n[t].length-6,n[t].length),n[t]="#"+i;else n=n.substring(n.length-6,n.length),n="#"+n;return n};AmCharts.toCoordinate=function(n,t,i){var r;return void 0!==n&&(n=String(n),i&&i<t&&(t=i),r=Number(n),-1!=n.indexOf("!")&&(r=t-Number(n.substr(1))),-1!=n.indexOf("%")&&(r=t*Number(n.substr(0,n.length-1))/100)),r};AmCharts.fitToBounds=function(n,t,i){return n<t&&(n=t),n>i&&(n=i),n};AmCharts.isDefined=function(n){return void 0===n?!1:!0};AmCharts.stripNumbers=function(n){return n.replace(/[0-9]+/g,"")};AmCharts.roundTo=function(n,t){if(0>t)return n;var i=Math.pow(10,t);return Math.round(n*i)/i};AmCharts.toFixed=function(n,t){var i=String(Math.round(n*Math.pow(10,t))),r,u;if(0<t){if(r=i.length,r<t)for(u=0;u<t-r;u++)i="0"+i;return r=i.substring(0,i.length-t),""===r&&(r=0),r+"."+i.substring(i.length-t,i.length)}return String(i)};AmCharts.formatDuration=function(n,t,i,r,u,f){var e=AmCharts.intervals,s=f.decimalSeparator,o;if(n>=e[t].contains)return o=n-Math.floor(n/e[t].contains)*e[t].contains,"ss"==t&&(o=AmCharts.formatNumber(o,f),1==o.split(s)[0].length&&(o="0"+o)),("mm"==t||"hh"==t)&&10>o&&(o="0"+o),i=o+""+r[t]+""+i,n=Math.floor(n/e[t].contains),t=e[t].nextInterval,AmCharts.formatDuration(n,t,i,r,u,f);if("ss"==t&&(n=AmCharts.formatNumber(n,f),1==n.split(s)[0].length&&(n="0"+n)),("mm"==t||"hh"==t)&&10>n&&(n="0"+n),i=n+""+r[t]+""+i,e[u].count>e[t].count)for(n=e[t].count;n<e[u].count;n++)t=e[t].nextInterval,"ss"==t||"mm"==t||"hh"==t?i="00"+r[t]+""+i:"DD"==t&&(i="0"+r[t]+""+i);return":"==i.charAt(i.length-1)&&(i=i.substring(0,i.length-1)),i};AmCharts.formatNumber=function(n,t,i,r,u){var h,c,f,s,o,e;if(n=AmCharts.roundTo(n,t.precision),isNaN(i)&&(i=t.precision),h=t.decimalSeparator,t=t.thousandsSeparator,c=0>n?"-":"",n=Math.abs(n),s=String(n),o=!1,-1!=s.indexOf("e")&&(o=!0),0<=i&&!o&&(s=AmCharts.toFixed(n,i)),f="",o)f=s;else{for(s=s.split("."),o=String(s[0]),e=o.length;0<=e;e-=3)f=e!=o.length?0!==e?o.substring(e-3,e)+t+f:o.substring(e-3,e)+f:o.substring(e-3,e);void 0!==s[1]&&(f=f+h+s[1]);void 0!==i&&0<i&&"0"!=f&&(f=AmCharts.addZeroes(f,h,i))}return f=c+f,""===c&&!0===r&&0!==n&&(f="+"+f),!0===u&&(f+="%"),f};AmCharts.addZeroes=function(n,t,i){return n=n.split(t),void 0===n[1]&&0<i&&(n[1]="0"),n[1].length<i?(n[1]+="0",AmCharts.addZeroes(n[0]+t+n[1],t,i)):void 0!==n[1]?n[0]+t+n[1]:n[0]};AmCharts.scientificToNormal=function(n){var t,i,r;if(n=String(n).split("e"),"-"==n[1].substr(0,1)){for(t="0.",i=0;i<Math.abs(Number(n[1]))-1;i++)t+="0";t+=n[0].split(".").join("")}else for(r=0,t=n[0].split("."),t[1]&&(r=t[1].length),t=n[0].split(".").join(""),i=0;i<Math.abs(Number(n[1]))-r;i++)t+="0";return t};AmCharts.toScientific=function(n,t){if(0===n)return"0";var i=Math.floor(Math.log(Math.abs(n))*Math.LOG10E);return Math.pow(10,i),mantissa=String(mantissa).split(".").join(t),String(mantissa)+"e"+i};AmCharts.randomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)};AmCharts.hitTest=function(n,t,i){var r=!1,f=n.x,e=n.x+n.width,o=n.y,s=n.y+n.height,u=AmCharts.isInRectangle;return r||(r=u(f,o,t)),r||(r=u(f,s,t)),r||(r=u(e,o,t)),r||(r=u(e,s,t)),r||!0===i||(r=AmCharts.hitTest(t,n,!0)),r};AmCharts.isInRectangle=function(n,t,i){return n>=i.x-5&&n<=i.x+i.width+5&&t>=i.y-5&&t<=i.y+i.height+5?!0:!1};AmCharts.isPercents=function(n){if(-1!=String(n).indexOf("%"))return!0};AmCharts.findPosX=function(n){var t=n,i=n.offsetLeft;if(n.offsetParent){for(;n=n.offsetParent;)i+=n.offsetLeft;for(;(t=t.parentNode)&&t!=document.body;)i-=t.scrollLeft||0}return i};AmCharts.findPosY=function(n){var t=n,i=n.offsetTop;if(n.offsetParent){for(;n=n.offsetParent;)i+=n.offsetTop;for(;(t=t.parentNode)&&t!=document.body;)i-=t.scrollTop||0}return i};AmCharts.findIfFixed=function(n){if(n.offsetParent)for(;n=n.offsetParent;)if("fixed"==AmCharts.getStyle(n,"position"))return!0;return!1};AmCharts.findIfAuto=function(n){return n.style&&"auto"==AmCharts.getStyle(n,"overflow")?!0:n.parentNode?AmCharts.findIfAuto(n.parentNode):!1};AmCharts.findScrollLeft=function(n,t){return n.scrollLeft&&(t+=n.scrollLeft),n.parentNode?AmCharts.findScrollLeft(n.parentNode,t):t};AmCharts.findScrollTop=function(n,t){return n.scrollTop&&(t+=n.scrollTop),n.parentNode?AmCharts.findScrollTop(n.parentNode,t):t};AmCharts.formatValue=function(n,t,i,r,u,f,e,o){var h,c,s;if(t)for(void 0===u&&(u=""),h=0;h<i.length;h++)c=i[h],s=t[c],void 0!==s&&(s=f?AmCharts.addPrefix(s,o,e,r):AmCharts.formatNumber(s,r),n=n.replace(new RegExp("\\[\\["+u+""+c+"\\]\\]","g"),s));return n};AmCharts.formatDataContextValue=function(n,t){var u,r,i;if(n)for(u=n.match(/\[\[.*?\]\]/g),r=0;r<u.length;r++)i=u[r],i=i.substr(2,i.length-4),void 0!==t[i]&&(n=n.replace(new RegExp("\\[\\["+i+"\\]\\]","g"),t[i]));return n};AmCharts.massReplace=function(n,t){var i,r;for(i in t)t.hasOwnProperty(i)&&(r=t[i],void 0===r&&(r=""),n=n.replace(i,r));return n};AmCharts.cleanFromEmpty=function(n){return n.replace(/\[\[[^\]]*\]\]/g,"")};AmCharts.addPrefix=function(n,t,i,r,u){var s=AmCharts.formatNumber(n,r),h="",f,e,o;if(0===n)return"0";if(0>n&&(h="-"),n=Math.abs(n),1<n){for(f=t.length-1;-1<f;f--)if(n>=t[f].number&&(e=n/t[f].number,o=Number(r.precision),1>o&&(o=1),i=AmCharts.roundTo(e,o),o=AmCharts.formatNumber(i,{precision:-1,decimalSeparator:r.decimalSeparator,thousandsSeparator:r.thousandsSeparator}),!u||e==i)){s=h+""+o+""+t[f].prefix;break}}else for(f=0;f<i.length;f++)if(n<=i[f].number){e=n/i[f].number;o=Math.abs(Math.round(Math.log(e)*Math.LOG10E));e=AmCharts.roundTo(e,o);s=h+""+e+""+i[f].prefix;break}return s};AmCharts.remove=function(n){n&&n.remove()};AmCharts.recommended=function(){var n="js";return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||swfobject&&swfobject.hasFlashPlayerVersion("8")&&(n="flash"),n};AmCharts.getEffect=function(n){return">"==n&&(n="easeOutSine"),"<"==n&&(n="easeInSine"),"elastic"==n&&(n="easeOutElastic"),n};AmCharts.getObjById=function(n,t){for(var u,r,i=0;i<n.length;i++)r=n[i],r.id==t&&(u=r);return u};AmCharts.applyTheme=function(n,t,i){t||(t=AmCharts.theme);t&&t[i]&&AmCharts.extend(n,t[i])};AmCharts.isString=function(n){return"string"==typeof n?!0:!1};AmCharts.extend=function(n,t,i){for(var r in t)i?n.hasOwnProperty(r)||(n[r]=t[r]):n[r]=t[r];return n};AmCharts.copyProperties=function(n,t){for(var i in n)n.hasOwnProperty(i)&&"events"!=i&&void 0!==n[i]&&"function"!=typeof n[i]&&"cname"!=i&&(t[i]=n[i])};AmCharts.processObject=function(n,t,i){return!1==n instanceof t&&(n=AmCharts.extend(new t(i),n)),n};AmCharts.fixNewLines=function(n){var t=RegExp("\\n","g");return n&&(n=n.replace(t,"<br />")),n};AmCharts.fixBrakes=function(n){if(AmCharts.isModern){var t=RegExp("<br>","g");n&&(n=n.replace(t,"\n"))}else n=AmCharts.fixNewLines(n);return n};AmCharts.deleteObject=function(n,t){if(n&&((void 0===t||null===t)&&(t=20),0!==t))if("[object Array]"===Object.prototype.toString.call(n))for(var i=0;i<n.length;i++)AmCharts.deleteObject(n[i],t-1),n[i]=null;else if(n&&!n.tagName)try{for(i in n)n[i]&&("object"==typeof n[i]&&AmCharts.deleteObject(n[i],t-1),"function"!=typeof n[i]&&(n[i]=null))}catch(r){}};AmCharts.bounce=function(n,t,i,r,u){return(t/=u)<1/2.75?7.5625*r*t*t+i:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+i:r*(7.5625*(t-=2.625/2.75)*t+.984375)+i};AmCharts.easeInSine=function(n,t,i,r,u){return-r*Math.cos(t/u*(Math.PI/2))+r+i};AmCharts.easeOutSine=function(n,t,i,r,u){return r*Math.sin(t/u*(Math.PI/2))+i};AmCharts.easeOutElastic=function(n,t,i,r,u){n=1.70158;var f=0,e=r;return 0===t?i:1==(t/=u)?i+r:(f||(f=.3*u),e<Math.abs(r)?(e=r,n=f/4):n=f/(2*Math.PI)*Math.asin(r/e),e*Math.pow(2,-10*t)*Math.sin(2*(t*u-n)*Math.PI/f)+r+i)};AmCharts.AxisBase=AmCharts.Class({construct:function(n){this.createEvents("clickItem","rollOverItem","rollOutItem");this.viY=this.viX=this.y=this.x=this.dy=this.dx=0;this.axisThickness=1;this.axisColor="#000000";this.axisAlpha=1;this.gridCount=this.tickLength=5;this.gridAlpha=.15;this.gridThickness=1;this.gridColor="#000000";this.dashLength=0;this.labelFrequency=1;this.showLastLabel=this.showFirstLabel=!0;this.fillColor="#FFFFFF";this.fillAlpha=0;this.labelsEnabled=!0;this.labelRotation=0;this.autoGridCount=!0;this.valueRollOverColor="#CC0000";this.offset=0;this.guides=[];this.visible=!0;this.counter=0;this.guides=[];this.ignoreAxisWidth=this.inside=!1;this.minHorizontalGap=75;this.minVerticalGap=35;this.titleBold=!0;this.minorGridEnabled=!1;this.minorGridAlpha=.07;this.autoWrap=!1;this.titleAlign="middle";this.labelOffset=0;AmCharts.applyTheme(this,n,"AxisBase")},zoom:function(n,t){this.start=n;this.end=t;this.dataChanged=!0;this.draw()},fixAxisPosition:function(){var n=this.position;"H"==this.orientation?("left"==n&&(n="bottom"),"right"==n&&(n="top")):("bottom"==n&&(n="left"),"top"==n&&(n="right"));this.position=n},draw:function(){var n=this.chart,t,i;this.allLabels=[];this.counter=0;this.destroy();this.fixAxisPosition();this.labels=[];t=n.container;i=t.set();n.gridSet.push(i);this.set=i;t=t.set();n.axesLabelsSet.push(t);this.labelsSet=t;this.axisLine=new this.axisRenderer(this);this.autoGridCount?("V"==this.orientation?(n=this.height/this.minVerticalGap,3>n&&(n=3)):n=this.width/this.minHorizontalGap,this.gridCountR=Math.max(n,1)):this.gridCountR=this.gridCount;this.axisWidth=this.axisLine.axisWidth;this.addTitle()},setOrientation:function(n){this.orientation=n?"H":"V"},addTitle:function(){var r=this.title,n,t,i;r&&(n=this.chart,t=this.titleColor,void 0===t&&(t=n.color),i=this.titleFontSize,isNaN(i)&&(i=n.fontSize+1),this.titleLabel=AmCharts.text(n.container,r,t,n.fontFamily,i,this.titleAlign,this.titleBold))},positionTitle:function(){var u=this.titleLabel,t,f,n,i,e;if(u){i=this.labelsSet;n={};0<i.length()?n=i.getBBox():(n.x=0,n.y=0,n.width=this.viW,n.height=this.viH);i.push(u);i=n.x;e=n.y;AmCharts.VML&&(this.rotate?i-=this.x:e-=this.y);var a=n.width,n=n.height,o=this.viW,s=this.viH,h=0,c=u.getBBox().height/2,l=this.inside,r=this.titleAlign;switch(this.position){case"top":t="left"==r?-1:"right"==r?o:o/2;f=e-10-c;break;case"bottom":t="left"==r?-1:"right"==r?o:o/2;f=e+n+10+c;break;case"left":t=i-10-c;l&&(t-=5);f="left"==r?s+1:"right"==r?-1:s/2;h=-90;break;case"right":t=i+a+10+c-3;l&&(t+=7);f="left"==r?s+2:"right"==r?-2:s/2;h=-90}this.marginsChanged?(u.translate(t,f),this.tx=t,this.ty=f):u.translate(this.tx,this.ty);this.marginsChanged=!1;0!==h&&u.rotate(h)}},pushAxisItem:function(n,t){var r=this,i=n.graphics();0<i.length()&&(t?r.labelsSet.push(i):r.set.push(i));(i=n.getLabel())&&(this.labelsSet.push(i),i.click(function(t){r.handleMouse(t,n,"clickItem")}).mouseover(function(t){r.handleMouse(t,n,"rollOverItem")}).mouseout(function(t){r.handleMouse(t,n,"rollOutItem")}))},handleMouse:function(n,t,i){this.fire(i,{type:i,value:t.value,serialDataItem:t.serialDataItem,axis:this,target:t.label,chart:this.chart,event:n})},addGuide:function(n){for(var t=this.guides,r=!1,i=0;i<t.length;i++)t[i]==n&&(r=!0);r||t.push(n)},removeGuide:function(n){for(var i=this.guides,t=0;t<i.length;t++)i[t]==n&&i.splice(t,1)},handleGuideOver:function(n){clearTimeout(this.chart.hoverInt);var t=n.graphics.getBBox(),r=t.x+t.width/2,t=t.y+t.height/2,i=n.fillColor;void 0===i&&(i=n.lineColor);this.chart.showBalloon(n.balloonText,i,!0,r,t)},handleGuideOut:function(){this.chart.hideBalloon()},addEventListeners:function(n,t){var i=this;n.mouseover(function(){i.handleGuideOver(t)});n.mouseout(function(){i.handleGuideOut(t)})},getBBox:function(){var n=this.labelsSet.getBBox();return AmCharts.VML||(n={x:n.x+this.x,y:n.y+this.y,width:n.width,height:n.height}),n},destroy:function(){AmCharts.remove(this.set);AmCharts.remove(this.labelsSet);var n=this.axisLine;n&&AmCharts.remove(n.set);AmCharts.remove(this.grid0)}});AmCharts.ValueAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(n){this.cname="ValueAxis";this.createEvents("axisChanged","logarithmicAxisFailed","axisSelfZoomed","axisZoomed");AmCharts.ValueAxis.base.construct.call(this,n);this.dataChanged=!0;this.stackType="none";this.position="left";this.unitPosition="right";this.recalculateToPercents=this.includeHidden=this.includeGuidesInMinMax=this.integersOnly=!1;this.durationUnits={DD:"d. ",hh:":",mm:":",ss:""};this.scrollbar=!1;this.baseValue=0;this.radarCategoriesEnabled=!0;this.gridType="polygons";this.useScientificNotation=!1;this.axisTitleOffset=10;this.minMaxMultiplier=1;this.logGridLimit=2;AmCharts.applyTheme(this,n,this.cname)},updateData:function(){0>=this.gridCountR&&(this.gridCountR=1);this.totals=[];this.data=this.chart.chartData;var n=this.chart;"xy"!=n.type&&(this.stackGraphs("smoothedLine"),this.stackGraphs("line"),this.stackGraphs("column"),this.stackGraphs("step"));this.recalculateToPercents&&this.recalculate();this.synchronizationMultiplier&&this.synchronizeWith?(AmCharts.isString(this.synchronizeWith)&&(this.synchronizeWith=n.getValueAxisById(this.synchronizeWith)),this.synchronizeWith&&(this.synchronizeWithAxis(this.synchronizeWith),this.foundGraphs=!0)):(this.foundGraphs=!1,this.getMinMax())},draw:function(){var e,b,p,i,c,v,o,d,h,g,tt,f,a;if(AmCharts.ValueAxis.base.draw.call(this),e=this.chart,b=this.set,"duration"==this.type&&(this.duration="ss"),!0===this.dataChanged&&(this.updateData(),this.dataChanged=!1),this.logarithmic&&(0>=this.getMin(0,this.data.length-1)||0>=this.minimum))this.fire("logarithmicAxisFailed",{type:"logarithmicAxisFailed",chart:e});else{this.grid0=null;var n,t,u=e.dx,y=e.dy,it=!1,s=this.logarithmic;if(isNaN(this.min)||isNaN(this.max)||!this.foundGraphs||Infinity==this.min||-Infinity==this.max)it=!0;else{var rt=this.labelFrequency,ut=this.showFirstLabel,ft=this.showLastLabel,nt=1,r=0,l=Math.round((this.max-this.min)/this.step)+1,k;if(!0===s?(k=Math.log(this.max)*Math.LOG10E-Math.log(this.minReal)*Math.LOG10E,this.stepWidth=this.axisWidth/k,k>this.logGridLimit&&(l=Math.ceil(Math.log(this.max)*Math.LOG10E)+1,r=Math.round(Math.log(this.minReal)*Math.LOG10E),l>this.gridCountR&&(nt=Math.ceil(l/this.gridCountR)))):this.stepWidth=this.axisWidth/(this.max-this.min),o=0,1>this.step&&-1<this.step&&(o=AmCharts.getDecimals(this.step)),this.integersOnly&&(o=0),o>this.maxDecCount&&(o=this.maxDecCount),p=this.precision,isNaN(p)||(o=p),this.max=AmCharts.roundTo(this.max,this.maxDecCount),this.min=AmCharts.roundTo(this.min,this.maxDecCount),t={},t.precision=o,t.decimalSeparator=e.nf.decimalSeparator,t.thousandsSeparator=e.nf.thousandsSeparator,this.numberFormatter=t,h=this.guides,n=h.length,0<n){for(c=this.fillAlpha,t=this.fillAlpha=0;t<n;t++){var f=h[t],w=NaN,a=f.above;isNaN(f.toValue)||(w=this.getCoordinate(f.toValue),i=new this.axisItemRenderer(this,w,"",!0,NaN,NaN,f),this.pushAxisItem(i,a));v=NaN;isNaN(f.value)||(v=this.getCoordinate(f.value),i=new this.axisItemRenderer(this,v,f.label,!0,NaN,(w-v)/2,f),this.pushAxisItem(i,a));isNaN(w-v)||(i=new this.guideFillRenderer(this,v,w,f),this.pushAxisItem(i,a),i=i.graphics(),f.graphics=i,f.balloonText&&this.addEventListeners(i,f))}this.fillAlpha=c}for(this.exponential=!1,t=r;t<l;t+=nt)h=AmCharts.roundTo(this.step*t+this.min,o),-1!=String(h).indexOf("e")&&(this.exponential=!0,String(h).split("e"));for(this.duration&&(this.maxInterval=AmCharts.getMaxInterval(this.max,this.duration)),o=this.step,h=this.minorGridAlpha,this.minorGridEnabled&&(d=this.getMinorGridStep(o,this.stepWidth*o)),t=r;t<l;t+=nt)if((r=o*t+this.min,s&&this.max-this.min>5*this.min&&(r-=this.min),r=AmCharts.roundTo(r,this.maxDecCount+1),!this.integersOnly||Math.round(r)==r)&&(isNaN(p)||Number(AmCharts.toFixed(r,p))==r)&&(!0===s&&(0===r&&(r=this.minReal),k>this.logGridLimit&&(r=Math.pow(10,t))),i=this.formatValue(r,!1,t),Math.round(t/rt)!=t/rt&&(i=void 0),(0!==t||ut)&&(t!=l-1||ft)||(i=" "),n=this.getCoordinate(r),i=new this.axisItemRenderer(this,n,i,void 0,void 0,void 0,void 0,this.boldLabels),this.pushAxisItem(i),r==this.baseValue&&"radar"!=e.type&&(f=this.viW,a=this.viH,i=this.viX,c=this.viY,"H"==this.orientation?0<=n&&n<=f+1&&(g=[n,n,n+u],tt=[a,0,y]):0<=n&&n<=a+1&&(g=[0,f,f+u],tt=[n,n,n+y]),g&&(n=AmCharts.fitToBounds(2*this.gridAlpha,0,1),n=AmCharts.line(e.container,g,tt,this.gridColor,n,1,this.dashLength),n.translate(i,c),this.grid0=n,e.axesSet.push(n),n.toBack())),!isNaN(d)&&0<h&&t<l-1)){for(i=this.gridAlpha,this.gridAlpha=this.minorGridAlpha,n=1;n<o/d;n++)c=this.getCoordinate(r+d*n),c=new this.axisItemRenderer(this,c,"",!1,0,0,!1,!1,0,!0),this.pushAxisItem(c);this.gridAlpha=i}u=this.baseValue;this.min>this.baseValue&&this.max>this.baseValue&&(u=this.min);this.min<this.baseValue&&this.max<this.baseValue&&(u=this.max);s&&u<this.minReal&&(u=this.minReal);this.baseCoord=this.getCoordinate(u);u={type:"axisChanged",target:this,chart:e};u.min=s?this.minReal:this.min;u.max=this.max;this.fire("axisChanged",u);this.axisCreated=!0}s=this.axisLine.set;u=this.labelsSet;this.positionTitle();"radar"!=e.type?(e=this.viX,y=this.viY,b.translate(e,y),u.translate(e,y)):s.toFront();!this.visible||it?(b.hide(),s.hide(),u.hide()):(b.show(),s.show(),u.show());this.axisY=this.y-this.viY;this.axisX=this.x-this.viX}},formatValue:function(n,t,i){var u=this.exponential,e=this.logarithmic,r=this.numberFormatter,f=this.chart;return!0===this.logarithmic&&(u=-1!=String(n).indexOf("e")?!0:!1),this.useScientificNotation&&(u=!0),this.usePrefixes&&(u=!1),u?(valueText=-1==String(n).indexOf("e")?n.toExponential(15):String(n),i=valueText.split("e"),t=Number(i[0]),i=Number(i[1]),t=AmCharts.roundTo(t,14),10==t&&(t=1,i+=1),valueText=t+"e"+i,0===n&&(valueText="0"),1==n&&(valueText="1")):(e&&(u=String(n).split("."),u[1]?(r.precision=u[1].length,0>i&&(r.precision=Math.abs(i))):r.precision=-1),valueText=this.usePrefixes?AmCharts.addPrefix(n,f.prefixesOfBigNumbers,f.prefixesOfSmallNumbers,r,!t):AmCharts.formatNumber(n,r,r.precision)),this.duration&&(valueText=AmCharts.formatDuration(n,this.duration,"",this.durationUnits,this.maxInterval,r)),this.recalculateToPercents?valueText+="%":(r=this.unit)&&(valueText="left"==this.unitPosition?r+valueText:valueText+r),this.labelFunction&&(valueText=this.labelFunction(n,valueText,this).toString()),valueText},getMinorGridStep:function(n,t){var f=[5,4,2],e,u,i,r;for(60>t&&f.shift(),e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),u=0;u<f.length;u++)if(i=n/f[u],r=Math.floor(Math.log(Math.abs(i))*Math.LOG10E),!(0<Math.abs(e-r)))if(1>n){if(r=Math.pow(10,-r)*i,r==Math.round(r))return i}else if(i==Math.round(i))return i},stackGraphs:function(n){var s=this.stackType,y,c;"stacked"==s&&(s="regular");"line"==s&&(s="none");"100% stacked"==s&&(s="100%");this.stackType=s;var h=[],f=[],e=[],l=[],u,a=this.chart.graphs,t,i,r,o,p=this.baseValue,v=!1;if(("line"==n||"step"==n||"smoothedLine"==n)&&(v=!0),v&&("regular"==s||"100%"==s))for(o=0;o<a.length;o++)r=a[o],r.hidden||(i=r.type,r.chart==this.chart&&r.valueAxis==this&&n==i&&r.stackable&&(t&&(r.stackGraph=t),t=r));for(t=this.start;t<=this.end;t++)for(y=0,o=0;o<a.length;o++)(r=a[o],r.hidden)?r.newStack&&(e[t]=NaN,f[t]=NaN):(i=r.type,r.chart==this.chart&&r.valueAxis==this&&n==i&&r.stackable)&&((i=this.data[t].axes[this.id].graphs[r.id],u=i.values.value,isNaN(u))?r.newStack&&(e[t]=NaN,f[t]=NaN):(c=AmCharts.getDecimals(u),y<c&&(y=c),isNaN(l[t])?l[t]=Math.abs(u):l[t]+=Math.abs(u),l[t]=AmCharts.roundTo(l[t],y),c=r.fillToGraph,v&&c&&(c=this.data[t].axes[this.id].graphs[c.id])&&(i.values.open=c.values.value),"regular"==s&&(v&&(isNaN(h[t])?(h[t]=u,i.values.close=u,i.values.open=this.baseValue):(i.values.close=isNaN(u)?h[t]:u+h[t],i.values.open=h[t],h[t]=i.values.close)),"column"==n&&(r.newStack&&(e[t]=NaN,f[t]=NaN),i.values.close=u,0>u?(i.values.close=u,isNaN(f[t])?i.values.open=p:(i.values.close+=f[t],i.values.open=f[t]),f[t]=i.values.close):(i.values.close=u,isNaN(e[t])?i.values.open=p:(i.values.close+=e[t],i.values.open=e[t]),e[t]=i.values.close)))));for(t=this.start;t<=this.end;t++)for(o=0;o<a.length;o++)(r=a[o],r.hidden)?r.newStack&&(e[t]=NaN,f[t]=NaN):(i=r.type,r.chart==this.chart&&r.valueAxis==this&&n==i&&r.stackable&&(i=this.data[t].axes[this.id].graphs[r.id],u=i.values.value,isNaN(u)||(h=u/l[t]*100,i.values.percents=h,i.values.total=l[t],r.newStack&&(e[t]=NaN,f[t]=NaN),"100%"==s&&(isNaN(f[t])&&(f[t]=0),isNaN(e[t])&&(e[t]=0),0>h?(i.values.close=AmCharts.fitToBounds(h+f[t],-100,100),i.values.open=f[t],f[t]=i.values.close):(i.values.close=AmCharts.fitToBounds(h+e[t],-100,100),i.values.open=e[t],e[t]=i.values.close)))))},recalculate:function(){for(var n=this.chart,c=n.graphs,r,u,t,l,a,f,e,o=0;o<c.length;o++)if(r=c[o],r.valueAxis==this){u="value";("candlestick"==r.type||"ohlc"==r.type)&&(u="open");var s,i,h=this.end+2,h=AmCharts.fitToBounds(this.end+1,0,this.data.length-1),f=this.start;for(0<f&&f--,i=this.start,r.compareFromStart&&(i=0),!isNaN(n.startTime)&&(t=n.categoryAxis)&&(minDuration=t.minDuration(),l=new Date(n.startTime+minDuration/2),a=AmCharts.resetDateToMin(new Date(n.startTime),t.minPeriod).getTime(),AmCharts.resetDateToMin(new Date(l),t.minPeriod).getTime()>a&&i++),(t=n.recalculateFromDate)&&(n.dataDateFormat&&(t=AmCharts.stringToDate(t,n.dataDateFormat)),i=n.getClosestIndex(n.chartData,"time",t.getTime(),!0,0,n.chartData.length),h=n.chartData.length-1),t=i;t<=h&&(i=this.data[t].axes[this.id].graphs[r.id],s=i.values[u],isNaN(s));t++);for(this.recBaseValue=s,u=f;u<=h;u++){i=this.data[u].axes[this.id].graphs[r.id];i.percents={};f=i.values;for(e in f)i.percents[e]="percents"!=e?f[e]/s*100-100:f[e]}}},getMinMax:function(){for(var t=!1,r=this.chart,n=r.graphs,u,i=0;i<n.length;i++)u=n[i].type,("line"==u||"step"==u||"smoothedLine"==u)&&this.expandMinMax&&(t=!0);if(t&&(0<this.start&&this.start--,this.end<this.data.length-1&&this.end++),"serial"==r.type&&(!0!==r.categoryAxis.parseDates||t||this.end<this.data.length-1&&this.end++),t=this.minMaxMultiplier,this.min=this.getMin(this.start,this.end),this.max=this.getMax(),t=(this.max-this.min)*(t-1),this.min-=t,this.max+=t,t=this.guides.length,this.includeGuidesInMinMax&&0<t)for(r=0;r<t;r++)n=this.guides[r],n.toValue<this.min&&(this.min=n.toValue),n.value<this.min&&(this.min=n.value),n.toValue>this.max&&(this.max=n.toValue),n.value>this.max&&(this.max=n.value);isNaN(this.minimum)||(this.min=this.minimum);isNaN(this.maximum)||(this.max=this.maximum);this.min>this.max&&(t=this.max,this.max=this.min,this.min=t);isNaN(this.minTemp)||(this.min=this.minTemp);isNaN(this.maxTemp)||(this.max=this.maxTemp);this.minReal=this.min;this.maxReal=this.max;0===this.min&&0===this.max&&(this.max=9);this.min>this.max&&(this.min=this.max-1);t=this.min;r=this.max;n=this.max-this.min;i=0===n?Math.pow(10,Math.floor(Math.log(Math.abs(this.max))*Math.LOG10E))/10:Math.pow(10,Math.floor(Math.log(Math.abs(n))*Math.LOG10E))/10;isNaN(this.maximum)&&isNaN(this.maxTemp)&&(this.max=Math.ceil(this.max/i)*i+i);isNaN(this.minimum)&&isNaN(this.minTemp)&&(this.min=Math.floor(this.min/i)*i-i);0>this.min&&0<=t&&(this.min=0);0<this.max&&0>=r&&(this.max=0);"100%"==this.stackType&&(this.min=0>this.min?-100:0,this.max=0>this.max?0:100);n=this.max-this.min;i=Math.pow(10,Math.floor(Math.log(Math.abs(n))*Math.LOG10E))/10;this.step=Math.ceil(n/this.gridCountR/i)*i;n=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E));n=this.fixStepE(n);i=Math.ceil(this.step/n);5<i&&(i=10);5>=i&&2<i&&(i=5);this.step=Math.ceil(this.step/(n*i))*n*i;1>n?(this.maxDecCount=Math.abs(Math.log(Math.abs(n))*Math.LOG10E),this.maxDecCount=Math.round(this.maxDecCount),this.step=AmCharts.roundTo(this.step,this.maxDecCount+1)):this.maxDecCount=0;this.min=this.step*Math.floor(this.min/this.step);this.max=this.step*Math.ceil(this.max/this.step);0>this.min&&0<=t&&(this.min=0);0<this.max&&0>=r&&(this.max=0);1<this.minReal&&1<this.max-this.minReal&&(this.minReal=Math.floor(this.minReal));n=Math.pow(10,Math.floor(Math.log(Math.abs(this.minReal))*Math.LOG10E));0===this.min&&(this.minReal=n);0===this.min&&1<this.minReal&&(this.minReal=1);0<this.min&&0<this.minReal-this.step&&(this.minReal=this.min+this.step<this.minReal?this.min+this.step:this.min);n=Math.log(r)*Math.LOG10E-Math.log(t)*Math.LOG10E;this.logarithmic&&(2<n?(this.minReal=this.min=Math.pow(10,Math.floor(Math.log(Math.abs(t))*Math.LOG10E)),this.max=Math.pow(10,Math.ceil(Math.log(Math.abs(r))*Math.LOG10E))):(r=Math.pow(10,Math.floor(Math.log(Math.abs(this.min))*Math.LOG10E))/10,t=Math.pow(10,Math.floor(Math.log(Math.abs(t))*Math.LOG10E))/10,r<t&&(this.minReal=this.min=10*t)))},fixStepE:function(n){n=n.toExponential(0).split("e");var t=Number(n[1]);return 9==Number(n[0])&&t++,this.generateNumber(1,t)},generateNumber:function(n,t){for(var i="",u=0>t?Math.abs(t)-1:Math.abs(t),r=0;r<u;r++)i+="0";return 0>t?Number("0."+i+String(n)):Number(String(n)+i)},getMin:function(n,t){for(var r,f,e,i,u,o,s=n;s<=t;s++){f=this.data[s].axes[this.id].graphs;for(e in f)if(f.hasOwnProperty(e)&&(i=this.chart.getGraphById(e),i.includeInMinMax&&(!i.hidden||this.includeHidden)))if(isNaN(r)&&(r=Infinity),this.foundGraphs=!0,i=f[e].values,this.recalculateToPercents&&(i=f[e].percents),this.minMaxField)u=i[this.minMaxField],u<r&&(r=u);else for(o in i)i.hasOwnProperty(o)&&"percents"!=o&&"total"!=o&&(u=i[o],u<r&&(r=u))}return r},getMax:function(){for(var t,r,u,n,i,f,e=this.start;e<=this.end;e++){r=this.data[e].axes[this.id].graphs;for(u in r)if(r.hasOwnProperty(u)&&(n=this.chart.getGraphById(u),n.includeInMinMax&&(!n.hidden||this.includeHidden)))if(isNaN(t)&&(t=-Infinity),this.foundGraphs=!0,n=r[u].values,this.recalculateToPercents&&(n=r[u].percents),this.minMaxField)i=n[this.minMaxField],i>t&&(t=i);else for(f in n)n.hasOwnProperty(f)&&"percents"!=f&&"total"!=f&&(i=n[f],i>t&&(t=i))}return t},dispatchZoomEvent:function(n,t){var i={type:"axisZoomed",startValue:n,endValue:t,target:this,chart:this.chart};this.fire(i.type,i)},zoomToValues:function(n,t){if(t<n){var i=t;t=n;n=i}n<this.min&&(n=this.min);t>this.max&&(t=this.max);i={type:"axisSelfZoomed"};i.chart=this.chart;i.valueAxis=this;i.multiplier=this.axisWidth/Math.abs(this.getCoordinate(t)-this.getCoordinate(n));i.position="V"==this.orientation?this.reversed?this.getCoordinate(n):this.getCoordinate(t):this.reversed?this.getCoordinate(t):this.getCoordinate(n);this.fire(i.type,i)},coordinateToValue:function(n){if(isNaN(n))return NaN;var i=this.axisWidth,t=this.stepWidth,u=this.reversed,f=this.rotate,r=this.min,e=this.minReal;return!0===this.logarithmic?Math.pow(10,(f?!0===u?(i-n)/t:n/t:!0===u?n/t:(i-n)/t)+Math.log(e)*Math.LOG10E):!0===u?f?r-(n-i)/t:n/t+r:f?n/t+r:r-(n-i)/t},getCoordinate:function(n){if(isNaN(n))return NaN;var t=this.rotate,f=this.reversed,r=this.axisWidth,i=this.stepWidth,u=this.min,e=this.minReal;return!0===this.logarithmic?(n=Math.log(n)*Math.LOG10E-Math.log(e)*Math.LOG10E,t=t?!0===f?r-i*n:i*n:!0===f?i*n:r-i*n):t=!0===f?t?r-i*(n-u):i*(n-u):t?i*(n-u):r-i*(n-u),t=this.rotate?t+(this.x-this.viX):t+(this.y-this.viY),1e7<Math.abs(t)&&(t=1e7*(t/Math.abs(t))),Math.round(t)},synchronizeWithAxis:function(n){this.synchronizeWith=n;this.listenTo(this.synchronizeWith,"axisChanged",this.handleSynchronization)},handleSynchronization:function(n){var t=this.synchronizeWith;n=t.min;var r=t.max,t=t.step,i=this.synchronizationMultiplier;i&&(this.min=n*i,this.max=r*i,this.step=t*i,n=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),n=Math.abs(Math.log(Math.abs(n))*Math.LOG10E),this.maxDecCount=n=Math.round(n),this.draw())}});AmCharts.RecAxis=AmCharts.Class({construct:function(n){var l=n.chart,t=n.axisThickness,i=n.axisColor,o=n.axisAlpha,r=n.offset,s=n.dx,h=n.dy,u=n.viX,f=n.viY,e=n.viH,a=n.viW,c=l.container;"H"==n.orientation?(i=AmCharts.line(c,[0,a],[0,0],i,o,t),this.axisWidth=n.width,"bottom"==n.position?(n=t/2+r+e+f-1,t=u):(n=-t/2-r+f+h,t=s+u)):(this.axisWidth=n.height,"right"==n.position?(i=AmCharts.line(c,[0,0,-s],[0,e,e-h],i,o,t),n=f+h,t=t/2+r+s+a+u-1):(i=AmCharts.line(c,[0,0],[0,e],i,o,t),n=f,t=-t/2-r+u));i.translate(t,n);l.axesSet.push(i);this.set=i}});AmCharts.RecItem=AmCharts.Class({construct:function(n,t,i,r,u,f,e,o,s,h,c){var kt,p,at,it,ct,k;t=Math.round(t);this.value=i;void 0==i&&(i="");s||(s=0);void 0==r&&(r=!0);kt=n.chart.fontFamily;p=n.fontSize;void 0==p&&(p=n.chart.fontSize);at=n.color;void 0==at&&(at=n.chart.color);void 0!==c&&(at=c);it=n.chart.container;ct=it.set();this.set=ct;var rt=n.axisThickness,ti=n.axisColor,wt=n.axisAlpha,a=n.tickLength,yt=n.gridAlpha,pt=n.gridThickness,dt=n.gridColor,gt=n.dashLength,ii=n.fillColor,bt=n.fillAlpha,ri=n.labelsEnabled;c=n.labelRotation;var ni=n.counter,w=n.inside,ut=n.labelOffset,tt=n.dx,nt=n.dy,ui=n.orientation,ft=n.position,vt=n.previousCoord,g=n.viH,et=n.viW,ot=n.offset,st,b;e?(ri=!0,isNaN(e.tickLength)||(a=e.tickLength),void 0!=e.lineColor&&(dt=e.lineColor),void 0!=e.color&&(at=e.color),isNaN(e.lineAlpha)||(yt=e.lineAlpha),isNaN(e.dashLength)||(gt=e.dashLength),isNaN(e.lineThickness)||(pt=e.lineThickness),!0===e.inside&&(w=!0),isNaN(e.labelRotation)||(c=e.labelRotation),isNaN(e.fontSize)||(p=e.fontSize),e.position&&(ft=e.position),void 0!==e.boldLabel&&(o=e.boldLabel),isNaN(e.labelOffset)||(ut=e.labelOffset)):""===i&&(a=0);b="start";u&&(b="middle");var y=c*Math.PI/180,ht,v=0,l=0,lt=0,d=ht=0,fi=0;"V"==ui&&(c=0);ri&&(k=n.autoWrap&&0===c?AmCharts.wrappedText(it,i,at,kt,p,b,o,u,0):AmCharts.text(it,i,at,kt,p,b,o),b=k.getBBox(),d=b.width,fi=b.height);"H"==ui?(0<=t&&t<=et+1&&(0<a&&0<wt&&t+s<=et+1&&(st=AmCharts.line(it,[t+s,t+s],[0,a],ti,wt,pt),ct.push(st)),0<yt&&(b=AmCharts.line(it,[t,t+tt,t+tt],[g,g+nt,nt],dt,yt,pt,gt),ct.push(b))),l=0,v=t,e&&90==c&&w&&(v-=p),!1===r?(b="start",l="bottom"==ft?w?l+a:l-a:w?l-a:l+a,v+=3,u&&(v+=u/2-3,b="middle"),0<c&&(b="middle")):b="middle",1==ni&&0<bt&&!e&&!h&&vt<et&&(r=AmCharts.fitToBounds(t,0,et),vt=AmCharts.fitToBounds(vt,0,et),ht=r-vt,0<ht&&(fill=AmCharts.rect(it,ht,n.height,ii,bt),fill.translate(r-ht+tt,nt),ct.push(fill))),"bottom"==ft?(l+=g+p/2+ot,w?(0<c?(l=g-d/2*Math.sin(y)-a-3,v+=d/2*Math.cos(y)-2):0>c?(l=g+d*Math.sin(y)-a-1,v+=-d*Math.cos(y)-fi*Math.sin(y)-4):l-=a+p+3+3,l-=ut):(0<c?(l=g+d/2*Math.sin(y)+a+3,v-=d/2*Math.cos(y)):0>c?(l=g+a+3-d/2*Math.sin(y)+2,v+=d/2*Math.cos(y)):l+=a+rt+3+3,l+=ut)):(l+=nt+p/2-ot,v+=tt,w?(0<c?(l=d/2*Math.sin(y)+a+3,v-=d/2*Math.cos(y)):l+=a+3,l+=ut):(0<c?(l=-(d/2)*Math.sin(y)-a-6,v+=d/2*Math.cos(y)):l-=a+p+3+rt+3,l-=ut)),"bottom"==ft?ht=(w?g-a-1:g+rt-1)+ot:(lt=tt,ht=(w?nt:nt-a-rt+1)-ot),f&&(v+=f),f=v,0<c&&(f+=d/2*Math.cos(y)),k&&(p=0,w&&(p=d/2*Math.cos(y)),f+p>et+2||0>f))&&(k.remove(),k=null):(0<=t&&t<=g+1&&(0<a&&0<wt&&t+s<=g+1&&(st=AmCharts.line(it,[0,a],[t+s,t+s],ti,wt,pt),ct.push(st)),0<yt&&(b=AmCharts.line(it,[0,tt,et+tt],[t,t+nt,t+nt],dt,yt,pt,gt),ct.push(b))),b="end",(!0===w&&"left"==ft||!1===w&&"right"==ft)&&(b="start"),l=t-p/2,1==ni&&0<bt&&!e&&!h&&(r=AmCharts.fitToBounds(t,0,g),vt=AmCharts.fitToBounds(vt,0,g),y=r-vt,fill=AmCharts.polygon(it,[0,n.width,n.width,0],[0,0,y,y],ii,bt),fill.translate(tt,r-y+nt),ct.push(fill)),l+=p/2,"right"==ft?(v+=tt+et+ot,l+=nt,w?(f||(l-=p/2+3),v=v-(a+4)-ut):(v+=a+4+rt,l-=2,v+=ut)):w?(v+=a+4-ot,f||(l-=p/2+3),e&&(v+=tt,l+=nt),v+=ut):(v+=-a-rt-6-ot,l-=2,v-=ut),st&&("right"==ft?(lt+=tt+ot+et,ht+=nt,lt=w?lt-rt:lt+rt):(lt-=ot,w||(lt-=a+rt))),f&&(l+=f),w=-3,"right"==ft&&(w+=nt),k&&(l>g+1||l<w)&&(k.remove(),k=null));st&&st.translate(lt,ht);!1===n.visible&&(st&&st.remove(),k&&(k.remove(),k=null));k&&(k.attr({"text-anchor":b}),k.translate(v,l),0!==c&&k.rotate(-c,n.chart.backgroundColor),n.allLabels.push(k)," "!=i&&(this.label=k));h||(n.counter=0===ni?1:0,n.previousCoord=t);0===this.set.node.childNodes.length&&this.set.remove()},graphics:function(){return this.set},getLabel:function(){return this.label}});AmCharts.RecFill=AmCharts.Class({construct:function(n,t,i,r){var o=n.dx,s=n.dy,h=n.orientation,e=0,u,f;i<t&&(u=t,t=i,i=u);f=r.fillAlpha;isNaN(f)&&(f=0);u=n.chart.container;r=r.fillColor;"V"==h?(t=AmCharts.fitToBounds(t,0,n.viH),i=AmCharts.fitToBounds(i,0,n.viH)):(t=AmCharts.fitToBounds(t,0,n.viW),i=AmCharts.fitToBounds(i,0,n.viW));i-=t;isNaN(i)&&(i=4,e=2,f=0);0>i&&"object"==typeof r&&(r=r.join(",").split(",").reverse());"V"==h?(n=AmCharts.rect(u,n.width,i,r,f),n.translate(o,t-e+s)):(n=AmCharts.rect(u,i,n.height,r,f),n.translate(t-e+o,s));this.set=u.set([n])},graphics:function(){return this.set},getLabel:function(){}});AmCharts.AmChart=AmCharts.Class({construct:function(n){this.theme=n;this.version="3.11.1";AmCharts.addChart(this);this.createEvents("dataUpdated","init","rendered","drawn","failed");this.height=this.width="100%";this.dataChanged=!0;this.chartCreated=!1;this.previousWidth=this.previousHeight=0;this.backgroundColor="#FFFFFF";this.borderAlpha=this.backgroundAlpha=0;this.color=this.borderColor="#000000";this.fontFamily="Verdana";this.fontSize=11;this.usePrefixes=!1;this.precision=-1;this.percentPrecision=2;this.decimalSeparator=".";this.thousandsSeparator=",";this.labels=[];this.allLabels=[];this.titles=[];this.marginRight=this.marginLeft=this.autoMarginOffset=0;this.timeOuts=[];this.creditsPosition="top-left";var i=document.createElement("div"),t=i.style;t.overflow="hidden";t.position="relative";t.textAlign="left";this.chartDiv=i;i=document.createElement("div");t=i.style;t.overflow="hidden";t.position="relative";t.textAlign="left";this.legendDiv=i;this.titleHeight=0;this.hideBalloonTime=150;this.handDrawScatter=2;this.handDrawThickness=1;this.prefixesOfBigNumbers=[{number:1e3,prefix:"k"},{number:1e6,prefix:"M"},{number:1e9,prefix:"G"},{number:1e12,prefix:"T"},{number:1e15,prefix:"P"},{number:1e18,prefix:"E"},{number:1e21,prefix:"Z"},{number:1e24,prefix:"Y"}];this.prefixesOfSmallNumbers=[{number:1e-24,prefix:"y"},{number:1e-21,prefix:"z"},{number:1e-18,prefix:"a"},{number:1e-15,prefix:"f"},{number:1e-12,prefix:"p"},{number:1e-9,prefix:"n"},{number:1e-6,prefix:"μ"},{number:.001,prefix:"m"}];this.panEventsEnabled=!0;AmCharts.bezierX=3;AmCharts.bezierY=6;this.product="amcharts";this.animations=[];this.balloon=new AmCharts.AmBalloon(this.theme);this.balloon.chart=this;AmCharts.applyTheme(this,n,"AmChart")},drawChart:function(){this.drawBackground();this.redrawLabels();this.drawTitles();this.brr()},drawBackground:function(){var t,i;AmCharts.remove(this.background);var r=this.container,n=this.backgroundColor,u=this.backgroundAlpha,f=this.set;AmCharts.isModern||0!==u||(u=.001);t=this.updateWidth();this.realWidth=t;i=this.updateHeight();this.realHeight=i;this.background=n=AmCharts.polygon(r,[0,t-1,t-1,0],[0,0,i-1,i-1],n,u,1,this.borderColor,this.borderAlpha);f.push(n);(n=this.backgroundImage)&&(this.path&&(n=this.path+n),this.bgImg=r=r.image(n,0,0,t,i),f.push(r))},drawTitles:function(){var f=this.titles,e,u,t,r,i,n;if(AmCharts.ifArray(f))for(e=20,u=0;u<f.length;u++)t=f[u],n=t.color,void 0===n&&(n=this.color),r=t.size,isNaN(r)&&(r=this.fontSize+2),isNaN(t.alpha),i=this.marginLeft,n=AmCharts.text(this.container,t.text,n,this.fontFamily,r),n.translate(i+(this.realWidth-this.marginRight-i)/2,e),n.node.style.pointerEvents="none",i=!0,void 0!==t.bold&&(i=t.bold),i&&n.attr({"font-weight":"bold"}),n.attr({opacity:t.alpha}),e+=r+6,this.freeLabelsSet.push(n)},write:function(n){var u,t,s;if(n="object"!=typeof n?document.getElementById(n):n){n.innerHTML="";this.div=n;n.style.overflow="hidden";n.style.textAlign="left";var r=this.chartDiv,e=this.legendDiv,i=this.legend,f=e.style,o=r.style;if(this.measure(),t=document.createElement("div"),u=t.style,u.position="relative",this.containerDiv=t,n.appendChild(t),s=this.exportConfig,s&&AmCharts.AmExport&&!this.AmExport&&(this.AmExport=new AmCharts.AmExport(this,s)),this.amExport&&AmCharts.AmExport&&(this.AmExport=AmCharts.extend(this.amExport,new AmCharts.AmExport(this),!0)),this.AmExport&&this.AmExport.init&&this.AmExport.init(),i)switch(i=this.addLegend(i,i.divId),i.position){case"bottom":t.appendChild(r);t.appendChild(e);break;case"top":t.appendChild(e);t.appendChild(r);break;case"absolute":u.width=n.style.width;u.height=n.style.height;f.position="absolute";o.position="absolute";void 0!==i.left&&(f.left=i.left+"px");void 0!==i.right&&(f.right=i.right+"px");void 0!==i.top&&(f.top=i.top+"px");void 0!==i.bottom&&(f.bottom=i.bottom+"px");i.marginLeft=0;i.marginRight=0;t.appendChild(r);t.appendChild(e);break;case"right":u.width=n.style.width;u.height=n.style.height;f.position="relative";o.position="absolute";t.appendChild(r);t.appendChild(e);break;case"left":u.width=n.style.width;u.height=n.style.height;f.position="absolute";o.position="relative";t.appendChild(r);t.appendChild(e);break;case"outside":t.appendChild(r)}else t.appendChild(r);this.listenersAdded||(this.addListeners(),this.listenersAdded=!0);this.initChart()}},createLabelsSet:function(){AmCharts.remove(this.labelsSet);this.labelsSet=this.container.set();this.freeLabelsSet.push(this.labelsSet)},initChart:function(){var n,t;AmCharts.callInitHandler(this);AmCharts.applyLang(this.language,this);n=this.numberFormatter;n&&(isNaN(n.precision)||(this.precision=n.precision),void 0!==n.thousandsSeparator&&(this.thousandsSeparator=n.thousandsSeparator),void 0!==n.decimalSeparator&&(this.decimalSeparator=n.decimalSeparator));(n=this.percentFormatter)&&!isNaN(n.precision)&&(this.percentPrecision=n.precision);this.nf={precision:this.precision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator};this.pf={precision:this.percentPrecision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator};this.divIsFixed=AmCharts.findIfFixed(this.chartDiv);this.previousHeight=this.divRealHeight;this.previousWidth=this.divRealWidth;this.destroy();this.startInterval();n=0;document.attachEvent&&!window.opera&&(n=1);this.dmouseX=this.dmouseY=0;t=document.getElementsByTagName("html")[0];t&&window.getComputedStyle&&(t=window.getComputedStyle(t,null))&&(this.dmouseY=AmCharts.removePx(t.getPropertyValue("margin-top")),this.dmouseX=AmCharts.removePx(t.getPropertyValue("margin-left")));this.mouseMode=n;(n=this.container)?(n.container.innerHTML="",this.chartDiv.appendChild(n.container),n.setSize(this.realWidth,this.realHeight)):n=new AmCharts.AmDraw(this.chartDiv,this.realWidth,this.realHeight,this);AmCharts.VML||AmCharts.SVG?(n.handDrawn=this.handDrawn,n.handDrawScatter=this.handDrawScatter,n.handDrawThickness=this.handDrawThickness,this.container=n,this.set&&this.set.remove(),this.set=n.set(),this.gridSet&&this.gridSet.remove(),this.gridSet=n.set(),this.cursorLineSet&&this.cursorLineSet.remove(),this.cursorLineSet=n.set(),this.graphsBehindSet&&this.graphsBehindSet.remove(),this.graphsBehindSet=n.set(),this.bulletBehindSet&&this.bulletBehindSet.remove(),this.bulletBehindSet=n.set(),this.columnSet&&this.columnSet.remove(),this.columnSet=n.set(),this.graphsSet&&this.graphsSet.remove(),this.graphsSet=n.set(),this.trendLinesSet&&this.trendLinesSet.remove(),this.trendLinesSet=n.set(),this.axesLabelsSet&&this.axesLabelsSet.remove(),this.axesLabelsSet=n.set(),this.axesSet&&this.axesSet.remove(),this.axesSet=n.set(),this.cursorSet&&this.cursorSet.remove(),this.cursorSet=n.set(),this.scrollbarsSet&&this.scrollbarsSet.remove(),this.scrollbarsSet=n.set(),this.bulletSet&&this.bulletSet.remove(),this.bulletSet=n.set(),this.freeLabelsSet&&this.freeLabelsSet.remove(),this.freeLabelsSet=n.set(),this.balloonsSet&&this.balloonsSet.remove(),this.balloonsSet=n.set(),this.zoomButtonSet&&this.zoomButtonSet.remove(),this.zoomButtonSet=n.set(),this.linkSet&&this.linkSet.remove(),this.linkSet=n.set(),this.renderFix()):this.fire("failed",{type:"failed",chart:this})},measure:function(){var n=this.div;if(n){var u=this.chartDiv,i=n.offsetWidth,r=n.offsetHeight,f=this.container;n.clientHeight&&(i=n.clientWidth,r=n.clientHeight);var t=AmCharts.removePx(AmCharts.getStyle(n,"padding-left")),e=AmCharts.removePx(AmCharts.getStyle(n,"padding-right")),o=AmCharts.removePx(AmCharts.getStyle(n,"padding-top")),s=AmCharts.removePx(AmCharts.getStyle(n,"padding-bottom"));isNaN(t)||(i-=t);isNaN(e)||(i-=e);isNaN(o)||(r-=o);isNaN(s)||(r-=s);t=n.style;n=t.width;t=t.height;-1!=n.indexOf("px")&&(i=AmCharts.removePx(n));-1!=t.indexOf("px")&&(r=AmCharts.removePx(t));n=AmCharts.toCoordinate(this.width,i);t=AmCharts.toCoordinate(this.height,r);this.balloon=AmCharts.processObject(this.balloon,AmCharts.AmBalloon,this.theme);this.balloon.chart=this;(n!=this.previousWidth||t!=this.previousHeight)&&0<n&&0<t&&(u.style.width=n+"px",u.style.height=t+"px",f&&f.setSize(n,t));this.balloon.setBounds(2,2,n-2,t);this.realWidth=n;this.realHeight=t;this.divRealWidth=i;this.divRealHeight=r}},destroy:function(){this.chartDiv.innerHTML="";this.clearTimeOuts();this.interval&&clearInterval(this.interval);this.interval=NaN},clearTimeOuts:function(){var t=this.timeOuts,n;if(t)for(n=0;n<t.length;n++)clearTimeout(t[n]);this.timeOuts=[]},clear:function(n){AmCharts.callMethod("clear",[this.chartScrollbar,this.scrollbarV,this.scrollbarH,this.chartCursor]);this.chartCursor=this.scrollbarH=this.scrollbarV=this.chartScrollbar=null;this.clearTimeOuts();this.interval&&clearInterval(this.interval);this.container&&(this.container.remove(this.chartDiv),this.container.remove(this.legendDiv));n||AmCharts.removeChart(this)},setMouseCursor:function(n){"auto"==n&&AmCharts.isNN&&(n="default");this.chartDiv.style.cursor=n;this.legendDiv.style.cursor=n},redrawLabels:function(){var t,n;for(this.labels=[],t=this.allLabels,this.createLabelsSet(),n=0;n<t.length;n++)this.drawLabel(t[n])},drawLabel:function(n){if(this.container){var r=n.y,t=n.text,i=n.align,e=n.size,o=n.color,u=n.rotation,s=n.alpha,h=n.bold,f=AmCharts.toCoordinate(n.x,this.realWidth),r=AmCharts.toCoordinate(r,this.realHeight);f||(f=0);r||(r=0);void 0===o&&(o=this.color);isNaN(e)&&(e=this.fontSize);i||(i="start");"left"==i&&(i="start");"right"==i&&(i="end");"center"==i&&(i="middle",u?r=this.realHeight-r+r/2:f=this.realWidth/2-f);void 0===s&&(s=1);void 0===u&&(u=0);r+=e/2;t=AmCharts.text(this.container,t,o,this.fontFamily,e,i,h,s);t.translate(f,r);0!==u&&t.rotate(u);n.url?(t.setAttr("cursor","pointer"),t.click(function(){AmCharts.getURL(n.url)})):t.node.style.pointerEvents="none";this.labelsSet.push(t);this.labels.push(t)}},addLabel:function(n,t,i,r,u,f,e,o,s,h){n={x:n,y:t,text:i,align:r,size:u,color:f,alpha:o,rotation:e,bold:s,url:h};this.container&&this.drawLabel(n);this.allLabels.push(n)},clearLabels:function(){for(var t=this.labels,n=t.length-1;0<=n;n--)t[n].remove();this.labels=[];this.allLabels=[]},updateHeight:function(){var n=this.divRealHeight,t=this.legend,i;return t&&(i=this.legendDiv.offsetHeight,t=t.position,("top"==t||"bottom"==t)&&(n-=i,(0>n||isNaN(n))&&(n=0),this.chartDiv.style.height=n+"px")),n},updateWidth:function(){var n=this.divRealWidth,u=this.divRealHeight,t=this.legend,i,r;if(t){i=this.legendDiv;r=i.offsetWidth;isNaN(t.width)||(r=t.width);var f=i.offsetHeight,i=i.style,e=this.chartDiv.style,t=t.position;("right"==t||"left"==t)&&(n-=r,(0>n||isNaN(n))&&(n=0),e.width=n+"px","left"==t?e.left=r+"px":i.left=n+"px",u>f&&(i.top=(u-f)/2+"px"))}return n},getTitleHeight:function(){var i=0,r=this.titles,n,t;if(0<r.length)for(i=15,n=0;n<r.length;n++)t=r[n].size,isNaN(t)&&(t=this.fontSize+2),i+=t+6;return i},addTitle:function(n,t,i,r,u){return isNaN(t)&&(t=this.fontSize+2),n={text:n,size:t,color:i,alpha:r,bold:u},this.titles.push(n),n},addMouseWheel:function(){var n=this;window.addEventListener&&!n.wheelAdded&&(window.addEventListener("DOMMouseScroll",function(t){n.handleWheel.call(n,t)},!1),document.addEventListener("mousewheel",function(t){n.handleWheel.call(n,t)},!1),n.wheelAdded=!0)},handleWheel:function(n){if(this.mouseIsOver){var t=0;n||(n=window.event);n.wheelDelta?t=n.wheelDelta/120:n.detail&&(t=-n.detail/3);t&&this.handleWheelReal(t,n.shiftKey);n.preventDefault&&n.preventDefault()}},handleWheelReal:function(){},addListeners:function(){var n=this,t=n.chartDiv;document.addEventListener?(n.panEventsEnabled&&(t.style.msTouchAction="none","ontouchstart"in document.documentElement&&(t.addEventListener("touchstart",function(t){n.handleTouchMove.call(n,t);n.handleTouchStart.call(n,t)},!0),t.addEventListener("touchmove",function(t){n.handleTouchMove.call(n,t)},!0),t.addEventListener("touchend",function(t){n.handleTouchEnd.call(n,t)},!0))),t.addEventListener("mousedown",function(t){n.mouseIsOver=!0;n.handleMouseMove.call(n,t);n.handleMouseDown.call(n,t)},!0),t.addEventListener("mouseover",function(t){n.handleMouseOver.call(n,t)},!0),t.addEventListener("mouseout",function(t){n.handleMouseOut.call(n,t)},!0)):(t.attachEvent("onmousedown",function(t){n.handleMouseDown.call(n,t)}),t.attachEvent("onmouseover",function(t){n.handleMouseOver.call(n,t)}),t.attachEvent("onmouseout",function(t){n.handleMouseOut.call(n,t)}))},dispDUpd:function(){var n;this.dispatchDataUpdated&&(this.dispatchDataUpdated=!1,n="dataUpdated",this.fire(n,{type:n,chart:this}));this.chartCreated||(n="init",this.fire(n,{type:n,chart:this}));this.chartRendered||(n="rendered",this.fire(n,{type:n,chart:this}),this.chartRendered=!0);n="drawn";this.fire(n,{type:n,chart:this})},validateSize:function(){var n=this,i,t;n.measure();i=n.legend;(n.realWidth!=n.previousWidth||n.realHeight!=n.previousHeight)&&0<n.realWidth&&0<n.realHeight&&(n.sizeChanged=!0,i&&(clearTimeout(n.legendInitTO),t=setTimeout(function(){i.invalidateSize()},100),n.timeOuts.push(t),n.legendInitTO=t),n.marginsUpdated="xy"!=n.type?!1:!0,clearTimeout(n.initTO),t=setTimeout(function(){n.initChart()},150),n.timeOuts.push(t),n.initTO=t);n.renderFix();i&&i.renderFix()},invalidateSize:function(){this.previousHeight=this.previousWidth=NaN;this.invalidateSizeReal()},invalidateSizeReal:function(){var n=this,t;n.marginsUpdated=!1;clearTimeout(n.validateTO);t=setTimeout(function(){n.validateSize()},5);n.timeOuts.push(t);n.validateTO=t},validateData:function(n){this.chartCreated&&(this.dataChanged=!0,this.marginsUpdated="xy"!=this.type?!1:!0,this.initChart(n))},validateNow:function(){this.chartRendered=!1;this.write(this.div)},showItem:function(n){n.hidden=!1;this.initChart()},hideItem:function(n){n.hidden=!0;this.initChart()},hideBalloon:function(){var n=this;clearInterval(n.hoverInt);clearTimeout(n.balloonTO);n.hoverInt=setTimeout(function(){n.hideBalloonReal.call(n)},n.hideBalloonTime)},cleanChart:function(){},hideBalloonReal:function(){var n=this.balloon;n&&n.hide()},showBalloon:function(n,t,i,r,u){var f=this;clearTimeout(f.balloonTO);clearInterval(f.hoverInt);f.balloonTO=setTimeout(function(){f.showBalloonReal.call(f,n,t,i,r,u)},1)},showBalloonReal:function(n,t,i,r,u){this.handleMouseMove();var f=this.balloon;f.enabled&&(f.followCursor(!1),f.changeColor(t),!i||f.fixedPosition?(f.setPosition(r,u),f.followCursor(!1)):f.followCursor(!0),n&&f.showBalloon(n))},handleTouchMove:function(n){this.hideBalloon();var t=this.chartDiv;n.touches&&(n=n.touches.item(0),this.mouseX=n.pageX-AmCharts.findPosX(t),this.mouseY=n.pageY-AmCharts.findPosY(t))},handleMouseOver:function(){AmCharts.resetMouseOver();this.mouseIsOver=!0},handleMouseOut:function(){AmCharts.resetMouseOver();this.mouseIsOver=!1},handleMouseMove:function(n){var i,r,t,u,f;if(this.mouseIsOver&&(t=this.chartDiv,n||(n=window.event),n)){this.posX=AmCharts.findPosX(t);this.posY=AmCharts.findPosY(t);switch(this.mouseMode){case 1:i=n.clientX-this.posX;r=n.clientY-this.posY;this.divIsFixed||(t=document.body,t&&(u=t.scrollLeft,y1=t.scrollTop),(t=document.documentElement)&&(f=t.scrollLeft,y2=t.scrollTop),u=Math.max(u,f),f=Math.max(y1,y2),i+=u,r+=f);break;case 0:this.divIsFixed?(i=n.clientX-this.posX,r=n.clientY-this.posY):(i=n.pageX-this.posX,r=n.pageY-this.posY)}n.touches&&(n=n.touches.item(0),i=n.pageX-this.posX,r=n.pageY-this.posY);this.mouseX=i-this.dmouseX;this.mouseY=r-this.dmouseY}},handleTouchStart:function(n){this.handleMouseDown(n)},handleTouchEnd:function(n){AmCharts.resetMouseOver();this.handleReleaseOutside(n)},handleReleaseOutside:function(){},handleMouseDown:function(n){AmCharts.resetMouseOver();this.mouseIsOver=!0;n&&n.preventDefault&&n.preventDefault()},addLegend:function(n,t){n=AmCharts.processObject(n,AmCharts.AmLegend,this.theme);n.divId=t;var i;return i="object"!=typeof t&&t?document.getElementById(t):t,this.legend=n,n.chart=this,i?(n.div=i,n.position="outside",n.autoMargins=!1):n.div=this.legendDiv,i=this.handleLegendEvent,this.listenTo(n,"showItem",i),this.listenTo(n,"hideItem",i),this.listenTo(n,"clickMarker",i),this.listenTo(n,"rollOverItem",i),this.listenTo(n,"rollOutItem",i),this.listenTo(n,"rollOverMarker",i),this.listenTo(n,"rollOutMarker",i),this.listenTo(n,"clickLabel",i),n},removeLegend:function(){this.legend=void 0;this.legendDiv.innerHTML=""},handleResize:function(){(AmCharts.isPercents(this.width)||AmCharts.isPercents(this.height))&&this.invalidateSizeReal();this.renderFix()},renderFix:function(){if(!AmCharts.VML){var n=this.container;n&&n.renderFix()}},getSVG:function(){if(AmCharts.hasSVG)return this.container},animate:function(n,t,i,r,u,f,e){return n["an_"+t]&&AmCharts.removeFromArray(this.animations,n["an_"+t]),i={obj:n,frame:0,attribute:t,from:i,to:r,time:u,effect:f,suffix:e},n["an_"+t]=i,this.animations.push(i),i},setLegendData:function(n){var t=this.legend;t&&t.setData(n)},startInterval:function(){var n=this;clearInterval(n.interval);n.interval=setInterval(function(){n.updateAnimations.call(n)},AmCharts.updateRate)},stopAnim:function(n){AmCharts.removeFromArray(this.animations,n)},updateAnimations:function(){var t;for(this.container&&this.container.update(),t=this.animations.length-1;0<=t;t--){var n=this.animations[t],i=1e3*n.time/AmCharts.updateRate,f=n.frame+1,r=n.obj,u=n.attribute;if(f<=i){n.frame++;var e=Number(n.from),o=Number(n.to)-e,i=AmCharts[n.effect](0,f,e,o,i);0===o?(this.animations.splice(t,1),r.node.style[u]=Number(n.to)+n.suffix):r.node.style[u]=i+n.suffix}else r.node.style[u]=Number(n.to)+n.suffix,this.animations.splice(t,1)}},inIframe:function(){try{return window.self!==window.top}catch(n){return!0}},brr:function(){}});AmCharts.Slice=AmCharts.Class({construct:function(){}});AmCharts.SerialDataItem=AmCharts.Class({construct:function(){}});AmCharts.GraphDataItem=AmCharts.Class({construct:function(){}});AmCharts.Guide=AmCharts.Class({construct:function(n){this.cname="Guide";AmCharts.applyTheme(this,n,this.cname)}});AmCharts.AmGraph=AmCharts.Class({construct:function(n){this.cname="AmGraph";this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph");this.type="line";this.stackable=!0;this.columnCount=1;this.columnIndex=0;this.centerCustomBullets=this.showBalloon=!0;this.maxBulletSize=50;this.minBulletSize=4;this.balloonText="[[value]]";this.hidden=this.scrollbar=this.animationPlayed=!1;this.pointPosition="middle";this.depthCount=1;this.includeInMinMax=!0;this.negativeBase=0;this.visibleInLegend=!0;this.showAllValueLabels=!1;this.showBulletsAt=this.showBalloonAt="close";this.lineThickness=1;this.dashLength=0;this.connect=!0;this.lineAlpha=1;this.bullet="none";this.bulletBorderThickness=2;this.bulletBorderAlpha=0;this.bulletAlpha=1;this.bulletSize=8;this.hideBulletsCount=this.bulletOffset=0;this.labelPosition="top";this.cornerRadiusTop=0;this.cursorBulletAlpha=1;this.gradientOrientation="vertical";this.dy=this.dx=0;this.periodValue="";this.clustered=!0;this.periodSpan=1;this.y=this.x=0;this.switchable=!0;this.tcc=this.minDistance=1;AmCharts.applyTheme(this,n,this.cname)},draw:function(){var n=this.chart,i,t,u,r;isNaN(this.precision)||(this.numberFormatter?this.numberFormatter.precision=this.precision:this.numberFormatter={precision:this.precision,decimalSeparator:n.decimalSeparator,thousandsSeparator:n.thousandsSeparator});i=n.container;this.container=i;this.destroy();t=i.set();u=i.set();this.behindColumns?(n.graphsBehindSet.push(t),n.bulletBehindSet.push(u)):(n.graphsSet.push(t),n.bulletSet.push(u));r=this.bulletAxis;AmCharts.isString(r)&&(this.bulletAxis=n.getValueAxisById(r));this.bulletSet=u;this.scrollbar||(r=n.marginLeftReal,n=n.marginTopReal,t.translate(r,n),u.translate(r,n));i=i.set();AmCharts.remove(this.columnsSet);t.push(i);this.set=t;this.columnsSet=i;this.columnsArray=[];this.ownColumns=[];this.allBullets=[];this.animationArray=[];AmCharts.ifArray(this.data)&&(t=!1,"xy"==this.chart.type?this.xAxis.axisCreated&&this.yAxis.axisCreated&&(t=!0):this.valueAxis.axisCreated&&(t=!0),!this.hidden&&t&&this.createGraph())},createGraph:function(){var n=this,t=n.chart;if("inside"==n.labelPosition&&"column"!=n.type&&(n.labelPosition="bottom"),n.startAlpha=t.startAlpha,n.seqAn=t.sequencedAnimation,n.baseCoord=n.valueAxis.baseCoord,void 0===n.fillAlphas&&(n.fillAlphas=0),n.bulletColorR=n.bulletColor,void 0===n.bulletColorR&&(n.bulletColorR=n.lineColorR,n.bulletColorNegative=n.negativeLineColor),void 0===n.bulletAlpha&&(n.bulletAlpha=n.lineAlpha),clearTimeout(n.playedTO),!isNaN(n.valueAxis.min)&&!isNaN(n.valueAxis.max)){switch(t.type){case"serial":n.categoryAxis&&(n.createSerialGraph(),"candlestick"==n.type&&1>n.valueAxis.minMaxMultiplier&&n.positiveClip(n.set));break;case"radar":n.createRadarGraph();break;case"xy":n.createXYGraph();n.positiveClip(n.set)}n.playedTO=setTimeout(function(){n.setAnimationPlayed.call(n)},500*n.chart.startDuration)}},setAnimationPlayed:function(){this.animationPlayed=!0},createXYGraph:function(){var o=[],s=[],e=this.xAxis,h=this.yAxis,i;for(this.pmh=h.viH+1,this.pmw=e.viW+1,this.pmy=this.pmx=0,i=this.start;i<=this.end;i++){var n=this.data[i].axes[e.id].graphs[this.id],t=n.values,r=t.x,u=t.y,t=e.getCoordinate(r),f=h.getCoordinate(u);isNaN(r)||isNaN(u)||!(o.push(t),s.push(f),(r=this.createBullet(n,t,f,i))||(r=0),u=this.labelText)||(n=this.createLabel(n,t,f,u),this.allBullets.push(n),this.positionLabel(t,f,n,this.labelPosition,r))}this.drawLineGraph(o,s);this.launchAnimation()},createRadarGraph:function(){for(var c=this.valueAxis.stackType,f=[],e=[],o,s,t,n,i,u,h,r=this.start;r<=this.end;r++)t=this.data[r].axes[this.valueAxis.id].graphs[this.id],n="none"==c||"3d"==c?t.values.value:t.values.close,isNaN(n)?(this.drawLineGraph(f,e),f=[],e=[]):(i=this.y-(this.valueAxis.getCoordinate(n)-this.height),u=180-360/(this.end-this.start+1)*r,n=i*Math.sin(u/180*Math.PI),i*=Math.cos(u/180*Math.PI),f.push(n),e.push(i),(u=this.createBullet(t,n,i,r))||(u=0),h=this.labelText,h&&(t=this.createLabel(t,n,i,h),this.allBullets.push(t),this.positionLabel(n,i,t,this.labelPosition,u)),isNaN(o)&&(o=n),isNaN(s)&&(s=i));f.push(o);e.push(s);this.drawLineGraph(f,e);this.launchAnimation()},positionLabel:function(n,t,i,r,u){var f=i.getBBox();switch(r){case"left":n-=(f.width+u)/2+2;break;case"top":t-=(u+f.height)/2+1;break;case"right":n+=(f.width+u)/2+2;break;case"bottom":t+=(u+f.height)/2+1}i.translate(n,t)},getGradRotation:function(){var n=270;return"horizontal"==this.gradientOrientation&&(n=0),this.gradientRotation=n},createSerialGraph:function(){var tu,rr,si,cf,hi,r,ru,pi,bu,ri,ku,yf,pf,wf,pe,we,du,bf,kf,df,gt,gf,ne,te,ie,re,ue,ki,fe,ee,oe,lr,kr;this.dashLengthSwitched=this.fillColorsSwitched=this.lineColorSwitched=void 0;var ou=this.chart,di=this.id,ai=this.index,vt=this.data,lt=this.chart.container,u=this.valueAxis,b=this.type,y=this.columnWidthReal,dt=this.showBulletsAt;isNaN(this.columnWidth)||(y=this.columnWidth);isNaN(y)&&(y=.8);var vi=this.useNegativeColorIfDown,k=this.width,g=this.height,oo=this.y,w=this.rotate,ei=this.columnCount,su=AmCharts.toCoordinate(this.cornerRadiusTop,y/2),gu=this.connect,h=[],c=[],gi,ar,se,he,yi=this.chart.graphs.length,dr,nt=this.dx/this.tcc,ft=this.dy/this.tcc,it=u.stackType,yt=this.labelPosition,nr=this.start,vr=this.end,tr=this.scrollbar,ce=this.categoryAxis,nf=this.baseCoord,tf=this.negativeBase,d=this.columnIndex,et=this.lineThickness,pt=this.lineAlpha,rf=this.lineColorR,ti=this.dashLength,yr=this.set,le,so=yt,hu=this.getGradRotation(),ii=this.chart.columnSpacing,ct=ce.cellWidth,ae=(ct*y-ei)/ei;ii>ae&&(ii=ae);var wt,n,cu,uf=g+1,ff=k+1,lu=0,ef=0,of,sf,au,vu,hf=this.fillColorsR,ir=this.negativeFillColors,oi=this.negativeLineColor,gr=this.fillAlphas,nu=this.negativeFillAlphas;if("object"==typeof gr&&(gr=gr[0]),"object"==typeof nu&&(nu=nu[0]),tu=u.getCoordinate(u.min),u.logarithmic&&(tu=u.getCoordinate(u.minReal)),this.minCoord=tu,this.resetBullet&&(this.bullet="none"),tr||"line"!=b&&"smoothedLine"!=b&&"step"!=b||(1==vt.length&&"step"!=b&&"none"==this.bullet&&(this.bullet="round",this.resetBullet=!0),!ir&&void 0==oi||vi)||(rr=tf,rr>u.max&&(rr=u.max),rr<u.min&&(rr=u.min),u.logarithmic&&(rr=u.minReal),si=u.getCoordinate(rr),cf=u.getCoordinate(u.max),w?(uf=g,ff=Math.abs(cf-si),of=g,sf=Math.abs(tu-si),vu=ef=0,u.reversed?(lu=0,au=si):(lu=si,au=0)):(ff=k,uf=Math.abs(cf-si),sf=k,of=Math.abs(tu-si),au=lu=0,u.reversed?(vu=oo,ef=si):vu=si+1)),hi=Math.round,this.pmx=hi(lu),this.pmy=hi(ef),this.pmh=hi(uf),this.pmw=hi(ff),this.nmx=hi(au),this.nmy=hi(vu),this.nmh=hi(of),this.nmw=hi(sf),AmCharts.isModern||(this.nmy=this.nmx=0,this.nmh=this.height),this.clustered||(ei=1),y="column"==b?(ct*y-ii*(ei-1))/ei:ct*y,1>y&&(y=1),"line"==b||"step"==b||"smoothedLine"==b){if(0<nr){for(r=nr-1;-1<r;r--)if(wt=vt[r],n=wt.axes[u.id].graphs[di],cu=n.values.value,!isNaN(cu)){nr=r;break}if(this.lineColorField)for(r=nr;-1<r;r--)if(wt=vt[r],n=wt.axes[u.id].graphs[di],n.lineColor){this.bulletColorSwitched=this.lineColorSwitched=n.lineColor;break}if(this.fillColorsField)for(r=nr;-1<r;r--)if(wt=vt[r],n=wt.axes[u.id].graphs[di],n.fillColors){this.fillColorsSwitched=n.fillColors;break}if(this.dashLengthField)for(r=nr;-1<r;r--)if(wt=vt[r],n=wt.axes[u.id].graphs[di],!isNaN(n.dashLength)){this.dashLengthSwitched=n.dashLength;break}}if(vr<vt.length-1)for(r=vr+1;r<vt.length;r++)if(wt=vt[r],n=wt.axes[u.id].graphs[di],cu=n.values.value,!isNaN(cu)){vr=r;break}}vr<vt.length-1&&vr++;var o=[],s=[],ur=!1;("line"==b||"step"==b||"smoothedLine"==b)&&(this.stackable&&"regular"==it||"100%"==it||this.fillToGraph)&&(ur=!0);var ve=this.noStepRisers,yu=-1e3,pu=-1e3,wu=this.minDistance,fr=!0,iu=!1;for(r=nr;r<=vr;r++){if(wt=vt[r],n=wt.axes[u.id].graphs[di],n.index=r,pi=NaN,vi&&void 0==this.openField)for(bu=r+1;bu<vt.length&&(!vt[bu]||!(ru=vt[r+1].axes[u.id].graphs[di])||!ru.values||(pi=ru.values.value,isNaN(pi)));bu++);var v,l,p,ot,ui=NaN,i=NaN,t=NaN,e=NaN,f=NaN,er=NaN,ci=NaN,or=NaN,li=NaN,st=NaN,at=NaN,rt=NaN,ut=NaN,a=NaN,lf=NaN,af=NaN,ht=NaN,gt=void 0,wi=hf,pr=gr,fi=rf,bt,ni,vf=this.proCandlesticks,uu=this.pattern;if(void 0!=n.pattern&&(uu=n.pattern),void 0!=n.color&&(wi=n.color),n.fillColors&&(wi=n.fillColors),isNaN(n.alpha)||(pr=n.alpha),isNaN(n.dashLength)||(ti=n.dashLength),ri=n.values,u.recalculateToPercents&&(ri=n.percents),ri){if(a=this.stackable&&"none"!=it&&"3d"!=it?ri.close:ri.value,("candlestick"==b||"ohlc"==b)&&(a=ri.close,af=ri.low,ci=u.getCoordinate(af),lf=ri.high,li=u.getCoordinate(lf)),ht=ri.open,t=u.getCoordinate(a),isNaN(ht)||(f=u.getCoordinate(ht),vi&&(pi=ht,ht=f=NaN)),vi&&(void 0==this.openField?ru&&(ru.isNegative=pi<a?!0:!1,isNaN(pi)&&(n.isNegative=!fr)):n.isNegative=pi>a?!0:!1),!tr)switch(this.showBalloonAt){case"close":n.y=t;break;case"open":n.y=f;break;case"high":n.y=li;break;case"low":n.y=ci}var ui=wt.x[ce.id],wr=this.periodSpan-1,kt=Math.floor(ct/2)+Math.floor(wr*ct/2),bi=kt,ye=0;"left"==this.stepDirection&&(ye=(2*ct+wr*ct)/2,ui-=ye);"start"==this.pointPosition&&(ui-=ct/2+Math.floor(wr*ct/2),kt=0,bi=Math.floor(ct)+Math.floor(wr*ct));"end"==this.pointPosition&&(ui+=ct/2+Math.floor(wr*ct/2),kt=Math.floor(ct)+Math.floor(wr*ct),bi=0);ve&&(ku=this.columnWidth,isNaN(ku)||(kt*=ku,bi*=ku));tr||(n.x=ui);-1e5>ui&&(ui=-1e5);ui>k+1e5&&(ui=k+1e5);w?(i=t,e=f,f=t=ui,isNaN(ht)&&!this.fillToGraph&&(e=nf),er=ci,or=li):(e=i=ui,isNaN(ht)&&!this.fillToGraph&&(f=nf));(!vf&&a<ht||vf&&a<le)&&(n.isNegative=!0,ir&&(wi=ir),nu&&(pr=nu),void 0!=oi&&(fi=oi));iu=!1;isNaN(a)||(vi?a>pi?(fr&&(iu=!0),fr=!1):(fr||(iu=!0),fr=!0):n.isNegative=a<tf?!0:!1,le=a);switch(b){case"line":isNaN(a)?gu||(this.drawLineGraph(h,c,o,s),h=[],c=[],o=[],s=[]):((Math.abs(i-yu)>=wu||Math.abs(t-pu)>=wu)&&(h.push(i),c.push(t),yu=i,pu=t),st=i,at=t,rt=i,ut=t,!ur||isNaN(f)||isNaN(e)||(o.push(e),s.push(f)),(iu||void 0!=n.lineColor||void 0!=n.fillColors||!isNaN(n.dashLength))&&(this.drawLineGraph(h,c,o,s),h=[i],c=[t],o=[],s=[],!ur||isNaN(f)||isNaN(e)||(o.push(e),s.push(f)),vi?fr?(this.lineColorSwitched=rf,this.fillColorsSwitched=hf):(this.lineColorSwitched=oi,this.fillColorsSwitched=ir):(this.lineColorSwitched=n.lineColor,this.fillColorsSwitched=n.fillColors),this.dashLengthSwitched=n.dashLength),n.gap&&(this.drawLineGraph(h,c,o,s),h=[],c=[],o=[],s=[]));break;case"smoothedLine":isNaN(a)?gu||(this.drawSmoothedGraph(h,c,o,s),h=[],c=[],o=[],s=[]):((Math.abs(i-yu)>=wu||Math.abs(t-pu)>=wu)&&(h.push(i),c.push(t),yu=i,pu=t),st=i,at=t,rt=i,ut=t,!ur||isNaN(f)||isNaN(e)||(o.push(e),s.push(f)),void 0==n.lineColor&&void 0==n.fillColors&&isNaN(n.dashLength)||(this.drawSmoothedGraph(h,c,o,s),h=[i],c=[t],o=[],s=[],!ur||isNaN(f)||isNaN(e)||(o.push(e),s.push(f)),this.lineColorSwitched=n.lineColor,this.fillColorsSwitched=n.fillColors,this.dashLengthSwitched=n.dashLength),n.gap&&(this.drawSmoothedGraph(h,c,o,s),h=[],c=[],o=[],s=[]));break;case"step":isNaN(a)?gu||((1>=this.periodSpan||1<this.periodSpan&&i-gi>kt+bi)&&(gi=ar=NaN),this.drawLineGraph(h,c,o,s),h=[],c=[],o=[],s=[]):(void 0==n.lineColor&&void 0==n.fillColors&&isNaN(n.dashLength)||(this.drawLineGraph(h,c,o,s),h=[],c=[],o=[],s=[],this.lineColorSwitched=n.lineColor,this.fillColorsSwitched=n.fillColors,this.dashLengthSwitched=n.dashLength),w?(isNaN(gi)||(h.push(gi),c.push(t-kt)),c.push(t-kt),h.push(i),c.push(t+bi),h.push(i),!ur||isNaN(f)||isNaN(e)||(o.push(se),s.push(f-kt),o.push(e),s.push(f-kt),o.push(e),s.push(f+bi))):(isNaN(ar)||(c.push(ar),h.push(gi),c.push(ar),h.push(i-kt)),h.push(i-kt),c.push(t),h.push(i+bi),c.push(t),!ur||isNaN(f)||isNaN(e)||(o.push(e-kt),s.push(he),o.push(e-kt),s.push(f),o.push(e+bi),s.push(f))),gi=i,ar=t,se=e,he=f,st=i,at=t,rt=i,ut=t,iu&&(this.drawLineGraph(h,c,o,s),h=[],c=[],o=[],s=[],vi&&(fr?(this.lineColorSwitched=rf,this.fillColorsSwitched=hf):(this.lineColorSwitched=oi,this.fillColorsSwitched=ir))),ve||n.gap)&&(gi=ar=NaN,this.drawLineGraph(h,c,o,s),h=[],c=[],o=[],s=[]);break;case"column":bt=fi;void 0!=n.lineColor&&(bt=n.lineColor);yf=this.topRadius;isNaN(a)||(vi||(n.isNegative=a<tf?!0:!1),n.isNegative&&(ir&&(wi=ir),void 0!=oi&&(bt=oi)),pf=u.min,wf=u.max,a<pf&&ht<pf||a>wf&&ht>wf||(w?("3d"==it?(l=t-(ei/2-this.depthCount+1)*(y+ii)+ii/2+ft*d,v=e+nt*d):(l=Math.floor(t-(ei/2-d)*(y+ii)+ii/2),v=e),p=y,st=i,at=l+y/2,rt=i,ut=l+y/2,l+p>g+d*ft&&(p=g-l+d*ft),l<d*ft&&(p+=l,l=d*ft),ot=i-e,pe=v,v=AmCharts.fitToBounds(v,0,k),ot+=pe-v,ot=AmCharts.fitToBounds(ot,-v,k-v+nt*d),l<g&&0<p&&(gt=new AmCharts.Cuboid(lt,ot,p,nt-ou.d3x,ft-ou.d3y,wi,pr,et,bt,pt,hu,su,w,ti,uu,yf),"bottom"!=yt&&"inside"!=yt&&"middle"!=yt&&(yt=u.reversed?"left":"right",0>a&&(yt=u.reversed?"right":"left")),"regular"==it||"100%"==it)&&(st+=this.dx)):("3d"==it?(v=i-(ei/2-this.depthCount+1)*(y+ii)+ii/2+nt*d,l=f+ft*d):(v=i-(ei/2-d)*(y+ii)+ii/2,l=f),p=y,st=v+y/2,at=t,rt=v+y/2,ut=t,v+p>k+d*nt&&(p=k-v+d*nt),v<d*nt&&(p+=v-d*nt,v=d*nt),ot=t-f,we=l,l=AmCharts.fitToBounds(l,this.dy,g),ot+=we-l,ot=AmCharts.fitToBounds(ot,-l+ft*d,g-l),v<k+d*nt&&0<p&&((this.showOnAxis&&(l-=ft/2),gt=new AmCharts.Cuboid(lt,p,ot,nt-ou.d3x,ft-ou.d3y,wi,pr,et,bt,this.lineAlpha,hu,su,w,ti,uu,yf),0>a&&"middle"!=yt&&"inside"!=yt)?yt="bottom":(yt=so,"regular"==it||"100%"==it)&&(at+=this.dy)))),gt&&(ni=gt.set,n.columnGraphics=ni,ni.translate(v,l),this.columnsSet.push(ni),(n.url||this.showHandOnHover)&&ni.setAttr("cursor","pointer"),!tr)&&("none"==it&&(dr=w?(this.end+1-r)*yi-ai:yi*r+ai),"3d"==it&&(w?(dr=(this.end+1-r)*yi-ai-1e3*this.depthCount,st+=nt*this.columnIndex,rt+=nt*this.columnIndex,n.y+=nt*this.columnIndex):(dr=(yi-ai)*(r+1)+1e3*this.depthCount,st+=3,at+=ft*this.columnIndex+7,ut+=ft*this.columnIndex,n.y+=ft*this.columnIndex)),("regular"==it||"100%"==it)&&("inside"!=yt&&(yt="middle"),dr=w?0<ri.value?(this.end+1-r)*yi+ai:(this.end+1-r)*yi-ai:0<ri.value?yi*r+ai:yi*r-ai),this.columnsArray.push({column:gt,depth:dr}),n.x=w?l+p/2:v+p/2,this.ownColumns.push(gt),this.animateColumns(gt,r,i,e,t,f),this.addListeners(ni,n)));break;case"candlestick":isNaN(ht)||isNaN(a)||(bt=fi,void 0!=n.lineColor&&(bt=n.lineColor),w?(l=t-y/2,v=e,p=y,l+p>g&&(p=g-l),0>l&&(p+=l,l=0),l<g&&0<p)&&(a>ht?(kf=[i,or],df=[e,er]):(kf=[e,or],df=[i,er]),!isNaN(or)&&!isNaN(er)&&t<g&&0<t&&(du=AmCharts.line(lt,kf,[t,t],bt,pt,et),bf=AmCharts.line(lt,df,[t,t],bt,pt,et)),ot=i-e,gt=new AmCharts.Cuboid(lt,ot,p,nt,ft,wi,gr,et,bt,pt,hu,su,w,ti,uu)):(v=i-y/2,l=f+et/2,p=y,v+p>k&&(p=k-v),0>v&&(p+=v,v=0),ot=t-f,v<k&&0<p)&&(vf&&a>=ht&&(pr=0),gt=new AmCharts.Cuboid(lt,p,ot,nt,ft,wi,pr,et,bt,pt,hu,su,w,ti,uu),a>ht?(gf=[t,li],ne=[f,ci]):(gf=[f,li],ne=[t,ci]),!isNaN(li)&&!isNaN(ci)&&i<k&&0<i&&(du=AmCharts.line(lt,[i,i],gf,bt,pt,et),bf=AmCharts.line(lt,[i,i],ne,bt,pt,et))),gt&&(ni=gt.set,n.columnGraphics=ni,yr.push(ni),ni.translate(v,l-et/2),(n.url||this.showHandOnHover)&&ni.setAttr("cursor","pointer"),du&&(yr.push(du),yr.push(bf)),st=i,at=t,w?(ut=t,rt=i,"open"==dt&&(rt=e),"high"==dt&&(rt=or),"low"==dt&&(rt=er)):(ut=t,"open"==dt&&(ut=f),"high"==dt&&(ut=li),"low"==dt&&(ut=ci),rt=i),tr||(n.x=w?l+p/2:v+p/2,this.animateColumns(gt,r,i,e,t,f),this.addListeners(ni,n))));break;case"ohlc":if(!(isNaN(ht)||isNaN(lf)||isNaN(af)||isNaN(a))){if(a<ht&&(n.isNegative=!0,void 0!=oi&&(fi=oi)),w){var be=t-y/2,be=AmCharts.fitToBounds(be,0,g),ke=AmCharts.fitToBounds(t,0,g),de=t+y/2,de=AmCharts.fitToBounds(de,0,g);ie=AmCharts.line(lt,[e,e],[be,ke],fi,pt,et,ti);0<t&&t<g&&(te=AmCharts.line(lt,[er,or],[t,t],fi,pt,et,ti));re=AmCharts.line(lt,[i,i],[ke,de],fi,pt,et,ti);ut=t;rt=i;"open"==dt&&(rt=e);"high"==dt&&(rt=or);"low"==dt&&(rt=er)}else{var ge=i-y/2,ge=AmCharts.fitToBounds(ge,0,k),no=AmCharts.fitToBounds(i,0,k),to=i+y/2,to=AmCharts.fitToBounds(to,0,k);ie=AmCharts.line(lt,[ge,no],[f,f],fi,pt,et,ti);0<i&&i<k&&(te=AmCharts.line(lt,[i,i],[ci,li],fi,pt,et,ti));re=AmCharts.line(lt,[no,to],[t,t],fi,pt,et,ti);ut=t;"open"==dt&&(ut=f);"high"==dt&&(ut=li);"low"==dt&&(ut=ci);rt=i}yr.push(ie);yr.push(te);yr.push(re);st=i;at=t}}if(!tr&&!isNaN(a)&&(ue=this.hideBulletsCount,this.end-this.start<=ue||0===ue)){if(ki=this.createBullet(n,rt,ut,r),ki||(ki=0),fe=this.labelText,fe){var tt=this.createLabel(n,0,0,fe),sr=0,hr=0,io=tt.getBBox(),br=io.width,cr=io.height;switch(yt){case"left":sr=-(br/2+ki/2+3);break;case"top":hr=-(cr/2+ki/2+3);break;case"right":sr=ki/2+2+br/2;break;case"bottom":w&&"column"==b?(st=nf,0>a||0<a&&u.reversed?(sr=-6,tt.attr({"text-anchor":"end"})):(sr=6,tt.attr({"text-anchor":"start"}))):(hr=ki/2+cr/2,tt.x=-(br/2+2));break;case"middle":"column"==b&&(w?(hr=-(cr/2)+this.fontSize/2,sr=-(i-e)/2-nt,Math.abs(i-e)<br&&!this.showAllValueLabels&&(tt.remove(),tt=null)):(hr=-(t-f)/2-ft,Math.abs(t-f)<cr&&!this.showAllValueLabels&&(tt.remove(),tt=null)));break;case"inside":w?(hr=-(cr/2)+this.fontSize/2,sr=0>ot?br/2+6:-br/2-6):hr=0>ot?cr:-cr}tt&&(isNaN(at)||isNaN(st)?(tt.remove(),tt=null):(st+=sr,at+=hr,tt.translate(st,at),w)?(0>at||at>g)&&(tt.remove(),tt=null):(ee=0,"3d"==it&&(ee=nt*d),(0>st||st>k+ee)&&(tt.remove(),tt=null)),tt&&this.allBullets.push(tt))}if(("regular"==it||"100%"==it)&&(oe=u.totalText,oe)){lr=this.createLabel(n,0,0,oe,u.totalTextColor);this.allBullets.push(lr);var ro=lr.getBBox(),uo=ro.width,fo=ro.height,fu,eu,eo=u.totals[r];eo&&eo.remove();kr=0;"column"!=b&&(kr=ki);w?(eu=t,fu=0>a?i-uo/2-2-kr:i+uo/2+3+kr):(fu=i,eu=0>a?t+fo/2+kr:t-fo/2-3-kr);lr.translate(fu,eu);u.totals[r]=lr;w?(0>eu||eu>g)&&lr.remove():(0>fu||fu>k)&&lr.remove()}}}}("line"==b||"step"==b||"smoothedLine"==b)&&("smoothedLine"==b?this.drawSmoothedGraph(h,c,o,s):this.drawLineGraph(h,c,o,s),tr||this.launchAnimation());this.bulletsHidden&&this.hideBullets()},animateColumns:function(n,t,i){var r=this;i=r.chart.startDuration;0<i&&!r.animationPlayed&&(r.seqAn?(n.set.hide(),r.animationArray.push(n),n=setTimeout(function(){r.animate.call(r)},i/(r.end-r.start+1)*(t-r.start)*1e3),r.timeOuts.push(n)):r.animate(n))},createLabel:function(n,t,i,r,u){var e=this.chart,f=n.labelColor,o;return f||(f=this.color),f||(f=e.color),u&&(f=u),u=this.fontSize,void 0===u&&(this.fontSize=u=e.fontSize),o=this.labelFunction,r=e.formatString(r,n),r=AmCharts.cleanFromEmpty(r),o&&(r=o(n,r)),n=AmCharts.text(this.container,r,f,e.fontFamily,u),n.node.style.pointerEvents="none",n.translate(t,i),this.bulletSet.push(n),n},positiveClip:function(n){n.clipRect(this.pmx,this.pmy,this.pmw,this.pmh)},negativeClip:function(n){n.clipRect(this.nmx,this.nmy,this.nmw,this.nmh)},drawLineGraph:function(n,t,i,r){var u=this,a,h,w;if(1<n.length){var l=u.set,v=u.chart,s=u.container,y=s.set(),p=s.set();l.push(p);l.push(y);var c=u.lineAlpha,e=u.lineThickness,l=u.fillAlphas,d=u.lineColorR,f=u.negativeLineAlpha;isNaN(f)&&(f=c);a=u.lineColorSwitched;a&&(d=a);a=u.fillColorsR;h=u.fillColorsSwitched;h&&(a=h);w=u.dashLength;(h=u.dashLengthSwitched)&&(w=h);var h=u.negativeLineColor,b=u.negativeFillColors,k=u.negativeFillAlphas,o=u.baseCoord;0!==u.negativeBase&&(o=u.valueAxis.getCoordinate(u.negativeBase));c=AmCharts.line(s,n,t,d,c,e,w,!1,!0);y.push(c);y.click(function(n){u.handleGraphEvent(n,"clickGraph")}).mouseover(function(n){u.handleGraphEvent(n,"rollOverGraph")}).mouseout(function(n){u.handleGraphEvent(n,"rollOutGraph")});void 0===h||u.useNegativeColorIfDown||(e=AmCharts.line(s,n,t,h,f,e,w,!1,!0),p.push(e));(0<l||0<k)&&(e=n.join(";").split(";"),f=t.join(";").split(";"),c=v.type,"serial"==c?0<i.length?(i.reverse(),r.reverse(),e=n.concat(i),f=t.concat(r)):u.rotate?(f.push(f[f.length-1]),e.push(o),f.push(f[0]),e.push(o),f.push(f[0]),e.push(e[0])):(e.push(e[e.length-1]),f.push(o),e.push(e[0]),f.push(o),e.push(n[0]),f.push(f[0])):"xy"==c&&(t=u.fillToAxis)&&(AmCharts.isString(t)&&(t=v.getValueAxisById(t)),"H"==t.orientation?(o="top"==t.position?0:t.viH,e.push(e[e.length-1]),f.push(o),e.push(e[0]),f.push(o),e.push(n[0]),f.push(f[0])):(o="left"==t.position?0:t.viW,f.push(f[f.length-1]),e.push(o),f.push(f[0]),e.push(o),f.push(f[0]),e.push(e[0]))),n=u.gradientRotation,0<l&&(v=AmCharts.polygon(s,e,f,a,l,1,"#000",0,n),v.pattern(u.pattern),y.push(v)),b||void 0!==h)&&(isNaN(k)&&(k=l),b||(b=h),s=AmCharts.polygon(s,e,f,b,k,1,"#000",0,n),s.pattern(u.pattern),p.push(s),p.click(function(n){u.handleGraphEvent(n,"clickGraph")}).mouseover(function(n){u.handleGraphEvent(n,"rollOverGraph")}).mouseout(function(n){u.handleGraphEvent(n,"rollOutGraph")}));u.applyMask(p,y)}},applyMask:function(n,t){var i=n.length();"serial"!=this.chart.type||this.scrollbar||(this.positiveClip(t),0<i&&this.negativeClip(n))},drawSmoothedGraph:function(n,t,i,r){if(1<n.length){var o=this.set,s=this.container,c=s.set(),l=s.set();o.push(l);o.push(c);var e=this.lineAlpha,u=this.lineThickness,o=this.dashLength,w=this.fillAlphas,h=this.lineColorR,a=this.fillColorsR,v=this.negativeLineColor,y=this.negativeFillColors,b=this.negativeFillAlphas,p=this.baseCoord,f=this.lineColorSwitched;f&&(h=f);(f=this.fillColorsSwitched)&&(a=f);f=this.negativeLineAlpha;isNaN(f)&&(f=e);e=new AmCharts.Bezier(s,n,t,h,e,u,a,0,o);c.push(e.path);void 0!==v&&(u=new AmCharts.Bezier(s,n,t,v,f,u,a,0,o),l.push(u.path));0<w&&(e=n.join(";").split(";"),h=t.join(";").split(";"),u="",0<i.length?(i.push("M"),r.push("M"),i.reverse(),r.reverse(),e=n.concat(i),h=t.concat(r)):(this.rotate?(u+=" L"+p+","+t[t.length-1],u+=" L"+p+","+t[0]):(u+=" L"+n[n.length-1]+","+p,u+=" L"+n[0]+","+p),u+=" L"+n[0]+","+t[0]),i=new AmCharts.Bezier(s,e,h,NaN,0,0,a,w,o,u),i.path.pattern(this.pattern),c.push(i.path),y||void 0!==v)&&(b||(b=w),y||(y=v),n=new AmCharts.Bezier(s,n,t,NaN,0,0,y,b,o,u),n.path.pattern(this.pattern),l.push(n.path));this.applyMask(l,c)}},launchAnimation:function(){var n=this,t=n.chart.startDuration,i,r;0<t&&!n.animationPlayed&&(i=n.set,r=n.bulletSet,AmCharts.VML||(i.attr({opacity:n.startAlpha}),r.attr({opacity:n.startAlpha})),i.hide(),r.hide(),n.seqAn?(t=setTimeout(function(){n.animateGraphs.call(n)},n.index*t*1e3),n.timeOuts.push(t)):n.animateGraphs())},animateGraphs:function(){var n=this.chart,t=this.set,i=this.bulletSet,r=this.x,u=this.y,f;t.show();i.show();f=n.startDuration;n=n.startEffect;t&&(this.rotate?(t.translate(-1e3,u),i.translate(-1e3,u)):(t.translate(r,-1e3),i.translate(r,-1e3)),t.animate({opacity:1,translate:r+","+u},f,n),i.animate({opacity:1,translate:r+","+u},f,n))},animate:function(n){var i=this.chart,t=this.animationArray;!n&&0<t.length&&(n=t[0],t.shift());t=AmCharts[AmCharts.getEffect(i.startEffect)];i=i.startDuration;n&&(this.rotate?n.animateWidth(i,t):n.animateHeight(i,t),n.set.show())},legendKeyColor:function(){var t=this.legendColor,n=this.lineAlpha;return void 0===t&&(t=this.lineColorR,0===n&&(n=this.fillColorsR)&&(t="object"==typeof n?n[0]:n)),t},legendKeyAlpha:function(){var n=this.legendAlpha;return void 0===n&&(n=this.lineAlpha,this.fillAlphas>n&&(n=this.fillAlphas),0===n&&(n=this.bulletAlpha),0===n&&(n=1)),n},createBullet:function(n,t,i,r){var o,f,u,s,e,v;if(!isNaN(t)&&!isNaN(i)){r=this.container;o=this.bulletOffset;f=this.bulletSize;isNaN(n.bulletSize)||(f=n.bulletSize);var c=n.values.value,l=this.maxValue,h=this.minValue,a=this.maxBulletSize,s=this.minBulletSize;isNaN(l)||(isNaN(c)||(f=(c-h)/(l-h)*(a-s)+s),h==l&&(f=a));l=f;this.bulletAxis&&(f=n.values.error,isNaN(f)||(c=f),f=this.bulletAxis.stepWidth*c);f<this.minBulletSize&&(f=this.minBulletSize);this.rotate?t=n.isNegative?t-o:t+o:i=n.isNegative?i+o:i-o;s=this.bulletColorR;n.lineColor&&(this.bulletColorSwitched=n.lineColor);this.bulletColorSwitched&&(s=this.bulletColorSwitched);n.isNegative&&void 0!==this.bulletColorNegative&&(s=this.bulletColorNegative);void 0!==n.color&&(s=n.color);"xy"==this.chart.type&&this.valueField&&(e=this.pattern,n.pattern&&(e=n.pattern));o=this.bullet;n.bullet&&(o=n.bullet);var c=this.bulletBorderThickness,h=this.bulletBorderColorR,a=this.bulletBorderAlpha,y=this.bulletAlpha;return h||(h=s),this.useLineColorForBulletBorder&&(h=this.lineColorR),v=n.alpha,isNaN(v)||(y=v),("none"!=this.bullet||n.bullet)&&(u=AmCharts.bullet(r,o,f,s,y,c,h,a,l,0,e)),(this.customBullet||n.customBullet)&&(e=this.customBullet,n.customBullet&&(e=n.customBullet),e&&(u&&u.remove(),"function"==typeof e?(u=new e,u.chart=this.chart,n.bulletConfig&&(u.availableSpace=i,u.graph=this,u.graphDataItem=n,u.bulletY=i,n.bulletConfig.minCoord=this.minCoord-i,u.bulletConfig=n.bulletConfig),u.write(r),u=u.set):(this.chart.path&&(e=this.chart.path+e),u=r.set(),r=r.image(e,0,0,f,f),u.push(r),this.centerCustomBullets&&r.translate(-f/2,-f/2)))),u&&((n.url||this.showHandOnHover)&&u.setAttr("cursor","pointer"),"serial"==this.chart.type&&(0>+t||+t>this.width||i<-f/2||+i>this.height)&&(u.remove(),u=null),u&&(this.bulletSet.push(u),u.translate(t,i),this.addListeners(u,n),this.allBullets.push(u)),n.bx=t,n.by=i),n.bulletGraphics=u,f}},showBullets:function(){var t=this.allBullets,n;for(this.bulletsHidden=!1,n=0;n<t.length;n++)t[n].show()},hideBullets:function(){var t=this.allBullets,n;for(this.bulletsHidden=!0,n=0;n<t.length;n++)t[n].hide()},addListeners:function(n,t){var i=this;n.mouseover(function(n){i.handleRollOver(t,n)}).mouseout(function(n){i.handleRollOut(t,n)}).touchend(function(n){i.handleRollOver(t,n);i.chart.panEventsEnabled&&i.handleClick(t,n)}).touchstart(function(n){i.handleRollOver(t,n)}).click(function(n){i.handleClick(t,n)}).dblclick(function(n){i.handleDoubleClick(t,n)}).contextmenu(function(n){i.handleRightClick(t,n)})},handleRollOver:function(n,t){var i,r,u,f,e;n&&(i=this.chart,r={type:"rollOverGraphItem",item:n,index:n.index,graph:this,target:this,chart:this.chart,event:t},this.fire("rollOverGraphItem",r),i.fire("rollOverGraphItem",r),clearTimeout(i.hoverInt),r=this.showBalloon,i.chartCursor&&"serial"==i.type&&(r=!1,!i.chartCursor.valueBalloonsEnabled&&this.showBalloon&&(r=!0)),r&&(r=i.formatString(this.balloonText,n,!0),u=this.balloonFunction,u&&(r=u(n,n.graph)),r=AmCharts.cleanFromEmpty(r),u=i.getBalloonColor(this,n),i.balloon.showBullet=!1,i.balloon.pointerOrientation="V",f=n.x,e=n.y,i.rotate&&(f=n.y,e=n.x),i.showBalloon(r,u,!0,f+i.marginLeftReal,e+i.marginTopReal)));this.handleGraphEvent(t,"rollOverGraph")},handleRollOut:function(n,t){if(this.chart.hideBalloon(),n){var i={type:"rollOutGraphItem",item:n,index:n.index,graph:this,target:this,chart:this.chart,event:t};this.fire("rollOutGraphItem",i);this.chart.fire("rollOutGraphItem",i)}this.handleGraphEvent(t,"rollOutGraph")},handleClick:function(n,t){if(n){var i={type:"clickGraphItem",item:n,index:n.index,graph:this,target:this,chart:this.chart,event:t};this.fire("clickGraphItem",i);this.chart.fire("clickGraphItem",i);AmCharts.getURL(n.url,this.urlTarget)}this.handleGraphEvent(t,"clickGraph")},handleGraphEvent:function(n,t){var i={type:t,graph:this,target:this,chart:this.chart,event:n};this.fire(t,i);this.chart.fire(t,i)},handleRightClick:function(n,t){if(n){var i={type:"rightClickGraphItem",item:n,index:n.index,graph:this,target:this,chart:this.chart,event:t};this.fire("rightClickGraphItem",i);this.chart.fire("rightClickGraphItem",i)}},handleDoubleClick:function(n,t){if(n){var i={type:"doubleClickGraphItem",item:n,index:n.index,graph:this,target:this,chart:this.chart,event:t};this.fire("doubleClickGraphItem",i);this.chart.fire("doubleClickGraphItem",i)}},zoom:function(n,t){this.start=n;this.end=t;this.draw()},changeOpacity:function(n){var t=this.set,i,r;if(t&&t.setAttr("opacity",n),t=this.ownColumns)for(i=0;i<t.length;i++)r=t[i].set,r&&r.setAttr("opacity",n);(t=this.bulletSet)&&t.setAttr("opacity",n)},destroy:function(){var n,t;if(AmCharts.remove(this.set),AmCharts.remove(this.bulletSet),n=this.timeOuts,n)for(t=0;t<n.length;t++)clearTimeout(n[t]);this.timeOuts=[]}});AmCharts.ChartCursor=AmCharts.Class({construct:function(n){this.cname="ChartCursor";this.createEvents("changed","zoomed","onHideCursor","draw","selected","moved");this.enabled=!0;this.cursorAlpha=1;this.selectionAlpha=.2;this.cursorColor="#CC0000";this.categoryBalloonAlpha=1;this.color="#FFFFFF";this.type="cursor";this.zoomed=!1;this.zoomable=!0;this.pan=!1;this.categoryBalloonDateFormat="MMM DD, YYYY";this.categoryBalloonEnabled=this.valueBalloonsEnabled=!0;this.rolledOver=!1;this.cursorPosition="middle";this.bulletsEnabled=this.skipZoomDispatch=!1;this.bulletSize=8;this.selectWithoutZooming=this.oneBalloonOnly=!1;this.graphBulletSize=1.7;this.animationDuration=.3;this.zooming=!1;this.adjustment=0;this.avoidBalloonOverlapping=!0;AmCharts.applyTheme(this,n,this.cname)},draw:function(){var n=this,r,t,i;if(n.destroy(),r=n.chart,t=r.container,n.rotate=r.rotate,n.container=t,t=t.set(),t.translate(n.x,n.y),n.set=t,r.cursorSet.push(t),t=new AmCharts.AmBalloon,t.chart=r,n.categoryBalloon=t,AmCharts.copyProperties(r.balloon,t),t.cornerRadius=0,t.shadowAlpha=0,t.borderThickness=1,t.borderAlpha=1,t.showBullet=!1,i=n.categoryBalloonColor,void 0===i&&(i=n.cursorColor),t.fillColor=i,t.fillAlpha=n.categoryBalloonAlpha,t.borderColor=i,t.color=n.color,i=n.valueLineAxis,AmCharts.isString(i)&&(i=r.getValueAxisById(i)),i||(i=r.valueAxes[0]),n.valueLineAxis=i,n.valueLineBalloonEnabled&&(i=new AmCharts.AmBalloon,n.vaBalloon=i,AmCharts.copyProperties(t,i),i.animationDuration=0,n.rotate||(i.pointerOrientation="H")),n.rotate&&(t.pointerOrientation="H"),n.extraWidth=0,n.prevX=[],n.prevY=[],n.prevTX=[],n.prevTY=[],n.valueBalloonsEnabled)for(t=0;t<r.graphs.length;t++)i=new AmCharts.AmBalloon,i.chart=r,AmCharts.copyProperties(r.balloon,i),r.graphs[t].valueBalloon=i;"cursor"==n.type?n.createCursor():n.createCrosshair();n.interval=setInterval(function(){n.detectMovement.call(n)},40)},updateData:function(){var n=this.chart;this.data=n.chartData;this.firstTime=n.firstTime;this.lastTime=n.lastTime},createCursor:function(){var r=this.chart,f=this.cursorAlpha,e=r.categoryAxis,s=this.categoryBalloon,n,u,t,i;t=r.dx;i=r.dy;var o=this.width,h=this.height,r=r.rotate;s.pointerWidth=e.tickLength;r?(n=[0,o,o+t],u=[0,0,i],t=[t,0,0],i=[i,0,h]):(n=[t,0,0],u=[i,0,h],t=[0,o,o+t],i=[0,0,i]);this.line=n=AmCharts.line(this.container,n,u,this.cursorColor,f,1);(u=this.fullRectSet)?(u.push(n),u.translate(this.x,this.y)):this.set.push(n);this.valueLineEnabled&&(n=this.valueLineAlpha,isNaN(n)||(f=n),this.vLine=f=AmCharts.line(this.container,t,i,this.cursorColor,f,1),this.set.push(f));this.setBalloonBounds(s,e,r);(e=this.vaBalloon)&&this.setBalloonBounds(e,this.valueLineAxis,!r);this.hideCursor()},createCrosshair:function(){var n=this.cursorAlpha,t=this.container,i=AmCharts.line(t,[0,0],[0,this.height],this.cursorColor,n,1),n=AmCharts.line(t,[0,this.width],[0,0],this.cursorColor,n,1);this.set.push(i);this.set.push(n);this.vLine=i;this.hLine=n;this.hideCursor()},detectMovement:function(){var n=this.chart,t,i;n.mouseIsOver?(t=n.mouseX-this.x,i=n.mouseY-this.y,-.5<t&&t<this.width+1&&0<i&&i<this.height?(this.drawing?this.rolledOver||n.setMouseCursor("crosshair"):this.pan&&(this.rolledOver||n.setMouseCursor("move")),this.rolledOver=!0,(this.valueLineEnabled||this.valueLineBalloonEnabled)&&this.updateVLine(t,i),this.setPosition()):this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)):this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)},updateVLine:function(n,t){var i=this.vLine,f=this.vaBalloon,r,u,e,o;!(i||f)||this.panning||this.drawing||(i&&i.show(),r=this.valueLineAxis,e=this.rotate,e?(i&&i.translate(n,0),r&&(u=r.coordinateToValue(n)),i=n):(i&&i.translate(0,t),r&&(u=r.coordinateToValue(t)),i=t-1),f&&!isNaN(u)&&this.prevLineValue!=u&&(o=r.formatValue(u,!0),f&&(this.setBalloonPosition(f,r,i,!e),f.showBalloon(o))),this.prevLineValue=u)},getMousePosition:function(){var n,t=this.width,i=this.height;return n=this.chart,this.rotate?(n=n.mouseY-this.y,0>n&&(n=0),n>i&&(n=i)):(n=n.mouseX-this.x-1,0>n&&(n=0),n>t&&(n=t)),n},updateCrosshair:function(){var n=this.chart,t=n.mouseX-this.x,i=n.mouseY-this.y,r=this.vLine,u=this.hLine,t=AmCharts.fitToBounds(t,0,this.width),i=AmCharts.fitToBounds(i,0,this.height);0<this.cursorAlpha&&(r.show(),u.show(),r.translate(t,0),u.translate(0,i));this.zooming&&(n.hideXScrollbar&&(t=NaN),n.hideYScrollbar&&(i=NaN),this.updateSelectionSize(t,i));this.fireMoved();n.mouseIsOver||this.zooming||this.hideCursor()},fireMoved:function(){var t=this.chart,n={type:"moved",target:this};n.chart=t;n.zooming=this.zooming;n.x=t.mouseX-this.x;n.y=t.mouseY-this.y;this.fire("moved",n)},updateSelectionSize:function(n,t){AmCharts.remove(this.selection);var i=this.selectionPosX,r=this.selectionPosY,e=0,o=0,u=this.width,f=this.height;isNaN(n)||(i>n&&(e=n,u=i-n),i<n&&(e=i,u=n-i),i==n&&(e=n,u=0),u+=this.extraWidth,e-=this.extraWidth/2);isNaN(t)||(r>t&&(o=t,f=r-t),r<t&&(o=r,f=t-r),r==t&&(o=t,f=0),f+=this.extraWidth,o-=this.extraWidth/2);0<u&&0<f&&(i=AmCharts.rect(this.container,u,f,this.cursorColor,this.selectionAlpha),i.translate(e+this.x,o+this.y),this.selection=i)},arrangeBalloons:function(){var i=this.valueBalloons,r=this.x,u=this.y,f=this.height+u,n,t;for(i.sort(this.compareY),n=0;n<i.length;n++)t=i[n].balloon,t.setBounds(r,u,r+this.width,f),t.prevX=this.prevX[n],t.prevY=this.prevY[n],t.prevTX=this.prevTX[n],t.prevTY=this.prevTY[n],t.draw(),f=t.yPos-3;this.arrangeBalloons2()},compareY:function(n,t){return n.yy<t.yy?1:-1},arrangeBalloons2:function(){var u=this.valueBalloons,s,f,r,i,e,n,o,t;for(u.reverse(),f=this.x,e=u.length,i=0;i<e;i++)n=u[i].balloon,s=n.bottom,o=n.bottom-n.yPos,t=e-i-1,0<i&&s-o<r+3&&(n.setBounds(f,r+3,f+this.width,r+o+3),n.prevX=this.prevX[t],n.prevY=this.prevY[t],n.prevTX=this.prevTX[t],n.prevTY=this.prevTY[t],n.draw()),n.set&&n.set.show(),this.prevX[t]=n.prevX,this.prevY[t]=n.prevY,this.prevTX[t]=n.prevTX,this.prevTY[t]=n.prevTY,r=n.bottom},showBullets:function(){var f,t,r,n,u,i,e,o;for(AmCharts.remove(this.allBullets),f=this.container,t=f.set(),this.set.push(t),this.set.show(),this.allBullets=t,t=this.chart.graphs,r=0;r<t.length;r++)n=t[r],!n.hidden&&n.balloonText&&(u=this.data[this.index].axes[n.valueAxis.id].graphs[n.id],i=u.y,isNaN(i)||(e=u.x,this.rotate?(o=i,i=e):o=e,n=AmCharts.circle(f,this.bulletSize/2,this.chart.getBalloonColor(n,u,!0),n.cursorBulletAlpha),n.translate(o,i),this.allBullets.push(n)))},destroy:function(){this.clear();AmCharts.remove(this.selection);this.selection=null;var n=this.categoryBalloon;n&&n.destroy();(n=this.vaBalloon)&&n.destroy();this.destroyValueBalloons();AmCharts.remove(this.set)},clear:function(){clearInterval(this.interval)},destroyValueBalloons:function(){var t=this.valueBalloons,n;if(t)for(n=0;n<t.length;n++)t[n].balloon.hide()},zoom:function(n,t,i,r){var f=this.chart,u;this.destroyValueBalloons();this.zooming=!1;this.rotate?this.selectionPosY=u=f.mouseY:this.selectionPosX=u=f.mouseX;this.start=n;this.end=t;this.startTime=i;this.endTime=r;this.zoomed=!0;r=f.categoryAxis;f=this.rotate;t=this.width;i=this.height;n=r.stepWidth;this.fullWidth&&(u=1,r.parseDates&&!r.equalSpacing&&(u=r.minDuration()),f?this.extraWidth=i=n*u:(this.extraWidth=t=n*u,this.categoryBalloon.minWidth=t),this.line&&this.line.remove(),this.line=AmCharts.rect(this.container,t,i,this.cursorColor,this.cursorAlpha,0),this.fullRectSet&&this.fullRectSet.push(this.line));this.stepWidth=n;this.tempVal=this.valueBalloonsEnabled;this.valueBalloonsEnabled=!1;this.setPosition();this.valueBalloonsEnabled=this.tempVal;this.hideCursor()},hideObj:function(n){n&&n.hide()},hideCursor:function(n){void 0===n&&(n=!0);this.hideObj(this.set);this.hideObj(this.categoryBalloon);this.hideObj(this.line);this.hideObj(this.vLine);this.hideObj(this.hLine);this.hideObj(this.vaBalloon);this.hideObj(this.allBullets);this.destroyValueBalloons();this.selectWithoutZooming||AmCharts.remove(this.selection);this.previousIndex=NaN;n&&this.fire("onHideCursor",{type:"onHideCursor",chart:this.chart,target:this});this.drawing||this.chart.setMouseCursor("auto");this.normalizeBulletSize()},setPosition:function(n,t,i){void 0===t&&(t=!0);"cursor"==this.type?(this.tempPosition=NaN,AmCharts.ifArray(this.data))&&(isNaN(n)&&(n=this.getMousePosition()),(n!=this.previousMousePosition||!0===this.zoomed||this.oneBalloonOnly)&&!isNaN(n)&&("mouse"==this.cursorPosition&&(this.tempPosition=n),isNaN(i)&&(i=this.chart.categoryAxis.xToIndex(n)),i!=this.previousIndex||this.zoomed||"mouse"==this.cursorPosition||this.oneBalloonOnly)&&(this.updateCursor(i,t),this.zoomed=!1),this.previousMousePosition=n):this.updateCrosshair()},normalizeBulletSize:function(){var r=this.resizedBullets,i,n,t;if(r)for(i=0;i<r.length;i++)n=r[i],t=n.bulletGraphics,t&&(t.translate(n.bx,n.by,1),n=n.graph,isNaN(this.graphBulletAlpha)||(t.setAttr("fill-opacity",n.bulletAlpha),t.setAttr("stroke-opacity",n.bulletBorderAlpha)))},updateCursor:function(n,t){var c=this.chart,a=this.fullWidth,h=c.mouseX-this.x,d=c.mouseY-this.y,l;if(this.drawingNow&&(AmCharts.remove(this.drawingLine),this.drawingLine=AmCharts.line(this.container,[this.x+this.drawStartX,this.x+h],[this.y+this.drawStartY,this.y+d],this.cursorColor,1,1)),this.enabled){void 0===t&&(t=!0);this.index=n+=this.adjustment;var f=c.categoryAxis,o=c.dx,u=c.dy,nt=this.x+1,rt=this.y+1,tt=this.width,it=this.height,p=this.data[n];if(this.fireMoved(),p){var r=p.x[f.id],v=c.rotate,w=this.stepWidth,s=this.categoryBalloon,i=this.firstTime,e=this.lastTime,b=this.cursorPosition,y=this.zooming,ut=this.panning,g=c.graphs;if(c.mouseIsOver||y||ut||this.forceShow)if(this.forceShow=!1,ut){var o=this.panClickPos,c=this.panClickEndTime,y=this.panClickStartTime,k=this.panClickEnd,nt=this.panClickStart,h=(v?o-d:o-h)/w;(!f.parseDates||f.equalSpacing)&&(h=Math.round(h));0!==h&&(o={type:"zoomed",target:this},o.chart=this.chart,f.parseDates&&!f.equalSpacing?(c+h>e&&(h=e-c),y+h<i&&(h=i-y),o.start=Math.round(y+h),o.end=Math.round(c+h),this.fire(o.type,o)):k+h>=this.data.length||0>nt+h||(o.start=nt+h,o.end=k+h,this.fire(o.type,o)))}else{if("start"==b?r-=f.cellWidth/2:"mouse"==b&&(c.mouseIsOver?r=v?d-2:h-2:isNaN(this.tempPosition)||(r=this.tempPosition-2)),v){if(0>r)if(y)r=0;else{this.hideCursor();return}if(r>it+1)if(y)r=it+1;else{this.hideCursor();return}}else{if(0>r)if(y)r=0;else{this.hideCursor();return}if(r>tt)if(y)r=tt;else{this.hideCursor();return}}if(0<this.cursorAlpha&&(l=this.line,v?(i=0,e=r+u,a&&(e-=f.cellWidth/2)):(i=r,e=0,a&&(i-=f.cellWidth/2)),w=this.animationDuration,0<w&&!this.zooming?isNaN(this.previousX)?l.translate(i,e):(l.translate(this.previousX,this.previousY),l.animate({translate:i+","+e},w,"easeOutSine")):l.translate(i,e),this.previousX=i,this.previousY=e,l.show()),this.linePos=v?r+u:r,y&&(a&&l.hide(),v?this.updateSelectionSize(NaN,r):this.updateSelectionSize(r,NaN)),w=!0,y&&(w=!1),this.categoryBalloonEnabled&&w?(this.setBalloonPosition(s,f,r,v),(i=this.categoryBalloonFunction)?s.showBalloon(i(p.category)):f.parseDates?(f=AmCharts.formatDate(p.category,this.categoryBalloonDateFormat,c),-1!=f.indexOf("fff")&&(f=AmCharts.formatMilliseconds(f,p.category)),s.showBalloon(f)):s.showBalloon(AmCharts.fixNewLines(p.category))):s.hide(),g&&this.bulletsEnabled&&this.showBullets(),this.oneBalloonOnly){for(r=Infinity,f=0;f<g.length;f++)i=g[f],i.showBalloon&&!i.hidden&&i.balloonText&&(e=p.axes[i.valueAxis.id].graphs[i.id],s=e.y,isNaN(s)||(v?Math.abs(h-s)<r&&(r=Math.abs(h-s),k=i):Math.abs(d-s)<r&&(r=Math.abs(d-s),k=i)));this.mostCloseGraph&&(k=this.mostCloseGraph)}if((n!=this.previousIndex||k!=this.previousMostCloseGraph)&&(this.normalizeBulletSize(),this.destroyValueBalloons(),this.resizedBullets=[],g&&this.valueBalloonsEnabled&&w&&c.balloon.enabled)){for(this.valueBalloons=w=[],f=0;f<g.length;f++)if(i=g[f],s=NaN,(!this.oneBalloonOnly||i==k)&&i.showBalloon&&!i.hidden&&i.balloonText&&("step"==i.type&&"left"==i.stepDirection&&(p=this.data[n+1]),p)){if((e=p.axes[i.valueAxis.id].graphs[i.id])&&(s=e.y),this.showNextAvailable&&isNaN(s)&&n+1<this.data.length)for(r=n+1;r<this.data.length;r++)if((a=this.data[r])&&(e=a.axes[i.valueAxis.id].graphs[i.id],s=e.y,!isNaN(s)))break;isNaN(s)||(a=e.x,u=!0,v?(r=s,0>a||a>it)&&(u=!1):(r=a,a=s,0>r||r>tt+o+1)&&(u=!1),u&&(u=this.graphBulletSize,l=this.graphBulletAlpha,1==u&&isNaN(l)||!AmCharts.isModern||!(b=e.bulletGraphics)||(b.getBBox(),b.translate(e.bx,e.by,u),this.resizedBullets.push(e),isNaN(l)||(b.setAttr("fill-opacity",l),b.setAttr("stroke-opacity",l))),u=i.valueBalloon,l=c.getBalloonColor(i,e),u.setBounds(nt,rt,nt+tt,rt+it),u.pointerOrientation="H",b=this.balloonPointerOrientation,"vertical"==b&&(u.pointerOrientation="V"),"horizontal"==b&&(u.pointerOrientation="H"),u.changeColor(l),void 0!==i.balloonAlpha&&(u.fillAlpha=i.balloonAlpha),void 0!==i.balloonTextColor&&(u.color=i.balloonTextColor),u.setPosition(r+nt,a+rt),r=c.formatString(i.balloonText,e,!0),(a=i.balloonFunction)&&(r=a(e,i).toString()),""!==r&&(v?u.showBalloon(r):(u.text=r,u.show=!0),w.push({yy:s,balloon:u})),!v&&u.set&&(u.set.hide(),i=u.textDiv)&&(i.style.visibility="hidden")))}this.avoidBalloonOverlapping&&this.arrangeBalloons()}t?(o={type:"changed"},o.index=n,o.chart=this.chart,o.zooming=y,o.mostCloseGraph=k,o.position=v?d:h,o.target=this,c.fire("changed",o),this.fire("changed",o),this.skipZoomDispatch=!1):(this.skipZoomDispatch=!0,c.updateLegendValues(n));this.previousIndex=n;this.previousMostCloseGraph=k}}}else this.hideCursor()},setBalloonPosition:function(n,t,i,r){var c=t.position,s=t.inside;t=t.axisThickness;var e=this.chart,o=e.dx,e=e.dy,u=this.x,f=this.y,h=this.width,l=this.height;r?(s&&("right"==c?n.setBounds(u,f+e,u+h+o,f+i+e):n.setBounds(u,f+e,u+h+o,f+i)),"right"==c?s?n.setPosition(u+h+o,f+i+e):n.setPosition(u+h+o+t,f+i+e):s?n.setPosition(u,f+i):n.setPosition(u-t,f+i)):"top"==c?s?n.setPosition(u+i+o,f+e):n.setPosition(u+i+o,f+e-t+1):s?n.setPosition(u+i,f+l):n.setPosition(u+i,f+l+t-1)},setBalloonBounds:function(n,t,i){var a=t.position,c=t.inside,l=t.axisThickness,s=t.tickLength,e=this.chart,h=e.dx,e=e.dy,r=this.x,u=this.y,f=this.width,o=this.height;i?(c&&(n.pointerWidth=0),"right"==a?c?n.setBounds(r,u+e,r+f+h,u+o+e):n.setBounds(r+f+h+l,u+e,r+f+1e3,u+o+e):c?n.setBounds(r,u,f+r,o+u):n.setBounds(-1e3,-1e3,r-s-l,u+o+15)):(n.maxWidth=f,t.parseDates&&(s=0,n.pointerWidth=0),"top"==a?c?n.setBounds(r+h,u+e,f+h+r,o+u):n.setBounds(r+h,-1e3,f+h+r,u+e-s-l):c?n.setBounds(r,u,f+r,o+u-s):n.setBounds(r,u+o+s+l-1,r+f,u+o+s+l))},enableDrawing:function(n){this.enabled=!n;this.hideCursor();this.rolledOver=!1;this.drawing=n},isZooming:function(n){n&&n!=this.zooming&&this.handleMouseDown("fake");n||n==this.zooming||this.handleMouseUp()},handleMouseOut:function(){if(this.enabled)if(this.zooming)this.setPosition();else{this.index=void 0;var n={type:"changed",index:void 0,target:this};n.chart=this.chart;this.fire("changed",n);this.hideCursor()}},handleReleaseOutside:function(){this.handleMouseUp()},handleMouseUp:function(){var r=this.chart,u=this.data,n,i,t,f,e,o;r&&(i=r.mouseX-this.x,t=r.mouseY-this.y,this.drawingNow&&(this.drawingNow=!1,AmCharts.remove(this.drawingLine),n=this.drawStartX,f=this.drawStartY,(2<Math.abs(n-i)||2<Math.abs(f-t))&&(n={type:"draw",target:this,chart:r,initialX:n,initialY:f,finalX:i,finalY:t},this.fire(n.type,n))),this.enabled&&0<u.length&&(this.pan?this.rolledOver=!1:this.zoomable&&this.zooming&&(n=this.selectWithoutZooming?{type:"selected"}:{type:"zoomed"},n.target=this,n.chart=r,"cursor"==this.type?(this.rotate?this.selectionPosY=t:this.selectionPosX=t=i,2>Math.abs(t-this.initialMouse)&&this.fromIndex==this.index||(this.index<this.fromIndex?(n.end=this.fromIndex,n.start=this.index):(n.end=this.index,n.start=this.fromIndex),t=r.categoryAxis,t.parseDates&&!t.equalSpacing&&(u[n.start]&&(n.start=u[n.start].time),u[n.end]&&(n.end=r.getEndTime(u[n.end].time))),this.skipZoomDispatch||this.fire(n.type,n))):(e=this.initialMouseX,o=this.initialMouseY,3>Math.abs(i-e)&&3>Math.abs(t-o)||(u=Math.min(e,i),f=Math.min(o,t),i=Math.abs(e-i),t=Math.abs(o-t),r.hideXScrollbar&&(u=0,i=this.width),r.hideYScrollbar&&(f=0,t=this.height),n.selectionHeight=t,n.selectionWidth=i,n.selectionY=f,n.selectionX=u,this.skipZoomDispatch||this.fire(n.type,n))),this.selectWithoutZooming||AmCharts.remove(this.selection)),this.skipZoomDispatch=!1));this.panning=this.zooming=!1},showCursorAt:function(n){var t=this.chart.categoryAxis;n=t.parseDates?t.dateToCoordinate(n):t.categoryToCoordinate(n);this.previousMousePosition=NaN;this.forceShow=!0;this.setPosition(n,!1)},clearSelection:function(){AmCharts.remove(this.selection)},handleMouseDown:function(n){if(this.zoomable||this.pan||this.drawing){var u=this.rotate,r=this.chart,t=r.mouseX-this.x,i=r.mouseY-this.y;(0<t&&t<this.width&&0<i&&i<this.height||"fake"==n)&&(this.setPosition(),this.selectWithoutZooming&&AmCharts.remove(this.selection),this.drawing?(this.drawStartY=i,this.drawStartX=t,this.drawingNow=!0):this.pan?(this.zoomable=!1,r.setMouseCursor("move"),this.panning=!0,this.panClickPos=u?i:t,this.panClickStart=this.start,this.panClickEnd=this.end,this.panClickStartTime=this.startTime,this.panClickEndTime=this.endTime):this.zoomable&&("cursor"==this.type?(this.fromIndex=this.index,u?(this.initialMouse=i,this.selectionPosY=this.linePos):(this.initialMouse=t,this.selectionPosX=this.linePos)):(this.initialMouseX=t,this.initialMouseY=i,this.selectionPosX=t,this.selectionPosY=i),this.zooming=!0))}}});AmCharts.SimpleChartScrollbar=AmCharts.Class({construct:function(n){this.createEvents("zoomed");this.backgroundColor="#D4D4D4";this.backgroundAlpha=1;this.selectedBackgroundColor="#EFEFEF";this.scrollDuration=this.selectedBackgroundAlpha=1;this.resizeEnabled=!0;this.hideResizeGrips=!1;this.scrollbarHeight=20;this.updateOnReleaseOnly=!1;9>document.documentMode&&(this.updateOnReleaseOnly=!0);this.dragIconWidth=18;this.dragIconHeight=25;AmCharts.applyTheme(this,n,"SimpleChartScrollbar")},draw:function(){var n=this,t,e,i,c,l;n.destroy();n.interval=setInterval(function(){n.updateScrollbar.call(n)},40);var r=n.chart.container,u=n.rotate,o=n.chart,f=r.set();if(n.set=f,o.scrollbarsSet.push(f),u?(t=n.scrollbarHeight,e=o.plotAreaHeight):(e=n.scrollbarHeight,t=o.plotAreaWidth),n.width=t,(n.height=e)&&t){i=AmCharts.rect(r,t,e,n.backgroundColor,n.backgroundAlpha,1,n.backgroundColor,n.backgroundAlpha);n.bg=i;f.push(i);i=AmCharts.rect(r,t,e,"#000",.005);f.push(i);n.invisibleBg=i;i.click(function(){n.handleBgClick()}).mouseover(function(){n.handleMouseOver()}).mouseout(function(){n.handleMouseOut()}).touchend(function(){n.handleBgClick()});i=AmCharts.rect(r,t,e,n.selectedBackgroundColor,n.selectedBackgroundAlpha);n.selectedBG=i;f.push(i);t=AmCharts.rect(r,t,e,"#000",.005);n.dragger=t;f.push(t);t.mousedown(function(t){n.handleDragStart(t)}).mouseup(function(){n.handleDragStop()}).mouseover(function(){n.handleDraggerOver()}).mouseout(function(){n.handleMouseOut()}).touchstart(function(t){n.handleDragStart(t)}).touchend(function(){n.handleDragStop()});t=o.pathToImages;u?(i=t+"dragIconH.gif",t=n.dragIconWidth,u=n.dragIconHeight):(i=t+"dragIcon.gif",u=n.dragIconWidth,t=n.dragIconHeight);e=r.image(i,0,0,u,t);var i=r.image(i,0,0,u,t),s=10,h=20;o.panEventsEnabled&&(s=25,h=n.scrollbarHeight);c=AmCharts.rect(r,s,h,"#000",.005);l=AmCharts.rect(r,s,h,"#000",.005);l.translate(-(s-u)/2,-(h-t)/2);c.translate(-(s-u)/2,-(h-t)/2);u=r.set([e,l]);r=r.set([i,c]);n.iconLeft=u;n.iconRight=r;u.mousedown(function(){n.leftDragStart()}).mouseup(function(){n.leftDragStop()}).mouseover(function(){n.iconRollOver()}).mouseout(function(){n.iconRollOut()}).touchstart(function(){n.leftDragStart()}).touchend(function(){n.leftDragStop()});r.mousedown(function(){n.rightDragStart()}).mouseup(function(){n.rightDragStop()}).mouseover(function(){n.iconRollOver()}).mouseout(function(){n.iconRollOut()}).touchstart(function(){n.rightDragStart()}).touchend(function(){n.rightDragStop()});AmCharts.ifArray(o.chartData)?f.show():f.hide();n.hideDragIcons();n.clipDragger(!1)}f.translate(n.x,n.y)},updateScrollbarSize:function(n,t){var i=this.dragger,r,u,f,e;this.rotate?(r=0,u=n,f=this.width+1,e=t-n,i.setAttr("height",t-n),i.setAttr("y",u)):(r=n,u=0,f=t-n,e=this.height+1,i.setAttr("width",t-n),i.setAttr("x",r));this.clipAndUpdate(r,u,f,e)},updateScrollbar:function(){var n,c=!1,r,t,f=this.x,e=this.y,u=this.dragger,o=this.getDBox();r=o.x+f;t=o.y+e;var l=o.width,o=o.height,a=this.rotate,i=this.chart,s=this.width,h=this.height,v=i.mouseX,y=i.mouseY;n=this.initialMouse;this.forceClip&&this.clipDragger(!0);i.mouseIsOver&&(this.dragging&&(i=this.initialCoord,a?(n=i+(y-n),0>n&&(n=0),i=h-o,n>i&&(n=i),u.setAttr("y",n)):(n=i+(v-n),0>n&&(n=0),i=s-l,n>i&&(n=i),u.setAttr("x",n)),this.clipDragger(!0)),this.resizingRight&&(a?(n=y-t,n+t>h+e&&(n=h-t+e),0>n?(this.resizingRight=!1,c=this.resizingLeft=!0):(0===n&&(n=.1),u.setAttr("height",n))):(n=v-r,n+r>s+f&&(n=s-r+f),0>n?(this.resizingRight=!1,c=this.resizingLeft=!0):(0===n&&(n=.1),u.setAttr("width",n))),this.clipDragger(!0)),this.resizingLeft&&(a?(r=t,t=y,t<e&&(t=e),t>h+e&&(t=h+e),n=!0===c?r-t:o+r-t,0>n?(this.resizingRight=!0,this.resizingLeft=!1,u.setAttr("y",r+o-e)):(0===n&&(n=.1),u.setAttr("y",t-e),u.setAttr("height",n))):(t=v,t<f&&(t=f),t>s+f&&(t=s+f),n=!0===c?r-t:l+r-t,0>n?(this.resizingRight=!0,this.resizingLeft=!1,u.setAttr("x",r+l-f)):(0===n&&(n=.1),u.setAttr("x",t-f),u.setAttr("width",n))),this.clipDragger(!0)))},stopForceClip:function(){this.forceClip=!1},clipDragger:function(n){var t=this.getDBox();if(t){var i=t.x,r=t.y,u=t.width,t=t.height,f=!1;this.rotate?(i=0,u=this.width+1,this.clipY!=r||this.clipH!=t)&&(f=!0):(r=0,t=this.height+1,this.clipX!=i||this.clipW!=u)&&(f=!0);f&&(this.clipAndUpdate(i,r,u,t),n&&(this.updateOnReleaseOnly||this.dispatchScrollbarEvent()))}},maskGraphs:function(){},clipAndUpdate:function(n,t,i,r){this.clipX=n;this.clipY=t;this.clipW=i;this.clipH=r;this.selectedBG.clipRect(n,t,i,r);this.updateDragIconPositions();this.maskGraphs(n,t,i,r)},dispatchScrollbarEvent:function(){var n;if(this.skipEvent)this.skipEvent=!1;else{n=this.chart;n.hideBalloon();var t=this.getDBox(),r=t.x,u=t.y,i=t.width,t=t.height;this.rotate?(r=u,i=this.height/t):i=this.width/i;n={type:"zoomed",position:r,chart:n,target:this,multiplier:i};this.fire(n.type,n)}},updateDragIconPositions:function(){var i=this.getDBox(),u=i.x,f=i.y,e=this.iconLeft,o=this.iconRight,n,t,r=this.scrollbarHeight;this.rotate?(n=this.dragIconWidth,t=this.dragIconHeight,e.translate(this.x+(r-t)/2,this.y+f-n/2),o.translate(this.x+(r-t)/2,this.y+f+i.height-n/2)):(n=this.dragIconHeight,t=this.dragIconWidth,e.translate(this.x+u-t/2,this.y+(r-n)/2),o.translate(this.x+u-t/2+i.width,this.y+(r-n)/2))},showDragIcons:function(){this.resizeEnabled&&(this.iconLeft.show(),this.iconRight.show())},hideDragIcons:function(){this.resizingLeft||this.resizingRight||this.dragging||((this.hideResizeGrips||!this.resizeEnabled)&&(this.iconLeft.hide(),this.iconRight.hide()),this.removeCursors())},removeCursors:function(){this.chart.setMouseCursor("auto")},relativeZoom:function(n,t){this.dragger.stop();this.multiplier=n;this.position=t;this.updateScrollbarSize(t,this.rotate?t+this.height/n:t+this.width/n)},destroy:function(){this.clear();AmCharts.remove(this.set);AmCharts.remove(this.iconRight);AmCharts.remove(this.iconLeft)},clear:function(){clearInterval(this.interval)},handleDragStart:function(){var t=this.chart,n;this.dragger.stop();this.removeCursors();this.dragging=!0;n=this.getDBox();this.rotate?(this.initialCoord=n.y,this.initialMouse=t.mouseY):(this.initialCoord=n.x,this.initialMouse=t.mouseX)},handleDragStop:function(){this.updateOnReleaseOnly&&(this.updateScrollbar(),this.skipEvent=!1,this.dispatchScrollbarEvent());this.dragging=!1;this.mouseIsOver&&this.removeCursors();this.updateScrollbar()},handleDraggerOver:function(){this.handleMouseOver()},leftDragStart:function(){this.dragger.stop();this.resizingLeft=!0},leftDragStop:function(){this.resizingLeft=!1;this.mouseIsOver||this.removeCursors();this.updateOnRelease()},rightDragStart:function(){this.dragger.stop();this.resizingRight=!0},rightDragStop:function(){this.resizingRight=!1;this.mouseIsOver||this.removeCursors();this.updateOnRelease()},iconRollOut:function(){this.removeCursors()},iconRollOver:function(){this.rotate?this.chart.setMouseCursor("n-resize"):this.chart.setMouseCursor("e-resize");this.handleMouseOver()},getDBox:function(){if(this.dragger)return this.dragger.getBBox()},handleBgClick:function(){var n=this,i,t,r,u,f,e;if(!n.resizingRight&&!n.resizingLeft){n.zooming=!0;r=n.scrollDuration;u=n.dragger;i=n.getDBox();f=i.height;e=i.width;t=n.chart;var s=n.y,h=n.x,o=n.rotate;o?(i="y",t=t.mouseY-f/2-s,t=AmCharts.fitToBounds(t,0,n.height-f)):(i="x",t=t.mouseX-e/2-h,t=AmCharts.fitToBounds(t,0,n.width-e));n.updateOnReleaseOnly?(n.skipEvent=!1,u.setAttr(i,t),n.dispatchScrollbarEvent(),n.clipDragger()):(t=Math.round(t),o?u.animate({y:t},r,">"):u.animate({x:t},r,">"),n.forceClip=!0,clearTimeout(n.forceTO),n.forceTO=setTimeout(function(){n.stopForceClip.call(n)},3e3*r))}},updateOnRelease:function(){this.updateOnReleaseOnly&&(this.updateScrollbar(),this.skipEvent=!1,this.dispatchScrollbarEvent())},handleReleaseOutside:function(){this.set&&((this.resizingLeft||this.resizingRight||this.dragging)&&(this.updateOnRelease(),this.removeCursors()),this.mouseIsOver=this.dragging=this.resizingRight=this.resizingLeft=!1,this.hideDragIcons(),this.updateScrollbar())},handleMouseOver:function(){this.mouseIsOver=!0;this.showDragIcons()},handleMouseOut:function(){this.mouseIsOver=!1;this.hideDragIcons()}});AmCharts.ChartScrollbar=AmCharts.Class({inherits:AmCharts.SimpleChartScrollbar,construct:function(n){this.cname="ChartScrollbar";AmCharts.ChartScrollbar.base.construct.call(this,n);this.graphLineColor="#BBBBBB";this.graphLineAlpha=0;this.graphFillColor="#BBBBBB";this.graphFillAlpha=1;this.selectedGraphLineColor="#888888";this.selectedGraphLineAlpha=0;this.selectedGraphFillColor="#888888";this.selectedGraphFillAlpha=1;this.gridCount=0;this.gridColor="#FFFFFF";this.gridAlpha=.7;this.skipEvent=this.autoGridCount=!1;this.color="#FFFFFF";this.scrollbarCreated=!1;this.offset=0;AmCharts.applyTheme(this,n,this.cname)},init:function(){var t=this.categoryAxis,n=this.chart,i;t||(this.categoryAxis=t=new AmCharts.CategoryAxis);t.chart=n;t.id="scrollbar";t.dateFormats=n.categoryAxis.dateFormats;t.markPeriodChange=n.categoryAxis.markPeriodChange;t.boldPeriodBeginning=n.categoryAxis.boldPeriodBeginning;t.axisItemRenderer=AmCharts.RecItem;t.axisRenderer=AmCharts.RecAxis;t.guideFillRenderer=AmCharts.RecFill;t.inside=!0;t.fontSize=this.fontSize;t.tickLength=0;t.axisAlpha=0;AmCharts.isString(this.graph)&&(this.graph=AmCharts.getObjById(n.graphs,this.graph));(t=this.graph)&&(i=this.valueAxis,i||(this.valueAxis=i=new AmCharts.ValueAxis,i.visible=!1,i.scrollbar=!0,i.axisItemRenderer=AmCharts.RecItem,i.axisRenderer=AmCharts.RecAxis,i.guideFillRenderer=AmCharts.RecFill,i.labelsEnabled=!1,i.chart=n),n=this.unselectedGraph,n||(n=new AmCharts.AmGraph,n.scrollbar=!0,this.unselectedGraph=n,n.negativeBase=t.negativeBase,n.noStepRisers=t.noStepRisers),n=this.selectedGraph,n||(n=new AmCharts.AmGraph,n.scrollbar=!0,this.selectedGraph=n,n.negativeBase=t.negativeBase,n.noStepRisers=t.noStepRisers));this.scrollbarCreated=!0},draw:function(){var n=this,u,i,s,h,p,w,r,y;AmCharts.ChartScrollbar.base.draw.call(n);n.scrollbarCreated||n.init();var e=n.chart,o=e.chartData,f=n.categoryAxis,c=n.rotate,s=n.x,h=n.y,l=n.width,a=n.height,t=e.categoryAxis,v=n.set;if(f.setOrientation(!c),f.parseDates=t.parseDates,f.rotate=c,f.equalSpacing=t.equalSpacing,f.minPeriod=t.minPeriod,f.startOnAxis=t.startOnAxis,f.viW=l,f.viH=a,f.width=l,f.height=a,f.gridCount=n.gridCount,f.gridColor=n.gridColor,f.gridAlpha=n.gridAlpha,f.color=n.color,f.tickLength=0,f.axisAlpha=0,f.autoGridCount=n.autoGridCount,f.parseDates&&!f.equalSpacing&&f.timeZoom(e.firstTime,e.lastTime),f.zoom(0,o.length-1),t=n.graph){for(u=n.valueAxis,i=t.valueAxis,u.id=i.id,u.rotate=c,u.setOrientation(c),u.width=l,u.height=a,u.viW=l,u.viH=a,u.dataProvider=o,u.reversed=i.reversed,u.logarithmic=i.logarithmic,u.gridAlpha=0,u.axisAlpha=0,v.push(u.set),c?(u.y=h,u.x=0):(u.x=s,u.y=0),s=Infinity,h=-Infinity,p=0;p<o.length;p++){w=o[p].axes[i.id].graphs[t.id].values;for(r in w)w.hasOwnProperty(r)&&"percents"!=r&&"total"!=r&&(y=w[r],y<s&&(s=y),y>h&&(h=y))}Infinity!=s&&(u.minimum=s);-Infinity!=h&&(u.maximum=h+.1*(h-s));s==h&&(u.minimum-=1,u.maximum+=1);void 0!==n.minimum&&(u.minimum=n.minimum);void 0!==n.maximum&&(u.maximum=n.maximum);u.zoom(0,o.length-1);r=n.unselectedGraph;r.id=t.id;r.rotate=c;r.chart=e;r.data=o;r.valueAxis=u;r.chart=t.chart;r.categoryAxis=n.categoryAxis;r.periodSpan=t.periodSpan;r.valueField=t.valueField;r.openField=t.openField;r.closeField=t.closeField;r.highField=t.highField;r.lowField=t.lowField;r.lineAlpha=n.graphLineAlpha;r.lineColorR=n.graphLineColor;r.fillAlphas=n.graphFillAlpha;r.fillColorsR=n.graphFillColor;r.connect=t.connect;r.hidden=t.hidden;r.width=l;r.height=a;r.pointPosition=t.pointPosition;r.stepDirection=t.stepDirection;r.periodSpan=t.periodSpan;i=n.selectedGraph;i.id=t.id;i.rotate=c;i.chart=e;i.data=o;i.valueAxis=u;i.chart=t.chart;i.categoryAxis=f;i.periodSpan=t.periodSpan;i.valueField=t.valueField;i.openField=t.openField;i.closeField=t.closeField;i.highField=t.highField;i.lowField=t.lowField;i.lineAlpha=n.selectedGraphLineAlpha;i.lineColorR=n.selectedGraphLineColor;i.fillAlphas=n.selectedGraphFillAlpha;i.fillColorsR=n.selectedGraphFillColor;i.connect=t.connect;i.hidden=t.hidden;i.width=l;i.height=a;i.pointPosition=t.pointPosition;i.stepDirection=t.stepDirection;i.periodSpan=t.periodSpan;e=n.graphType;e||(e=t.type);r.type=e;i.type=e;o=o.length-1;r.zoom(0,o);i.zoom(0,o);i.set.click(function(){n.handleBackgroundClick()}).mouseover(function(){n.handleMouseOver()}).mouseout(function(){n.handleMouseOut()});r.set.click(function(){n.handleBackgroundClick()}).mouseover(function(){n.handleMouseOver()}).mouseout(function(){n.handleMouseOut()});v.push(r.set);v.push(i.set)}v.push(f.set);v.push(f.labelsSet);n.bg.toBack();n.invisibleBg.toFront();n.dragger.toFront();n.iconLeft.toFront();n.iconRight.toFront()},timeZoom:function(n,t,i){this.startTime=n;this.endTime=t;this.timeDifference=t-n;this.skipEvent=!AmCharts.toBoolean(i);this.zoomScrollbar();this.skipEvent||this.dispatchScrollbarEvent()},zoom:function(n,t){this.start=n;this.end=t;this.skipEvent=!0;this.zoomScrollbar()},dispatchScrollbarEvent:function(){var e,n,o,u;if(this.skipEvent)this.skipEvent=!1;else{e=this.chart.chartData;u=this.dragger.getBBox();n=u.x;var i=u.y,r=u.width,u=u.height,f=this.chart;this.rotate?(n=i,o=u):o=r;r={type:"zoomed",target:this};r.chart=f;var t=this.categoryAxis,s=this.stepWidth,i=f.minSelectedTime,u=!1;t.parseDates&&!t.equalSpacing?(e=f.lastTime,f=f.firstTime,t.minDuration(),t=Math.round(n/s)+f,n=this.dragging?t+this.timeDifference:Math.round((n+o)/s)+f,t>n&&(t=n),0<i&&n-t<i&&(n=Math.round(t+(n-t)/2),u=Math.round(i/2),t=n-u,n+=u,u=!0),n>e&&(n=e),n-i<t&&(t=n-i),t<f&&(t=f),t+i>n&&(n=t+i),t!=this.startTime||n!=this.endTime)&&(this.startTime=t,this.endTime=n,r.start=t,r.end=n,r.startDate=new Date(t),r.endDate=new Date(n),this.fire(r.type,r)):(t.startOnAxis||(n+=s/2),o-=this.stepWidth/2,i=t.xToIndex(n),n=t.xToIndex(n+o),i!=this.start||this.end!=n)&&(t.startOnAxis&&(this.resizingRight&&i==n&&n++,this.resizingLeft&&i==n&&(0<i?i--:n=1)),this.start=i,this.end=this.dragging?this.start+this.difference:n,r.start=this.start,r.end=this.end,t.parseDates&&(e[this.start]&&(r.startDate=new Date(e[this.start].time)),e[this.end]&&(r.endDate=new Date(e[this.end].time))),this.fire(r.type,r));u&&this.zoomScrollbar()}},zoomScrollbar:function(){var i,r,t,n;i=this.chart;t=i.chartData;n=this.categoryAxis;n.parseDates&&!n.equalSpacing?(t=n.stepWidth,n=i.firstTime,i=t*(this.startTime-n),r=t*(this.endTime-n)):(i=t[this.start].x[n.id],r=t[this.end].x[n.id],t=n.stepWidth,n.startOnAxis||(n=t/2,i-=n,r+=n));this.stepWidth=t;this.updateScrollbarSize(i,r)},maskGraphs:function(n,t,i,r){var u=this.selectedGraph;u&&u.set.clipRect(n,t,i,r)},handleDragStart:function(){AmCharts.ChartScrollbar.base.handleDragStart.call(this);this.difference=this.end-this.start;this.timeDifference=this.endTime-this.startTime;0>this.timeDifference&&(this.timeDifference=0)},handleBackgroundClick:function(){AmCharts.ChartScrollbar.base.handleBackgroundClick.call(this);this.dragging||(this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0))}});AmCharts.AmBalloon=AmCharts.Class({construct:function(n){this.cname="AmBalloon";this.enabled=!0;this.fillColor="#FFFFFF";this.fillAlpha=.8;this.borderThickness=2;this.borderColor="#FFFFFF";this.borderAlpha=1;this.cornerRadius=0;this.maximumWidth=220;this.horizontalPadding=8;this.verticalPadding=4;this.pointerWidth=6;this.pointerOrientation="V";this.color="#000000";this.adjustBorderColor=!0;this.show=this.follow=this.showBullet=!1;this.bulletSize=3;this.shadowAlpha=.4;this.shadowColor="#000000";this.fadeOutDuration=this.animationDuration=.3;this.fixedPosition=!1;this.offsetY=6;this.offsetX=1;this.textAlign="center";AmCharts.isModern||(this.offsetY*=1.5);AmCharts.applyTheme(this,n,this.cname)},draw:function(){var u=this.pointToX,o=this.pointToY,l,e,p,r,i,ut,n;if(this.deltaSignX=this.deltaSignY=1,l=this.chart,AmCharts.VML&&(this.fadeOutDuration=0),this.xAnim&&l.stopAnim(this.xAnim),this.yAnim&&l.stopAnim(this.yAnim),!isNaN(u)){var tt=this.follow,v=l.container,a=this.set;if(AmCharts.remove(a),this.removeDiv(),a=v.set(),a.node.style.pointerEvents="none",this.set=a,l.balloonsSet.push(a),this.show){var c=this.l,w=this.t,g=this.r,d=this.b,e=this.balloonColor,s=this.fillColor,it=this.borderColor,h=s;void 0!=e&&(this.adjustBorderColor?h=it=e:s=e);var y=this.horizontalPadding,b=this.verticalPadding,f=this.pointerWidth,rt=this.pointerOrientation,k=this.cornerRadius,t=l.fontFamily,n=this.fontSize;void 0==n&&(n=l.fontSize);e=document.createElement("div");p=e.style;p.pointerEvents="none";p.position="absolute";r=this.minWidth;i="";isNaN(r)||(i="min-width:"+(r-2*y)+"px; ");e.innerHTML='<div style="text-align:'+this.textAlign+"; "+i+"max-width:"+this.maxWidth+"px; font-size:"+n+"px; color:"+this.color+"; font-family:"+t+'">'+this.text+"<\/div>";l.chartDiv.appendChild(e);this.textDiv=e;n=e.offsetWidth;t=e.offsetHeight;e.clientHeight&&(n=e.clientWidth,t=e.clientHeight);t+=2*b;i=n+2*y;!isNaN(r)&&i<r&&(i=r);window.opera&&(t+=2);ut=!1;n=this.offsetY;l.handDrawn&&(n+=l.handDrawScatter+2);"H"!=rt?(r=u-i/2,o<w+t+10&&"down"!=rt?(ut=!0,tt&&(o+=n),n=o+f,this.deltaSignY=-1):(tt&&(o-=n),n=o-t-f,this.deltaSignY=1)):(2*f>t&&(f=t/2),n=o-t/2,u<c+(g-c)/2?(r=u+f,this.deltaSignX=-1):(r=u-i-f,this.deltaSignX=1));n+t>=d&&(n=d-t);n<w&&(n=w);r<c&&(r=c);r+i>g&&(r=g-i);var w=n+b,d=r+y,b=this.shadowAlpha,ft=this.shadowColor,y=this.borderThickness,et=this.bulletSize,nt;0<k||0===f?(0<b&&(u=AmCharts.rect(v,i,t,s,0,y+1,ft,b,this.cornerRadius),AmCharts.isModern?u.translate(1,1):u.translate(4,4),a.push(u)),s=AmCharts.rect(v,i,t,s,this.fillAlpha,y,it,this.borderAlpha,this.cornerRadius),this.showBullet&&(nt=AmCharts.circle(v,et,h,this.fillAlpha),a.push(nt))):(h=[],k=[],"H"!=rt?(c=u-r,c>i-f&&(c=i-f),c<f&&(c=f),h=[0,c-f,u-r,c+f,i,i,0,0],k=ut?[0,0,o-n,0,0,t,t,0]:[t,t,o-n,t,t,0,0,t]):(h=o-n,h>t-f&&(h=t-f),h<f&&(h=f),k=[0,h-f,o-n,h+f,t,t,0,0],h=u<c+(g-c)/2?[0,0,r<u?0:u-r,0,0,i,i,0]:[i,i,r+i>u?i:u-r,i,i,0,0,i]),0<b&&(u=AmCharts.polygon(v,h,k,s,0,y,ft,b),u.translate(1,1),a.push(u)),s=AmCharts.polygon(v,h,k,s,this.fillAlpha,y,it,this.borderAlpha));this.bg=s;a.push(s);s.toFront();v=1*this.deltaSignX;p.left=d+"px";p.top=w+"px";a.translate(r-v,n);s=s.getBBox();this.bottom=n+t+1;this.yPos=s.y+n;nt&&nt.translate(this.pointToX-r+v,o-n);o=this.animationDuration;0<this.animationDuration&&!tt&&!isNaN(this.prevX)&&(a.translate(this.prevX,this.prevY),a.animate({translate:r-v+","+n},o,"easeOutSine"),e&&(p.left=this.prevTX+"px",p.top=this.prevTY+"px",this.xAnim=l.animate({node:e},"left",this.prevTX,d,o,"easeOutSine","px"),this.yAnim=l.animate({node:e},"top",this.prevTY,w,o,"easeOutSine","px")));this.prevX=r-v;this.prevY=n;this.prevTX=d;this.prevTY=w}}},followMouse:function(){var n,t,i;if(this.follow&&this.show&&(n=this.chart.mouseX-this.offsetX*this.deltaSignX,t=this.chart.mouseY,this.pointToX=n,this.pointToY=t,n!=this.previousX||t!=this.previousY))if(this.previousX=n,this.previousY=t,0===this.cornerRadius)this.draw();else if(i=this.set,i){var r=i.getBBox(),n=n-r.width/2,u=t-r.height-10;n<this.l&&(n=this.l);n>this.r-r.width&&(n=this.r-r.width);u<this.t&&(u=t+10);i.translate(n,u);t=this.textDiv.style;t.left=n+this.horizontalPadding+"px";t.top=u+this.verticalPadding+"px"}},changeColor:function(n){this.balloonColor=n},setBounds:function(n,t,i,r){this.l=n;this.t=t;this.r=i;this.b=r;this.destroyTO&&clearTimeout(this.destroyTO)},showBalloon:function(n){this.text=n;this.show=!0;this.destroyTO&&clearTimeout(this.destroyTO);n=this.chart;this.fadeAnim1&&n.stopAnim(this.fadeAnim1);this.fadeAnim2&&n.stopAnim(this.fadeAnim2);this.draw()},hide:function(){var n=this,t=n.fadeOutDuration,r=n.chart,i;0<t?(n.destroyTO=setTimeout(function(){n.destroy.call(n)},1e3*t),n.follow=!1,n.show=!1,i=n.set,i&&(i.setAttr("opacity",n.fillAlpha),n.fadeAnim1=i.animate({opacity:0},t,"easeInSine")),n.textDiv&&(n.fadeAnim2=r.animate({node:n.textDiv},"opacity",1,0,t,"easeInSine",""))):(n.show=!1,n.follow=!1,n.destroy())},setPosition:function(n,t,i){this.pointToX=n;this.pointToY=t;i&&(n==this.previousX&&t==this.previousY||this.draw());this.previousX=n;this.previousY=t},followCursor:function(n){var t=this,i,r;(t.follow=n)?(t.pShowBullet=t.showBullet,t.showBullet=!1):void 0!==t.pShowBullet&&(t.showBullet=t.pShowBullet);clearInterval(t.interval);i=t.chart.mouseX;r=t.chart.mouseY;!isNaN(i)&&n&&(t.pointToX=i-t.offsetX*t.deltaSignX,t.pointToY=r,t.followMouse(),t.interval=setInterval(function(){t.followMouse.call(t)},40))},removeDiv:function(){if(this.textDiv){var n=this.textDiv.parentNode;n&&n.removeChild(this.textDiv)}},destroy:function(){clearInterval(this.interval);AmCharts.remove(this.set);this.removeDiv();this.set=null}});AmCharts.AmCoordinateChart=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(n){AmCharts.AmCoordinateChart.base.construct.call(this,n);this.theme=n;this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph");this.startAlpha=1;this.startDuration=0;this.startEffect="elastic";this.sequencedAnimation=!0;this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" ");this.balloonDateFormat="MMM DD, YYYY";this.valueAxes=[];this.graphs=[];this.guides=[];this.gridAboveGraphs=!1;AmCharts.applyTheme(this,n,"AmCoordinateChart")},initChart:function(){AmCharts.AmCoordinateChart.base.initChart.call(this);var n=this.categoryAxis;n&&(this.categoryAxis=AmCharts.processObject(n,AmCharts.CategoryAxis,this.theme));this.processValueAxes();this.createValueAxes();this.processGraphs();this.processGuides();AmCharts.VML&&(this.startAlpha=1);this.setLegendData(this.graphs);this.gridAboveGraphs&&this.gridSet.toFront()},createValueAxes:function(){if(0===this.valueAxes.length){var n=new AmCharts.ValueAxis;this.addValueAxis(n)}},parseData:function(){this.processValueAxes();this.processGraphs()},parseSerialData:function(){var c=this.graphs,n,s={},w=this.seriesIdField,l,a,b,i,k,d,g,nt,tt,ft,it,e,rt,h,t,r,ut,v,o,y,f,et,u,p;if(w||(w=this.categoryField),this.chartData=[],l=this.dataProvider,l)for(a=!1,i=this.categoryAxis,i&&(a=i.parseDates,k=i.forceShowField,d=i.labelColorField,b=i.categoryFunction),tt={},a&&(n=AmCharts.extractPeriod(i.minPeriod),g=n.period,nt=n.count,ft=AmCharts.getPeriodDuration(g,nt)),it={},this.lookupTable=it,rt=this.dataDateFormat,h={},e=0;e<l.length;e++)if(t={},r=l[e],n=r[this.categoryField],t.dataContext=r,t.category=b?b(n,r,i):String(n),k&&(t.forceShow=r[k]),d&&(t.labelColor=r[d]),it[r[w]]=t,!a||(n=i.categoryFunction?i.categoryFunction(n,r,i):n instanceof Date?AmCharts.newDate(n,i.minPeriod):rt?AmCharts.stringToDate(n,rt):new Date(n),n=AmCharts.resetDateToMin(n,g,nt,i.firstDayOfWeek),t.category=n,t.time=n.getTime(),!isNaN(t.time))){for(ut=this.valueAxes,t.axes={},t.x={},v=0;v<ut.length;v++)for(o=ut[v].id,t.axes[o]={},t.axes[o].graphs={},y=0;y<c.length;y++)n=c[y],f=n.id,et=n.periodValue,n.valueAxis.id==o&&(t.axes[o].graphs[f]={},u={},u.index=e,p=r,n.dataProvider&&(p=s),u.values=this.processValues(p,n,et),!n.connect&&h&&h[f]&&t.time-tt[f]>1.1*ft&&(h[f].gap=!0),this.processFields(n,u,p),u.category=t.category,u.serialDataItem=t,u.graph=n,t.axes[o].graphs[f]=u,tt[f]=t.time,h[f]=u);this.chartData[e]=t}for(s=0;s<c.length;s++)n=c[s],n.dataProvider&&this.parseGraphData(n)},processValues:function(n,t,i){var u={},r,f=!1;return"candlestick"!=t.type&&"ohlc"!=t.type||""===i||(f=!0),r=Number(n[t.valueField+i]),isNaN(r)||(u.value=r),r=Number(n[t.errorField+i]),isNaN(r)||(u.error=r),f&&(i="Open"),r=Number(n[t.openField+i]),isNaN(r)||(u.open=r),f&&(i="Close"),r=Number(n[t.closeField+i]),isNaN(r)||(u.close=r),f&&(i="Low"),r=Number(n[t.lowField+i]),isNaN(r)||(u.low=r),f&&(i="High"),r=Number(n[t.highField+i]),isNaN(r)||(u.high=r),u},parseGraphData:function(n){var e=n.dataProvider,t=n.seriesIdField,r;for(t||(t=this.seriesIdField),t||(t=this.categoryField),r=0;r<e.length;r++){var u=e[r],f=this.lookupTable[String(u[t])],i=n.valueAxis.id;f&&(i=f.axes[i].graphs[n.id],i.serialDataItem=f,i.values=this.processValues(u,n,n.periodValue),this.processFields(n,i,u))}},addValueAxis:function(n){n.chart=this;this.valueAxes.push(n);this.validateData()},removeValueAxesAndGraphs:function(){for(var t=this.valueAxes,n=t.length-1;-1<n;n--)this.removeValueAxis(t[n])},removeValueAxis:function(n){for(var i=this.graphs,r,t=i.length-1;0<=t;t--)r=i[t],r&&r.valueAxis==n&&this.removeGraph(r);for(i=this.valueAxes,t=i.length-1;0<=t;t--)i[t]==n&&i.splice(t,1);this.validateData()},addGraph:function(n){this.graphs.push(n);this.chooseGraphColor(n,this.graphs.length-1);this.validateData()},removeGraph:function(n){for(var i=this.graphs,t=i.length-1;0<=t;t--)i[t]==n&&(i.splice(t,1),n.destroy());this.validateData()},processValueAxes:function(){for(var i=this.valueAxes,n,t=0;t<i.length;t++)n=i[t],n=AmCharts.processObject(n,AmCharts.ValueAxis,this.theme),i[t]=n,n.chart=this,n.id||(n.id="valueAxisAuto"+t+"_"+(new Date).getTime()),void 0===n.usePrefixes&&(n.usePrefixes=this.usePrefixes)},processGuides:function(){var r=this.guides,u=this.categoryAxis,i,n,t;if(r)for(i=0;i<r.length;i++)n=r[i],(void 0!==n.category||void 0!==n.date)&&u&&u.addGuide(n),t=n.valueAxis,t?(AmCharts.isString(t)&&(t=this.getValueAxisById(t)),t?t.addGuide(n):this.valueAxes[0].addGuide(n)):isNaN(n.value)||this.valueAxes[0].addGuide(n)},processGraphs:function(){for(var i=this.graphs,n,t=0;t<i.length;t++)n=i[t],n=AmCharts.processObject(n,AmCharts.AmGraph,this.theme),i[t]=n,this.chooseGraphColor(n,t),n.chart=this,AmCharts.isString(n.valueAxis)&&(n.valueAxis=this.getValueAxisById(n.valueAxis)),n.valueAxis||(n.valueAxis=this.valueAxes[0]),n.id||(n.id="graphAuto"+t+"_"+(new Date).getTime())},formatString:function(n,t,i){var u=t.graph,r=u.valueAxis;return r.duration&&t.values.value&&(r=AmCharts.formatDuration(t.values.value,r.duration,"",r.durationUnits,r.maxInterval,r.numberFormatter),n=n.split("[[value]]").join(r)),n=AmCharts.massReplace(n,{"[[title]]":u.title,"[[description]]":t.description}),n=i?AmCharts.fixNewLines(n):AmCharts.fixBrakes(n),AmCharts.cleanFromEmpty(n)},getBalloonColor:function(n,t,i){var r=n.lineColor,u=n.balloonColor;return i&&(u=r),i=n.fillColorsR,"object"==typeof i?r=i[0]:void 0!==i&&(r=i),t.isNegative&&(i=n.negativeLineColor,n=n.negativeFillColors,"object"==typeof n?i=n[0]:void 0!==n&&(i=n),void 0!==i&&(r=i)),void 0!==t.color&&(r=t.color),void 0===u&&(u=r),u},getGraphById:function(n){return AmCharts.getObjById(this.graphs,n)},getValueAxisById:function(n){return AmCharts.getObjById(this.valueAxes,n)},processFields:function(n,t,i){var u,r,e,f;for(n.itemColors&&(u=n.itemColors,r=t.index,t.color=r<u.length?u[r]:AmCharts.randomColor()),u="lineColor color alpha fillColors description bullet customBullet bulletSize bulletConfig url labelColor dashLength pattern".split(" "),r=0;r<u.length;r++)e=u[r],f=n[e+"Field"],f&&(f=i[f],AmCharts.isDefined(f)&&(t[e]=f));t.dataContext=i},chooseGraphColor:function(n,t){if(n.lineColor)n.lineColorR=n.lineColor;else{var i;i=this.colors.length>t?this.colors[t]:AmCharts.randomColor();n.lineColorR=i}n.fillColorsR=n.fillColors?n.fillColors:n.lineColorR;n.bulletBorderColorR=n.bulletBorderColor?n.bulletBorderColor:n.useLineColorForBulletBorder?n.lineColorR:n.bulletColor;n.bulletColorR=n.bulletColor?n.bulletColor:n.lineColorR;(i=this.patterns)&&(n.pattern=i[t])},handleLegendEvent:function(n){var r=n.type,t,i;if(n=n.dataItem,!this.legend.data&&n){t=n.hidden;i=n.showBalloon;switch(r){case"clickMarker":this.textClickEnabled&&(i?this.hideGraphsBalloon(n):this.showGraphsBalloon(n));break;case"clickLabel":i?this.hideGraphsBalloon(n):this.showGraphsBalloon(n);break;case"rollOverItem":t||this.highlightGraph(n);break;case"rollOutItem":t||this.unhighlightGraph();break;case"hideItem":this.hideGraph(n);break;case"showItem":this.showGraph(n)}}},highlightGraph:function(n){var u=this.graphs,t,i=.2,r;if(this.legend&&(i=this.legend.rollOverGraphAlpha),1!=i)for(t=0;t<u.length;t++)r=u[t],r!=n&&r.changeOpacity(i)},unhighlightGraph:function(){var n,t;if(this.legend&&(n=this.legend.rollOverGraphAlpha),1!=n)for(n=this.graphs,t=0;t<n.length;t++)n[t].changeOpacity(1)},showGraph:function(n){n.switchable&&(n.hidden=!1,this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),this.chartCreated&&this.initChart())},hideGraph:function(n){n.switchable&&(this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),n.hidden=!0,this.chartCreated&&this.initChart())},hideGraphsBalloon:function(n){n.showBalloon=!1;this.updateLegend()},showGraphsBalloon:function(n){n.showBalloon=!0;this.updateLegend()},updateLegend:function(){this.legend&&this.legend.invalidateSize()},resetAnimation:function(){var t=this.graphs,n;if(t)for(n=0;n<t.length;n++)t[n].animationPlayed=!1},animateAgain:function(){this.resetAnimation();this.validateNow()}});AmCharts.AmSlicedChart=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(n){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice");AmCharts.AmSlicedChart.base.construct.call(this,n);this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" ");this.alpha=1;this.groupPercent=0;this.groupedTitle="Other";this.groupedPulled=!1;this.groupedAlpha=1;this.marginLeft=0;this.marginBottom=this.marginTop=10;this.marginRight=0;this.hoverAlpha=1;this.outlineColor="#FFFFFF";this.outlineAlpha=0;this.outlineThickness=1;this.startAlpha=0;this.startDuration=1;this.startEffect="bounce";this.sequencedAnimation=!0;this.pullOutDuration=1;this.pullOutEffect="bounce";this.pullOnHover=this.pullOutOnlyOne=!1;this.labelsEnabled=!0;this.labelTickColor="#000000";this.labelTickAlpha=.2;this.hideLabelsPercent=0;this.urlTarget="_self";this.autoMarginOffset=10;this.gradientRatio=[];this.maxLabelWidth=200;AmCharts.applyTheme(this,n,"AmSlicedChart")},initChart:function(){AmCharts.AmSlicedChart.base.initChart.call(this);this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData));this.drawChart()},handleLegendEvent:function(n){var u=n.type,t=n.dataItem,r=this.legend,i;if(!r.data&&t){i=t.hidden;n=n.event;switch(u){case"clickMarker":i||r.switchable||this.clickSlice(t,n);break;case"clickLabel":i||this.clickSlice(t,n,!1);break;case"rollOverItem":i||this.rollOverSlice(t,!1,n);break;case"rollOutItem":i||this.rollOutSlice(t,n);break;case"hideItem":this.hideSlice(t,n);break;case"showItem":this.showSlice(t,n)}}},invalidateVisibility:function(){this.recalculatePercents();this.initChart();var n=this.legend;n&&n.invalidateSize()},addEventListeners:function(n,t){var i=this;n.mouseover(function(n){i.rollOverSlice(t,!0,n)}).mouseout(function(n){i.rollOutSlice(t,n)}).touchend(function(n){i.rollOverSlice(t,n);i.panEventsEnabled&&i.clickSlice(t,n)}).touchstart(function(n){i.rollOverSlice(t,n)}).click(function(n){i.clickSlice(t,n)}).contextmenu(function(n){i.handleRightClick(t,n)})},formatString:function(n,t,i){return n=AmCharts.formatValue(n,t,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),n=AmCharts.formatValue(n,t,["percents"],this.pf),n=AmCharts.massReplace(n,{"[[title]]":t.title,"[[description]]":t.description}),-1!=n.indexOf("[[")&&(n=AmCharts.formatDataContextValue(n,t.dataContext)),n=i?AmCharts.fixNewLines(n):AmCharts.fixBrakes(n),AmCharts.cleanFromEmpty(n)},startSlices:function(){for(var n=0;n<this.chartData.length;n++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(n):this.startSlice(this.chartData[n])},setStartTO:function(n){var t=this;n=setTimeout(function(){t.startSequenced.call(t)},t.startDuration/t.chartData.length*500*n);t.timeOuts.push(n)},pullSlices:function(n){for(var r=this.chartData,i,t=0;t<r.length;t++)i=r[t],i.pulled&&this.pullSlice(i,1,n)},startSequenced:function(){for(var t=this.chartData,n=0;n<t.length;n++)if(!t[n].started){this.startSlice(this.chartData[n]);break}},startSlice:function(n){n.started=!0;var t=n.wedge,i=this.startDuration;t&&0<i&&(0<n.alpha&&t.show(),t.translate(n.startX,n.startY),t.animate({opacity:1,translate:"0,0"},i,this.startEffect))},showLabels:function(){for(var r=this.chartData,n,i,t=0;t<r.length;t++)n=r[t],0<n.alpha&&(i=n.label,i&&i.show(),(n=n.tick)&&n.show())},showSlice:function(n){isNaN(n)?n.hidden=!1:this.chartData[n].hidden=!1;this.invalidateVisibility()},hideSlice:function(n){isNaN(n)?n.hidden=!0:this.chartData[n].hidden=!0;this.hideBalloon();this.invalidateVisibility()},rollOverSlice:function(n,t,i){var f,e,u,r;isNaN(n)||(n=this.chartData[n]);clearTimeout(this.hoverInt);n.hidden||(this.pullOnHover&&this.pullSlice(n,1),1>this.hoverAlpha&&n.wedge&&n.wedge.attr({opacity:this.hoverAlpha}),f=n.balloonX,e=n.balloonY,n.pulled&&(f+=n.pullX,e+=n.pullY),u=this.formatString(this.balloonText,n,!0),r=this.balloonFunction,r&&(u=r(n,u)),r=AmCharts.adjustLuminosity(n.color,-.15),this.showBalloon(u,r,t,f,e),n={type:"rollOverSlice",dataItem:n,chart:this,event:i},this.fire(n.type,n))},rollOutSlice:function(n,t){isNaN(n)||(n=this.chartData[n]);n.wedge&&n.wedge.attr({opacity:1});this.hideBalloon();var i={type:"rollOutSlice",dataItem:n,chart:this,event:t};this.fire(i.type,i)},clickSlice:function(n,t,i){isNaN(n)||(n=this.chartData[n]);n.pulled?this.pullSlice(n,0):this.pullSlice(n,1);AmCharts.getURL(n.url,this.urlTarget);i||(n={type:"clickSlice",dataItem:n,chart:this,event:t},this.fire(n.type,n))},handleRightClick:function(n,t){isNaN(n)||(n=this.chartData[n]);var i={type:"rightClickSlice",dataItem:n,chart:this,event:t};this.fire(i.type,i)},drawTicks:function(){for(var r=this.chartData,n,t,i=0;i<r.length;i++)n=r[i],n.label&&(t=n.ty,t=AmCharts.line(this.container,[n.tx0,n.tx,n.tx2],[n.ty0,t,t],this.labelTickColor,this.labelTickAlpha),n.tick=t,n.wedge.push(t))},initialStart:function(){var n=this,t=n.startDuration,i=setTimeout(function(){n.showLabels.call(n)},1e3*t);n.timeOuts.push(i);n.chartCreated?n.pullSlices(!0):(n.startSlices(),0<t?(t=setTimeout(function(){n.pullSlices.call(n)},1200*t),n.timeOuts.push(t)):n.pullSlices(!0))},pullSlice:function(n,t,i){var r=this.pullOutDuration;!0===i&&(r=0);(i=n.wedge)&&(0<r?i.animate({translate:t*n.pullX+","+t*n.pullY},r,this.pullOutEffect):i.translate(t*n.pullX,t*n.pullY));1==t?(n.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(n.index),n={type:"pullOutSlice",dataItem:n,chart:this}):(n.pulled=!1,n={type:"pullInSlice",dataItem:n,chart:this});this.fire(n.type,n)},pullInAll:function(n){for(var i=this.chartData,t=0;t<this.chartData.length;t++)t!=n&&i[t].pulled&&this.pullSlice(i[t],0)},pullOutAll:function(n){n=this.chartData;for(var t=0;t<n.length;t++)n[t].pulled||this.pullSlice(n[t],1)},parseData:function(){var e=[],o,u,f,i,n,t,r;if(this.chartData=e,o=this.dataProvider,isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha),void 0!==o){for(u=o.length,f=0,i=0;i<u;i++)n={},r=o[i],n.dataContext=r,n.value=Number(r[this.valueField]),(t=r[this.titleField])||(t=""),n.title=t,n.pulled=AmCharts.toBoolean(r[this.pulledField],!1),(t=r[this.descriptionField])||(t=""),n.description=t,n.labelRadius=Number(r[this.labelRadiusField]),n.switchable=!0,n.url=r[this.urlField],t=r[this.patternField],!t&&this.patterns&&(t=this.patterns[i]),n.pattern=t,n.visibleInLegend=AmCharts.toBoolean(r[this.visibleInLegendField],!0),t=r[this.alphaField],n.alpha=void 0!==t?Number(t):this.alpha,t=r[this.colorField],void 0!==t&&(n.color=AmCharts.toColor(t)),n.labelColor=AmCharts.toColor(r[this.labelColorField]),f+=n.value,n.hidden=!1,e[i]=n;for(i=o=0;i<u;i++)n=e[i],n.percents=n.value/f*100,n.percents<this.groupPercent&&o++;for(1<o&&(this.groupValue=0,this.removeSmallSlices(),e.push({title:this.groupedTitle,value:this.groupValue,percents:this.groupValue/f*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,dataContext:{}})),u=this.baseColor,u||(u=this.pieBaseColor),f=this.brightnessStep,f||(f=this.pieBrightnessStep),i=0;i<e.length;i++)u?t=AmCharts.adjustLuminosity(u,i*f/100):(t=this.colors[i],void 0===t&&(t=AmCharts.randomColor())),void 0===e[i].color&&(e[i].color=t);this.recalculatePercents()}},recalculatePercents:function(){for(var i=this.chartData,r=0,n,t=0;t<i.length;t++)n=i[t],!n.hidden&&0<n.value&&(r+=n.value);for(t=0;t<i.length;t++)n=this.chartData[t],n.percents=!n.hidden&&0<n.value?100*n.value/r:0},removeSmallSlices:function(){for(var t=this.chartData,n=t.length-1;0<=n;n--)t[n].percents<this.groupPercent&&(this.groupValue+=t[n].value,t.splice(n,1))},animateAgain:function(){var t=this,n,i,r;for(t.startSlices(),n=0;n<t.chartData.length;n++)i=t.chartData[n],i.started=!1,r=i.wedge,r&&r.translate(i.startX,i.startY);n=t.startDuration;0<n?(n=setTimeout(function(){t.pullSlices.call(t)},1200*n),t.timeOuts.push(n)):t.pullSlices()},measureMaxLabel:function(){for(var u=this.chartData,r=0,i=0;i<u.length;i++){var t=u[i],n=this.formatString(this.labelText,t),f=this.labelFunction;f&&(n=f(t,n));t=AmCharts.text(this.container,n,this.color,this.fontFamily,this.fontSize);n=t.getBBox().width;n>r&&(r=n);t.remove()}return r}});AmCharts.AmRectangularChart=AmCharts.Class({inherits:AmCharts.AmCoordinateChart,construct:function(n){AmCharts.AmRectangularChart.base.construct.call(this,n);this.theme=n;this.createEvents("zoomed");this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=20;this.verticalPosition=this.horizontalPosition=this.depth3D=this.angle=0;this.heightMultiplier=this.widthMultiplier=1;this.plotAreaFillColors="#FFFFFF";this.plotAreaFillAlphas=0;this.plotAreaBorderColor="#000000";this.plotAreaBorderAlpha=0;this.zoomOutButtonImageSize=17;this.zoomOutButtonImage="lens.png";this.zoomOutText="Show all";this.zoomOutButtonColor="#e5e5e5";this.zoomOutButtonAlpha=0;this.zoomOutButtonRollOverAlpha=1;this.zoomOutButtonPadding=8;this.trendLines=[];this.autoMargins=!0;this.marginsUpdated=!1;this.autoMarginOffset=10;AmCharts.applyTheme(this,n,"AmRectangularChart")},initChart:function(){AmCharts.AmRectangularChart.base.initChart.call(this);this.updateDxy();var n=!0;!this.marginsUpdated&&this.autoMargins&&(this.resetMargins(),n=!1);this.processScrollbars();this.updateMargins();this.updatePlotArea();this.updateScrollbars();this.updateTrendLines();this.updateChartCursor();this.updateValueAxes();n&&(this.scrollbarOnly||this.updateGraphs())},drawChart:function(){if(AmCharts.AmRectangularChart.base.drawChart.call(this),this.drawPlotArea(),AmCharts.ifArray(this.chartData)){var n=this.chartCursor;n&&n.draw();n=this.zoomOutText;""!==n&&n&&this.drawZoomOutButton()}},resetMargins:function(){var i={},n,r,t,u;if("serial"==this.type){for(r=this.valueAxes,n=0;n<r.length;n++)t=r[n],t.ignoreAxisWidth||(t.setOrientation(this.rotate),t.fixAxisPosition(),i[t.position]=!0);(n=this.categoryAxis)&&!n.ignoreAxisWidth&&(n.setOrientation(!this.rotate),n.fixAxisPosition(),n.fixAxisPosition(),i[n.position]=!0)}else{for(t=this.xAxes,r=this.yAxes,n=0;n<t.length;n++)u=t[n],u.ignoreAxisWidth||(u.setOrientation(!0),u.fixAxisPosition(),i[u.position]=!0);for(n=0;n<r.length;n++)t=r[n],t.ignoreAxisWidth||(t.setOrientation(!1),t.fixAxisPosition(),i[t.position]=!0)}i.left&&(this.marginLeft=0);i.right&&(this.marginRight=0);i.top&&(this.marginTop=0);i.bottom&&(this.marginBottom=0);this.fixMargins=i},measureMargins:function(){for(var f=this.valueAxes,t=this.autoMarginOffset,e=this.fixMargins,s=this.realWidth,h=this.realHeight,i=t,r=t,u=s,n=h,o=0;o<f.length;o++)n=this.getAxisBounds(f[o],i,u,r,n),i=Math.round(n.l),u=Math.round(n.r),r=Math.round(n.t),n=Math.round(n.b);(f=this.categoryAxis)&&(n=this.getAxisBounds(f,i,u,r,n),i=Math.round(n.l),u=Math.round(n.r),r=Math.round(n.t),n=Math.round(n.b));e.left&&i<t&&(this.marginLeft=Math.round(-i+t));e.right&&u>=s-t&&(this.marginRight=Math.round(u-s+t));e.top&&r<t+this.titleHeight&&(this.marginTop=Math.round(this.marginTop-r+t+this.titleHeight));e.bottom&&n>h-t&&(this.marginBottom=Math.round(this.marginBottom+n-h+t));this.initChart()},getAxisBounds:function(n,t,i,r,u){if(!n.ignoreAxisWidth){var f=n.labelsSet,e=n.tickLength;if(n.inside&&(e=0),f)switch(f=n.getBBox(),n.position){case"top":n=f.y;r>n&&(r=n);break;case"bottom":n=f.y+f.height;u<n&&(u=n);break;case"right":n=f.x+f.width+e+3;i<n&&(i=n);break;case"left":n=f.x-e;t>n&&(t=n)}}return{l:t,t:r,r:i,b:u}},drawZoomOutButton:function(){var n=this,r=n.container.set(),t,i,h;n.zoomButtonSet.push(r);var u=n.color,o=n.fontSize,c=n.zoomOutButtonImageSize,l=n.zoomOutButtonImage,a=AmCharts.lang.zoomOutText||n.zoomOutText,f=n.zoomOutButtonColor,s=n.zoomOutButtonAlpha,t=n.zoomOutButtonFontSize,e=n.zoomOutButtonPadding;for(isNaN(t)||(o=t),(t=n.zoomOutButtonFontColor)&&(u=t),t=n.zoomOutButton,t&&(t.fontSize&&(o=t.fontSize),t.color&&(u=t.color),t.backgroundColor&&(f=t.backgroundColor),isNaN(t.backgroundAlpha)||(n.zoomOutButtonRollOverAlpha=t.backgroundAlpha)),h=t=0,void 0!==n.pathToImages&&l&&(i=n.container.image(n.pathToImages+l,0,0,c,c),r.push(i),i=i.getBBox(),t=i.width+5),void 0!==a&&(u=AmCharts.text(n.container,a,u,n.fontFamily,o,"start"),o=u.getBBox(),h=i?i.height/2-3:o.height/2,u.translate(t,h),r.push(u)),i=r.getBBox(),u=1,AmCharts.isModern||(u=0),f=AmCharts.rect(n.container,i.width+2*e+5,i.height+2*e-2,f,1,1,f,u),f.setAttr("opacity",s),f.translate(-e,-e),r.push(f),f.toBack(),n.zbBG=f,i=f.getBBox(),r.translate(n.marginLeftReal+n.plotAreaWidth-i.width+e,n.marginTopReal+e),r.hide(),r.mouseover(function(){n.rollOverZB()}).mouseout(function(){n.rollOutZB()}).click(function(){n.clickZB()}).touchstart(function(){n.rollOverZB()}).touchend(function(){n.rollOutZB();n.clickZB()}),s=0;s<r.length;s++)r[s].attr({cursor:"pointer"});n.zbSet=r},rollOverZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonRollOverAlpha)},rollOutZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonAlpha)},clickZB:function(){this.zoomOut()},zoomOut:function(){this.updateScrollbar=!0;this.zoom()},drawPlotArea:function(){var t=this.dx,r=this.dy,u=this.marginLeftReal,o=this.marginTopReal,i=this.plotAreaWidth-1,f=this.plotAreaHeight-1,n=this.plotAreaFillColors,e=this.plotAreaFillAlphas,s=this.plotAreaBorderColor,h=this.plotAreaBorderAlpha;this.trendLinesSet.clipRect(u,o,i,f);"object"==typeof e&&(e=e[0]);n=AmCharts.polygon(this.container,[0,i,i,0,0],[0,0,f,f,0],n,e,1,s,h,this.plotAreaGradientAngle);n.translate(u+t,o+r);this.set.push(n);0!==t&&0!==r&&(n=this.plotAreaFillColors,"object"==typeof n&&(n=n[0]),n=AmCharts.adjustLuminosity(n,-.15),i=AmCharts.polygon(this.container,[0,t,i+t,i,0],[0,r,r,0,0],n,e,1,s,h),i.translate(u,o+f),this.set.push(i),t=AmCharts.polygon(this.container,[0,0,t,t,0],[0,f,f+r,r,0],n,e,1,s,h),t.translate(u,o),this.set.push(t));(u=this.bbset)&&this.scrollbarOnly&&u.remove()},updatePlotArea:function(){var n=this.updateWidth(),t=this.updateHeight(),i=this.container;this.realWidth=n;this.realWidth=t;i&&this.container.setSize(n,t);n=n-this.marginLeftReal-this.marginRightReal-this.dx;t=t-this.marginTopReal-this.marginBottomReal;1>n&&(n=1);1>t&&(t=1);this.plotAreaWidth=Math.round(n);this.plotAreaHeight=Math.round(t)},updateDxy:function(){this.dx=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180));this.dy=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180));this.d3x=Math.round(this.columnSpacing3D*Math.cos(this.angle*Math.PI/180));this.d3y=Math.round(-this.columnSpacing3D*Math.sin(this.angle*Math.PI/180))},updateMargins:function(){var n=this.getTitleHeight();this.titleHeight=n;this.marginTopReal=this.marginTop-this.dy+n;this.marginBottomReal=this.marginBottom;this.marginLeftReal=this.marginLeft;this.marginRightReal=this.marginRight},updateValueAxes:function(){for(var i=this.valueAxes,r=this.marginLeftReal,u=this.marginTopReal,f=this.plotAreaHeight,e=this.plotAreaWidth,n,t=0;t<i.length;t++)n=i[t],n.axisRenderer=AmCharts.RecAxis,n.guideFillRenderer=AmCharts.RecFill,n.axisItemRenderer=AmCharts.RecItem,n.dx=this.dx,n.dy=this.dy,n.viW=e-1,n.viH=f-1,n.marginsChanged=!0,n.viX=r,n.viY=u,this.updateObjectSize(n)},updateObjectSize:function(n){n.width=(this.plotAreaWidth-1)*this.widthMultiplier;n.height=(this.plotAreaHeight-1)*this.heightMultiplier;n.x=this.marginLeftReal+this.horizontalPosition;n.y=this.marginTopReal+this.verticalPosition},updateGraphs:function(){for(var i=this.graphs,n,t=0;t<i.length;t++)n=i[t],n.x=this.marginLeftReal+this.horizontalPosition,n.y=this.marginTopReal+this.verticalPosition,n.width=this.plotAreaWidth*this.widthMultiplier,n.height=this.plotAreaHeight*this.heightMultiplier,n.index=t,n.dx=this.dx,n.dy=this.dy,n.rotate=this.rotate},updateChartCursor:function(){var n=this.chartCursor;n&&(n=AmCharts.processObject(n,AmCharts.ChartCursor,this.theme),this.addChartCursor(n),n.x=this.marginLeftReal,n.y=this.marginTopReal,n.width=this.plotAreaWidth-1,n.height=this.plotAreaHeight-1,n.chart=this)},processScrollbars:function(){var n=this.chartScrollbar;n&&(n=AmCharts.processObject(n,AmCharts.ChartScrollbar,this.theme),this.addChartScrollbar(n))},updateScrollbars:function(){},addChartCursor:function(n){AmCharts.callMethod("destroy",[this.chartCursor]);n&&(this.listenTo(n,"changed",this.handleCursorChange),this.listenTo(n,"zoomed",this.handleCursorZoom));this.chartCursor=n},removeChartCursor:function(){AmCharts.callMethod("destroy",[this.chartCursor]);this.chartCursor=null},zoomTrendLines:function(){for(var i=this.trendLines,n,t=0;t<i.length;t++)n=i[t],n.valueAxis.recalculateToPercents?n.set&&n.set.hide():(n.x=this.marginLeftReal+this.horizontalPosition,n.y=this.marginTopReal+this.verticalPosition,n.draw())},addTrendLine:function(n){this.trendLines.push(n)},removeTrendLine:function(n){for(var i=this.trendLines,t=i.length-1;0<=t;t--)i[t]==n&&i.splice(t,1)},adjustMargins:function(n,t){var i=n.scrollbarHeight+n.offset;"top"==n.position?t?this.marginLeftReal+=i:this.marginTopReal+=i:t?this.marginRightReal+=i:this.marginBottomReal+=i},getScrollbarPosition:function(n,t,i){n.position=t?"bottom"==i||"left"==i?"bottom":"top":"top"==i||"right"==i?"bottom":"top"},updateChartScrollbar:function(n,t){if(n){n.rotate=t;var i=this.marginTopReal,u=this.marginLeftReal,f=n.scrollbarHeight,e=this.dx,o=this.dy,r=n.offset;"top"==n.position?t?(n.y=i,n.x=u-f-r):(n.y=i-f+o-1-r,n.x=u+e):t?(n.y=i+o,n.x=u+this.plotAreaWidth+e+r):(n.y=i+this.plotAreaHeight+r,n.x=this.marginLeftReal)}},showZB:function(n){var t=this.zbSet;t&&(n?t.show():t.hide(),this.rollOutZB())},handleReleaseOutside:function(n){AmCharts.AmRectangularChart.base.handleReleaseOutside.call(this,n);(n=this.chartCursor)&&n.handleReleaseOutside()},handleMouseDown:function(n){AmCharts.AmRectangularChart.base.handleMouseDown.call(this,n);var t=this.chartCursor;t&&t.handleMouseDown(n)},handleCursorChange:function(){}});AmCharts.TrendLine=AmCharts.Class({construct:function(n){this.cname="TrendLine";this.createEvents("click");this.isProtected=!1;this.dashLength=0;this.lineColor="#00CC00";this.lineThickness=this.lineAlpha=1;AmCharts.applyTheme(this,n,this.cname)},draw:function(){var n=this;n.destroy();var c=n.chart,h=c.container,o,u,s,l,i=n.categoryAxis,f=n.initialDate,a=n.initialCategory,e=n.finalDate,r=n.finalCategory,t=n.valueAxis,y=n.valueAxisX,p=n.initialXValue,w=n.finalXValue,b=n.initialValue,k=n.finalValue,d=t.recalculateToPercents,v=c.dataDateFormat;i&&(f&&(f instanceof Date||(f=v?AmCharts.stringToDate(f,v):new Date(f)),n.initialDate=f,o=i.dateToCoordinate(f)),a&&(o=i.categoryToCoordinate(a)),e&&(e instanceof Date||(e=v?AmCharts.stringToDate(e,v):new Date(e)),n.finalDate=e,u=i.dateToCoordinate(e)),r&&(u=i.categoryToCoordinate(r)));y&&!d&&(isNaN(p)||(o=y.getCoordinate(p)),isNaN(w)||(u=y.getCoordinate(w)));t&&!d&&(isNaN(b)||(s=t.getCoordinate(b)),isNaN(k)||(l=t.getCoordinate(k)));isNaN(o)||isNaN(u)||isNaN(s)||isNaN(s)||(c.rotate?(i=[s,l],u=[o,u]):(i=[o,u],u=[s,l]),s=n.lineColor,o=AmCharts.line(h,i,u,s,n.lineAlpha,n.lineThickness,n.dashLength),l=i,f=u,r=i[1]-i[0],t=u[1]-u[0],0===r&&(r=.01),0===t&&(t=.01),a=r/Math.abs(r),e=t/Math.abs(t),t=r*t/Math.abs(r*t)*Math.sqrt(Math.pow(r,2)+Math.pow(t,2)),r=Math.asin(r/t),t=Math.PI/2-r,r=Math.abs(5*Math.cos(t)),t=Math.abs(5*Math.sin(t)),l.push(i[1]-a*t,i[0]-a*t),f.push(u[1]+e*r,u[0]+e*r),i=AmCharts.polygon(h,l,f,s,.005,0),h=h.set([i,o]),h.translate(c.marginLeftReal,c.marginTopReal),c.trendLinesSet.push(h),n.line=o,n.set=h,i.mouseup(function(){n.handleLineClick()}).mouseover(function(){n.handleLineOver()}).mouseout(function(){n.handleLineOut()}),i.touchend&&i.touchend(function(){n.handleLineClick()}))},handleLineClick:function(){var n={type:"click",trendLine:this,chart:this.chart};this.fire(n.type,n)},handleLineOver:function(){var n=this.rollOverColor;void 0!==n&&this.line.attr({stroke:n})},handleLineOut:function(){this.line.attr({stroke:this.lineColor})},destroy:function(){AmCharts.remove(this.set)}});AmCharts.circle=function(n,t,i,r,u,f,e,o,s){return(void 0==u||0===u)&&(u=.01),void 0===f&&(f="#000000"),void 0===e&&(e=0),r={fill:i,stroke:f,"fill-opacity":r,"stroke-width":u,"stroke-opacity":e},n=isNaN(s)?n.circle(0,0,t).attr(r):n.ellipse(0,0,t,s).attr(r),o&&n.gradient("radialGradient",[i,AmCharts.adjustLuminosity(i,-.6)]),n};AmCharts.text=function(n,t,i,r,u,f,e,o){return f||(f="middle"),"right"==f&&(f="end"),isNaN(o)&&(o=1),void 0!==t&&(t=String(t),AmCharts.isIE&&!AmCharts.isModern&&(t=t.replace("&amp;","&"),t=t.replace("&","&amp;"))),i={fill:i,"font-family":r,"font-size":u,opacity:o},!0===e&&(i["font-weight"]="bold"),i["text-anchor"]=f,n.text(t,i)};AmCharts.polygon=function(n,t,i,r,u,f,e,o,s,h,c){isNaN(f)&&(f=.01);isNaN(o)&&(o=u);var l=r,a=!1;for("object"==typeof l&&1<l.length&&(a=!0,l=l[0]),void 0===e&&(e=l),u={fill:l,stroke:e,"fill-opacity":u,"stroke-width":f,"stroke-opacity":o},void 0!==c&&0<c&&(u["stroke-dasharray"]=c),c=AmCharts.dx,f=AmCharts.dy,n.handDrawn&&(i=AmCharts.makeHD(t,i,n.handDrawScatter),t=i[0],i=i[1]),e=Math.round,h&&(e=AmCharts.doNothing),h="M"+(e(t[0])+c)+","+(e(i[0])+f),o=1;o<t.length;o++)h+=" L"+(e(t[o])+c)+","+(e(i[o])+f);return n=n.path(h+" Z").attr(u),a&&n.gradient("linearGradient",r,s),n};AmCharts.rect=function(n,t,i,r,u,f,e,o,s,h,c){var l,y,a,v;return isNaN(f)&&(f=0),void 0===s&&(s=0),void 0===h&&(h=270),isNaN(u)&&(u=0),l=r,y=!1,"object"==typeof l&&(l=l[0],y=!0),void 0===e&&(e=l),void 0===o&&(o=u),t=Math.round(t),i=Math.round(i),a=0,v=0,0>t&&(t=Math.abs(t),a=-t),0>i&&(i=Math.abs(i),v=-i),a+=AmCharts.dx,v+=AmCharts.dy,u={fill:l,stroke:e,"fill-opacity":u,"stroke-opacity":o},void 0!==c&&0<c&&(u["stroke-dasharray"]=c),n=n.rect(a,v,t,i,s,f).attr(u),y&&n.gradient("linearGradient",r,h),n};AmCharts.bullet=function(n,t,i,r,u,f,e,o,s,h,c){var l;"circle"==t&&(t="round");switch(t){case"round":l=AmCharts.circle(n,i/2,r,u,f,e,o);break;case"square":l=AmCharts.polygon(n,[-i/2,i/2,i/2,-i/2],[i/2,i/2,-i/2,-i/2],r,u,f,e,o,h-180);break;case"rectangle":l=AmCharts.polygon(n,[-i,i,i,-i],[i/2,i/2,-i/2,-i/2],r,u,f,e,o,h-180);break;case"diamond":l=AmCharts.polygon(n,[-i/2,0,i/2,0],[0,-i/2,0,i/2],r,u,f,e,o);break;case"triangleUp":l=AmCharts.triangle(n,i,0,r,u,f,e,o);break;case"triangleDown":l=AmCharts.triangle(n,i,180,r,u,f,e,o);break;case"triangleLeft":l=AmCharts.triangle(n,i,270,r,u,f,e,o);break;case"triangleRight":l=AmCharts.triangle(n,i,90,r,u,f,e,o);break;case"bubble":l=AmCharts.circle(n,i/2,r,u,f,e,o,!0);break;case"line":l=AmCharts.line(n,[-i/2,i/2],[0,0],r,u,f,e,o);break;case"yError":l=n.set();l.push(AmCharts.line(n,[0,0],[-i/2,i/2],r,u,f));l.push(AmCharts.line(n,[-s,s],[-i/2,-i/2],r,u,f));l.push(AmCharts.line(n,[-s,s],[i/2,i/2],r,u,f));break;case"xError":l=n.set();l.push(AmCharts.line(n,[-i/2,i/2],[0,0],r,u,f));l.push(AmCharts.line(n,[-i/2,-i/2],[-s,s],r,u,f));l.push(AmCharts.line(n,[i/2,i/2],[-s,s],r,u,f))}return l&&l.pattern(c),l};AmCharts.triangle=function(n,t,i,r,u,f,e,o){(void 0===f||0===f)&&(f=1);void 0===e&&(e="#000");void 0===o&&(o=0);r={fill:r,stroke:e,"fill-opacity":u,"stroke-width":f,"stroke-opacity":o};t/=2;var s;return 0===i&&(s=" M"+-t+","+t+" L0,"+-t+" L"+t+","+t+" Z"),180==i&&(s=" M"+-t+","+-t+" L0,"+t+" L"+t+","+-t+" Z"),90==i&&(s=" M"+-t+","+-t+" L"+t+",0 L"+-t+","+t+" Z"),270==i&&(s=" M"+-t+",0 L"+t+","+t+" L"+t+","+-t+" Z"),n.path(s).attr(r)};AmCharts.line=function(n,t,i,r,u,f,e,o,s,h,c){if(n.handDrawn&&!c)return AmCharts.handDrawnLine(n,t,i,r,u,f,e,o,s,h,c);for(f={fill:"none","stroke-width":f},void 0!==e&&0<e&&(f["stroke-dasharray"]=e),isNaN(u)||(f["stroke-opacity"]=u),r&&(f.stroke=r),r=Math.round,h&&(r=AmCharts.doNothing),h=AmCharts.dx,u=AmCharts.dy,e="M"+(r(t[0])+h)+","+(r(i[0])+u),o=1;o<t.length;o++)e+=" L"+(r(t[o])+h)+","+(r(i[o])+u);return AmCharts.VML?n.path(e,void 0,!0).attr(f):(s&&(e+=" M0,0 L0,0"),n.path(e).attr(f))};AmCharts.makeHD=function(n,t,i){for(var a,v,c=[],l=[],r=1;r<n.length;r++)for(var e=Number(n[r-1]),o=Number(t[r-1]),s=Number(n[r]),h=Number(t[r]),u=Math.sqrt(Math.pow(s-e,2)+Math.pow(h-o,2)),u=Math.round(u/50)+1,s=(s-e)/u,h=(h-o)/u,f=0;f<=u;f++)a=e+f*s+Math.random()*i,v=o+f*h+Math.random()*i,c.push(a),l.push(v);return[c,l]};AmCharts.handDrawnLine=function(n,t,i,r,u,f,e,o,s,h,c){var y=n.set();for(c=1;c<t.length;c++)for(var v=[t[c-1],t[c]],a=[i[c-1],i[c]],a=AmCharts.makeHD(v,a,n.handDrawScatter),v=a[0],a=a[1],l=1;l<v.length;l++)y.push(AmCharts.line(n,[v[l-1],v[l]],[a[l-1],a[l]],r,u,f+Math.random()*n.handDrawThickness-n.handDrawThickness/2,e,o,s,h,!0));return y};AmCharts.doNothing=function(n){return n};AmCharts.wedge=function(n,t,i,r,u,f,e,o,s,h,c,l){var a=Math.round,ut,k;f=a(f);e=a(e);o=a(o);var tt=a(e/f*o),ft=AmCharts.VML,y=359.5+f/100;359.94<y&&(y=359.94);u>=y&&(u=y);var v=1/180*Math.PI,y=t+Math.sin(r*v)*o,p=i-Math.cos(r*v)*tt,w=t+Math.sin(r*v)*f,b=i-Math.cos(r*v)*e,d=t+Math.sin((r+u)*v)*f,g=i-Math.cos((r+u)*v)*e,nt=t+Math.sin((r+u)*v)*o,v=i-Math.cos((r+u)*v)*tt,it={fill:AmCharts.adjustLuminosity(h.fill,-.2),"stroke-opacity":0,"fill-opacity":h["fill-opacity"]},rt=0;if(180<Math.abs(u)&&(rt=1),r=n.set(),ft&&(y=a(10*y),w=a(10*w),d=a(10*d),nt=a(10*nt),p=a(10*p),b=a(10*b),g=a(10*g),v=a(10*v),t=a(10*t),s=a(10*s),i=a(10*i),f*=10,e*=10,o*=10,tt*=10,1>Math.abs(u)&&1>=Math.abs(d-w)&&1>=Math.abs(g-b)&&(ut=!0)),u="",l&&(it["fill-opacity"]=0,it["stroke-opacity"]=h["stroke-opacity"]/2,it.stroke=h.stroke),0<s&&(k=" M"+y+","+(p+s)+" L"+w+","+(b+s),ft?(ut||(k+=" A"+(t-f)+","+(s+i-e)+","+(t+f)+","+(s+i+e)+","+w+","+(b+s)+","+d+","+(g+s)),k+=" L"+nt+","+(v+s),0<o&&(ut||(k+=" B"+(t-o)+","+(s+i-tt)+","+(t+o)+","+(s+i+tt)+","+nt+","+(s+v)+","+y+","+(s+p)))):(k+=" A"+f+","+e+",0,"+rt+",1,"+d+","+(g+s)+" L"+nt+","+(v+s),0<o&&(k+=" A"+o+","+tt+",0,"+rt+",0,"+y+","+(p+s))),k=n.path(k+" Z",void 0,void 0,"1000,1000").attr(it),r.push(k),k=n.path(" M"+y+","+p+" L"+y+","+(p+s)+" L"+w+","+(b+s)+" L"+w+","+b+" L"+y+","+p+" Z",void 0,void 0,"1000,1000").attr(it),s=n.path(" M"+d+","+g+" L"+d+","+(g+s)+" L"+nt+","+(v+s)+" L"+nt+","+v+" L"+d+","+g+" Z",void 0,void 0,"1000,1000").attr(it),r.push(k),r.push(s)),ft?(ut||(u=" A"+a(t-f)+","+a(i-e)+","+a(t+f)+","+a(i+e)+","+a(w)+","+a(b)+","+a(d)+","+a(g)),f=" M"+a(y)+","+a(p)+" L"+a(w)+","+a(b)+u+" L"+a(nt)+","+a(v)):f=" M"+y+","+p+" L"+w+","+b+(" A"+f+","+e+",0,"+rt+",1,"+d+","+g)+" L"+nt+","+v,0<o&&(ft?ut||(f+=" B"+(t-o)+","+(i-tt)+","+(t+o)+","+(i+tt)+","+nt+","+v+","+y+","+p):f+=" A"+o+","+tt+",0,"+rt+",0,"+y+","+p),n.handDrawn&&(t=AmCharts.line(n,[y,w],[p,b],h.stroke,h.thickness*Math.random()*n.handDrawThickness,h["stroke-opacity"]),r.push(t)),n=n.path(f+" Z",void 0,void 0,"1000,1000").attr(h),c){for(t=[],i=0;i<c.length;i++)t.push(AmCharts.adjustLuminosity(h.fill,c[i]));0<t.length&&n.gradient("linearGradient",t)}return n.pattern(l),r.push(n),r};AmCharts.adjustLuminosity=function(n,t){n=String(n).replace(/[^0-9a-f]/gi,"");6>n.length&&(n=String(n[0])+String(n[0])+String(n[1])+String(n[1])+String(n[2])+String(n[2]));t=t||0;for(var u="#",i,r=0;3>r;r++)i=parseInt(n.substr(2*r,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),u+=("00"+i).substr(i.length);return u};AmCharts.Bezier=AmCharts.Class({construct:function(n,t,i,r,u,f,e,o,s,h){for("object"==typeof e&&(e=e[0]),"object"==typeof o&&(o=o[0]),f={fill:e,"fill-opacity":o,"stroke-width":f},void 0!==s&&0<s&&(f["stroke-dasharray"]=s),isNaN(u)||(f["stroke-opacity"]=u),r&&(f.stroke=r),r="M"+Math.round(t[0])+","+Math.round(i[0]),u=[],s=0;s<t.length;s++)u.push({x:Number(t[s]),y:Number(i[s])});1<u.length&&(t=this.interpolate(u),r+=this.drawBeziers(t));h?r+=h:AmCharts.VML||(r+="M0,0 L0,0");this.path=n.path(r).attr(f)},interpolate:function(n){var u=[],e;u.push({x:n[0].x,y:n[0].y});var f=n[1].x-n[0].x,i=n[1].y-n[0].y,o=AmCharts.bezierX,s=AmCharts.bezierY;for(u.push({x:n[0].x+f/o,y:n[0].y+i/s}),e=1;e<n.length-1;e++){var r=n[e-1],t=n[e],i=n[e+1];isNaN(i.x)&&(i=t);isNaN(t.x)&&(t=r);isNaN(r.x)&&(r=t);f=i.x-t.x;i=i.y-r.y;r=t.x-r.x;r>f&&(r=f);u.push({x:t.x-r/o,y:t.y-i/s});u.push({x:t.x,y:t.y});u.push({x:t.x+r/o,y:t.y+i/s})}return i=n[n.length-1].y-n[n.length-2].y,f=n[n.length-1].x-n[n.length-2].x,u.push({x:n[n.length-1].x-f/o,y:n[n.length-1].y-i/s}),u.push({x:n[n.length-1].x,y:n[n.length-1].y}),u},drawBeziers:function(n){for(var i="",t=0;t<(n.length-1)/3;t++)i+=this.drawBezierMidpoint(n[3*t],n[3*t+1],n[3*t+2],n[3*t+3]);return i},drawBezierMidpoint:function(n,t,i,r){var u=Math.round,e=this.getPointOnSegment(n,t,.75),o=this.getPointOnSegment(r,i,.75),s=(r.x-n.x)/16,h=(r.y-n.y)/16,f=this.getPointOnSegment(n,t,.375);return n=this.getPointOnSegment(e,o,.375),n.x-=s,n.y-=h,t=this.getPointOnSegment(o,e,.375),t.x+=s,t.y+=h,i=this.getPointOnSegment(r,i,.375),s=this.getMiddle(f,n),e=this.getMiddle(e,o),o=this.getMiddle(t,i),f=" Q"+u(f.x)+","+u(f.y)+","+u(s.x)+","+u(s.y),f+=" Q"+u(n.x)+","+u(n.y)+","+u(e.x)+","+u(e.y),f+=" Q"+u(t.x)+","+u(t.y)+","+u(o.x)+","+u(o.y),f+(" Q"+u(i.x)+","+u(i.y)+","+u(r.x)+","+u(r.y))},getMiddle:function(n,t){return{x:(n.x+t.x)/2,y:(n.y+t.y)/2}},getPointOnSegment:function(n,t,i){return{x:n.x+(t.x-n.x)*i,y:n.y+(t.y-n.y)*i}}});AmCharts.AmDraw=AmCharts.Class({construct:function(n,t,i,r){if(AmCharts.SVG_NS="http://www.w3.org/2000/svg",AmCharts.SVG_XLINK="http://www.w3.org/1999/xlink",AmCharts.hasSVG=!!document.createElementNS&&!!document.createElementNS(AmCharts.SVG_NS,"svg").createSVGRect,1>t&&(t=10),1>i&&(i=10),this.div=n,this.width=t,this.height=i,this.rBin=document.createElement("div"),AmCharts.hasSVG){AmCharts.SVG=!0;var u=this.createSvgElement("svg");u.style.position="absolute";u.style.width=t+"px";u.style.height=i+"px";t=this.createSvgElement("desc");t.appendChild(document.createTextNode("JavaScript chart by amCharts "+r.version));u.appendChild(t);AmCharts.rtl&&(u.setAttribute("direction","rtl"),u.style.left="auto",u.style.right="0px");u.setAttribute("version","1.1");n.appendChild(u);this.container=u;this.R=new AmCharts.SVGRenderer(this)}else AmCharts.isIE&&AmCharts.VMLRenderer&&(AmCharts.VML=!0,AmCharts.vmlStyleSheet||(document.namespaces.add("amvml","urn:schemas-microsoft-com:vml"),31>document.styleSheets.length?(u=document.createStyleSheet(),u.addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true"),AmCharts.vmlStyleSheet=u):document.styleSheets[0].addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true")),this.container=n,this.R=new AmCharts.VMLRenderer(this,r),this.R.disableSelection(n))},createSvgElement:function(n){return document.createElementNS(AmCharts.SVG_NS,n)},circle:function(n,t,i,r){var u=new AmCharts.AmDObject("circle",this);return u.attr({r:i,cx:n,cy:t}),this.addToContainer(u.node,r),u},ellipse:function(n,t,i,r,u){var f=new AmCharts.AmDObject("ellipse",this);return f.attr({rx:i,ry:r,cx:n,cy:t}),this.addToContainer(f.node,u),f},setSize:function(n,t){0<n&&0<t&&(this.container.style.width=n+"px",this.container.style.height=t+"px")},rect:function(n,t,i,r,u,f,e){var o=new AmCharts.AmDObject("rect",this);return AmCharts.VML&&(u=Math.round(100*u/Math.min(i,r)),i+=2*f,r+=2*f,o.bw=f,o.node.style.marginLeft=-f,o.node.style.marginTop=-f),1>i&&(i=1),1>r&&(r=1),o.attr({x:n,y:t,width:i,height:r,rx:u,ry:u,"stroke-width":f}),this.addToContainer(o.node,e),o},image:function(n,t,i,r,u,f){var e=new AmCharts.AmDObject("image",this);return e.attr({x:t,y:i,width:r,height:u}),this.R.path(e,n),this.addToContainer(e.node,f),e},addToContainer:function(n,t){t||(t=this.container);t.appendChild(n)},text:function(n,t,i){return this.R.text(n,t,i)},path:function(n,t,i,r){var u=new AmCharts.AmDObject("path",this);return r||(r="100,100"),u.attr({cs:r}),i?u.attr({dd:n}):u.attr({d:n}),this.addToContainer(u.node,t),u},set:function(n){return this.R.set(n)},remove:function(n){if(n){var t=this.rBin;t.appendChild(n);t.innerHTML=""}},renderFix:function(){var n=this.container,i=n.style,t;try{t=n.getScreenCTM()||n.createSVGMatrix()}catch(r){t=n.createSVGMatrix()}n=1-t.e%1;t=1-t.f%1;.5<n&&(n-=1);.5<t&&(t-=1);n&&(i.left=n+"px");t&&(i.top=t+"px")},update:function(){this.R.update()}});AmCharts.AmDObject=AmCharts.Class({construct:function(n,t){this.D=t;this.R=t.R;this.node=this.R.create(this,n);this.y=this.x=0;this.scale=1},attr:function(n){return this.R.attr(this,n),this},getAttr:function(n){return this.node.getAttribute(n)},setAttr:function(n,t){return this.R.setAttr(this,n,t),this},clipRect:function(n,t,i,r){this.R.clipRect(this,n,t,i,r)},translate:function(n,t,i,r){r||(n=Math.round(n),t=Math.round(t));this.R.move(this,n,t,i);this.x=n;this.y=t;this.scale=i;this.angle&&this.rotate(this.angle)},rotate:function(n,t){this.R.rotate(this,n,t);this.angle=n},animate:function(n,t,i){var r,u,f;for(r in n)n.hasOwnProperty(r)&&(u=r,f=n[r],i=AmCharts.getEffect(i),this.R.animate(this,u,f,t,i))},push:function(n){var t,i;n&&(t=this.node,t.appendChild(n.node),i=n.clipPath,i&&t.appendChild(i),(n=n.grad)&&t.appendChild(n))},text:function(n){this.R.setText(this,n)},remove:function(){this.R.remove(this)},clear:function(){var n=this.node;if(n.hasChildNodes())for(;1<=n.childNodes.length;)n.removeChild(n.firstChild)},hide:function(){this.setAttr("visibility","hidden")},show:function(){this.setAttr("visibility","visible")},getBBox:function(){return this.R.getBBox(this)},toFront:function(){var n=this.node,t;n&&(this.prevNextNode=n.nextSibling,t=n.parentNode,t&&t.appendChild(n))},toPrevious:function(){var n=this.node;n&&this.prevNextNode&&(n=n.parentNode)&&n.insertBefore(this.prevNextNode,null)},toBack:function(){var n=this.node,t,i;n&&(this.prevNextNode=n.nextSibling,t=n.parentNode,t&&(i=t.firstChild,i&&t.insertBefore(n,i)))},mouseover:function(n){return this.R.addListener(this,"mouseover",n),this},mouseout:function(n){return this.R.addListener(this,"mouseout",n),this},click:function(n){return this.R.addListener(this,"click",n),this},dblclick:function(n){return this.R.addListener(this,"dblclick",n),this},mousedown:function(n){return this.R.addListener(this,"mousedown",n),this},mouseup:function(n){return this.R.addListener(this,"mouseup",n),this},touchstart:function(n){return this.R.addListener(this,"touchstart",n),this},touchend:function(n){return this.R.addListener(this,"touchend",n),this},contextmenu:function(n){return this.node.addEventListener?this.node.addEventListener("contextmenu",n,!0):this.R.addListener(this,"contextmenu",n),this},stop:function(n){(n=this.animationX)&&AmCharts.removeFromArray(this.R.animations,n);(n=this.animationY)&&AmCharts.removeFromArray(this.R.animations,n)},length:function(){return this.node.childNodes.length},gradient:function(n,t,i){this.R.gradient(this,n,t,i)},pattern:function(n,t){n&&this.R.pattern(this,n,t)}});AmCharts.VMLRenderer=AmCharts.Class({construct:function(n,t){this.chart=t;this.D=n;this.cNames={circle:"oval",ellipse:"oval",rect:"roundrect",path:"shape"};this.styleMap={x:"left",y:"top",width:"width",height:"height","font-family":"fontFamily","font-size":"fontSize",visibility:"visibility"}},create:function(n,t){var i,r,u;return"group"==t?(i=document.createElement("div"),n.type="div"):"text"==t?(i=document.createElement("div"),n.type="text"):"image"==t?(i=document.createElement("img"),n.type="image"):(n.type="shape",n.shapeType=this.cNames[t],i=document.createElement("amvml:"+this.cNames[t]),r=document.createElement("amvml:stroke"),i.appendChild(r),n.stroke=r,u=document.createElement("amvml:fill"),i.appendChild(u),n.fill=u,u.className="amvml",r.className="amvml",i.className="amvml"),i.style.position="absolute",i.style.top=0,i.style.left=0,i},path:function(n,t){n.node.setAttribute("src",t)},setAttr:function(n,t,i){var e,f;if(void 0!==i){8===document.documentMode&&(e=!0);var o=n.node,u=n.type,r=o.style;if("r"==t&&(r.width=2*i,r.height=2*i),"oval"==n.shapeType&&("rx"==t&&(r.width=2*i),"ry"==t&&(r.height=2*i)),"roundrect"!=n.shapeType||"width"!=t&&"height"!=t||(i-=1),"cursor"==t&&(r.cursor=i),"cx"==t&&(r.left=i-AmCharts.removePx(r.width)/2),"cy"==t&&(r.top=i-AmCharts.removePx(r.height)/2),f=this.styleMap[t],void 0!==f&&(r[f]=i),"text"==u&&("text-anchor"==t&&(n.anchor=i,f=o.clientWidth,"end"==i&&(r.marginLeft=-f+"px"),"middle"==i&&(r.marginLeft=-(f/2)+"px",r.textAlign="center"),"start"==i&&(r.marginLeft="0px")),"fill"==t&&(r.color=i),"font-weight"==t&&(r.fontWeight=i)),r=n.children)for(f=0;f<r.length;f++)r[f].setAttr(t,i);"shape"==u&&("cs"==t&&(o.style.width="100px",o.style.height="100px",o.setAttribute("coordsize",i)),"d"==t&&o.setAttribute("path",this.svgPathToVml(i)),"dd"==t&&o.setAttribute("path",i),u=n.stroke,n=n.fill,"stroke"==t&&(e?u.color=i:u.setAttribute("color",i)),"stroke-width"==t&&(e?u.weight=i:u.setAttribute("weight",i)),"stroke-opacity"==t&&(e?u.opacity=i:u.setAttribute("opacity",i)),"stroke-dasharray"==t&&(r="solid",0<i&&3>i&&(r="dot"),3<=i&&6>=i&&(r="dash"),6<i&&(r="longdash"),e?u.dashstyle=r:u.setAttribute("dashstyle",r)),("fill-opacity"==t||"opacity"==t)&&(0===i?e?n.on=!1:n.setAttribute("on",!1):e?n.opacity=i:n.setAttribute("opacity",i)),"fill"==t&&(e?n.color=i:n.setAttribute("color",i)),"rx"==t&&(e?o.arcSize=i+"%":o.setAttribute("arcsize",i+"%")))}},attr:function(n,t){for(var i in t)t.hasOwnProperty(i)&&this.setAttr(n,i,t[i])},text:function(n,t,i){var r=new AmCharts.AmDObject("text",this.D),u=r.node;return u.style.whiteSpace="pre",u.innerHTML=n,this.D.addToContainer(u,i),this.attr(r,t),r},getBBox:function(n){return this.getBox(n.node)},getBox:function(n){var h=n.offsetLeft,c=n.offsetTop,o=n.offsetWidth,s=n.offsetHeight,i,r,u,e,t,f;if(n.hasChildNodes()){for(e=0;e<n.childNodes.length;e++)i=this.getBox(n.childNodes[e]),t=i.x,isNaN(t)||(isNaN(r)?r=t:t<r&&(r=t)),f=i.y,isNaN(f)||(isNaN(u)?u=f:f<u&&(u=f)),t=i.width+t,isNaN(t)||(o=Math.max(o,t)),i=i.height+f,isNaN(i)||(s=Math.max(s,i));0>r&&(h+=r);0>u&&(c+=u)}return{x:h,y:c,width:o,height:s}},setText:function(n,t){var i=n.node;i&&(i.innerHTML=t);this.setAttr(n,"text-anchor",n.anchor)},addListener:function(n,t,i){n.node["on"+t]=i},move:function(n,t,i){var r=n.node,u=r.style;"text"==n.type&&(i-=AmCharts.removePx(u.fontSize)/2-1);"oval"==n.shapeType&&(t-=AmCharts.removePx(u.width)/2,i-=AmCharts.removePx(u.height)/2);n=n.bw;isNaN(n)||(t-=n,i-=n);isNaN(t)||isNaN(i)||(r.style.left=t+"px",r.style.top=i+"px")},svgPathToVml:function(n){var l=n.split(" "),r,t,e;for(n="",t=Math.round,e=0;e<l.length;e++){var f=l[e],u=f.substring(0,1),f=f.substring(1),i=f.split(","),o=t(i[0])+","+t(i[1]);if("M"==u&&(n+=" m "+o),"L"==u&&(n+=" l "+o),"Z"==u&&(n+=" x e"),"Q"==u){var a=r.length,c=r[a-1],s=i[0],h=i[1],o=i[2],v=i[3];r=t(r[a-2]/3+2/3*s);c=t(c/3+2/3*h);s=t(2/3*s+o/3);h=t(2/3*h+v/3);n+=" c "+r+","+c+","+s+","+h+","+o+","+v}"A"==u&&(n+=" wa "+f);"B"==u&&(n+=" at "+f);r=i}return n},animate:function(n,t,i,r,u){var f=n.node,e=this.chart,o;"translate"==t&&(t=i.split(","),i=t[1],o=f.offsetTop,e.animate(n,"left",f.offsetLeft,t[0],r,u,"px"),e.animate(n,"top",o,i,r,u,"px"))},clipRect:function(n,t,i,r,u){n=n.node;0===t&&0===i?(n.style.width=r+"px",n.style.height=u+"px",n.style.overflow="hidden"):n.style.clip="rect("+i+"px "+(t+r)+"px "+(i+u)+"px "+t+"px)"},rotate:function(n,t,i){var r;if(0!==Number(t)){r=n.node;n=r.style;i||(i=this.getBGColor(r.parentNode));n.backgroundColor=i;n.paddingLeft=1;i=t*Math.PI/180;var f=Math.cos(i),e=Math.sin(i),o=AmCharts.removePx(n.left),s=AmCharts.removePx(n.top),u=r.offsetWidth,r=r.offsetHeight;t/=Math.abs(t);n.left=o+u/2-u/2*Math.cos(i)-t*r/2*Math.sin(i)+3;n.top=s-t*u/2*Math.sin(i)+t*r/2*Math.sin(i);n.cssText=n.cssText+"; filter:progid:DXImageTransform.Microsoft.Matrix(M11='"+f+"', M12='"+-e+"', M21='"+e+"', M22='"+f+"', sizingmethod='auto expand');"}},getBGColor:function(n){var t="#FFFFFF",i;return n.style&&(i=n.style.backgroundColor,""!==i?t=i:n.parentNode&&(t=this.getBGColor(n.parentNode))),t},set:function(n){var i=new AmCharts.AmDObject("group",this.D),t;if(this.D.container.appendChild(i.node),n)for(t=0;t<n.length;t++)i.push(n[t]);return i},gradient:function(n,t,i,r){var f="",u,e;for("radialGradient"==t&&(t="gradientradial",i.reverse()),"linearGradient"==t&&(t="gradient"),u=0;u<i.length;u++)e=Math.round(100*u/(i.length-1)),f=f+(e+"% "+i[u]),u<i.length-1&&(f+=",");n=n.fill;90==r?r=0:270==r?r=180:180==r?r=90:0===r&&(r=270);8===document.documentMode?(n.type=t,n.angle=r):(n.setAttribute("type",t),n.setAttribute("angle",r));f&&(n.colors.value=f)},remove:function(n){n.clipPath&&this.D.remove(n.clipPath);this.D.remove(n.node)},disableSelection:function(n){void 0!==typeof n.onselectstart&&(n.onselectstart=function(){return!1});n.style.cursor="default"},pattern:function(n,t){var u=n.node,i=n.fill,r="none";t.color&&(r=t.color);u.fillColor=r;8===document.documentMode?(i.type="tile",i.src=t.url):(i.setAttribute("type","tile"),i.setAttribute("src",t.url))},update:function(){}});AmCharts.SVGRenderer=AmCharts.Class({construct:function(n){this.D=n;this.animations=[]},create:function(n,t){return document.createElementNS(AmCharts.SVG_NS,t)},attr:function(n,t){for(var i in t)t.hasOwnProperty(i)&&this.setAttr(n,i,t[i])},setAttr:function(n,t,i){void 0!==i&&n.node.setAttribute(t,i)},animate:function(n,t,i,r,u){var f=n.node;n["an_"+t]&&AmCharts.removeFromArray(this.animations,n["an_"+t]);"translate"==t?(f=(f=f.getAttribute("transform"))?String(f).substring(10,f.length-1):"0,0",f=f.split(", ").join(" "),f=f.split(" ").join(","),0===f&&(f="0,0")):f=Number(f.getAttribute(t));i={obj:n,frame:0,attribute:t,from:f,to:i,time:r,effect:u};this.animations.push(i);n["an_"+t]=i},update:function(){for(var h=this.animations,f=h.length-1;0<=f;f--){var n=h[f],e=1e3*n.time/AmCharts.updateRate,o=n.frame+1,s=n.obj,u=n.attribute,i,t,r;o<=e?(n.frame++,"translate"==u?(i=n.from.split(","),u=Number(i[0]),i=Number(i[1]),isNaN(i)&&(i=0),t=n.to.split(","),r=Number(t[0]),t=Number(t[1]),r=0==r-u?r:Math.round(AmCharts[n.effect](0,o,u,r-u,e)),n=0==t-i?t:Math.round(AmCharts[n.effect](0,o,i,t-i,e)),u="transform",n="translate("+r+","+n+")"):(t=Number(n.from),i=Number(n.to),r=i-t,n=AmCharts[n.effect](0,o,t,r,e),isNaN(n)&&(n=i),0===r&&this.animations.splice(f,1)),this.setAttr(s,u,n)):("translate"==u?(t=n.to.split(","),r=Number(t[0]),t=Number(t[1]),s.translate(r,t)):(i=Number(n.to),this.setAttr(s,u,i)),this.animations.splice(f,1))}},getBBox:function(n){if(n=n.node)try{return n.getBBox()}catch(t){}return{width:0,height:0,x:0,y:0}},path:function(n,t){n.node.setAttributeNS(AmCharts.SVG_XLINK,"xlink:href",t)},clipRect:function(n,t,i,r,u){var f=n.node,e=n.clipPath,o;e&&this.D.remove(e);o=f.parentNode;o&&(f=document.createElementNS(AmCharts.SVG_NS,"clipPath"),e=AmCharts.getUniqueId(),f.setAttribute("id",e),this.D.rect(t,i,r,u,0,0,f),o.appendChild(f),t="#",AmCharts.baseHref&&!AmCharts.isIE&&(t=window.location.href+t),this.setAttr(n,"clip-path","url("+t+e+")"),this.clipPathC++,n.clipPath=f)},text:function(n,t,i){var r=new AmCharts.AmDObject("text",this.D),e,u,f;for(n=String(n).split("\n"),e=t["font-size"],u=0;u<n.length;u++)f=this.create(null,"tspan"),f.appendChild(document.createTextNode(n[u])),f.setAttribute("y",(e+2)*u+Math.round(e/2)),f.setAttribute("x",0),r.node.appendChild(f);return r.node.setAttribute("y",Math.round(e/2)),this.attr(r,t),this.D.addToContainer(r.node,i),r},setText:function(n,t){var i=n.node;i&&(i.removeChild(i.firstChild),i.appendChild(document.createTextNode(t)))},move:function(n,t,i,r){t="translate("+t+","+i+")";r&&(t=t+" scale("+r+")");this.setAttr(n,"transform",t)},rotate:function(n,t){var r=n.node.getAttribute("transform"),i="rotate("+t+")";r&&(i=r+" "+i);this.setAttr(n,"transform",i)},set:function(n){var i=new AmCharts.AmDObject("g",this.D),t;if(this.D.container.appendChild(i.node),n)for(t=0;t<n.length;t++)i.push(n[t]);return i},addListener:function(n,t,i){n.node["on"+t]=i},gradient:function(n,t,i,r){var o=n.node,f=n.grad;if(f&&this.D.remove(f),t=document.createElementNS(AmCharts.SVG_NS,t),f=AmCharts.getUniqueId(),t.setAttribute("id",f),!isNaN(r)){var u=0,e=0,s=0,h=0;90==r?s=100:270==r?h=100:180==r?u=100:0===r&&(e=100);t.setAttribute("x1",u+"%");t.setAttribute("x2",e+"%");t.setAttribute("y1",s+"%");t.setAttribute("y2",h+"%")}for(r=0;r<i.length;r++)u=document.createElementNS(AmCharts.SVG_NS,"stop"),e=100*r/(i.length-1),0===r&&(e=0),u.setAttribute("offset",e+"%"),u.setAttribute("stop-color",i[r]),t.appendChild(u);o.parentNode.appendChild(t);i="#";AmCharts.baseHref&&!AmCharts.isIE&&(i=window.location.href+i);o.setAttribute("fill","url("+i+f+")");n.grad=t},pattern:function(n,t,i){var h=n.node,r,o,s,u,f;isNaN(i)&&(i=1);r=n.patternNode;r&&this.D.remove(r);var r=document.createElementNS(AmCharts.SVG_NS,"pattern"),c=AmCharts.getUniqueId(),e=t;t.url&&(e=t.url);o=Number(t.width);isNaN(o)&&(o=4);s=Number(t.height);isNaN(s)&&(s=4);o/=i;s/=i;i=t.x;isNaN(i)&&(i=0);u=-Math.random()*Number(t.randomX);isNaN(u)||(i=u);u=t.y;isNaN(u)&&(u=0);f=-Math.random()*Number(t.randomY);isNaN(f)||(u=f);r.setAttribute("id",c);r.setAttribute("width",o);r.setAttribute("height",s);r.setAttribute("patternUnits","userSpaceOnUse");r.setAttribute("xlink:href",e);t.color&&(f=document.createElementNS(AmCharts.SVG_NS,"rect"),f.setAttributeNS(null,"height",o),f.setAttributeNS(null,"width",s),f.setAttributeNS(null,"fill",t.color),r.appendChild(f));this.D.image(e,0,0,o,s,r).translate(i,u);e="#";AmCharts.baseHref&&!AmCharts.isIE&&(e=window.location.href+e);h.setAttribute("fill","url("+e+c+")");n.patternNode=r;h.parentNode.appendChild(r)},remove:function(n){n.clipPath&&this.D.remove(n.clipPath);n.grad&&this.D.remove(n.grad);n.patternNode&&this.D.remove(n.patternNode);this.D.remove(n.node)}});AmCharts.AmDSet=AmCharts.Class({construct:function(){this.create("g")},attr:function(n){this.R.attr(this.node,n)},move:function(n,t){this.R.move(this.node,n,t)}});AmCharts.AmLegend=AmCharts.Class({construct:function(n){this.cname="AmLegend";this.createEvents("rollOverMarker","rollOverItem","rollOutMarker","rollOutItem","showItem","hideItem","clickMarker","rollOverItem","rollOutItem","clickLabel");this.position="bottom";this.borderColor=this.color="#000000";this.borderAlpha=0;this.markerLabelGap=5;this.verticalGap=10;this.align="left";this.horizontalGap=0;this.spacing=10;this.markerDisabledColor="#AAB3B3";this.markerType="square";this.markerSize=16;this.markerBorderThickness=this.markerBorderAlpha=1;this.marginBottom=this.marginTop=0;this.marginLeft=this.marginRight=20;this.autoMargins=!0;this.valueWidth=50;this.switchable=!0;this.switchType="x";this.switchColor="#FFFFFF";this.rollOverColor="#CC0000";this.reversedOrder=!1;this.labelText="[[title]]";this.valueText="[[value]]";this.useMarkerColorForLabels=!1;this.rollOverGraphAlpha=1;this.textClickEnabled=!1;this.equalWidths=!0;this.dateFormat="DD-MM-YYYY";this.backgroundColor="#FFFFFF";this.backgroundAlpha=0;this.useGraphSettings=!1;this.showEntries=!0;AmCharts.applyTheme(this,n,this.cname)},setData:function(n){this.legendData=n;this.invalidateSize()},invalidateSize:function(){this.destroy();this.entries=[];this.valueLabels=[];(AmCharts.ifArray(this.legendData)||AmCharts.ifArray(this.data))&&this.drawLegend()},drawLegend:function(){var n=this.chart,t=this.position,o=this.width,s=n.divRealWidth,i=n.divRealHeight,r=this.div,f=this.legendData,e,u;if(this.data&&(f=this.data),isNaN(this.fontSize)&&(this.fontSize=n.fontSize),"right"==t||"left"==t?(this.maxColumns=1,this.autoMargins&&(this.marginLeft=this.marginRight=10)):this.autoMargins&&(this.marginRight=n.marginRight,this.marginLeft=n.marginLeft,e=n.autoMarginOffset,"bottom"==t?(this.marginBottom=e,this.marginTop=0):(this.marginTop=e,this.marginBottom=0)),void 0!==o?u=AmCharts.toCoordinate(o,s):"right"!=t&&"left"!=t&&(u=n.realWidth),"outside"==t?(u=r.offsetWidth,i=r.offsetHeight,r.clientHeight&&(u=r.clientWidth,i=r.clientHeight)):(isNaN(u)||(r.style.width=u+"px"),r.className="amChartsLegend"),this.divWidth=u,(t=this.container)?(t.container.innerHTML="",r.appendChild(t.container),t.setSize(u,i)):t=new AmCharts.AmDraw(r,u,i,n),this.container=t,this.lx=0,this.ly=8,i=this.markerSize,i>this.fontSize&&(this.ly=i/2-1),0<i&&(this.lx+=i+this.markerLabelGap),this.titleWidth=0,(i=this.title)&&(n=AmCharts.text(this.container,i,this.color,n.fontFamily,this.fontSize,"start",!0),n.translate(this.marginLeft,this.marginTop+this.verticalGap+this.ly+1),n=n.getBBox(),this.titleWidth=n.width+15,this.titleHeight=n.height+6),this.index=this.maxLabelWidth=0,this.showEntries){for(n=0;n<f.length;n++)this.createEntry(f[n]);for(n=this.index=0;n<f.length;n++)this.createValue(f[n])}this.arrangeEntries();this.updateValues()},arrangeEntries:function(){var t=this.position,e=this.marginLeft+this.titleWidth,c=this.marginRight,nt=this.marginTop,it=this.marginBottom,r=this.horizontalGap,tt=this.div,u=this.divWidth,o=this.maxColumns,b=this.verticalGap,d=this.spacing,rt=u-c-e,g=0,v=0,s=this.container,y,h,n,i,f,w,a;for(this.set&&this.set.remove(),y=s.set(),this.set=y,s=s.set(),y.push(s),h=this.entries,i=0;i<h.length;i++)n=h[i].getBBox(),f=n.width,f>g&&(g=f),n=n.height,n>v&&(v=n);var f=v=0,k=r,p=0,l=0;for(i=0;i<h.length;i++)w=h[i],this.reversedOrder&&(w=h[h.length-i-1]),n=w.getBBox(),this.equalWidths?a=r+f*(g+d+this.markerLabelGap):(a=k,k=k+n.width+r+d),n.height>l&&(l=n.height),a+n.width>rt&&0<i&&0!==f&&(v++,f=0,a=r,k=a+n.width+r+d,p=p+l+b,l=0),w.translate(a,p),f++,!isNaN(o)&&f>=o&&(f=0,v++,p=p+l+b,l=0),s.push(w);n=s.getBBox();o=n.height+2*b-1;"left"==t||"right"==t?(u=n.width+2*r,tt.style.width=u+e+c+"px"):u=u-e-c-1;c=AmCharts.polygon(this.container,[0,u,u,0],[0,0,o,o],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha);y.push(c);y.translate(e,nt);c.toBack();e=r;("top"==t||"bottom"==t||"absolute"==t||"outside"==t)&&("center"==this.align?e=r+(u-n.width)/2:"right"==this.align&&(e=r+u-n.width));s.translate(e,b+1);this.titleHeight>o&&(o=this.titleHeight);t=o+nt+it+1;0>t&&(t=0);tt.style.height=Math.round(t)+"px"},createEntry:function(n){var s,a,r,y,f,u,c,i,h;if(!1!==n.visibleInLegend){s=this.chart;a=n.markerType;a||(a=this.markerType);r=n.color;y=n.alpha;n.legendKeyColor&&(r=n.legendKeyColor());n.legendKeyAlpha&&(y=n.legendKeyAlpha());!0===n.hidden&&(f=r=this.markerDisabledColor);u=n.pattern;c=n.customMarker;c||(c=this.customMarker);var o=this.container,t=this.markerSize,e=0,l=0,v=t/2;this.useGraphSettings?(e=n.type,this.switchType=void 0,"line"==e||"step"==e||"smoothedLine"==e||"ohlc"==e)?(u=o.set(),n.hidden||(r=n.lineColorR,f=n.bulletBorderColorR),l=AmCharts.line(o,[0,2*t],[t/2,t/2],r,n.lineAlpha,n.lineThickness,n.dashLength),u.push(l),n.bullet&&(n.hidden||(r=n.bulletColorR),l=AmCharts.bullet(o,n.bullet,n.bulletSize,r,n.bulletAlpha,n.bulletBorderThickness,f,n.bulletBorderAlpha))&&(l.translate(t+1,t/2),u.push(l)),v=0,e=t,l=t/3):(n.getGradRotation&&(i=n.getGradRotation()),e=n.fillColorsR,!0===n.hidden&&(e=r),(u=this.createMarker("rectangle",e,n.fillAlphas,n.lineThickness,r,n.lineAlpha,i,u))&&(v=t,u.translate(v,t/2)),e=t):c?(s.path&&(c=s.path+c),u=o.image(c,0,0,t,t)):(u=this.createMarker(a,r,y,void 0,void 0,void 0,void 0,u))&&u.translate(t/2,t/2);this.addListeners(u,n);o=o.set([u]);this.switchable&&n.switchable&&o.setAttr("cursor","pointer");(f=this.switchType)&&"none"!=f&&("x"==f?(i=this.createX(),i.translate(t/2,t/2)):i=this.createV(),i.dItem=n,!0!==n.hidden?"x"==f?i.hide():i.show():"x"!=f&&i.hide(),this.switchable||i.hide(),this.addListeners(i,n),n.legendSwitch=i,o.push(i));f=this.color;n.showBalloon&&this.textClickEnabled&&void 0!==this.selectedColor&&(f=this.selectedColor);this.useMarkerColorForLabels&&(f=r);!0===n.hidden&&(f=this.markerDisabledColor);r=AmCharts.massReplace(this.labelText,{"[[title]]":n.title});i=this.fontSize;u&&t<=i&&u.translate(v,t/2+this.ly-i/2+(i+2-t)/2-l);r&&(r=AmCharts.fixBrakes(r),n.legendTextReal=r,h=this.labelWidth,h=isNaN(h)?AmCharts.text(this.container,r,f,s.fontFamily,i,"start"):AmCharts.wrappedText(this.container,r,f,s.fontFamily,i,"start",!1,h,0),h.translate(this.lx+e,this.ly),o.push(h),s=h.getBBox().width,this.maxLabelWidth<s&&(this.maxLabelWidth=s));this.entries[this.index]=o;n.legendEntry=this.entries[this.index];n.legendLabel=h;this.index++}},addListeners:function(n,t){var i=this;n&&n.mouseover(function(n){i.rollOverMarker(t,n)}).mouseout(function(n){i.rollOutMarker(t,n)}).click(function(n){i.clickMarker(t,n)})},rollOverMarker:function(n,t){this.switchable&&this.dispatch("rollOverMarker",n,t);this.dispatch("rollOverItem",n,t)},rollOutMarker:function(n,t){this.switchable&&this.dispatch("rollOutMarker",n,t);this.dispatch("rollOutItem",n,t)},clickMarker:function(n,t){this.switchable&&(!0===n.hidden?this.dispatch("showItem",n,t):this.dispatch("hideItem",n,t));this.dispatch("clickMarker",n,t)},rollOverLabel:function(n,t){n.hidden||(this.textClickEnabled&&n.legendLabel&&n.legendLabel.attr({fill:this.rollOverColor}),this.dispatch("rollOverItem",n,t))},rollOutLabel:function(n,t){if(!n.hidden){if(this.textClickEnabled&&n.legendLabel){var i=this.color;void 0!==this.selectedColor&&n.showBalloon&&(i=this.selectedColor);this.useMarkerColorForLabels&&(i=n.lineColor,void 0===i&&(i=n.color));n.legendLabel.attr({fill:i})}this.dispatch("rollOutItem",n,t)}},clickLabel:function(n,t){this.textClickEnabled?n.hidden||this.dispatch("clickLabel",n,t):this.switchable&&(!0===n.hidden?this.dispatch("showItem",n,t):this.dispatch("hideItem",n,t))},dispatch:function(n,t,i){this.fire(n,{type:n,dataItem:t,target:this,event:i,chart:this.chart})},createValue:function(n){var t=this,r=t.fontSize,u,f,i;if(!1!==n.visibleInLegend){if(u=t.maxLabelWidth,t.equalWidths||(t.valueAlign="left"),"left"==t.valueAlign&&(u=n.legendEntry.getBBox().width),f=u,t.valueText&&0<t.valueWidth){i=t.color;t.useMarkerColorForValues&&(i=n.color,n.legendKeyColor&&(i=n.legendKeyColor()));!0===n.hidden&&(i=t.markerDisabledColor);var o=t.valueText,u=u+t.lx+t.markerLabelGap+t.valueWidth,e="end";"left"==t.valueAlign&&(u-=t.valueWidth,e="start");i=AmCharts.text(t.container,o,i,t.chart.fontFamily,r,e);i.translate(u,t.ly);t.entries[t.index].push(i);f+=t.valueWidth+2*t.markerLabelGap;i.dItem=n;t.valueLabels.push(i)}t.index++;i=t.markerSize;i<r+7&&(i=r+7,AmCharts.VML&&(i+=3));r=t.container.rect(t.markerSize,0,f,i,0,0).attr({stroke:"none",fill:"#ffffff","fill-opacity":.005});r.dItem=n;t.entries[t.index-1].push(r);r.mouseover(function(i){t.rollOverLabel(n,i)}).mouseout(function(i){t.rollOutLabel(n,i)}).click(function(i){t.clickLabel(n,i)})}},createV:function(){var n=this.markerSize;return AmCharts.polygon(this.container,[n/5,n/2,n-n/5,n/2],[n/3,n-n/5,n/5,n/1.7],this.switchColor)},createX:function(){var n=(this.markerSize-4)/2,t={stroke:this.switchColor,"stroke-width":3},i=this.container,r=AmCharts.line(i,[-n,n],[-n,n]).attr(t),n=AmCharts.line(i,[-n,n],[n,-n]).attr(t);return this.container.set([r,n])},createMarker:function(n,t,i,r,u,f,e,o){var s=this.markerSize,h=this.container;return u||(u=this.markerBorderColor),u||(u=t),isNaN(r)&&(r=this.markerBorderThickness),isNaN(f)&&(f=this.markerBorderAlpha),AmCharts.bullet(h,n,s,t,i,r,u,f,s,e,o)},validateNow:function(){this.invalidateSize()},updateValues:function(){for(var o=this.valueLabels,e=this.chart,s=this.data,r,i,u=0;u<o.length;u++){var f=o[u],n=f.dItem,t=" ";s?n.value?f.text(n.value):f.text(""):(void 0!==n.type?(r=n.currentDataItem,i=this.periodValueText,n.legendPeriodValueText&&(i=n.legendPeriodValueText),r?(t=this.valueText,n.legendValueText&&(t=n.legendValueText),t=e.formatString(t,r)):i&&(t=e.formatPeriodString(i,n))):t=e.formatString(this.valueText,n),(i=this.valueFunction)&&(r&&(n=r),t=i(n,t)),f.text(t))}},renderFix:function(){if(!AmCharts.VML){var n=this.container;n&&n.renderFix()}},destroy:function(){this.div.innerHTML="";AmCharts.remove(this.set)}});AmCharts.formatMilliseconds=function(n,t){if(-1!=n.indexOf("fff")){var i=t.getMilliseconds(),r=String(i);10>i&&(r="00"+i);10<=i&&100>i&&(r="0"+i);n=n.replace(/fff/g,r)}return n};AmCharts.extractPeriod=function(n){var t=AmCharts.stripNumbers(n),i=1;return t!=n&&(i=Number(n.slice(0,n.indexOf(t)))),{period:t,count:i}};AmCharts.newDate=function(n,t){return date="fff"==t?AmCharts.useUTC?new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()):new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()):new Date(n)};AmCharts.resetDateToMin=function(n,t,i,r){void 0===r&&(r=1);var c,h,s,o,e,f,u;AmCharts.useUTC?(c=n.getUTCFullYear(),h=n.getUTCMonth(),s=n.getUTCDate(),o=n.getUTCHours(),e=n.getUTCMinutes(),f=n.getUTCSeconds(),u=n.getUTCMilliseconds(),n=n.getUTCDay()):(c=n.getFullYear(),h=n.getMonth(),s=n.getDate(),o=n.getHours(),e=n.getMinutes(),f=n.getSeconds(),u=n.getMilliseconds(),n=n.getDay());switch(t){case"YYYY":c=Math.floor(c/i)*i;h=0;s=1;u=f=e=o=0;break;case"MM":h=Math.floor(h/i)*i;s=1;u=f=e=o=0;break;case"WW":0===n&&0<r&&(n=7);s=s-n+r;u=f=e=o=0;break;case"DD":u=f=e=o=0;break;case"hh":o=Math.floor(o/i)*i;u=f=e=0;break;case"mm":e=Math.floor(e/i)*i;u=f=0;break;case"ss":f=Math.floor(f/i)*i;u=0;break;case"fff":u=Math.floor(u/i)*i}return AmCharts.useUTC?(n=new Date,n.setUTCFullYear(c,h,s),n.setUTCHours(o,e,f,u)):n=new Date(c,h,s,o,e,f,u),n};AmCharts.getPeriodDuration=function(n,t){void 0===t&&(t=1);var i;switch(n){case"YYYY":i=316224e5;break;case"MM":i=26784e5;break;case"WW":i=6048e5;break;case"DD":i=864e5;break;case"hh":i=36e5;break;case"mm":i=6e4;break;case"ss":i=1e3;break;case"fff":i=1}return i*t};AmCharts.intervals={s:{nextInterval:"ss",contains:1e3},ss:{nextInterval:"mm",contains:60,count:0},mm:{nextInterval:"hh",contains:60,count:1},hh:{nextInterval:"DD",contains:24,count:2},DD:{nextInterval:"",contains:Infinity,count:3}};AmCharts.getMaxInterval=function(n,t){var i=AmCharts.intervals;return n>=i[t].contains?(n=Math.round(n/i[t].contains),t=i[t].nextInterval,AmCharts.getMaxInterval(n,t)):"ss"==t?i[t].nextInterval:t};AmCharts.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");AmCharts.shortDayNames="Sun Mon Tue Wed Thu Fri Sat".split(" ");AmCharts.monthNames="January February March April May June July August September October November December".split(" ");AmCharts.shortMonthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");AmCharts.getWeekNumber=function(n){n=new Date(n);n.setHours(0,0,0);n.setDate(n.getDate()+4-(n.getDay()||7));var t=new Date(n.getFullYear(),0,1);return Math.ceil(((n-t)/864e5+1)/7)};AmCharts.stringToDate=function(n,t){var i={},r=[{pattern:"YYYY",period:"year"},{pattern:"YY",period:"year"},{pattern:"MM",period:"month"},{pattern:"M",period:"month"},{pattern:"DD",period:"date"},{pattern:"D",period:"date"},{pattern:"JJ",period:"hours"},{pattern:"J",period:"hours"},{pattern:"HH",period:"hours"},{pattern:"H",period:"hours"},{pattern:"KK",period:"hours"},{pattern:"K",period:"hours"},{pattern:"LL",period:"hours"},{pattern:"L",period:"hours"},{pattern:"NN",period:"minutes"},{pattern:"N",period:"minutes"},{pattern:"SS",period:"seconds"},{pattern:"S",period:"seconds"},{pattern:"QQQ",period:"milliseconds"},{pattern:"QQ",period:"milliseconds"},{pattern:"Q",period:"milliseconds"}],h=!0,o=t.indexOf("AA"),f,e,u,s;for(-1!=o&&(n.substr(o,2),"pm"==n.toLowerCase&&(h=!1)),o=t,u=0;u<r.length;u++)e=r[u].period,i[e]=0,"date"==e&&(i[e]=1);for(u=0;u<r.length;u++)(f=r[u].pattern,e=r[u].period,-1!=t.indexOf(f))&&(s=AmCharts.getFromDateString(f,n,o),t=t.replace(f,""),("KK"==f||"K"==f||"LL"==f||"L"==f)&&(h||(s+=12)),i[e]=s);return AmCharts.useUTC?(r=new Date,r.setUTCFullYear(i.year,i.month,i.date),r.setUTCHours(i.hours,i.minutes,i.seconds,i.milliseconds)):r=new Date(i.year,i.month,i.date,i.hours,i.minutes,i.seconds,i.milliseconds),r};AmCharts.getFromDateString=function(n,t,i){if(void 0!==t)return i=i.indexOf(n),t=t.substr(i,n.length),"0"==t.charAt(0)&&(t=t.substr(1,t.length-1)),t=Number(t),isNaN(t)&&(t=0),-1!=n.indexOf("M")&&t--,t};AmCharts.formatDate=function(n,t,i){var a,s,h,l,c,f,e,o,y,v,p,r,u;return i||(i=AmCharts),o=AmCharts.getWeekNumber(n),AmCharts.useUTC?(a=n.getUTCFullYear(),s=n.getUTCMonth(),h=n.getUTCDate(),l=n.getUTCDay(),c=n.getUTCHours(),f=n.getUTCMinutes(),e=n.getUTCSeconds(),n=n.getUTCMilliseconds()):(a=n.getFullYear(),s=n.getMonth(),h=n.getDate(),l=n.getDay(),c=n.getHours(),f=n.getMinutes(),e=n.getSeconds(),n=n.getMilliseconds()),y=String(a).substr(2,2),v=s+1,9>s&&(v="0"+v),p="0"+l,t=t.replace(/W/g,o),o=c,24==o&&(o=0),r=o,10>r&&(r="0"+r),t=t.replace(/JJ/g,r),t=t.replace(/J/g,o),r=c,0===r&&(r=24,-1!=t.indexOf("H")&&h--),o=h,10>h&&(o="0"+h),u=r,10>u&&(u="0"+u),t=t.replace(/HH/g,u),t=t.replace(/H/g,r),r=c,11<r&&(r-=12),u=r,10>u&&(u="0"+u),t=t.replace(/KK/g,u),t=t.replace(/K/g,r),r=c,0===r&&(r=12),12<r&&(r-=12),u=r,10>u&&(u="0"+u),t=t.replace(/LL/g,u),t=t.replace(/L/g,r),r=f,10>r&&(r="0"+r),t=t.replace(/NN/g,r),t=t.replace(/N/g,f),f=e,10>f&&(f="0"+f),t=t.replace(/SS/g,f),t=t.replace(/S/g,e),e=n,10>e&&(e="00"+e),100>e&&(e="0"+e),f=n,10>f&&(f="00"+f),t=t.replace(/QQQ/g,e),t=t.replace(/QQ/g,f),t=t.replace(/Q/g,n),t=12>c?t.replace(/A/g,"am"):t.replace(/A/g,"pm"),t=t.replace(/YYYY/g,"@IIII@"),t=t.replace(/YY/g,"@II@"),t=t.replace(/MMMM/g,"@XXXX@"),t=t.replace(/MMM/g,"@XXX@"),t=t.replace(/MM/g,"@XX@"),t=t.replace(/M/g,"@X@"),t=t.replace(/DD/g,"@RR@"),t=t.replace(/D/g,"@R@"),t=t.replace(/EEEE/g,"@PPPP@"),t=t.replace(/EEE/g,"@PPP@"),t=t.replace(/EE/g,"@PP@"),t=t.replace(/E/g,"@P@"),t=t.replace(/@IIII@/g,a),t=t.replace(/@II@/g,y),t=t.replace(/@XXXX@/g,i.monthNames[s]),t=t.replace(/@XXX@/g,i.shortMonthNames[s]),t=t.replace(/@XX@/g,v),t=t.replace(/@X@/g,s+1),t=t.replace(/@RR@/g,o),t=t.replace(/@R@/g,h),t=t.replace(/@PPPP@/g,i.dayNames[l]),t=t.replace(/@PPP@/g,i.shortDayNames[l]),t=t.replace(/@PP@/g,p),t.replace(/@P@/g,l)};AmCharts.changeDate=function(n,t,i,r,u){var f=-1;void 0===r&&(r=!0);void 0===u&&(u=!1);!0===r&&(f=1);switch(t){case"YYYY":n.setFullYear(n.getFullYear()+i*f);r||u||n.setDate(n.getDate()+1);break;case"MM":t=n.getMonth();n.setMonth(n.getMonth()+i*f);n.getMonth()>t+i*f&&n.setDate(n.getDate()-1);r||u||n.setDate(n.getDate()+1);break;case"DD":n.setDate(n.getDate()+i*f);break;case"WW":n.setDate(n.getDate()+i*f*7);break;case"hh":n.setHours(n.getHours()+i*f);break;case"mm":n.setMinutes(n.getMinutes()+i*f);break;case"ss":n.setSeconds(n.getSeconds()+i*f);break;case"fff":n.setMilliseconds(n.getMilliseconds()+i*f)}return n};AmCharts.AmFunnelChart=AmCharts.Class({inherits:AmCharts.AmSlicedChart,construct:function(n){this.type="funnel";AmCharts.AmFunnelChart.base.construct.call(this,n);this.cname="AmFunnelChart";this.startX=this.startY=0;this.baseWidth="100%";this.neckHeight=this.neckWidth=0;this.rotate=!1;this.valueRepresents="height";this.pullDistance=30;this.labelPosition="center";this.labelText="[[title]]: [[value]]";this.balloonText="[[title]]: [[value]]\n[[description]]";AmCharts.applyTheme(this,n,this.cname)},drawChart:function(){var k,v,t,r,i,s,w,u,l,o,h;if(AmCharts.AmFunnelChart.base.drawChart.call(this),k=this.chartData,AmCharts.ifArray(k))if(0<this.realWidth&&0<this.realHeight){var ot=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180)),d=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180)),g=this.container,ct=this.startDuration,c=this.rotate,nt=this.updateWidth();this.realWidth=nt;v=this.updateHeight();this.realHeight=v;var y=AmCharts.toCoordinate,ft=y(this.marginLeft,nt),rt=y(this.marginRight,nt),n=y(this.marginTop,v)+this.getTitleHeight(),y=y(this.marginBottom,v);0<ot&&0>d&&(this.neckHeight=this.neckWidth=0,c?y-=d/2:n-=d/2);var rt=nt-ft-rt,et=AmCharts.toCoordinate(this.baseWidth,rt),tt=AmCharts.toCoordinate(this.neckWidth,rt),it=v-y-n,p=AmCharts.toCoordinate(this.neckHeight,it),a=n+it-p;c&&(n=v-y,a=n-it+p);this.firstSliceY=n;AmCharts.VML&&(this.startAlpha=1);for(var f=rt/2+ft,ut=(it-p)/((et-tt)/2),st=1,e=et/2,et=(it-p)*(et+tt)/2+tt*p,b=n,ht=0,p=0;p<k.length;p++)if(t=k[p],!0!==t.hidden){if(o=[],u=[],"height"==this.valueRepresents?i=it*t.percents/100:(s=-et*t.percents/200,w=e,r=-1/(2*ut),i=Math.pow(w,2)-4*r*s,0>i&&(i=0),i=(Math.sqrt(i)-w)/(2*r),!c&&n>=a||c&&n<=a?i=2*-s/tt:(!c&&n+i>a||c&&n-i<a)&&(r=c?Math.round(i+(n-i-a)):Math.round(i-(n+i-a)),i=r/ut,i=r+2*(-s-(w-i/2)*r)/tt)),s=e-i/ut,w=!1,!c&&n+i>a||c&&n-i<a?(s=tt/2,o.push(f-e,f+e,f+s,f+s,f-s,f-s),c?(r=i+(n-i-a),n<a&&(r=0),u.push(n,n,n-r,n-i,n-i,n-r,n)):(r=i-(n+i-a),n>a&&(r=0),u.push(n,n,n+r,n+i,n+i,n+r,n)),w=!0):(o.push(f-e,f+e,f+s,f-s),c?u.push(n,n,n-i,n-i):u.push(n,n,n+i,n+i)),g.set(),r=g.set(),0<ot&&0>d?(o=s/e,u=-1,c||(u=1),wedgeGraphics=new AmCharts.Cuboid(g,2*e,u*i,ot,d*st,t.color,t.alpha,this.outlineThickness,this.outlineColor,this.outlineAlpha,90,0,!1,0,t.pattern,o).set,wedgeGraphics.translate(f-e,n-d/2*st),st*=o):wedgeGraphics=AmCharts.polygon(g,o,u,t.color,t.alpha,this.outlineThickness,this.outlineColor,this.outlineAlpha),r.push(wedgeGraphics),this.graphsSet.push(r),c||r.toBack(),t.wedge=r,t.index=p,o=this.gradientRatio){for(u=[],l=0;l<o.length;l++)u.push(AmCharts.adjustLuminosity(t.color,o[l]));0<u.length&&wedgeGraphics.gradient("linearGradient",u);t.pattern&&wedgeGraphics.pattern(t.pattern)}0<ct&&(this.chartCreated||r.setAttr("opacity",this.startAlpha));this.addEventListeners(r,t);t.ty0=n-i/2;this.labelsEnabled&&this.labelText&&t.percents>=this.hideLabelsPercent&&(u=this.formatString(this.labelText,t),(o=this.labelFunction)&&(u=o(t,u)),l=t.labelColor,l||(l=this.color),o=this.labelPosition,h="left","center"==o&&(h="middle"),"left"==o&&(h="right"),u=AmCharts.wrappedText(g,u,l,this.fontFamily,this.fontSize,h,!1,this.maxLabelWidth),u.node.style.pointerEvents="none",r.push(u),l=f,c?(h=n-i/2,t.ty0=h):(h=n+i/2,t.ty0=h,h<b+ht+5&&(h=b+ht+5),h>v-y&&(h=v-y)),"right"==o&&(l=rt+10+ft,t.tx0=f+(e-i/2/ut),w&&(t.tx0=f+s)),"left"==o&&(t.tx0=f-(e-i/2/ut),w&&(t.tx0=f-s),l=ft),t.label=u,t.labelX=l,t.labelY=h,t.labelHeight=u.getBBox().height,u.translate(l,h),e=u.getBBox(),b=AmCharts.rect(g,e.width+5,e.height+5,"#ffffff",.005),b.translate(l+e.x,h+e.y),r.push(b),t.hitRect=b,ht=u.getBBox().height,b=h);(0===t.alpha||0<ct&&!this.chartCreated)&&r.hide();n=c?n-i:n+i;e=s;t.startX=AmCharts.toCoordinate(this.startX,nt);t.startY=AmCharts.toCoordinate(this.startY,v);t.pullX=AmCharts.toCoordinate(this.pullDistance,nt);t.pullY=0;t.balloonX=f;t.balloonY=t.ty0}this.arrangeLabels();this.initialStart();(k=this.legend)&&k.invalidateSize()}else this.cleanChart();this.dispDUpd();this.chartCreated=!0},arrangeLabels:function(){var c=this.rotate,i,h;i=c?0:this.realHeight;for(var u=0,l=this.chartData,a=l.length,n,f=0;f<a;f++){n=l[a-f-1];var e=n.label,o=n.labelY,r=n.labelX,s=n.labelHeight,t=o;c?i+u+5>o&&(t=i+u+5):o+s+5>i&&(t=i-5-s);i=t;u=s;e&&(e.translate(r,t),h=e.getBBox());n.hitRect.translate(r+h.x,t+h.y);n.labelY=t;n.tx=r;n.ty=t;n.tx2=r}"center"!=this.labelPosition&&this.drawTicks()}});AmCharts.Cuboid=AmCharts.Class({construct:function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this.set=n.set();this.container=n;this.h=Math.round(i);this.w=Math.round(t);this.dx=r;this.dy=u;this.colors=f;this.alpha=e;this.bwidth=o;this.bcolor=s;this.balpha=h;this.dashLength=v;this.topRadius=p;this.pattern=y;(this.rotate=a)?0>t&&0===c&&(c=180):0>i&&270==c&&(c=90);this.gradientRotation=c;0===r&&0===u&&(this.cornerRadius=l);this.draw()},draw:function(){var at=this.set,b,tt,rt,ut,ft,et,a,ot,st,yt,h,y,p,d,nt,ht,ct,lt;at.clear();var i=this.container,t=this.w,n=this.h,u=this.dx,f=this.dy,l=this.colors,r=this.alpha,e=this.bwidth,o=this.bcolor,s=this.balpha,g=this.gradientRotation,vt=this.cornerRadius,k=this.dashLength,it=this.pattern,w=this.topRadius,v=l,c=l;for("object"==typeof l&&(v=l[0],c=l[l.length-1]),yt=r,it&&(r=0),nt=this.rotate,(0<Math.abs(u)||0<Math.abs(f))&&(isNaN(w)?(a=c,c=AmCharts.adjustLuminosity(v,-.2),c=AmCharts.adjustLuminosity(v,-.2),b=AmCharts.polygon(i,[0,u,t+u,t,0],[0,f,f,0,0],c,r,1,o,0,g),0<s&&(st=AmCharts.line(i,[0,u,t+u],[0,f,f],o,s,e,k)),tt=AmCharts.polygon(i,[0,0,t,t,0],[0,n,n,0,0],c,r,1,o,0,g),tt.translate(u,f),0<s&&(rt=AmCharts.line(i,[u,u],[f,f+n],o,s,e,k)),ut=AmCharts.polygon(i,[0,0,u,u,0],[0,n,n+f,f,0],c,r,1,o,0,g),ft=AmCharts.polygon(i,[t,t,t+u,t+u,t],[0,n,n+f,f,0],c,r,1,o,0,g),0<s&&(et=AmCharts.line(i,[t,t+u,t+u,t],[0,f,n+f,n],o,s,e,k)),c=AmCharts.adjustLuminosity(a,.2),a=AmCharts.polygon(i,[0,u,t+u,t,0],[n,n+f,n+f,n,n],c,r,1,o,0,g),0<s&&(ot=AmCharts.line(i,[0,u,t+u],[n,n+f,n+f],o,s,e,k))):(nt?(ht=n/2,c=u/2,lt=n/2,ct=t+u/2,y=Math.abs(n/2),h=Math.abs(u/2)):(c=t/2,ht=f/2,ct=t/2,lt=n+f/2+1,h=Math.abs(t/2),y=Math.abs(f/2)),p=h*w,d=y*w,.1<h&&.1<h&&(b=AmCharts.circle(i,h,v,r,e,o,s,!1,y),b.translate(c,ht)),.1<p&&.1<p&&(a=AmCharts.circle(i,p,AmCharts.adjustLuminosity(v,.5),r,e,o,s,!1,d),a.translate(ct,lt)))),r=yt,1>Math.abs(n)&&(n=0),1>Math.abs(t)&&(t=0),!isNaN(w)&&(0<Math.abs(u)||0<Math.abs(f))?(l=[v],l={fill:l,stroke:o,"stroke-width":e,"stroke-opacity":s,"fill-opacity":r},nt?(r="M0,0 L"+t+","+(n/2-n/2*w),e=" B",0<t&&(e=" A"),AmCharts.VML?(r+=e+Math.round(t-p)+","+Math.round(n/2-d)+","+Math.round(t+p)+","+Math.round(n/2+d)+","+t+",0,"+t+","+n,r=r+(" L0,"+n)+(e+Math.round(-h)+","+Math.round(n/2-y)+","+Math.round(h)+","+Math.round(n/2+y)+",0,"+n+",0,0")):(r+="A"+p+","+d+",0,0,0,"+t+","+(n-n/2*(1-w))+"L0,"+n,r+="A"+h+","+y+",0,0,1,0,0"),h=90):(e=t/2-t/2*w,r="M0,0 L"+e+","+n,AmCharts.VML?(r="M0,0 L"+e+","+n,e=" B",0>n&&(e=" A"),r+=e+Math.round(t/2-p)+","+Math.round(n-d)+","+Math.round(t/2+p)+","+Math.round(n+d)+",0,"+n+","+t+","+n,r+=" L"+t+",0",r+=e+Math.round(t/2+h)+","+Math.round(y)+","+Math.round(t/2-h)+","+Math.round(-y)+","+t+",0,0,0"):(r+="A"+p+","+d+",0,0,0,"+(t-t/2*(1-w))+","+n+"L"+t+",0",r+="A"+h+","+y+",0,0,1,0,0"),h=180),i=i.path(r).attr(l),i.gradient("linearGradient",[v,AmCharts.adjustLuminosity(v,-.3),AmCharts.adjustLuminosity(v,-.3),v],h),nt?i.translate(u/2,0):i.translate(0,f/2)):i=0===n?AmCharts.line(i,[0,t],[0,0],o,s,e,k):0===t?AmCharts.line(i,[0,0],[0,n],o,s,e,k):0<vt?AmCharts.rect(i,t,n,l,r,e,o,s,vt,g,k):AmCharts.polygon(i,[0,0,t,t,0],[0,n,n,0,0],l,r,e,o,s,g,!1,k),t=isNaN(w)?0>n?[b,st,tt,rt,ut,ft,et,a,ot,i]:[a,ot,tt,rt,ut,ft,b,st,et,i]:nt?0<t?[b,i,a]:[a,i,b]:0>n?[b,i,a]:[a,i,b],n=0;n<t.length;n++)(u=t[n])&&at.push(u);it&&i.pattern(it)},width:function(n){this.w=Math.round(n);this.draw()},height:function(n){this.h=Math.round(n);this.draw()},animateHeight:function(n,t){var i=this;i.easing=t;i.totalFrames=Math.round(1e3*n/AmCharts.updateRate);i.rh=i.h;i.frame=0;i.height(1);setTimeout(function(){i.updateHeight.call(i)},AmCharts.updateRate)},updateHeight:function(){var n=this,t;n.frame++;t=n.totalFrames;n.frame<=t&&(t=n.easing(0,n.frame,1,n.rh-1,t),n.height(t),setTimeout(function(){n.updateHeight.call(n)},AmCharts.updateRate))},animateWidth:function(n,t){var i=this;i.easing=t;i.totalFrames=Math.round(1e3*n/AmCharts.updateRate);i.rw=i.w;i.frame=0;i.width(1);setTimeout(function(){i.updateWidth.call(i)},AmCharts.updateRate)},updateWidth:function(){var n=this,t;n.frame++;t=n.totalFrames;n.frame<=t&&(t=n.easing(0,n.frame,1,n.rw-1,t),n.width(t),setTimeout(function(){n.updateWidth.call(n)},AmCharts.updateRate))}});AmCharts.GaugeAxis=AmCharts.Class({construct:function(n){this.cname="GaugeAxis";this.radius="95%";this.startAngle=-120;this.endAngle=120;this.startValue=0;this.endValue=200;this.gridCount=5;this.tickLength=10;this.minorTickLength=5;this.tickColor="#555555";this.labelFrequency=this.tickThickness=this.tickAlpha=1;this.inside=!0;this.labelOffset=10;this.showLastLabel=this.showFirstLabel=!0;this.axisThickness=1;this.axisColor="#000000";this.axisAlpha=1;this.gridInside=!0;this.topTextYOffset=0;this.topTextBold=!0;this.bottomTextYOffset=0;this.bottomTextBold=!0;this.centerY=this.centerX="0%";this.bandOutlineAlpha=this.bandOutlineThickness=0;this.bandOutlineColor="#000000";this.bandAlpha=1;AmCharts.applyTheme(this,n,"GaugeAxis")},value2angle:function(n){return(n-this.startValue)/(this.endValue-this.startValue)*(this.endAngle-this.startAngle)+this.startAngle},setTopText:function(n){var t,i,r;void 0!==n&&(this.topText=n,t=this.chart,this.axisCreated&&(this.topTF&&this.topTF.remove(),i=this.topTextFontSize,i||(i=t.fontSize),r=this.topTextColor,r||(r=t.color),n=AmCharts.text(t.container,n,r,t.fontFamily,i,void 0,this.topTextBold),n.translate(this.centerXReal,this.centerYReal-this.radiusReal/2+this.topTextYOffset),this.chart.graphsSet.push(n),this.topTF=n))},setBottomText:function(n){var t,i,r;void 0!==n&&(this.bottomText=n,t=this.chart,this.axisCreated&&(this.bottomTF&&this.bottomTF.remove(),i=this.bottomTextFontSize,i||(i=t.fontSize),r=this.bottomTextColor,r||(r=t.color),n=AmCharts.text(t.container,n,r,t.fontFamily,i,void 0,this.bottomTextBold),n.translate(this.centerXReal,this.centerYReal+this.radiusReal/2+this.bottomTextYOffset),this.bottomTF=n,this.chart.graphsSet.push(n)))},draw:function(){var t=this.chart,w=t.graphsSet,b=this.startValue,ut=this.endValue,n=this.valueInterval,y,l,a,ct,r,k,f,u,s,at,it,rt;isNaN(n)&&(n=(ut-b)/this.gridCount);y=this.minorTickInterval;isNaN(y)&&(y=n/5);var ft=this.startAngle,u=this.endAngle,i=this.tickLength,p=(ut-b)/n+1,et=(u-ft)/(p-1);this.singleValueAngle=ut=et/n;var ot=t.container,c=this.tickColor,d=this.tickAlpha,g=this.tickThickness,nt=n/y,st=et/nt,y=this.minorTickLength,lt=this.labelFrequency,e=this.radiusReal;for(this.inside||(e-=15),l=t.centerX+AmCharts.toCoordinate(this.centerX,t.realWidth),a=t.centerY+AmCharts.toCoordinate(this.centerY,t.realHeight),this.centerXReal=l,this.centerYReal=a,ct={fill:this.axisColor,"fill-opacity":this.axisAlpha,"stroke-width":0,"stroke-opacity":0},this.gridInside?k=r=e:(r=e-i,k=r+y),f=this.axisThickness/2,u=AmCharts.wedge(ot,l,a,ft,u-ft,r+f,r+f,r-f,0,ct),w.push(u),u=AmCharts.doNothing,AmCharts.isModern||(u=Math.round),ct=AmCharts.getDecimals(n),r=0;r<p;r++){var o=b+r*n,f=ft+r*et,h=u(l+e*Math.sin(f/180*Math.PI)),ht=u(a-e*Math.cos(f/180*Math.PI)),v=u(l+(e-i)*Math.sin(f/180*Math.PI)),s=u(a-(e-i)*Math.cos(f/180*Math.PI)),h=AmCharts.line(ot,[h,v],[ht,s],c,d,g,0,!1,!1,!0);w.push(h);h=-1;v=this.labelOffset;this.inside||(v=-v-i,h=1);var ht=Math.sin(f/180*Math.PI),s=Math.cos(f/180*Math.PI),ht=l+(e-i-v)*ht,v=a-(e-i-v)*s,tt=this.fontSize;if(isNaN(tt)&&(tt=t.fontSize),s=Math.sin((f-90)/180*Math.PI),at=Math.cos((f-90)/180*Math.PI),0<lt&&r/lt==Math.round(r/lt)&&(this.showLastLabel||r!=p-1)&&(this.showFirstLabel||0!==r)&&(it=this.usePrefixes?AmCharts.addPrefix(o,t.prefixesOfBigNumbers,t.prefixesOfSmallNumbers,t.nf,!0):AmCharts.formatNumber(o,t.nf,ct),rt=this.unit,rt&&(it="left"==this.unitPosition?rt+it:it+rt),(rt=this.labelFunction)&&(it=rt(o)),o=AmCharts.text(ot,it,t.color,t.fontFamily,tt),tt=o.getBBox(),o.translate(ht+h*tt.width/2*at,v+h*tt.height/2*s),w.push(o)),r<p-1)for(o=1;o<nt;o++)s=f+st*o,h=u(l+k*Math.sin(s/180*Math.PI)),ht=u(a-k*Math.cos(s/180*Math.PI)),v=u(l+(k-y)*Math.sin(s/180*Math.PI)),s=u(a-(k-y)*Math.cos(s/180*Math.PI)),h=AmCharts.line(ot,[h,v],[ht,s],c,d,g,0,!1,!1,!0),w.push(h)}if(w=this.bands)for(b=0;b<w.length;b++)(n=w[b])&&(c=n.startValue,d=n.endValue,i=AmCharts.toCoordinate(n.radius,e),isNaN(i)&&(i=k),p=AmCharts.toCoordinate(n.innerRadius,e),isNaN(p)&&(p=i-y),et=ft+ut*(c-this.startValue),d=ut*(d-c),g=n.outlineColor,void 0==g&&(g=this.bandOutlineColor),nt=n.outlineThickness,isNaN(nt)&&(nt=this.bandOutlineThickness),st=n.outlineAlpha,isNaN(st)&&(st=this.bandOutlineAlpha),c=n.alpha,isNaN(c)&&(c=this.bandAlpha),i=AmCharts.wedge(ot,l,a,et,d,i,i,p,0,{fill:n.color,stroke:g,"stroke-width":nt,"stroke-opacity":st}),i.setAttr("opacity",c),t.gridSet.push(i),this.addEventListeners(i,n));this.axisCreated=!0;this.setTopText(this.topText);this.setBottomText(this.bottomText);t=t.graphsSet.getBBox();this.width=t.width;this.height=t.height},addEventListeners:function(n,t){var i=this.chart;n.mouseover(function(){i.showBalloon(t.balloonText,t.color,!0)}).mouseout(function(){i.hideBalloon()})}});AmCharts.GaugeArrow=AmCharts.Class({construct:function(n){this.cname="GaugeArrow";this.color="#000000";this.nailAlpha=this.alpha=1;this.startWidth=this.nailRadius=8;this.endWidth=0;this.borderAlpha=1;this.radius="90%";this.nailBorderAlpha=this.innerRadius=0;this.nailBorderThickness=1;this.frame=0;AmCharts.applyTheme(this,n,"GaugeArrow")},setValue:function(n){var t=this.chart;t?t.setValue?t.setValue(this,n):this.previousValue=this.value=n:this.previousValue=this.value=n}});AmCharts.GaugeBand=AmCharts.Class({construct:function(){this.cname="GaugeBand"}});AmCharts.AmAngularGauge=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(n){this.cname="AmAngularGauge";AmCharts.AmAngularGauge.base.construct.call(this,n);this.theme=n;this.type="gauge";this.minRadius=this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=10;this.faceColor="#FAFAFA";this.faceAlpha=0;this.faceBorderWidth=1;this.faceBorderColor="#555555";this.faceBorderAlpha=0;this.arrows=[];this.axes=[];this.startDuration=1;this.startEffect="easeOutSine";this.adjustSize=!0;this.extraHeight=this.extraWidth=0;AmCharts.applyTheme(this,n,this.cname)},addAxis:function(n){this.axes.push(n)},formatString:function(n,t){return AmCharts.formatValue(n,t,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers)},initChart:function(){var n,t,i,r;for(AmCharts.AmAngularGauge.base.initChart.call(this),0===this.axes.length&&(n=new AmCharts.GaugeAxis(this.theme),this.addAxis(n)),t=0;t<this.axes.length;t++)n=this.axes[t],n=AmCharts.processObject(n,AmCharts.GaugeAxis,this.theme),n.chart=this,this.axes[t]=n;for(i=this.arrows,t=0;t<i.length;t++)n=i[t],n=AmCharts.processObject(n,AmCharts.GaugeArrow,this.theme),n.chart=this,i[t]=n,r=n.axis,AmCharts.isString(r)&&(n.axis=AmCharts.getObjById(this.axes,r)),n.axis||(n.axis=this.axes[0]),isNaN(n.value)&&n.setValue(n.axis.startValue),isNaN(n.previousValue)&&(n.previousValue=n.axis.startValue);this.setLegendData(i);this.drawChart();this.totalFrames=1e3*this.startDuration/AmCharts.updateRate},drawChart:function(){var u,t,n,r;AmCharts.AmAngularGauge.base.drawChart.call(this);u=this.container;t=this.updateWidth();this.realWidth=t;n=this.updateHeight();this.realHeight=n;var f=AmCharts.toCoordinate,e=f(this.marginLeft,t),o=f(this.marginRight,t),h=f(this.marginTop,n)+this.getTitleHeight(),c=f(this.marginBottom,n),i=f(this.radius,t,n),f=t-e-o,s=n-h-c+this.extraHeight;for(i||(i=Math.min(f,s)/2),i<this.minRadius&&(i=this.minRadius),this.radiusReal=i,this.centerX=(t-e-o)/2+e,this.centerY=(n-h-c)/2+h+this.extraHeight/2,isNaN(this.gaugeX)||(this.centerX=this.gaugeX),isNaN(this.gaugeY)||(this.centerY=this.gaugeY),t=this.faceAlpha,n=this.faceBorderAlpha,(0<t||0<n)&&(r=AmCharts.circle(u,i,this.faceColor,t,this.faceBorderWidth,this.faceBorderColor,n,!1),r.translate(this.centerX,this.centerY),r.toBack(),(u=this.facePattern)&&r.pattern(u)),t=i=u=0;t<this.axes.length;t++)n=this.axes[t],e=n.radius,n.radiusReal=AmCharts.toCoordinate(e,this.radiusReal),n.draw(),o=1,-1!==String(e).indexOf("%")&&(o=1+(100-Number(e.substr(0,e.length-1)))/100),n.width*o>u&&(u=n.width*o),n.height*o>i&&(i=n.height*o);(t=this.legend)&&t.invalidateSize();this.adjustSize&&!this.chartCreated&&(r&&(r=r.getBBox(),r.width>u&&(u=r.width),r.height>i&&(i=r.height)),r=0,(s>i||f>u)&&(r=Math.min(s-i,f-u)),0<r&&(this.extraHeight=s-i,this.chartCreated=!0,this.validateNow()));this.dispDUpd();this.chartCreated=!0},validateSize:function(){this.extraHeight=this.extraWidth=0;this.chartCreated=!1;AmCharts.AmAngularGauge.base.validateSize.call(this)},addArrow:function(n){this.arrows.push(n)},removeArrow:function(n){AmCharts.removeFromArray(this.arrows,n);this.validateNow()},removeAxis:function(n){AmCharts.removeFromArray(this.axes,n);this.validateNow()},drawArrow:function(n,t){var f,i,a;if(n.set&&n.set.remove(),f=this.container,n.set=f.set(),!n.hidden){var r=n.axis,e=r.radiusReal,o=r.centerXReal,s=r.centerYReal,h=n.startWidth,c=n.endWidth,l=AmCharts.toCoordinate(n.innerRadius,r.radiusReal),u=AmCharts.toCoordinate(n.radius,r.radiusReal);r.inside||(u-=15);i=n.nailColor;i||(i=n.color);a=n.nailColor;a||(a=n.color);i=AmCharts.circle(f,n.nailRadius,i,n.nailAlpha,n.nailBorderThickness,i,n.nailBorderAlpha);n.set.push(i);i.translate(o,s);isNaN(u)&&(u=e-r.tickLength);var r=Math.sin(t/180*Math.PI),e=Math.cos(t/180*Math.PI),i=Math.sin((t+90)/180*Math.PI),v=Math.cos((t+90)/180*Math.PI),f=AmCharts.polygon(f,[o-h/2*i+l*r,o+u*r-c/2*i,o+u*r+c/2*i,o+h/2*i+l*r],[s+h/2*v-l*e,s-u*e+c/2*v,s-u*e-c/2*v,s-h/2*v-l*e],n.color,n.alpha,1,a,n.borderAlpha,void 0,!0);n.set.push(f);this.graphsSet.push(n.set)}},setValue:function(n,t){n.axis&&n.axis.value2angle&&(n.axis.value2angle(t),n.frame=0,n.previousValue=n.value);n.value=t;var i=this.legend;i&&i.updateValues()},handleLegendEvent:function(n){var t=n.type;if(n=n.dataItem,!this.legend.data&&n)switch(t){case"hideItem":this.hideArrow(n);break;case"showItem":this.showArrow(n)}},hideArrow:function(n){n.set.hide();n.hidden=!0},showArrow:function(n){n.set.show();n.hidden=!1},updateAnimations:function(){var r,n,i,t;for(AmCharts.AmAngularGauge.base.updateAnimations.call(this),r=this.arrows.length,i=0;i<r;i++)n=this.arrows[i],n.frame>=this.totalFrames?t=n.value:(n.frame++,n.clockWiseOnly&&n.value<n.previousValue&&(t=n.axis,n.previousValue-=t.endValue-t.startValue),t=AmCharts.getEffect(this.startEffect),t=AmCharts[t](0,n.frame,n.previousValue,n.value-n.previousValue,this.totalFrames),isNaN(t)&&(t=n.value)),t=n.axis.value2angle(t),this.drawArrow(n,t)}});AmCharts.AmPieChart=AmCharts.Class({inherits:AmCharts.AmSlicedChart,construct:function(n){this.type="pie";AmCharts.AmPieChart.base.construct.call(this,n);this.cname="AmPieChart";this.pieBrightnessStep=30;this.minRadius=10;this.depth3D=0;this.startAngle=90;this.angle=this.innerRadius=0;this.startRadius="500%";this.pullOutRadius="20%";this.labelRadius=20;this.labelText="[[title]]: [[percents]]%";this.balloonText="[[title]]: [[percents]]% ([[value]])\n[[description]]";this.previousScale=1;AmCharts.applyTheme(this,n,this.cname)},drawChart:function(){var y,r,g,h,tt,i,c;if(AmCharts.AmPieChart.base.drawChart.call(this),y=this.chartData,AmCharts.ifArray(y)){if(0<this.realWidth&&0<this.realHeight){AmCharts.VML&&(this.startAlpha=1);var rt=this.startDuration,it=this.container,f=this.updateWidth();this.realWidth=f;r=this.updateHeight();this.realHeight=r;var u=AmCharts.toCoordinate,l=u(this.marginLeft,f),n=u(this.marginRight,f),w=u(this.marginTop,r)+this.getTitleHeight(),s=u(this.marginBottom,r),b,k,t,p=AmCharts.toNumber(this.labelRadius),a=this.measureMaxLabel();for(a>this.maxLabelWidth&&(a=this.maxLabelWidth),this.labelText&&this.labelsEnabled||(p=a=0),b=void 0===this.pieX?(f-l-n)/2+l:u(this.pieX,this.realWidth),k=void 0===this.pieY?(r-w-s)/2+w:u(this.pieY,r),t=u(this.radius,f,r),t||(f=0<=p?f-l-n-2*a:f-l-n,r=r-w-s,t=Math.min(f,r),r<f&&(t/=1-this.angle/90,t>f&&(t=f)),r=AmCharts.toCoordinate(this.pullOutRadius,t),t=(0<=p?t-1.8*(p+r):t-1.8*r)/2),t<this.minRadius&&(t=this.minRadius),r=u(this.pullOutRadius,t),w=AmCharts.toCoordinate(this.startRadius,t),u=u(this.innerRadius,t),u>=t&&(u=t-1),s=AmCharts.fitToBounds(this.startAngle,0,360),0<this.depth3D&&(s=270<=s?270:90),s-=90,f=t-t*this.angle/90,l=0;l<y.length;l++)if(n=y[l],!0!==n.hidden&&0<n.percents){var o=360*n.percents/100,a=Math.sin((s+o/2)/180*Math.PI),d=-Math.cos((s+o/2)/180*Math.PI)*(f/t),e=this.outlineColor;if(e||(e=n.color),g=this.alpha,isNaN(n.alpha)||(g=n.alpha),e={fill:n.color,stroke:e,"stroke-width":this.outlineThickness,"stroke-opacity":this.outlineAlpha,"fill-opacity":g},n.url&&(e.cursor="pointer"),e=AmCharts.wedge(it,b,k,s,o,t,f,u,this.depth3D,e,this.gradientRatio,n.pattern),this.addEventListeners(e,n),n.startAngle=s,y[l].wedge=e,0<rt&&(this.chartCreated||e.setAttr("opacity",this.startAlpha)),n.ix=a,n.iy=d,n.wedge=e,n.index=l,this.labelsEnabled&&this.labelText&&n.percents>=this.hideLabelsPercent){i=s+o/2;360<i&&(i-=360);h=p;isNaN(n.labelRadius)||(h=n.labelRadius);var o=b+a*(t+h),g=k+d*(t+h),nt,v=0;0<=h?(90>=i&&0<=i?(tt=0,nt="start",v=8):90<=i&&180>i?(tt=1,nt="start",v=8):180<=i&&270>i?(tt=2,nt="end",v=-8):270<=i&&360>i&&(tt=3,nt="end",v=-8),n.labelQuarter=tt):nt="middle";i=this.formatString(this.labelText,n);c=this.labelFunction;c&&(i=c(n,i));c=n.labelColor;c||(c=this.color);i=AmCharts.wrappedText(it,i,c,this.fontFamily,this.fontSize,nt,!1,this.maxLabelWidth);i.translate(o+1.5*v,g);i.node.style.pointerEvents="none";n.tx=o+1.5*v;n.ty=g;0<=h?(h=i.getBBox(),c=AmCharts.rect(it,h.width+5,h.height+5,"#FFFFFF",.005),c.translate(o+1.5*v+h.x,g+h.y),n.hitRect=c,e.push(i),e.push(c)):this.freeLabelsSet.push(i);n.label=i;n.tx=o;n.tx2=o+v;n.tx0=b+a*t;n.ty0=k+d*t}o=u+(t-u)/2;n.pulled&&(o+=this.pullOutRadiusReal);n.balloonX=a*o+b;n.balloonY=d*o+k;n.startX=Math.round(a*w);n.startY=Math.round(d*w);n.pullX=Math.round(a*r);n.pullY=Math.round(d*r);this.graphsSet.push(e);(0===n.alpha||0<rt&&!this.chartCreated)&&e.hide();s+=360*n.percents/100}0<p&&!this.labelRadiusField&&this.arrangeLabels();this.pieXReal=b;this.pieYReal=k;this.radiusReal=t;this.innerRadiusReal=u;0<p&&this.drawTicks();this.initialStart();this.setDepths()}(y=this.legend)&&y.invalidateSize()}else this.cleanChart();this.dispDUpd();this.chartCreated=!0},setDepths:function(){for(var i=this.chartData,t=0;t<i.length;t++){var n=i[t],r=n.wedge,n=n.startAngle;0<=n&&180>n?r.toFront():180<=n&&r.toBack()}},arrangeLabels:function(){for(var i=this.chartData,r=i.length,t,n=r-1;0<=n;n--)t=i[n],0!==t.labelQuarter||t.hidden||this.checkOverlapping(n,t,0,!0,0);for(n=0;n<r;n++)t=i[n],1!=t.labelQuarter||t.hidden||this.checkOverlapping(n,t,1,!1,0);for(n=r-1;0<=n;n--)t=i[n],2!=t.labelQuarter||t.hidden||this.checkOverlapping(n,t,2,!0,0);for(n=0;n<r;n++)t=i[n],3!=t.labelQuarter||t.hidden||this.checkOverlapping(n,t,3,!1,0)},checkOverlapping:function(n,t,i,r,u){var e,f,s=this.chartData,h=s.length,o=t.label;if(o){if(!0===r)for(f=n+1;f<h;f++)s[f].labelQuarter==i&&(e=this.checkOverlappingReal(t,s[f],i))&&(f=h);else for(f=n-1;0<=f;f--)s[f].labelQuarter==i&&(e=this.checkOverlappingReal(t,s[f],i))&&(f=0);!0===e&&100>u&&(e=t.ty+3*t.iy,t.ty=e,o.translate(t.tx2,e),t.hitRect&&(o=o.getBBox(),t.hitRect.translate(t.tx2+o.x,e+o.y)),this.checkOverlapping(n,t,i,r,u+1))}},checkOverlappingReal:function(n,t,i){var f=!1,u=n.label,r=t.label;return n.labelQuarter!=i||n.hidden||t.hidden||!r||(u=u.getBBox(),i={},i.width=u.width,i.height=u.height,i.y=n.ty,i.x=n.tx,n=r.getBBox(),r={},r.width=n.width,r.height=n.height,r.y=t.ty,r.x=t.tx,AmCharts.hitTest(i,r)&&(f=!0)),f}});AmCharts.AmRadarChart=AmCharts.Class({inherits:AmCharts.AmCoordinateChart,construct:function(n){this.type="radar";AmCharts.AmRadarChart.base.construct.call(this,n);this.cname="AmRadarChart";this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=0;this.radius="35%";AmCharts.applyTheme(this,n,this.cname)},initChart:function(){AmCharts.AmRadarChart.base.initChart.call(this);this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);this.drawChart()},updateData:function(){this.parseData();for(var t=this.graphs,n=0;n<t.length;n++)t[n].data=this.chartData},updateGraphs:function(){for(var i=this.graphs,n,t=0;t<i.length;t++)n=i[t],n.index=t,n.width=this.realRadius,n.height=this.realRadius,n.x=this.marginLeftReal,n.y=this.marginTopReal},parseData:function(){AmCharts.AmRadarChart.base.parseData.call(this);this.parseSerialData()},updateValueAxes:function(){for(var i=this.valueAxes,n,t=0;t<i.length;t++)n=i[t],n.axisRenderer=AmCharts.RadAxis,n.guideFillRenderer=AmCharts.RadarFill,n.axisItemRenderer=AmCharts.RadItem,n.autoGridCount=!1,n.x=this.marginLeftReal,n.y=this.marginTopReal,n.width=this.realRadius,n.height=this.realRadius},drawChart:function(){AmCharts.AmRadarChart.base.drawChart.call(this);var n=this.updateWidth(),r=this.updateHeight(),t=this.marginTop+this.getTitleHeight(),i=this.marginLeft,r=r-t-this.marginBottom;if(this.marginLeftReal=i+(n-i-this.marginRight)/2,this.marginTopReal=t+r/2,this.realRadius=AmCharts.toCoordinate(this.radius,n,r),this.updateValueAxes(),this.updateGraphs(),n=this.chartData,AmCharts.ifArray(n)){if(0<this.realWidth&&0<this.realHeight){for(n=n.length-1,i=this.valueAxes,t=0;t<i.length;t++)i[t].zoom(0,n);for(i=this.graphs,t=0;t<i.length;t++)i[t].zoom(0,n);(n=this.legend)&&n.invalidateSize()}}else this.cleanChart();this.dispDUpd();this.chartCreated=!0},formatString:function(n,t,i){var r=t.graph;return-1!=n.indexOf("[[category]]")&&(n=n.replace(/\[\[category\]\]/g,String(t.serialDataItem.category))),r=r.numberFormatter,r||(r=this.nf),n=AmCharts.formatValue(n,t.values,["value"],r,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),-1!=n.indexOf("[[")&&(n=AmCharts.formatDataContextValue(n,t.dataContext)),AmCharts.AmRadarChart.base.formatString.call(this,n,t,i)},cleanChart:function(){AmCharts.callMethod("destroy",[this.valueAxes,this.graphs])}});AmCharts.RadAxis=AmCharts.Class({construct:function(n){var i=n.chart,y=n.axisThickness,p=n.axisColor,a=n.axisAlpha,o=n.x,s=n.y,f,c,u;this.set=i.container.set();i.axesSet.push(this.set);var v=n.axisTitleOffset,w=n.radarCategoriesEnabled,b=n.chart.fontFamily,h=n.fontSize;if(void 0===h&&(h=n.chart.fontSize),f=n.color,void 0===f&&(f=n.chart.color),i)for(this.axisWidth=n.height,n=i.chartData,c=n.length,u=0;u<c;u++){var t=180-360/c*u,r=o+this.axisWidth*Math.sin(t/180*Math.PI),e=s+this.axisWidth*Math.cos(t/180*Math.PI);if(0<a&&(r=AmCharts.line(i.container,[o,r],[s,e],p,a,y),this.set.push(r)),w){var l="start",r=o+(this.axisWidth+v)*Math.sin(t/180*Math.PI),e=s+(this.axisWidth+v)*Math.cos(t/180*Math.PI);(180==t||0===t)&&(l="middle",r-=5);0>t&&(l="end",r-=10);180==t&&(e-=5);0===t&&(e+=5);t=AmCharts.text(i.container,n[u].category,f,b,h,l);t.translate(r+5,e);this.set.push(t);t.getBBox()}}}});AmCharts.RadItem=AmCharts.Class({construct:function(n,t,i,r,u,f,e,o){var c,s,h,v,b,nt,tt,k,y;void 0===i&&(i="");c=n.chart.fontFamily;s=n.fontSize;void 0===s&&(s=n.chart.fontSize);h=n.color;void 0===h&&(h=n.chart.color);v=n.chart.container;this.set=r=v.set();var ot=n.axisColor,st=n.axisAlpha,p=n.tickLength,l=n.gridAlpha,w=n.gridThickness,d=n.gridColor,it=n.dashLength,rt=n.fillColor,g=n.fillAlpha,ut=n.labelsEnabled;u=n.counter;var ft=n.inside,et=n.gridType,a,ht=n.labelOffset;if(t-=n.height,f=n.x,nt=n.y,e?(ut=!0,isNaN(e.tickLength)||(p=e.tickLength),void 0!=e.lineColor&&(d=e.lineColor),isNaN(e.lineAlpha)||(l=e.lineAlpha),isNaN(e.dashLength)||(it=e.dashLength),isNaN(e.lineThickness)||(w=e.lineThickness),!0===e.inside&&(ft=!0),void 0!==e.boldLabel&&(o=e.boldLabel)):i||(l/=3,p/=2),tt="end",k=-1,ft&&(tt="start",k=1),ut&&(y=AmCharts.text(v,i,h,c,s,tt,o),y.translate(f+(p+3+ht)*k,t),r.push(y),this.label=y,b=AmCharts.line(v,[f,f+p*k],[t,t],ot,st,w),r.push(b)),t=Math.round(n.y-t),o=[],c=[],0<l){if("polygons"==et){for(a=n.data.length,s=0;s<a;s++)h=180-360/a*s,o.push(t*Math.sin(h/180*Math.PI)),c.push(t*Math.cos(h/180*Math.PI));o.push(o[0]);c.push(c[0]);l=AmCharts.line(v,o,c,d,l,w,it)}else l=AmCharts.circle(v,t,"#FFFFFF",0,w,d,l);l.translate(f,nt);r.push(l)}if(1==u&&0<g&&!e&&""!==i){if(e=n.previousCoord,"polygons"==et){for(s=a;0<=s;s--)h=180-360/a*s,o.push(e*Math.sin(h/180*Math.PI)),c.push(e*Math.cos(h/180*Math.PI));a=AmCharts.polygon(v,o,c,rt,g)}else a=AmCharts.wedge(v,0,0,0,360,t,t,e,0,{fill:rt,"fill-opacity":g,stroke:"#000","stroke-opacity":0,"stroke-width":1});r.push(a);a.translate(f,nt)}!1===n.visible&&(b&&b.hide(),y&&y.hide());""!==i&&(n.counter=0===u?1:0,n.previousCoord=t)},graphics:function(){return this.set},getLabel:function(){return this.label}});AmCharts.RadarFill=AmCharts.Class({construct:function(n,t,i,r){var f,u,o,s,e;t-=n.axisWidth;i-=n.axisWidth;f=Math.max(t,i);t=i=Math.min(t,i);i=n.chart.container;var h=r.fillAlpha,c=r.fillColor,f=Math.abs(f-n.y);if(t=Math.abs(t-n.y),u=Math.max(f,t),t=Math.min(f,t),f=u,u=r.angle+90,r=r.toAngle+90,isNaN(u)&&(u=0),isNaN(r)&&(r=360),this.set=i.set(),void 0===c&&(c="#000000"),isNaN(h)&&(h=0),"polygons"==n.gridType){for(r=[],o=[],s=n.data.length,e=0;e<s;e++)u=180-360/s*e,r.push(f*Math.sin(u/180*Math.PI)),o.push(f*Math.cos(u/180*Math.PI));for(r.push(r[0]),o.push(o[0]),e=s;0<=e;e--)u=180-360/s*e,r.push(t*Math.sin(u/180*Math.PI)),o.push(t*Math.cos(u/180*Math.PI));this.fill=AmCharts.polygon(i,r,o,c,h)}else this.fill=AmCharts.wedge(i,0,0,u,r-u,f,f,t,0,{fill:c,"fill-opacity":h,stroke:"#000","stroke-opacity":0,"stroke-width":1});this.set.push(this.fill);this.fill.translate(n.x,n.y)},graphics:function(){return this.set},getLabel:function(){}});AmCharts.AmSerialChart=AmCharts.Class({inherits:AmCharts.AmRectangularChart,construct:function(n){this.type="serial";AmCharts.AmSerialChart.base.construct.call(this,n);this.cname="AmSerialChart";this.theme=n;this.createEvents("changed");this.columnSpacing=5;this.columnSpacing3D=0;this.columnWidth=.8;this.updateScrollbar=!0;var t=new AmCharts.CategoryAxis(n);t.chart=this;this.categoryAxis=t;this.zoomOutOnDataUpdate=!0;this.mouseWheelZoomEnabled=this.mouseWheelScrollEnabled=this.rotate=this.skipZoom=!1;this.minSelectedTime=0;AmCharts.applyTheme(this,n,this.cname)},initChart:function(){var n,i,t;for(AmCharts.AmSerialChart.base.initChart.call(this),this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis"),this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0),n=this.chartCursor,n&&(n.updateData(),n.fullWidth&&(n.fullRectSet=this.cursorLineSet)),n=this.countColumns(),i=this.graphs,t=0;t<i.length;t++)i[t].columnCount=n;this.updateScrollbar=!0;this.drawChart();this.autoMargins&&!this.marginsUpdated&&(this.marginsUpdated=!0,this.measureMargins());(this.mouseWheelScrollEnabled||this.mouseWheelZoomEnabled)&&this.addMouseWheel()},handleWheelReal:function(n,t){if(!this.wheelBusy){var i=this.categoryAxis,u=i.parseDates,r=i.minDuration(),f=i=1;this.mouseWheelZoomEnabled?t||(i=-1):t&&(i=-1);var e=this.chartData.length,o=this.lastTime,s=this.firstTime;0>n?u?(e=this.endTime-this.startTime,u=this.startTime+i*r,r=this.endTime+f*r,0<f&&0<i&&r>=o&&(r=o,u=o-e),this.zoomToDates(new Date(u),new Date(r))):(0<f&&0<i&&this.end>=e-1&&(i=f=0),u=this.start+i,r=this.end+f,this.zoomToIndexes(u,r)):u?(e=this.endTime-this.startTime,u=this.startTime-i*r,r=this.endTime-f*r,0<f&&0<i&&u<=s&&(u=s,r=s+e),this.zoomToDates(new Date(u),new Date(r))):(0<f&&0<i&&1>this.start&&(i=f=0),u=this.start-i,r=this.end-f,this.zoomToIndexes(u,r))}},validateData:function(n){this.marginsUpdated=!1;this.zoomOutOnDataUpdate&&!n&&(this.endTime=this.end=this.startTime=this.start=NaN);AmCharts.AmSerialChart.base.validateData.call(this)},drawChart:function(){var i,t,n;AmCharts.AmSerialChart.base.drawChart.call(this);i=this.chartData;AmCharts.ifArray(i)?(n=this.chartScrollbar,n&&n.draw(),0<this.realWidth&&0<this.realHeight&&(i=i.length-1,n=this.categoryAxis,n.parseDates&&!n.equalSpacing?(n=this.startTime,t=this.endTime,isNaN(n)||isNaN(t))&&(n=this.firstTime,t=this.lastTime):(n=this.start,t=this.end,isNaN(n)||isNaN(t))&&(n=0,t=i),this.endTime=this.startTime=this.end=this.start=void 0,this.zoom(n,t))):this.cleanChart();this.dispDUpd();this.chartCreated=!0},cleanChart:function(){AmCharts.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,this.chartScrollbar,this.chartCursor])},updateCategoryAxis:function(n,t,i){n.chart=this;n.id=i;n.rotate=t;n.axisRenderer=AmCharts.RecAxis;n.guideFillRenderer=AmCharts.RecFill;n.axisItemRenderer=AmCharts.RecItem;n.setOrientation(!this.rotate);n.x=this.marginLeftReal;n.y=this.marginTopReal;n.dx=this.dx;n.dy=this.dy;n.width=this.plotAreaWidth-1;n.height=this.plotAreaHeight-1;n.viW=this.plotAreaWidth-1;n.viH=this.plotAreaHeight-1;n.viX=this.marginLeftReal;n.viY=this.marginTopReal;n.marginsChanged=!0},updateValueAxes:function(){var r,t,i,n;for(AmCharts.AmSerialChart.base.updateValueAxes.call(this),r=this.valueAxes,t=0;t<r.length;t++)i=r[t],n=this.rotate,i.rotate=n,i.setOrientation(n),n=this.categoryAxis,(!n.startOnAxis||n.parseDates)&&(i.expandMinMax=!0)},updateData:function(){this.parseData();for(var i=this.graphs,n=this.chartData,t=0;t<i.length;t++)i[t].data=n;0<n.length&&(this.firstTime=this.getStartTime(n[0].time),this.lastTime=this.getEndTime(n[n.length-1].time))},getStartTime:function(n){var t=this.categoryAxis;return AmCharts.resetDateToMin(new Date(n),t.minPeriod,1,t.firstDayOfWeek).getTime()},getEndTime:function(n){var t=AmCharts.extractPeriod(this.categoryAxis.minPeriod);return AmCharts.changeDate(new Date(n),t.period,t.count,!0).getTime()-1},updateMargins:function(){AmCharts.AmSerialChart.base.updateMargins.call(this);var n=this.chartScrollbar;n&&(this.getScrollbarPosition(n,this.rotate,this.categoryAxis.position),this.adjustMargins(n,this.rotate))},updateScrollbars:function(){AmCharts.AmSerialChart.base.updateScrollbars.call(this);this.updateChartScrollbar(this.chartScrollbar,this.rotate)},zoom:function(n,t){var i=this.categoryAxis;i.parseDates&&!i.equalSpacing?this.timeZoom(n,t):this.indexZoom(n,t);this.updateLegendValues()},timeZoom:function(n,t){var r=this.maxSelectedTime,i,u,o;if(isNaN(r)||(t!=this.endTime&&t-n>r&&(n=t-r,this.updateScrollbar=!0),n!=this.startTime&&t-n>r&&(t=n+r,this.updateScrollbar=!0)),i=this.minSelectedTime,0<i&&t-n<i&&(o=Math.round(n+(t-n)/2),i=Math.round(i/2),n=o-i,t=o+i),u=this.chartData,o=this.categoryAxis,AmCharts.ifArray(u)&&(n!=this.startTime||t!=this.endTime)){var f=o.minDuration(),i=this.firstTime,e=this.lastTime;n||(n=i,isNaN(r)||(n=e-r));t||(t=e);n>e&&(n=e);t<i&&(t=i);n<i&&(n=i);t>e&&(t=e);t<n&&(t=n+f);t-n<f/5&&(t<e?t=n+f/5:n=t-f/5);this.startTime=n;this.endTime=t;r=u.length-1;f=this.getClosestIndex(u,"time",n,!0,0,r);u=this.getClosestIndex(u,"time",t,!1,f,r);o.timeZoom(n,t);o.zoom(f,u);this.start=AmCharts.fitToBounds(f,0,r);this.end=AmCharts.fitToBounds(u,0,r);this.zoomAxesAndGraphs();this.zoomScrollbar();n!=i||t!=e?this.showZB(!0):this.showZB(!1);this.updateColumnsDepth();this.dispatchTimeZoomEvent()}},indexZoom:function(n,t){var i=this.maxSelectedSeries,r;isNaN(i)||(t!=this.end&&t-n>i&&(n=t-i,this.updateScrollbar=!0),n!=this.start&&t-n>i&&(t=n+i,this.updateScrollbar=!0));(n!=this.start||t!=this.end)&&(r=this.chartData.length-1,isNaN(n)&&(n=0,isNaN(i)||(n=r-i)),isNaN(t)&&(t=r),t<n&&(t=n),t>r&&(t=r),n>r&&(n=r-1),0>n&&(n=0),this.start=n,this.end=t,this.categoryAxis.zoom(n,t),this.zoomAxesAndGraphs(),this.zoomScrollbar(),0!==n||t!=this.chartData.length-1?this.showZB(!0):this.showZB(!1),this.updateColumnsDepth(),this.dispatchIndexZoomEvent())},updateGraphs:function(){var i,t,n;for(AmCharts.AmSerialChart.base.updateGraphs.call(this),i=this.graphs,t=0;t<i.length;t++)n=i[t],n.columnWidthReal=this.columnWidth,n.categoryAxis=this.categoryAxis,AmCharts.isString(n.fillToGraph)&&(n.fillToGraph=this.getGraphById(n.fillToGraph))},updateColumnsDepth:function(){var n,t=this.graphs,i,r,u;for(AmCharts.remove(this.columnsSet),this.columnsArray=[],n=0;n<t.length;n++)if(i=t[n],r=i.columnsArray,r)for(u=0;u<r.length;u++)this.columnsArray.push(r[u]);if(this.columnsArray.sort(this.compareDepth),0<this.columnsArray.length){for(t=this.container.set(),this.columnSet.push(t),n=0;n<this.columnsArray.length;n++)t.push(this.columnsArray[n].column.set);i&&t.translate(i.x,i.y);this.columnsSet=t}},compareDepth:function(n,t){return n.depth>t.depth?1:-1},zoomScrollbar:function(){var n=this.chartScrollbar,t=this.categoryAxis;n&&this.updateScrollbar&&(t.parseDates&&!t.equalSpacing?n.timeZoom(this.startTime,this.endTime):n.zoom(this.start,this.end),this.updateScrollbar=!0)},updateTrendLines:function(){for(var i=this.trendLines,n,t=0;t<i.length;t++)n=i[t],n=AmCharts.processObject(n,AmCharts.TrendLine,this.theme),i[t]=n,n.chart=this,AmCharts.isString(n.valueAxis)&&(n.valueAxis=this.getValueAxisById(n.valueAxis)),n.valueAxis||(n.valueAxis=this.valueAxes[0]),n.categoryAxis=this.categoryAxis},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){for(var t=this.valueAxes,n=0;n<t.length;n++)t[n].zoom(this.start,this.end);for(t=this.graphs,n=0;n<t.length;n++)t[n].zoom(this.start,this.end);this.zoomTrendLines();(n=this.chartCursor)&&n.zoom(this.start,this.end,this.startTime,this.endTime)}},countColumns:function(){for(var t=0,s=this.valueAxes.length,o=this.graphs.length,n,i,f=!1,r,e,u=0;u<s;u++){if(i=this.valueAxes[u],e=i.stackType,"100%"==e||"regular"==e)for(f=!1,r=0;r<o;r++)n=this.graphs[r],n.tcc=1,n.valueAxis==i&&"column"==n.type&&(!f&&n.stackable&&(t++,f=!0),(!n.stackable&&n.clustered||n.newStack)&&t++,n.columnIndex=t-1,n.clustered||(n.columnIndex=0));if("none"==e||"3d"==e){for(f=!1,r=0;r<o;r++)n=this.graphs[r],n.valueAxis==i&&"column"==n.type&&(n.clustered?(n.tcc=1,n.newStack&&(t=0),n.hidden||(n.columnIndex=t,t++)):n.hidden||(f=!0,n.tcc=1,n.columnIndex=0));f&&0==t&&(t=1)}if("3d"==e){for(i=1,u=0;u<o;u++)n=this.graphs[u],n.newStack&&i++,n.depthCount=i,n.tcc=t;t=i}}return t},parseData:function(){AmCharts.AmSerialChart.base.parseData.call(this);this.parseSerialData()},getCategoryIndexByValue:function(n){for(var i=this.chartData,r,t=0;t<i.length;t++)i[t].category==n&&(r=t);return r},handleCursorChange:function(n){this.updateLegendValues(n.index)},handleCursorZoom:function(n){this.updateScrollbar=!0;this.zoom(n.start,n.end)},handleScrollbarZoom:function(n){this.updateScrollbar=!1;this.zoom(n.start,n.end)},dispatchTimeZoomEvent:function(){var n;if(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime){n={type:"zoomed"};n.startDate=new Date(this.startTime);n.endDate=new Date(this.endTime);n.startIndex=this.start;n.endIndex=this.end;this.startIndex=this.start;this.endIndex=this.end;this.startDate=n.startDate;this.endDate=n.endDate;this.prevStartTime=this.startTime;this.prevEndTime=this.endTime;var t=this.categoryAxis,i=AmCharts.extractPeriod(t.minPeriod).period,t=t.dateFormatsObject[i];n.startValue=AmCharts.formatDate(n.startDate,t,this);n.endValue=AmCharts.formatDate(n.endDate,t,this);n.chart=this;n.target=this;this.fire(n.type,n)}},dispatchIndexZoomEvent:function(){var t,n;(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end)&&(this.startIndex=this.start,this.endIndex=this.end,t=this.chartData,!AmCharts.ifArray(t)||isNaN(this.start)||isNaN(this.end)||(n={chart:this,target:this,type:"zoomed"},n.startIndex=this.start,n.endIndex=this.end,n.startValue=t[this.start].category,n.endValue=t[this.end].category,this.categoryAxis.parseDates&&(this.startTime=t[this.start].time,this.endTime=t[this.end].time,n.startDate=new Date(this.startTime),n.endDate=new Date(this.endTime)),this.prevStartIndex=this.start,this.prevEndIndex=this.end,this.fire(n.type,n)))},updateLegendValues:function(n){for(var r=this.graphs,i,t=0;t<r.length;t++)i=r[t],i.currentDataItem=isNaN(n)?void 0:this.chartData[n].axes[i.valueAxis.id].graphs[i.id];this.legend&&this.legend.updateValues()},getClosestIndex:function(n,t,i,r,u,f){0>u&&(u=0);f>n.length-1&&(f=n.length-1);var e=u+Math.round((f-u)/2),o=n[e][t];return 1>=f-u?r?u:(r=n[f][t],Math.abs(n[u][t]-i)<Math.abs(r-i)?u:f):i==o?e:i<o?this.getClosestIndex(n,t,i,r,u,e):this.getClosestIndex(n,t,i,r,e,f)},zoomToIndexes:function(n,t){var r,i;this.updateScrollbar=!0;r=this.chartData;r&&(i=r.length,0<i&&(0>n&&(n=0),t>i-1&&(t=i-1),i=this.categoryAxis,i.parseDates&&!i.equalSpacing?this.zoom(r[n].time,this.getEndTime(r[t].time)):this.zoom(n,t)))},zoomToDates:function(n,t){var i,r;this.updateScrollbar=!0;i=this.chartData;this.categoryAxis.equalSpacing?(r=this.getClosestIndex(i,"time",n.getTime(),!0,0,i.length),t=AmCharts.resetDateToMin(t,this.categoryAxis.minPeriod,1),i=this.getClosestIndex(i,"time",t.getTime(),!1,0,i.length),this.zoom(r,i)):this.zoom(n.getTime(),t.getTime())},zoomToCategoryValues:function(n,t){this.updateScrollbar=!0;this.zoom(this.getCategoryIndexByValue(n),this.getCategoryIndexByValue(t))},formatPeriodString:function(n,t){var e,i,r;if(t){var g=["value","open","low","high","close"],nt="value open low high close average sum count".split(" "),rt=t.valueAxis,ut=this.chartData,y=t.numberFormatter;for(y||(y=this.nf),e=0;e<g.length;e++){for(var o=g[e],f=0,p=0,w,tt,s,h,c,u=0,b=0,k,it,l,a,v,d=this.start;d<=this.end;d++)if(i=ut[d],i&&(i=i.axes[rt.id].graphs[t.id])){if(i.values&&(r=i.values[o],!isNaN(r))){isNaN(w)&&(w=r);tt=r;(isNaN(s)||s>r)&&(s=r);(isNaN(h)||h<r)&&(h=r);c=AmCharts.getDecimals(f);var ft=AmCharts.getDecimals(r),f=f+r,f=AmCharts.roundTo(f,Math.max(c,ft));p++;c=f/p}i.percents&&(i=i.percents[o],!isNaN(i))&&(isNaN(k)&&(k=i),it=i,(isNaN(l)||l>i)&&(l=i),(isNaN(a)||a<i)&&(a=i),v=AmCharts.getDecimals(u),r=AmCharts.getDecimals(i),u+=i,u=AmCharts.roundTo(u,Math.max(v,r)),b++,v=u/b)}u={open:k,close:it,high:a,low:l,average:v,sum:u,count:b};n=AmCharts.formatValue(n,{open:w,close:tt,high:h,low:s,average:c,sum:f,count:p},nt,y,o+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);n=AmCharts.formatValue(n,u,nt,this.pf,"percents\\."+o+"\\.")}}return AmCharts.cleanFromEmpty(n)},formatString:function(n,t,i){var f=t.graph,r,u,e;return-1!=n.indexOf("[[category]]")&&(r=t.serialDataItem.category,this.categoryAxis.parseDates&&(u=this.balloonDateFormat,e=this.chartCursor,e&&(u=e.categoryBalloonDateFormat),-1!=n.indexOf("[[category]]")&&(u=AmCharts.formatDate(r,u,this),-1!=u.indexOf("fff")&&(u=AmCharts.formatMilliseconds(u,r)),r=u)),n=n.replace(/\[\[category\]\]/g,String(r))),f=f.numberFormatter,f||(f=this.nf),r=t.graph.valueAxis,(u=r.duration)&&!isNaN(t.values.value)&&(r=AmCharts.formatDuration(t.values.value,u,"",r.durationUnits,r.maxInterval,f),n=n.replace(RegExp("\\[\\[value\\]\\]","g"),r)),r="value open low high close total".split(" "),u=this.pf,n=AmCharts.formatValue(n,t.percents,r,u,"percents\\."),n=AmCharts.formatValue(n,t.values,r,f,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),n=AmCharts.formatValue(n,t.values,["percents"],u),-1!=n.indexOf("[[")&&(n=AmCharts.formatDataContextValue(n,t.dataContext)),AmCharts.AmSerialChart.base.formatString.call(this,n,t,i)},addChartScrollbar:function(n){AmCharts.callMethod("destroy",[this.chartScrollbar]);n&&(n.chart=this,this.listenTo(n,"zoomed",this.handleScrollbarZoom));this.rotate?void 0===n.width&&(n.width=n.scrollbarHeight):void 0===n.height&&(n.height=n.scrollbarHeight);this.chartScrollbar=n},removeChartScrollbar:function(){AmCharts.callMethod("destroy",[this.chartScrollbar]);this.chartScrollbar=null},handleReleaseOutside:function(n){AmCharts.AmSerialChart.base.handleReleaseOutside.call(this,n);AmCharts.callMethod("handleReleaseOutside",[this.chartScrollbar])}});AmCharts.Cuboid=AmCharts.Class({construct:function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this.set=n.set();this.container=n;this.h=Math.round(i);this.w=Math.round(t);this.dx=r;this.dy=u;this.colors=f;this.alpha=e;this.bwidth=o;this.bcolor=s;this.balpha=h;this.dashLength=v;this.topRadius=p;this.pattern=y;(this.rotate=a)?0>t&&0===c&&(c=180):0>i&&270==c&&(c=90);this.gradientRotation=c;0===r&&0===u&&(this.cornerRadius=l);this.draw()},draw:function(){var at=this.set,b,tt,rt,ut,ft,et,a,ot,st,yt,h,y,p,d,nt,ht,ct,lt;at.clear();var i=this.container,t=this.w,n=this.h,u=this.dx,f=this.dy,l=this.colors,r=this.alpha,e=this.bwidth,o=this.bcolor,s=this.balpha,g=this.gradientRotation,vt=this.cornerRadius,k=this.dashLength,it=this.pattern,w=this.topRadius,v=l,c=l;for("object"==typeof l&&(v=l[0],c=l[l.length-1]),yt=r,it&&(r=0),nt=this.rotate,(0<Math.abs(u)||0<Math.abs(f))&&(isNaN(w)?(a=c,c=AmCharts.adjustLuminosity(v,-.2),c=AmCharts.adjustLuminosity(v,-.2),b=AmCharts.polygon(i,[0,u,t+u,t,0],[0,f,f,0,0],c,r,1,o,0,g),0<s&&(st=AmCharts.line(i,[0,u,t+u],[0,f,f],o,s,e,k)),tt=AmCharts.polygon(i,[0,0,t,t,0],[0,n,n,0,0],c,r,1,o,0,g),tt.translate(u,f),0<s&&(rt=AmCharts.line(i,[u,u],[f,f+n],o,s,e,k)),ut=AmCharts.polygon(i,[0,0,u,u,0],[0,n,n+f,f,0],c,r,1,o,0,g),ft=AmCharts.polygon(i,[t,t,t+u,t+u,t],[0,n,n+f,f,0],c,r,1,o,0,g),0<s&&(et=AmCharts.line(i,[t,t+u,t+u,t],[0,f,n+f,n],o,s,e,k)),c=AmCharts.adjustLuminosity(a,.2),a=AmCharts.polygon(i,[0,u,t+u,t,0],[n,n+f,n+f,n,n],c,r,1,o,0,g),0<s&&(ot=AmCharts.line(i,[0,u,t+u],[n,n+f,n+f],o,s,e,k))):(nt?(ht=n/2,c=u/2,lt=n/2,ct=t+u/2,y=Math.abs(n/2),h=Math.abs(u/2)):(c=t/2,ht=f/2,ct=t/2,lt=n+f/2+1,h=Math.abs(t/2),y=Math.abs(f/2)),p=h*w,d=y*w,.1<h&&.1<h&&(b=AmCharts.circle(i,h,v,r,e,o,s,!1,y),b.translate(c,ht)),.1<p&&.1<p&&(a=AmCharts.circle(i,p,AmCharts.adjustLuminosity(v,.5),r,e,o,s,!1,d),a.translate(ct,lt)))),r=yt,1>Math.abs(n)&&(n=0),1>Math.abs(t)&&(t=0),!isNaN(w)&&(0<Math.abs(u)||0<Math.abs(f))?(l=[v],l={fill:l,stroke:o,"stroke-width":e,"stroke-opacity":s,"fill-opacity":r},nt?(r="M0,0 L"+t+","+(n/2-n/2*w),e=" B",0<t&&(e=" A"),AmCharts.VML?(r+=e+Math.round(t-p)+","+Math.round(n/2-d)+","+Math.round(t+p)+","+Math.round(n/2+d)+","+t+",0,"+t+","+n,r=r+(" L0,"+n)+(e+Math.round(-h)+","+Math.round(n/2-y)+","+Math.round(h)+","+Math.round(n/2+y)+",0,"+n+",0,0")):(r+="A"+p+","+d+",0,0,0,"+t+","+(n-n/2*(1-w))+"L0,"+n,r+="A"+h+","+y+",0,0,1,0,0"),h=90):(e=t/2-t/2*w,r="M0,0 L"+e+","+n,AmCharts.VML?(r="M0,0 L"+e+","+n,e=" B",0>n&&(e=" A"),r+=e+Math.round(t/2-p)+","+Math.round(n-d)+","+Math.round(t/2+p)+","+Math.round(n+d)+",0,"+n+","+t+","+n,r+=" L"+t+",0",r+=e+Math.round(t/2+h)+","+Math.round(y)+","+Math.round(t/2-h)+","+Math.round(-y)+","+t+",0,0,0"):(r+="A"+p+","+d+",0,0,0,"+(t-t/2*(1-w))+","+n+"L"+t+",0",r+="A"+h+","+y+",0,0,1,0,0"),h=180),i=i.path(r).attr(l),i.gradient("linearGradient",[v,AmCharts.adjustLuminosity(v,-.3),AmCharts.adjustLuminosity(v,-.3),v],h),nt?i.translate(u/2,0):i.translate(0,f/2)):i=0===n?AmCharts.line(i,[0,t],[0,0],o,s,e,k):0===t?AmCharts.line(i,[0,0],[0,n],o,s,e,k):0<vt?AmCharts.rect(i,t,n,l,r,e,o,s,vt,g,k):AmCharts.polygon(i,[0,0,t,t,0],[0,n,n,0,0],l,r,e,o,s,g,!1,k),t=isNaN(w)?0>n?[b,st,tt,rt,ut,ft,et,a,ot,i]:[a,ot,tt,rt,ut,ft,b,st,et,i]:nt?0<t?[b,i,a]:[a,i,b]:0>n?[b,i,a]:[a,i,b],n=0;n<t.length;n++)(u=t[n])&&at.push(u);it&&i.pattern(it)},width:function(n){this.w=Math.round(n);this.draw()},height:function(n){this.h=Math.round(n);this.draw()},animateHeight:function(n,t){var i=this;i.easing=t;i.totalFrames=Math.round(1e3*n/AmCharts.updateRate);i.rh=i.h;i.frame=0;i.height(1);setTimeout(function(){i.updateHeight.call(i)},AmCharts.updateRate)},updateHeight:function(){var n=this,t;n.frame++;t=n.totalFrames;n.frame<=t&&(t=n.easing(0,n.frame,1,n.rh-1,t),n.height(t),setTimeout(function(){n.updateHeight.call(n)},AmCharts.updateRate))},animateWidth:function(n,t){var i=this;i.easing=t;i.totalFrames=Math.round(1e3*n/AmCharts.updateRate);i.rw=i.w;i.frame=0;i.width(1);setTimeout(function(){i.updateWidth.call(i)},AmCharts.updateRate)},updateWidth:function(){var n=this,t;n.frame++;t=n.totalFrames;n.frame<=t&&(t=n.easing(0,n.frame,1,n.rw-1,t),n.width(t),setTimeout(function(){n.updateWidth.call(n)},AmCharts.updateRate))}});AmCharts.CategoryAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(n){this.cname="CategoryAxis";AmCharts.CategoryAxis.base.construct.call(this,n);this.minPeriod="DD";this.equalSpacing=this.parseDates=!1;this.position="bottom";this.startOnAxis=!1;this.firstDayOfWeek=1;this.gridPosition="middle";this.markPeriodChange=this.boldPeriodBeginning=!0;this.safeDistance=30;this.centerLabelOnFullPeriod=!0;this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}];this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}];this.nextPeriod={};this.nextPeriod.fff="ss";this.nextPeriod.ss="mm";this.nextPeriod.mm="hh";this.nextPeriod.hh="DD";this.nextPeriod.DD="MM";this.nextPeriod.MM="YYYY";AmCharts.applyTheme(this,n,this.cname)},draw:function(){var v,a,l,f,nt,o,y,s,it,k,tt,rt,ut;if(AmCharts.CategoryAxis.base.draw.call(this),this.generateDFObject(),s=this.chart.chartData,this.data=s,AmCharts.ifArray(s)){var n,p=this.chart,e=this.start,c=this.labelFrequency,d=0;n=this.end-e+1;var k=this.gridCountR,g=this.showFirstLabel,i=this.showLastLabel,t,r="",u=AmCharts.extractPeriod(this.minPeriod);t=AmCharts.getPeriodDuration(u.period,u.count);v=this.rotate;var b=this.firstDayOfWeek,h=this.boldPeriodBeginning,s=AmCharts.resetDateToMin(new Date(s[s.length-1].time+1.05*t),this.minPeriod,1,b).getTime(),w;if(this.endTime>s&&(this.endTime=s),o=this.minorGridEnabled,s=this.gridAlpha,this.parseDates&&!this.equalSpacing){if(this.timeDifference=this.endTime-this.startTime,e=this.choosePeriod(0),c=e.period,v=e.count,a=AmCharts.getPeriodDuration(c,v),a<t&&(c=u.period,v=u.count,a=t),l=c,"WW"==l&&(l="DD"),this.stepWidth=this.getStepWidth(this.timeDifference),k=Math.ceil(this.timeDifference/a)+5,tt=r=AmCharts.resetDateToMin(new Date(this.startTime-a),c,v,b).getTime(),l==c&&1==v&&this.centerLabelOnFullPeriod&&(nt=a*this.stepWidth),this.cellWidth=t*this.stepWidth,n=Math.round(r/a),e=-1,n/2==Math.round(n/2)&&(e=-2,r-=a),rt=p.firstTime,ut=0,o&&1<v&&(y=this.chooseMinorFrequency(v),it=AmCharts.getPeriodDuration(c,y)),0<this.gridCountR)for(n=e;n<=k;n++){if(u=rt+a*(n+Math.floor((tt-rt)/a))-ut,"DD"==c&&(u+=36e5),u=AmCharts.resetDateToMin(new Date(u),c,v,b).getTime(),"MM"==c&&(o=(u-r)/a,1.5<=(u-r)/a&&(u=u-(o-1)*a+AmCharts.getPeriodDuration("DD",3),u=AmCharts.resetDateToMin(new Date(u),c,1).getTime(),ut+=a)),t=(u-this.startTime)*this.stepWidth,o=!1,this.nextPeriod[l]&&(o=this.checkPeriodChange(this.nextPeriod[l],1,u,r,l)),w=!1,o&&this.markPeriodChange?(o=this.dateFormatsObject[this.nextPeriod[l]],this.twoLineMode&&(o=this.dateFormatsObject[l]+"\n"+o,o=AmCharts.fixBrakes(o)),w=!0):o=this.dateFormatsObject[l],h||(w=!1),r=AmCharts.formatDate(new Date(u),o,p),(n!=e||g)&&(n!=k||i)||(r=" "),this.labelFunction&&(r=this.labelFunction(r,new Date(u),this,c,v,f).toString()),this.boldLabels&&(w=!0),f=new this.axisItemRenderer(this,t,r,!1,nt,0,!1,w),this.pushAxisItem(f),f=r=u,!isNaN(y))for(t=1;t<v;t+=y)this.gridAlpha=this.minorGridAlpha,o=u+it*t,o=AmCharts.resetDateToMin(new Date(o),c,y,b).getTime(),o=new this.axisItemRenderer(this,(o-this.startTime)*this.stepWidth),this.pushAxisItem(o);this.gridAlpha=s}}else if(this.parseDates){if(this.parseDates&&this.equalSpacing){if(d=this.start,this.startTime=this.data[this.start].time,this.endTime=this.data[this.end].time,this.timeDifference=this.endTime-this.startTime,e=this.choosePeriod(0),c=e.period,v=e.count,a=AmCharts.getPeriodDuration(c,v),a<t&&(c=u.period,v=u.count,a=t),l=c,"WW"==l&&(l="DD"),this.stepWidth=this.getStepWidth(n),k=Math.ceil(this.timeDifference/a)+1,r=AmCharts.resetDateToMin(new Date(this.startTime-a),c,v,b).getTime(),this.cellWidth=this.getStepWidth(n),n=Math.round(r/a),e=-1,n/2==Math.round(n/2)&&(e=-2,r-=a),t=this.start,t/2==Math.round(t/2)&&t--,0>t&&(t=0),nt=this.end+2,nt>=this.data.length&&(nt=this.data.length),it=!1,it=!g,this.previousPos=-1e3,20<this.labelRotation&&(this.safeDistance=5),a=t,this.data[t].time!=AmCharts.resetDateToMin(new Date(this.data[t].time),c,v,b).getTime())for(b=0,w=r,n=t;n<nt;n++)u=this.data[n].time,this.checkPeriodChange(c,v,u,w)&&(b++,2<=b&&(a=n,n=nt),w=u);if(o&&1<v&&(y=this.chooseMinorFrequency(v),AmCharts.getPeriodDuration(c,y)),0<this.gridCountR)for(n=t;n<nt;n++)(u=this.data[n].time,this.checkPeriodChange(c,v,u,r)&&n>=a)?(t=this.getCoordinate(n-this.start),o=!1,this.nextPeriod[l]&&(o=this.checkPeriodChange(this.nextPeriod[l],1,u,r,l)),w=!1,o&&this.markPeriodChange?(o=this.dateFormatsObject[this.nextPeriod[l]],w=!0):o=this.dateFormatsObject[l],r=AmCharts.formatDate(new Date(u),o,p),(n!=e||g)&&(n!=k||i)||(r=" "),it?it=!1:(h||(w=!1),t-this.previousPos>this.safeDistance*Math.cos(this.labelRotation*Math.PI/180)&&(this.labelFunction&&(r=this.labelFunction(r,new Date(u),this,c,v,f)),this.boldLabels&&(w=!0),f=new this.axisItemRenderer(this,t,r,void 0,void 0,void 0,void 0,w),b=f.graphics(),this.pushAxisItem(f),f=b.getBBox().width,AmCharts.isModern||(f-=t),this.previousPos=t+f)),f=r=u):isNaN(y)||(this.checkPeriodChange(c,y,u,tt)&&(this.gridAlpha=this.minorGridAlpha,t=this.getCoordinate(n-this.start),o=new this.axisItemRenderer(this,t),this.pushAxisItem(o),tt=u),this.gridAlpha=s)}}else if(this.cellWidth=this.getStepWidth(n),n<k&&(k=n),d+=this.start,this.stepWidth=this.getStepWidth(n),0<k)for(h=Math.floor(n/k),y=this.chooseMinorFrequency(h),t=d,t/2==Math.round(t/2)&&t--,0>t&&(t=0),k=0,this.end-t+1>=this.autoRotateCount&&(this.labelRotation=this.autoRotateAngle),n=t;n<=this.end+2;n++){if(f=!1,0<=n&&n<this.data.length?(l=this.data[n],r=l.category,f=l.forceShow):r="",o&&!isNaN(y))if(n/y==Math.round(n/y)||f)n/h==Math.round(n/h)||f||(this.gridAlpha=this.minorGridAlpha,r=void 0);else continue;else if(n/h!=Math.round(n/h)&&!f)continue;t=this.getCoordinate(n-d);f=0;"start"==this.gridPosition&&(t-=this.cellWidth/2,f=this.cellWidth/2);b=!0;tickShift=f;"start"==this.tickPosition&&(tickShift=0,b=!1,f=0);(n!=e||g)&&(n!=this.end||i)||(r=void 0);Math.round(k/c)!=k/c&&(r=void 0);k++;tt=this.cellWidth;v&&(tt=NaN);this.labelFunction&&l&&(r=this.labelFunction(r,l,this));r=AmCharts.fixBrakes(r);w=!1;this.boldLabels&&(w=!0);n>this.end&&"start"==this.tickPosition&&(r=" ");f=new this.axisItemRenderer(this,t,r,b,tt,f,void 0,w,tickShift,!1,l.labelColor);f.serialDataItem=l;this.pushAxisItem(f);this.gridAlpha=s}for(n=0;n<this.data.length;n++)(g=this.data[n])&&(i=this.parseDates&&!this.equalSpacing?Math.round((g.time-this.startTime)*this.stepWidth+this.cellWidth/2):this.getCoordinate(n-d),g.x[this.id]=i);for(g=this.guides.length,n=0;n<g;n++)i=this.guides[n],h=h=h=s=e=NaN,y=i.above,i.toCategory&&(h=p.getCategoryIndexByValue(i.toCategory),isNaN(h)||(e=this.getCoordinate(h-d),i.expand&&(e+=this.cellWidth/2),f=new this.axisItemRenderer(this,e,"",!0,NaN,NaN,i),this.pushAxisItem(f,y))),i.category&&(h=p.getCategoryIndexByValue(i.category),isNaN(h)||(s=this.getCoordinate(h-d),i.expand&&(s-=this.cellWidth/2),h=(e-s)/2,f=new this.axisItemRenderer(this,s,i.label,!0,NaN,h,i),this.pushAxisItem(f,y))),i.toDate&&(i.toDate instanceof Date||(i.toDate=AmCharts.stringToDate(i.toDate,p.dataDateFormat)),this.equalSpacing?(h=p.getClosestIndex(this.data,"time",i.toDate.getTime(),!1,0,this.data.length-1),isNaN(h)||(e=this.getCoordinate(h-d))):e=(i.toDate.getTime()-this.startTime)*this.stepWidth,f=new this.axisItemRenderer(this,e,"",!0,NaN,NaN,i),this.pushAxisItem(f,y)),i.date&&(i.date instanceof Date||(i.date=AmCharts.stringToDate(i.date,p.dataDateFormat)),this.equalSpacing?(h=p.getClosestIndex(this.data,"time",i.date.getTime(),!1,0,this.data.length-1),isNaN(h)||(s=this.getCoordinate(h-d))):s=(i.date.getTime()-this.startTime)*this.stepWidth,h=(e-s)/2,f="H"==this.orientation?new this.axisItemRenderer(this,s,i.label,!1,2*h,NaN,i):new this.axisItemRenderer(this,s,i.label,!1,NaN,h,i),this.pushAxisItem(f,y)),(0<e||0<s)&&(e<this.width||s<this.width)&&(e=new this.guideFillRenderer(this,s,e,i),s=e.graphics(),this.pushAxisItem(e,y),i.graphics=s,s.index=n,i.balloonText&&this.addEventListeners(s,i))}this.axisCreated=!0;p=this.x;d=this.y;this.set.translate(p,d);this.labelsSet.translate(p,d);this.positionTitle();(p=this.axisLine.set)&&p.toFront();p=this.getBBox().height;2<p-this.previousHeight&&this.autoWrap&&!this.parseDates&&(this.axisCreated=this.chart.marginsUpdated=!1);this.previousHeight=p},chooseMinorFrequency:function(n){for(var t=10;0<t;t--)if(n/t==Math.round(n/t))return n/t},choosePeriod:function(n){var i=AmCharts.getPeriodDuration(this.periods[n].period,this.periods[n].count),r=Math.ceil(this.timeDifference/i),t=this.periods;return this.timeDifference<i&&0<n?t[n-1]:r<=this.gridCountR?t[n]:n+1<t.length?this.choosePeriod(n+1):t[n]},getStepWidth:function(n){var t;return this.startOnAxis?(t=this.axisWidth/(n-1),1==n&&(t=this.axisWidth)):t=this.axisWidth/n,t},getCoordinate:function(n){return n*=this.stepWidth,this.startOnAxis||(n+=this.stepWidth/2),Math.round(n)},timeZoom:function(n,t){this.startTime=n;this.endTime=t},minDuration:function(){var n=AmCharts.extractPeriod(this.minPeriod);return AmCharts.getPeriodDuration(n.period,n.count)},checkPeriodChange:function(n,t,i,r,u){i=new Date(i);var e=new Date(r),f=this.firstDayOfWeek;return r=t,"DD"==n&&(t=1),i=AmCharts.resetDateToMin(i,n,t,f).getTime(),t=AmCharts.resetDateToMin(e,n,t,f).getTime(),"DD"==n&&"hh"!=u&&i-t<=AmCharts.getPeriodDuration(n,r)?!1:i!=t?!0:!1},generateDFObject:function(){var n,t;for(this.dateFormatsObject={},n=0;n<this.dateFormats.length;n++)t=this.dateFormats[n],this.dateFormatsObject[t.period]=t.format},xToIndex:function(n){var i=this.data,t=this.chart,f=t.rotate,u=this.stepWidth,r;return this.parseDates&&!this.equalSpacing?(n=this.startTime+Math.round(n/u)-this.minDuration()/2,t=t.getClosestIndex(i,"time",n,!1,this.start,this.end+1)):(this.startOnAxis||(n-=u/2),t=this.start+Math.round(n/u)),t=AmCharts.fitToBounds(t,0,i.length-1),i[t]&&(r=i[t].x[this.id]),f?r>this.height+1&&t--:r>this.width+1&&t--,0>r&&t++,AmCharts.fitToBounds(t,0,i.length-1)},dateToCoordinate:function(n){return this.parseDates&&!this.equalSpacing?(n.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(n=this.chart.getClosestIndex(this.data,"time",n.getTime(),!1,0,this.data.length-1),this.getCoordinate(n-this.start)):NaN},categoryToCoordinate:function(n){return this.chart?(n=this.chart.getCategoryIndexByValue(n),this.getCoordinate(n-this.start)):NaN},coordinateToDate:function(n){return this.equalSpacing?(n=this.xToIndex(n),new Date(this.data[n].time)):new Date(this.startTime+n/this.stepWidth)}});AmCharts.AmXYChart=AmCharts.Class({inherits:AmCharts.AmRectangularChart,construct:function(n){this.type="xy";AmCharts.AmXYChart.base.construct.call(this,n);this.cname="AmXYChart";this.theme=n;this.createEvents("zoomed");this.maxZoomFactor=20;AmCharts.applyTheme(this,n,this.cname)},initChart:function(){AmCharts.AmXYChart.base.initChart.call(this);this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);this.updateScrollbar=!0;this.drawChart();this.autoMargins&&!this.marginsUpdated&&(this.marginsUpdated=!0,this.measureMargins());var n=this.marginLeftReal,t=this.marginTopReal,i=this.plotAreaWidth,r=this.plotAreaHeight;this.graphsSet.clipRect(n,t,i,r);this.bulletSet.clipRect(n,t,i,r);this.trendLinesSet.clipRect(n,t,i,r)},prepareForExport:function(){var n=this.bulletSet;n.clipPath&&this.container.remove(n.clipPath)},createValueAxes:function(){var i=[],f=[],r,n,t,u;for(this.xAxes=i,this.yAxes=f,r=this.valueAxes,t=0;t<r.length;t++)n=r[t],u=n.position,("top"==u||"bottom"==u)&&(n.rotate=!0),n.setOrientation(n.rotate),u=n.orientation,"V"==u&&f.push(n),"H"==u&&i.push(n);for(0===f.length&&(n=new AmCharts.ValueAxis(this.theme),n.rotate=!1,n.setOrientation(!1),r.push(n),f.push(n)),0===i.length&&(n=new AmCharts.ValueAxis(this.theme),n.rotate=!0,n.setOrientation(!0),r.push(n),i.push(n)),t=0;t<r.length;t++)this.processValueAxis(r[t],t);for(i=this.graphs,t=0;t<i.length;t++)this.processGraph(i[t],t)},drawChart:function(){if(AmCharts.AmXYChart.base.drawChart.call(this),AmCharts.ifArray(this.chartData)?(this.chartScrollbar&&this.updateScrollbars(),this.zoomChart()):this.cleanChart(),this.hideXScrollbar){var n=this.scrollbarH;n&&(this.removeListener(n,"zoomed",this.handleHSBZoom),n.destroy());this.scrollbarH=null}this.hideYScrollbar&&((n=this.scrollbarV)&&(this.removeListener(n,"zoomed",this.handleVSBZoom),n.destroy()),this.scrollbarV=null);(!this.autoMargins||this.marginsUpdated)&&(this.dispDUpd(),this.chartCreated=!0,this.zoomScrollbars())},cleanChart:function(){AmCharts.callMethod("destroy",[this.valueAxes,this.graphs,this.scrollbarV,this.scrollbarH,this.chartCursor])},zoomChart:function(){this.toggleZoomOutButton();this.zoomObjects(this.valueAxes);this.zoomObjects(this.graphs);this.zoomTrendLines();this.dispatchAxisZoom()},toggleZoomOutButton:function(){1==this.heightMultiplier&&1==this.widthMultiplier?this.showZB(!1):this.showZB(!0)},dispatchAxisZoom:function(){for(var u=this.valueAxes,n,t,i,f,r=0;r<u.length;r++)n=u[r],isNaN(n.min)||isNaN(n.max)||("V"==n.orientation?(t=n.coordinateToValue(-this.verticalPosition),i=n.coordinateToValue(-this.verticalPosition+this.plotAreaHeight)):(t=n.coordinateToValue(-this.horizontalPosition),i=n.coordinateToValue(-this.horizontalPosition+this.plotAreaWidth)),isNaN(t)||isNaN(i)||(t>i&&(f=i,i=t,t=f),n.dispatchZoomEvent(t,i)))},zoomObjects:function(n){for(var r=n.length,i,t=0;t<r;t++)i=n[t],this.updateObjectSize(i),i.zoom(0,this.chartData.length-1)},updateData:function(){var f,r;this.parseData();for(var i=this.chartData,h=i.length-1,u=this.graphs,s=this.dataProvider,e=-Infinity,o=Infinity,n,t=0;t<u.length;t++)if(n=u[t],n.data=i,n.zoom(0,h),n=n.valueField)for(f=0;f<s.length;f++)r=Number(s[f][n]),r>e&&(e=r),r<o&&(o=r);for(t=0;t<u.length;t++)n=u[t],n.maxValue=e,n.minValue=o;(i=this.chartCursor)&&(i.updateData(),i.type="crosshair",i.valueBalloonsEnabled=!1)},zoomOut:function(){this.verticalPosition=this.horizontalPosition=0;this.heightMultiplier=this.widthMultiplier=1;this.zoomChart();this.zoomScrollbars()},processValueAxis:function(n){n.chart=this;n.minMaxField="H"==n.orientation?"x":"y";n.minTemp=NaN;n.maxTemp=NaN;this.listenTo(n,"axisSelfZoomed",this.handleAxisSelfZoom)},processGraph:function(n){AmCharts.isString(n.xAxis)&&(n.xAxis=this.getValueAxisById(n.xAxis));AmCharts.isString(n.yAxis)&&(n.yAxis=this.getValueAxisById(n.yAxis));n.xAxis||(n.xAxis=this.xAxes[0]);n.yAxis||(n.yAxis=this.yAxes[0]);n.valueAxis=n.yAxis},parseData:function(){var r,f,s,e,h,t,v,i,o,n;AmCharts.AmXYChart.base.parseData.call(this);this.chartData=[];var c=this.dataProvider,l=this.valueAxes,a=this.graphs,u;if(c)for(u=0;u<c.length;u++){for(r={axes:{},x:{},y:{}},f=c[u],s=0;s<l.length;s++)for(e=l[s].id,r.axes[e]={},r.axes[e].graphs={},h=0;h<a.length;h++)t=a[h],v=t.id,(t.xAxis.id==e||t.yAxis.id==e)&&(i={},i.serialDataItem=r,i.index=u,o={},n=Number(f[t.valueField]),isNaN(n)||(o.value=n),n=Number(f[t.xField]),isNaN(n)||(o.x=n),n=Number(f[t.yField]),isNaN(n)||(o.y=n),n=Number(f[t.errorField]),isNaN(n)||(o.error=n),i.values=o,this.processFields(t,i,f),i.serialDataItem=r,i.graph=t,r.axes[e].graphs[v]=i);this.chartData[u]=r}},formatString:function(n,t,i){var r=t.graph.numberFormatter;return r||(r=this.nf),n=AmCharts.formatValue(n,t.values,["value","x","y"],r),-1!=n.indexOf("[[")&&(n=AmCharts.formatDataContextValue(n,t.dataContext)),AmCharts.AmXYChart.base.formatString.call(this,n,t,i)},addChartScrollbar:function(n){var i,t;AmCharts.callMethod("destroy",[this.chartScrollbar,this.scrollbarH,this.scrollbarV]);n&&(this.chartScrollbar=n,this.scrollbarHeight=n.scrollbarHeight,i="backgroundColor backgroundAlpha selectedBackgroundColor selectedBackgroundAlpha scrollDuration resizeEnabled hideResizeGrips scrollbarHeight updateOnReleaseOnly".split(" "),this.hideYScrollbar||(t=new AmCharts.SimpleChartScrollbar(this.theme),t.skipEvent=!0,t.chart=this,this.listenTo(t,"zoomed",this.handleVSBZoom),AmCharts.copyProperties(n,t,i),t.rotate=!0,this.scrollbarV=t),this.hideXScrollbar||(t=new AmCharts.SimpleChartScrollbar(this.theme),t.skipEvent=!0,t.chart=this,this.listenTo(t,"zoomed",this.handleHSBZoom),AmCharts.copyProperties(n,t,i),t.rotate=!1,this.scrollbarH=t))},updateTrendLines:function(){for(var r=this.trendLines,n,t,i=0;i<r.length;i++)n=r[i],n=AmCharts.processObject(n,AmCharts.TrendLine,this.theme),r[i]=n,n.chart=this,t=n.valueAxis,AmCharts.isString(t)&&(n.valueAxis=this.getValueAxisById(t)),t=n.valueAxisX,AmCharts.isString(t)&&(n.valueAxisX=this.getValueAxisById(t)),n.valueAxis||(n.valueAxis=this.yAxes[0]),n.valueAxisX||(n.valueAxisX=this.xAxes[0])},updateMargins:function(){AmCharts.AmXYChart.base.updateMargins.call(this);var n=this.scrollbarV;n&&(this.getScrollbarPosition(n,!0,this.yAxes[0].position),this.adjustMargins(n,!0));(n=this.scrollbarH)&&(this.getScrollbarPosition(n,!1,this.xAxes[0].position),this.adjustMargins(n,!1))},updateScrollbars:function(){AmCharts.AmXYChart.base.updateScrollbars.call(this);var n=this.scrollbarV;n&&(this.updateChartScrollbar(n,!0),n.draw());(n=this.scrollbarH)&&(this.updateChartScrollbar(n,!1),n.draw())},zoomScrollbars:function(){var n=this.scrollbarH;n&&n.relativeZoom(this.widthMultiplier,-this.horizontalPosition/this.widthMultiplier);(n=this.scrollbarV)&&n.relativeZoom(this.heightMultiplier,-this.verticalPosition/this.heightMultiplier)},fitMultiplier:function(n){return n>this.maxZoomFactor&&(n=this.maxZoomFactor),n},handleHSBZoom:function(n){var t=this.fitMultiplier(n.multiplier),i;n=-n.position*t;i=-(this.plotAreaWidth*t-this.plotAreaWidth);n<i&&(n=i);this.widthMultiplier=t;this.horizontalPosition=n;this.zoomChart()},handleVSBZoom:function(n){var t=this.fitMultiplier(n.multiplier),i;n=-n.position*t;i=-(this.plotAreaHeight*t-this.plotAreaHeight);n<i&&(n=i);this.heightMultiplier=t;this.verticalPosition=n;this.zoomChart()},handleAxisSelfZoom:function(n){var t,i;for("H"==n.valueAxis.orientation?(t=this.fitMultiplier(n.multiplier),n=-n.position*t,i=-(this.plotAreaWidth*t-this.plotAreaWidth),n<i&&(n=i),this.horizontalPosition=n,this.widthMultiplier=t):(t=this.fitMultiplier(n.multiplier),n=-n.position*t,i=-(this.plotAreaHeight*t-this.plotAreaHeight),n<i&&(n=i),this.verticalPosition=n,this.heightMultiplier=t),this.zoomChart(),t=this.graphs,n=0;n<t.length;n++)t[n].setAnimationPlayed();this.zoomScrollbars()},handleCursorZoom:function(n){var t=this.widthMultiplier*this.plotAreaWidth/n.selectionWidth,i=this.heightMultiplier*this.plotAreaHeight/n.selectionHeight,t=this.fitMultiplier(t),i=this.fitMultiplier(i);this.horizontalPosition=(this.horizontalPosition-n.selectionX)*t/this.widthMultiplier;this.verticalPosition=(this.verticalPosition-n.selectionY)*i/this.heightMultiplier;this.widthMultiplier=t;this.heightMultiplier=i;this.zoomChart();this.zoomScrollbars()},removeChartScrollbar:function(){AmCharts.callMethod("destroy",[this.scrollbarH,this.scrollbarV]);this.scrollbarV=this.scrollbarH=null},handleReleaseOutside:function(n){AmCharts.AmXYChart.base.handleReleaseOutside.call(this,n);AmCharts.callMethod("handleReleaseOutside",[this.scrollbarH,this.scrollbarV])}});AmCharts.AmExport=AmCharts.Class({construct:function(n,t,i){var r=this;r.DEBUG=!1;r.chart=n;r.canvas=null;r.svgs=[];r.userCFG=t;r.buttonIcon="export.png";r.exportPNG=!0;r.exportPDF=!1;r.exportJPG=!1;r.exportSVG=!1;r.right=0;r.top=0;r.buttonRollOverColor="#EFEFEF";r.textRollOverColor="#CC0000";r.buttonTitle="Save chart as an image";r.buttonAlpha=.75;r.imageFileName="amChart";r.imageBackgroundColor="#FFFFFF";i&&r.init()},toCoordinate:function(n){return n===undefined?"auto":String(n).indexOf("%")!=-1?n:n+"px"},init:function(){var n=this,t=[],u,s,o,r,f,e,i;if(n.exportPNG&&t.push("png"),n.exportPDF&&t.push("pdf"),n.exportJPG&&t.push("jpg"),n.exportSVG&&t.push("svg"),u=[],t.length==1)s=t[0],u.push({format:s,iconTitle:n.buttonTitle,icon:n.chart.pathToImages+n.buttonIcon});else if(t.length>1){for(o=[],r=0;r<t.length;r++)o.push({format:t[r],title:t[r].toUpperCase()});u.push({onclick:function(){},icon:n.chart.pathToImages+n.buttonIcon,items:o})}f=n.color;f===undefined&&(f=n.chart.color);e=n.buttonColor;e===undefined&&(e="transparent");n.cfg={menuTop:n.toCoordinate(n.top),menuLeft:n.toCoordinate(n.left),menuRight:n.toCoordinate(n.right),menuBottom:n.toCoordinate(n.bottom),menuItems:u,menuItemStyle:{backgroundColor:e,opacity:n.buttonAlpha,rollOverBackgroundColor:n.buttonRollOverColor,color:f,rollOverColor:n.textRollOverColor,paddingTop:"6px",paddingRight:"6px",paddingBottom:"6px",paddingLeft:"6px",marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",textAlign:"left",textDecoration:"none",fontFamily:n.chart.fontFamily,fontSize:n.chart.fontSize+"px"},menuItemOutput:{backgroundColor:n.imageBackgroundColor,fileName:n.imageFileName,format:"png",output:"dataurlnewwindow",render:"browser",dpi:90,onclick:function(n,t,i){i.preventDefault();n.output(t)}},removeImagery:!0};n.processing={buffer:[],drawn:0,timer:0};typeof canvg!="undefined"&&typeof RGBColor!="undefined"&&(n.cfg.menuItemOutput.render="canvg");typeof saveAs!="undefined"&&(n.cfg.menuItemOutput.output="save");AmCharts.isIE&&AmCharts.IEversion<10&&(n.cfg.menuItemOutput.output="dataurlnewwindow");i=n.userCFG;i&&(i.menuItemOutput=AmCharts.extend(n.cfg.menuItemOutput,i.menuItemOutput||{}),i.menuItemStyle=AmCharts.extend(n.cfg.menuItemStyle,i.menuItemStyle||{}),n.cfg=AmCharts.extend(n.cfg,i));n.chart.AmExport=n;n.chart.addListener("rendered",function(){n.setup()});n.DEBUG&&(window.AmExport=n)},log:function(){console.log("AmExport: ",arguments)},setup:function(){var n=this;n.DEBUG==10&&n.log("SETUP START");!AmCharts.isIE||AmCharts.isIE&&AmCharts.IEversion>9?(n.generateButtons(),n.DEBUG==10&&n.log("SETUP END")):n.DEBUG==10&&n.log("< IE10 NOT SUPPORTED")},generateBinaryArray:function(n){for(var s=n.length,r=new Uint8Array(s/4*3|0),h=0,f=0,t=[0,0],e=0,i=0,u,o,c,l=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]);s--;)o=n.charCodeAt(h++),u=l[o-43],u!==255&&u!==c&&(t[1]=t[0],t[0]=o,i=i<<6|u,e++,e===4&&(r[f++]=i>>>16,t[1]!==61&&(r[f++]=i>>>8),t[0]!==61&&(r[f++]=i),e=0));return r},generateBlob:function(n,t){var f=this,u=t!="image/svg+xml"?n.indexOf(",")+1:0,e=n.substring(0,u),r=n,i=new Blob;return e.indexOf("base64")!=-1&&(r=f.generateBinaryArray(n.substring(u))),AmCharts.isIE&&AmCharts.IEversion<10?(i.data=r,i.size=r.length,i.type=t,i.encoding="base64"):i=new Blob([r],{type:t}),i},generatePDF:function(n){var i=this,t={output:function(){return""}},r=i.canvas.toDataURL("image/jpeg"),u=i.canvas.width*25.4/n.dpi,f=i.canvas.height*25.4/n.dpi;return window.jsPDF?(t=new jsPDF,t.addImage?t.addImage(r,"JPEG",0,0,u,f):alert("Missing jsPDF plugin; Please add the 'addImage' plugin.")):alert("Missing jsPDF lib; Don't forget to add the addImage plugin."),t},output:function(n,t){function r(){var r=null,u;i.DEBUG==10&&i.log("OUTPUT",n.format);n.format=="image/svg+xml"||n.format=="svg"?(r=i.generateSVG(),u=i.generateBlob(r,"image/svg+xml"),n.output=="save"?saveAs(u,n.fileName+".svg"):n.output=="datastring"||n.output=="datauristring"||n.output=="dataurlstring"?u="data:image/svg+xml;base64,"+btoa(r):n.output=="dataurlnewwindow"?window.open("data:image/svg+xml;base64,"+btoa(r)):n.output=="datauri"||n.output=="dataurl"?location.href="data:image/svg+xml;base64,"+btoa(r):n.output=="datastream"&&(location.href="data:image/octet-stream;base64,"+r),t&&t.apply(i,[u])):n.format=="application/pdf"||n.format=="pdf"?(r=i.generatePDF(n).output("dataurlstring"),u=i.generateBlob(r,"application/pdf"),n.output=="save"?saveAs(u,n.fileName+".pdf"):n.output=="datastring"||n.output=="datauristring"||n.output=="dataurlstring"?u=r:n.output=="dataurlnewwindow"?window.open(r):n.output=="datauri"||n.output=="dataurl"?location.href=r:n.output=="datastream"&&(location.href=r.replace("application/pdf","application/octet-stream")),t&&t.apply(i,[u])):n.format=="image/png"||n.format=="png"?(r=i.canvas.toDataURL("image/png"),u=i.generateBlob(r,"image/png"),n.output=="save"?saveAs(u,n.fileName+".png"):n.output=="datastring"||n.output=="datauristring"||n.output=="dataurlstring"?u=r:n.output=="dataurlnewwindow"?window.open(r):n.output=="datauri"||n.output=="dataurl"?location.href=r:n.output=="datastream"&&(location.href=r.replace("image/png","image/octet-stream")),t&&t.apply(i,[u])):(n.format=="image/jpeg"||n.format=="jpeg"||n.format=="jpg")&&(r=i.canvas.toDataURL("image/jpeg"),u=i.generateBlob(r,"image/jpeg"),n.output=="save"?saveAs(u,n.fileName+".jpg"):n.output=="datastring"||n.output=="datauristring"||n.output=="dataurlstring"?u=r:n.output=="dataurlnewwindow"?window.open(r):n.output=="datauri"||n.output=="dataurl"?location.href=r:n.output=="datastream"&&(location.href=r.replace("image/jpeg","image/octet-stream")),t&&t.apply(i,[u]))}var i=this;return n=AmCharts.extend(AmCharts.extend({},i.cfg.menuItemOutput),n||{}),i.chart.prepareForExport&&i.chart.prepareForExport(),i.generateOutput(n,r)},polifySVG:function(n){function i(n,i){for(var r=n.getElementsByTagName(i),u=r.length;u--;){if(t.cfg.removeImagery)r[u].parentNode.removeChild(r[u]);else{var f=document.createElement("img"),e=document.createElement("canvas"),o=e.getContext("2d");e.width=r[u].getAttribute("width");e.height=r[u].getAttribute("height");f.src=r[u].getAttribute("xlink:href");f.width=r[u].getAttribute("width");f.height=r[u].getAttribute("height");try{o.drawImage(f,0,0,f.width,f.height);datastring=e.toDataURL()}catch(s){datastring=f.src;t.log("Tainted canvas, reached browser CORS security; origin from imagery must be equal to the server!");throw new Error(s);}r[u].setAttribute("xlink:href",datastring)}t.DEBUG==10&&t.log("POLIFIED",r[u])}}var t=this;return AmCharts.IEversion==0&&(n.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.cfg.removeImagery||n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink")),t.DEBUG==10&&t.log("POLIFIED",n),i(n,"pattern"),i(n,"image"),t.svgs.push(n),n},generateSVG:function(){var u=this,t=document.createElement("svg"),i,r,n;for(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i=0;i<u.processing.buffer.length;i++)r=document.createElement("g"),n=u.processing.buffer[i],n[0].setAttribute("xmlns","http://www.w3.org/2000/svg"),n[0].setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("transform","translate("+n[1].x+","+n[1].y+")"),r.appendChild(n[0]),t.appendChild(r);return(new XMLSerializer).serializeToString(t)},generateOutput:function(n,t){function a(){var r,f,o,e;if(i.processing.buffer.length==i.processing.drawn||n.format=="svg")return i.DEBUG==10&&i.log("END DRAWING"),t();i.DEBUG==10&&i.log("DRAW",i.processing.drawn+1,"OF",i.processing.buffer.length);f=i.processing.buffer[i.processing.drawn];e=(new XMLSerializer).serializeToString(f[0]);o=f[1];i.DEBUG==10&&i.log("SOURCE",e);n.render=="browser"?(r=new Image,r.id=AmCharts.getUniqueId(),e="data:image/svg+xml;base64,"+btoa(e),r.onload=function(){s.drawImage(this,f[1].x,f[1].y);i.processing.drawn++;i.DEBUG==10&&i.log("ONLOAD",this);a()},r.onerror=function(){i.DEBUG==10&&i.log("ONERROR",this);s.drawImage(this,f[1].x,f[1].y);i.processing.drawn++;a()},r.src=e,i.DEBUG==10&&i.log("ADD",r),(r.complete||typeof r.complete=="undefined"||r.complete===undefined)&&(i.DEBUG==10&&i.log("FORCE ONLOAD",r),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",r.src=e)):n.render=="canvg"&&canvg(u,e,{offsetX:o.x,offsetY:o.y,ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,renderCallback:function(){i.processing.drawn++;a()}})}for(var l,i=this,v=[],e=[],u=document.createElement("canvas"),s=u.getContext("2d"),r={y:0,x:0},v=i.chart.div.getElementsByTagName("svg"),f=0;f<v.length;f++)e.push(v[f]);for(i.chart.legend&&i.chart.legend.position=="outside"&&(i.chart.legend.container.container.externalLegend=!0,e.push(i.chart.legend.container.container),i.cfg.legendPosition=="left"?r.x=i.chart.legend.div.offsetWidth:i.cfg.legendPosition=="top"?r.y=i.chart.legend.div.offsetHeight:typeof i.cfg.legendPosition=="object"&&(r.y=i.cfg.legendPosition.chartTop,r.x=i.cfg.legendPosition.chartLeft)),i.processing.buffer=[],i.processing.drawn=0,i.canvas=u,i.svgs=[],i.DEBUG==10&&i.log("START EXPORT"),i.DEBUG==10&&i.log("START BUFFERING"),f=0;f<e.length;f++){var h=e[f].parentNode,c=Number(h.style.left.slice(0,-2)),o=Number(h.style.top.slice(0,-2)),y=i.polifySVG(e[f].cloneNode(!0)),p=AmCharts.extend({},r);e[f].externalLegend?i.cfg.legendPosition=="right"?(r.y=0,r.x=i.chart.divRealWidth):i.cfg.legendPosition=="bottom"?r.y=o?o:r.y:typeof i.cfg.legendPosition=="object"?(r.x=i.cfg.legendPosition.left,r.y=i.cfg.legendPosition.top):(r.x=0,r.y=0):h.style.position=="relative"?(r.x=c?c:r.x,r.y=o?o:r.y):(r.x=c,r.y=o);i.processing.buffer.push([y,AmCharts.extend({},r)]);o&&c?r=p:r.y+=o?0:h.offsetHeight;i.DEBUG==10&&i.log("BUFFERED",e[f],r)}return i.DEBUG==10&&i.log("END BUFFERING"),i.DEBUG==10&&i.log("START DRAWING",n.render),i.DEBUG==10&&i.log("FILL BACKGROUND"),u.id=AmCharts.getUniqueId(),u.width=i.chart.divRealWidth,u.height=i.chart.divRealHeight,i.chart.legend&&i.chart.legend.position=="outside"&&(["left","right"].indexOf(i.cfg.legendPosition)!=-1?u.width+=i.chart.legend.div.offsetWidth:typeof i.cfg.legendPosition=="object"?(u.width+=i.cfg.legendPosition.width,u.height+=i.cfg.legendPosition.height):u.height+=i.chart.legend.div.offsetHeight),l={width:!1,height:!1},i.chart.periodSelector&&(["left","right"].indexOf(i.chart.periodSelector.position)!=-1?(u.width-=i.chart.periodSelector.div.offsetWidth+16,l.width=!0):(u.height-=i.chart.periodSelector.div.offsetHeight,l.height=!0)),i.chart.dataSetSelector&&(["left","right"].indexOf(i.chart.dataSetSelector.position)!=-1?l.width||(u.width-=i.chart.dataSetSelector.div.offsetWidth+16):u.height-=i.chart.dataSetSelector.div.offsetHeight),(n.backgroundColor||n.format=="image/jpeg")&&(s.fillStyle=n.backgroundColor||"#FFFFFF",s.fillRect(0,0,u.width,u.height)),a()},generateButtons:function(){function t(r){var l=document.createElement("ul"),s;for(l.setAttribute("style","list-style: none; margin: 0; padding: 0;"),s=0;s<r.length;s++){var h=document.createElement("li"),o=document.createElement("img"),f=document.createElement("a"),u=r[s],c=null,e=AmCharts.extend(AmCharts.extend({},n.cfg.menuItemStyle),r[s]);u=AmCharts.extend(AmCharts.extend({},n.cfg.menuItemOutput),u);u.icon&&(o.alt="",o.src=u.icon,o.setAttribute("style","margin: 0 auto;border: none;outline: none"),u.iconTitle&&(o.title=u.iconTitle),f.appendChild(o));f.href="#";u.title&&(o.setAttribute("style","margin: 0px 5px;"),f.innerHTML+=u.title);f.setAttribute("style","display: block;");AmCharts.extend(f.style,e);f.onclick=u.onclick.bind(f,n,u);h.appendChild(f);u.items&&(c=t(u.items),h.appendChild(c),h.onmouseover=function(){c.style.display="block"},h.onmouseout=function(){c.style.display="none"},c.style.display="none");l.appendChild(h);f.onmouseover=function(){this.style.backgroundColor=e.rollOverBackgroundColor;this.style.color=e.rollOverColor;this.style.borderColor=e.rollOverBorderColor};f.onmouseout=function(){this.style.backgroundColor=e.backgroundColor;this.style.color=e.color;this.style.borderColor=e.borderColor}}return i++,n.DEBUG==10&&n.log("MENU",l),l}var n=this,i=0;n.div?(div=n.div,div.innerHTML=""):(div=document.createElement("div"),n.div=div);div.setAttribute("style","position: absolute;top:"+n.cfg.menuTop+";right:"+n.cfg.menuRight+";bottom:"+n.cfg.menuBottom+";left:"+n.cfg.menuLeft+";");div.setAttribute("class","amExportButton");div.appendChild(t(n.cfg.menuItems));n.chart.containerDiv.appendChild(div)}}),function(){function n(){var n={};return n.FRAMERATE=30,n.MAX_VIRTUAL_PIXELS=3e4,n.init=function(t){var i=0;n.UniqueId=function(){return i++,"canvg"+i};n.Definitions={};n.Styles={};n.Animations=[];n.Images=[];n.ctx=t;n.ViewPort=new function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(n,t){this.viewPorts.push({width:n,height:t})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(n){return n!=null&&typeof n=="number"?n:n=="x"?this.width():n=="y"?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},n.init(),n.ImagesLoaded=function(){for(var t=0;t<n.Images.length;t++)if(!n.Images[t].loaded)return!1;return!0},n.trim=function(n){return n.replace(/^\s+|\s+$/g,"")},n.compressSpaces=function(n){return n.replace(/[\s\r\t\n]+/gm," ")},n.ajax=function(n){var t;return(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t)?(t.open("GET",n,!1),t.send(null),t.responseText):null},n.parseXml=function(n){var i,t;return window.DOMParser?(i=new DOMParser,i.parseFromString(n,"text/xml")):(n=n.replace(/<!DOCTYPE svg[^>]*>/,""),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n),t)},n.Property=function(n,t){this.name=n;this.value=t},n.Property.prototype.getValue=function(){return this.value},n.Property.prototype.hasValue=function(){return this.value!=null&&this.value!==""},n.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var n=parseFloat(this.value);return(this.value+"").match(/%$/)&&(n=n/100),n},n.Property.prototype.valueOrDefault=function(n){return this.hasValue()?this.value:n},n.Property.prototype.numValueOrDefault=function(n){return this.hasValue()?this.numValue():n},n.Property.prototype.addOpacity=function(t){var r=this.value,i;return t!=null&&t!=""&&typeof this.value=="string"&&(i=new RGBColor(this.value),i.ok&&(r="rgba("+i.r+", "+i.g+", "+i.b+", "+t+")")),new n.Property(this.name,r)},n.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),n.Definitions[t]},n.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0},n.Property.prototype.getFillStyleDefinition=function(t,i){var r=this.getDefinition(),u;return r!=null&&r.createGradient?r.createGradient(n.ctx,t,i):r!=null&&r.createPattern?(r.getHrefAttribute().hasValue()&&(u=r.attribute("patternTransform"),r=r.getHrefAttribute().getDefinition(),u.hasValue()&&(r.attribute("patternTransform",!0).value=u.value)),r.createPattern(n.ctx,t)):null},n.Property.prototype.getDPI=function(){return 96},n.Property.prototype.getEM=function(t){var i=12,r=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize);return r.hasValue()&&(i=r.toPixels(t)),i},n.Property.prototype.getUnits=function(){var n=this.value+"";return n.replace(/[0-9\.\-]/g,"")},n.Property.prototype.toPixels=function(t,i){var r,u;return this.hasValue()?(r=this.value+"",r.match(/em$/))?this.numValue()*this.getEM(t):r.match(/ex$/)?this.numValue()*this.getEM(t)/2:r.match(/px$/)?this.numValue():r.match(/pt$/)?this.numValue()*this.getDPI(t)*(1/72):r.match(/pc$/)?this.numValue()*15:r.match(/cm$/)?this.numValue()*this.getDPI(t)/2.54:r.match(/mm$/)?this.numValue()*this.getDPI(t)/25.4:r.match(/in$/)?this.numValue()*this.getDPI(t):r.match(/%$/)?this.numValue()*n.ViewPort.ComputeSize(t):(u=this.numValue(),i&&u<1)?u*n.ViewPort.ComputeSize(t):u:0},n.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var n=this.value+"";return n.match(/s$/)?this.numValue()*1e3:(n.match(/ms$/),this.numValue())},n.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var n=this.value+"";return n.match(/deg$/)?this.numValue()*(Math.PI/180):n.match(/grad$/)?this.numValue()*(Math.PI/200):n.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},n.Font=new function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(t,i,r,u,f,e){var o=e!=null?this.Parse(e):this.CreateFont("","","","","",n.ctx.font);return{fontFamily:f||o.fontFamily,fontSize:u||o.fontSize,fontStyle:t||o.fontStyle,fontWeight:r||o.fontWeight,fontVariant:i||o.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(i){for(var e={},u=n.trim(n.compressSpaces(i||"")).split(" "),f={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},o="",r=0;r<u.length;r++)f.fontStyle||t.Styles.indexOf(u[r])==-1?f.fontVariant||t.Variants.indexOf(u[r])==-1?f.fontWeight||t.Weights.indexOf(u[r])==-1?f.fontSize?u[r]!="inherit"&&(o+=u[r]):(u[r]!="inherit"&&(e.fontSize=u[r].split("/")[0]),f.fontStyle=f.fontVariant=f.fontWeight=f.fontSize=!0):(u[r]!="inherit"&&(e.fontWeight=u[r]),f.fontStyle=f.fontVariant=f.fontWeight=!0):(u[r]!="inherit"&&(e.fontVariant=u[r]),f.fontStyle=f.fontVariant=!0):(u[r]!="inherit"&&(e.fontStyle=u[r]),f.fontStyle=!0);return o!=""&&(e.fontFamily=o),e}},n.ToNumberArray=function(t){for(var i=n.trim(n.compressSpaces((t||"").replace(/,/g," "))).split(" "),r=0;r<i.length;r++)i[r]=parseFloat(i[r]);return i},n.Point=function(n,t){this.x=n;this.y=t},n.Point.prototype.angleTo=function(n){return Math.atan2(n.y-this.y,n.x-this.x)},n.Point.prototype.applyTransform=function(n){var t=this.x*n[0]+this.y*n[2]+n[4],i=this.x*n[1]+this.y*n[3]+n[5];this.x=t;this.y=i},n.CreatePoint=function(t){var i=n.ToNumberArray(t);return new n.Point(i[0],i[1])},n.CreatePath=function(t){for(var r=n.ToNumberArray(t),u=[],i=0;i<r.length;i+=2)u.push(new n.Point(r[i],r[i+1]));return u},n.BoundingBox=function(n,t,r,u){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(n,t){n!=null&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=n,this.x2=n),n<this.x1&&(this.x1=n),n>this.x2&&(this.x2=n));t!=null&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))};this.addX=function(n){this.addPoint(n,null)};this.addY=function(n){this.addPoint(null,n)};this.addBoundingBox=function(n){this.addPoint(n.x1,n.y1);this.addPoint(n.x2,n.y2)};this.addQuadraticCurve=function(n,t,i,r,u,f){var e=n+2/3*(i-n),o=t+2/3*(r-t),s=e+1/3*(u-n),h=o+1/3*(f-t);this.addBezierCurve(n,t,e,s,o,h,u,f)};this.addBezierCurve=function(n,t,r,u,f,e,o,s){var h=[n,t],p=[r,u],d=[f,e],w=[o,s],a,k,v,y;for(this.addPoint(h[0],h[1]),this.addPoint(w[0],w[1]),i=0;i<=1;i++){var c=function(n){return Math.pow(1-n,3)*h[i]+3*Math.pow(1-n,2)*n*p[i]+3*(1-n)*Math.pow(n,2)*d[i]+Math.pow(n,3)*w[i]},l=6*h[i]-12*p[i]+6*d[i],b=-3*h[i]+9*p[i]-9*d[i]+3*w[i],g=3*p[i]-3*h[i];if(b==0){if(l==0)continue;a=-g/l;0<a&&a<1&&(i==0&&this.addX(c(a)),i==1&&this.addY(c(a)));continue}(k=Math.pow(l,2)-4*g*b,k<0)||(v=(-l+Math.sqrt(k))/(2*b),0<v&&v<1&&(i==0&&this.addX(c(v)),i==1&&this.addY(c(v))),y=(-l-Math.sqrt(k))/(2*b),0<y&&y<1&&(i==0&&this.addX(c(y)),i==1&&this.addY(c(y))))}};this.isPointInBox=function(n,t){return this.x1<=n&&n<=this.x2&&this.y1<=t&&t<=this.y2};this.addPoint(n,t);this.addPoint(r,u)},n.Transform=function(t){var u=this,r,i;for(this.Type={},this.Type.translate=function(t){this.p=n.CreatePoint(t);this.apply=function(n){n.translate(this.p.x||0,this.p.y||0)};this.unapply=function(n){n.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(n){n.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var i=n.ToNumberArray(t);this.angle=new n.Property("angle",i[0]);this.cx=i[1]||0;this.cy=i[2]||0;this.apply=function(n){n.translate(this.cx,this.cy);n.rotate(this.angle.toRadians());n.translate(-this.cx,-this.cy)};this.unapply=function(n){n.translate(this.cx,this.cy);n.rotate(-1*this.angle.toRadians());n.translate(-this.cx,-this.cy)};this.applyToPoint=function(n){var t=this.angle.toRadians();n.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);n.applyTransform([Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0]);n.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=n.CreatePoint(t);this.apply=function(n){n.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(n){n.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(n){n.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=n.ToNumberArray(t);this.apply=function(n){n.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.applyToPoint=function(n){n.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=u.Type.matrix;this.base(t);this.angle=new n.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(n){this.base=u.Type.SkewBase;this.base(n);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(n){this.base=u.Type.SkewBase;this.base(n);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(n){for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(n)},this.unapply=function(n){for(var t=this.transforms.length-1;t>=0;t--)this.transforms[t].unapply(n)},this.applyToPoint=function(n){for(var t=0;t<this.transforms.length;t++)this.transforms[t].applyToPoint(n)},r=n.trim(n.compressSpaces(t)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),i=0;i<r.length;i++){var f=n.trim(r[i].split("(")[0]),o=r[i].split("(")[1].replace(")",""),e=new this.Type[f](o);e.type=f;this.transforms.push(e)}},n.AspectRatio=function(t,i,r,u,f,e,o,s,h,c){i=n.compressSpaces(i);i=i.replace(/^defer\s/,"");var w=i.split(" ")[0]||"xMidYMid",l=i.split(" ")[1]||"meet",y=r/u,p=f/e,a=Math.min(y,p),v=Math.max(y,p);l=="meet"&&(u*=a,e*=a);l=="slice"&&(u*=v,e*=v);h=new n.Property("refX",h);c=new n.Property("refY",c);h.hasValue()&&c.hasValue()?t.translate(-a*h.toPixels("x"),-a*c.toPixels("y")):(w.match(/^xMid/)&&(l=="meet"&&a==p||l=="slice"&&v==p)&&t.translate(r/2-u/2,0),w.match(/YMid$/)&&(l=="meet"&&a==y||l=="slice"&&v==y)&&t.translate(0,f/2-e/2),w.match(/^xMax/)&&(l=="meet"&&a==p||l=="slice"&&v==p)&&t.translate(r-u,0),w.match(/YMax$/)&&(l=="meet"&&a==y||l=="slice"&&v==y)&&t.translate(0,f-e));w=="none"?t.scale(y,p):l=="meet"?t.scale(a,a):l=="slice"&&t.scale(v,v);t.translate(o==null?0:-o,s==null?0:-s)},n.Element={},n.EmptyProperty=new n.Property("EMPTY",""),n.Element.ElementBase=function(t){var f,h,o,s,e,r,i,u;if(this.attributes={},this.styles={},this.children=[],this.attribute=function(t,i){var r=this.attributes[t];return r!=null?r:(i==!0&&(r=new n.Property(t,""),this.attributes[t]=r),r||n.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if(t.match(/:href$/))return this.attributes[t];return n.EmptyProperty},this.style=function(t,i){var r=this.styles[t],u,e,f;return r!=null?r:(u=this.attribute(t),u!=null&&u.hasValue())?(this.styles[t]=u,u):(e=this.parent,e!=null&&(f=e.style(t),f!=null&&f.hasValue()))?f:(i==!0&&(r=new n.Property(t,""),this.styles[t]=r),r||n.EmptyProperty)},this.render=function(n){var t,i;this.style("display").value!="none"&&this.attribute("visibility").value!="hidden"&&(n.save(),this.attribute("mask").hasValue()?(t=this.attribute("mask").getDefinition(),t!=null&&t.apply(n,this)):this.style("filter").hasValue()?(i=this.style("filter").getDefinition(),i!=null&&i.apply(n,this)):(this.setContext(n),this.renderChildren(n),this.clearContext(n)),n.restore())},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(n){for(var t=0;t<this.children.length;t++)this.children[t].render(n)},this.addChild=function(t,i){var r=t;i&&(r=n.CreateElement(t));r.parent=this;this.children.push(r)},t!=null&&t.nodeType==1){for(u=0;u<t.childNodes.length;u++)f=t.childNodes[u],f.nodeType==1&&this.addChild(f,!0),this.captureTextNodes&&f.nodeType==3&&(h=f.nodeValue||f.text||"",n.trim(n.compressSpaces(h))!=""&&this.addChild(new n.Element.tspan(f),!1));for(u=0;u<t.attributes.length;u++)o=t.attributes[u],this.attributes[o.nodeName]=new n.Property(o.nodeName,o.nodeValue);if(i=n.Styles[t.nodeName],i!=null)for(r in i)this.styles[r]=i[r];if(this.attribute("class").hasValue())for(s=n.compressSpaces(this.attribute("class").value).split(" "),e=0;e<s.length;e++){if(i=n.Styles["."+s[e]],i!=null)for(r in i)this.styles[r]=i[r];if(i=n.Styles[t.nodeName+"."+s[e]],i!=null)for(r in i)this.styles[r]=i[r]}if(this.attribute("id").hasValue()&&(i=n.Styles["#"+this.attribute("id").value],i!=null))for(r in i)this.styles[r]=i[r];if(this.attribute("style").hasValue())for(i=this.attribute("style").value.split(";"),u=0;u<i.length;u++)if(n.trim(i[u])!=""){var c=i[u].split(":"),r=n.trim(c[0]),l=n.trim(c[1]);this.styles[r]=new n.Property(r,l)}this.attribute("id").hasValue()&&n.Definitions[this.attribute("id").value]==null&&(n.Definitions[this.attribute("id").value]=this)}},n.Element.RenderedElementBase=function(t){this.base=n.Element.ElementBase;this.base(t);this.setContext=function(t){var i,u,r,o,f,e,h,s;this.style("fill").isUrlDefinition()?(u=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")),u!=null&&(t.fillStyle=u)):this.style("fill").hasValue()&&(i=this.style("fill"),i.value=="currentColor"&&(i.value=this.style("color").value),t.fillStyle=i.value=="none"?"rgba(0,0,0,0)":i.value);this.style("fill-opacity").hasValue()&&(i=new n.Property("fill",t.fillStyle),i=i.addOpacity(this.style("fill-opacity").value),t.fillStyle=i.value);this.style("stroke").isUrlDefinition()?(u=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")),u!=null&&(t.strokeStyle=u)):this.style("stroke").hasValue()&&(r=this.style("stroke"),r.value=="currentColor"&&(r.value=this.style("color").value),t.strokeStyle=r.value=="none"?"rgba(0,0,0,0)":r.value);this.style("stroke-opacity").hasValue()&&(r=new n.Property("stroke",t.strokeStyle),r=r.addOpacity(this.style("stroke-opacity").value),t.strokeStyle=r.value);this.style("stroke-width").hasValue()&&(o=this.style("stroke-width").toPixels(),t.lineWidth=o==0?.001:o);this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value);this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value);this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value);this.style("stroke-dasharray").hasValue()&&(f=n.ToNumberArray(this.style("stroke-dasharray").value),typeof t.setLineDash!="undefined"?t.setLineDash(f):typeof t.webkitLineDash!="undefined"?t.webkitLineDash=f:typeof t.mozDash!="undefined"&&(t.mozDash=f),e=this.style("stroke-dashoffset").numValueOrDefault(1),typeof t.lineDashOffset!="undefined"?t.lineDashOffset=e:typeof t.webkitLineDashOffset!="undefined"?t.webkitLineDashOffset=e:typeof t.mozDashOffset!="undefined"&&(t.mozDashOffset=e));typeof t.font!="undefined"&&(t.font=n.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString());this.attribute("transform").hasValue()&&(h=new n.Transform(this.attribute("transform").value),h.apply(t));this.style("clip-path").hasValue()&&(s=this.style("clip-path").getDefinition(),s!=null&&s.apply(t));this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},n.Element.RenderedElementBase.prototype=new n.Element.ElementBase,n.Element.PathElementBase=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.path=function(t){return t!=null&&t.beginPath(),new n.BoundingBox};this.renderChildren=function(t){var i,u,r;if(this.path(t),n.Mouse.checkPath(this,t),t.fillStyle!=""&&(this.attribute("fill-rule").hasValue()?t.fill(this.attribute("fill-rule").value):t.fill()),t.strokeStyle!=""&&t.stroke(),i=this.getMarkers(),i!=null){if(this.style("marker-start").isUrlDefinition()&&(r=this.style("marker-start").getDefinition(),r.render(t,i[0][0],i[0][1])),this.style("marker-mid").isUrlDefinition())for(r=this.style("marker-mid").getDefinition(),u=1;u<i.length-1;u++)r.render(t,i[u][0],i[u][1]);this.style("marker-end").isUrlDefinition()&&(r=this.style("marker-end").getDefinition(),r.render(t,i[i.length-1][0],i[i.length-1][1]))}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}},n.Element.PathElementBase.prototype=new n.Element.RenderedElementBase,n.Element.svg=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.baseClearContext=this.clearContext;this.clearContext=function(t){this.baseClearContext(t);n.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(t){var i,r,f,e;if(t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y")),i=n.ViewPort.width(),r=n.ViewPort.height(),this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),typeof this.root=="undefined"&&(i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),f=0,e=0,this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(f=-this.attribute("refX").toPixels("x"),e=-this.attribute("refY").toPixels("y")),t.beginPath(),t.moveTo(f,e),t.lineTo(i,e),t.lineTo(i,r),t.lineTo(f,r),t.closePath(),t.clip()),n.ViewPort.SetCurrent(i,r),this.attribute("viewBox").hasValue()){var u=n.ToNumberArray(this.attribute("viewBox").value),o=u[0],s=u[1];i=u[2];r=u[3];n.AspectRatio(t,this.attribute("preserveAspectRatio").value,n.ViewPort.width(),i,n.ViewPort.height(),r,o,s,this.attribute("refX").value,this.attribute("refY").value);n.ViewPort.RemoveCurrent();n.ViewPort.SetCurrent(u[2],u[3])}}},n.Element.svg.prototype=new n.Element.RenderedElementBase,n.Element.rect=function(t){this.base=n.Element.PathElementBase;this.base(t);this.path=function(t){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y"),u=this.attribute("rx").toPixels("x"),o=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(o=u),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(u=o),u=Math.min(u,f/2),o=Math.min(o,e/2),t!=null&&(t.beginPath(),t.moveTo(i+u,r),t.lineTo(i+f-u,r),t.quadraticCurveTo(i+f,r,i+f,r+o),t.lineTo(i+f,r+e-o),t.quadraticCurveTo(i+f,r+e,i+f-u,r+e),t.lineTo(i+u,r+e),t.quadraticCurveTo(i,r+e,i,r+e-o),t.lineTo(i,r+o),t.quadraticCurveTo(i,r,i+u,r),t.closePath()),new n.BoundingBox(i,r,i+f,r+e)}},n.Element.rect.prototype=new n.Element.PathElementBase,n.Element.circle=function(t){this.base=n.Element.PathElementBase;this.base(t);this.path=function(t){var r=this.attribute("cx").toPixels("x"),u=this.attribute("cy").toPixels("y"),i=this.attribute("r").toPixels();return t!=null&&(t.beginPath(),t.arc(r,u,i,0,Math.PI*2,!0),t.closePath()),new n.BoundingBox(r-i,u-i,r+i,u+i)}},n.Element.circle.prototype=new n.Element.PathElementBase,n.Element.ellipse=function(t){this.base=n.Element.PathElementBase;this.base(t);this.path=function(t){var e=4*((Math.sqrt(2)-1)/3),f=this.attribute("rx").toPixels("x"),u=this.attribute("ry").toPixels("y"),i=this.attribute("cx").toPixels("x"),r=this.attribute("cy").toPixels("y");return t!=null&&(t.beginPath(),t.moveTo(i,r-u),t.bezierCurveTo(i+e*f,r-u,i+f,r-e*u,i+f,r),t.bezierCurveTo(i+f,r+e*u,i+e*f,r+u,i,r+u),t.bezierCurveTo(i-e*f,r+u,i-f,r+e*u,i-f,r),t.bezierCurveTo(i-f,r-e*u,i-e*f,r-u,i,r-u),t.closePath()),new n.BoundingBox(i-f,r-u,i+f,r+u)}},n.Element.ellipse.prototype=new n.Element.PathElementBase,n.Element.line=function(t){this.base=n.Element.PathElementBase;this.base(t);this.getPoints=function(){return[new n.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new n.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(t){var i=this.getPoints();return t!=null&&(t.beginPath(),t.moveTo(i[0].x,i[0].y),t.lineTo(i[1].x,i[1].y)),new n.BoundingBox(i[0].x,i[0].y,i[1].x,i[1].y)};this.getMarkers=function(){var n=this.getPoints(),t=n[0].angleTo(n[1]);return[[n[0],t],[n[1],t]]}},n.Element.line.prototype=new n.Element.PathElementBase,n.Element.polyline=function(t){this.base=n.Element.PathElementBase;this.base(t);this.points=n.CreatePath(this.attribute("points").value);this.path=function(t){var r=new n.BoundingBox(this.points[0].x,this.points[0].y),i;for(t!=null&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y)),i=1;i<this.points.length;i++)r.addPoint(this.points[i].x,this.points[i].y),t!=null&&t.lineTo(this.points[i].x,this.points[i].y);return r};this.getMarkers=function(){for(var n=[],t=0;t<this.points.length-1;t++)n.push([this.points[t],this.points[t].angleTo(this.points[t+1])]);return n.push([this.points[this.points.length-1],n[n.length-1][1]]),n}},n.Element.polyline.prototype=new n.Element.PathElementBase,n.Element.polygon=function(t){this.base=n.Element.polyline;this.base(t);this.basePath=this.path;this.path=function(n){var t=this.basePath(n);return n!=null&&(n.lineTo(this.points[0].x,this.points[0].y),n.closePath()),t}},n.Element.polygon.prototype=new n.Element.polyline,n.Element.path=function(t){this.base=n.Element.PathElementBase;this.base(t);var i=this.attribute("d").value;i=i.replace(/,/gm," ");i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");i=i.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");i=i.replace(/([0-9])([+\-])/gm,"$1 $2");i=i.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");i=i.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");i=n.compressSpaces(i);i=n.trim(i);this.PathParser=new function(t){this.tokens=t.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new n.Point(0,0);this.control=new n.Point(0,0);this.current=new n.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){return this.isEnd()?!0:this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1};this.getToken=function(){return this.i++,this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var t=new n.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)};this.getAsControlPoint=function(){var n=this.getPoint();return this.control=n,n};this.getAsCurrentPoint=function(){var n=this.getPoint();return this.current=n,n};this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t")return this.current;return new n.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)};this.makeAbsolute=function(n){return this.isRelativeCommand()&&(n.x+=this.current.x,n.y+=this.current.y),n};this.addMarker=function(n,t,i){i!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(i));this.addMarkerAngle(n,t==null?null:t.angleTo(n))};this.addMarkerAngle=function(n,t){this.points.push(n);this.angles.push(t)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var t,n=0;n<this.angles.length;n++)if(this.angles[n]==null)for(t=n+1;t<this.angles.length;t++)if(this.angles[t]!=null){this.angles[n]=this.angles[t];break}return this.angles}}(i);this.path=function(t){var i=this.PathParser,c,ft,f,y,s,u,r,w;for(i.reset(),c=new n.BoundingBox,t!=null&&t.beginPath();!i.isEnd();){i.nextCommand();switch(i.command){case"M":case"m":for(f=i.getAsCurrentPoint(),i.addMarker(f),c.addPoint(f.x,f.y),t!=null&&t.moveTo(f.x,f.y),i.start=i.current;!i.isCommandOrEnd();)f=i.getAsCurrentPoint(),i.addMarker(f,i.start),c.addPoint(f.x,f.y),t!=null&&t.lineTo(f.x,f.y);break;case"L":case"l":while(!i.isCommandOrEnd())ft=i.current,f=i.getAsCurrentPoint(),i.addMarker(f,ft),c.addPoint(f.x,f.y),t!=null&&t.lineTo(f.x,f.y);break;case"H":case"h":while(!i.isCommandOrEnd())y=new n.Point((i.isRelativeCommand()?i.current.x:0)+i.getScalar(),i.current.y),i.addMarker(y,i.current),i.current=y,c.addPoint(i.current.x,i.current.y),t!=null&&t.lineTo(i.current.x,i.current.y);break;case"V":case"v":while(!i.isCommandOrEnd())y=new n.Point(i.current.x,(i.isRelativeCommand()?i.current.y:0)+i.getScalar()),i.addMarker(y,i.current),i.current=y,c.addPoint(i.current.x,i.current.y),t!=null&&t.lineTo(i.current.x,i.current.y);break;case"C":case"c":while(!i.isCommandOrEnd()){var s=i.current,l=i.getPoint(),u=i.getAsControlPoint(),r=i.getAsCurrentPoint();i.addMarker(r,u,l);c.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,r.x,r.y);t!=null&&t.bezierCurveTo(l.x,l.y,u.x,u.y,r.x,r.y)}break;case"S":case"s":while(!i.isCommandOrEnd()){var s=i.current,l=i.getReflectedControlPoint(),u=i.getAsControlPoint(),r=i.getAsCurrentPoint();i.addMarker(r,u,l);c.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,r.x,r.y);t!=null&&t.bezierCurveTo(l.x,l.y,u.x,u.y,r.x,r.y)}break;case"Q":case"q":while(!i.isCommandOrEnd()){var s=i.current,u=i.getAsControlPoint(),r=i.getAsCurrentPoint();i.addMarker(r,u,u);c.addQuadraticCurve(s.x,s.y,u.x,u.y,r.x,r.y);t!=null&&t.quadraticCurveTo(u.x,u.y,r.x,r.y)}break;case"T":case"t":while(!i.isCommandOrEnd())s=i.current,u=i.getReflectedControlPoint(),i.control=u,r=i.getAsCurrentPoint(),i.addMarker(r,u,u),c.addQuadraticCurve(s.x,s.y,u.x,u.y,r.x,r.y),t!=null&&t.quadraticCurveTo(u.x,u.y,r.x,r.y);break;case"A":case"a":while(!i.isCommandOrEnd()){var s=i.current,e=i.getScalar(),o=i.getScalar(),a=i.getScalar()*(Math.PI/180),ct=i.getScalar(),g=i.getScalar(),r=i.getAsCurrentPoint(),h=new n.Point(Math.cos(a)*(s.x-r.x)/2+Math.sin(a)*(s.y-r.y)/2,-Math.sin(a)*(s.x-r.x)/2+Math.cos(a)*(s.y-r.y)/2),nt=Math.pow(h.x,2)/Math.pow(e,2)+Math.pow(h.y,2)/Math.pow(o,2);nt>1&&(e*=Math.sqrt(nt),o*=Math.sqrt(nt));w=(ct==g?-1:1)*Math.sqrt((Math.pow(e,2)*Math.pow(o,2)-Math.pow(e,2)*Math.pow(h.y,2)-Math.pow(o,2)*Math.pow(h.x,2))/(Math.pow(e,2)*Math.pow(h.y,2)+Math.pow(o,2)*Math.pow(h.x,2)));isNaN(w)&&(w=0);var v=new n.Point(w*e*h.y/o,w*-o*h.x/e),p=new n.Point((s.x+r.x)/2+Math.cos(a)*v.x-Math.sin(a)*v.y,(s.y+r.y)/2+Math.sin(a)*v.x+Math.cos(a)*v.y),et=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))},b=function(n,t){return(n[0]*t[0]+n[1]*t[1])/(et(n)*et(t))},ot=function(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(b(n,t))},tt=ot([1,0],[(h.x-v.x)/e,(h.y-v.y)/o]),it=[(h.x-v.x)/e,(h.y-v.y)/o],rt=[(-h.x-v.x)/e,(-h.y-v.y)/o],k=ot(it,rt);b(it,rt)<=-1&&(k=Math.PI);b(it,rt)>=1&&(k=0);var ut=1-g?1:-1,d=tt+ut*(k/2),lt=new n.Point(p.x+e*Math.cos(d),p.y+o*Math.sin(d));if(i.addMarkerAngle(lt,d-ut*Math.PI/2),i.addMarkerAngle(r,d-ut*Math.PI),c.addPoint(r.x,r.y),t!=null){var b=e>o?e:o,st=e>o?1:e/o,ht=e>o?o/e:1;t.translate(p.x,p.y);t.rotate(a);t.scale(st,ht);t.arc(0,0,b,tt,tt+k,1-g);t.scale(1/st,1/ht);t.rotate(-a);t.translate(-p.x,-p.y)}}break;case"Z":case"z":t!=null&&t.closePath();i.current=i.start}}return c};this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),r=this.PathParser.getMarkerAngles(),i=[],n=0;n<t.length;n++)i.push([t[n],r[n]]);return i}},n.Element.path.prototype=new n.Element.PathElementBase,n.Element.pattern=function(t){this.base=n.Element.ElementBase;this.base(t);this.createPattern=function(t){var o=this.attribute("width").toPixels("x",!0),s=this.attribute("height").toPixels("y",!0),r=new n.Element.svg,i,u,f,e;for(r.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new n.Property("width",o+"px"),r.attributes.height=new n.Property("height",s+"px"),r.attributes.transform=new n.Property("transform",this.attribute("patternTransform").value),r.children=this.children,i=document.createElement("canvas"),i.width=o,i.height=s,u=i.getContext("2d"),this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&u.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0)),f=-1;f<=1;f++)for(e=-1;e<=1;e++)u.save(),u.translate(f*i.width,e*i.height),r.render(u),u.restore();return t.createPattern(i,"repeat")}},n.Element.pattern.prototype=new n.Element.ElementBase,n.Element.marker=function(t){this.base=n.Element.ElementBase;this.base(t);this.baseRender=this.render;this.render=function(t,i,r){t.translate(i.x,i.y);this.attribute("orient").valueOrDefault("auto")=="auto"&&t.rotate(r);this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth);t.save();var u=new n.Element.svg;u.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value);u.attributes.refX=new n.Property("refX",this.attribute("refX").value);u.attributes.refY=new n.Property("refY",this.attribute("refY").value);u.attributes.width=new n.Property("width",this.attribute("markerWidth").value);u.attributes.height=new n.Property("height",this.attribute("markerHeight").value);u.attributes.fill=new n.Property("fill",this.attribute("fill").valueOrDefault("black"));u.attributes.stroke=new n.Property("stroke",this.attribute("stroke").valueOrDefault("none"));u.children=this.children;u.render(t);t.restore();this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth);this.attribute("orient").valueOrDefault("auto")=="auto"&&t.rotate(-r);t.translate(-i.x,-i.y)}},n.Element.marker.prototype=new n.Element.ElementBase,n.Element.defs=function(t){this.base=n.Element.ElementBase;this.base(t);this.render=function(){}},n.Element.defs.prototype=new n.Element.ElementBase,n.Element.GradientBase=function(t){var i,r;for(this.base=n.Element.ElementBase,this.base(t),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[],i=0;i<this.children.length;i++)r=this.children[i],r.type=="stop"&&this.stops.push(r);this.getGradient=function(){};this.createGradient=function(t,i,r){var f=this,v,o,s,h,e,l,u,c,a;if(this.getHrefAttribute().hasValue()&&(f=this.getHrefAttribute().getDefinition()),v=function(t){if(r.hasValue()){var i=new n.Property("color",t);return i.addOpacity(r.value).value}return t},o=this.getGradient(t,i),o==null)return v(f.stops[f.stops.length-1].color);for(s=0;s<f.stops.length;s++)o.addColorStop(f.stops[s].offset,v(f.stops[s].color));return this.attribute("gradientTransform").hasValue()?(h=n.ViewPort.viewPorts[0],e=new n.Element.rect,e.attributes.x=new n.Property("x",-n.MAX_VIRTUAL_PIXELS/3),e.attributes.y=new n.Property("y",-n.MAX_VIRTUAL_PIXELS/3),e.attributes.width=new n.Property("width",n.MAX_VIRTUAL_PIXELS),e.attributes.height=new n.Property("height",n.MAX_VIRTUAL_PIXELS),l=new n.Element.g,l.attributes.transform=new n.Property("transform",this.attribute("gradientTransform").value),l.children=[e],u=new n.Element.svg,u.attributes.x=new n.Property("x",0),u.attributes.y=new n.Property("y",0),u.attributes.width=new n.Property("width",h.width),u.attributes.height=new n.Property("height",h.height),u.children=[l],c=document.createElement("canvas"),c.width=h.width,c.height=h.height,a=c.getContext("2d"),a.fillStyle=o,u.render(a),a.createPattern(c,"no-repeat")):o}},n.Element.GradientBase.prototype=new n.Element.ElementBase,n.Element.linearGradient=function(t){this.base=n.Element.GradientBase;this.base(t);this.getGradient=function(n,t){var i=t.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var r=this.gradientUnits=="objectBoundingBox"?i.x()+i.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),u=this.gradientUnits=="objectBoundingBox"?i.y()+i.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),f=this.gradientUnits=="objectBoundingBox"?i.x()+i.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),e=this.gradientUnits=="objectBoundingBox"?i.y()+i.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return r==f&&u==e?null:n.createLinearGradient(r,u,f,e)}},n.Element.linearGradient.prototype=new n.Element.GradientBase,n.Element.radialGradient=function(t){this.base=n.Element.GradientBase;this.base(t);this.getGradient=function(n,t){var i=t.getBoundingBox(),o;this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%");this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%");this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var r=this.gradientUnits=="objectBoundingBox"?i.x()+i.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),u=this.gradientUnits=="objectBoundingBox"?i.y()+i.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),f=r,e=u;return this.attribute("fx").hasValue()&&(f=this.gradientUnits=="objectBoundingBox"?i.x()+i.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(e=this.gradientUnits=="objectBoundingBox"?i.y()+i.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y")),o=this.gradientUnits=="objectBoundingBox"?(i.width()+i.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels(),n.createRadialGradient(f,e,0,r,u,o)}},n.Element.radialGradient.prototype=new n.Element.GradientBase,n.Element.stop=function(t){this.base=n.Element.ElementBase;this.base(t);this.offset=this.attribute("offset").numValue();this.offset<0&&(this.offset=0);this.offset>1&&(this.offset=1);var i=this.style("stop-color");this.style("stop-opacity").hasValue()&&(i=i.addOpacity(this.style("stop-opacity").value));this.color=i.value},n.Element.stop.prototype=new n.Element.ElementBase,n.Element.AnimateBase=function(t){this.base=n.Element.ElementBase;this.base(t);n.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var t=this.attribute("attributeType").value,n=this.attribute("attributeName").value;return t=="CSS"?this.parent.style(n,!0):this.parent.attribute(n,!0)};this.initialValue=null;this.initialUnits="";this.removed=!1;this.calcValue=function(){return""};this.update=function(n){var i,t,r;if(this.initialValue==null&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration)if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite")this.duration=0;else return this.attribute("fill").valueOrDefault("remove")!="remove"||this.removed?!1:(this.removed=!0,this.getProperty().value=this.initialValue,!0);return this.duration=this.duration+n,i=!1,this.begin<this.duration&&(t=this.calcValue(),this.attribute("type").hasValue()&&(r=this.attribute("type").value,t=r+"("+t+")"),this.getProperty().value=t,i=!0),i};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");this.values.hasValue()&&(this.values.value=this.values.value.split(";"));this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var i=t.progress*(this.values.value.length-1),r=Math.floor(i),u=Math.ceil(i);t.from=new n.Property("from",parseFloat(this.values.value[r]));t.to=new n.Property("to",parseFloat(this.values.value[u]));t.progress=(i-r)/(u-r)}else t.from=this.from,t.to=this.to;return t}},n.Element.AnimateBase.prototype=new n.Element.ElementBase,n.Element.animate=function(t){this.base=n.Element.AnimateBase;this.base(t);this.calcValue=function(){var n=this.progress(),t=n.from.numValue()+(n.to.numValue()-n.from.numValue())*n.progress;return t+this.initialUnits}},n.Element.animate.prototype=new n.Element.AnimateBase,n.Element.animateColor=function(t){this.base=n.Element.AnimateBase;this.base(t);this.calcValue=function(){var t=this.progress(),n=new RGBColor(t.from.value),i=new RGBColor(t.to.value);if(n.ok&&i.ok){var r=n.r+(i.r-n.r)*t.progress,u=n.g+(i.g-n.g)*t.progress,f=n.b+(i.b-n.b)*t.progress;return"rgb("+parseInt(r,10)+","+parseInt(u,10)+","+parseInt(f,10)+")"}return this.attribute("from").value}},n.Element.animateColor.prototype=new n.Element.AnimateBase,n.Element.animateTransform=function(t){this.base=n.Element.AnimateBase;this.base(t);this.calcValue=function(){for(var i=this.progress(),r=n.ToNumberArray(i.from.value),f=n.ToNumberArray(i.to.value),u="",t=0;t<r.length;t++)u+=r[t]+(f[t]-r[t])*i.progress+" ";return u}},n.Element.animateTransform.prototype=new n.Element.animate,n.Element.font=function(t){var r,i;for(this.base=n.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[],r=0;r<this.children.length;r++)i=this.children[r],i.type=="font-face"?(this.fontFace=i,i.style("font-family").hasValue()&&(n.Definitions[i.style("font-family").value]=this)):i.type=="missing-glyph"?this.missingGlyph=i:i.type=="glyph"&&(i.arabicForm!=""?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[i.unicode]=="undefined"&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)},n.Element.font.prototype=new n.Element.ElementBase,n.Element.fontface=function(t){this.base=n.Element.ElementBase;this.base(t);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()},n.Element.fontface.prototype=new n.Element.ElementBase,n.Element.missingglyph=function(t){this.base=n.Element.path;this.base(t);this.horizAdvX=0},n.Element.missingglyph.prototype=new n.Element.path,n.Element.glyph=function(t){this.base=n.Element.path;this.base(t);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value},n.Element.glyph.prototype=new n.Element.path,n.Element.text=function(t){this.captureTextNodes=!0;this.base=n.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(n){this.baseSetContext(n);this.style("dominant-baseline").hasValue()&&(n.textBaseline=this.style("dominant-baseline").value);this.style("alignment-baseline").hasValue()&&(n.textBaseline=this.style("alignment-baseline").value)};this.getBoundingBox=function(){return new n.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)};this.renderChildren=function(n){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.x+=this.getAnchorDelta(n,this,0);for(var t=0;t<this.children.length;t++)this.renderChild(n,this,t)};this.getAnchorDelta=function(n,t,i){var e=this.style("text-anchor").valueOrDefault("start"),u,r,f;if(e!="start"){for(u=0,r=i;r<t.children.length;r++){if(f=t.children[r],r>i&&f.attribute("x").hasValue())break;u+=f.measureTextRecursive(n)}return-1*(e=="end"?u:u/2)}return 0};this.renderChild=function(n,t,i){var r=t.children[i],i;for(r.attribute("x").hasValue()?r.x=r.attribute("x").toPixels("x")+this.getAnchorDelta(n,t,i):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),r.attribute("dx").hasValue()&&(this.x+=r.attribute("dx").toPixels("x")),r.x=this.x),this.x=r.x+r.measureText(n),r.attribute("y").hasValue()?r.y=r.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),r.attribute("dy").hasValue()&&(this.y+=r.attribute("dy").toPixels("y")),r.y=this.y),this.y=r.y,r.render(n),i=0;i<r.children.length;i++)this.renderChild(n,r,i)}},n.Element.text.prototype=new n.Element.RenderedElementBase,n.Element.TextElementBase=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.getGlyph=function(n,t,i){var u=t[i],r=null,f;return n.isArabic?(f="isolated",(i==0||t[i-1]==" ")&&i<t.length-2&&t[i+1]!=" "&&(f="terminal"),i>0&&t[i-1]!=" "&&i<t.length-2&&t[i+1]!=" "&&(f="medial"),i>0&&t[i-1]!=" "&&(i==t.length-1||t[i+1]==" ")&&(f="initial"),typeof n.glyphs[u]!="undefined"&&(r=n.glyphs[u][f],r==null&&n.glyphs[u].type=="glyph"&&(r=n.glyphs[u]))):r=n.glyphs[u],r==null&&(r=n.missingGlyph),r};this.renderChildren=function(t){var i=this.parent.style("font-family").getDefinition(),e,r,s,u,c;if(i!=null){var o=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize),h=this.parent.style("font-style").valueOrDefault(n.Font.Parse(n.ctx.font).fontStyle),f=this.getText();for(i.isRTL&&(f=f.split("").reverse().join("")),e=n.ToNumberArray(this.parent.attribute("dx").value),r=0;r<f.length;r++)s=this.getGlyph(i,f,r),u=o/i.fontFace.unitsPerEm,t.translate(this.x,this.y),t.scale(u,-u),c=t.lineWidth,t.lineWidth=t.lineWidth*i.fontFace.unitsPerEm/o,h=="italic"&&t.transform(1,0,.4,1,0,0),s.render(t),h=="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=c,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=o*(s.horizAdvX||i.horizAdvX)/i.fontFace.unitsPerEm,typeof e[r]=="undefined"||isNaN(e[r])||(this.x+=e[r]);return}t.fillStyle!=""&&t.fillText(n.compressSpaces(this.getText()),this.x,this.y);t.strokeStyle!=""&&t.strokeText(n.compressSpaces(this.getText()),this.x,this.y)};this.getText=function(){};this.measureTextRecursive=function(n){for(var i=this.measureText(n),t=0;t<this.children.length;t++)i+=this.children[t].measureTextRecursive(n);return i};this.measureText=function(t){var r=this.parent.style("font-family").getDefinition(),f,i,s,o,h;if(r!=null){var c=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize),e=0,u=this.getText();for(r.isRTL&&(u=u.split("").reverse().join("")),f=n.ToNumberArray(this.parent.attribute("dx").value),i=0;i<u.length;i++)s=this.getGlyph(r,u,i),e+=(s.horizAdvX||r.horizAdvX)*c/r.fontFace.unitsPerEm,typeof f[i]=="undefined"||isNaN(f[i])||(e+=f[i]);return e}return(o=n.compressSpaces(this.getText()),!t.measureText)?o.length*10:(t.save(),this.setContext(t),h=t.measureText(o).width,t.restore(),h)}},n.Element.TextElementBase.prototype=new n.Element.RenderedElementBase,n.Element.tspan=function(t){this.captureTextNodes=!0;this.base=n.Element.TextElementBase;this.base(t);this.text=t.nodeValue||t.text||"";this.getText=function(){return this.text}},n.Element.tspan.prototype=new n.Element.TextElementBase,n.Element.tref=function(t){this.base=n.Element.TextElementBase;this.base(t);this.getText=function(){var n=this.getHrefAttribute().getDefinition();if(n!=null)return n.children[0].getText()}},n.Element.tref.prototype=new n.Element.TextElementBase,n.Element.a=function(t){this.base=n.Element.TextElementBase;this.base(t);this.hasText=!0;for(var i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType!=3&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(t){var r,i;this.hasText?(this.baseRenderChildren(t),r=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize),n.Mouse.checkBoundingBox(this,new n.BoundingBox(this.x,this.y-r.toPixels("y"),this.x+this.measureText(t),this.y))):(i=new n.Element.g,i.children=this.children,i.parent=this,i.render(t))};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){n.ctx.canvas.style.cursor="pointer"}},n.Element.a.prototype=new n.Element.TextElementBase,n.Element.image=function(t){var i,r,u;this.base=n.Element.RenderedElementBase;this.base(t);i=this.getHrefAttribute().value;r=i.match(/\.svg$/);n.Images.push(this);this.loaded=!1;r?(this.img=n.ajax(i),this.loaded=!0):(this.img=document.createElement("img"),u=this,this.img.onload=function(){u.loaded=!0},this.img.onerror=function(){typeof console!="undefined"&&(console.log('ERROR: image "'+i+'" not found'),u.loaded=!0)},this.img.src=i);this.renderChildren=function(t){var f=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),u=this.attribute("height").toPixels("y");i!=0&&u!=0&&(t.save(),r?t.drawSvg(this.img,f,e,i,u):(t.translate(f,e),n.AspectRatio(t,this.attribute("preserveAspectRatio").value,i,this.img.width,u,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())};this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),u=this.attribute("height").toPixels("y");return new n.BoundingBox(t,i,t+r,i+u)}},n.Element.image.prototype=new n.Element.RenderedElementBase,n.Element.g=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.getBoundingBox=function(){for(var i=new n.BoundingBox,t=0;t<this.children.length;t++)i.addBoundingBox(this.children[t].getBoundingBox());return i}},n.Element.g.prototype=new n.Element.RenderedElementBase,n.Element.symbol=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(t){if(this.baseSetContext(t),this.attribute("viewBox").hasValue()){var i=n.ToNumberArray(this.attribute("viewBox").value),r=i[0],u=i[1];width=i[2];height=i[3];n.AspectRatio(t,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,r,u);n.ViewPort.SetCurrent(i[2],i[3])}}},n.Element.symbol.prototype=new n.Element.RenderedElementBase,n.Element.style=function(t){var r,h,i,c,l,s,u,d,e,f,a,nt;for(this.base=n.Element.ElementBase,this.base(t),r="",i=0;i<t.childNodes.length;i++)r+=t.childNodes[i].nodeValue;for(r=r.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),r=n.compressSpaces(r),h=r.split("}"),i=0;i<h.length;i++)if(n.trim(h[i])!=""){var w=h[i].split("{"),b=w[0].split(","),o=w[1].split(";");for(c=0;c<b.length;c++)if(l=n.trim(b[c]),l!=""){for(s={},u=0;u<o.length;u++){var v=o[u].indexOf(":"),y=o[u].substr(0,v),k=o[u].substr(v+1,o[u].length-v);y!=null&&k!=null&&(s[n.trim(y)]=new n.Property(n.trim(y),n.trim(k)))}if(n.Styles[l]=s,l=="@font-face")for(d=s["font-family"].value.replace(/"/g,""),e=s.src.value.split(","),f=0;f<e.length;f++)if(e[f].indexOf('format("svg")')>0){var p=e[f].indexOf("url"),tt=e[f].indexOf(")",p),it=e[f].substr(p+5,tt-p-6),rt=n.parseXml(n.ajax(it)),g=rt.getElementsByTagName("font");for(a=0;a<g.length;a++)nt=n.CreateElement(g[a]),n.Definitions[d]=nt}}}},n.Element.style.prototype=new n.Element.ElementBase,n.Element.use=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(n){this.baseSetContext(n);this.attribute("x").hasValue()&&n.translate(this.attribute("x").toPixels("x"),0);this.attribute("y").hasValue()&&n.translate(0,this.attribute("y").toPixels("y"))};this.getDefinition=function(){var n=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(n.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(n.attribute("height",!0).value=this.attribute("height").value),n};this.path=function(n){var t=this.getDefinition();t!=null&&t.path(n)};this.getBoundingBox=function(){var n=this.getDefinition();if(n!=null)return n.getBoundingBox()};this.renderChildren=function(n){var t=this.getDefinition(),i;t!=null&&(i=t.parent,t.parent=null,t.render(n),t.parent=i)}},n.Element.use.prototype=new n.Element.RenderedElementBase,n.Element.mask=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(t,i){var h=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y"),r,l,v,o,a,s,u;if(f==0&&e==0){for(r=new n.BoundingBox,l=0;l<this.children.length;l++)r.addBoundingBox(this.children[l].getBoundingBox());var h=Math.floor(r.x1),c=Math.floor(r.y1),f=Math.floor(r.width()),e=Math.floor(r.height())}v=i.attribute("mask").value;i.attribute("mask").value="";o=document.createElement("canvas");o.width=h+f;o.height=c+e;a=o.getContext("2d");this.renderChildren(a);s=document.createElement("canvas");s.width=h+f;s.height=c+e;u=s.getContext("2d");i.render(u);u.globalCompositeOperation="destination-in";u.fillStyle=a.createPattern(o,"no-repeat");u.fillRect(0,0,h+f,c+e);t.fillStyle=u.createPattern(s,"no-repeat");t.fillRect(0,0,h+f,c+e);i.attribute("mask").value=v};this.render=function(){}},n.Element.mask.prototype=new n.Element.ElementBase,n.Element.clipPath=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(t){for(var i,r,u=0;u<this.children.length;u++)i=this.children[u],typeof i.path!="undefined"&&(r=null,i.attribute("transform").hasValue()&&(r=new n.Transform(i.attribute("transform").value),r.apply(t)),i.path(t),t.clip(),r&&r.unapply(t))};this.render=function(){}},n.Element.clipPath.prototype=new n.Element.ElementBase,n.Element.filter=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(n,t){var e=t.getBoundingBox(),l=Math.floor(e.x1),a=Math.floor(e.y1),o=Math.floor(e.width()),s=Math.floor(e.height()),v=t.style("filter").value,i,r,c,f,h,u;for(t.style("filter").value="",i=0,r=0,u=0;u<this.children.length;u++)c=this.children[u].extraFilterDistance||0,i=Math.max(i,c),r=Math.max(r,c);for(f=document.createElement("canvas"),f.width=o+2*i,f.height=s+2*r,h=f.getContext("2d"),h.translate(-l+i,-a+r),t.render(h),u=0;u<this.children.length;u++)this.children[u].apply(h,0,0,o+2*i,s+2*r);n.drawImage(f,0,0,o+2*i,s+2*r,l-i,a-r,o+2*i,s+2*r);t.style("filter",!0).value=v};this.render=function(){}},n.Element.filter.prototype=new n.Element.ElementBase,n.Element.feMorphology=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(){}},n.Element.feMorphology.prototype=new n.Element.ElementBase,n.Element.feColorMatrix=function(t){function i(n,t,i,r,u,f){return n[i*r*4+t*4+f]}function r(n,t,i,r,u,f,e){n[i*r*4+t*4+f]=e}this.base=n.Element.ElementBase;this.base(t);this.apply=function(n,t,u,f,e){for(var t,o=n.getImageData(0,0,f,e),u=0;u<e;u++)for(t=0;t<f;t++){var h=i(o.data,t,u,f,e,0),c=i(o.data,t,u,f,e,1),l=i(o.data,t,u,f,e,2),s=(h+c+l)/3;r(o.data,t,u,f,e,0,s);r(o.data,t,u,f,e,1,s);r(o.data,t,u,f,e,2,s)}n.clearRect(0,0,f,e);n.putImageData(o,0,0)}},n.Element.feColorMatrix.prototype=new n.Element.ElementBase,n.Element.feGaussianBlur=function(t){this.base=n.Element.ElementBase;this.base(t);this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.extraFilterDistance=this.blurRadius;this.apply=function(t,i,r,u,f){if(typeof stackBlurCanvasRGBA=="undefined"){typeof console!="undefined"&&console.log("ERROR: StackBlur.js must be included for blur to work");return}t.canvas.id=n.UniqueId();t.canvas.style.display="none";document.body.appendChild(t.canvas);stackBlurCanvasRGBA(t.canvas.id,i,r,u,f,this.blurRadius);document.body.removeChild(t.canvas)}},n.Element.feGaussianBlur.prototype=new n.Element.ElementBase,n.Element.title=function(){},n.Element.title.prototype=new n.Element.ElementBase,n.Element.desc=function(){},n.Element.desc.prototype=new n.Element.ElementBase,n.Element.MISSING=function(n){typeof console!="undefined"&&console.log("ERROR: Element '"+n.nodeName+"' not yet implemented.")},n.Element.MISSING.prototype=new n.Element.ElementBase,n.CreateElement=function(t){var i=t.nodeName.replace(/^[^:]+:/,""),r;return i=i.replace(/\-/g,""),r=null,r=typeof n.Element[i]!="undefined"?new n.Element[i](t):new n.Element.MISSING(t),r.type=t.nodeName,r},n.load=function(t,i){n.loadXml(t,n.ajax(i))},n.loadXml=function(t,i){n.loadXmlDoc(t,n.parseXml(i))},n.loadXmlDoc=function(t,i){var u,r;n.init(t);u=function(n){for(var i=t.canvas;i;)n.x-=i.offsetLeft,n.y-=i.offsetTop,i=i.offsetParent;return window.scrollX&&(n.x+=window.scrollX),window.scrollY&&(n.y+=window.scrollY),n};n.opts.ignoreMouse!=!0&&(t.canvas.onclick=function(t){var i=u(new n.Point(t!=null?t.clientX:event.clientX,t!=null?t.clientY:event.clientY));n.Mouse.onclick(i.x,i.y)},t.canvas.onmousemove=function(t){var i=u(new n.Point(t!=null?t.clientX:event.clientX,t!=null?t.clientY:event.clientY));n.Mouse.onmousemove(i.x,i.y)});r=n.CreateElement(i.documentElement);r.root=!0;var e=!0,o=function(){var u,f;if(n.ViewPort.Clear(),t.canvas.parentNode&&n.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),n.opts.ignoreDimensions!=!0&&(r.style("width").hasValue()&&(t.canvas.width=r.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),r.style("height").hasValue()&&(t.canvas.height=r.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px")),u=t.canvas.clientWidth||t.canvas.width,f=t.canvas.clientHeight||t.canvas.height,n.opts.ignoreDimensions==!0&&r.style("width").hasValue()&&r.style("height").hasValue()&&(u=r.style("width").toPixels("x"),f=r.style("height").toPixels("y")),n.ViewPort.SetCurrent(u,f),n.opts.offsetX!=null&&(r.attribute("x",!0).value=n.opts.offsetX),n.opts.offsetY!=null&&(r.attribute("y",!0).value=n.opts.offsetY),n.opts.scaleWidth!=null&&n.opts.scaleHeight!=null){var s=1,h=1,o=n.ToNumberArray(r.attribute("viewBox").value);r.attribute("width").hasValue()?s=r.attribute("width").toPixels("x")/n.opts.scaleWidth:isNaN(o[2])||(s=o[2]/n.opts.scaleWidth);r.attribute("height").hasValue()?h=r.attribute("height").toPixels("y")/n.opts.scaleHeight:isNaN(o[3])||(h=o[3]/n.opts.scaleHeight);r.attribute("width",!0).value=n.opts.scaleWidth;r.attribute("height",!0).value=n.opts.scaleHeight;r.attribute("viewBox",!0).value="0 0 "+u*s+" "+f*h;r.attribute("preserveAspectRatio",!0).value="none"}n.opts.ignoreClear!=!0&&t.clearRect(0,0,u,f);r.render(t);e&&(e=!1,typeof n.opts.renderCallback=="function"&&n.opts.renderCallback(i))},f=!0;n.ImagesLoaded()&&(f=!1,o());n.intervalID=setInterval(function(){var t=!1,i;if(f&&n.ImagesLoaded()&&(f=!1,t=!0),n.opts.ignoreMouse!=!0&&(t=t|n.Mouse.hasEvents()),n.opts.ignoreAnimation!=!0)for(i=0;i<n.Animations.length;i++)t=t|n.Animations[i].update(1e3/n.FRAMERATE);typeof n.opts.forceRedraw=="function"&&n.opts.forceRedraw()==!0&&(t=!0);t&&(o(),n.Mouse.runEvents())},1e3/n.FRAMERATE)},n.stop=function(){n.intervalID&&clearInterval(n.intervalID)},n.Mouse=new function(){this.events=[];this.hasEvents=function(){return this.events.length!=0};this.onclick=function(n,t){this.events.push({type:"onclick",x:n,y:t,run:function(n){n.onclick&&n.onclick()}})};this.onmousemove=function(n,t){this.events.push({type:"onmousemove",x:n,y:t,run:function(n){n.onmousemove&&n.onmousemove()}})};this.eventElements=[];this.checkPath=function(n,t){for(var r,i=0;i<this.events.length;i++)r=this.events[i],t.isPointInPath&&t.isPointInPath(r.x,r.y)&&(this.eventElements[i]=n)};this.checkBoundingBox=function(n,t){for(var r,i=0;i<this.events.length;i++)r=this.events[i],t.isPointInBox(r.x,r.y)&&(this.eventElements[i]=n)};this.runEvents=function(){var t,r,i;for(n.ctx.canvas.style.cursor="",t=0;t<this.events.length;t++)for(r=this.events[t],i=this.eventElements[t];i;)r.run(i),i=i.parent;this.events=[];this.eventElements=[]}},n}this.canvg=function(t,i,r){var h,o,u,e,c,f,s;if(t==null&&i==null&&r==null){for(h=document.getElementsByTagName("svg"),o=0;o<h.length;o++)u=h[o],e=document.createElement("canvas"),e.width=u.clientWidth,e.height=u.clientHeight,u.parentNode.insertBefore(e,u),u.parentNode.removeChild(u),c=document.createElement("div"),c.appendChild(u),canvg(e,c.innerHTML);return}r=r||{};typeof t=="string"&&(t=document.getElementById(t));t.svg!=null&&t.svg.stop();f=n();t.childNodes.length==1&&t.childNodes[0].nodeName=="OBJECT"||(t.svg=f);f.opts=r;s=t.getContext("2d");typeof i.documentElement!="undefined"?f.loadXmlDoc(s,i):i.substr(0,1)=="<"?f.loadXml(s,i):f.load(s,i)}}();typeof CanvasRenderingContext2D!="undefined"&&(CanvasRenderingContext2D.prototype.drawSvg=function(n,t,i,r,u){canvg(this.canvas,n,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:t,offsetY:i,scaleWidth:r,scaleHeight:u})});
AmCharts.isModern&&(saveAs=saveAs||typeof navigator!="undefined"&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(n){"use strict";var i=n.document,l=function(){return n.URL||n.webkitURL||n},a=n.URL||n.webkitURL||n,r=i.createElementNS("http://www.w3.org/1999/xhtml","a"),v=!n.externalHost&&"download"in r,b=function(t){var r=i.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,n,0,0,0,0,0,!1,!1,!1,!1,0,null);t.dispatchEvent(r)},f=n.webkitRequestFileSystem,s=n.requestFileSystem||f||n.mozRequestFileSystem,y=function(t){(n.setImmediate||n.setTimeout)(function(){throw t;},0)},e="application/octet-stream",h=0,u=[],p=function(){for(var t=u.length,n;t--;)n=u[t],typeof n=="string"?a.revokeObjectURL(n):n.remove();u.length=0},o=function(n,t,i){var r,u;for(t=[].concat(t),r=t.length;r--;)if(u=n["on"+t[r]],typeof u=="function")try{u.call(n,i||n)}catch(f){y(f)}},c=function(t,c){var a=this,k=t.type,g=!1,p,b,nt=function(){var n=l().createObjectURL(t);return u.push(n),n},tt=function(){o(a,"writestart progress write writeend".split(" "))},y=function(){(g||!p)&&(p=nt(t));b?b.location.href=p:window.open(p,"_blank");a.readyState=a.DONE;tt()},w=function(n){return function(){if(a.readyState!==a.DONE)return n.apply(this,arguments)}},it={create:!0,exclusive:!1},rt,d;if(a.readyState=a.INIT,c||(c="download"),v){p=nt(t);i=n.document;r=i.createElementNS("http://www.w3.org/1999/xhtml","a");r.href=p;r.download=c;d=i.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,n,0,0,0,0,0,!1,!1,!1,!1,0,null);r.dispatchEvent(d);a.readyState=a.DONE;tt();return}if(n.chrome&&k&&k!==e&&(rt=t.slice||t.webkitSlice,t=rt.call(t,0,t.size,e),g=!0),f&&c!=="download"&&(c+=".download"),(k===e||f)&&(b=n),!s){y();return}h+=t.size;s(n.TEMPORARY,h,w(function(n){n.root.getDirectory("saved",it,w(function(n){var i=function(){n.getFile(c,it,w(function(n){n.createWriter(w(function(i){i.onwriteend=function(t){b.location.href=n.toURL();u.push(n);a.readyState=a.DONE;o(a,"writeend",t)};i.onerror=function(){var n=i.error;n.code!==n.ABORT_ERR&&y()};"writestart progress write abort".split(" ").forEach(function(n){i["on"+n]=a["on"+n]});i.write(t);a.abort=function(){i.abort();a.readyState=a.DONE};a.readyState=a.WRITING}),y)}),y)};n.getFile(c,{create:!1},w(function(n){n.remove();i()}),w(function(n){n.code===n.NOT_FOUND_ERR?i():y()}))}),y)}),y)},t=c.prototype,w=function(n,t){return new c(n,t)};return t.abort=function(){var n=this;n.readyState=n.DONE;o(n,"abort")},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,n.addEventListener("unload",p,!1),w}(this.self||this.window||this.content),typeof module!="undefined"&&(module.exports=saveAs));
jsPDF=function(){"use strict";function n(r,u,f,e){r=typeof r=="undefined"?"p":r.toString().toLowerCase();typeof u=="undefined"&&(u="mm");typeof f=="undefined"&&(f="a4");typeof e=="undefined"&&typeof zpipe=="undefined"&&(e=!1);var at=f.toString().toLowerCase(),ei="0.9.0rc2",vt=[],it=0,oi=e,si="1.3",yt={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224]},pt="0 g",hi="0 G",nt=0,rt=[],w=2,ht=!1,ut=[],a={},d={},ft=16,p,ci=.200025,gt=1.15,c,b,s,y={title:"",subject:"",author:"",keywords:"",creator:""},wt=0,bt=0,l={},k=new i(l),ct,et,h=function(n){return n.toFixed(2)},v=function(n){return n.toFixed(3)},ot=function(n){var t=n.toFixed(0);return n<10?"0"+t:t},li=function(n){var t=n.toFixed(0);return t.length<10?new Array(11-t.length).join("0")+t:t},o=function(n){ht?rt[nt].push(n):(vt.push(n),it+=n.length+1)},tt=function(){return w++,ut[w]=it,o(w+" 0 obj"),w},ni=function(n){o("stream");o(n);o("endstream")},ti,ii,kt,ai=function(){ti=b*s;ii=c*s;for(var t,i,n,f,r,u=1;u<=nt;u++){if(tt(),o("<<\/Type /Page"),o("/Parent 1 0 R"),o("/Resources 2 0 R"),o("/Contents "+(w+1)+" 0 R>>"),o("endobj"),t=rt[u].join("\n"),tt(),oi){for(i=[],n=0;n<t.length;++n)i[n]=t.charCodeAt(n);r=adler32cs.from(t);f=new Deflater(6);f.append(new Uint8Array(i));t=f.flush();i=[new Uint8Array([120,156]),new Uint8Array(t),new Uint8Array([r&255,r>>8&255,r>>16&255,r>>24&255])];t="";for(n in i)i.hasOwnProperty(n)&&(t+=String.fromCharCode.apply(null,i[n]));o("<<\/Length "+t.length+" /Filter [/FlateDecode]>>")}else o("<<\/Length "+t.length+">>");ni(t);o("endobj")}for(ut[1]=it,o("1 0 obj"),o("<<\/Type /Pages"),kt="/Kids [",n=0;n<nt;n++)kt+=3+2*n+" 0 R ";o(kt+"]");o("/Count "+nt);o("/MediaBox [0 0 "+h(ti)+" "+h(ii)+"]");o(">>");o("endobj")},vi=function(n){n.objectNumber=tt();o("<<\/BaseFont/"+n.PostScriptName+"/Type/Font");typeof n.encoding=="string"&&o("/Encoding/"+n.encoding);o("/Subtype/Type1>>");o("endobj")},yi=function(){for(var n in a)a.hasOwnProperty(n)&&vi(a[n])},pi=function(){k.publish("putXobjectDict")},wi=function(){o("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");o("/Font <<");for(var n in a)a.hasOwnProperty(n)&&o("/"+n+" "+a[n].objectNumber+" 0 R");o(">>");o("/XObject <<");pi();o(">>")},bi=function(){yi();k.publish("putResources");ut[2]=it;o("2 0 obj");o("<<");wi();o(">>");o("endobj");k.publish("postPutResources")},ri=function(n,t,i){var r;d[t]===r&&(d[t]={});d[t][i]=n},ki=function(n,i,r,u){var f="F"+(t(a)+1).toString(10),e=a[f]={id:f,PostScriptName:n,fontName:i,fontStyle:r,encoding:u,metadata:{}};return ri(f,i,r),k.publish("addFont",e),f},di=function(){for(var i="helvetica",r="times",u="courier",f="normal",e="bold",o="italic",s="bolditalic",t=[["Helvetica",i,f],["Helvetica-Bold",i,e],["Helvetica-Oblique",i,o],["Helvetica-BoldOblique",i,s],["Courier",u,f],["Courier-Bold",u,e],["Courier-Oblique",u,o],["Courier-BoldOblique",u,s],["Times-Roman",r,f],["Times-Bold",r,e],["Times-Italic",r,o],["Times-BoldItalic",r,s]],l,h,n=0,c=t.length;n<c;n++)l=ki(t[n][0],t[n][1],t[n][2],"StandardEncoding"),h=t[n][0].split("-"),ri(l,h[0],h[1]||"");k.publish("addFonts",{fonts:a,dictionary:d})},gi=function(n,t){var i,s,l,e,h,r,u,o,f,c;if(t===l&&(t={}),e=t.sourceEncoding?e:"Unicode",r=t.outputEncoding,(t.autoencode||r)&&a[p].metadata&&a[p].metadata[e]&&a[p].metadata[e].encoding&&(h=a[p].metadata[e].encoding,!r&&a[p].encoding&&(r=a[p].encoding),!r&&h.codePages&&(r=h.codePages[0]),typeof r=="string"&&(r=h[r]),r)){for(o=!1,u=[],i=0,s=n.length;i<s;i++)f=r[n.charCodeAt(i)],f?u.push(String.fromCharCode(f)):u.push(n[i]),u[i].charCodeAt(0)>>8&&(o=!0);n=u.join("")}for(i=n.length;o===l&&i!==0;)n.charCodeAt(i-1)>>8&&(o=!0),i--;if(o){for(u=t.noBOM?[]:[254,255],i=0,s=n.length;i<s;i++){if(f=n.charCodeAt(i),c=f>>8,c>>8)throw new Error("Character at position "+i.toString(10)+" of string '"+n+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");u.push(c);u.push(f-(c<<8))}return String.fromCharCode.apply(l,u)}return n},g=function(n,t){return gi(n,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nr=function(){o("/Producer (jsPDF "+ei+")");y.title&&o("/Title ("+g(y.title)+")");y.subject&&o("/Subject ("+g(y.subject)+")");y.author&&o("/Author ("+g(y.author)+")");y.keywords&&o("/Keywords ("+g(y.keywords)+")");y.creator&&o("/Creator ("+g(y.creator)+")");var n=new Date;o("/CreationDate (D:"+[n.getFullYear(),ot(n.getMonth()+1),ot(n.getDate()),ot(n.getHours()),ot(n.getMinutes()),ot(n.getSeconds())].join("")+")")},tr=function(){o("/Type /Catalog");o("/Pages 1 0 R");o("/OpenAction [3 0 R /FitH null]");o("/PageLayout /OneColumn");k.publish("putCatalog")},ir=function(){o("/Size "+(w+1));o("/Root "+w+" 0 R");o("/Info "+(w-1)+" 0 R")},rr=function(){nt++;ht=!0;rt[nt]=[]},ui=function(){rr();o(h(ci*s)+" w");o(hi);wt!==0&&o(wt.toString(10)+" J");bt!==0&&o(bt.toString(10)+" j");k.publish("addPage",{pageNumber:nt})},dt=function(n,t){var i,r;n===r&&(n=a[p].fontName);t===r&&(t=a[p].fontStyle);try{i=d[n][t]}catch(u){i=r}if(!i)throw new Error("Unable to look up font label for font '"+n+"', '"+t+"'. Refer to getFontList() for available fonts.");return i},st=function(){ht=!1;vt=[];ut=[];o("%PDF-"+si);ai();bi();tt();o("<<");nr();o(">>");o("endobj");tt();o("<<");tr();o(">>");o("endobj");var t=it,n;for(o("xref"),o("0 "+(w+1)),o("0000000000 65535 f "),n=1;n<=w;n++)o(li(ut[n])+" 00000 n ");return o("trailer"),o("<<"),ir(),o(">>"),o("startxref"),o(t),o("%%EOF"),ht=!0,vt.join("\n")},lt=function(n){var t="S";return n==="F"?t="f":(n==="FD"||n==="DF")&&(t="B"),t},fi=function(n,t){var o,r,u,f,i,e;switch(n){case o:return st();case"save":if(navigator.getUserMedia&&(window.URL===undefined||window.URL.createObjectURL===undefined))return l.output("dataurlnewwindow");for(r=st(),u=r.length,f=new Uint8Array(new ArrayBuffer(u)),i=0;i<u;i++)f[i]=r.charCodeAt(i);e=new Blob([f],{type:"application/pdf"});saveAs(e,t);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(st());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(st());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(st()));break;default:throw new Error('Output type "'+n+'" is not supported.');}};if(u==="pt")s=1;else if(u==="mm")s=72/25.4;else if(u==="cm")s=72/2.54;else if(u==="in")s=72;else throw"Invalid unit: "+u;if(yt.hasOwnProperty(at))c=yt[at][1]/s,b=yt[at][0]/s;else try{c=f[1];b=f[0]}catch(ur){throw"Invalid format: "+f;}if(r==="p"||r==="portrait")r="p",b>c&&(ct=b,b=c,c=ct);else if(r==="l"||r==="landscape")r="l",c>b&&(ct=b,b=c,c=ct);else throw"Invalid orientation: "+r;l.internal={pdfEscape:g,getStyle:lt,getFont:function(){return a[dt.apply(l,arguments)]},getFontSize:function(){return ft},getLineHeight:function(){return ft*gt},btoa:btoa,write:function(n){o(arguments.length===1?n:Array.prototype.join.call(arguments," "))},getCoordinateString:function(n){return h(n*s)},getVerticalCoordinateString:function(n){return h((c-n)*s)},collections:{},newObject:tt,putStream:ni,events:k,scaleFactor:s,pageSize:{width:b,height:c},output:function(n,t){return fi(n,t)},getNumberOfPages:function(){return rt.length-1},pages:rt};l.addPage=function(){return ui(),this};l.text=function(n,t,i,r){var l,a,v,y,u,e,f;if(typeof n=="number"&&(a=i,v=n,y=t,n=a,t=v,i=y),typeof n=="string"&&n.match(/[\n\r]/)&&(n=n.split(/\r\n|\r|\n/g)),typeof r=="undefined"?r={noBOM:!0,autoencode:!0}:(r.noBOM===l&&(r.noBOM=!0),r.autoencode===l&&(r.autoencode=!0)),typeof n=="string")e=g(n,r);else if(n instanceof Array){for(u=n.concat(),f=u.length-1;f!==-1;f--)u[f]=g(u[f],r);e=u.join(") Tj\nT* (")}else throw new Error('Type of text must be string or Array. "'+n+'" is not recognized.');return o("BT\n/"+p+" "+ft+" Tf\n"+ft*gt+" TL\n"+pt+"\n"+h(t*s)+" "+h((c-i)*s)+" Td\n("+e+") Tj\nET"),this};l.line=function(n,t,i,r){return o(h(n*s)+" "+h((c-t)*s)+" m "+h(i*s)+" "+h((c-r)*s)+" l S"),this};l.lines=function(n,t,i,r,u,f){var rt,w,b,k,a,y,p,d,e,g,nt,tt,it,h,l;for(typeof n=="number"&&(w=i,b=n,k=t,n=w,t=b,i=k),u=lt(u),r=r===rt?[1,1]:r,o(v(t*s)+" "+v((c-i)*s)+" m "),a=r[0],y=r[1],d=n.length,h=t,l=i,p=0;p<d;p++)e=n[p],e.length===2?(h=e[0]*a+h,l=e[1]*y+l,o(v(h*s)+" "+v((c-l)*s)+" l")):(g=e[0]*a+h,nt=e[1]*y+l,tt=e[2]*a+h,it=e[3]*y+l,h=e[4]*a+h,l=e[5]*y+l,o(v(g*s)+" "+v((c-nt)*s)+" "+v(tt*s)+" "+v((c-it)*s)+" "+v(h*s)+" "+v((c-l)*s)+" c"));return f==!0&&o(" h"),o(u),this};l.rect=function(n,t,i,r,u){var f=lt(u);return o([h(n*s),h((c-t)*s),h(i*s),h(-r*s),"re",f].join(" ")),this};l.triangle=function(n,t,i,r,u,f,e){return this.lines([[i-n,r-t],[u-i,f-r],[n-u,t-f]],n,t,[1,1],e,!0),this};l.roundedRect=function(n,t,i,r,u,f,e){var o=4/3*(Math.SQRT2-1);return this.lines([[i-2*u,0],[u*o,0,u,f-f*o,u,f],[0,r-2*f],[0,f*o,-(u*o),f,-u,f],[-i+2*u,0],[-(u*o),0,-u,-(f*o),-u,-f],[0,-r+2*f],[0,-(f*o),u*o,-f,u,-f]],n+u,t,[1,1],e),this};l.ellipse=function(n,t,i,r,u){var l=lt(u),f=4/3*(Math.SQRT2-1)*i,e=4/3*(Math.SQRT2-1)*r;return o([h((n+i)*s),h((c-t)*s),"m",h((n+i)*s),h((c-(t-e))*s),h((n+f)*s),h((c-(t-r))*s),h(n*s),h((c-(t-r))*s),"c"].join(" ")),o([h((n-f)*s),h((c-(t-r))*s),h((n-i)*s),h((c-(t-e))*s),h((n-i)*s),h((c-t)*s),"c"].join(" ")),o([h((n-i)*s),h((c-(t+e))*s),h((n-f)*s),h((c-(t+r))*s),h(n*s),h((c-(t+r))*s),"c"].join(" ")),o([h((n+f)*s),h((c-(t+r))*s),h((n+i)*s),h((c-(t+e))*s),h((n+i)*s),h((c-t)*s),"c",l].join(" ")),this};l.circle=function(n,t,i,r){return this.ellipse(n,t,i,i,r)};l.setProperties=function(n){for(var t in y)y.hasOwnProperty(t)&&n[t]&&(y[t]=n[t]);return this};l.setFontSize=function(n){return ft=n,this};l.setFont=function(n,t){return p=dt(n,t),this};l.setFontStyle=l.setFontType=function(n){var t;return p=dt(t,n),this};l.getFontList=function(){var i={},n,t,r;for(n in d)if(d.hasOwnProperty(n)){i[n]=r=[];for(t in d[n])d[n].hasOwnProperty(t)&&r.push(t)}return i};l.setLineWidth=function(n){return o((n*s).toFixed(2)+" w"),this};l.setDrawColor=function(n,t,i,r){var u;return u=t===undefined||r===undefined&&n===t===i?typeof n=="string"?n+" G":h(n/255)+" G":r===undefined?typeof n=="string"?[n,t,i,"RG"].join(" "):[h(n/255),h(t/255),h(i/255),"RG"].join(" "):typeof n=="string"?[n,t,i,r,"K"].join(" "):[h(n),h(t),h(i),h(r),"K"].join(" "),o(u),this};l.setFillColor=function(n,t,i,r){var u;return u=t===undefined||r===undefined&&n===t===i?typeof n=="string"?n+" g":h(n/255)+" g":r===undefined?typeof n=="string"?[n,t,i,"rg"].join(" "):[h(n/255),h(t/255),h(i/255),"rg"].join(" "):typeof n=="string"?[n,t,i,r,"k"].join(" "):[h(n),h(t),h(i),h(r),"k"].join(" "),o(u),this};l.setTextColor=function(n,t,i){var u,r;return typeof n=="string"&&/#[0-9A-Fa-f]{6}/.test(n)&&(u=n.replace("#",""),r=parseInt(u,16),n=r>>16&255,t=r>>8&255,i=r&255),pt=n===0&&t===0&&i===0||typeof t=="undefined"?v(n/255)+" g":[v(n/255),v(t/255),v(i/255),"rg"].join(" "),this};l.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2};l.setLineCap=function(n){var t=this.CapJoinStyles[n];if(t===undefined)throw new Error("Line cap style of '"+n+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wt=t,o(t.toString(10)+" J"),this};l.setLineJoin=function(n){var t=this.CapJoinStyles[n];if(t===undefined)throw new Error("Line join style of '"+n+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bt=t,o(t.toString(10)+" j"),this};l.output=fi;l.save=function(n){l.output("save",n)};for(et in n.API)n.API.hasOwnProperty(et)&&(et==="events"&&n.API.events.length?function(n,t){for(var u,r,i=t.length-1;i!==-1;i--)u=t[i][0],r=t[i][1],n.subscribe.apply(n,[u].concat(typeof r=="function"?[r]:r))}(k,n.API.events):l[et]=n.API[et]);return di(),p="F1",ui(),k.publish("initialized"),l}typeof btoa=="undefined"&&(window.btoa=function(n){
var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),e,o,s,h,c,l,a,t,r=0,y=0,f="",v=[],u;do e=n.charCodeAt(r++),o=n.charCodeAt(r++),s=n.charCodeAt(r++),t=e<<16|o<<8|s,h=t>>18&63,c=t>>12&63,l=t>>6&63,a=t&63,v[y++]=i[h]+i[c]+i[l]+i[a];while(r<n.length);return f=v.join(""),u=n.length%3,(u?f.slice(0,u-3):f)+"===".slice(u||3)});typeof atob=="undefined"&&(window.atob=function(n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r,f,s,h,c,e,o,u,t=0,a=0,l=[];if(!n)return n;n+="";do h=i.indexOf(n.charAt(t++)),c=i.indexOf(n.charAt(t++)),e=i.indexOf(n.charAt(t++)),o=i.indexOf(n.charAt(t++)),u=h<<18|c<<12|e<<6|o,r=u>>16&255,f=u>>8&255,s=u&255,l[a++]=e===64?String.fromCharCode(r):o===64?String.fromCharCode(r,f):String.fromCharCode(r,f,s);while(t<n.length);return l.join("")});var t=typeof Object.keys=="function"?function(n){return Object.keys(n).length}:function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t},i=function(n){
this.topics={};this.context=n;this.publish=function(n,t){if(this.topics[n]){var f=this.topics[n],e=[],o,i,r,u,s=function(){};for(t=Array.prototype.slice.call(arguments,1),i=0,r=f.length;i<r;i++)u=f[i],o=u[0],u[1]&&(u[0]=s,e.push(i)),o.apply(this.context,t);for(i=0,r=e.length;i<r;i++)f.splice(e[i],1)}};this.subscribe=function(n,t,i){return this.topics[n]?this.topics[n].push([t,i]):this.topics[n]=[[t,i]],{topic:n,callback:t}};this.unsubscribe=function(n){if(this.topics[n.topic])for(var i=this.topics[n.topic],t=0,r=i.length;t<r;t++)i[t][0]===n.callback&&i.splice(t,1)}};return n.API={events:[]},n}();
(function(n){"use strict";var t="addImage_",i=function(n){var i,r;if(!1||!n.charCodeAt(6)==="J".charCodeAt(0)||!n.charCodeAt(7)==="F".charCodeAt(0)||!n.charCodeAt(8)==="I".charCodeAt(0)||!n.charCodeAt(9)==="F".charCodeAt(0)||!1)throw new Error("getJpegSize requires a binary jpeg file");for(var u=n.charCodeAt(4)*256+n.charCodeAt(5),t=4,f=n.length;t<f;){if(t+=u,n.charCodeAt(t)!==255)throw new Error("getJpegSize could not find the size of the image");if(n.charCodeAt(t+1)===192||n.charCodeAt(t+1)===193||n.charCodeAt(t+1)===194||n.charCodeAt(t+1)===195||n.charCodeAt(t+1)===196||n.charCodeAt(t+1)===197||n.charCodeAt(t+1)===198||n.charCodeAt(t+1)===199)return r=n.charCodeAt(t+5)*256+n.charCodeAt(t+6),i=n.charCodeAt(t+7)*256+n.charCodeAt(t+8),[i,r];t+=2;u=n.charCodeAt(t)*256+n.charCodeAt(t+1)}},r=function(n){var u=this.internal.newObject(),t=this.internal.write,f=this.internal.putStream,r,i;if(n.n=u,t("<<\/Type /XObject"),t("/Subtype /Image"),t("/Width "+n.w),t("/Height "+n.h),n.cs==="Indexed"?t("/ColorSpace [/Indexed /DeviceRGB "+(n.pal.length/3-1)+" "+(u+1)+" 0 R]"):(t("/ColorSpace /"+n.cs),n.cs==="DeviceCMYK"&&t("/Decode [1 0 1 0 1 0 1 0]")),t("/BitsPerComponent "+n.bpc),"f"in n&&t("/Filter /"+n.f),"dp"in n&&t("/DecodeParms <<"+n.dp+">>"),"trns"in n&&n.trns.constructor==Array)for(r="",i=0;i<n.trns.length;i++)r+=n[r][i]+" "+n.trns[i]+" ",t("/Mask ["+r+"]");"smask"in n&&t("/SMask "+(u+1)+" 0 R");t("/Length "+n.data.length+">>");f(n.data);t("endobj")},u=function(){var n=this.internal.collections[t+"images"];for(var i in n)r.call(this,n[i])},f=function(){var i=this.internal.collections[t+"images"],r=this.internal.write,n;for(var u in i)n=i[u],r("/I"+n.i,n.n,"0","R")};n.addImage=function(n,r,e,o,s,h){var l,y,w,c;if(typeof n=="object"&&n.nodeType===1){if(l=document.createElement("canvas"),l.width=n.clientWidth,l.height=n.clientHeight,y=l.getContext("2d"),!y)throw"addImage requires canvas to be supported by browser.";y.drawImage(n,0,0,l.width,l.height);n=l.toDataURL("image/jpeg");r="JPEG"}if(r.toUpperCase()!=="JPEG")throw new Error("addImage currently only supports format 'JPEG', not '"+r+"'");var v,a=this.internal.collections[t+"images"],p=this.internal.getCoordinateString,b=this.internal.getVerticalCoordinateString;return n.substring(0,23)==="data:image/jpeg;base64,"&&(n=atob(n.replace("data:image/jpeg;base64,",""))),a?v=Object.keys?Object.keys(a).length:function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t}(a):(v=0,this.internal.collections[t+"images"]=a={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",f)),w=i(n),c={w:w[0],h:w[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:v,data:n},a[v]=c,s||h||(s=-96,h=-96),s<0&&(s=-72*c.w/s/this.internal.scaleFactor),h<0&&(h=-72*c.h/h/this.internal.scaleFactor),s===0&&(s=h*c.w/c.h),h===0&&(h=s*c.h/c.w),this.internal.write("q",p(s),"0 0",p(h),p(e),b(o+h),"cm /I"+c.i,"Do Q"),this}})(jsPDF.API);
AmCharts.translations.az={monthNames:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],shortMonthNames:["Yan","Fev","Mar","Apr","May","Iyn","Iyl","Avq","Sen","Okt","Noy","Dek"],dayNames:["Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə","Bazar günü"],shortDayNames:["Ber","Çax","Çər","Cax","Cüm","Şnb","Baz"],zoomOutText:"Bütün göstər"};AmCharts.translations.bg={monthNames:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],shortMonthNames:["Яну","Фев","Мар","Апр","Май","Юни","Юли","Авг","Сеп","Окт","Ное","Дек"],dayNames:["Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота","Неделя"],shortDayNames:["Пн","Вт","Ср","Чт","Пт","Сб","Нд"],zoomOutText:"Покажи всички"};AmCharts.translations.de={monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonthNames:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],shortDayNames:["Mo","Di","Mi","Do","Fr","Sa","So"],zoomOutText:"Alle anzeigen",fromText:"Von:",toText:"Bis:",periodsText:"Ansicht:",selectText:"Auswahl:",comboBoxSelectText:"Auswahl...",compareText:"Vergleichen mit:"};AmCharts.translations.es={monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],shortMonthNames:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],shortDayNames:["Lun","Mar","Mié","Jue","Vie","Sáb","Dom"],zoomOutText:"Mostrar todos"};AmCharts.translations.fi={monthNames:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],shortMonthNames:["Tammi ","Helmi ","Maalis","Huhti ","Touko ","Kesä  ","Heinä ","Elo   ","Syys  ","Loka  ","Marras","Joulu "],dayNames:["Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai","Sunnuntai"],shortDayNames:["Ma","Ti","Ke","To","Pe","La","Su"],zoomOutText:"Näytä kaikki"};AmCharts.translations.fo={monthNames:["Januar","Februar","Mars","Apríl","Mai","Juni","Juli","August","September","Oktober","November","Desember"],shortMonthNames:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],dayNames:["Mánadagur","Týsdagur","Mikudagur","Hósdagur","Fríggjadagur","Leygardagur","Sunnudagur"],shortDayNames:["Mán","Týs","Mik","Hós","Frí","Ley","Sun"],zoomOutText:"Show all"};AmCharts.translations.fr={monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],shortMonthNames:["Janv.","Févr.","Mars","Avril","Mai","Juin","Juil.","Août","Sept.","Oct.","Nov.","Déc."],dayNames:["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],shortDayNames:["Lun.","Mar.","Mer.","Jeu.","Ven.","Sam.","Dim."],zoomOutText:"Voir tous"};AmCharts.translations.hr={monthNames:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],shortMonthNames:["Sij","Vel","Ožu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],dayNames:["Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota","Nedjelja"],shortDayNames:["Pon","Uto","Sri","Čet","Pet","Sub","Ned"],zoomOutText:"Prikaži sve"};AmCharts.translations.hu={monthNames:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],shortMonthNames:["Jan","Febr","Márc","Ápr","Máj","Jún","Júl","Aug","Szept","Okt","Nov","Dec"],dayNames:["Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat","Vasárnap"],shortDayNames:["H","K","Sze","Cs","P","Szo","V"],zoomOutText:"Összes"};AmCharts.translations.id={monthNames:["Januari","Pebruari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],shortMonthNames:["Jan","Peb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],dayNames:["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],shortDayNames:["Sen","Sel","Rab","Kam","Jum","Sab","Min"],zoomOutText:"Tampilkan semua"};AmCharts.translations.is={monthNames:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],shortMonthNames:["Jan","Feb","Mar","Apr","Maí","Jún","Júl","Ágú","Sep","Okt","Nóv","Des"],dayNames:["Mánudagur","Þriðjudagur","Miðvikudagur","Fimmtudagur","Föstudagur","Laugardagur","Sunnudagur"],shortDayNames:["Mán","Þri","Mið","Fim","Fös","Lau","Sun"],zoomOutText:"Sýna allt"};AmCharts.translations.it={monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonthNames:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Domenica"],shortDayNames:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"],zoomOutText:"Mostra tutti"};AmCharts.translations.lt={monthNames:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],shortMonthNames:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rgp","Rgs","Spa","Lap","Grd"],dayNames:["Pirmadienis","Antradienis","Trečiadienis","Ketvirtadienis","Penktadienis","Šeštadienis","Sekmadienis"],shortDayNames:["Pr","An","Tr","Kt","Pn","Št","Sk"],zoomOutText:"Rodyti viską"};AmCharts.translations.lv={monthNames:["Janvāris","Februāris","Marts","Aprīlis","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],shortMonthNames:["Jan","Feb","Mar","Apr","Mai","Jūn","Jūl","Aug","Sep","Okt","Nov","Dec"],dayNames:["Pirmdiena","Otrdiena","Trešdiena","Ceturtdiena","Piektdiena","Sestdiena","Svētdiena"],shortDayNames:["P ","O ","T ","C ","Pk","S ","Sv"],zoomOutText:"Parādīt visu"};AmCharts.translations.mk={monthNames:["Јануари","Февруари","Март","Април","Мај","Јуни","Јули","Август","Септември","Октомври","Ноември","Декември"],shortMonthNames:["Јан","Фев","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Ное","Дек"],dayNames:["Понеделник","Вторник","Среда","Четврток","Петок","Сабота","Недела"],shortDayNames:["Пон","Вто","Сре","Чет","Пет","Саб","Нед"],zoomOutText:"Прикажи ги сите"};AmCharts.translations.mn={monthNames:["Хулгана сарын","Үхэр сарын","Бар сарын","Туулай сарын","Луу сарын","Могой сарын","Морь сарын","Хонь сарын","Бич сарын","Тахиа сарын","Нохой сарын","Гахай сарын"],shortMonthNames:["Хул","Үхэ","Бар","Туу","Луу","Мог","Мор","Хон","Бич","Тах","Нох","Гах"],dayNames:["Даваа","Мягмар","Лхагва","Пүрэв","Баасан","Бямба","Ням"],shortDayNames:["Да","Мя","Лх","Пү","Ба","Бя","Ня"],zoomOutText:"Бүх харуулах"};AmCharts.translations.mt={monthNames:["Jannar","Frar","Marzu","April","Mejju","Ġunju","Lulju","Awwissu","Settembru","Ottubru","Novembru","Diċembru "],shortMonthNames:["Jan","Fra","Mar","Apr","Mej","Ġun","Lul","Aww","Set","Ott","Nov","Diċ"],dayNames:["It-tnejn","It-tlieta","L-erbgħa","Il-ħamis","Il-ġimgħa","Is-sibt","Il-ħadd"],shortDayNames:["Tne","Tli","Erb","Ħam","Ġim","Sib","Ħad"],zoomOutText:"Turi kollha"};AmCharts.translations.nl={monthNames:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],shortMonthNames:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],dayNames:["Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"],shortDayNames:["Ma","Di","Wo","Do","Vr","Za","Zo"],zoomOutText:"Alles weergeven"};AmCharts.translations.no={monthNames:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],shortMonthNames:["Jan.","Feb.","Mars","April","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Des."],dayNames:["Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag","Søndag"],shortDayNames:["Ma.","Ti.","On.","To.","Fr.","Lø.","Sø."],zoomOutText:"Vis alle"};AmCharts.translations.pl={monthNames:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonthNames:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Paź","Lis","Gru"],dayNames:["Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota","Niedziela"],shortDayNames:["Pon","Wto","Śro","Czw","Pią","Sob","Nie"],zoomOutText:"Pokaż wszystko"};AmCharts.translations.pt={monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonthNames:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"],shortDayNames:["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],zoomOutText:"Mostrar todos"};AmCharts.translations.ro={monthNames:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],shortMonthNames:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă","Duminică"],shortDayNames:["Lu","Ma","Mi","Jo","Vi","Sb","Du"],zoomOutText:"Arată tot"};AmCharts.translations.ru={monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonthNames:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],shortDayNames:["Пнд","Втр","Срд","Чтв","Птн","Сбт","Вск"],zoomOutText:"Показать все"};AmCharts.translations.rw={monthNames:["Mutarama","Gashyantare","Werurwe","Mata","Gicuransi","Kamena","Nyakanga","Kanama","Nzeli","Ukwakira","Ugushyingo","Ukuboza"],shortMonthNames:["Mut","Gas","Wer","Mat","Gic","Kam","Nya","Kan","Nze","Ukw","Ugu","Uku"],dayNames:["Kuwa mbere","Kuwa kabiri","Kuwa gatatu","Kuwa kane","Kuwa gatanu","Kuwa gatandatu","Ku cyumweru"],shortDayNames:["Mbe","Kab","Gtu","Kan","Gnu","Gnd","Mwe"],zoomOutText:"Show all"};AmCharts.translations.sk={monthNames:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],shortMonthNames:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],dayNames:["Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota","Nedeľa"],shortDayNames:["Po","Ut","St","Št","Pi","So","Ne"],zoomOutText:"Zobraziť všetky"};AmCharts.translations.so={monthNames:["Bisha koobaad","Bisha labaad","Bisha saddexaad","Bisha afraad","Bisha shanaad","Bisha lixaad","Bisha todobaad","Bisha sideedaad","Bisha sagaalaad","Bisha tobnaad","Bisha kow iyo tobnaad","Bisha laba iyo tobnaad"],shortMonthNames:["Kob","Lab","Sad","Afr","Sha","Lix","Tod","Sid","Sag","Tob","Kit","Lit"],dayNames:["Isniin","Salaaso","Arbaco","Khamiis","Jimco","Sabti","Axad"],shortDayNames:["Isn","Sal","Arb","Kha","Jim","Sab","Axa"],zoomOutText:"Tus dhammaan"};AmCharts.translations.th={monthNames:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],shortMonthNames:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],dayNames:["จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์","อาทิตย์"],shortDayNames:["จ.","อ.","พ.","พฤ.","ศ.","ส.","อา."],zoomOutText:"แสดงทั้งหมด"};AmCharts.translations.tr={monthNames:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],shortMonthNames:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],dayNames:["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"],shortDayNames:["Pzt","Sal","Çrş","Prş","Cum","Cts","Paz"],zoomOutText:"Tümünü göster"};AmCharts.themes.black={themeName:"black",AmChart:{color:"#e7e7e7",backgroundColor:"#222222"},AmCoordinateChart:{colors:["#de4c4f","#d8854f","#eea638","#a7a737","#86a965","#8aabb0","#69c8ff","#cfd27e","#9d9888","#916b8a","#724887","#7256bc"]},AmStockChart:{colors:["#de4c4f","#d8854f","#eea638","#a7a737","#86a965","#8aabb0","#69c8ff","#cfd27e","#9d9888","#916b8a","#724887","#7256bc"]},AmSlicedChart:{outlineAlpha:1,outlineThickness:2,labelTickColor:"#FFFFFF",labelTickAlpha:.3,colors:["#de4c4f","#d8854f","#eea638","#a7a737","#86a965","#8aabb0","#69c8ff","#cfd27e","#9d9888","#916b8a","#724887","#7256bc"]},AmRectangularChart:{zoomOutButtonColor:"#FFFFFF",zoomOutButtonRollOverAlpha:.15,zoomOutButtonImage:"lensWhite.png"},AxisBase:{axisColor:"#FFFFFF",axisAlpha:.3,gridAlpha:.1,gridColor:"#FFFFFF",dashLength:3},ChartScrollbar:{backgroundColor:"#000000",backgroundAlpha:.2,graphFillAlpha:.2,graphLineAlpha:0,graphFillColor:"#FFFFFF",selectedGraphFillColor:"#FFFFFF",selectedGraphFillAlpha:.4,selectedGraphLineColor:"#FFFFFF",selectedBackgroundColor:"#FFFFFF",selectedBackgroundAlpha:.09,gridAlpha:.15},ChartCursor:{cursorColor:"#FFFFFF",color:"#000000",cursorAlpha:.5},AmLegend:{color:"#e7e7e7"},AmGraph:{lineAlpha:.9},GaugeArrow:{color:"#FFFFFF",alpha:.8,nailAlpha:0,innerRadius:"40%",nailRadius:15,startWidth:15,borderAlpha:.8,nailBorderAlpha:0},GaugeAxis:{tickColor:"#FFFFFF",tickAlpha:1,tickLength:15,minorTickLength:8,axisThickness:3,axisColor:"#FFFFFF",axisAlpha:1,bandAlpha:.8},TrendLine:{lineColor:"#c03246",lineAlpha:.8},AreasSettings:{alpha:.8,color:"#FFFFFF",colorSolid:"#000000",unlistedAreasAlpha:.4,unlistedAreasColor:"#FFFFFF",outlineColor:"#000000",outlineAlpha:.5,outlineThickness:.5,rollOverColor:"#3c5bdc",rollOverOutlineColor:"#000000",selectedOutlineColor:"#000000",selectedColor:"#f15135",unlistedAreasOutlineColor:"#000000",unlistedAreasOutlineAlpha:.5},LinesSettings:{color:"#FFFFFF",alpha:.8},ImagesSettings:{alpha:.8,labelColor:"#FFFFFF",color:"#FFFFFF",labelRollOverColor:"#3c5bdc"},ZoomControl:{buttonRollOverColor:"#3c5bdc",buttonFillColor:"#738f58",buttonBorderColor:"#738f58",buttonFillAlpha:.8,gridBackgroundColor:"#FFFFFF",buttonBorderAlpha:0,buttonCornerRadius:2,gridAlpha:.5,gridBackgroundColor:"#FFFFFF",homeIconFile:"homeIconWhite.gif",buttonIconAlpha:.6,gridAlpha:.2,buttonSize:20},SmallMap:{mapColor:"#FFFFFF",rectangleColor:"#FFFFFF",backgroundColor:"#000000",backgroundAlpha:.7,borderThickness:1,borderAlpha:.8},PeriodSelector:{color:"#e7e7e7"},PeriodButton:{color:"#e7e7e7",background:"transparent",opacity:.7,border:"1px solid rgba(255, 255, 255, .15)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",boxSizing:"border-box"},PeriodButtonSelected:{color:"#e7e7e7",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",opacity:1,boxSizing:"border-box"},PeriodInputField:{color:"#e7e7e7",background:"transparent",border:"1px solid rgba(255, 255, 255, .15)",outline:"none"},DataSetSelector:{color:"#e7e7e7",selectedBackgroundColor:"rgba(255, 255, 255, .25)",rollOverBackgroundColor:"rgba(255, 255, 255, .15)"},DataSetCompareList:{color:"#e7e7e7",lineHeight:"100%",boxSizing:"initial",webkitBoxSizing:"initial",border:"1px solid rgba(255, 255, 255, .15)"},DataSetSelect:{border:"1px solid rgba(255, 255, 255, .15)",outline:"none"}};AmCharts.themes.chalk={themeName:"chalk",AmChart:{color:"#e7e7e7",fontFamily:"Covered By Your Grace",fontSize:18,handDrawn:!0,backgroundColor:"#282828"},AmCoordinateChart:{colors:["#FFFFFF","#e384a6","#f4d499","#4d90d6","#c7e38c","#9986c8","#edf28c","#ffd1d4","#5ee1dc","#b0eead","#fef85a","#8badd2"]},AmSlicedChart:{outlineAlpha:1,labelTickColor:"#FFFFFF",labelTickAlpha:.3,colors:["#FFFFFF","#e384a6","#f4d499","#4d90d6","#c7e38c","#9986c8","#edf28c","#ffd1d4","#5ee1dc","#b0eead","#fef85a","#8badd2"]},AmStockChart:{colors:["#FFFFFF","#e384a6","#f4d499","#4d90d6","#c7e38c","#9986c8","#edf28c","#ffd1d4","#5ee1dc","#b0eead","#fef85a","#8badd2"]},AmRectangularChart:{zoomOutButtonColor:"#FFFFFF",zoomOutButtonRollOverAlpha:.15,zoomOutButtonImage:"lensWhite.png"},AxisBase:{axisColor:"#FFFFFF",gridColor:"#FFFFFF"},ChartScrollbar:{backgroundColor:"#FFFFFF",backgroundAlpha:.2,graphFillAlpha:.5,graphLineAlpha:0,selectedBackgroundColor:"#000000",selectedBackgroundAlpha:.25,fontSize:15,gridAlpha:.15},ChartCursor:{cursorColor:"#FFFFFF",color:"#000000"},AmLegend:{color:"#e7e7e7",markerSize:20},AmGraph:{lineAlpha:.8},GaugeArrow:{color:"#FFFFFF",alpha:.1,nailAlpha:0,innerRadius:"40%",nailRadius:15,startWidth:15,borderAlpha:.8,nailBorderAlpha:0},GaugeAxis:{tickColor:"#FFFFFF",tickAlpha:.8,tickLength:15,minorTickLength:8,axisThickness:3,axisColor:"#FFFFFF",axisAlpha:.8,bandAlpha:.4},TrendLine:{lineColor:"#c03246",lineAlpha:.8},AmMap:{handDrawn:!1},AreasSettings:{alpha:.8,color:"#FFFFFF",colorSolid:"#000000",unlistedAreasAlpha:.4,unlistedAreasColor:"#FFFFFF",outlineColor:"#000000",outlineAlpha:.5,outlineThickness:.5,rollOverColor:"#4d90d6",rollOverOutlineColor:"#000000",selectedOutlineColor:"#000000",selectedColor:"#e384a6",unlistedAreasOutlineColor:"#000000",unlistedAreasOutlineAlpha:.5},LinesSettings:{color:"#FFFFFF",alpha:.8},ImagesSettings:{alpha:.8,labelFontSize:16,labelColor:"#FFFFFF",color:"#FFFFFF",labelRollOverColor:"#4d90d6"},ZoomControl:{buttonRollOverColor:"#4d90d6",buttonFillColor:"#e384a6",buttonFillAlpha:.8,buttonBorderColor:"#FFFFFF",gridBackgroundColor:"#FFFFFF",gridAlpha:.8},SmallMap:{mapColor:"#FFFFFF",rectangleColor:"#FFFFFF",backgroundColor:"#000000",backgroundAlpha:.7,borderThickness:1,borderAlpha:.8},PeriodSelector:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7"},PeriodButton:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7",background:"transparent",opacity:.7,border:"1px solid rgba(255, 255, 255, .15)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",boxSizing:"border-box"},PeriodButtonSelected:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",opacity:1,boxSizing:"border-box"},PeriodInputField:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7",background:"transparent",border:"1px solid rgba(255, 255, 255, .15)",outline:"none"},DataSetSelector:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7",selectedBackgroundColor:"rgba(255, 255, 255, .25)",rollOverBackgroundColor:"rgba(255, 255, 255, .15)"},DataSetCompareList:{fontFamily:"Covered By Your Grace",fontSize:"16px",color:"#e7e7e7",lineHeight:"100%",boxSizing:"initial",webkitBoxSizing:"initial",border:"1px solid rgba(255, 255, 255, .15)"},DataSetSelect:{fontFamily:"Covered By Your Grace",fontSize:"16px",border:"1px solid rgba(255, 255, 255, .15)",outline:"none"}};AmCharts.themes.dark={themeName:"dark",AmChart:{color:"#e7e7e7",backgroundColor:"#282828"},AmCoordinateChart:{colors:["#ae85c9","#aab9f7","#b6d2ff","#c9e6f2","#c9f0e1","#e8d685","#e0ad63","#d48652","#d27362","#495fba","#7a629b","#8881cc"]},AmStockChart:{colors:["#639dbd","#e8d685","#ae85c9","#c9f0e1","#d48652","#629b6d","#719dc3","#719dc3"]},AmSlicedChart:{outlineAlpha:1,outlineThickness:2,labelTickColor:"#FFFFFF",labelTickAlpha:.3,colors:["#495fba","#e8d685","#ae85c9","#c9f0e1","#d48652","#629b6d","#719dc3","#719dc3"]},AmRectangularChart:{zoomOutButtonColor:"#FFFFFF",zoomOutButtonRollOverAlpha:.15,zoomOutButtonImage:"lensWhite.png"},AxisBase:{axisColor:"#FFFFFF",axisAlpha:.3,gridAlpha:.1,gridColor:"#FFFFFF",dashLength:3},ChartScrollbar:{backgroundColor:"#000000",backgroundAlpha:.2,graphFillAlpha:.2,graphLineAlpha:0,graphFillColor:"#FFFFFF",selectedGraphFillColor:"#FFFFFF",selectedGraphFillAlpha:.4,selectedGraphLineColor:"#FFFFFF",selectedBackgroundColor:"#FFFFFF",selectedBackgroundAlpha:.09,gridAlpha:.15},ChartCursor:{cursorColor:"#FFFFFF",color:"#000000",cursorAlpha:.5},AmLegend:{color:"#e7e7e7"},AmGraph:{lineAlpha:.9},GaugeArrow:{color:"#FFFFFF",alpha:.8,nailAlpha:0,innerRadius:"40%",nailRadius:15,startWidth:15,borderAlpha:.8,nailBorderAlpha:0},GaugeAxis:{tickColor:"#FFFFFF",tickAlpha:1,tickLength:15,minorTickLength:8,axisThickness:3,axisColor:"#FFFFFF",axisAlpha:1,bandAlpha:.8},TrendLine:{lineColor:"#c03246",lineAlpha:.8},AreasSettings:{alpha:.8,color:"#FFFFFF",colorSolid:"#000000",unlistedAreasAlpha:.4,unlistedAreasColor:"#FFFFFF",outlineColor:"#000000",outlineAlpha:.5,outlineThickness:.5,rollOverColor:"#3c5bdc",rollOverOutlineColor:"#000000",selectedOutlineColor:"#000000",selectedColor:"#f15135",unlistedAreasOutlineColor:"#000000",unlistedAreasOutlineAlpha:.5},LinesSettings:{color:"#FFFFFF",alpha:.8},ImagesSettings:{alpha:.8,labelColor:"#FFFFFF",color:"#FFFFFF",labelRollOverColor:"#3c5bdc"},ZoomControl:{buttonRollOverColor:"#3c5bdc",buttonFillColor:"#f15135",buttonFillAlpha:.8,gridBackgroundColor:"#FFFFFF",buttonBorderAlpha:0,buttonCornerRadius:2,gridAlpha:.5,gridBackgroundColor:"#FFFFFF",homeIconFile:"homeIconWhite.gif",buttonIconAlpha:.6,gridAlpha:.2,buttonSize:20},SmallMap:{mapColor:"#FFFFFF",rectangleColor:"#FFFFFF",backgroundColor:"#000000",backgroundAlpha:.7,borderThickness:1,borderAlpha:.8},PeriodSelector:{color:"#e7e7e7"},PeriodButton:{color:"#e7e7e7",background:"transparent",opacity:.7,border:"1px solid rgba(255, 255, 255, .15)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",boxSizing:"border-box"},PeriodButtonSelected:{color:"#e7e7e7",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",opacity:1,boxSizing:"border-box"},PeriodInputField:{color:"#e7e7e7",background:"transparent",border:"1px solid rgba(255, 255, 255, .15)",outline:"none"},DataSetSelector:{color:"#e7e7e7",selectedBackgroundColor:"rgba(255, 255, 255, .25)",rollOverBackgroundColor:"rgba(255, 255, 255, .15)"},DataSetCompareList:{color:"#e7e7e7",lineHeight:"100%",boxSizing:"initial",webkitBoxSizing:"initial",border:"1px solid rgba(255, 255, 255, .15)"},DataSetSelect:{border:"1px solid rgba(255, 255, 255, .15)",outline:"none"}};AmCharts.themes.light={themeName:"light",AmChart:{color:"#000000",backgroundColor:"#FFFFFF"},AmCoordinateChart:{colors:["#67b7dc","#fdd400","#84b761","#cc4748","#cd82ad","#2f4074","#448e4d","#b7b83f","#b9783f","#b93e3d","#913167"]},AmStockChart:{colors:["#67b7dc","#fdd400","#84b761","#cc4748","#cd82ad","#2f4074","#448e4d","#b7b83f","#b9783f","#b93e3d","#913167"]},AmSlicedChart:{colors:["#67b7dc","#fdd400","#84b761","#cc4748","#cd82ad","#2f4074","#448e4d","#b7b83f","#b9783f","#b93e3d","#913167"],outlineAlpha:1,outlineThickness:2,labelTickColor:"#000000",labelTickAlpha:.3},AmRectangularChart:{zoomOutButtonColor:"#000000",zoomOutButtonRollOverAlpha:.15,zoomOutButtonImage:"lens.png"},AxisBase:{axisColor:"#000000",axisAlpha:.3,gridAlpha:.1,gridColor:"#000000"},ChartScrollbar:{backgroundColor:"#000000",backgroundAlpha:.12,graphFillAlpha:.5,graphLineAlpha:0,selectedBackgroundColor:"#FFFFFF",selectedBackgroundAlpha:.4,gridAlpha:.15},ChartCursor:{cursorColor:"#000000",color:"#FFFFFF",cursorAlpha:.5},AmLegend:{color:"#000000"},AmGraph:{lineAlpha:.9},GaugeArrow:{color:"#000000",alpha:.8,nailAlpha:0,innerRadius:"40%",nailRadius:15,startWidth:15,borderAlpha:.8,nailBorderAlpha:0},GaugeAxis:{tickColor:"#000000",tickAlpha:1,tickLength:15,minorTickLength:8,axisThickness:3,axisColor:"#000000",axisAlpha:1,bandAlpha:.8},TrendLine:{lineColor:"#c03246",lineAlpha:.8},AreasSettings:{alpha:.8,color:"#67b7dc",colorSolid:"#003767",unlistedAreasAlpha:.4,unlistedAreasColor:"#000000",outlineColor:"#FFFFFF",outlineAlpha:.5,outlineThickness:.5,rollOverColor:"#3c5bdc",rollOverOutlineColor:"#FFFFFF",selectedOutlineColor:"#FFFFFF",selectedColor:"#f15135",unlistedAreasOutlineColor:"#FFFFFF",unlistedAreasOutlineAlpha:.5},LinesSettings:{color:"#000000",alpha:.8},ImagesSettings:{alpha:.8,labelColor:"#000000",color:"#000000",labelRollOverColor:"#3c5bdc"},ZoomControl:{buttonRollOverColor:"#3c5bdc",buttonFillColor:"#3994e2",buttonBorderColor:"#3994e2",buttonFillAlpha:.8,gridBackgroundColor:"#FFFFFF",buttonBorderAlpha:0,buttonCornerRadius:2,gridColor:"#FFFFFF",gridBackgroundColor:"#000000",buttonIconAlpha:.6,gridAlpha:.6,buttonSize:20},SmallMap:{mapColor:"#000000",rectangleColor:"#f15135",backgroundColor:"#FFFFFF",backgroundAlpha:.7,borderThickness:1,borderAlpha:.8},PeriodSelector:{color:"#000000"},PeriodButton:{color:"#000000",background:"transparent",opacity:.7,border:"1px solid rgba(0, 0, 0, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",boxSizing:"border-box"},PeriodButtonSelected:{color:"#000000",backgroundColor:"#b9cdf5",border:"1px solid rgba(0, 0, 0, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",opacity:1,boxSizing:"border-box"},PeriodInputField:{color:"#000000",background:"transparent",border:"1px solid rgba(0, 0, 0, .3)",outline:"none"},DataSetSelector:{color:"#000000",selectedBackgroundColor:"#b9cdf5",rollOverBackgroundColor:"#a8b0e4"},DataSetCompareList:{color:"#000000",lineHeight:"100%",boxSizing:"initial",webkitBoxSizing:"initial",border:"1px solid rgba(0, 0, 0, .3)"},DataSetSelect:{border:"1px solid rgba(0, 0, 0, .3)",outline:"none"}};AmCharts.themes.patterns={themeName:"patterns",AmChart:{color:"#000000",backgroundColor:"#FFFFFF"},AmCoordinateChart:{colors:["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],patterns:[{url:"../amcharts/patterns/black/pattern1.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern2.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern3.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern4.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern5.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern6.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern7.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern8.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern9.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern10.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern11.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern12.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern13.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern14.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern15.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern16.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern17.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern18.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern19.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern20.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern21.png",width:4,height:4}]},AmStockChart:{colors:["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"]},AmPieChart:{depth3D:0,angle:0,labelRadius:10},AmSlicedChart:{outlineAlpha:.3,colors:["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],outlineThickness:1,outlineColor:"#000000",labelTickColor:"#000000",labelTickAlpha:.3,patterns:[{url:"../amcharts/patterns/black/pattern1.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern2.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern3.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern4.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern5.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern6.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern7.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern8.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern9.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern10.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern11.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern12.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern13.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern14.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern15.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern16.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern17.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern18.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern19.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern20.png",width:4,height:4},{url:"../amcharts/patterns/black/pattern21.png",width:4,height:4}]},AmRectangularChart:{zoomOutButtonColor:"#000000",zoomOutButtonRollOverAlpha:.15,zoomOutButtonImage:"lens.png"},AxisBase:{axisColor:"#000000",axisAlpha:.3,gridAlpha:.05,gridColor:"#000000"},ChartScrollbar:{backgroundColor:"#000000",backgroundAlpha:.13,graphFillAlpha:.4,selectedGraphFillAlpha:.7,graphLineAlpha:0,selectedBackgroundColor:"#FFFFFF",selectedBackgroundAlpha:.9,gridAlpha:.15},ChartCursor:{cursorColor:"#000000",color:"#FFFFFF",cursorAlpha:.5},AmLegend:{color:"#000000",markerBorderAlpha:.1,markerSize:20,switchColor:"#000000"},AmGraph:{lineAlpha:.4,fillAlphas:.5},AmAngularGauge:{faceAlpha:.5,facePattern:{url:"../amcharts/patterns/black/pattern1.png",width:4,height:4}},GaugeArrow:{color:"#000000",alpha:1,nailAlpha:1,innerRadius:"0%",nailRadius:15,startWidth:15,borderAlpha:1,radius:"70%",nailBorderAlpha:1},GaugeAxis:{tickColor:"#000000",tickAlpha:1,tickLength:15,minorTickLength:8,axisThickness:1,axisColor:"#000000",axisAlpha:1,bandAlpha:1},TrendLine:{lineColor:"#c03246",lineAlpha:.8},AreasSettings:{alpha:.8,color:"#000000",colorSolid:"#000000",unlistedAreasAlpha:.4,unlistedAreasColor:"#000000",outlineColor:"#FFFFFF",outlineAlpha:.5,outlineThickness:.5,rollOverColor:"#3c5bdc",rollOverOutlineColor:"#FFFFFF",selectedOutlineColor:"#FFFFFF",selectedColor:"#f15135",unlistedAreasOutlineColor:"#FFFFFF",unlistedAreasOutlineAlpha:.5},LinesSettings:{color:"#000000",alpha:.8},ImagesSettings:{alpha:.8,labelColor:"#000000",color:"#000000",labelRollOverColor:"#3c5bdc"},ZoomControl:{buttonRollOverColor:"#3c5bdc",buttonFillColor:"#f15135",buttonFillAlpha:.8,buttonBorderColor:"#000000",gridBackgroundColor:"#000000",gridAlpha:.8},SmallMap:{mapColor:"#000000",rectangleColor:"#FFFFFF",backgroundColor:"#FFFFFF",backgroundAlpha:.7,borderThickness:1,borderAlpha:.8},PeriodSelector:{color:"#000000"},PeriodButton:{color:"#000000",background:"transparent",opacity:.7,border:"1px solid rgba(0, 0, 0, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",boxSizing:"border-box"},PeriodButtonSelected:{color:"#000000",backgroundColor:"rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, .3)",MozBorderRadius:"5px",borderRadius:"5px",margin:"1px",outline:"none",opacity:1,boxSizing:"border-box"},PeriodInputField:{color:"#000000",background:"transparent",border:"1px solid rgba(0, 0, 0, .3)",outline:"none"},DataSetSelector:{color:"#000000",selectedBackgroundColor:"rgba(0, 0, 0, .25)",rollOverBackgroundColor:"rgba(0, 0, 0, .15)"},DataSetCompareList:{color:"#000000",lineHeight:"100%",boxSizing:"initial",webkitBoxSizing:"initial",border:"1px solid rgba(0, 0, 0, .3)"},DataSetSelect:{border:"1px solid rgba(0, 0, 0, .3)",outline:"none"}}